(this.webpackJsonproutertest=this.webpackJsonproutertest||[]).push([[0],Array(89).concat([function(e,t,a){e.exports=a.p+"static/media/openCamera_3.4b1287b9.png"},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){function a(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}a.keys=function(){return[]},a.resolve=a,e.exports=a,a.id=221},,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAABmJLR0QA/wD/AP+gvaeTAAACEElEQVRYhe2YO1LDMBBAH5+e0NHhkg7fAHMTjgAnwJwAjpCjiBskJV3SUYaSKhSSho0sr9bGzMCM34xHnpV2tZF3V1JgZmbmf3Ok9L0AtcHGPbAKY18UmcYq6HQ4VZRq4MZgfCHaG0U2Cs3ByAf+F6ZOXSs6NbBJZGtglxl3ZvAhiwP2oU1pQt8+vKeyPdD2jLPOAcDxAIflxGNphR0TQxzUuOMwGR6A5RSGLTEYeQqty/RVHMbkCh+DVTIup6ticXCBjx9pPC0/G3wSlBJnJew0fGf7KByHQd/3NGLCUuL0PdHpDkM+cQmHXvhHoRms8Z+gBp6D7IFuTbyjG2sRWS+jbs7eLmPXTIOtlv0kFHo5Ufpq4Aq/OufAFp8Mi/C8i3Gf+B3nIsjWwFvQ2Sa6JXtmHN0AzskiDcN3Dc0eMF2h/jUsSSIDOMoqfHJIZEKshd69orvEf+YfJUmOhvH1Teo2pYlK58G+Si93ktwxKiJXRa7ga5BVeCdHraBjWPmw2nMF2QF/PkksW92a7n1B7gYprkdeizaOWeLPiH0hYnJwFwy2wgEtXkp3kDMxpqVwBBtyWHgU76rRQNwpJBVwGd5fUVYuMuVpJmVJ93rQ8v1DG4uRIQ7Kom4yPgUWB2VQR4aehJ1ob4U8/jkw6uIekUE9lqjv6F4dVNuag9bKngZ63CU2BZmcY9J9eGZm5i/xBXKhv3WbrRntAAAAAElFTkSuQmCC"},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEwAACxMBAJqcGAAAA1xJREFUaIHtmctPU0EYxc9MW3lYDBFJeJmQmFJ2oAbqgoSHMSAQw8LElQobMUEI+A8YFi61JGxM3NSNcQH4iI9CBDEhmBbktaI2SKNUUIMhtCko7YwLLblgy52WabFJf6u5M6fzzenMfHMfQJIk+4KICvn3Z8UAyYnlYBTRVkj2hXkRpZAB9u15AwcfoBSH9jcwMRjYT0I0TTSr0aqmpSIdchroj9fgAYCCpnAeeCKi1Yp2qKZZ83HMuLdEukNpvg6Z6XtPvkhMQNCACDPuLdT0/BDSjnQeRZVBzoQKLaFIMFf0wVzRt2dZJtJmIEhp1pJqWSbSZyDeJLwB6UtoZrVAtSwT6Qa6xi6qlmWS8Eso4Q1EtIQGhubg/roWss0DPYC8HXXNxTYAgGXeFN3oBIjIwOOhWdjnPoVsKzIcx24DV43vAMTWQFRLqL1uBQ7zNBzmabTXrcgeU0Qk/B5IeAPSzwEl1U87Q9bf6XmEVudn1d8XnTrDAYAQXu14bxsNpYnKgM2pB5CrKIdGLQuVn/DCZPBu92Nf0O/YU71W9SfYqAzYF/4EU0MtC5kMXtyoXf57lQv7gl5xvV8Dl+5XEeANANC24L9yDjCElqcX6IAlsScymST8Jk54AweShYL0WnP+WefGrpMRxRAycKvs5Xa5e6IeVXlOVOY7AQBv3QaMfgm9Mf6bLLTbQGW+c7uuG/VhDcQjCyX8HkgaOGjCv99THGQilBToMCt4kDVgCB8E7oWCRHkv5HcB2m4AaDP6mtWCpGl5oOIw0YgMKNebGTidqVHVPrQvWgCABOAKpxF6vb5eU26lBLUiWllwzl5kjEw2qumE0mhGIK3JQzfuUYLCcBrGkU4pykT6YwwTlMAXrp0T/lGf5bsu0pfwFxo1OEA8NeWv1GaKcQxmjNjPE4DLiCstCxGAU52/BQyrYUUMq1Tnb5E1eEByGtUPTi0zSlrDtTMNu6YfnFoO1x4N0s+BI8O2fsbwYHc9ByxHXk8OyI4Xk4PsVwo6OJgreM0ZW9zc0HbEIlZMDByz2tc50VxmDIwxMK7RXMkeH/fEIpa0LGQsMRUyimZl3V09OwsAN710WFlPGSyOWZtLRlxpDzSbSF1LpZujyrrbG5oxAKCU+3doWWroF6xJksSf3/K7MGdJ2lvJAAAAAElFTkSuQmCC"},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAQAAADZc7J/AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAKqNIzIAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAAHdElNRQfjChMIAyU6IvVgAAACFklEQVRIx6XVTUhUURjG8d/kUDHlNGMMLYLKqLBSiEKQQtrUpg8IRHERLfqQqEX0AQltWrRo0UJoEVQEQVnYwhYtBKNFBS6asBY2EVpJO6MZU0gibVrMbTC1mrm+i3vPOZzzP8/7nPfcy/9jtyGNzhpxxWavZGwsYdUfcdC4d3br8127075aUS5iiQWIqITgGTL2SUtL6yh0F5QN2G5Qu1v2hAVUee2xXlVhAUlZZCUKa8MoyGFURDwsIIsp44UkwqSQA1nJ+SggG05BhcoAkAunICFvfD4KquT8/BugYs72n62k0aA3K4UWH7WCmE4PgtEjsmKgVkZrUEYFBUmIghpXrTMmjmrdlnuLhTrsF7fIN01umhAXKQJyv1OIueiFN+oMYKc+Pc4hpUedekScd02z59MOsehBVL9BWwyBQzY57KFm1fp1O+MHulWqN6zNNkulNAcprdbsS9QGDUFtTUnZIYNJKx13G0z65JgJPNEE2gINg05qJF8wAyuLX5pFqovm1vzjUJPy0wHlR1K+/LswI6IlzDlhFci74f3fAHvVyrsrYR+eGXBU1CeduKTLKA744PpsfsGDtEeGHHNZv6e67PLZveLFXQu6iv7P6UGHlyLocQcMu1CeB1uDv80ai0HcjnIAT7XIyxizy3r3DMs6pbd0wJniyP3g3VDK/gVA4j9zIpZJYqHYjKJLEDEiVdpec8bIL4m0iyHasqUnAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE5LTEwLTE5VDA4OjAzOjM3KzAwOjAwEbSy1wAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxOS0xMC0xOVQwODowMzozNyswMDowMGDpCmsAAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAAAElFTkSuQmCC"},,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAD5ElEQVRoge2YT2gcZRjGf+/MsqW0ObQotQUJ2N7aeFNsTorHqq0nxYNSCx6EBKFNlt1FOkIyM/mDqbZeChVRxL+YUlBvsYL/ehMLHkRjijU0YuLBFp1kd14PndI0pN9+38wEFfY5Lfu+z/O8z3w7O9830EUXXfyvIWWKaRBsJ0kOINKP6i5gV1aaR2Qe+BrVjyWKFsvyLCWANpv9pOlx4GHA79DeBmaAlySKvizqXSiANpt3k6avAodySpzF8wZldPSXvDPkDqD1+n5gGtiRVyPDAp53SEZHv8lD9vKQtF5/BDhP8eEBdpCmn2eaznBeAW007kX1K2BLHkMDrpKm/TI2dtGF5BRAh4d78P2LQK/TaPa4RLvdJ+Pjf9oSKk7yvn8Mm+Gvr9A5YDb75h7gMUT6OzB7qVSOAoHtSNYroENDd1Gp/Ij5p7OE6vPE8fsCegsfhEbjCVRfA7YbNK7Rau2RiYkrNnPZ38S+/wzm4edotfZKHL+3dngAAZUwfJdWay8wZ9DZQqXytO1Y9gFEDhrrqodtrppMTFxB5NkOWmavVbAKoPX6ncADhpYzEsfnbU0lDD8Dzty+QfZnnh1huwJ7MN0vafqmpc5qvGWoCZ6320bENsBOY3Xz5u8sdW5C1cxpt82eGewCqN5hrM/PX7PSWY2lpavGuojZM4PtCvxhrG7bZnW1HDkLNjJ2AXz/1w71B610bnH2HjLWReasZKzMlpdnjXXVIR0Y2GSlBWS9xwwtLapVs2cGqwDZ/7tpk7WPnp7jNloAbN0aAPsMHTMSBOZ7JIPLXuhToO+2VdWaNhoLVKsnJQjSdVuCwCNJBoHhDl4f2Q5l/yT2vOmOWqonSJIZrdX6dNVzQ0G0VusjSWaAqQ6+LUTO2o5lv5kDoV6/ANxnSbkE/JR93o3tFlz1dYnjI7ZzWf+EBFRFTqD6tiWlF/dzQ4rImAvB7UhZrX6IeSdZFB9IFP3gQnAKIEGwDBx1Gskef+P7dVeS+6E+iqa5/l6nXKjGMjLysyvNOUB2WBkAEleuAbMkyXgeYq7XKhJF3yMylIe7DhTVIzI19Vcecq4AAIThKeCT3PybiFwOQ2uRO4CAsrJyGLicVwO4wOJiUIBfYAUAmZz8DZFHAffzgMjvqD4pp0+vFJmhUAAACcNvgadY502EASu0249LHM8V9S8cAECi6Byqg/YEeU7Gxr4ow7uUAAASx6ewe8i9KGH4Rlm+pQUAkCh6GagZWkKJopFSPcsUuwFtNAZQfWWN/iRRNLzeW7si2JAAAFqrHcTz3gE2IfKChOHJjfLaMGizeb82Ggf+7Tm66KKL/zD+AQfqKeBKBfPsAAAAAElFTkSuQmCC"},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAACqElEQVRoge2Yv2sTYRjHv88loTHUqmChdGwXqUOHgFLQ9HRqorEhJR1dIl30D9BFSgabP0D3IujgYarGJINoYwWDJR1q0arQxUFbWlsp/qhtco+DQRA9vffJhbNwn+kI932e53PH+/LmgF0OOV0wlbrlW97ZE9ag9bJG3QBAJr8zYS51Bb7OGcZo3cl+jgmcTBR768QXAQwD6LS4bRXAXR9T9tGd2JITfZsWiEaLbV+CPAHgAoCAzdgOgKuhLbpUKsW+NdO/KQE9VejiGuUAHhB2f+qv1ZIP7w2vSGcQCxyNFjuCQa4A6JPWaPBya4sGnpVim5KwJmo5Pq61Bfkmmh8eAPqCQb4BsOhhigQiz4+kCDglyVpwOpIopiRBZYHwWDVAzFckzf4GESbCY1W7m8BPlAXaV1d0AD2qORv07P2wPKgaUhZg4jOqGdu165pybWUBYpJtmbZQ344li7hbkLEHkXJticBBQcYmbHUEsUQi8FGQscuGakAi8F6QaVlt9UUMPFHN2IWJlWtL3sB9QcYWGlNBOaMa6PR/fgDgjWrOBq8btZVQFjCM0TqDMqq5f8GEjOTfmvA4zTSYLObASMjyv40x9XgqOgIQqyZlx2kQb/t8aQCLsvwvLG77tXOS4QGxAFAxhtapZkYAzElrgFGlmhmpGEPr0hJiAQAo5+NrtC90jIEsAFMhWmcgS/tDx8v5+FozMzj2VUIfyR8ymc4T01kAHRa3bTLxdY34Wvl2/JUTfR3/LqTr03468OmwCe0ygGTj55wGM8Mb7S/K5RM1J/v5nSwGAI0B5/VkYYH5hwARFqZz8XmnewFNroH/AU/AbTwBt/EE3MYTcBtPwG08AbfxBNzGE3AbT8AKk+ntn66dpmUCM/2zkwxKMyg90z872ao+u57vy1/CXMGnbk8AAAAASUVORK5CYII="},,function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAABmJLR0QA/wD/AP+gvaeTAAAAXUlEQVRoge3PSQqAMBAAwej//6w3keCCtxaqbgnDMD0GADCW6b1N/9vF7PnvaeeXXXe73+aO+9eXo35DSI2QGiE1QmqE1AipEVIjpEZIjZAaITVCaoTUCKkRAgAE7TYOCUA+n7UKAAAAAElFTkSuQmCC"},,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){e.exports=a(1057)},,,,,,function(e,t,a){},,,,,function(e,t,a){},function(e,t,a){e.exports=a.p+"static/media/Halcyon.10080290.jpg"},function(e,t,a){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){},function(e,t){},,,,,function(e,t){},,function(e,t){},,,,,,,,,,,,,,,,,function(e,t,a){},function(e,t,a){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},,,function(e,t,a){},function(e,t,a){},function(e,t,a){},,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){e.exports=a.p+"static/media/addIcon.b27c4daa.png"},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,,,,,,,,,,,,function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAAA0CAYAAADFeBvrAAAFgklEQVRoQ+1ZbUxTVxg+p9+1fJQNSqHSVirCWoIoBIPGKMHFOaMjZpIl20wWI39cNpNt2c91+zsXs82YjCz7zOIGSzacYdFp1LnsA0UMQiEtbWkp2FvYKEgtLe09y/3RpMFz23Pubefm4CfnfZ+P8773PefeQvCI/cFHzA9YM/Rvr+hahf73FRo/eLBw0ePRatVaebJIufDNzp3zdrudzdfG5LzlRu12RcXZvneKFsKvSFlWjROOIGAjavXlWWv1ser+fl8uzeXMUE9Pj/TpN+0XNJFIO43AhEwWdtdbt9Zd/MFLk8cXmxND3ta2XWa356oYQWFt8ZclzuEjYjC4XNGGAnWbXzP8FT4pVgiXH1cqvcopZ7UYLFGGQo3bjpfNBE+LEbA6d1mpmFBPuWqEYgo25GzfX11zZ8SdjTgJQICF8Nc4QHElAvUyABoAAJJMeeHiok9KXHeOZsPGrQs2lNSb4xIWyflIwxCdKGH87+PW/9QbrSUsHIAAaPjy3Y2Nxo0X+6ZoTQkyNN+47YR2JngKR8YCEP9DkdRuDwSi2cREy00/qRDYg4uLSaUh1V1PeTaM1euCDLHl5gRESIojc5RqlDaHI04qJKYzjSgAsGGxmm0Vtv7+ICmWoCk3umOP0epyYQ/DOYgOlDH+8zQC7ABI3tKZkricJY2mr9Dr6KDBo67QYo3to8KFpS4MCQtDPmzVsgmKlpvOqhB4bnUcgjApYSZl2fLT16kNxSstQXki8UBvxyE8p2Qmn6EhT8VOVFqqLImEH5vLTEoghIgUl9oQ3/OzDMAL6pDvK1Li9DjEjXGetnNYWwptV3uXSHGpDSGdCbtbiwrp/uKAp5+U+IH24sEdMhh1W4euz5LiUhtidaYkxByMEQBeLwj53iMlTo+72dQkb5qaw07GYFOLruLH3vwZSuo3RCUsq1otPAHBuJzxPSHE0KzevKuURdjLrWNXi9LW20t8DFBXaNm46ZZyObYFJ/ztkE9qB4D65S2uM03KATDhMGHIR6WRKpgjZOqbX9SFZr/AkccA+FYV8h2mqZK30lxnTqAxXM6KXBZSTLupbgvUhq7Y7bLdZz5d4RPNQHRAT3i4jlqtCutchLsiYS+rjL78mH544GOaDaI2xIFHjTXjquV4LR9RGKJXSxj/B5mEuAyG9ZYVGddP/DdvyjOI4xNk6Na+fWVbBh2hTIIRAIvzQPLshyHv5fTnaqay2vh4Ivm1AoDWTPnz2uIzjzmHj9NUR7AhLnFpY/05zeK9AxSE3PlFtIEsBAkp4+N9NcnESUTAB5DUm1YkLKC6a5FsgK+uZqv550tDJLGrY0QZGm97qrZ2dGxcCDFfTkSz7lqBd2y3UExRhjjSRYu1r/Be5KBQAel5CAAEmUkpzWU0pxVKgbHl5iREKON3AhLDkybj7g03rl8jieWLEV0hDti948nmapfzhhghEZVisMDvahaDIWrKrSa+Z667UnA/Krj3e0+/K+vs7MS+udKYzEmFOEKEEERc6xGO5nSRd81VhyoHfvmORnheWy4FHmhtaze4PZdohMVUygmV3yn4w2JehkI66H1z3W31/ehmUlODHXsVzd3dvHdDUpxUXM5aLgXI/Qpx+OU3EiRCgpUVL1Xc/v0zkljSmJwb4oj9Ta0dVVMzGZ+JuEI+rQxMrCcVShqXF0McebSqxqmKxXmfjd+eP7Ru+6lTWb+ukhrJW8ulgG92dcmbvr+AfXVmdKUn9COD2O/etAbyPhTSCQINLUcMQebz9P/FZLI51Yy7TKzwf2Rs40iiBotXtZIwp9Y8HXu1lu7uhf+sIU74/KaGk/LlWP10Q8PR2vO90/kyw+HmbSjkU3Qm7DVDD2vnSXnXKkS6Uw8rbq1CD2vnSXn/BpDVvUSFr1WtAAAAAElFTkSuQmCC"},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,,,,function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},,,,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(38),s=a.n(o),i=a(1),l=a.n(i),c=a(5),u=a(6),d=a(8),m=a(7),p=a(9),f=a(21),h=a(145),g=(a(492),function(){return r.a.createElement("h3",null,"Not found")}),y=a(37),v=a(430),C=a.n(v),D=a(425),E=a(1064),b=a(1065),S=a(330),O=a(1106),k=a(1107),w=a(1109),F=a(301),x=a(57),T=a(1110),N=a(46),j=a.n(N),P=a(41),A=a.n(P),M=a(20),_=a(1108),I=(a(497),a(1139)),R=a(74),L=Object(R.a)((function(e){return{typo:{color:"rgb(255,255,255)"}}}));function V(){var e=L();return r.a.createElement(h.b,null,(function(t){var a=t.location.pathname.split("/").filter((function(e){return e}));return r.a.createElement(I.a,{"aria-label":"Breadcrumb",className:e.typo},a.map((function(t,n){var o=n===a.length-1,s="/".concat(a.slice(0,n+1).join("/"));return o?r.a.createElement(x.a,{className:e.typo,key:s},t):r.a.createElement(f.b,{className:e.typo,to:s,key:s},t)})))}))}var B=a(432),U=a.n(B),q=a(433),G=a.n(q),W=a(434),H=a.n(W),Q=a(435),z=a.n(Q),Y=a(436),K=a.n(Y),J=a(437),Z=a.n(J),X=a(438),$=a.n(X),ee=a(439),te=a.n(ee),ae=a(440),ne=a.n(ae),re=a(441),oe=a.n(re),se=a(442),ie=a.n(se),le=a(431),ce=a.n(le),ue=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={mobileOpen:!1,listM:!1,listA:!1,listB:!1,listC:!1,listCB:!1,listCT:!1,listBF:!1,listPM:!1,listQty:!1,listFG:!1,listFGB:!1,listFGA:!1,listEHS:!1,listRMA:!1,listRMB:!1,listRMC:!1,listFGC:!1,listFGD:!1,listMT:!1,listST:!1,listCTL:!1,listCR:!1,listMTB:!1,listMTT:!1,listPMR:!1,listFGR:!1},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes,o=(t.location.pathname,t.children),s=(t.writers,this.state.mobileOpen),i=this.state,l=(i.listM,i.listA),c=i.listB,u=i.listC,d=i.listCB,m=i.listCT,p=i.listBF,h=i.listPM,g=i.listPMB,y=i.listQty,v=i.listFG,C=i.listFGB,N=i.listFGA,P=i.listEHS,M=i.listRM,I=i.listRMA,R=i.listRMB,L=i.listRMC,B=i.listFGC,q=i.listFGD,W=i.listMT,Q=i.listST,Y=i.listCTL,J=i.listCR,X=i.listMTB,ee=i.listMTT,ae=i.listPMR,re=i.listFGR,se=function(){e.setState({mobileOpen:!e.state.mobileOpen})},le=r.a.createElement("div",{className:"mdsp mdsp-defaults"},r.a.createElement(D.a,{smDown:!0},r.a.createElement("div",{className:a.toolbar})),r.a.createElement("div",{className:a.test}),r.a.createElement(E.a,{"aria-labelledby":"nested-list-subheader",className:"list"},r.a.createElement(b.a,{button:!0,onClick:function(){e.setState({listA:!e.state.listA})}},r.a.createElement(U.a,null),r.a.createElement(S.a,{className:a.padding10,primary:r.a.createElement("b",null,"Basic")}),l?r.a.createElement(j.a,null):r.a.createElement(A.a,null)),r.a.createElement(O.a,{in:l,timeout:"auto",unmountOnExit:!0},r.a.createElement(E.a,{component:"div",disablePadding:!0,dense:!0},r.a.createElement(b.a,{button:!0,className:a.nested,component:f.b,to:"/Home/Basic/Country"},r.a.createElement(S.a,{primary:"Country"})),r.a.createElement(b.a,{button:!0,className:a.nested,component:f.b,to:"/Home/Basic/Cluster"},r.a.createElement(S.a,{primary:"Branch"})),r.a.createElement(b.a,{button:!0,className:a.nested,component:f.b,to:"/Home/Basic/Factory"},r.a.createElement(S.a,{primary:"Factory List"})),r.a.createElement(b.a,{button:!0,className:a.nested,component:f.b,to:"/Home/Basic/ProductGrade"},r.a.createElement(S.a,{primary:"Product Grade"})),r.a.createElement(b.a,{button:!0,className:a.nested,component:f.b,to:"/Home/Basic/CountryGrade"},r.a.createElement(S.a,{primary:"Country Grade"})),r.a.createElement(b.a,{button:!0,className:a.nested,component:f.b,to:"/Home/Basic/NCCategory"},r.a.createElement(S.a,{primary:"NC Category"})),r.a.createElement(b.a,{button:!0,className:a.nested,component:f.b,to:"/Home/Basic/NCType"},r.a.createElement(S.a,{primary:"NC Type"})),r.a.createElement(b.a,{button:!0,className:a.nested,component:f.b,to:"/Home/Basic/NCHandling"},r.a.createElement(S.a,{primary:"NC Handling Method"})),r.a.createElement(b.a,{button:!0,className:a.nested,component:f.b,to:"/Home/Basic/QPRReason"},r.a.createElement(S.a,{primary:"QPR Reason"})),r.a.createElement(b.a,{button:!0,className:a.nested,component:f.b,to:"/Home/Basic/MachineGroup"},r.a.createElement(S.a,{primary:"Machine Group"})),r.a.createElement(b.a,{button:!0,className:a.nested,component:f.b,to:"/Home/Basic/Machine"},r.a.createElement(S.a,{primary:"Machine Name"})),r.a.createElement(b.a,{button:!0,className:a.nested,component:f.b,to:"/Home/Basic/MachineBreakdownReason"},r.a.createElement(S.a,{primary:"Machine Breakdown Reason"})),r.a.createElement(b.a,{button:!0,className:a.nested,component:f.b,to:"/Home/Basic/Buyer"},r.a.createElement(S.a,{primary:"Buyer"})),r.a.createElement(b.a,{button:!0,className:a.nested,component:f.b,to:"/Home/Basic/WasteWaterStandard"},r.a.createElement(S.a,{primary:"Waste Water Standard"})),r.a.createElement(b.a,{button:!0,className:a.nested,component:f.b,to:"/Home/Basic/EnergyStandard"},r.a.createElement(S.a,{primary:"Standard Energy Conversion"})),r.a.createElement(b.a,{button:!0,className:a.nested,component:f.b,to:"/Home/Basic/PackingType"},r.a.createElement(S.a,{primary:"Packing Type"})),r.a.createElement(b.a,{button:!0,className:a.nested,component:f.b,to:"/Home/Basic/ContaminationType"},r.a.createElement(S.a,{primary:"Contamination Type"})),r.a.createElement(b.a,{button:!0,className:a.nested,component:f.b,to:"/Home/Basic/Process"},r.a.createElement(S.a,{primary:"Factory Process"})),r.a.createElement(b.a,{button:!0,className:a.nested,component:f.b,to:"/Home/Basic/SubProcess"},r.a.createElement(S.a,{primary:"Factory Sub Process"})),r.a.createElement(b.a,{button:!0,className:a.nested,component:f.b,to:"/Home/Basic/Tools"},r.a.createElement(S.a,{primary:"Tools"})),r.a.createElement(b.a,{button:!0,className:a.nested,component:f.b,to:"/Home/Basic/ChemicalList"},r.a.createElement(S.a,{primary:"Chemical List"})),r.a.createElement(b.a,{button:!0,className:a.nested,component:f.b,to:"/Home/Basic/TrainingType"},r.a.createElement(S.a,{primary:"Training Type"})))),r.a.createElement(k.a,null),r.a.createElement(b.a,{button:!0,onClick:function(){e.setState({listBF:!e.state.listBF})}},r.a.createElement("img",{src:ce.a,width:"25",height:"25"}),r.a.createElement(S.a,{className:a.padding10,primary:r.a.createElement("b",null,"Basic-Factory")}),p?r.a.createElement(j.a,null):r.a.createElement(A.a,null)),r.a.createElement(O.a,{in:p,timeout:"auto",unmountOnExit:!0},r.a.createElement(E.a,{component:"div",disablePadding:!0,dense:!0},r.a.createElement(b.a,{button:!0,className:a.nested,component:f.b,to:"/Home/Basic-Factory/Factory Machine List"},r.a.createElement(S.a,{primary:"Factory Machine List"})),r.a.createElement(b.a,{button:!0,className:a.nested,component:f.b,to:"/Home/Basic-Factory/Factory Basic Data"},r.a.createElement(S.a,{primary:"Factory Basic Data"})),r.a.createElement(b.a,{button:!0,className:a.nested,component:f.b,to:"/Home/Basic-Factory/Factory Energy Conversion"},r.a.createElement(S.a,{primary:"Factory Energy Conversion"})),r.a.createElement(b.a,{button:!0,className:a.nested,component:f.b,to:"/Home/Basic-Factory/Factory Plan Working Days"},r.a.createElement(S.a,{primary:"Factory Plan Working Days"})),r.a.createElement(b.a,{button:!0,className:a.nested,component:f.b,to:"/Home/Basic-Factory/MandatoryDocument"},r.a.createElement(S.a,{primary:"Mandatory Document"})),r.a.createElement(b.a,{button:!0,className:a.nested,component:f.b,to:"/Home/Basic-Factory/Factory Trolley"},r.a.createElement(S.a,{primary:"FactoryTrolley"})),r.a.createElement(b.a,{button:!0,className:a.nested,component:f.b,to:"/Home/Basic-Factory/Shift"},r.a.createElement(S.a,{primary:"Shift"})),r.a.createElement(b.a,{button:!0,className:a.nested,component:f.b,to:"/Home/Basic-Factory/Maintenance Indicator"},r.a.createElement(S.a,{primary:"Maintenance Indicator"})))),r.a.createElement(k.a,null),r.a.createElement(b.a,{button:!0,onClick:function(){e.setState({listQty:!e.state.listQty})}},r.a.createElement(G.a,null),r.a.createElement(S.a,{className:a.padding10,primary:r.a.createElement("b",null,"Quality")}),y?r.a.createElement(j.a,null):r.a.createElement(A.a,null)),r.a.createElement(O.a,{in:y,timeout:"auto",unmountOnExit:!0},r.a.createElement(E.a,{component:"div",disablePadding:!0,dense:!0},r.a.createElement(b.a,{button:!0,className:a.nested,component:f.b,to:"/Home/Quality/MonthlyCPK"},r.a.createElement(S.a,{primary:"Monthly CPK"})),r.a.createElement(b.a,{button:!0,className:a.nested,component:f.b,to:"/Home/Quality/QualityProblemReport"},r.a.createElement(S.a,{primary:"Quality Problem Report"})),r.a.createElement(b.a,{button:!0,className:a.nested,component:f.b,to:"/Home/Quality/ProcessChange"},r.a.createElement(S.a,{primary:"Process Change"})))),r.a.createElement(k.a,null),r.a.createElement(b.a,{button:!0,onClick:function(){e.setState({listPM:!e.state.listPM})}},r.a.createElement(H.a,null),r.a.createElement(S.a,{className:a.padding10,primary:r.a.createElement("b",null,"Production Management")}),h?r.a.createElement(j.a,null):r.a.createElement(A.a,null)),r.a.createElement(O.a,{in:h,timeout:"auto",unmountOnExit:!0},r.a.createElement(E.a,{component:"div",disablePadding:!0,dense:!0},r.a.createElement(b.a,{button:!0,className:a.nested,onClick:function(){e.setState({listPMB:!e.state.listPMB})}},r.a.createElement(S.a,{primary:"Transaction"}),g?r.a.createElement(j.a,null):r.a.createElement(A.a,null)),r.a.createElement(O.a,{in:g,timeout:"auto",unmountOnExit:!0},r.a.createElement(E.a,{component:"div",disablePadding:!0,dense:!0},r.a.createElement(b.a,{button:!0,className:a.multiNested,component:f.b,to:"/Home/Production Management/Transaction/Daily Production"},r.a.createElement(S.a,{primary:"Daily Production"})),r.a.createElement(b.a,{button:!0,className:a.multiNested,component:f.b,to:"/Home/Production Management/Transaction/NC"},r.a.createElement(S.a,{primary:"NC (Off Spec Product)"})),r.a.createElement(b.a,{button:!0,className:a.multiNested,component:f.b,to:"/Home/Production Management/Transaction/NC Rework"},r.a.createElement(S.a,{primary:"NC Rework"})),r.a.createElement(b.a,{button:!0,className:a.multiNested,component:f.b,to:"/Home/Production Management/Transaction/Energy Consumption"},r.a.createElement(S.a,{primary:"Energy Consumption"})),r.a.createElement(b.a,{button:!0,className:a.multiNested,component:f.b,to:"/Home/Production Management/Transaction/Manning"},r.a.createElement(S.a,{primary:"Manning"})),r.a.createElement(b.a,{button:!0,className:a.multiNested,component:f.b,to:"/Home/Production Management/Transaction/Dryer SPC Data"},r.a.createElement(S.a,{primary:"Dryer SPC Data"})))),r.a.createElement(b.a,{button:!0,className:a.nested,onClick:function(){e.setState({listPMR:!e.state.listPMR})}},r.a.createElement(S.a,{primary:"Report"}),ae?r.a.createElement(j.a,null):r.a.createElement(A.a,null)),r.a.createElement(O.a,{in:ae,timeout:"auto",unmountOnExit:!0},r.a.createElement(E.a,{component:"div",disablePadding:!0,dense:!0},r.a.createElement(b.a,{button:!0,className:a.multiNested,component:f.b,to:"/Home/Production Management/Report/NCData"},r.a.createElement(S.a,{primary:"NC Data"})),r.a.createElement(b.a,{button:!0,className:a.multiNested,component:f.b,to:"/Home/Production Management/Report/ReworkData"},r.a.createElement(S.a,{primary:"Rework Data"})))),r.a.createElement(k.a,null))),r.a.createElement(k.a,null),r.a.createElement(b.a,{button:!0,onClick:function(){e.setState({listEHS:!e.state.listEHS})}},r.a.createElement(z.a,null),r.a.createElement(S.a,{className:a.padding10,primary:r.a.createElement("b",null,"EHS")}),P?r.a.createElement(j.a,null):r.a.createElement(A.a,null)),r.a.createElement(O.a,{in:P,timeout:"auto",unmountOnExit:!0},r.a.createElement(E.a,{component:"div",disablePadding:!0,dense:!0},r.a.createElement(b.a,{button:!0,className:a.nested,component:f.b,to:"/Home/EHS/WaterConsumption"},r.a.createElement(S.a,{primary:"Water Consumption"})),r.a.createElement(b.a,{button:!0,className:a.nested,component:f.b,to:"/Home/EHS/EffluentTestResult"},r.a.createElement(S.a,{primary:"Monthly Effluent Test Result"})),r.a.createElement(b.a,{button:!0,className:a.nested,component:f.b,to:"/Home/EHS/WasteManagement"},r.a.createElement(S.a,{primary:"Waste Management"})),r.a.createElement(b.a,{button:!0,className:a.nested,component:f.b,to:"/Home/EHS/ChemicalConsumption"},r.a.createElement(S.a,{primary:"Chemical Consumption"})),r.a.createElement(b.a,{button:!0,className:a.nested,component:f.b,to:"/Home/EHS/FireIncident"},r.a.createElement(S.a,{primary:"Fire Incident"})),r.a.createElement(b.a,{button:!0,className:a.nested,component:f.b,to:"/Home/EHS/SafetyIncident"},r.a.createElement(S.a,{primary:"Safety Incident"})),r.a.createElement(b.a,{button:!0,className:a.nested,component:f.b,to:"/Home/EHS/MonthlyEHSMetrics"},r.a.createElement(S.a,{primary:"Monthly EHS Metrics"})),r.a.createElement(b.a,{button:!0,className:a.nested,component:f.b,to:"/Home/EHS/TrainingHours"},r.a.createElement(S.a,{primary:"Training Hours"})),r.a.createElement(b.a,{button:!0,className:a.nested,component:f.b,to:"/Home/EHS/EHSPerformance"},r.a.createElement(S.a,{primary:"EHS Performance"})))),r.a.createElement(k.a,null),r.a.createElement(b.a,{button:!0,onClick:function(){e.setState({listRM:!e.state.listRM})}},r.a.createElement(K.a,null),r.a.createElement(S.a,{className:a.padding10,primary:r.a.createElement("b",null,"Raw Materials")}),M?r.a.createElement(j.a,null):r.a.createElement(A.a,null)),r.a.createElement(O.a,{in:M,timeout:"auto",unmountOnExit:!0},r.a.createElement(E.a,{component:"div",disablePadding:!0,dense:!0},r.a.createElement(b.a,{button:!0,className:a.nested,onClick:function(){e.setState({listRMA:!e.state.listRMA})}},r.a.createElement(S.a,{primary:"Basic"}),I?r.a.createElement(j.a,null):r.a.createElement(A.a,null)),r.a.createElement(O.a,{in:I,timeout:"auto",unmountOnExit:!0},r.a.createElement(E.a,{component:"div",disablePadding:!0,dense:!0},r.a.createElement(b.a,{button:!0,className:a.multiNested,component:f.b,to:"/Home/RawMaterial/Basic/StorageLocation"},r.a.createElement(S.a,{primary:"Storage Location"})),r.a.createElement(b.a,{button:!0,className:a.multiNested,component:f.b,to:"/Home/RawMaterial/Basic/HSMaster"},r.a.createElement(S.a,{primary:"HS Master"})),r.a.createElement(b.a,{button:!0,className:a.multiNested,component:f.b,to:"/Home/RawMaterial/Basic/SourceArea"},r.a.createElement(S.a,{primary:"RM Source Area"})),r.a.createElement(b.a,{button:!0,className:a.multiNested,component:f.b,to:"/Home/RawMaterial/Basic/Village"},r.a.createElement(S.a,{primary:"RM Village"})),r.a.createElement(b.a,{button:!0,className:a.multiNested,component:f.b,to:"/Home/RawMaterial/Basic/RMGrade"},r.a.createElement(S.a,{primary:"RM Grade"})),r.a.createElement(b.a,{button:!0,className:a.multiNested,component:f.b,to:"/Home/RawMaterial/Basic/Supplier"},r.a.createElement(S.a,{primary:"RM Supplier"})),r.a.createElement(b.a,{button:!0,className:a.multiNested,component:f.b,to:"/Home/RawMaterial/Basic/RMType"},r.a.createElement(S.a,{primary:"RM Type"})),r.a.createElement(b.a,{button:!0,className:a.multiNested,component:f.b,to:"/Home/RawMaterial/Basic/PurchasingPersonnel"},r.a.createElement(S.a,{primary:"RM Purchasing Personnel"})),r.a.createElement(b.a,{button:!0,className:a.multiNested,component:f.b,to:"/Home/RawMaterial/Basic/RLot"},r.a.createElement(S.a,{primary:"RM R Lot"})))),r.a.createElement(b.a,{button:!0,className:a.nested,onClick:function(){e.setState({listRMB:!e.state.listRMB})}},r.a.createElement(S.a,{primary:"Transaction"}),R?r.a.createElement(j.a,null):r.a.createElement(A.a,null)),r.a.createElement(O.a,{in:R,timeout:"auto",unmountOnExit:!0},r.a.createElement(E.a,{component:"div",disablePadding:!0,dense:!0},r.a.createElement(b.a,{button:!0,className:a.multiNested,component:f.b,to:"/Home/RawMaterial/Transaction/Procurement"},r.a.createElement(S.a,{primary:"RM Procurement"})),r.a.createElement(b.a,{button:!0,className:a.multiNested,component:f.b,to:"/Home/RawMaterial/Transaction/RLotAllocation"},r.a.createElement(S.a,{primary:"RM R Lot Allocation"})),r.a.createElement(b.a,{button:!0,className:a.multiNested,component:f.b,to:"/Home/RawMaterial/Transaction/TSWetProcess"},r.a.createElement(S.a,{primary:"TS to Wet Process"})),r.a.createElement(b.a,{button:!0,className:a.multiNested,component:f.b,to:"/Home/RawMaterial/Transaction/TStoHS"},r.a.createElement(S.a,{primary:"TS to HS"})),r.a.createElement(b.a,{button:!0,className:a.multiNested,component:f.b,to:"/Home/RawMaterial/Transaction/TSDryProcess"},r.a.createElement(S.a,{primary:"TS to Dry Process"})),r.a.createElement(b.a,{button:!0,className:a.multiNested,component:f.b,to:"/Home/RawMaterial/Transaction/CloseStorage"},r.a.createElement(S.a,{primary:"Close Storage"})),r.a.createElement(b.a,{button:!0,className:a.multiNested,component:f.b,to:"/Home/RawMaterial/Transaction/CloseWB"},r.a.createElement(S.a,{primary:"Close WB"})),r.a.createElement(b.a,{button:!0,className:a.multiNested,component:f.b,to:"/Home/RawMaterial/Transaction/CloseHS"},r.a.createElement(S.a,{primary:"Close HS"})))),r.a.createElement(b.a,{button:!0,className:a.nested,onClick:function(){e.setState({listRMC:!e.state.listRMC})}},r.a.createElement(S.a,{primary:"Report"}),L?r.a.createElement(j.a,null):r.a.createElement(A.a,null)),r.a.createElement(O.a,{in:L,timeout:"auto",unmountOnExit:!0},r.a.createElement(E.a,{component:"div",disablePadding:!0,dense:!0},r.a.createElement(b.a,{button:!0,className:a.multiNested,component:f.b,to:"/Home/RawMaterial/Report/MapArea"},r.a.createElement(S.a,{primary:"Map Area"})),r.a.createElement(b.a,{button:!0,className:a.multiNested,component:f.b,to:"/Home/RawMaterial/Report/DataEntryProgress"},r.a.createElement(S.a,{primary:"Data Entry Progress"})))))),r.a.createElement(k.a,null),r.a.createElement(b.a,{button:!0,onClick:function(){e.setState({listFG:!e.state.listFG})}},r.a.createElement(Z.a,null),r.a.createElement(S.a,{className:a.padding10,primary:r.a.createElement("b",null,"Finished Goods")}),v?r.a.createElement(j.a,null):r.a.createElement(A.a,null)),r.a.createElement(O.a,{in:v,timeout:"auto",unmountOnExit:!0},r.a.createElement(E.a,{component:"div",disablePadding:!0,dense:!0},r.a.createElement(b.a,{button:!0,className:a.nested,onClick:function(){e.setState({listFGA:!e.state.listFGA})}},r.a.createElement(S.a,{primary:"Basic"}),N?r.a.createElement(j.a,null):r.a.createElement(A.a,null)),r.a.createElement(O.a,{in:N,timeout:"auto",unmountOnExit:!0},r.a.createElement(E.a,{component:"div",disablePadding:!0,dense:!0},r.a.createElement(b.a,{button:!0,className:a.multiNested,component:f.b,to:"/Home/FinishedGood/Basic/Destination"},r.a.createElement(S.a,{primary:"Destination"})),r.a.createElement(b.a,{button:!0,className:a.multiNested,component:f.b,to:"/Home/FinishedGood/Basic/FGBuyerApproval"},r.a.createElement(S.a,{primary:"FG Buyer Approval"})),r.a.createElement(b.a,{button:!0,className:a.multiNested,component:f.b,to:"/Home/FinishedGood/Basic/Broker"},r.a.createElement(S.a,{primary:"Broker"})))),r.a.createElement(b.a,{button:!0,className:a.nested,onClick:function(){e.setState({listFGB:!e.state.listFGB})}},r.a.createElement(S.a,{primary:"Order"}),C?r.a.createElement(j.a,null):r.a.createElement(A.a,null)),r.a.createElement(O.a,{in:C,timeout:"auto",unmountOnExit:!0},r.a.createElement(E.a,{component:"div",disablePadding:!0,dense:!0},r.a.createElement(b.a,{button:!0,className:a.multiNested,component:f.b,to:"/Home/FinishedGood/Order/Contract"},r.a.createElement(S.a,{primary:"Contract"})),r.a.createElement(b.a,{button:!0,className:a.multiNested,component:f.b,to:"/Home/FinishedGoods/Order/ShippingInstruction"},r.a.createElement(S.a,{primary:"Shipping Instruction"})),r.a.createElement(b.a,{button:!0,className:a.multiNested,component:f.b,to:"/Home/FinishedGood/Order/ContainerList"},r.a.createElement(S.a,{primary:"Container List"})))),r.a.createElement(b.a,{button:!0,className:a.nested,onClick:function(){e.setState({listFGC:!e.state.listFGC})}},r.a.createElement(S.a,{primary:"Processing"}),B?r.a.createElement(j.a,null):r.a.createElement(A.a,null)),r.a.createElement(O.a,{in:B,timeout:"auto",unmountOnExit:!0},r.a.createElement(E.a,{component:"div",disablePadding:!0,dense:!0},r.a.createElement(b.a,{button:!0,className:a.multiNested,component:f.b,to:"/Home/FinishedGood/Processing/PalletReview"},r.a.createElement(S.a,{primary:"Pallet Review"})),r.a.createElement(b.a,{button:!0,className:a.multiNested,component:f.b,to:"/Home/FinishedGood/Processing/CreatePallet"},r.a.createElement(S.a,{primary:"Create Pallet"})),r.a.createElement(b.a,{button:!0,className:a.multiNested,component:f.b,to:"/Home/FinishedGood/Processing/CreateBatchPallet"},r.a.createElement(S.a,{primary:"Create Batch Pallet"})),r.a.createElement(b.a,{button:!0,className:a.multiNested,component:f.b,to:"/Home/FinishedGood/Processing/TSToWarehouse"},r.a.createElement(S.a,{primary:"TS To Warehouse"})),r.a.createElement(b.a,{button:!0,className:a.multiNested,component:f.b,to:"/Home/FinishedGood/Processing/TestResult"},r.a.createElement(S.a,{primary:"Test Result"})),r.a.createElement(b.a,{button:!0,className:a.multiNested,component:f.b,to:"/Home/FinishedGood/Processing/TestResultUpload"},r.a.createElement(S.a,{primary:"Test Result Upload"})))),r.a.createElement(b.a,{button:!0,className:a.nested,onClick:function(){e.setState({listFGD:!e.state.listFGD})}},r.a.createElement(S.a,{primary:"Picking"}),q?r.a.createElement(j.a,null):r.a.createElement(A.a,null)),r.a.createElement(O.a,{in:q,timeout:"auto",unmountOnExit:!0},r.a.createElement(E.a,{component:"div",disablePadding:!0,dense:!0},r.a.createElement(b.a,{button:!0,className:a.multiNested,component:f.b,to:"/Home/FinishedGood/Picking/AllocationToLot"},r.a.createElement(S.a,{primary:"Allocation To Lot"})),r.a.createElement(b.a,{button:!0,className:a.multiNested,component:f.b,to:"/Home/FinishedGood/Picking/AllocationToSI"},r.a.createElement(S.a,{primary:"Allocation To SI"})),r.a.createElement(b.a,{button:!0,className:a.multiNested,component:f.b,to:"/Home/FinishedGood/Picking/QrGenerator"},r.a.createElement(S.a,{primary:"QR Generator"})),r.a.createElement(b.a,{button:!0,className:a.multiNested,component:f.b,to:"/Home/FinishedGood/Picking/Shipping"},r.a.createElement(S.a,{primary:"Shipping"})),r.a.createElement(b.a,{button:!0,className:a.multiNested,component:f.b,to:"/Home/FinishedGood/Picking/DeletePicking"},r.a.createElement(S.a,{primary:"Delete Picking"})))),r.a.createElement(b.a,{button:!0,className:a.nested,onClick:function(){e.setState({listFGR:!e.state.listFGR})}},r.a.createElement(S.a,{primary:"Report"}),re?r.a.createElement(j.a,null):r.a.createElement(A.a,null)),r.a.createElement(O.a,{in:re,timeout:"auto",unmountOnExit:!0},r.a.createElement(E.a,{component:"div",disablePadding:!0,dense:!0},r.a.createElement(b.a,{button:!0,className:a.multiNested,component:f.b,to:"/Home/FinishedGood/Report/SIControl"},r.a.createElement(S.a,{primary:"SI Control"})),r.a.createElement(b.a,{button:!0,className:a.multiNested,component:f.b,to:"/Home/FinishedGood/Report/StockPosition"},r.a.createElement(S.a,{primary:"Stock Position"})),r.a.createElement(b.a,{button:!0,className:a.multiNested,component:f.b,to:"/Home/FinishedGood/Report/Traceability"},r.a.createElement(S.a,{primary:"Traceability"})),r.a.createElement(b.a,{button:!0,className:a.multiNested,component:f.b,to:"/Home/FinishedGood/Report/Container"},r.a.createElement(S.a,{primary:"Container"})),r.a.createElement(b.a,{button:!0,className:a.multiNested,component:f.b,to:"/Home/FinishedGood/Report/Production"},r.a.createElement(S.a,{primary:"Production"})),r.a.createElement(b.a,{button:!0,className:a.multiNested,component:f.b,to:"/Home/FinishedGood/Report/DataEntryProgress"},r.a.createElement(S.a,{primary:"Data Entry Progress"})))))),r.a.createElement(k.a,null),r.a.createElement(b.a,{button:!0,onClick:function(){e.setState({listC:!e.state.listC})}},r.a.createElement($.a,null),r.a.createElement(S.a,{className:a.padding10,primary:r.a.createElement("b",null,"CheckSheet")}),u?r.a.createElement(j.a,null):r.a.createElement(A.a,null)),r.a.createElement(O.a,{in:u,timeout:"auto",unmountOnExit:!0},r.a.createElement(E.a,{component:"div",disablePadding:!0,dense:!0},r.a.createElement(b.a,{button:!0,className:a.nested,onClick:function(){e.setState({listCB:!e.state.listCB})}},r.a.createElement(S.a,{primary:"Basic"}),d?r.a.createElement(j.a,null):r.a.createElement(A.a,null)),r.a.createElement(O.a,{in:d,timeout:"auto",unmountOnExit:!0},r.a.createElement(E.a,{component:"div",disablePadding:!0,dense:!0},r.a.createElement(b.a,{button:!0,className:a.multiNested,component:f.b,to:"/Home/CheckSheet/Basic/StuffingDocumentGroup"},r.a.createElement(S.a,{primary:"Stuffing Document Group"})),r.a.createElement(b.a,{button:!0,className:a.multiNested,component:f.b,to:"/Home/CheckSheet/Basic/StuffingDocument"},r.a.createElement(S.a,{primary:"Stuffing Document"})),r.a.createElement(b.a,{button:!0,className:a.multiNested,component:f.b,to:"/Home/CheckSheet/Basic/ProcessLine"},r.a.createElement(S.a,{primary:"Process Line"})),r.a.createElement(b.a,{button:!0,className:a.multiNested,component:f.b,to:"/Home/CheckSheet/Basic/SizeConfiguration"},r.a.createElement(S.a,{primary:"Size Configuration"})),r.a.createElement(b.a,{button:!0,className:a.multiNested,component:f.b,to:"/Home/CheckSheet/Basic/ContaminationConfiguration"},r.a.createElement(S.a,{primary:"Contamination Configuration"})),r.a.createElement(b.a,{button:!0,className:a.multiNested,component:f.b,to:"/Home/CheckSheet/Basic/WaterQualityConfiguration"},r.a.createElement(S.a,{primary:"Water Quality Configuration"})),r.a.createElement(b.a,{button:!0,className:a.multiNested,component:f.b,to:"/Home/CheckSheet/Basic/FactoryToolConfiguration"},r.a.createElement(S.a,{primary:"Factory Tool Configuration"})),r.a.createElement(b.a,{button:!0,className:a.multiNested,component:f.b,to:"/Home/CheckSheet/Basic/StdWeightConfiguration"},r.a.createElement(S.a,{primary:"Std Weight Configuration"})))),r.a.createElement(b.a,{button:!0,className:a.nested,onClick:function(){e.setState({listCT:!e.state.listCT})}},r.a.createElement(S.a,{primary:"Transaction"}),m?r.a.createElement(j.a,null):r.a.createElement(A.a,null)),r.a.createElement(O.a,{in:m,timeout:"auto",unmountOnExit:!0},r.a.createElement(E.a,{component:"div",disablePadding:!0,dense:!0},r.a.createElement(b.a,{button:!0,className:a.multiNested,component:f.b,to:"/Home/CheckSheet/Transaction/CrumbSizeCheck"},r.a.createElement(S.a,{primary:"Crumb Size Check"})),r.a.createElement(b.a,{button:!0,className:a.multiNested,component:f.b,to:"/Home/CheckSheet/Transaction/BlanketThicknessCheck"},r.a.createElement(S.a,{primary:"Blanket Thickness Check"})),r.a.createElement(b.a,{button:!0,className:a.multiNested,component:f.b,to:"/Home/CheckSheet/Transaction/ContaminationCheck"},r.a.createElement(S.a,{primary:"Contamination Check"})),r.a.createElement(b.a,{button:!0,className:a.multiNested,component:f.b,to:"/Home/CheckSheet/Transaction/TrolleyFilling"},r.a.createElement(S.a,{primary:"Trolley Filling"})),r.a.createElement(b.a,{button:!0,className:a.multiNested,component:f.b,to:"/Home/CheckSheet/Transaction/TrolleyOut"},r.a.createElement(S.a,{primary:"Trolley Out"})),r.a.createElement(b.a,{button:!0,className:a.multiNested,component:f.b,to:"/Home/CheckSheet/Transaction/FactoryToolCheck"},r.a.createElement(S.a,{primary:"Tools Check"})),r.a.createElement(b.a,{button:!0,className:a.multiNested,component:f.b,to:"/Home/CheckSheet/Transaction/MetalDetector"},r.a.createElement(S.a,{primary:"Metal Detector Verification"})),r.a.createElement(b.a,{button:!0,className:a.multiNested,component:f.b,to:"/Home/CheckSheet/Transaction/WaterQualityCheck"},r.a.createElement(S.a,{primary:"Water Quality"})),r.a.createElement(b.a,{button:!0,className:a.multiNested,component:f.b,to:"/Home/CheckSheet/Transaction/BaleCheck"},r.a.createElement(S.a,{primary:"Bale Check"})),r.a.createElement(b.a,{button:!0,className:a.multiNested,component:f.b,to:"/Home/CheckSheet/Transaction/TrolleyWashing"},r.a.createElement(S.a,{primary:"Trolley Washing"})),r.a.createElement(b.a,{button:!0,className:a.multiNested,component:f.b,to:"/Home/CheckSheet/Transaction/WeightScaleCheck"},r.a.createElement(S.a,{primary:"Weight Scale Check"})),r.a.createElement(b.a,{button:!0,className:a.multiNested,component:f.b,to:"/Home/CheckSheet/Transaction/BlanketQualityCheck"},r.a.createElement(S.a,{primary:"Blanket Quality"})),r.a.createElement(b.a,{button:!0,className:a.multiNested,component:f.b,to:"/Home/CheckSheet/Transaction/NCMetal"},r.a.createElement(S.a,{primary:"NC - Metal"})),r.a.createElement(b.a,{button:!0,className:a.multiNested,component:f.b,to:"/Home/CheckSheet/Transaction/StuffingContainer"},r.a.createElement(S.a,{primary:"Stuffing Container"})),r.a.createElement(b.a,{button:!0,className:a.multiNested,component:f.b,to:"/Home/CheckSheet/Transaction/StuffingLoosebale"},r.a.createElement(S.a,{primary:"Stuffing Loosebale"})),r.a.createElement(b.a,{button:!0,className:a.multiNested,component:f.b,to:"/Home/CheckSheet/Transaction/StuffingTruck"},r.a.createElement(S.a,{primary:"Stuffing Truck"})),r.a.createElement(b.a,{button:!0,className:a.multiNested,component:f.b,to:"/Home/CheckSheet/Transaction/StuffingBarge"},r.a.createElement(S.a,{primary:"Stuffing Barge"})),r.a.createElement(b.a,{button:!0,className:a.multiNested,component:f.b,to:"/Home/CheckSheet/Transaction/ApronDryer"},r.a.createElement(S.a,{primary:"Apron Dryer"})))),r.a.createElement(b.a,{button:!0,className:a.nested,onClick:function(){e.setState({listCR:!e.state.listCR})}},r.a.createElement(S.a,{primary:"Report"}),J?r.a.createElement(j.a,null):r.a.createElement(A.a,null)),r.a.createElement(O.a,{in:J,timeout:"auto",unmountOnExit:!0},r.a.createElement(E.a,{component:"div",disablePadding:!0,dense:!0},r.a.createElement(b.a,{button:!0,className:a.multiNested,component:f.b,to:"/Home/CheckSheet/Report/CrumbGraph"},r.a.createElement(S.a,{primary:"Crumb Graph"})),r.a.createElement(b.a,{button:!0,className:a.multiNested,component:f.b,to:"/Home/CheckSheet/Report/BlanketGraph"},r.a.createElement(S.a,{primary:"Blanket Graph"})),r.a.createElement(b.a,{button:!0,className:a.multiNested,component:f.b,to:"/Home/CheckSheet/Report/ContaminationGraph"},r.a.createElement(S.a,{primary:"Contamination Graph"})),r.a.createElement(b.a,{button:!0,className:a.multiNested,component:f.b,to:"/Home/CheckSheet/Report/TrolleyFillingReport"},r.a.createElement(S.a,{primary:"Trolley Filling"})),r.a.createElement(b.a,{button:!0,className:a.multiNested,component:f.b,to:"/Home/CheckSheet/Report/ToolCheck"},r.a.createElement(S.a,{primary:"Tools Check"})),r.a.createElement(b.a,{button:!0,className:a.multiNested,component:f.b,to:"/Home/CheckSheet/Report/MetalDetectorVerification"},r.a.createElement(S.a,{primary:"Metal Detector Verification"})),r.a.createElement(b.a,{button:!0,className:a.multiNested,component:f.b,to:"/Home/CheckSheet/Report/BaleCheck"},r.a.createElement(S.a,{primary:"Bale Check"})),r.a.createElement(b.a,{button:!0,className:a.multiNested,component:f.b,to:"/Home/CheckSheet/Report/TrolleyWashing"},r.a.createElement(S.a,{primary:"Trolley Washing"})),r.a.createElement(b.a,{button:!0,className:a.multiNested,component:f.b,to:"/Home/CheckSheet/Report/BlanketAnalysis"},r.a.createElement(S.a,{primary:"Blanket Analysis"})))),r.a.createElement(b.a,{button:!0,className:a.nested,onClick:function(){e.setState({listCTL:!e.state.listCTL})}},r.a.createElement(S.a,{primary:"Tools"}),Y?r.a.createElement(j.a,null):r.a.createElement(A.a,null)),r.a.createElement(O.a,{in:Y,timeout:"auto",unmountOnExit:!0},r.a.createElement(E.a,{component:"div",disablePadding:!0,dense:!0},r.a.createElement(b.a,{button:!0,className:a.multiNested,component:f.b,to:"/Home/CheckSheet/Tools/TrolleyFillingUpload"},r.a.createElement(S.a,{primary:"Trolley Filling Upload"})),r.a.createElement(b.a,{button:!0,className:a.multiNested,component:f.b,to:"/Home/CheckSheet/Tools/TrolleyWashingUpload"},r.a.createElement(S.a,{primary:"Trolley Washing Upload"})),r.a.createElement(b.a,{button:!0,className:a.multiNested,component:f.b,to:"/Home/CheckSheet/Tools/BaleCheckUpload"},r.a.createElement(S.a,{primary:"Bale Check Upload"})))))),r.a.createElement(k.a,null),r.a.createElement(b.a,{button:!0,onClick:function(){e.setState({listMT:!e.state.listMT})}},r.a.createElement(te.a,null),r.a.createElement(S.a,{className:a.padding10,primary:r.a.createElement("b",null,"Maintenance")}),W?r.a.createElement(j.a,null):r.a.createElement(A.a,null)),r.a.createElement(O.a,{in:W,timeout:"auto",unmountOnExit:!0},r.a.createElement(E.a,{component:"div",disablePadding:!0,dense:!0},r.a.createElement(b.a,{button:!0,className:a.nested,onClick:function(){e.setState({listMTB:!e.state.listMTB})}},r.a.createElement(S.a,{primary:"Basic"}),X?r.a.createElement(j.a,null):r.a.createElement(A.a,null)),r.a.createElement(O.a,{in:X,timeout:"auto",unmountOnExit:!0},r.a.createElement(E.a,{component:"div",disablePadding:!0,dense:!0},r.a.createElement(b.a,{button:!0,className:a.multiNested,component:f.b,to:"/Home/Maintenance/Basic/Maintenance Activity"},r.a.createElement(S.a,{primary:"Maintenance Activity"})),r.a.createElement(b.a,{button:!0,className:a.multiNested,component:f.b,to:"/Home/Maintenance/Basic/Maintenance Personnel"},r.a.createElement(S.a,{primary:"Maintenance Personnel"})))),r.a.createElement(k.a,null),r.a.createElement(b.a,{button:!0,className:a.nested,onClick:function(){e.setState({listMTT:!e.state.listMTT})}},r.a.createElement(S.a,{primary:"Transaction"}),ee?r.a.createElement(j.a,null):r.a.createElement(A.a,null)),r.a.createElement(O.a,{in:ee,timeout:"auto",unmountOnExit:!0},r.a.createElement(E.a,{component:"div",disablePadding:!0,dense:!0},r.a.createElement(b.a,{button:!0,className:a.multiNested,component:f.b,to:"/Home/Maintenance/Transaction/Activity"},r.a.createElement(S.a,{primary:"Activity"})))))),r.a.createElement(k.a,null),r.a.createElement(b.a,{button:!0,onClick:function(){e.setState({listST:!e.state.listST})}},r.a.createElement(ne.a,null),r.a.createElement(S.a,{className:a.padding10,primary:r.a.createElement("b",null,"Setup")}),Q?r.a.createElement(j.a,null):r.a.createElement(A.a,null)),r.a.createElement(O.a,{in:Q,timeout:"auto",unmountOnExit:!0},r.a.createElement(E.a,{component:"div",disablePadding:!0,dense:!0},r.a.createElement(b.a,{button:!0,className:a.nested,component:f.b,to:"/Home/SetUp/EmailProtocol"},r.a.createElement(S.a,{primary:"Email Protocol"})),r.a.createElement(b.a,{button:!0,className:a.nested,component:f.b,to:"/Home/SetUp/DisplayConfiguration"},r.a.createElement(S.a,{primary:"Display Configuration"})),r.a.createElement(b.a,{button:!0,className:a.nested,component:f.b,to:"/Home/SetUp/Numbering"},r.a.createElement(S.a,{primary:"Numbering"})))),r.a.createElement(k.a,null),r.a.createElement(b.a,{button:!0,onClick:function(){e.setState({listB:!e.state.listB})}},r.a.createElement(oe.a,null),r.a.createElement(S.a,{className:a.padding10,primary:r.a.createElement("b",null,"Reports")}),c?r.a.createElement(j.a,null):r.a.createElement(A.a,null)),r.a.createElement(O.a,{in:c,timeout:"auto",unmountOnExit:!0},r.a.createElement(E.a,{component:"div",disablePadding:!0,dense:!0},r.a.createElement(b.a,{button:!0,className:a.nested,component:f.b,to:"/Home/Report/Radar"},r.a.createElement(S.a,{primary:"Radar Chart"})),r.a.createElement(b.a,{button:!0,className:a.nested,component:f.b,to:"/Home/Report/Doughnut"},r.a.createElement(S.a,{primary:"Doughnut Chart"})),r.a.createElement(b.a,{button:!0,className:a.nested,component:f.b,to:"/Home/Report/Bar"},r.a.createElement(S.a,{primary:"Bar Chart"})),r.a.createElement(b.a,{button:!0,className:a.nested,component:f.b,to:"/Home/Report/Line"},r.a.createElement(S.a,{primary:"Line Chart"})),r.a.createElement(b.a,{button:!0,className:a.nested,component:f.b,to:"/Home/Report/Pie"},r.a.createElement(S.a,{primary:"Pie Chart"})),r.a.createElement(b.a,{button:!0,className:a.nested,component:f.b,to:"/Home/Report/Polar"},r.a.createElement(S.a,{primary:"Polar Chart"})))),r.a.createElement(k.a,null),r.a.createElement(b.a,{button:!0},r.a.createElement(ie.a,null),r.a.createElement(S.a,{className:a.nested,primary:r.a.createElement("b",null,"Help")}))));return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:a.root},r.a.createElement(_.a,null),r.a.createElement(w.a,{position:"fixed",className:a.appBar,onClick:se},r.a.createElement(F.a,null,r.a.createElement("div",{className:a.typo,align:"left"},r.a.createElement(V,null)),r.a.createElement(D.a,{smDown:!0},r.a.createElement(x.a,{className:a.typo,align:"right",variant:"h6",noWrap:!0},"Think Rubber, Think Halcyon")))),r.a.createElement("nav",{className:a.drawer,"aria-label":"mailbox folders"},r.a.createElement(D.a,{smUp:!0,implementation:"css"},r.a.createElement(T.a,{variant:"temporary",open:s,onClose:se,classes:{paper:a.drawerPaper},ModalProps:{keepMounted:!0}},le))),r.a.createElement("main",{className:a.content},o)))}}]),t}(n.Component),de=C()(h.g,Object(M.a)((function(e){var t;return{root:{display:"flex",paddingTop:e.spacing(4)},drawer:Object(y.a)({},e.breakpoints.up("sm"),{width:240,flexShrink:0}),appBar:{zIndex:e.zIndex.drawer+1,paddingTop:e.spacing(3),background:"rgb(50,50,50)"},menuButton:{marginRight:e.spacing(2)},toolbar:e.mixins.toolbar,drawerPaper:{width:240},content:Object(y.a)({flexGrow:1,padding:e.spacing(10)},e.breakpoints.up("sm"),{marginLeft:-240}),nested:{paddingLeft:e.spacing(4)},multiNested:{paddingLeft:e.spacing(6)},title:Object(y.a)({display:"none"},e.breakpoints.up("sm"),{display:"block"}),appIcon:{color:"rgb(255,255,255)"},grow:{flexGrow:1},test:{paddingTop:e.spacing(6)},typo:(t={flexGrow:1,align:"center"},Object(y.a)(t,e.breakpoints.up("sm"),{}),Object(y.a)(t,"paddingTop",15),t),padding10:{paddingLeft:10}}})))(ue),me=a(4),pe=a(68),fe=a(1141),he=a(163),ge=a(229),ye=a(331),ve=a(426),Ce=a(1111),De=a(146),Ee=a(1136),be=a(259),Se=a(443),Oe=a.n(Se),ke=a(1112);function we(){return r.a.createElement(x.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(Ce.a,{color:"inherit",href:"https://www.halcyonagri.com/"},"Halcyon")," ",(new Date).getFullYear(),".")}var Fe=Object(R.a)((function(e){return{root:{height:"100vh"},image:{backgroundImage:"url("+a(498)+")",backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosition:"center"},paper:{margin:e.spacing(8,4),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:"rgb(23,82,142)"},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)},testerror:{border:"1px solid red"},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1)}}})),xe=Object(ke.a)(he.a)({background:"primary"}),Te=Object(ke.a)(ge.a)({borderColor:"rgb(0,0,0)"});var Ne=Object(h.g)((function(){var e=Fe(),t=r.a.useState({email:"",password:"",formErrors:{emailstate:!1,passwordstate:!1}}),a=Object(pe.a)(t,2),n=a[0],o=a[1],s=function(e){return function(t){o(Object(me.a)({},n,Object(y.a)({},e,t.target.value)))}};return n.a?r.a.createElement(h.a,{to:"/Home"}):r.a.createElement(be.a,{container:!0,component:"main",className:e.root},r.a.createElement(_.a,null),r.a.createElement(be.a,{item:!0,xs:!1,sm:4,md:7,className:e.image}),r.a.createElement(be.a,{item:!0,xs:12,sm:8,md:5,component:De.a,elevation:6,square:!0},r.a.createElement("div",{className:e.paper},r.a.createElement(fe.a,{className:e.avatar},r.a.createElement(Oe.a,null)),r.a.createElement(x.a,{component:"h1",variant:"h5"},"HALCYON"),r.a.createElement("form",{className:e.form,noValidate:!0},r.a.createElement(Te,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Username",name:"email",autoComplete:"email",autoFocus:!0,value:n.email,error:n.state,onChange:s("email")}),r.a.createElement(Te,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:n.password,onChange:s("password")}),r.a.createElement("div",{className:"inputfeedback"},n.errorspassword),r.a.createElement(ye.a,{control:r.a.createElement(ve.a,{value:"remember",color:"primary"}),label:"Remember me"}),r.a.createElement(xe,{fullWidth:!0,variant:"contained",color:"primary",className:e.submit,onClick:function(e){return e.preventDefault(),"admin"===n.email&&"admin"===n.password?o(Object(me.a)({},n,{a:!0})):alert("Wrong Username Or Password")}},"Sign In"),r.a.createElement(Ee.a,{mt:5},r.a.createElement(we,null))))))})),je=a(10),Pe=a(2),Ae=(a(499),a(1074)),Me=a(1076),_e=a(1075),Ie=a(1115),Re=a(1114),Le=a(12),Ve=a.n(Le),Be=a(1140),Ue=a(82),qe=a.n(Ue),Ge="http://localhost:3001/Backend/",We=function(e,t){var a=Ge+e;return qe.a.get(a,t)},He=function(e,t,a){var n=Ge+e;return qe.a.post(n,t,a)},Qe=function(e,t){var a=Ge+e;return qe.a.put(a,t)},ze=function(e){var t=Ge+e;return qe.a.delete(t)},Ye=function(e){var t=Ge+e;return qe.a.get(t,{responseType:"arraybuffer"})},Ke=function(e,t){var a=Ge+e;return qe.a.post(a,t)},Je=function(e,t){var a=Ge+e;return qe.a.put(a,t)},Ze={getTool:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="Tool/"+e,a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 2:case"end":return a.stop()}}))},getToolFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("Tool-filter/").concat(e),a.next=3,l.a.awrap(We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 3:return a.abrupt("return",a.sent);case 4:case"end":return a.stop()}}))},update:function(e,t){return Qe("Tool/"+e,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Successfully Upddated",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}}))},add:function(e,t){return He("Tool/"+e,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Successfully Added",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}}))},delete:function(e){return ze("Tool/"+e).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}}))}},Xe=a(1113),$e=a(1066),et=a(335),tt=a(465),at=a(1070),nt=a(177),rt=a.n(nt),ot=a(196),st=a.n(ot),it=a(313),lt=a.n(it),ct=a(449),ut=a.n(ct),dt=(a(613),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).handleClick=function(e){a.setState({anchorEl:e.currentTarget})},a.handleClose=function(){a.setState({anchorEl:null})},a.dataMapping=function(){var e=[],t=a.props.columns.filter((function(e){return!e.hidden&&"_id"!==e.field}));return e.push(t.map((function(e){return e.title}))),a.props.data.map((function(a){var n=[];t.map((function(e){var t="";if(e.lookup)t=e.lookup[a[e.field]];else if(e.render)if(e.render(a).props.children)if("object"===typeof e.render(a).props.children){var r=[];Array.isArray(e.render(a).props.children)?r=e.render(a).props.children:"img"!==e.render(a).props.children.type&&(r=e.render(a).props.children.props.children);var o=[],s=!0,i=!1,l=void 0;try{for(var c,u=r[Symbol.iterator]();!(s=(c=u.next()).done);s=!0){var d=c.value;if("string"===typeof d)o.push(d);else if("object"!==typeof d.props.children)o.push(d.props.children);else if(void 0!==d.props.children.props.value&&"object"!==typeof d.props.children.props.value)o.push(d.props.children.props.value);else{var m=[],p="object"===typeof d.props.children.props.primary?d.props.children.props.primary.props.value:d.props.children.props.primary,f="object"===typeof d.props.children.props.secondary?d.props.children.props.secondary.props.value:d.props.children.props.secondary;void 0!==p&&m.push(p),void 0!==f&&m.push(f),o.push(m.join(" "))}}}catch(h){i=!0,l=h}finally{try{s||null==u.return||u.return()}finally{if(i)throw l}}t=o.join("\n")}else t=e.render(a).props.children;else t=void 0===e.render(a).props.value||null===e.render(a).props.value?"":e.render(a).props.value;else t=e.field?a[e.field]:"";n.push(void 0===t?"":t)})),e.push(n)})),e},a.exportAsExcel=function(){var e=a.dataMapping(),t=st.a.utils.aoa_to_sheet(e,{}),n=st.a.utils.book_new();st.a.utils.book_append_sheet(n,t,a.state.fileName),st.a.writeFile(n,a.props.fileName+".xlsx")},a.exportAsPdf=function(){var e=ut.a.pdfMake.vfs;lt.a.vfs=e;var t=a.dataMapping(),n=t[0].length,r="A4";switch(!0){case n>=25:r="A1";break;case n>=18:r="A2";break;case n>=11:r="A3";break;default:r="A4"}var o={content:[{table:{headerRows:1,body:t}}],defaultStyle:{fontSize:8},font:"Helvetica",pageSize:r};lt.a.createPdf(o).download(a.props.fileName+".pdf")},a.state={anchorEl:null},a.handleClick=a.handleClick.bind(Object(Pe.a)(a)),a.handleClose=a.handleClose.bind(Object(Pe.a)(a)),a.exportAsExcel=a.exportAsExcel.bind(Object(Pe.a)(a)),a.exportAsPdf=a.exportAsPdf.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(rt.a,{"aria-describedby":"popOver",variant:"contained",onClick:this.handleClick}),r.a.createElement(tt.a,{id:"popOver",onClose:this.handleClose,open:Boolean(this.state.anchorEl),anchorEl:this.state.anchorEl,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"}},r.a.createElement(De.a,null,r.a.createElement(at.a,null,r.a.createElement(et.a,{onClick:this.exportAsExcel},"Export as excel"),r.a.createElement(et.a,{onClick:this.exportAsPdf},"Export as pdf")))))}}]),t}(n.Component)),mt=(Object(n.forwardRef)((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),r.a.forwardRef((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(d.a)(this,Object(m.a)(t).call(this))).handleClose=function(){e.setState({open:!1,errMessage:""})},e.handleClickDelOpen=function(t){e.setState({delopen:!0,currentDeleteData:t,deleteMessage:r.a.createElement("span",null," ","Are you sure to delete this record ",r.a.createElement("b",null,t.Name)," ? This cannot be undone.")})},e.handleClickDelClose=function(){e.setState({delopen:!1,currentDeleteData:null})},e.OnDelete=function(){null!==e.state.currentDeleteData?Ze.delete("".concat(e.state.currentDeleteData._id)).then((function(t){if(!0===t.code){var a=Object(je.a)(e.state.data),n=a.indexOf(e.state.currentDeleteData);a.splice(n,1),e.handleOpen("Deleted Successfully!","success"),e.setState({data:a})}else e.handleOpen("Oops, something went wrong while processing your request!","error")})):e.handleOpen("Please try again later!","info"),e.setState({delopen:!1,currentDeleteData:null,errMessage:""})},e.state={columns:[{field:"id",hidden:!0},{title:"Tools",field:"Name",editComponent:function(t){return r.a.createElement(ge.a,{margin:"dense",id:"name",label:"Tools*",error:e.state.formState&&(void 0===t.rowData.Name||""===t.rowData.Name.trim()||0===t.rowData.Name.length),helperText:!e.state.formState||void 0!==t.rowData.Name&&""!==t.rowData.Name.trim()&&0!==t.rowData.Name.length?e.state.uniqueKeyError?"Packing Type cannot be duplicate":"Tools":"Tools Cannot be Empty",type:"text",defaultValue:t.rowData.Name,onChange:function(a){e.onChange(a.target.value.trim(),t.rowData,"Name")}})}},{title:"Criteria",field:"Criteria",editComponent:function(t){return r.a.createElement(ge.a,{margin:"dense",id:"criteria",label:"Criteria*",error:e.state.formState&&(void 0===t.rowData.Criteria||""===t.rowData.Criteria.trim()||0===t.rowData.Criteria.length),helperText:!e.state.formState||void 0!==t.rowData.Criteria&&""!==t.rowData.Criteria.trim()&&0!==t.rowData.Criteria.length?"Criteria":"Criteria Cannot be Empty",type:"text",defaultValue:t.rowData.Criteria,onChange:function(a){e.onChange(a.target.value.trim(),t.rowData,"Criteria")}})}},{title:"Remarks",field:"Remarks",editComponent:function(t){return r.a.createElement(ge.a,{margin:"dense",id:"remarks",label:"Remarks",helperText:"Remarks",type:"text",defaultValue:t.rowData.Remarks,onChange:function(a){e.onChange(a.target.value,t.rowData,"Remarks")}})}},{title:"Inactive",field:"Inactive",initialEditValue:!1,lookup:{true:"Yes",false:"No"},editComponent:function(t){return r.a.createElement(Xe.a,{checked:t.rowData.Inactive,onChange:function(a){e.onChange(a.target.checked,t.rowData,"Inactive")},value:t.value,inputProps:{"aria-label":"secondary checkbox"},color:"primary"})}},{title:"Operator",field:"LastUpdatedBy",editable:"never"},{title:"Last Updated",field:"LastUpdatedAt",render:function(e){return r.a.createElement("span",null,void 0===e?"":new Date(e.LastUpdatedAt).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}))},editable:"never"}],data:[],formState:!1,uniqueKeyError:!1,delopen:!1,currentDeleteData:null,deleteMessage:"",open:!1,validationCounter:0,errorState:"",errMessage:""},e.InitToolData=e.InitToolData.bind(Object(Pe.a)(e)),e.handleOpen=e.handleOpen.bind(Object(Pe.a)(e)),e.handleClickDelClose=e.handleClickDelClose.bind(Object(Pe.a)(e)),e.handleClickDelOpen=e.handleClickDelOpen.bind(Object(Pe.a)(e)),e.OnDelete=e.OnDelete.bind(Object(Pe.a)(e)),e}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.InitToolData()}},{key:"onChange",value:function(e,t,a){this.state.validationCounter;""!==e&&null!==e||"Remarks"===a?(t[a]=e,""!==t.Name&&null!==t.Name&&""!==t.Criteria&&null!==t.Criteria&&this.setState({formState:!1,uniqueKeyError:!1})):(this.setState({formState:!0,uniqueKeyError:!1}),t[a]="")}},{key:"handleOpen",value:function(e,t){this.setState({open:!0,vertical:"bottom",horizontal:"right",errMessage:e,errorState:t})}},{key:"InitToolData",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.awrap(Ze.getTool("").then((function(t){!0===t.code&&e.setState({data:t.data})})));case 2:case"end":return t.stop()}}))}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{style:{margin:"20px 20px 10px 0px"}},r.a.createElement(Ve.a,{title:"Tools",columns:this.state.columns,data:this.state.data,editable:{onRowAdd:function(t){return new Promise((function(a,n){setTimeout((function(){e.state.data;void 0!==t.Name&&void 0!==t.Criteria&&0!==t.Criteria.length&&0!==t.Name.length||(n(),e.handleOpen("Please fix the error(s) highlighted to save the details!","error"),e.setState({formState:!0})),e.state.formState?(n(),e.handleOpen("Please fix the error(s) highlighted to save the details!","error")):(t.Operator="Admin",Ze.add("",t).then((function(t){if(!0===t.code){var r=Object(je.a)(e.state.data);r.push(t.data),e.handleOpen("Tool added successfully!","success"),e.setState({data:r},(function(){return a()})),a()}else n(),e.handleOpen(t.message,"error"),t.message.indexOf("Duplicate")>0&&e.setState({uniqueKeyError:!0})})))}),1e3)}))},onRowUpdate:function(t,a){return new Promise((function(n,r){setTimeout((function(){e.state.data;e.state.formState?(r(),e.handleOpen("Please fix the error(s) highlighted to save the details!","error")):Ze.update("",t).then((function(o){if(!0===o.code){var s=Object(je.a)(e.state.data),i=s.indexOf(a);s[i]=t,e.handleOpen("Tool updated successfully!","success"),e.setState({data:s},(function(){return n()})),n()}else r(),e.handleOpen(o.message,"error"),o.message.indexOf("Duplicate")>0&&e.setState({uniqueKeyError:!0})}))}),1e3)}))}},actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.data,columns:e.state.columns,fileName:"Tool"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.InitToolData()}},{icon:"delete",tooltip:"Delete User",onClick:function(t,a){return e.handleClickDelOpen(a)}}],options:{}}),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.errorState,autoHideDuration:6e3,open:this.state.open,onClose:this.handleClose,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.errMessage)}),r.a.createElement(Ae.a,{open:this.state.delopen,onClose:this.handleClickDelClose,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,""===this.state.errMessage?this.state.deleteMessage:this.state.errMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.handleClickDelClose,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.OnDelete,color:"primary"},"Delete"))))}}]),t}(r.a.Component)),pt=(a(635),{getPackingType:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="packingType/"+e,a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Succeed",data:e.data.data.map((function(e){var t={};return t._id=e._id,t.PckTypeName=e.PckTypeName,t.PckTypeDesc=e.PckTypeDesc,t.PckTypeInactive=e.PckTypeInactive,t.PckTypeInactiveDel=e.PckTypeInactiveDel,t.CreatedAt=new Date(e.CreatedAt).toLocaleString(),t.CreatedBy=e.CreatedBy,t.LastUpdatedAt=new Date(e.LastUpdatedAt).toLocaleString(),t.LastUpdatedBy=e.LastUpdatedBy,t}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 2:case"end":return a.stop()}}))},getFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("packingType-filter/").concat(e),a.next=3,l.a.awrap(We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Succeed",data:e.data.data.map((function(e){var t={};return t._id=e._id,t.PckTypeName=e.PckTypeName,t.PckTypeDesc=e.PckTypeDesc,t.PckTypeInactive=e.PckTypeInactive,t.PckTypeInactiveDel=e.PckTypeInactiveDel,t.CreatedAt=new Date(e.CreatedAt).toLocaleString(),t.CreatedBy=e.CreatedBy,t.LastUpdatedAt=new Date(e.LastUpdatedAt).toLocaleString(),t.LastUpdatedBy=e.LastUpdatedBy,t}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 3:return a.abrupt("return",a.sent);case 4:case"end":return a.stop()}}))},update:function(e,t){return Qe("packingType/"+e,t).then((function(e){return e})).then((function(e){if(200===e.status&&null!==e.data.data){var t={};return t._id=e.data.data._id,t.PckTypeName=e.data.data.PckTypeName,t.PckTypeDesc=e.data.data.PckTypeDesc,t.PckTypeInactive=e.data.data.PckTypeInactive,t.PckTypeInactiveDel=e.data.data.PckTypeInactiveDel,t.CreatedAt=new Date(e.data.data.CreatedAt).toLocaleString(),t.CreatedBy=e.data.data.CreatedBy,t.LastUpdatedAt=new Date(e.data.data.LastUpdatedAt).toLocaleString(),t.LastUpdatedBy=e.data.data.LastUpdatedBy,{code:!0,message:"Successfully Upddated",data:t}}if(200===e.status&&null===e.data.data)return{code:!1,message:e.data.message,data:null}})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}}))},add:function(e,t){return He("packingType/"+e,t).then((function(e){return e})).then((function(e){if(console.log(e),200===e.status&&null!==e.data.data){var t={};return t._id=e.data.data._id,t.PckTypeName=e.data.data.PckTypeName,t.PckTypeDesc=e.data.data.PckTypeDesc,t.PckTypeInactive=e.data.data.PckTypeInactive,t.PckTypeInactiveDel=e.data.data.PckTypeInactiveDel,t.CreatedAt=new Date(e.data.data.CreatedAt).toLocaleString(),t.CreatedBy=e.data.data.CreatedBy,t.LastUpdatedAt=new Date(e.data.data.LastUpdatedAt).toLocaleString(),t.LastUpdatedBy=e.data.data.LastUpdatedBy,{code:!0,message:"Successfully Added",data:t}}if(200===e.status&&null===e.data.data)return{code:!1,message:e.data.message,data:null}})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}}))},delete:function(e){return ze("packingType/"+e).then((function(e){return e})).then((function(e){if(200===e.status&&null!==e.data.data){var t={};return t._id=e.data.data._id,t.PckTypeName=e.data.data.PckTypeName,t.PckTypeDesc=e.data.data.PckTypeDesc,t.PckTypeInactive=e.data.data.PckTypeInactive,t.PckTypeInactiveDel=e.data.data.PckTypeInactiveDel,t.CreatedAt=new Date(e.data.data.CreatedAt).toLocaleString(),t.CreatedBy=e.data.data.CreatedBy,t.LastUpdatedAt=new Date(e.data.data.LastUpdatedAt).toLocaleString(),t.LastUpdatedBy=e.data.data.LastUpdatedBy,{code:!0,message:"Successfully Deleted",data:t}}if(200===e.status&&null===e.data.data)return{code:!1,message:e.data.message,data:null}})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}}))}}),ft=(Object(n.forwardRef)((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),r.a.forwardRef((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(d.a)(this,Object(m.a)(t).call(this))).handleClose=function(){e.setState({open:!1,errMessage:"",formState:!1,uniqueKeyError:!1,activeStatus:!1,activeDeleteStatus:!1})},e.handleClickDelOpen=function(t){e.setState({delopen:!0,currentDeleteData:t,deleteMessage:r.a.createElement("span",null,"Are you sure to delete this record ",r.a.createElement("b",null,t.PckTypeName)," ? This cannot be undone.")})},e.handleClickDelClose=function(){e.setState({delopen:!1,currentDeleteData:null})},e.OnDelete=function(){null!==e.state.currentDeleteData?pt.delete("".concat(e.state.currentDeleteData._id)).then((function(t){if(!0===t.code){var a=Object(je.a)(e.state.data),n=a.indexOf(e.state.currentDeleteData);a.splice(n,1),e.handleOpen("Deleted Successfully!","success"),e.setState({data:a})}else e.handleOpen("Oops, something went wrong while processing your request!","error")})):e.handleOpen("Please try again later!","info"),e.setState({delopen:!1,currentDeleteData:null,errMessage:""})},e.state={columns:[{field:"_id",hidden:!0},{title:"Name",field:"PckTypeName",editComponent:function(t){return r.a.createElement(ge.a,{autoFocus:!0,margin:"dense",color:"primary",id:"name",label:"Name*",error:e.state.formState&&(void 0===t.rowData.PckTypeName||0===t.rowData.PckTypeName.length||e.state.uniqueKeyError),helperText:!e.state.formState||void 0!==t.rowData.PckTypeName&&""!==t.rowData.PckTypeName.trim()&&0!==t.rowData.PckTypeName.length?e.state.uniqueKeyError?"Packing Type cannot be duplicate":"Name":"Cannot be Empty",type:"text",defaultValue:t.rowData.PckTypeName,onChange:function(a){e.onChange(a.target.value.trim(),t.rowData,"PckTypeName")}})}},{title:"Description",field:"PckTypeDesc",editComponent:function(t){return r.a.createElement(ge.a,{margin:"dense",id:"description",label:"Description",color:"primary",helperText:"Description",type:"text",defaultValue:t.rowData.PckTypeDesc,onChange:function(a){e.onChange(a.target.value,t.rowData,"PckTypeDesc")}})}},{title:"Inactive",field:"PckTypeInactive",render:function(e){return r.a.createElement("span",null,e.PckTypeInactive?"Yes":"No")},editComponent:function(t){return r.a.createElement(Xe.a,{checked:t.rowData.PckTypeInactive,onChange:function(a){e.onChange(a.target.checked,t.rowData,"PckTypeInactive")},value:t.value,inputProps:{"aria-label":"secondary checkbox"},color:"primary"})}},{title:"Operator",field:"LastUpdatedBy",editable:"never"},{title:"Last Updated",field:"LastUpdatedAt",render:function(e){return r.a.createElement("span",null,void 0===e?"":new Date(e.LastUpdatedAt).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}))},editable:"never"}],data:[],formState:!1,activeStatus:!1,activeDeleteStatus:!1,uniqueKeyError:!1,delopen:!1,currentDeleteData:null,deleteMessage:"",open:!1,errMessage:"",operator:"Admin"},e.InitPackingTypeData=e.InitPackingTypeData.bind(Object(Pe.a)(e)),e.handleOpen=e.handleOpen.bind(Object(Pe.a)(e)),e.handleClickDelClose=e.handleClickDelClose.bind(Object(Pe.a)(e)),e.handleClickDelOpen=e.handleClickDelOpen.bind(Object(Pe.a)(e)),e.OnDelete=e.OnDelete.bind(Object(Pe.a)(e)),e}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.InitPackingTypeData()}},{key:"onChange",value:function(e,t,a){var n=Object(me.a)({},t);""===e||null===e?this.setState({formState:!0,uniqueKeyError:!1}):(t[a]=e,""!==n.PckTypeName&&null!==n.PckTypeName&&this.setState({formState:!1})),this.setState({formState:!1})}},{key:"handleOpen",value:function(e,t){this.setState({open:!0,vertical:"bottom",horizontal:"right",errMessage:e,errorState:t})}},{key:"InitPackingTypeData",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.awrap(pt.getPackingType("").then((function(t){!0===t.code&&e.setState({data:t.data})})));case 2:case"end":return t.stop()}}))}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{style:{margin:"20px 20px 10px 0px"}},r.a.createElement(Ve.a,{title:"Packing Type",columns:this.state.columns,data:this.state.data,editable:{onRowAdd:function(t){return new Promise((function(a,n){setTimeout((function(){e.state.data;void 0===t.PckTypeName||0===t.PckTypeName.length?(n(),e.handleOpen("Please fix the error(s) highlighted to save the details!","error"),e.setState({formState:!0})):e.setState({formState:!1}),e.state.formState?(n(),e.handleOpen("Please fix the error(s) highlighted to save the details!","error")):(t.CreatedBy=e.state.operator,t.LastUpdatedBy=e.state.operator,pt.add("",t).then((function(t){if(!0===t.code){var r=Object(je.a)(e.state.data);r.push(t.data),e.handleOpen("Packing type added successfully!","success"),e.setState({data:r},(function(){return a()})),a()}else n(),e.handleOpen(t.message,"error"),t.message.indexOf("Duplicate")>0&&e.setState({uniqueKeyError:!0})})))}),1e3)}))},onRowUpdate:function(t,a){return new Promise((function(n,r){setTimeout((function(){e.state.data;void 0===t.PckTypeName||0===t.PckTypeName.length?(r(),e.handleOpen("Please fix the error(s) highlighted to save the details!","error"),e.setState({formState:!0})):e.setState({formState:!1}),e.state.formState?(r(),e.handleOpen("Please fix the error(s) highlighted to save the details!","error")):(t.LastUpdatedBy=e.state.operator,pt.update("",t).then((function(o){if(!0===o.code){var s=Object(je.a)(e.state.data),i=s.indexOf(a);s[i]=t,e.handleOpen("Packing type updated successfully!","success"),e.setState({data:s},(function(){return n()})),n()}else r(),e.handleOpen(o.message,"error")})))}),1e3)}))}},actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.data,columns:e.state.columns,fileName:"Packing"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.InitPackingTypeData()}},{icon:"delete",tooltip:"Delete User",onClick:function(t,a){return e.handleClickDelOpen(a)}}],options:{}}),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.errorState,autoHideDuration:6e3,open:this.state.open,onClose:this.handleClose,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.errMessage)}),r.a.createElement(Ae.a,{open:this.state.delopen,onClose:this.handleClickDelClose,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,""===this.state.errMessage?this.state.deleteMessage:this.state.errMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.handleClickDelClose,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.OnDelete,color:"primary"},"Delete"))))}}]),t}(r.a.Component)),ht=(a(636),{getContatminationType:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="contatminationType/"+e,a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Succeed",data:e.data.data.map((function(e){var t={};return t._id=e._id,t.ContatminationTypeName=e.ContatminationTypeName,t.ContatminationTypeDesc=e.ContatminationTypeDesc,t.ContatminationTypeInactive=e.ContatminationTypeInactive,t.CreatedAt=new Date(e.CreatedAt).toLocaleString(),t.CreatedBy=e.CreatedBy,t.LastUpdatedAt=new Date(e.LastUpdatedAt).toLocaleString(),t.LastUpdatedBy=e.LastUpdatedBy,t}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 2:case"end":return a.stop()}}))},getToolFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("contatminationType-filter/").concat(e),a.next=3,l.a.awrap(We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Succeed",data:e.data.data.map((function(e){var t={};return t._id=e._id,t.ContatminationTypeName=e.ContatminationTypeName,t.ContatminationTypeDesc=e.ContatminationTypeDesc,t.ContatminationTypeInactive=e.ContatminationTypeInactive,t.CreatedAt=new Date(e.CreatedAt).toLocaleString(),t.CreatedBy=e.CreatedBy,t.LastUpdatedAt=new Date(e.LastUpdatedAt).toLocaleString(),t.LastUpdatedBy=e.LastUpdatedBy,t}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 3:return a.abrupt("return",a.sent);case 4:case"end":return a.stop()}}))},update:function(e,t){return Qe("contatminationType/"+e,t).then((function(e){return e})).then((function(e){if(200===e.status&&null!==e.data.data){var t={};return t._id=e.data.data._id,t.ContatminationTypeName=e.data.data.ContatminationTypeName,t.ContatminationTypeDesc=e.data.data.ContatminationTypeDesc,t.ContatminationTypeInactive=e.data.data.ContatminationTypeInactive,t.CreatedAt=new Date(e.data.data.CreatedAt).toLocaleString(),t.CreatedBy=e.data.data.CreatedBy,t.LastUpdatedAt=new Date(e.data.data.LastUpdatedAt).toLocaleString(),t.LastUpdatedBy=e.data.data.LastUpdatedBy,{code:!0,message:"Successfully Updated",data:t}}if(200===e.status&&null===e.data.data)return{code:!1,message:e.data.message,data:null}})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}}))},add:function(e,t){return He("contatminationType/"+e,t).then((function(e){return e})).then((function(e){if(200===e.status&&null!==e.data.data){var t={};return t._id=e.data.data._id,t.ContatminationTypeName=e.data.data.ContatminationTypeName,t.ContatminationTypeDesc=e.data.data.ContatminationTypeDesc,t.ContatminationTypeInactive=e.data.data.ContatminationTypeInactive,t.CreatedAt=new Date(e.data.data.CreatedAt).toLocaleString(),t.CreatedBy=e.data.data.CreatedBy,t.LastUpdatedAt=new Date(e.data.data.LastUpdatedAt).toLocaleString(),t.LastUpdatedBy=e.data.data.LastUpdatedBy,{code:!0,message:"Successfully Added",data:t}}if(200===e.status&&null===e.data.data)return{code:!1,message:e.data.message,data:null}})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}}))},delete:function(e){return ze("contatminationType/"+e).then((function(e){return e})).then((function(e){if(200===e.status&&null!==e.data.data){var t={};return t._id=e.data.data._id,t.ContatminationTypeName=e.data.data.ContatminationTypeName,t.ContatminationTypeDesc=e.data.data.ContatminationTypeDesc,t.ContatminationTypeInactive=e.data.data.ContatminationTypeInactive,t.CreatedAt=new Date(e.data.data.CreatedAt).toLocaleString(),t.CreatedBy=e.data.data.CreatedBy,t.LastUpdatedAt=new Date(e.data.data.LastUpdatedAt).toLocaleString(),t.LastUpdatedBy=e.data.data.LastUpdatedBy,{code:!0,message:"Successfully Deleted",data:t}}if(200===e.status&&null===e.data.data)return{code:!1,message:e.data.message,data:null}})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}}))}}),gt=(Object(n.forwardRef)((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),r.a.forwardRef((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(d.a)(this,Object(m.a)(t).call(this))).handleClose=function(){e.setState({open:!1,errMessage:""})},e.handleClickDelOpen=function(t){e.setState({delopen:!0,currentDeleteData:t,deleteMessage:r.a.createElement("span",null," ","Are you sure to delete this record"," ",r.a.createElement("b",null,t.ContatminationTypeName)," ? This cannot be undone.")})},e.handleClickDelClose=function(){e.setState({delopen:!1,currentDeleteData:null})},e.OnDelete=function(){null!==e.state.currentDeleteData?ht.delete("".concat(e.state.currentDeleteData._id)).then((function(t){if(!0===t.code){var a=Object(je.a)(e.state.data),n=a.indexOf(e.state.currentDeleteData);a.splice(n,1),e.handleOpen("Deleted Successfully!","success"),e.setState({data:a})}else e.handleOpen("Oops, something went wrong while processing your request!","error")})):e.handleOpen("Please try again later!","info"),e.setState({delopen:!1,currentDeleteData:null,errMessage:""})},e.state={columns:[{field:"_id",hidden:!0},{title:"Name",field:"ContatminationTypeName",editComponent:function(t){return r.a.createElement(ge.a,{autoFocus:!0,margin:"dense",id:"name",label:"Name*",error:e.state.formState&&(void 0===t.rowData.ContatminationTypeName||0===t.rowData.ContatminationTypeName.length)||e.state.uniqueKeyError,helperText:!e.state.formState||void 0!==t.rowData.ContatminationTypeName&&""!==t.rowData.ContatminationTypeName.trim()&&0!==t.rowData.ContatminationTypeName.length?e.state.uniqueKeyError?"Contamination type cannot be duplicate":"Name":"Cannot be Empty",type:"text",defaultValue:t.rowData.ContatminationTypeName,onChange:function(a){e.onChange(a.target.value.trim(),t.rowData,"ContatminationTypeName")}})}},{title:"Description",field:"ContatminationTypeDesc",editComponent:function(t){return r.a.createElement(ge.a,{margin:"dense",id:"description",label:"Description",helperText:"Description",type:"text",defaultValue:t.rowData.ContatminationTypeDesc,onChange:function(a){e.onChange(a.target.value,t.rowData,"ContatminationTypeDesc")}})}},{title:"Inactive",field:"ContatminationTypeInactive",render:function(e){return r.a.createElement("span",null,e.ContatminationTypeInactive?"Yes":"No")},editComponent:function(t){return r.a.createElement(Xe.a,{checked:t.rowData.ContatminationTypeInactive,onChange:function(a){e.onChange(a.target.checked,t.rowData,"ContatminationTypeInactive")},value:t.value,inputProps:{"aria-label":"secondary checkbox"},color:"primary"})}},{title:"Operator",field:"LastUpdatedBy",editable:"never"},{title:"Last Updated",field:"LastUpdatedAt",render:function(e){return r.a.createElement("span",null,void 0===e?"":new Date(e.LastUpdatedAt).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}))},editable:"never"}],data:[],formState:!1,uniqueKeyError:!1,delopen:!1,currentDeleteData:null,deleteMessage:"",open:!1,errMessage:"",operator:"Admin"},e.InitContaminationTypeData=e.InitContaminationTypeData.bind(Object(Pe.a)(e)),e.handleOpen=e.handleOpen.bind(Object(Pe.a)(e)),e.handleClickDelClose=e.handleClickDelClose.bind(Object(Pe.a)(e)),e.handleClickDelOpen=e.handleClickDelOpen.bind(Object(Pe.a)(e)),e.OnDelete=e.OnDelete.bind(Object(Pe.a)(e)),e}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.InitContaminationTypeData()}},{key:"onChange",value:function(e,t,a){""===e||null===e?(this.setState({formState:!0,uniqueKeyError:!1}),t[a]=""):(t[a]=e,""!==t.ContatminationTypeName&&null!==t.ContatminationTypeName&&this.setState({formState:!1,uniqueKeyError:!1}))}},{key:"handleOpen",value:function(e,t){this.setState({open:!0,vertical:"bottom",horizontal:"right",errMessage:e,errorState:t})}},{key:"InitContaminationTypeData",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.awrap(ht.getContatminationType("").then((function(t){!0===t.code&&e.setState({data:t.data})})));case 2:case"end":return t.stop()}}))}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{style:{margin:"20px 20px 10px 0px"}},r.a.createElement(Ve.a,{title:"Contamination Type",columns:this.state.columns,data:this.state.data,editable:{onRowAdd:function(t){return new Promise((function(a,n){setTimeout((function(){e.state.data;void 0===t.ContatminationTypeName||0===t.ContatminationTypeName.length?(n(),e.handleOpen("Please fix the error(s) highlighted to save the details!","error"),e.setState({formState:!0})):e.setState({formState:!1}),e.state.formState?(n(),e.handleOpen("Please fix the error(s) highlighted to save the details!","error")):(t.Operator=e.state.operator,t.CreatedBy=e.state.operator,t.LastUpdatedBy=e.state.operator,ht.add("",t).then((function(t){if(!0===t.code){var r=Object(je.a)(e.state.data);r.push(t.data),e.handleOpen("Contamination type added successfully!","success"),e.setState({data:r},(function(){return a()})),a()}else n(),e.handleOpen(t.message,"error"),t.message.indexOf("Duplicate")>0&&e.setState({uniqueKeyError:!0})})))}),1e3)}))},onRowUpdate:function(t,a){return new Promise((function(n,r){setTimeout((function(){e.state.data;void 0===t.ContatminationTypeName||0===t.ContatminationTypeName.length?(r(),e.handleOpen("Please fix the error(s) highlighted to save the details!","error"),e.setState({formState:!0})):e.setState({formState:!1}),e.state.formState?(r(),e.handleOpen("Please fix the error(s) highlighted to save the details!","error")):(t.Operator=e.state.operator,t.LastUpdatedBy=e.state.operator,ht.update("",t).then((function(o){if(!0===o.code){var s=Object(je.a)(e.state.data),i=s.indexOf(a);s[i]=t,e.handleOpen("Contamination type updated successfully!","success"),e.setState({data:s},(function(){return n()})),n()}else r(),e.handleOpen(o.message,"error"),o.message.indexOf("Duplicate")>0&&e.setState({uniqueKeyError:!0})})))}),1e3)}))}},actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.data,columns:e.state.columns,fileName:"Contamination Type"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.InitContaminationTypeData()}},{icon:"delete",tooltip:"Delete Contamination",onClick:function(t,a){return e.handleClickDelOpen(a)}}],options:{}}),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.errorState,autoHideDuration:6e3,open:this.state.open,onClose:this.handleClose,message:r.a.createElement("span",{id:"message-id"},this.state.errMessage)}),r.a.createElement(Ae.a,{open:this.state.delopen,onClose:this.handleClickDelClose,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,""===this.state.errMessage?this.state.deleteMessage:this.state.errMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.handleClickDelClose,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.OnDelete,color:"primary"},"Delete"))))}}]),t}(r.a.Component)),yt=a(357),vt=a(338),Ct=a(334),Dt=a(353),Et=a(339),bt=(a(178),a(180)),St=a(336);a(466),Object(R.a)((function(e){return{root:{width:"100%",marginTop:e.spacing(3),overflowX:"auto"},table:{minWidth:650,hover:"rgb(23,82,142)"}}})),Object(M.a)((function(e){return{head:{backgroundColor:e.palette.common.black,color:e.palette.common.white},body:{fontSize:14}}}))(Ct.a),Object(M.a)((function(e){return{root:{"&:nth-of-type(odd)":{backgroundColor:e.palette.background.default}}}}))(Et.a);function Ot(e,t,a,n,r){return{name:e,remark:t,inactive:a,operator:n,lastmdfdate:r}}Ot("Malaysia","nothing",!1,"Lyon","2019-09-11 12:00:00am"),Ot("Singapore","nothing",!0,"Lyon","2019-09-11 12:00:00am"),Ot("India","nothing",!1,"Lyon","2019-09-11 12:00:00am"),Ot("Thailand","nothing",!1,"Lyon","2019-09-11 12:00:00am"),Ot("China","nothing",!1,"Lyon","2019-09-11 12:00:00am");a(243),a(244),a(242),a(181),a(240),a(241);var kt=a(18),wt=a.n(kt),Ft=(a(238),a(239),a(246),a(56)),xt=a.n(Ft),Tt=a(26),Nt=a.n(Tt);a(245);var jt=a(1116),Pt=a(1117),At=a(1118),Mt=a(1119),_t=a(55),It=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={data:{labels:e.labels,datasets:[{label:"Trend Of Last 5 Days",fill:!1,lineTension:.1,backgroundColor:["#78ce90","#b977ce","#fac76e","#de4d4d"],borderColor:"rgba(75,192,192,1)",data:e.data}]},options:{}},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.refs.chart.chartInstance.data.datasets}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(_t.c,{redraw:!0,ref:"chart",data:this.state.data}))}}]),t}(n.Component),Rt=It,Lt=a(19),Vt=a.n(Lt),Bt=a(314),Ut=(Object(R.a)({title:{fontSize:20,textAlign:"left"},value:{fontSize:30,fontWeight:"bold",textAlign:"left"},uom:{fontSize:15,fontWeight:"bold",textAlign:"left"},targetValue:{fontSize:15,textAlign:"left"}}),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).getChartLabels=function(){var e=new Date,t=new Date(e.getFullYear(),e.getMonth(),e.getDate()-1),a=new Date(e.getFullYear(),e.getMonth(),e.getDate()-2),n=new Date(e.getFullYear(),e.getMonth(),e.getDate()-3);return[new Date(e.getFullYear(),e.getMonth(),e.getDate()-4).toDateString(),n.toDateString(),a.toDateString(),t.toDateString(),e.toDateString()]},a.onChartIconClick=function(){a.setState({chartopen:!0})},a.handleChartClose=function(){a.setState({chartopen:!1})},a.state={item:e.item,chartopen:!1,chartLabels:a.getChartLabels()},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(jt.a,{className:this.state.item.colorClass},r.a.createElement(Pt.a,{style:{paddingLeft:"15%",paddingRight:0}},r.a.createElement(be.a,{style:{textAlign:"right",paddingRight:10}},r.a.createElement(Gt,{item:this.state.item})),r.a.createElement(be.a,null,r.a.createElement("label",{style:{fontSize:17}},this.state.item.name)),r.a.createElement(be.a,{container:!0,direction:"row"},r.a.createElement(be.a,{item:!0,xs:7},r.a.createElement(be.a,null,r.a.createElement("label",{style:{fontSize:35,fontWeight:"bold"}},this.state.item.value),r.a.createElement("span",{style:{fontSize:15,fontWeight:"bold"}},this.state.item.uom)),r.a.createElement(be.a,null,r.a.createElement("label",{style:{fontSize:15}},this.state.item.targetValue))),r.a.createElement(be.a,{item:!0,xs:5,onClick:this.onChartIconClick,style:{padding:7}},r.a.createElement(Bt.Sparklines,{data:this.state.item.trends},r.a.createElement(Bt.SparklinesCurve,{style:{color:"#000000",strokeWidth:5}})))))),r.a.createElement(Ae.a,{open:this.state.chartopen,onClose:this.handleChartClose,keepMounted:!0,"aria-labelledby":"",fullWidth:!0,maxWidth:"md"},r.a.createElement(qt,{id:"customized-dialog-title",onClose:this.handleChartClose},"Trend Of Last 5 Days"),r.a.createElement(_e.a,null,r.a.createElement(Rt,{labels:this.state.chartLabels,data:this.state.item.trends}))))}}]),t}(n.Component)),qt=function(e){var t=e.children,a=(e.classes,e.onClose);return r.a.createElement(Re.a,{disableTypography:!0},r.a.createElement(x.a,{variant:"h6"},t),a?r.a.createElement(bt.a,{"aria-label":"close",style:{position:"absolute",top:8,right:8},onClick:a},r.a.createElement(Vt.a,null)):null)},Gt=function(e){switch(e.item.trend){case"plus":return r.a.createElement("span",{style:{fontSize:15,fontWeight:"bold"}},e.item.trendValue,r.a.createElement(At.a,{style:{position:"relative",fontSize:15}}));case"minus":return r.a.createElement("span",{style:{fontSize:15,fontWeight:"bold"}},e.item.trendValue,r.a.createElement(Mt.a,{style:{position:"relative",fontSize:15}}))}},Wt=function(e){return r.a.createElement("div",{className:"cardPanel"},r.a.createElement(be.a,{container:!0,justify:"space-between"},e.items.map((function(e,t){return r.a.createElement(be.a,{item:!0,key:t,style:{width:"18%",paddingBottom:20}},r.a.createElement(Ut,{item:e}))}))))},Ht=a(1121),Qt=a(1122),zt=a(1123),Yt=a(1124),Kt=a(1125),Jt=a(254),Zt=a(255),Xt=a(1120),$t=a(257),ea=a(256),ta=(a(711),function(e){var t="";switch(e.item.level){case"Critical":t=Jt.a[600];break;case"Medium":t=Zt.a[600];break;case"Low":t=Xt.a[600];break;case"Info":t=$t.a[600];break;case"Use":t=ea.a[600]}return r.a.createElement(be.a,{item:!0,xs:12},r.a.createElement(De.a,{style:{textAlign:"center",verticalAlign:"middle",padding:5}},r.a.createElement("label",{style:{color:t,fontSize:14}},r.a.createElement(aa,{item:e.item}),e.item.message)))}),aa=function(e){switch(e.item.level){case"Critical":return r.a.createElement(Ht.a,{style:{position:"relative",fontSize:14}});case"Medium":return r.a.createElement(Qt.a,{style:{position:"relative",fontSize:14}});case"Low":return r.a.createElement(zt.a,{style:{position:"relative",fontSize:14}});case"Info":return r.a.createElement(Yt.a,{style:{position:"relative",fontSize:14}});case"Use":return r.a.createElement(Kt.a,{style:{position:"relative",fontSize:14}})}},na=function(e){return r.a.createElement("div",{className:"panel"},r.a.createElement(be.a,{item:!0,xs:12,className:"panelHeader"},r.a.createElement("label",null,"Alerts")),e.items.map((function(e,t){return r.a.createElement(be.a,{item:!0,key:t,style:{marginBottom:5}},r.a.createElement(ta,{item:e}))})))},ra=a(451),oa=function(e){var t=e.index;return r.a.createElement("label",{style:{whiteSpace:"nowrap"}},e.content[t%e.content.length])},sa=function(e){return r.a.createElement("div",{className:"panel"},r.a.createElement(be.a,{item:!0,xs:12,className:"panelHeader"},r.a.createElement("label",null,"News")),r.a.createElement(ra.a,{mode:"smooth",offset:"50%",loop:!0},(function(t){var a=t.index;return r.a.createElement(oa,{index:a,content:e.content})})))},ia=(a(801),function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={dashboardItems:[{id:1,name:"Production",value:"30",uom:"Ton",trend:"plus",trendValue:"+20%",targetValue:"34",colorClass:"color-lightgreen",trends:[23,32,26,27,30]},{id:2,name:"Off Spec",value:"30",uom:"Ton",trend:"minus",trendValue:"-10%",targetValue:"33",colorClass:"color-darkgreen",trends:[34,32,31,34,30]},{id:3,name:"QPR",value:"24",uom:" ",trend:"plus",trendValue:"+5%",targetValue:"25",colorClass:"color-whitegrey",trends:[21,23,25,20,24]},{id:4,name:"OEE",value:"25",uom:"%",trend:"plus",trendValue:"+13%",targetValue:"22",colorClass:"color-lightblue",trends:[21,27,24,23,25]},{id:5,name:"CI",value:"82",uom:" ",trend:"minus",trendValue:"-4%",targetValue:"93",colorClass:"color-darkblue",trends:[91,90,93,87,82]},{id:6,name:"Electrical",value:"69",uom:"kWh",trend:"plus",trendValue:"+11%",targetValue:"70",colorClass:"color-lightgreen",trends:[65,68,66,63,69]},{id:7,name:"Water",value:"70",uom:"Ton",trend:"minus",trendValue:"-9%",targetValue:"80",colorClass:"color-darkgreen",trends:[84,81,80,78,70]},{id:8,name:"Fuel",value:"20",uom:"Ton",trend:"plus",trendValue:"+11%",targetValue:"35",colorClass:"color-whitegrey",trends:[19,18,20,21,24]},{id:9,name:"Manning",value:"65",uom:"%",trend:"minus",trendValue:"-3%",targetValue:"67",colorClass:"color-lightblue",trends:[73,65,67,69,65]},{id:10,name:"BDR",value:"86",uom:"%",trend:"plus",trendValue:"+5%",targetValue:"84",colorClass:"color-darkblue",trends:[87,89,84,82,86]}],alertItems:[{message:"Water is poisoned!",level:"Critical"},{message:"Fuel storage is low!",level:"Medium"},{message:"7 quality problems are reported.",level:"Low"},{message:"Order EA304 is deliveried",level:"Info"},{message:"Breaking down rate is calculated",level:"Use"}],tickerBoxText:["THINK RUBBER","THINK HALCYON","We produce Technically Specified Rubber of Indonesian, Malaysian and African origins to a range of specifications.","We have particular expertise in the production of consistently high-quality constant viscosity rubber (both VK and CV).","Our robust technical capability lets us customise the natural rubber specifications to our customers\u2019 unique requirements.","Our crumb rubber is sold to all major tyre manufacturers globally."]},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(be.a,null,r.a.createElement(be.a,{item:!0,style:{width:"100%"}},r.a.createElement(Wt,{items:this.state.dashboardItems}),r.a.createElement(na,{items:this.state.alertItems}),r.a.createElement(sa,{content:this.state.tickerBoxText})))}}]),t}(n.Component)),la=ia,ca=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={chartData:{labels:["Jan 2019","Feb 2019","Mar 2019","Apr 2019","May 2019","Jun 2019","Jul 2019","Aug 2019","Sep 2019","Oct 2019","Nov 2019","Dec 2019"],datasets:[{label:"Monthly Target",data:[700,800,300,650,888,200,400,350,900,1e3],backgroundColor:["rgba(100, 99, 200, 0.6)","rgba(100, 99, 200, 0.6)","rgba(100, 99, 200, 0.6)","rgba(100, 99, 200, 0.6)","rgba(100, 99, 200, 0.6)","rgba(100, 99, 200, 0.6)","rgba(100, 99, 200, 0.6)","rgba(100, 99, 200, 0.6)","rgba(100, 99, 200, 0.6)","rgba(100, 99, 200, 0.6)","rgba(100, 99, 200, 0.6)","rgba(100, 99, 200, 0.6)","rgba(100, 99, 200, 0.6)"]},{label:"Monthly Production",data:[100,850,0,500,880,250,600,800,600,500],backgroundColor:["rgba(100, 99, 5, 0.6)","rgba(100, 99, 5, 0.6)","rgba(100, 99, 5, 0.6)","rgba(100, 99, 5, 0.6)","rgba(100, 99, 5, 0.6)","rgba(100, 99, 5, 0.6)","rgba(100, 99, 5, 0.6)","rgba(100, 99, 5, 0.6)","rgba(100, 99, 5, 0.6)","rgba(100, 99, 5, 0.6)","rgba(100, 99, 5, 0.6)","rgba(100, 99, 5, 0.6)","rgba(100, 99, 5, 0.6)"]}]}},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement("div",{className:e.Chart},r.a.createElement(_t.a,{data:this.state.chartData,width:100,height:50,options:{maintainAspectRatio:!0}}))}}]),t}(n.Component),ua=(Object(M.a)((function(e){return{Chart:{display:"flex",margin:-50}}}))(ca),{properties:{name:{description:"",type:"string",required:!0,allowEmpty:!1,messages:{allowEmpty:"Buyer name cannot be empty."}},country:{description:"",type:["number","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Buyer country cannot be empty",type:"Buyer country cannot be empty."}}}}),da=a(24),ma={validateFields:function(e){return da.validate(e,ua,{cast:!0})},get:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="buyer/"+e,a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 2:case"end":return a.stop()}}))},getFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("buyer-filter/").concat(e),a.next=3,l.a.awrap(We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 3:return a.abrupt("return",a.sent);case 4:case"end":return a.stop()}}))},update:function(e,t){return Qe("buyer/"+e,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Buyer updated successfully.",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="buyer/"+e,n.abrupt("return",He(a,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,message:"Buyer added successfully.",data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("buyer/"+e).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e}))}},pa=ma,fa={name:"",address1:"",address2:"",address3:"",city:"",state:"",country:"",zip:"",phone:"",startBuyingYear:new Date(Date.now()).toLocaleString(),remarks:"",inactive:!1,createdAt:new Date(Date.now()).toLocaleString(),createdBy:"Admin",lastUpdatedAt:new Date(Date.now()).toLocaleString(),lastUpdatedBy:"Admin"},ha=fa,ga=a(1069),ya=a(303),va=a(17),Ca=a(45),Da=a(271),Ea=a(304),ba=a(308),Sa=a(1071),Oa=function(e){var t="/hardcode-inputs/"+e;return qe.a.get(t)},ka=function(e,t){if(void 0!==e&&""!==e&&void 0!==t&&""!==t)return qe.a.get("/hardcode-inputs/alertMessage.json").then((function(a){if(void 0!==a&&void 0!==a.data&&null!==a.data&&a.data.hasOwnProperty(e))return a.data[e][t]}))},wa=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={data:[]},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initData()}},{key:"initData",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:Oa("".concat(this.props.jsonFileName,".json")).then((function(e){return e.data})).then((function(t){e.setState({data:t[e.props.jsonPropertyName]})}));case 1:case"end":return t.stop()}}),null,this)}},{key:"renderOptions",value:function(){var e=this;return this.state.data.map((function(t,a){return r.a.createElement(et.a,{label:e.props.label,value:t.Value,key:t.Name,name:t.Name},t.Name)}))}},{key:"handleChange",value:function(e,t,a){var n=this.state.data.find((function(t){return t.Value===e.target.value}));void 0!==this.props.rowData?this.props.handleChange(void 0===n?"":n,t,this.props.rowData,a):this.props.handleChange(void 0===n?"":n,t,a)}},{key:"render",value:function(){var e=this;return r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(Ea.a,{shrink:!0,htmlFor:"ddl".concat(this.props.propertyName),required:this.props.required,error:!this.props.formControl.valid},this.props.label),r.a.createElement(ba.a,{id:"ddl".concat(this.props.propertyName),value:void 0===this.props.selectedValue?"":this.props.selectedValue,error:!this.props.formControl.valid,onChange:function(t){return e.handleChange(t,e.props.propertyName,e.props.required)},displayEmpty:!0},r.a.createElement(et.a,{value:""},r.a.createElement("em",null,"Select ",this.props.label)),this.renderOptions()),r.a.createElement(Sa.a,{error:!this.props.formControl.valid,style:{display:this.props.formControl.valid?"none":""}},this.props.formControl.message))}}]),t}(r.a.Component),Fa=wa,xa=Fa,Ta=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).handleDateChange=function(e){var t=a.state.formControls;a.props.handleChange(e,"startBuyingYear"),t.startBuyingYear.value=e,a.setState({formControls:t})},a.state={formControls:{name:{valid:!0,message:"",value:a.props.formData.name},address1:{valid:!0,message:"",value:a.props.formData.address1},address2:{valid:!0,message:"",value:a.props.formData.address2},address3:{valid:!0,message:"",value:a.props.formData.address3},city:{valid:!0,message:"",value:a.props.formData.city},state:{valid:!0,message:"",value:a.props.formData.state},country:{valid:!0,message:"",value:a.props.formData.country},zip:{valid:!0,message:"",value:a.props.formData.zip},phone:{valid:!0,message:"",value:a.props.formData.phone},startBuyingYear:{valid:!0,message:"",value:a.props.formData.startBuyingYear},remarks:{valid:!0,message:"",value:a.props.formData.remarks},inactive:{valid:!0,message:"",value:a.props.formData.inactive}},formState:{valid:!0,dirty:!1,errors:[]}},a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a.handleDateChange=a.handleDateChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"handleChange",value:function(e,t){var a=this.state.formControls,n=this.state.formState;void 0===e||0===e.length?(a[t].valid=!1,a[t].message="".concat(t," cannot be empty.")):(a[t].valid=!0,a[t].message=""),this.props.handleChange(e,t),a[t].value=e,n.dirty=!0,this.setState({formControls:a,formState:n})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"form-container"},r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-evenly",alignItems:"center",md:6,xs:12,sm:12,xl:8,lg:8},r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(ge.a,{required:!0,id:"name",label:"Name",error:!this.state.formControls.name.valid,helperText:this.state.formControls.name.message,defaultValue:this.state.formControls.name.value,onChange:function(t){return e.handleChange(t.target.value.trim(),"name")}})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(ge.a,{id:"address1",label:"Address1",defaultValue:this.state.formControls.address1.value,onChange:function(t){return e.handleChange(t.target.value,"address1")}})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(ge.a,{id:"address2",label:"Address2",defaultValue:this.state.formControls.address2.value,onChange:function(t){return e.handleChange(t.target.value,"address2")}})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(ge.a,{id:"address3",label:"Address3",defaultValue:this.state.formControls.address3.value,onChange:function(t){return e.handleChange(t.target.value,"address3")}})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(ge.a,{id:"city",label:"City",defaultValue:this.state.formControls.city.value,onChange:function(t){return e.handleChange(t.target.value,"city")}})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(ge.a,{id:"state",label:"State",defaultValue:this.state.formControls.state.value,onChange:function(t){return e.handleChange(t.target.value,"state")}})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(xa,{jsonFileName:"worldCountry",jsonPropertyName:"WorldCountry",formControl:this.state.formControls.country,propertyName:"country",required:!0,label:"Country",handleChange:this.handleChange,selectedValue:this.state.formControls.country.Value})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(ge.a,{id:"zip",label:"ZIP",defaultValue:this.state.formControls.zip.value,onChange:function(t){return e.handleChange(t.target.value,"zip")}})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(ge.a,{id:"phone",label:"Phone",defaultValue:this.state.formControls.phone.value,onChange:function(t){return e.handleChange(t.target.value,"phone")}})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Da.a,{required:!0,openTo:"year",format:"yyyy",label:"Start Buying Year",views:["year"],value:this.state.formControls.startBuyingYear.value,onChange:this.handleDateChange}))),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(ge.a,{id:"remarks",label:"remarks",defaultValue:this.state.formControls.remarks.value,onChange:function(t){return e.handleChange(t.target.value,"remarks")}})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(ga.a,{component:"label"},"Inactive"),r.a.createElement(Xe.a,{checked:this.state.formControls.inactive.value,value:this.state.formControls.inactive.value,color:"primary",inputProps:{"aria-label":"primary checkbox"},onChange:function(t){return e.handleChange(t.target.checked,"inactive")}}))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=t.formControls;return e.formState.valid||Array.isArray(e.formState.errors)&&e.formState.errors.map((function(e){a[e.property].valid=!1,a[e.property].message=e.message})),{formState:e.formState,formControls:a}}}]),t}(r.a.Component),Na=Ta,ja=(Object(n.forwardRef)((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),r.a.forwardRef((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).openDialog=function(e){a.setState({dialogOpen:!0,currentDeleteData:e,dialogMessage:r.a.createElement("span",null,"Are you sure to delete this record ",r.a.createElement("b",null,e.name)," ? This cannot be undone.")})},a.closeDialog=function(){a.setState({dialogOpen:!1,currentDeleteData:null,dialogMessage:""})},a.openForm=function(e){void 0===e?a.setState({actionStatus:"Add",newData:Object(me.a)({},ha)}):a.setState({actionStatus:"Update",newData:Object(me.a)({},e)}),a.setState({formOpen:!0,formState:{valid:!0,dirty:!1,errors:[]}})},a.closeForm=function(){a.setState({formOpen:!1,newData:{},actionStatus:""})},a.onSave=function(){var e=a.state.formState,t=Object(me.a)({},a.state.newData);"object"===typeof t.country&&(t.country=t.country._id);var n=pa.validateFields(t);if(n.valid){var r=Object(je.a)(a.state.data);"Add"===a.state.actionStatus?pa.add("",t).then((function(t){!0===t.code?(e.valid=!0,r.push(t.data),a.setState({data:r}),a.closeForm(),a.snackOpen("Buyer created successfully!","success")):(e.valid=!1,e.errors=t.errors,a.snackOpen("Please fix the error(s) highlighted to save the details!","error"))})).catch((function(e){a.snackOpen("Oops, something went wrong while processing your request!","error")})):pa.update("",t).then((function(n){if(!0===n.code){e.valid=!0;var o=r.find((function(e){return e._id===t._id})),s=r.indexOf(o);r[s]=n.data,a.setState({data:r}),a.closeForm(),a.snackOpen("Buyer updated successfully!","success")}else e.valid=!1,e.errors=n.errors,a.snackOpen("Please fix the error(s) highlighted to save the details!","error")})).catch((function(e){a.snackOpen("Oops, something went wrong while processing your request!","error")}))}else{e.valid=!1;var o=n.errors.map((function(e){var t={};return t.property=e.property,t.message=e.message,t}));e.errors=o,a.snackOpen("Please fix the error(s) highlighted to save the details!","error")}a.setState({formState:e})},a.onDelete=function(){null!==a.state.currentDeleteData&&pa.delete("".concat(a.state.currentDeleteData._id)).then((function(e){if(!0===e.code){var t=Object(je.a)(a.state.data),n=t.find((function(e){return e._id===a.state.currentDeleteData._id})),r=t.indexOf(n);t.splice(r,1),a.setState({data:t}),a.closeDialog(),a.snackOpen("Successfully Deleted!","success")}else a.snackOpen("Oops, something went wrong while processing your request!","error")}))},a.onEdit=function(e){a.openForm(e)},a.state={columns:[{field:"_id",hidden:!0},{title:"Name",field:"name"},{title:"Address 1",field:"address1"},{title:"Address 2",field:"address2"},{title:"Address 3",field:"address3"},{title:"City",field:"city"},{title:"State",field:"state"},{title:"Country",field:"country",lookup:{}},{title:"ZIP",field:"zip"},{title:"Phone",field:"phone"},{title:"Start Buying Year",field:"startBuyingYear",render:function(e){return r.a.createElement("span",null,void 0===e.startBuyingYear?"":new Date(e.startBuyingYear).getFullYear())}},{title:"Remarks",field:"remarks"},{title:"Inactive",field:"inactive",render:function(e){return r.a.createElement("span",null,e.inactive?"Yes":"No")}},{title:"Operator",field:"lastUpdatedBy"},{title:"Last Updated",field:"lastUpdatedAt",render:function(e){return r.a.createElement("span",null,void 0===e?"":new Date(e.lastUpdatedAt).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}))},editable:"never"}],data:[],currentDeleteData:null,newData:ha,formOpen:!1,dialogOpen:!1,dialogMessage:"",disabled:!1,actionStatus:"",formState:{valid:!0,dirty:!1,errors:[]}},a.openDialog=a.openDialog.bind(Object(Pe.a)(a)),a.closeDialog=a.closeDialog.bind(Object(Pe.a)(a)),a.openForm=a.openForm.bind(Object(Pe.a)(a)),a.closeForm=a.closeForm.bind(Object(Pe.a)(a)),a.snackOpen=a.snackOpen.bind(Object(Pe.a)(a)),a.snackClose=a.snackClose.bind(Object(Pe.a)(a)),a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initBuyer(),this.initCountryData()}},{key:"initBuyer",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.awrap(pa.get("").then((function(t){!0===t.code&&e.setState({data:t.data})})));case 2:case"end":return t.stop()}}))}},{key:"initCountryData",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:Oa("worldCountry.json").then((function(e){return e.data})).then((function(t){var a={};t.WorldCountry.forEach((function(e){return a[e.Value]=e.Name}));var n=Object(je.a)(e.state.columns);n[n.findIndex((function(e){return"country"===e.field}))].lookup=a,e.setState({columns:n})}));case 1:case"end":return t.stop()}}))}},{key:"handleChange",value:function(e,t){var a=this.state.newData;a[t]=e;var n=this.state.formState;n.valid=!0,this.setState({newData:a,formState:n})}},{key:"snackOpen",value:function(e,t){this.setState({alertOpen:!0,alertMessage:e,alertClass:t})}},{key:"snackClose",value:function(){this.setState({alertOpen:!1,alertMessage:"",alertClass:"",currentDeleteData:null})}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{style:{margin:"20px 20px 10px 0px"}},r.a.createElement(Ve.a,{title:"Buyer",columns:this.state.columns,data:this.state.data,components:{Toolbar:function(t){return r.a.createElement("div",null,r.a.createElement(Le.MTableToolbar,t),r.a.createElement("div",{style:{padding:"0px 15px"}},r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:function(){return e.openForm()},"aria-label":"add"},r.a.createElement(wt.a,null))))}},actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.data,columns:e.state.columns,fileName:"Buyer"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.initBuyer()}},{icon:"edit",tooltip:"Edit Buyer",onClick:function(t,a){return e.openForm(a)}},{icon:"delete",tooltip:"Delete Buyer",onClick:function(t,a){return e.openDialog(a)}}],options:{}}),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:6e3,open:this.state.alertOpen,onClose:this.snackClose,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}),r.a.createElement(Ae.a,{fullScreen:!0,open:this.state.formOpen,onClose:this.closeForm,TransitionComponent:this.Transition},r.a.createElement(w.a,{className:"appBar"},r.a.createElement(F.a,null,r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:this.closeForm,"aria-label":"close"},r.a.createElement(Vt.a,null)),r.a.createElement(x.a,{variant:"h6",className:"app-title"},"Buyer Details"),r.a.createElement(he.a,{color:"inherit",disabled:this.state.disabled,onClick:this.onSave},"save"))),r.a.createElement(_e.a,null,r.a.createElement(Na,{handleChange:this.handleChange,formData:this.state.newData,formState:this.state.formState}))),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.openDialog,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.closeDialog,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDelete,color:"primary"},"Delete"))))}}]),t}(r.a.Component)),Pa=ja,Aa={properties:{code:{description:"",type:"string",required:!0,allowEmpty:!1,messages:{required:"Code cannot be empty.",allowEmpty:"Code cannot be empty."}},branch:{description:"",type:"string",required:!0,allowEmpty:!1,messages:{required:"Cluster cannot be empty.",allowEmpty:"Cluster cannot be empty."}},country:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{required:"Country cannot be empty",allowEmpty:"Cluster cannot be empty."}}}},Ma=a(24),_a={validateFields:function(e){return Ma.validate(e,Aa,{cast:!0})},get:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="branch/"+e,a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 2:case"end":return a.stop()}}))},getToolFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("branch-filter/").concat(e),a.next=3,l.a.awrap(We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 3:return a.abrupt("return",a.sent);case 4:case"end":return a.stop()}}))},update:function(e,t){return Qe("branch/"+e,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Cluster updated successfully.",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="branch/"+e,n.abrupt("return",He(a,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,message:"Cluster added successfully.",data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("branch/"+e).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e}))}},Ia=_a,Ra={get:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="country/"+e,a.abrupt("return",We(t).then((function(e){return e})).then((function(e){if(200===e.status&&null!==e.data.data)return{code:!0,message:"Succeed",data:e.data.data.map((function(e){var t={};return t._id=e._id,t.name=e.name,t.inactive=e.inactive,t.lastUpdatedBy=e.lastUpdatedBy,t.remarks=e.remarks,t.lastUpdatedAt=e.lastUpdatedAt,t}))}})));case 2:case"end":return a.stop()}}))},update:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="country/"+e,n.abrupt("return",Qe(a,t).then((function(e){if(200===e.status&&null!==e.data.data){var t=e.data.data;return t.lastUpdatedAt=new Date(t.lastUpdatedAt).toLocaleString(),t.inactiveDisplay=t.inactive?"Yes":"No",{code:!0,message:e.data.message,data:t}}return{code:!1,message:e.data.message,data:e.data.data}}),(function(e){return{code:!1,message:e.response.data.message,data:e.response.data.data}})));case 2:case"end":return n.stop()}}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="country/"+e,n.abrupt("return",He(a,t).then((function(e){if(200===e.status&&null!==e.data.data){var t=e.data.data;return t.lastUpdatedAt=new Date(t.lastUpdatedAt).toLocaleString(),{code:!0,message:e.data.message,data:t}}return{code:!1,message:e.data.message,data:e.data.data}}),(function(e){return{code:!1,message:e.response.data.message,data:e.response.data.data}})));case 2:case"end":return n.stop()}}))},delete:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="country/"+e,a.abrupt("return",ze(t).then((function(e){return e})).then((function(e){if(200===e.status&&null!==e.data.data)return{code:!0,message:e.data.message,data:null}}),(function(e){return{code:!1,message:e.response.data.message,data:e.response.data.data}})));case 2:case"end":return a.stop()}}))}},La=Ra,Va=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={countryData:[]},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initCoutry()}},{key:"initCoutry",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.awrap(La.get("").then((function(t){if(!0===t.code){var a=t.data.map((function(e){var t={};return t.value=e._id,t.name=e.name,t}));e.setState({countryData:a})}})));case 2:case"end":return t.stop()}}))}},{key:"renderOptions",value:function(){var e=this;return this.state.countryData.map((function(t,a){return r.a.createElement(et.a,{label:!0===e.props.containWorld?"World":"Select a Country",value:t.value,key:t.name,name:t.name},t.name)}))}},{key:"handleChange",value:function(e,t){void 0===this.props.rowData?this.props.handleChange(e.target.value,this.props.propertyName,this.props.required):this.props.handleChange(e.target.value,this.props.rowData,t)}},{key:"render",value:function(){var e=this;return r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Ea.a,{shrink:!0,htmlFor:"country",required:!0,error:!this.props.formControl.valid},"Country"),r.a.createElement(ba.a,{id:"country",value:this.props.selectedValue,error:!1===this.props.formControl.valid,displayEmpty:!0,name:"country",className:"",margin:"dense",onChange:function(t){return e.handleChange(t,e.props.propertyName)}},r.a.createElement(et.a,{value:""},r.a.createElement("em",null,!0===this.props.containWorld?"World":"Select Country")),this.renderOptions()),r.a.createElement(Sa.a,{error:!this.props.formControl.valid,style:{display:this.props.formControl.valid?"none":""}},this.props.formControl.valid?"":this.props.formControl.message))}}]),t}(n.Component),Ba=Va,Ua=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(d.a)(this,Object(m.a)(t).call(this))).handleClickDelClose=function(){e.setState({dialogOpen:!1,currentDeleteData:null})},e.state={formControls:{code:{valid:!0,message:"",value:""},branch:{valid:!0,message:"",value:""},country:{valid:!0,message:"",value:""},remarks:{valid:!0,message:"",value:""},inactive:{valid:!0,message:"",value:!1}},columns:[{field:"_id",hidden:!0},{title:"Code",field:"code",editComponent:function(t){return r.a.createElement(ge.a,{required:!0,margin:"dense",id:"code",label:"Code",error:!e.state.formControls.code.valid,helperText:e.state.formControls.code.message,type:"text",defaultValue:t.rowData.code,onChange:function(a){e.onChange(a.target.value,t.rowData,"code")}})}},{title:"Branch",field:"branch",editComponent:function(t){return r.a.createElement(ge.a,{required:!0,margin:"dense",id:"code",label:"Name",error:!e.state.formControls.branch.valid,helperText:e.state.formControls.branch.message,type:"text",defaultValue:t.rowData.branch,onChange:function(a){e.onChange(a.target.value,t.rowData,"branch")}})}},{title:"Country",field:"country",render:function(e){return r.a.createElement("span",null,void 0===e.country?"":e.country.name)},editComponent:function(t){return r.a.createElement(Ba,{handleChange:e.onChange,formControl:e.state.formControls.country,propertyName:"country",rowData:t.rowData})}},{title:"Remarks",field:"remarks",editComponent:function(t){return r.a.createElement(ge.a,{margin:"dense",id:"remarks",label:"Remarks",type:"text",defaultValue:t.rowData.remarks,onChange:function(a){e.onChange(a.target.value,t.rowData,"remarks")}})}},{title:"Inactive",field:"inactive",type:"boolean",render:function(e){return r.a.createElement("span",null,e.inactive?"Yes":"No")},editComponent:function(t){return r.a.createElement(Xe.a,{checked:t.rowData.inactive,onChange:function(a){e.onChange(a.target.checked,t.rowData,"inactive")},value:t.value,inputProps:{"aria-label":"secondary checkbox"},color:"primary"})}},{title:"Operator",field:"lastUpdatedBy",editable:"never"},{title:"Last Updated",field:"lastUpdatedAt",render:function(e){return r.a.createElement("span",null,void 0===e?"":new Date(e.lastUpdatedAt).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}))},editable:"never"}],data:[],formState:{valid:!0,errors:[]},dialogOpen:!1,currentDeleteData:null,deleteMessage:"",alertClass:"",alertOpen:!1,alertMessage:"",operator:"Admin"},e.handleClickDelClose=e.handleClickDelClose.bind(Object(Pe.a)(e)),e.handleClickDelOpen=e.handleClickDelOpen.bind(Object(Pe.a)(e)),e.OnDelete=e.OnDelete.bind(Object(Pe.a)(e)),e.snackOpen=e.snackOpen.bind(Object(Pe.a)(e)),e.snackClose=e.snackClose.bind(Object(Pe.a)(e)),e.onChange=e.onChange.bind(Object(Pe.a)(e)),e}return Object(p.a)(t,e),Object(u.a)(t,[{key:"snackOpen",value:function(e,t){this.setState({alertOpen:!0,alertMessage:e,alertClass:t})}},{key:"snackClose",value:function(){this.setState({alertOpen:!1,alertMessage:"",alertClass:""})}},{key:"componentDidMount",value:function(){this.initBranch()}},{key:"onChange",value:function(e,t,a){var n=this.state.formControls;""===e.trim()||null===e.trim()||void 0===e.trim()?(n[a].valid=!1,n[a].message="".concat(a," cannot be empty")):(n[a].valid=!0,n[a].message="",n[a].value=e),t[a]=e,this.setState({formControls:n})}},{key:"handleClickDelOpen",value:function(e,t){this.setState({dialogOpen:!0,currentDeleteData:t,dialogMessage:r.a.createElement("span",null,"Are you sure to delete this record ",r.a.createElement("b",null,t.code)," ? This cannot be undone.")})}},{key:"OnDelete",value:function(){var e=this;null!==this.state.currentDeleteData?Ia.delete("".concat(this.state.currentDeleteData._id)).then((function(t){if(!0===t.code){var a=Object(je.a)(e.state.data),n=a.indexOf(e.state.currentDeleteData);a.splice(n,1),e.snackOpen("Successfully Deleted!","success"),e.handleClickDelClose(),e.setState({data:a})}else e.snackOpen("Oops, something went wrong while processing your request!","error")})):this.snackOpen("Please try again later!","info")}},{key:"initBranch",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.awrap(Ia.get("").then((function(t){!0===t.code&&e.setState({data:t.data})})));case 2:case"end":return t.stop()}}))}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{style:{margin:"20px 20px 10px 0px"}},r.a.createElement(Ve.a,{title:"Branch",columns:this.state.columns,data:this.state.data,editable:{onRowAdd:function(t){return new Promise((function(a,n){setTimeout((function(){var r=Object(je.a)(e.state.data),o=e.state.formControls,s=Ia.validateFields(t);s.valid?Ia.add("",t).then((function(t){!0===t.code?(r.push(t.data),e.snackOpen("Successfully added!","success"),e.setState({data:r},(function(){return a()}))):(n(),t.errors.map((function(e){o[e.property].valid=!1,o[e.property].message=e.message})),e.setState({formControls:o}),e.snackOpen("Please fix the error(s) highlighted to save the details!","error"))})).catch((function(t){n(),e.snackOpen("Oops, something went wrong while processing your request!","error")})):(n(),console.log(s),s.errors.map((function(e){o[e.property].valid=!1,o[e.property].message=e.message})),e.setState({formControls:o}))}),1e3)}))},onRowUpdate:function(t,a){return new Promise((function(n,r){setTimeout((function(){var o=Object(je.a)(e.state.data),s=Object(me.a)({},e.state.formControls),i=Ia.validateFields(t);i.valid?Ia.update("",t).then((function(t){if(!0===t.code){var i=o.indexOf(a);o[i]=t.data,e.snackOpen("Successfully updated!","success"),e.setState({data:o},(function(){return n()}))}else r(),t.errors.map((function(e){return s[e.property].valid=!1,s[e.property].message=e.message,s})),e.setState({formControls:s}),e.snackOpen("Please fix the error(s) highlighted to save the details!","error")})).catch((function(t){r(),e.snackOpen("Oops, something went wrong while processing your request!","error")})):(r(),i.errors.map((function(e){s[e.property].valid=!1,s[e.property].message=e.message})),e.setState({formControls:s}))}),1e3)}))}},actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.data,columns:e.state.columns,fileName:"Branch"})},isFreeAction:!0,onClick:function(){}},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.initBranch()}},{icon:"delete",tooltip:"Delete Contamination",onClick:function(t,a){return e.handleClickDelOpen(t,a)}}],options:{}}),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:6e3,open:this.state.alertOpen,onClose:this.snackClose,message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.handleClickDelClose,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.handleClickDelClose,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:function(){return e.OnDelete()},color:"primary"},"Delete"))))}}]),t}(r.a.Component),qa=Ua,Ga={properties:{FctyCode:{description:"",type:"string",required:!0,allowEmpty:!1,messages:{allowEmpty:"Factory code cannot be empty."}},FctyName:{description:"",type:"string",required:!0,allowEmpty:!1,messages:{allowEmpty:"Factory code cannot be empty."}},FctyRegion:{description:"",type:"any",messages:{conform:"Factory region cannot be empty."},conform:function(e){return""!==e&&void 0!==e}},FctyBrch:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Factory branch cannot be empty"}},FctyCountry:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Factory country cannot be empty"}},FctyOffCountry:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Factory office country cannot be empty"}},FctyBusinessType:{description:"",type:"any",messages:{conform:"Factory business type cannot be empty."},conform:function(e){return""!==e&&void 0!==e}},FctyProcessType:{description:"",type:"any",messages:{conform:"Factory process type cannot be empty."},conform:function(e){return""!==e&&void 0!==e}},FctyProcessTypeAfterDrying:{description:"",type:"any",messages:{conform:"Factory process type after drying cannot be empty."},conform:function(e){return""!==e&&void 0!==e}}}},Wa=a(24),Ha={validateFields:function(e){return Wa.validate(e,Ga,{cast:!0})},get:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="factory/"+e,a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 2:case"end":return a.stop()}}))},getToolFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("factory-filter/").concat(e),a.next=3,l.a.awrap(We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 3:return a.abrupt("return",a.sent);case 4:case"end":return a.stop()}}))},update:function(e,t){return Qe("factory/"+e,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Factory updated successfully.",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="factory/"+e,n.abrupt("return",He(a,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,message:"Factory added successfully.",data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("factory/"+e).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e}))}},Qa=Ha,za={FctyCode:"",FctyName:"",FctyRegion:"",FctyAddr1:"",FctyAddr2:"",FctyAddr3:"",FctyCity:"",FctyState:"",FctyCountry:"",FctyZIP:"",FctyOffAddr1:"",FctyOffAddr2:"",FctyOffAddr3:"",FctyOffCity:"",FctyOffState:"",FctyOffCountry:"",FctyOffZIP:"",FctyBrch:"",FctyBusinessType:"",FctyAreaSize:0,FctyRatedCapacity:0,FctyProcessType:"",FctyProcessTypeAfterDrying:"",FctyLat:0,FctyLng:0,FctyEstablished:new Date(Date.now()).toLocaleString(),FctyAcquisition:new Date(Date.now()).toLocaleString(),FctyRemarks:"",FctyInactive:!1,FctyCreatedAt:new Date(Date.now()).toLocaleString(),FctyCreatedBy:"Admin",FctyLastUpdatedAt:new Date(Date.now()).toLocaleString(),FctyLastUpdatedBy:"Admin"},Ya=za,Ka=a(1077),Ja=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={branchData:[]},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initCoutry()}},{key:"initCoutry",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.awrap(Ia.get("").then((function(t){if(!0===t.code){var a=t.data.map((function(e){var t={};return t.value=e._id,t.name=e.branch,t}));e.setState({branchData:a})}})));case 2:case"end":return t.stop()}}))}},{key:"renderOptions",value:function(){return this.state.branchData.map((function(e,t){return r.a.createElement(et.a,{label:"Select a Branch",value:e.value,key:e.name,name:e.name},e.name)}))}},{key:"handleChange",value:function(e,t){void 0===this.props.rowData?this.props.handleChange(e.target.value,t):this.props.handleChange(e.target.value,this.props.rowData,t)}},{key:"render",value:function(){var e=this;return r.a.createElement(ya.a,{style:{width:"100%"},margin:"normal"},r.a.createElement(Ea.a,{shrink:!0,htmlFor:"branch",required:!0,error:!this.props.formControl.valid},"Branch"),r.a.createElement(ba.a,{id:"branch",value:void 0===this.props.rowData?this.props.formControl.value:0===Object.keys(this.props.rowData).length||void 0===this.props.rowData[this.props.propertyName]?"":void 0===this.props.rowData[this.props.propertyName]._id?this.props.rowData[this.props.propertyName]:this.props.rowData[this.props.propertyName]._id,error:!1===this.props.formControl.valid,displayEmpty:!0,name:"branch",className:"",onChange:function(t){return e.handleChange(t,e.props.propertyName)}},r.a.createElement(et.a,{value:""},r.a.createElement("em",null,"Select branch")),this.renderOptions()),r.a.createElement(Sa.a,{error:!this.props.formControl.valid,style:{display:this.props.formControl.valid?"none":""}},this.props.formControl.valid?"":this.props.formControl.message))}}]),t}(n.Component),Za=Ja,Xa=a(3),$a=function(e){var t=e.inputRef,a=e.onChange,n=e.className,o=e.onFocus,s=e.defaultValue;return r.a.createElement(Xa.a,{className:n,getInputRef:t,onValueChange:function(e){a({target:{value:e.value}})},defaultValue:s,onFocus:o,decimalScale:5,fixedDecimalScale:!0})},en=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={formControls:{FctyCode:{valid:!0,message:"",value:a.props.formData.FctyCode},FctyName:{valid:!0,message:"",value:a.props.formData.FctyName},FctyRegion:{valid:!0,message:"",value:a.props.formData.FctyRegion},FctyAddr1:{valid:!0,message:"",value:a.props.formData.FctyAddr1},FctyAddr2:{valid:!0,message:"",value:a.props.formData.FctyAddr2},FctyAddr3:{valid:!0,message:"",value:a.props.formData.FctyAddr3},FctyCity:{valid:!0,message:"",value:a.props.formData.FctyCity},FctyState:{valid:!0,message:"",value:a.props.formData.FctyState},FctyCountry:{valid:!0,message:"",value:void 0===a.props.formData.FctyCountry||""===a.props.formData.FctyCountry?"":a.props.formData.FctyCountry._id},FctyZIP:{valid:!0,message:"",value:a.props.formData.FctyZIP},FctyOffAddr1:{valid:!0,message:"",value:a.props.formData.FctyOffAddr1},FctyOffAddr2:{valid:!0,message:"",value:a.props.formData.FctyOffAddr2},FctyOffAddr3:{valid:!0,message:"",value:a.props.formData.FctyOffAddr3},FctyOffCity:{valid:!0,message:"",value:a.props.formData.FctyOffCity},FctyOffState:{valid:!0,message:"",value:a.props.formData.FctyOffState},FctyOffCountry:{valid:!0,message:"",value:void 0===a.props.formData.FctyOffCountry||""===a.props.formData.FctyOffCountry?"":a.props.formData.FctyOffCountry._id},FctyOffZIP:{valid:!0,message:"",value:a.props.formData.FctyOffZIP},FctyBrch:{valid:!0,message:"",value:void 0===a.props.formData.FctyBrch||""===a.props.formData.FctyBrch?"":a.props.formData.FctyBrch._id},FctyBusinessType:{valid:!0,message:"",value:a.props.formData.FctyBusinessType},FctyAreaSize:{valid:!0,message:"",value:a.props.formData.FctyAreaSize},FctyRatedCapacity:{valid:!0,message:"",value:a.props.formData.FctyRatedCapacity},FctyProcessType:{valid:!0,message:"",value:a.props.formData.FctyProcessType},FctyProcessTypeAfterDrying:{valid:!0,message:"",value:a.props.formData.FctyProcessTypeAfterDrying},FctyLat:{valid:!0,message:"",value:a.props.formData.FctyLat},FctyLng:{valid:!0,message:"",value:a.props.formData.FctyLng},FctyEstablished:{valid:!0,message:"",value:new Date(a.props.formData.FctyEstablished)},FctyAcquisition:{valid:!0,message:"",value:new Date(a.props.formData.FctyAcquisition)},FctyRemarks:{valid:!0,message:"",value:a.props.formData.FctyRemarks},FctyInactive:{valid:!0,message:"",value:a.props.formData.FctyInactive}},formState:{valid:!0,dirty:!1,errors:[]}},a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a.handleDateChange=a.handleDateChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"handleChange",value:function(e,t){var a=this.state.formControls,n=this.state.formState;void 0===e||0===e.length?(a[t].valid=!1,a[t].message="".concat(t," cannot be empty.")):(a[t].valid=!0,a[t].message=""),this.props.handleChange(e,t),a[t].value=e,n.dirty=!0,this.setState({formControls:a,formState:n})}},{key:"handleDateChange",value:function(e,t){var a=this.state.formControls;this.props.handleChange(t,e),a[e].value=t,this.setState({formControls:a})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"form-container"},r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-evenly",alignItems:"center",md:6,xs:12,sm:12,xl:8,lg:8},r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(ge.a,{required:!0,id:"FctyCode",label:"Code",error:!this.state.formControls.FctyCode.valid,helperText:this.state.formControls.FctyCode.message,defaultValue:this.state.formControls.FctyCode.value,onChange:function(t){return e.handleChange(t.target.value.trim(),"FctyCode")}})),r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(ge.a,{required:!0,id:"FctyName",label:"Name",error:!this.state.formControls.FctyName.valid,helperText:this.state.formControls.FctyName.message,defaultValue:this.state.formControls.FctyName.value,onChange:function(t){return e.handleChange(t.target.value.trim(),"FctyName")}})),r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(xa,{jsonFileName:"region",jsonPropertyName:"Region",formControl:this.state.formControls.FctyRegion,propertyName:"FctyRegion",required:!0,label:"Region",handleChange:function(t){return e.handleChange(t.Value,"FctyRegion")},selectedValue:this.state.formControls.FctyRegion.value})),r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(ga.a,{component:"legend"},"Factory Address"),r.a.createElement(Ka.a,null,r.a.createElement(ya.a,{style:{width:"80%"},margin:"dense"},r.a.createElement(ge.a,{id:"address1",label:"Address1",defaultValue:this.state.formControls.FctyAddr1.value,onChange:function(t){return e.handleChange(t.target.value,"FctyAddr1")}})),r.a.createElement(ya.a,{style:{width:"80%"},margin:"dense"},r.a.createElement(ge.a,{id:"FctyAddr2",label:"Address2",defaultValue:this.state.formControls.FctyAddr2.value,onChange:function(t){return e.handleChange(t.target.value,"FctyAddr2")}})),r.a.createElement(ya.a,{style:{width:"80%"},margin:"dense"},r.a.createElement(ge.a,{id:"FctyAddr3",label:"Address3",defaultValue:this.state.formControls.FctyAddr3.value,onChange:function(t){return e.handleChange(t.target.value,"FctyAddr3")}})),r.a.createElement(ya.a,{style:{width:"80%"},margin:"dense"},r.a.createElement(ge.a,{id:"FctyCity",label:"City",defaultValue:this.state.formControls.FctyCity.value,onChange:function(t){return e.handleChange(t.target.value,"FctyCity")}})),r.a.createElement(ya.a,{style:{width:"80%"},margin:"dense"},r.a.createElement(ge.a,{id:"FctyState",label:"State",defaultValue:this.state.formControls.FctyState.value,onChange:function(t){return e.handleChange(t.target.value,"FctyState")}})),r.a.createElement(ya.a,{style:{width:"80%"},margin:"dense"},r.a.createElement(Ba,{handleChange:this.handleChange,selectedValue:this.state.formControls.FctyCountry.value,formControl:this.state.formControls.FctyCountry,propertyName:"FctyCountry"})),r.a.createElement(ya.a,{style:{width:"80%"},margin:"dense"},r.a.createElement(ge.a,{id:"FctyZIP",label:"ZIP",defaultValue:this.state.formControls.FctyZIP.value,onChange:function(t){return e.handleChange(t.target.value,"FctyZIP")}})))),r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(ga.a,{component:"legend"},"Office Address"),r.a.createElement(Ka.a,null,r.a.createElement(ya.a,{style:{width:"80%"},margin:"dense"},r.a.createElement(ge.a,{id:"FctyOffAddr1",label:"Address1",defaultValue:this.state.formControls.FctyOffAddr1.value,onChange:function(t){return e.handleChange(t.target.value,"FctyOffAddr1")}})),r.a.createElement(ya.a,{style:{width:"80%"},margin:"dense"},r.a.createElement(ge.a,{id:"FctyAddr2",label:"Address2",defaultValue:this.state.formControls.FctyOffAddr2.value,onChange:function(t){return e.handleChange(t.target.value,"FctyOffAddr2")}})),r.a.createElement(ya.a,{style:{width:"80%"},margin:"dense"},r.a.createElement(ge.a,{id:"FctyOffAddr3",label:"Address3",defaultValue:this.state.formControls.FctyOffAddr3.value,onChange:function(t){return e.handleChange(t.target.value,"FctyOffAddr3")}})),r.a.createElement(ya.a,{style:{width:"80%"},margin:"dense"},r.a.createElement(ge.a,{id:"FctyOffCity",label:"City",defaultValue:this.state.formControls.FctyOffCity.value,onChange:function(t){return e.handleChange(t.target.value,"FctyOffCity")}}))," ",r.a.createElement(ya.a,{style:{width:"80%"},margin:"dense"},r.a.createElement(ge.a,{id:"FctyOffState",label:"State",defaultValue:this.state.formControls.FctyOffState.value,onChange:function(t){return e.handleChange(t.target.value,"FctyOffState")}})),r.a.createElement(ya.a,{style:{width:"80%"},margin:"dense"},r.a.createElement(Ba,{handleChange:this.handleChange,selectedValue:this.state.formControls.FctyOffCountry.value,formControl:this.state.formControls.FctyOffCountry,propertyName:"FctyOffCountry"})),r.a.createElement(ya.a,{style:{width:"80%"},margin:"dense"},r.a.createElement(ge.a,{id:"FctyOffZIP",label:"ZIP",defaultValue:this.state.formControls.FctyOffZIP.value,onChange:function(t){return e.handleChange(t.target.value,"FctyOffZIP")}})))),r.a.createElement(Za,{handleChange:this.handleChange,selectedValue:this.state.formControls.FctyBrch.value,formControl:this.state.formControls.FctyBrch,propertyName:"FctyBrch"}),r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(xa,{jsonFileName:"factory",jsonPropertyName:"BusinessType",formControl:this.state.formControls.FctyBusinessType,propertyName:"FctyBusinessType",required:!0,label:"Business Type",handleChange:function(t){return e.handleChange(t.Value,"FctyBusinessType")},selectedValue:this.state.formControls.FctyBusinessType.value})),r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(Xa.a,{id:"FctyAreaSize",label:"Area Size",customInput:ge.a,defaultValue:this.state.formControls.FctyAreaSize.value,onValueChange:function(t){return e.handleChange(t.floatValue,"FctyAreaSize")},onFocus:function(e){e.target.select()},decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})),r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(Xa.a,{id:"FctyRatedCapacity",label:"Rated Capacity",customInput:ge.a,defaultValue:this.state.formControls.FctyRatedCapacity.value,onValueChange:function(t){return e.handleChange(t.floatValue,"FctyRatedCapacity")},onFocus:function(e){e.target.select()},decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})),r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(xa,{jsonFileName:"factory",jsonPropertyName:"ProcessType",formControl:this.state.formControls.FctyProcessType,propertyName:"FctyProcessType",required:!0,label:"Process Type",handleChange:function(t){return e.handleChange(t.Value,"FctyProcessType")},selectedValue:this.state.formControls.FctyProcessType.value})),r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(xa,{jsonFileName:"factory",jsonPropertyName:"ProcessTypeAfterDrying",formControl:this.state.formControls.FctyProcessTypeAfterDrying,propertyName:"FctyProcessTypeAfterDrying",required:!0,label:"Process Type = After Drying",handleChange:function(t){return e.handleChange(t.Value,"FctyProcessTypeAfterDrying")},selectedValue:this.state.formControls.FctyProcessTypeAfterDrying.value})),r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(ge.a,{id:"FctyLat",label:"Latitude",name:"FctyLat",type:"number",defaultValue:this.state.formControls.FctyLat.value,onChange:function(t){return e.handleChange(t.target.value,"FctyLat")},onFocus:function(e){e.target.select()},InputProps:{inputComponent:$a}})),r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(ge.a,{id:"FctyLng",label:"Longtitude",name:"FctyLng",type:"number",defaultValue:this.state.formControls.FctyLat.value,onChange:function(t){return e.handleChange(t.target.value,"FctyLng")},onFocus:function(e){e.target.select()},InputProps:{inputComponent:$a}})),r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Da.a,{required:!0,format:"yyyy",disableFuture:!0,label:"Established Since",views:["year"],value:this.state.formControls.FctyEstablished.value,onChange:function(t){return e.handleDateChange("FctyEstablished",t)}}))),r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Da.a,{required:!0,format:"yyyy",disableFuture:!0,label:"Acquisition Since",views:["year"],value:this.state.formControls.FctyAcquisition.value,onChange:function(t){return e.handleDateChange("FctyAcquisition",t)}}))),r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(ga.a,{component:"label"},"Inactive"),r.a.createElement(Xe.a,{checked:this.state.formControls.FctyInactive.value,value:this.state.formControls.FctyInactive.value,color:"primary",inputProps:{"aria-label":"primary checkbox"},onChange:function(t){return e.handleChange(t.target.checked,"FctyInactive")}}))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=t.formControls;return e.formState.valid||Array.isArray(e.formState.errors)&&e.formState.errors.map((function(e){a[e.property].valid=!1,a[e.property].message=e.message})),{formState:e.formState,formControls:a}}}]),t}(r.a.Component),tn=en,an=(Object(n.forwardRef)((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),r.a.forwardRef((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).openDialog=function(e){a.setState({dialogOpen:!0,currentDeleteData:e,dialogMessage:r.a.createElement("span",null,"Are you sure to delete this record ",r.a.createElement("b",null,e.FctyName)," ? This cannot be undone.")})},a.closeDialog=function(){a.setState({dialogOpen:!1,currentDeleteData:null,dialogMessage:""})},a.openForm=function(e){void 0===e?a.setState({actionStatus:"Add",newData:Object(me.a)({},Ya)}):a.setState({actionStatus:"Update",newData:Object(me.a)({},e)}),a.setState({formOpen:!0,formState:{valid:!0,dirty:!1,errors:[]}})},a.closeForm=function(){a.setState({formOpen:!1,newData:{},actionStatus:""})},a.onSave=function(){var e=a.state.formState,t=Object(me.a)({},a.state.newData);"object"===typeof t.FctyCountry&&(t.FctyCountry=t.FctyCountry._id),"object"===typeof t.FctyOffCountry&&(t.FctyOffCountry=t.FctyOffCountry._id),"object"===typeof t.FctyBrch&&(t.FctyBrch=t.FctyBrch._id);var n=Qa.validateFields(t);if(n.valid){var r=Object(je.a)(a.state.data);"Add"===a.state.actionStatus?Qa.add("",t).then((function(t){!0===t.code?(e.valid=!0,r.push(t.data),a.setState({data:r}),a.closeForm(),a.snackOpen("Factory created successfully!","success")):(e.valid=!1,e.errors=t.errors,a.snackOpen("Please fix the error(s) highlighted to save the details!","error"))})).catch((function(e){a.snackOpen("Oops, something went wrong while processing your request!","error")})):Qa.update("",t).then((function(n){if(!0===n.code){e.valid=!0;var o=r.find((function(e){return e._id===t._id})),s=r.indexOf(o);r[s]=n.data,a.setState({data:r}),a.closeForm(),a.snackOpen("Factory updated successfully!","success")}else e.valid=!1,e.errors=n.errors,a.snackOpen("Please fix the error(s) highlighted to save the details!","error")})).catch((function(e){a.snackOpen("Oops, something went wrong while processing your request!","error")}))}else{e.valid=!1;var o=n.errors.map((function(e){var t={};return t.property=e.property,t.message=e.message,t}));e.errors=o,a.snackOpen("Please fix the error(s) highlighted to save the details!","error")}a.setState({formState:e})},a.onDelete=function(){null!==a.state.currentDeleteData&&Qa.delete("".concat(a.state.currentDeleteData._id)).then((function(e){if(!0===e.code){var t=Object(je.a)(a.state.data),n=t.find((function(e){return e._id===a.state.currentDeleteData._id})),r=t.indexOf(n);t.splice(r,1),a.setState({data:t}),a.closeDialog(),a.snackOpen("Successfully Deleted!","success")}else a.snackOpen("Oops, something went wrong while processing your request!","error")}))},a.onEdit=function(e){a.openForm(e)},a.state={columns:[{title:"Code",field:"FctyCode"},{title:"Name",field:"FctyName"},{title:"Latitude",field:"FctyLat",render:function(e){return r.a.createElement(Xa.a,{value:e.FctyLat,displayType:"text",decimalScale:5,fixedDecimalScale:!0})}},{title:"Longitude",field:"FctyLng",render:function(e){return r.a.createElement(Xa.a,{value:e.FctyLng,displayType:"text",decimalScale:5,fixedDecimalScale:!0})}},{title:"Branch",field:"FctyBrch",render:function(e){return r.a.createElement("span",null,void 0===e.FctyBrch?"":e.FctyBrch.branch)}},{title:"Established Since",field:"FctyEstablished",render:function(e){return r.a.createElement("span",null,new Date(e.FctyEstablished).getFullYear())}},{title:"Acquisition Since",field:"FctyAcquisition",render:function(e){return r.a.createElement("span",null,new Date(e.FctyAcquisition).getFullYear())}},{title:"Remarks",field:"FctyRemarks"},{title:"Inactive",field:"FctyInactive",render:function(e){return r.a.createElement("span",null,e.FctyInactive?"Yes":"No")}},{title:"Operator",field:"FctyLastUpdatedBy"},{title:"Last Updated",field:"FctyLastUpdatedAt",render:function(e){return r.a.createElement("span",null,void 0===e?"":new Date(e.FctyLastUpdatedAt).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}))}}],data:[],currentDeleteData:null,newData:Ya,formOpen:!1,dialogOpen:!1,dialogMessage:"",disabled:!1,actionStatus:"",formState:{valid:!0,dirty:!1,errors:[]}},a.openDialog=a.openDialog.bind(Object(Pe.a)(a)),a.closeDialog=a.closeDialog.bind(Object(Pe.a)(a)),a.openForm=a.openForm.bind(Object(Pe.a)(a)),a.closeForm=a.closeForm.bind(Object(Pe.a)(a)),a.snackOpen=a.snackOpen.bind(Object(Pe.a)(a)),a.snackClose=a.snackClose.bind(Object(Pe.a)(a)),a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initFactory()}},{key:"initFactory",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.awrap(Qa.get("").then((function(t){!0===t.code&&e.setState({data:t.data})})));case 2:case"end":return t.stop()}}))}},{key:"handleChange",value:function(e,t){var a=this.state.newData;a[t]=e;var n=this.state.formState;n.valid=!0,this.setState({newData:a,formState:n})}},{key:"snackOpen",value:function(e,t){this.setState({alertOpen:!0,alertMessage:e,alertClass:t})}},{key:"snackClose",value:function(){this.setState({alertOpen:!1,alertMessage:"",alertClass:"",currentDeleteData:null})}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{style:{margin:"20px 20px 10px 0px"}},r.a.createElement(Ve.a,{title:"Factory",columns:this.state.columns,data:this.state.data,components:{Toolbar:function(t){return r.a.createElement("div",null,r.a.createElement(Le.MTableToolbar,t),r.a.createElement("div",{style:{padding:"0px 15px"}},r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:function(){return e.openForm()},"aria-label":"add"},r.a.createElement(wt.a,null))))}},actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.data,columns:e.state.columns,fileName:"Factory"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.initFactory()}},{icon:"edit",tooltip:"Edit Factory",onClick:function(t,a){return e.openForm(a)}},{icon:"delete",tooltip:"Delete Factory",onClick:function(t,a){return e.openDialog(a)}}],options:{},detailPanel:[{tooltip:"Show Address details",render:function(e){return r.a.createElement("div",{style:{padding:20,backgroundColor:"whitesmoke"}},r.a.createElement(yt.a,{size:"small","aria-label":"a dense table"},r.a.createElement(Dt.a,null,r.a.createElement(Et.a,null,r.a.createElement(Ct.a,null),r.a.createElement(Ct.a,null,"Address 1"),r.a.createElement(Ct.a,null,"Address 2"),r.a.createElement(Ct.a,null,"Address 3"),r.a.createElement(Ct.a,null,"City"),r.a.createElement(Ct.a,null,"State"),r.a.createElement(Ct.a,null,"Country"),r.a.createElement(Ct.a,null,"ZIP"))),r.a.createElement(vt.a,null,r.a.createElement(Et.a,{key:"factory"},r.a.createElement(Ct.a,{component:"th",scope:"row"},"Factory"),r.a.createElement(Ct.a,null,e.FctyAddr1),r.a.createElement(Ct.a,null,e.FctyAddr2),r.a.createElement(Ct.a,null,e.FctyAddr3),r.a.createElement(Ct.a,null,e.FctyCity),r.a.createElement(Ct.a,null,e.FctyState),r.a.createElement(Ct.a,null,void 0===e.FctyCountry||""===e.FctyCountry?"":e.FctyCountry.name),r.a.createElement(Ct.a,null,e.FctyZIP)),r.a.createElement(Et.a,{key:"office"},r.a.createElement(Ct.a,{component:"th",scope:"row"},"Office"),r.a.createElement(Ct.a,null,e.FctyOffAddr1),r.a.createElement(Ct.a,null,e.FctyOffAddr2),r.a.createElement(Ct.a,null,e.FctyOffAddr3),r.a.createElement(Ct.a,null,e.FctyOffCity),r.a.createElement(Ct.a,null,e.FctyOffState),r.a.createElement(Ct.a,null,void 0===e.FctyOffCountry||""===e.FctyOffCountry?"":e.FctyOffCountry.name),r.a.createElement(Ct.a,null,e.FctyOffZIP)))))}}]}),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:6e3,open:this.state.alertOpen,onClose:this.snackClose,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}),r.a.createElement(Ae.a,{fullScreen:!0,open:this.state.formOpen,onClose:this.closeForm,TransitionComponent:this.Transition},r.a.createElement(w.a,{className:"appBar"},r.a.createElement(F.a,null,r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:this.closeForm,"aria-label":"close"},r.a.createElement(Vt.a,null)),r.a.createElement(x.a,{variant:"h6",className:"app-title"},"Factory Details"),r.a.createElement(he.a,{color:"inherit",disabled:this.state.disabled,onClick:this.onSave},"save"))),r.a.createElement(_e.a,null,r.a.createElement(tn,{handleChange:this.handleChange,formData:this.state.newData,formState:this.state.formState}))),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.closeDialog,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.closeDialog,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDelete,color:"primary"},"Delete"))))}}]),t}(r.a.Component)),nn=an,rn=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).handleClickDelOpen=function(e){a.setState({delopen:!0,delId:e._id,deleteMessage:r.a.createElement("span",null,"Are you sure to delete this record ",r.a.createElement("b",null,e.name)," ? This cannot be undone.")})},a.handleDelClose=function(){a.setState({delopen:!1})},a.handleClose=function(){a.setState({open:!1,errMessage:""})},a.onDel=function(){La.delete(a.state.delId+"/"+a.state.operator).then((function(e){if(!0===e.code){var t=a.state.countryData.findIndex((function(e){return e._id===a.state.delId}));a.state.countryData.splice(t,1),a.handleClose(),a.handleOpen(e.message,"success"),a.getCountryData()}else a.handleOpen("Please try again later!","info");a.setState({delId:""}),a.setState({delopen:!1})}))},a.state={columns:[{title:"Name",field:"name",initialEditValue:"",editComponent:function(e){return r.a.createElement(ge.a,{required:!0,margin:"dense",id:"input-name",label:"Name",error:a.state.formState&&(void 0===e.rowData.name||0===e.rowData.name.length),helperText:!a.state.formState||void 0!==e.rowData.name&&0!==e.rowData.name.length?"":"Cannot be empty",type:"text",defaultValue:e.value,onChange:function(t){return a.onChange(t.target.value,e.rowData,"name")}})}},{title:"Remarks",field:"remarks",initialEditValue:"",editComponent:function(e){var t;return r.a.createElement(ge.a,(t={margin:"dense",id:"input-remarks",label:"Remarks",defaultValue:e.value,type:"text"},Object(y.a)(t,"defaultValue",e.value),Object(y.a)(t,"onChange",(function(t){return a.onChange(t.target.value,e.rowData,"remarks")})),t))}},{title:"Inactive",field:"inactive",initialEditValue:!1,lookup:{true:"Yes",false:"No"},editComponent:function(e){return r.a.createElement(Xe.a,{checked:e.value,onChange:function(t){return e.onChange(t.target.checked)},id:"input-inactive",value:e.value,color:"primary",inputProps:{"aria-label":"primary checkbox"}})}},{title:"Operator",field:"lastUpdatedBy",editable:"never"},{title:"Last Updated",field:"lastUpdatedAt",render:function(e){return r.a.createElement("span",null,void 0===e?"":new Date(e.lastUpdatedAt).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}))},editable:"never"}],countryData:[],delId:"",formState:!1,errMessage:"",open:!1,delopen:!1,operator:"Admin",mandatoryFields:["name","remarks"]},a.handleOpen=a.handleOpen.bind(Object(Pe.a)(a)),a.UpdateFrmStatus=a.UpdateFrmStatus.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.getCountryData()}},{key:"handleOpen",value:function(e,t){this.setState({open:!0,vertical:"bottom",horizontal:"right",errMessage:e,errorState:t})}},{key:"onChange",value:function(e,t,a){this.state.mandatoryFields.indexOf(a)>-1&&""===e?(this.setState({formState:!0}),t[a]=""):(t[a]=e.trim(),""!==t.name&&void 0!==t.name&&""!==t.remarks&&void 0!==t.remarks&&this.setState({formState:!1}))}},{key:"getCountryData",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.awrap(La.get("").then((function(t){!0===t.code&&e.setState({countryData:t.data})})));case 2:case"end":return t.stop()}}))}},{key:"UpdateFrmStatus",value:function(e){this.setState({formState:!e})}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{style:{margin:"20px 20px 10px 0px"}},r.a.createElement(Ve.a,{title:"Country List",columns:this.state.columns,data:this.state.countryData,components:{Toolbar:function(e){return r.a.createElement("div",null,r.a.createElement(Le.MTableToolbar,e))}},actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.countryData,columns:e.state.columns,fileName:"Country"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.getCountryData()}},{icon:"delete",tooltip:"Delete",onClick:function(t,a){return e.handleClickDelOpen(a)}}],editable:{onRowAdd:function(t){return new Promise((function(a,n){setTimeout((function(){""!==t.name&&void 0!==t.name?(e.setState({formState:!1}),t.lastUpdatedBy=e.state.operator,t.createdBy=e.state.operator,La.add("",t).then((function(t){!0===t.code?(e.getCountryData(),a(),e.handleOpen(t.message,"success")):(n(),e.handleOpen(t.message,"error"))}))):(n(),e.setState({formState:!0}),e.handleOpen("Please fix the error(s) highlighted to save the details!","error"))}),100)}))},onRowUpdate:function(t,a){return new Promise((function(a,n){setTimeout((function(){""!==t.name&&void 0!==t.name?(e.setState({formState:!1}),t.lastUpdatedBy=e.state.operator,La.update("",t).then((function(t){!0===t.code?(e.getCountryData(),a(),e.handleOpen(t.message,"success")):(n(),e.handleOpen(t.message,"error"))}))):(e.setState({formState:!0}),n(),e.handleOpen("Please fix the error(s) highlighted to save the details!","error"))}),100)}))}},options:{}}),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.errorState,autoHideDuration:6e3,open:this.state.open,onClose:this.handleClose,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.errMessage)}),r.a.createElement(Ae.a,{open:this.state.delopen,onClose:this.handleDelClose,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,""===this.state.errMessage?this.state.deleteMessage:this.state.errMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.handleDelClose,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDel,color:"primary"},"Delete"))))}}]),t}(n.Component),on=rn,sn={get:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="process/"+e,a.abrupt("return",We(t).then((function(e){return e})).then((function(e){if(200===e.status&&null!==e.data.data)return{code:!0,message:"Succeed",data:e.data.data}})));case 2:case"end":return a.stop()}}))},update:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="process/"+e,n.abrupt("return",Qe(a,t).then((function(e){if(200===e.status&&null!==e.data.data){var t=e.data.data;return{code:!0,message:e.data.message,data:t}}return{code:!1,message:e.data.message,data:e.data.data}}),(function(e){return{code:!1,message:e.response.data.message,data:e.response.data.data}})));case 2:case"end":return n.stop()}}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="process/"+e,n.abrupt("return",He(a,t).then((function(e){if(200===e.status&&null!==e.data.data){var t=e.data.data;return{code:!0,message:e.data.message,data:t}}return{code:!1,message:e.data.message,data:e.data.data}}),(function(e){return{code:!1,message:e.response.data.message,data:e.response.data.data}})));case 2:case"end":return n.stop()}}))},delete:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="process/"+e,a.abrupt("return",ze(t).then((function(e){return e})).then((function(e){if(200===e.status&&null!==e.data.data)return{code:!0,message:e.data.message,data:null}}),(function(e){return{code:!1,message:e.response.data.message,data:e.response.data.data}})));case 2:case"end":return a.stop()}}))}},ln=sn,cn=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).handleClickDelOpen=function(e){a.setState({delopen:!0,delId:e._id,deleteMessage:r.a.createElement("span",null," ","Are you sure to delete this record ",r.a.createElement("b",null,e.ProcName)," ? This cannot be undone.")})},a.handleDelClose=function(){a.setState({delopen:!1})},a.handleClose=function(){a.setState({open:!1,errMessage:""})},a.onDel=function(){ln.delete(a.state.delId+"/"+a.state.operator).then((function(e){if(!0===e.code){var t=a.state.processData.findIndex((function(e){return e._id===a.state.delId}));a.state.processData.splice(t,1),a.getProcessData(),a.handleOpen(e.message,"success")}else a.handleOpen("Please try again later!","info");a.setState({delId:""}),a.setState({delopen:!1})}))},a.state={columns:[{title:"Name",field:"ProcName",initialEditValue:"",editComponent:function(e){return r.a.createElement(ge.a,{required:!0,margin:"dense",id:"input-ProcName",label:"Name",error:a.state.formState&&(void 0===e.rowData.ProcName||0===e.rowData.ProcName.length),helperText:!a.state.formState||void 0!==e.rowData.ProcName&&""!==e.rowData.ProcName.trim()&&0!==e.rowData.ProcName.length?"":"Cannot be empty",type:"text",defaultValue:e.value,onChange:function(t){return a.onChange(t.target.value.trim(),e.rowData,"ProcName")}})}},{title:"Remarks",field:"ProcRemarks",initialEditValue:"",editComponent:function(e){var t;return r.a.createElement(ge.a,(t={margin:"dense",id:"input-ProcRemarks",label:"Remarks",defaultValue:e.value,type:"text"},Object(y.a)(t,"defaultValue",e.value),Object(y.a)(t,"onChange",(function(t){return a.onChange(t.target.value,e.rowData,"ProcRemarks")})),t))}},{title:"Inactive",field:"ProcInactive",initialEditValue:!1,lookup:{true:"Yes",false:"No"},editComponent:function(e){return r.a.createElement(Xe.a,{checked:e.value,onChange:function(t){return e.onChange(t.target.checked)},id:"input-ProcInactive",value:e.value,color:"primary",inputProps:{"aria-label":"primary checkbox"}})}},{title:"Operator",field:"ProcLastUpdatedBy",editable:"never"},{title:"Last Updated",field:"ProcLastUpdatedAt",render:function(e){return r.a.createElement("span",null,void 0===e?"":new Date(e.ProcLastUpdatedAt).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}))},editable:"never"}],processData:[],processUpdateData:{},delId:"",formState:!1,errMessage:"",open:!1,delopen:!1,operator:"Admin",mandatoryFields:["ProcName"]},a.handleOpen=a.handleOpen.bind(Object(Pe.a)(a)),a.UpdateFrmStatus=a.UpdateFrmStatus.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.getProcessData()}},{key:"handleOpen",value:function(e,t){this.setState({open:!0,vertical:"bottom",horizontal:"right",errMessage:e,errorState:t})}},{key:"onChange",value:function(e,t,a){this.state.mandatoryFields.indexOf(a)>-1&&""===e?(this.setState({formState:!0}),t[a]=""):(t[a]=e,""!==t.ProcName&&void 0!==t.ProcName&&this.setState({formState:!1}))}},{key:"getProcessData",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.awrap(ln.get("").then((function(t){!0===t.code&&e.setState({processData:t.data})})));case 2:case"end":return t.stop()}}))}},{key:"UpdateFrmStatus",value:function(e){this.setState({formState:!e})}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{style:{margin:"20px 20px 10px 0px"}},r.a.createElement(Ve.a,{title:"Process List",columns:this.state.columns,data:this.state.processData,components:{Toolbar:function(e){return r.a.createElement("div",null,r.a.createElement(Le.MTableToolbar,e))}},actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.processData,columns:e.state.columns,fileName:"Process"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.getProcessData()}},{icon:"delete",tooltip:"Delete Process",onClick:function(t,a){return e.handleClickDelOpen(a)}}],editable:{onRowAdd:function(t){return new Promise((function(a,n){setTimeout((function(){""!==t.ProcName&&void 0!==t.ProcName?(e.setState({formState:!1}),t.ProcLastUpdatedBy=e.state.operator,t.ProcCreatedBy=e.state.operator,ln.add("",t).then((function(t){!0===t.code?(e.getProcessData(),a(),e.handleOpen(t.message,"success")):(n(),e.handleOpen(t.message,"error"))}))):(n(),e.setState({formState:!0}),e.handleOpen("Please fix the error(s) highlighted to save the details!","error"))}),100)}))},onRowUpdate:function(t,a){return new Promise((function(a,n){setTimeout((function(){""!==t.ProcName&&void 0!==t.ProcName?(e.setState({formState:!1}),t.ProcLastUpdatedBy=e.state.operator,ln.update("",t).then((function(t){!0===t.code?(e.getProcessData(),a(),e.handleOpen(t.message,"success")):(n(),e.handleOpen(t.message,"error"))}))):(e.setState({formState:!0}),n(),e.handleOpen("Please fix the error(s) highlighted to save the details!","error"))}),100)}))}},options:{}}),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.errorState,autoHideDuration:6e3,open:this.state.open,onClose:this.handleClose,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.errMessage)}),r.a.createElement(Ae.a,{open:this.state.delopen,onClose:this.handleDelClose,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,""===this.state.errMessage?this.state.deleteMessage:this.state.errMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.handleDelClose,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDel,color:"primary"},"Delete"))))}}]),t}(n.Component),un=cn,dn={getSubProcess:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="Subprocess/"+e,a.abrupt("return",We(t).then((function(e){return e})).then((function(e){if(200===e.status&&null!==e.data.data)return{code:!0,message:"Succeed",data:e.data.data}})));case 2:case"end":return a.stop()}}))},update:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="Subprocess/"+e,n.abrupt("return",Qe(a,t).then((function(e){if(200===e.status&&null!==e.data.data){var t=e.data.data;return{code:!0,message:e.data.message,data:t}}return{code:!1,message:e.data.message,data:e.data.data}}),(function(e){return{code:!1,message:e.response.data.message,data:e.response.data.data}})));case 2:case"end":return n.stop()}}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="Subprocess/"+e,n.abrupt("return",He(a,t).then((function(e){if(200===e.status&&null!==e.data.data){var t=e.data.data;return{code:!0,message:e.data.message,data:t}}return{code:!1,message:e.data.message,data:e.data.data}}),(function(e){return{code:!1,message:e.response.data.message,data:e.response.data.data}})));case 2:case"end":return n.stop()}}))},delete:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="Subprocess/"+e,a.abrupt("return",ze(t).then((function(e){return e})).then((function(e){if(200===e.status&&null!==e.data.data)return{code:!0,message:e.data.message,data:null}}),(function(e){return{code:!1,message:e.response.data.message,data:e.response.data.data}})));case 2:case"end":return a.stop()}}))}},mn=dn,pn=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).handleClickDelOpen=function(e){a.setState({delopen:!0,delId:e._id,deleteMessage:r.a.createElement("span",null," ","Are you sure to delete this record ",r.a.createElement("b",null,e.SubProcName)," ? This cannot be undone.")})},a.handleDelClose=function(){a.setState({delopen:!1})},a.handleClose=function(){a.setState({open:!1,errMessage:""})},a.onDel=function(){mn.delete(a.state.delId+"/"+a.state.operator).then((function(e){if(!0===e.code){var t=a.state.subProcessData.findIndex((function(e){return e._id===a.state.delId}));a.state.subProcessData.splice(t,1),a.getSubProcessData(),a.handleOpen(e.message,"success")}else a.handleOpen("Please try again later!","info");a.setState({delId:""}),a.setState({delopen:!1})}))},a.state={columns:[{title:"Name",field:"SubProcName",initialEditValue:"",editComponent:function(e){return r.a.createElement(ge.a,{required:!0,margin:"dense",id:"input-SubProcName",label:"Name",error:a.state.formState&&(void 0===e.rowData.SubProcName||0===e.rowData.SubProcName.length),helperText:!a.state.formState||void 0!==e.rowData.SubProcName&&0!==e.rowData.SubProcName.length?"":"Name cannot be empty",type:"text",defaultValue:e.value,onChange:function(t){return a.onChange(t.target.value.trim(),e.rowData,"SubProcName")}})}},{title:"Remarks",field:"SubProcRemarks",initialEditValue:"",editComponent:function(e){var t;return r.a.createElement(ge.a,(t={margin:"dense",id:"input-ProcRemarks",label:"Remarks",defaultValue:e.value,type:"text"},Object(y.a)(t,"defaultValue",e.value),Object(y.a)(t,"onChange",(function(t){return a.onChange(t.target.value,e.rowData,"SubProcRemarks")})),t))}},{title:"Inactive",field:"SubProcInactive",initialEditValue:!1,lookup:{true:"Yes",false:"No"},editComponent:function(e){return r.a.createElement(Xe.a,{checked:e.value,onChange:function(t){return e.onChange(t.target.checked)},id:"input-SubProcInactive",value:e.value,color:"primary",inputProps:{"aria-label":"primary checkbox"}})}},{title:"Operator",field:"SubProcLastUpdatedBy",editable:"never"},{title:"Last Updated",field:"SubProcLastUpdatedAt",render:function(e){return r.a.createElement("span",null,void 0===e?"":new Date(e.SubProcLastUpdatedAt).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}))},editable:"never"}],subProcessData:[],subProcessUpdateData:{},delId:"",formState:!1,errMessage:"",open:!1,delopen:!1,operator:"Admin",mandatoryFields:["SubProcName","SubProcRemarks"]},a.handleOpen=a.handleOpen.bind(Object(Pe.a)(a)),a.UpdateFrmStatus=a.UpdateFrmStatus.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.getSubProcessData()}},{key:"handleOpen",value:function(e,t){this.setState({open:!0,vertical:"bottom",horizontal:"right",errMessage:e,errorState:t})}},{key:"onChange",value:function(e,t,a){this.state.mandatoryFields.indexOf(a)>-1&&""===e?(this.setState({formState:!0}),t[a]=""):(t[a]=e,""!==t.SubProcName&&void 0!==t.SubProcName&&this.setState({formState:!1}))}},{key:"getSubProcessData",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.awrap(mn.getSubProcess("").then((function(t){!0===t.code&&e.setState({subProcessData:t.data})})));case 2:case"end":return t.stop()}}))}},{key:"UpdateFrmStatus",value:function(e){this.setState({formState:!e})}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{style:{margin:"20px 20px 10px 0px"}},r.a.createElement(Ve.a,{title:"Sub Process List",columns:this.state.columns,data:this.state.subProcessData,components:{Toolbar:function(e){return r.a.createElement("div",null,r.a.createElement(Le.MTableToolbar,e))}},actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.subProcessData,columns:e.state.columns,fileName:"Sub Process"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.getSubProcessData()}},{icon:"delete",tooltip:"Delete Sub Process",onClick:function(t,a){return e.handleClickDelOpen(a)}}],editable:{onRowAdd:function(t){return new Promise((function(a,n){setTimeout((function(){""!==t.SubProcName&&void 0!==t.SubProcName?(e.setState({formState:!1}),t.SubProcLastUpdatedBy=e.state.operator,t.SubProcCreatedBy=e.state.operator,mn.add("",t).then((function(t){!0===t.code?(e.getSubProcessData(),a(),e.handleOpen(t.message,"success")):(n(),e.handleOpen(t.message,"error"))}))):(n(),e.setState({formState:!0}),e.handleOpen("Please fix the error(s) highlighted to save the details!","error"))}),100)}))},onRowUpdate:function(t,a){return new Promise((function(a,n){setTimeout((function(){""!==t.SubProcName&&void 0!==t.SubProcName?(e.setState({formState:!1}),t.SubProcLastUpdatedBy=e.state.operator,mn.update("",t).then((function(t){!0===t.code?(e.getSubProcessData(),a(),e.handleOpen(t.message,"success")):(n(),e.handleOpen(t.message,"error"))}))):(e.setState({formState:!0}),n(),e.handleOpen("Please fix the error(s) highlighted to save the details!","error"))}),100)}))}},options:{}}),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.errorState,autoHideDuration:6e3,open:this.state.open,onClose:this.handleClose,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.errMessage)}),r.a.createElement(Ae.a,{open:this.state.delopen,onClose:this.handleDelClose,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,""===this.state.errMessage?this.state.deleteMessage:this.state.errMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.handleDelClose,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDel,color:"primary"},"Delete"))))}}]),t}(n.Component),fn=pn,hn=(a(802),{Country:"",CountryGrade:"",Commodity:"",ProducingCountry:"",Vk_Status:!1,Dirt_Param:0,Dirt_Limit:1,Dirt_TestMethod:"",Ash_Param:0,Ash_Limit:1,Ash_TestMethod:"",Volatile_Param:0,Volatile_Limit:1,Volatile_TestMethod:"",PO_Param:0,PO_Limit:1,PO_TestMethod:"",PRI_Param:0,PRI_Limit:1,PRI_TestMethod:"",Nitrogen_Param:0,Nitrogen_Limit:1,Nitrogen_TestMethod:"",Mooney_Param:0,Mooney_Limit:1,Mooney_TestMethod:"",CreatedAt:new Date(Date.now()).toLocaleString(),CreatedBy:"Admin",LastUpdatedAt:new Date(Date.now()).toLocaleString(),LastUpdatedBy:"Admin"}),gn=(a(24),{properties:{Country:{description:"",type:"string",required:!0,allowEmpty:!1,messages:{allowEmpty:"Country cannot be empty",conform:"Country cannot be empty",required:"Country cannot be empty"},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},CountryGrade:{description:"",type:"string",required:!0,allowEmpty:!1,messages:{allowEmpty:"Country Grade cannot be empty",conform:"Country Grade cannot be empty",required:"Country Grade cannot be empty"},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},Commodity:{description:"",type:"string",required:!0,allowEmpty:!1,messages:{allowEmpty:"Commodity cannot be empty",conform:"Commodity cannot be empty",required:"Commodity cannot be empty"},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},Consignment:{description:"",type:"string",required:!0,allowEmpty:!1,messages:{allowEmpty:"Consignment cannot be empty",conform:"Consignment cannot be empty",required:"Consignment cannot be empty"},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},ProducingCountry:{description:"",type:"string",required:!0,allowEmpty:!1,messages:{allowEmpty:"Producing Country cannot be empty",conform:"Producing Country cannot be empty",required:"Producing Country cannot be empty"},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},Vk_Status:{type:"boolean",default:!1},Dirt_Param:{type:"any",default:0},Dirt_Limit:{type:"number",default:1},Dirt_TestMethod:{type:"string",default:""},Ash_Param:{type:"any",default:0},Ash_Limit:{type:"number",default:1},Ash_TestMethod:{type:"string",default:""},Volatile_Param:{type:"any",default:0},Volatile_Limit:{type:"number",default:1},Volatile_TestMethod:{type:"string",default:""},PO_Param:{type:"any",default:0},PO_Limit:{type:"number",default:1},PO_TestMethod:{type:"string",default:""},PRI_Param:{type:"any",default:0},PRI_Limit:{type:"number",default:1},PRI_TestMethod:{type:"string",default:""},Nitrogen_Param:{type:"any",default:0},Nitrogen_Limit:{type:"number",default:1},Nitrogen_TestMethod:{type:"string",default:""},Mooney_Param:{type:"any",default:0},Mooney_Limit:{type:"number",default:1},Mooney_TestMethod:{type:"string",default:""},CreatedAt:{type:"any",default:Date.now()},CreatedBy:{type:"string",default:""},LastUpdatedAt:{type:"any",default:Date.now()},LastUpdatedBy:{type:"string",default:""}}}),yn=a(24),vn={validateFields:function(e){return yn.validate(e,gn,{cast:!0})},getCountryGrade:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="countryGrade/"+e,a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 2:case"end":return a.stop()}}))},getByUid:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="countryGrade/"+e,a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 2:case"end":return a.stop()}}))},getToolFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("countryGrade-filter/").concat(e),a.next=3,l.a.awrap(We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 3:return a.abrupt("return",a.sent);case 4:case"end":return a.stop()}}))},update:function(e,t){return Qe("countryGrade/"+e,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Updated",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="countryGrade/"+e,n.abrupt("return",He(a,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Added",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,formValid:!0,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("countryGrade/"+e).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))}},Cn=vn,Dn=(a(803),a(452)),En=a.n(Dn),bn=Object(M.a)({root:{position:"relative"},content:{padding:"1.5px 15px 10px 10px"},inputLabel:{position:"absolute",left:0,top:0,transform:"translate(0, 24px) scale(1)"}})((function(e){var t=e.classes,a=e.id,n=e.label,o=e.children,i=r.a.useState(0),l=Object(pe.a)(i,2),c=l[0],u=l[1],d=r.a.useRef(null);return r.a.useEffect((function(){var e=s.a.findDOMNode(d.current);u(null!=e?e.offsetWidth:0)}),[n]),r.a.createElement("div",{style:{position:"relative",marginTop:"8px",width:"100%"}},r.a.createElement(Ea.a,{ref:d,htmlFor:a,variant:"outlined",className:t.inputLabel,shrink:!0},n),r.a.createElement("div",{className:t.root},r.a.createElement("div",{id:a,className:t.content},o,r.a.createElement(En.a,{notched:!0,labelWidth:c}))))})),Sn=(a(806),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={data:[]},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initMinMaxData()}},{key:"initMinMaxData",value:function(){var e;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return e=[{Name:"Min",Value:0},{Name:"Max",Value:1}],t.next=3,l.a.awrap(this.setState({data:e}));case 3:case"end":return t.stop()}}),null,this)}},{key:"renderOption",value:function(){return this.state.data.map((function(e,t){return r.a.createElement(et.a,{value:e.Value,key:e.Name,name:e.Name},e.Name)}))}},{key:"handleChange",value:function(e,t){this.props.handleChange(e.target.value,t)}},{key:"render",value:function(){var e=this;return r.a.createElement(ya.a,{style:{width:"100%",margin:"27px 10px 10px 10px"}},r.a.createElement(Ea.a,{id:"lbl"+this.props.propertyName},"Limit"),r.a.createElement(ba.a,{id:this.props.propertyName,value:this.props.selectedValue,onChange:function(t){return e.handleChange(t,e.props.propertyName)}},r.a.createElement(et.a,{value:""},r.a.createElement("em",null,"None")),this.renderOption()),r.a.createElement(Sa.a,null))}}]),t}(r.a.Component)),On=Sn,kn=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={formControls:{Country:{valid:!0,message:"",value:void 0===a.props.formData.Country._id?"":a.props.formData.Country._id},CountryGrade:{valid:!0,message:"",value:a.props.formData.CountryGrade},Commodity:{valid:!0,message:"",value:a.props.formData.Commodity},Consignment:{valid:!0,message:"",value:a.props.formData.Consignment},ProducingCountry:{valid:!0,message:"",value:a.props.formData.ProducingCountry},Vk_Status:{valid:!0,message:"",value:a.props.formData.Vk_Status},Dirt_Param:{valid:!0,message:"",value:a.props.formData.Dirt_Param},Dirt_Limit:{valid:!0,message:"",value:a.props.formData.Dirt_Limit},Dirt_TestMethod:{valid:!0,message:"",value:a.props.formData.Dirt_TestMethod},Ash_Param:{valid:!0,message:"",value:a.props.formData.Ash_Param},Ash_Limit:{valid:!0,message:"",value:a.props.formData.Ash_Limit},Ash_TestMethod:{valid:!0,message:"",value:a.props.formData.Ash_TestMethod},Volatile_Param:{valid:!0,message:"",value:a.props.formData.Volatile_Param},Volatile_Limit:{valid:!0,message:"",value:a.props.formData.Volatile_Limit},Volatile_TestMethod:{valid:!0,message:"",value:a.props.formData.Volatile_TestMethod},PO_Param:{valid:!0,message:"",value:a.props.formData.PO_Param},PO_Limit:{valid:!0,message:"",value:a.props.formData.PO_Limit},PO_TestMethod:{valid:!0,message:"",value:a.props.formData.PO_TestMethod},PRI_Param:{valid:!0,message:"",value:a.props.formData.PRI_Param},PRI_Limit:{valid:!0,message:"",value:a.props.formData.PRI_Limit},PRI_TestMethod:{valid:!0,message:"",value:a.props.formData.PRI_TestMethod},Nitrogen_Param:{valid:!0,message:"",value:a.props.formData.Nitrogen_Param},Nitrogen_Limit:{valid:!0,message:"",value:a.props.formData.Nitrogen_Limit},Nitrogen_TestMethod:{valid:!0,message:"",value:a.props.formData.Nitrogen_TestMethod},Mooney_Param:{valid:!0,message:"",value:a.props.formData.Mooney_Param},Mooney_Limit:{valid:!0,message:"",value:a.props.formData.Mooney_Limit},Mooney_TestMethod:{valid:!0,message:"",value:a.props.formData.Mooney_TestMethod},CreatedAt:{valid:!0,message:"",value:a.props.formData.CreatedAt},CreatedBy:{valid:!0,message:"",value:a.props.formData.CreatedBy},LastUpdatedAt:{valid:!0,message:"",value:a.props.formData.LastUpdatedAt},LastUpdatedBy:{valid:!0,message:"",value:a.props.formData.LastUpdatedBy}},countryErrors:{valid:!0,message:""},formState:{valid:!0,dirty:!1,errors:[]}},a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentWillUnmount",value:function(){return l.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}))}},{key:"handleChange",value:function(e,t){var a=this.state.formControls,n=this.state.formState;"Vk_Status"===t?(a[t].value=e,this.props.handleChange(e,t)):void 0===e||0===e.length?(a[t].valid=!1,a[t].message="".concat(t," cannot be empty.")):(a[t].value=e,a[t].valid=!0,a[t].message="",this.props.handleChange(e,t)),n.dirty=!0,this.setState({formControls:a,formState:n})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"form-container"},r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-evenly",alignItems:"center",md:6,xs:12,sm:12,xl:8,lg:8},r.a.createElement(ya.a,{style:{width:"100%",margin:10}},r.a.createElement(Ba,{handleChange:this.handleChange,selectedValue:this.state.formControls.Country.value,formControl:this.state.formControls.Country,propertyName:"Country"})),r.a.createElement(ya.a,{style:{width:"100%",margin:10}},r.a.createElement(ge.a,{id:"countryGrade",label:"Country Grade*",error:!this.state.formControls.CountryGrade.valid,helperText:this.state.formControls.CountryGrade.message,defaultValue:this.state.formControls.CountryGrade.value,className:"",onChange:function(t){return e.handleChange(t.target.value.trim(),"CountryGrade")},margin:"normal"})),r.a.createElement(ya.a,{style:{width:"100%",margin:10}},r.a.createElement(ge.a,{id:"commodity",label:"Commodity*",error:!this.state.formControls.Commodity.valid,helperText:this.state.formControls.Commodity.message,defaultValue:this.state.formControls.Commodity.value,className:"",onChange:function(t){return e.handleChange(t.target.value.trim(),"Commodity")},margin:"normal"})),r.a.createElement(ya.a,{style:{width:"100%",margin:10}},r.a.createElement(ge.a,{id:"consignment",label:"Consignment*",error:!this.state.formControls.Consignment.valid,helperText:this.state.formControls.Consignment.message,defaultValue:this.state.formControls.Consignment.value,className:"",onChange:function(t){return e.handleChange(t.target.value.trim(),"Consignment")},margin:"normal"})),r.a.createElement(ya.a,{style:{width:"100%",margin:10}},r.a.createElement(ge.a,{id:"producingCountry",label:"Producing Country*",error:!this.state.formControls.ProducingCountry.valid,helperText:this.state.formControls.ProducingCountry.message,defaultValue:this.state.formControls.ProducingCountry.value,className:"",onChange:function(t){return e.handleChange(t.target.value.trim(),"ProducingCountry")},margin:"normal"})),r.a.createElement(ya.a,{style:{width:"100%",margin:10}},r.a.createElement(ga.a,null,"VK Status ( Select if the product is viscosity constant and requires Mooney)"),r.a.createElement(Xe.a,{checked:this.state.formControls.Vk_Status.value,onChange:function(t){return e.handleChange(t.target.checked,"Vk_Status")},value:this.state.formControls.Vk_Status.value,inputProps:{"aria-label":"VK_Status"}})),r.a.createElement(be.a,{container:!0},r.a.createElement(bn,{label:"Dirt % Wt",style:{width:"100%"}},r.a.createElement(be.a,{container:!0,spacing:3},r.a.createElement(be.a,{item:!0,xs:4},r.a.createElement(ya.a,{style:{width:"100%",margin:10}},r.a.createElement(ge.a,{id:"dirtParam",label:"Dirt Limit",error:!1,helperText:"",defaultValue:this.state.formControls.Dirt_Param.value,className:"",onChange:function(t){return e.props.handleChange(t.target.value,"Dirt_Param")},margin:"normal"}))),r.a.createElement(be.a,{item:!0,xs:4},r.a.createElement(On,{handleChange:this.handleChange,selectedValue:this.state.formControls.Dirt_Limit.value,propertyName:"Dirt_Limit"})),r.a.createElement(be.a,{item:!0,xs:4},r.a.createElement(ya.a,{style:{width:"100%",margin:10}},r.a.createElement(ge.a,{id:"dirtTestMethod",label:"Dirt Test Method",error:!1,helperText:"",defaultValue:this.state.formControls.Dirt_TestMethod.value,className:"",onChange:function(t){return e.props.handleChange(t.target.value,"Dirt_TestMethod")},margin:"normal"})))))),r.a.createElement(be.a,{container:!0},r.a.createElement(bn,{label:"Ash % Wt",style:{width:"100%"}},r.a.createElement(be.a,{container:!0,spacing:3},r.a.createElement(be.a,{item:!0,xs:4},r.a.createElement(ya.a,{style:{width:"100%",margin:10}},r.a.createElement(ge.a,{id:"ashParam",label:"AshLimit",error:!1,helperText:"",defaultValue:this.state.formControls.Ash_Param.value,className:"",onChange:function(t){return e.props.handleChange(t.target.value,"Ash_Param")},margin:"normal"}))),r.a.createElement(be.a,{item:!0,xs:4},r.a.createElement(On,{handleChange:this.handleChange,selectedValue:this.state.formControls.Ash_Limit.value,propertyName:"Ash_Limit"})),r.a.createElement(be.a,{item:!0,xs:4},r.a.createElement(ya.a,{style:{width:"100%",margin:10}},r.a.createElement(ge.a,{id:"ashTestMethod",label:"Ash Test Method",error:!1,helperText:"",defaultValue:this.state.formControls.Ash_TestMethod.value,className:"",onChange:function(t){return e.props.handleChange(t.target.value,"Ash_TestMethod")},margin:"normal"})))))),r.a.createElement(be.a,{container:!0},r.a.createElement(bn,{label:"Volatile Matter % Wt",style:{width:"100%"}},r.a.createElement(be.a,{container:!0,spacing:3},r.a.createElement(be.a,{item:!0,xs:4},r.a.createElement(ya.a,{style:{width:"100%",margin:10}},r.a.createElement(ge.a,{id:"volatileParam",label:"Volatile Param",error:!1,helperText:"",defaultValue:this.state.formControls.Volatile_Param.value,className:"",onChange:function(t){return e.props.handleChange(t.target.value,"Volatile_Param")},margin:"normal"}))),r.a.createElement(be.a,{item:!0,xs:4},r.a.createElement(On,{handleChange:this.handleChange,selectedValue:this.state.formControls.Volatile_Limit.value,propertyName:"Volatile_Limit"})),r.a.createElement(be.a,{item:!0,xs:4},r.a.createElement(ya.a,{style:{width:"100%",margin:10}},r.a.createElement(ge.a,{id:"volatileTestMethod",label:"Volatile Test Method",error:!1,helperText:"",defaultValue:this.state.formControls.Volatile_TestMethod.value,className:"",onChange:function(t){return e.props.handleChange(t.target.value,"Volatile_TestMethod")},margin:"normal"})))))),r.a.createElement(be.a,{container:!0},r.a.createElement(bn,{label:"PO",style:{width:"100%"}},r.a.createElement(be.a,{container:!0,spacing:3},r.a.createElement(be.a,{item:!0,xs:4},r.a.createElement(ya.a,{style:{width:"100%",margin:10}},r.a.createElement(ge.a,{id:"POParam",label:"PO Limit",error:!1,helperText:"",defaultValue:this.state.formControls.PO_Param.value,className:"",onChange:function(t){return e.props.handleChange(t.target.value,"PO_Param")},margin:"normal"}))),r.a.createElement(be.a,{item:!0,xs:4},r.a.createElement(On,{handleChange:this.handleChange,selectedValue:this.state.formControls.PO_Limit.value,propertyName:"PO_Limit"})),r.a.createElement(be.a,{item:!0,xs:4},r.a.createElement(ya.a,{style:{width:"100%",margin:10}},r.a.createElement(ge.a,{id:"POTestMethod",label:"PO Test Method",error:!1,helperText:"",defaultValue:this.state.formControls.PO_TestMethod.value,className:"",onChange:function(t){return e.props.handleChange(t.target.value,"PO_TestMethod")},margin:"normal"})))))),r.a.createElement(be.a,{container:!0},r.a.createElement(bn,{label:"PRI",style:{width:"100%"}},r.a.createElement(be.a,{container:!0,spacing:3},r.a.createElement(be.a,{item:!0,xs:4},r.a.createElement(ya.a,{style:{width:"100%",margin:10}},r.a.createElement(ge.a,{id:"priParam",label:"PRI Limit",error:!1,helperText:"",defaultValue:this.state.formControls.PRI_Param.value,className:"",onChange:function(t){return e.props.handleChange(t.target.value,"PRI_Param")},margin:"normal"}))),r.a.createElement(be.a,{item:!0,xs:4},r.a.createElement(On,{handleChange:this.handleChange,selectedValue:this.state.formControls.PRI_Limit.value,propertyName:"PRI_Limit"})),r.a.createElement(be.a,{item:!0,xs:4},r.a.createElement(ya.a,{style:{width:"100%",margin:10}},r.a.createElement(ge.a,{id:"priTestMethod",label:"PRI Test Method",error:!1,helperText:"",defaultValue:this.state.formControls.PRI_TestMethod.value,className:"",onChange:function(t){return e.props.handleChange(t.target.value,"PRI_TestMethod")},margin:"normal"})))))),r.a.createElement(be.a,{container:!0},r.a.createElement(bn,{label:"Nitrogen",style:{width:"100%"}},r.a.createElement(be.a,{container:!0,spacing:3},r.a.createElement(be.a,{item:!0,xs:4},r.a.createElement(ya.a,{style:{width:"100%",margin:10}},r.a.createElement(ge.a,{id:"nitrogenParam",label:"Nitrogen Limit",error:!1,helperText:"",defaultValue:this.state.formControls.Nitrogen_Param.value,className:"",onChange:function(t){return e.props.handleChange(t.target.value,"Nitrogen_Param")},margin:"normal"}))),r.a.createElement(be.a,{item:!0,xs:4},r.a.createElement(On,{handleChange:this.handleChange,selectedValue:this.state.formControls.Nitrogen_Limit.value,propertyName:"Nitrogen_Limit"})),r.a.createElement(be.a,{item:!0,xs:4},r.a.createElement(ya.a,{style:{width:"100%",margin:10}},r.a.createElement(ge.a,{id:"nitrogenTestMethod",label:"Nitrogen Test Method",error:!1,helperText:"",defaultValue:this.state.formControls.Nitrogen_TestMethod.value,className:"",onChange:function(t){return e.props.handleChange(t.target.value,"Nitrogen_TestMethod")},margin:"normal"})))))),this.state.formControls.Vk_Status.value?r.a.createElement(be.a,{container:!0},r.a.createElement(bn,{label:"Mooney",style:{width:"100%"}},r.a.createElement(be.a,{container:!0,spacing:3},r.a.createElement(be.a,{item:!0,xs:4},r.a.createElement(ya.a,{style:{width:"100%",margin:10}},r.a.createElement(ge.a,{id:"mooneyParam",label:"Mooney Limit",error:!1,helperText:"",defaultValue:this.state.formControls.Mooney_Param.value,className:"",onChange:function(t){return e.props.handleChange(t.target.value,"Mooney_Param")},margin:"normal"}))),r.a.createElement(be.a,{item:!0,xs:4},r.a.createElement(On,{handleChange:this.handleChange,selectedValue:this.state.formControls.Mooney_Limit.value,propertyName:"Mooney_Limit"})),r.a.createElement(be.a,{item:!0,xs:4},r.a.createElement(ya.a,{style:{width:"100%",margin:10}},r.a.createElement(ge.a,{id:"mooneyTestMethod",label:"Mooney Test Method",error:!1,helperText:"",defaultValue:this.state.formControls.Mooney_TestMethod.value,className:"",onChange:function(t){return e.props.handleChange(t.target.value,"Mooney_TestMethod")},margin:"normal"})))))):r.a.createElement("div",null)))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=t.formControls;return e.formState.valid||Array.isArray(e.formState.errors)&&e.formState.errors.map((function(e){a[e.property].valid=!1,a[e.property].message=e.message})),{formState:e.formState,formControls:a}}}]),t}(r.a.Component),wn=kn,Fn=(Object(n.forwardRef)((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),r.a.forwardRef((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).openDialog=function(e){a.setState({dialogOpen:!0,currentDeleteData:e,dialogMessage:r.a.createElement("span",null,"Are you sure to delete this record ",r.a.createElement("b",null,e.Country.name)," ? This cannot be undone.")})},a.closeDialog=function(){a.setState({dialogOpen:!1,currentDeleteData:null,dialogMessage:""})},a.openForm=function(e){var t=Object(me.a)({},hn);void 0===e?a.setState({formOpen:!0,actionStatus:"Add",newData:Object(me.a)({},t)}):a.setState({formOpen:!0,actionStatus:"Update",newData:e})},a.closeForm=function(){a.setState({formOpen:!1,newData:{},actionStatus:"",formState:{valid:!0,dirty:!1,errors:[]}})},a.onSave=function(){var e=a.state.formState,t=Object(me.a)({},a.state.newData);"object"===typeof t.Country&&(t.Country=t.Country._id);var n=Cn.validateFields(t);if(n.valid){var r=Object(je.a)(a.state.data);if("Add"===a.state.actionStatus)Cn.add("",t).then((function(t){!0===t.code?(e.valid=!0,r.push(t.data),a.setState({data:r}),a.closeForm(),a.snackOpen("Successfully Updated!","success")):(e.valid=!1,e.errors=t.errors,a.snackOpen("Please fix the error(s) highlighted to save the details!","error"))})).catch((function(e){a.snackOpen("Oops, something went wrong while processing your request!","error")}));else{var o=Object(je.a)(a.state.data),s=o.find((function(e){return e._id===t._id})),i=o.indexOf(s);Cn.update("",t).then((function(t){!0===t.code?(e.valid=!0,o[i]=t.data,a.setState({data:o}),a.closeForm(),a.snackOpen("Successfully Updated!","success")):(e.valid=!1,e.errors=t.errors,a.snackOpen("Please fix the error(s) highlighted to save the details!","error"))})).catch((function(e){a.snackOpen("Oops, something went wrong while processing your request!","error")}))}}else{e.valid=!1;var l=n.errors.map((function(e){var t={};return t.property=e.property,t.message=e.message,t}));e.errors=l,a.snackOpen("Please fix the error(s) highlighted to save the details!","error")}a.setState({formState:e})},a.onDelete=function(){null!==a.state.currentDeleteData&&Cn.delete("".concat(a.state.currentDeleteData._id)).then((function(e){if(!0===e.code){var t=Object(je.a)(a.state.data),n=t.indexOf(a.state.currentDeleteData);t.splice(n,1),a.setState({data:t}),a.closeDialog(),a.snackOpen("Successfully Deleted!","success")}else a.snackOpen("Oops, something went wrong while processing your request!","error")}))},a.onEdit=function(e){a.openForm(e)},a.state={columns:[{field:"_id",hidden:!0},{title:"Country",field:"Country",render:function(e){return r.a.createElement("span",null,e.Country.name)}},{field:"CountryObject",hidden:!0},{title:"Country Grade",field:"CountryGrade"},{title:"Commodity",field:"Commodity"},{title:"Consignment of Commodity",field:"Consignment"},{title:"Producing Country",field:"ProducingCountry"},{title:"VK Status",field:"Vk_Status",render:function(e){return r.a.createElement("span",null,e.Vk_Status?"Yes":"No")}},{title:"Dirt % Wt",render:function(e){return r.a.createElement("div",null,r.a.createElement(E.a,null,r.a.createElement(b.a,{divider:!0},r.a.createElement(S.a,{primary:"Param:",secondary:e.Dirt_Param})),r.a.createElement(b.a,{divider:!0},r.a.createElement(S.a,{primary:"Limit:",secondary:0===e.Dirt_Limit?"Min":"Max"})),r.a.createElement(b.a,{divider:!0},r.a.createElement(S.a,{primary:"TestMethod:",secondary:e.Dirt_TestMethod}))))}},{title:"Ash % Wt",render:function(e){return r.a.createElement("div",null,r.a.createElement(E.a,null,r.a.createElement(b.a,{divider:!0},r.a.createElement(S.a,{primary:"Param:",secondary:e.Ash_Param})),r.a.createElement(b.a,{divider:!0},r.a.createElement(S.a,{primary:"Limit:",secondary:0===e.Ash_Limit?"Min":"Max"})),r.a.createElement(b.a,{divider:!0},r.a.createElement(S.a,{primary:"TestMethod:",secondary:e.Ash_TestMethod}))))}},{title:"Volatile Matter % Wt",render:function(e){return r.a.createElement(E.a,null,r.a.createElement(b.a,{divider:!0},r.a.createElement(S.a,{primary:"Param:",secondary:e.Volatile_Param})),r.a.createElement(b.a,{divider:!0},r.a.createElement(S.a,{primary:"Limit:",secondary:0===e.Volatile_Limit?"Min":"Max"})),r.a.createElement(b.a,{divider:!0},r.a.createElement(S.a,{primary:"TestMethod:",secondary:e.Volatile_TestMethod})))}},{title:"PO",render:function(e){return r.a.createElement(E.a,null,r.a.createElement(b.a,{divider:!0},r.a.createElement(S.a,{primary:"Param:",secondary:e.PO_Param})),r.a.createElement(b.a,{divider:!0},r.a.createElement(S.a,{primary:"Limit:",secondary:0===e.PO_Limit?"Min":"Max"})),r.a.createElement(b.a,{divider:!0},r.a.createElement(S.a,{primary:"TestMethod:",secondary:e.PO_TestMethod})))}},{title:"PRI",render:function(e){return r.a.createElement(E.a,null,r.a.createElement(b.a,{divider:!0},r.a.createElement(S.a,{primary:"Param:",secondary:e.PRI_Param})),r.a.createElement(b.a,{divider:!0},r.a.createElement(S.a,{primary:"Limit:",secondary:0===e.PRI_Limit?"Min":"Max"})),r.a.createElement(b.a,{divider:!0},r.a.createElement(S.a,{primary:"TestMethod:",secondary:e.PRI_TestMethod})))}},{title:"Nitrogen",render:function(e){return r.a.createElement(E.a,null,r.a.createElement(b.a,{divider:!0},r.a.createElement(S.a,{primary:"Param:",secondary:e.Nitrogen_Param})),r.a.createElement(b.a,{divider:!0},r.a.createElement(S.a,{primary:"Limit:",secondary:0===e.Nitrogen_Limit?"Min":"Max"})),r.a.createElement(b.a,{divider:!0},r.a.createElement(S.a,{primary:"TestMethod:",secondary:e.Nitrogen_TestMethod})))}},{title:"Mooney",render:function(e){return e.Vk_Status?r.a.createElement(E.a,null,r.a.createElement(b.a,{divider:!0},r.a.createElement(S.a,{primary:"Param:",secondary:e.Mooney_Param})),r.a.createElement(b.a,{divider:!0},r.a.createElement(S.a,{primary:"Limit:",secondary:0===e.Mooney_Limit?"Min":"Max"})),r.a.createElement(b.a,{divider:!0},r.a.createElement(S.a,{primary:"TestMethod:",secondary:e.Mooney_TestMethod}))):r.a.createElement("span",null)}},{title:"Operator",field:"LastUpdatedBy"},{title:"Updated Date",field:"LastUpdatedAt",render:function(e){return r.a.createElement("span",null,void 0===e?"":new Date(e.LastUpdatedAt).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}))}}],data:[],currentDeleteData:null,newData:{},alertClass:"",alertOpen:!1,alertMessage:"",formOpen:!1,dialogOpen:!1,dialogMessage:"",disabled:!1,actionStatus:"",formState:{valid:!0,dirty:!1,errors:[]}},a.openDialog=a.openDialog.bind(Object(Pe.a)(a)),a.closeDialog=a.closeDialog.bind(Object(Pe.a)(a)),a.openForm=a.openForm.bind(Object(Pe.a)(a)),a.closeForm=a.closeForm.bind(Object(Pe.a)(a)),a.snackOpen=a.snackOpen.bind(Object(Pe.a)(a)),a.snackClose=a.snackClose.bind(Object(Pe.a)(a)),a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initCountryGrade()}},{key:"initCountryGrade",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.awrap(Cn.getCountryGrade("").then((function(t){!0===t.code&&e.setState({data:t.data})})));case 2:case"end":return t.stop()}}))}},{key:"handleChange",value:function(e,t){var a=this.state.newData;a[t]=e;var n=this.state.formState;n.valid=!0,n.errors.map((function(e){e.hasOwnProperty(t)&&(e[t].valid=!0)})),this.setState({newData:a,formState:n})}},{key:"snackOpen",value:function(e,t){this.setState({alertOpen:!0,alertMessage:e,alertClass:t})}},{key:"snackClose",value:function(){this.setState({alertOpen:!1,alertMessage:"",alertClass:"",currentDeleteData:null})}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{style:{margin:"20px 20px 10px 0px"}},r.a.createElement(Ve.a,{title:"Country Grade",columns:this.state.columns,data:this.state.data,components:{Toolbar:function(t){return r.a.createElement("div",null,r.a.createElement(Le.MTableToolbar,t),r.a.createElement("div",{style:{padding:"0px 15px"}},r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:function(){return e.openForm(t.rowData)},"aria-label":"add"},r.a.createElement(wt.a,null))))}},actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.data,columns:e.state.columns,fileName:"Country Grade"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.initCountryGrade()}},{icon:"edit",tooltip:"Edit User",onClick:function(t,a){return e.openForm(a)}},{icon:"delete",tooltip:"Delete User",onClick:function(t,a){return e.openDialog(a)}}],options:{}}),r.a.createElement(Ae.a,{fullScreen:!0,open:this.state.formOpen,onClose:this.closeForm,TransitionComponent:this.Transition},r.a.createElement(w.a,{className:"appBar"},r.a.createElement(F.a,null,r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:this.closeForm,"aria-label":"close"},r.a.createElement(Vt.a,null)),r.a.createElement(x.a,{variant:"h6",className:"app-title"},"Country Grade Details"),r.a.createElement(he.a,{color:"inherit",disabled:this.state.disabled,onClick:this.onSave},"save"))),r.a.createElement(_e.a,null,r.a.createElement(wn,{handleChange:this.handleChange,formData:this.state.newData,formState:this.state.formState}))),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:600,open:this.state.alertOpen,onClose:this.snackClose,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.closeDialog,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.closeDialog,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDelete,color:"primary"},"Delete"))))}}]),t}(r.a.Component)),xn=Fn,Tn=(a(807),{properties:{Name:{description:"",type:"string",required:!0,allowEmpty:!1,messages:{required:"NC Category Name cannot be empty",allowEmpty:"NC Category Name cannot be empty"}},Remarks:{description:"",type:"string"},Inactive:{description:"",type:"boolean"}}}),Nn=a(24),jn={validateFields:function(e){return Nn.validate(e,Tn,{cast:!0})},getNCCategory:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="nc-category/"+e,a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 2:case"end":return a.stop()}}))},getToolFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("nc-category-filter/").concat(e),a.next=3,l.a.awrap(We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 3:return a.abrupt("return",a.sent);case 4:case"end":return a.stop()}}))},update:function(e,t){return Qe("nc-category/"+e,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Updated",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="nc-category/"+e,n.abrupt("return",He(a,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Added",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,formValid:!0,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("nc-category/"+e).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))}},Pn=jn,An=(new Date(Date.now()).toLocaleString(),new Date(Date.now()).toLocaleString(),function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(d.a)(this,Object(m.a)(t).call(this))).handleClose=function(){e.setState({open:!1,errMessage:""})},e.handleClickDelClose=function(){e.setState({dialogOpen:!1,currentDeleteData:null})},e.state={formControls:{Name:{valid:!0,message:"",value:""},Remarks:{valid:!0,message:"",value:""},Inactive:{valid:!0,message:"",value:!1}},columns:[{field:"_id",hidden:!0},{title:"Name",field:"Name",editComponent:function(t){return r.a.createElement(ge.a,{autoFocus:!0,margin:"dense",id:"name",label:"Name*",error:!e.state.formControls.Name.valid,helperText:e.state.formControls.Name.message,type:"text",defaultValue:t.rowData.Name,onChange:function(a){e.onChange(a.target.value.trim(),t.rowData,"Name")}})}},{title:"Remarks",field:"Remarks",editComponent:function(t){return r.a.createElement(ge.a,{margin:"dense",id:"remarks",label:"Remarks",type:"text",defaultValue:t.rowData.Remarks,onChange:function(a){e.onChange(a.target.value,t.rowData,"Remarks")}})}},{title:"Inactive",field:"Inactive",type:"boolean",render:function(e){return r.a.createElement("span",null,e.Inactive?"Yes":"No")},editComponent:function(t){return r.a.createElement(Xe.a,{checked:t.rowData.Inactive,onChange:function(a){e.onChange(a.target.checked,t.rowData,"Inactive")},value:t.value,inputProps:{"aria-label":"secondary checkbox"},color:"primary"})}},{title:"Operator",field:"LastUpdatedBy",editable:"never"},{title:"Last Updated",field:"LastUpdatedAt",render:function(e){return r.a.createElement("span",null,void 0===e?"":new Date(e.LastUpdatedAt).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}))},editable:"never"}],data:[],formState:{valid:!0,errors:[]},dialogOpen:!1,currentDeleteData:null,deleteMessage:"",alertClass:"",alertOpen:!1,alertMessage:"",operator:"Admin"},e.handleOpen=e.handleOpen.bind(Object(Pe.a)(e)),e.handleClickDelClose=e.handleClickDelClose.bind(Object(Pe.a)(e)),e.handleClickDelOpen=e.handleClickDelOpen.bind(Object(Pe.a)(e)),e.OnDelete=e.OnDelete.bind(Object(Pe.a)(e)),e.snackOpen=e.snackOpen.bind(Object(Pe.a)(e)),e.snackClose=e.snackClose.bind(Object(Pe.a)(e)),e.onChange=e.onChange.bind(Object(Pe.a)(e)),e}return Object(p.a)(t,e),Object(u.a)(t,[{key:"snackOpen",value:function(e,t){this.setState({alertOpen:!0,alertMessage:e,alertClass:t})}},{key:"snackClose",value:function(){this.setState({alertOpen:!1,alertMessage:"",alertClass:""})}},{key:"componentDidMount",value:function(){this.InitNCCategory()}},{key:"onChange",value:function(e,t,a){var n=this.state.formControls;""===e||null===e||void 0===e?(n[a].valid=!1,n[a].message="".concat(a," cannot be empty")):(n[a].valid=!0,n[a].message="",n[a].value=e),t[a]=e,this.setState({formControls:n})}},{key:"handleOpen",value:function(e,t){this.setState({open:!0,vertical:"bottom",horizontal:"right",errMessage:e,errorState:t})}},{key:"handleClickDelOpen",value:function(e,t){this.setState({dialogOpen:!0,currentDeleteData:t,dialogMessage:r.a.createElement("span",null,"Are you sure to delete this record ",r.a.createElement("b",null,t.Name)," ? This cannot be undone.")})}},{key:"OnDelete",value:function(){var e=this;null!==this.state.currentDeleteData?Pn.delete("".concat(this.state.currentDeleteData._id)).then((function(t){if(!0===t.code){var a=Object(je.a)(e.state.data),n=a.indexOf(e.state.currentDeleteData);a.splice(n,1),e.snackOpen("Successfully Deleted!","success"),e.handleClickDelClose(),e.setState({data:a})}else e.snackOpen("Oops, something went wrong while processing your request!","error")})):this.snackOpen("Please try again later!","info")}},{key:"InitNCCategory",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.awrap(Pn.getNCCategory("").then((function(t){!0===t.code&&e.setState({data:t.data})})));case 2:case"end":return t.stop()}}))}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{style:{margin:"20px 20px 10px 0px"}},r.a.createElement(Ve.a,{title:"NC Category",columns:this.state.columns,data:this.state.data,editable:{onRowAdd:function(t){return new Promise((function(a,n){setTimeout((function(){var r=Object(je.a)(e.state.data),o=e.state.formControls,s=Pn.validateFields(t);s.valid?Pn.add("",t).then((function(t){!0===t.code?(r.push(t.data),e.snackOpen("Successfully added!","success"),e.setState({data:r},(function(){return a()}))):(n(),t.errors.map((function(e){o[e.property].valid=!1,o[e.property].message=e.message})),e.setState({formControls:o}),e.snackOpen("Please fix the error(s) highlighted to save the details!","error"))})).catch((function(t){n(),e.snackOpen("Oops, something went wrong while processing your request!","error")})):(n(),s.errors.map((function(e){o[e.property].valid=!1,o[e.property].message=e.message})),e.setState({formControls:o}))}),1e3)}))},onRowUpdate:function(t,a){return new Promise((function(n,r){setTimeout((function(){var o=Object(je.a)(e.state.data),s=Object(me.a)({},e.state.formControls),i=Pn.validateFields(t);i.valid?Pn.update("",t).then((function(i){if(!0===i.code){var l=o.indexOf(a);o[l]=t,e.setState({data:o},(function(){return n()})),e.handleOpen("Successfully added!","success")}else r(),i.errors.map((function(e){return s[e.property].valid=!1,s[e.property].message=e.message,s})),e.setState({formControls:s}),e.snackOpen("Please fix the error(s) highlighted to save the details!","error")})).catch((function(t){r(),e.snackOpen("Oops, something went wrong while processing your request!","error")})):(r(),i.errors.map((function(e){s[e.property].valid=!1,s[e.property].message=e.message})),e.setState({formControls:s}))}),1e3)}))}},actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.data,columns:e.state.columns,fileName:"NC Category"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.InitNCCategory()}},{icon:"delete",tooltip:"Delete Contamination",onClick:function(t,a){return e.handleClickDelOpen(t,a)}}],options:{}}),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:6e3,open:this.state.alertOpen,onClose:this.snackClose,message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.handleClickDelClose,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.handleClickDelClose,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:function(){return e.OnDelete()},color:"primary"},"Delete"))))}}]),t}(r.a.Component)),Mn=An,_n=(a(808),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={ncCategoryData:[]},a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initNCCategoryData()}},{key:"initNCCategoryData",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.awrap(Pn.getNCCategory("").then((function(t){!0===t.code&&e.setState({ncCategoryData:t.data})})).catch((function(e){throw e})));case 2:case"end":return t.stop()}}))}},{key:"renderOptions",value:function(){return this.state.ncCategoryData.map((function(e,t){return r.a.createElement(et.a,{label:"Select NC Category",value:e._id,key:e.Name,name:e.Name},e.Name)}))}},{key:"handleChange",value:function(e,t,a){var n=this.state.ncCategoryData.find((function(t){return t._id===e.target.value}));void 0!==n&&this.props.handleChange(n,t,a)}},{key:"render",value:function(){var e=this;return r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(Ea.a,{shrink:!0,htmlFor:"countryGrade",required:!0,error:!this.props.fromControl.valid},"NC Category"),r.a.createElement(ba.a,{id:"nccategory",value:void 0===this.props.rowData||0===Object.keys(this.props.rowData).length||void 0===this.props.rowData.NCCategory?"":void 0===this.props.rowData.NCCategory._id?this.props.rowData.NCCategory:this.props.rowData.NCCategory._id,error:!this.props.fromControl.valid,onChange:function(t){return e.handleChange(t,"NCCategory",e.props.rowData)},displayEmpty:!0},r.a.createElement(et.a,{value:""},r.a.createElement("em",null,"Select NC category ")),this.renderOptions()),r.a.createElement(Sa.a,{error:!this.props.fromControl.valid,style:{display:this.props.fromControl.valid?"none":""}},this.props.fromControl.valid?"":this.props.fromControl.message))}}]),t}(n.Component)),In=_n,Rn=(new Date(Date.now()).toLocaleString(),new Date(Date.now()).toLocaleString(),{properties:{Name:{description:"",type:"string",required:!0,allowEmpty:!1,messages:{required:"NC Type Name cannot be empty",allowEmpty:"NC Type Name cannot be empty"}},NCCategory:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{required:"NC Category cannot be empty",allowEmpty:"NC Category cannot be empty"}},Description:{description:"",type:"string"},Inactive:{description:"",type:"boolean"}}}),Ln=a(24),Vn={validateFields:function(e){return Ln.validate(e,Rn,{cast:!0})},getNCType:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="nc-type/"+e,a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 2:case"end":return a.stop()}}))},getNcTypeFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("nc-type-filter/").concat(e),a.next=3,l.a.awrap(We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 3:return a.abrupt("return",a.sent);case 4:case"end":return a.stop()}}))},update:function(e,t){return Qe("nc-type/"+e,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Updated",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="nc-type/"+e,n.abrupt("return",He(a,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Added",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,formValid:!0,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("nc-type/"+e).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))}},Bn=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).dialogClose=function(){a.setState({dialogOpen:!1,currentDeleteData:null})},a.state={formControls:{Name:{valid:!0,message:"",value:""},NCCategory:{valid:!0,message:"",value:""},Description:{valid:!0,message:"",value:""},Inactive:{valid:!0,message:"",value:!1}},columns:[{field:"_id",hidden:!0},{title:"Name",field:"Name",editComponent:function(e){return r.a.createElement(ge.a,{autoFocus:!0,margin:"dense",id:"name",label:"Name*",error:!a.state.formControls.Name.valid,helperText:a.state.formControls.Name.message,type:"text",defaultValue:e.rowData.Name,onChange:function(t){a.handleChange(t.target.value.trim(),"Name",e.rowData)}})}},{title:"NC Category",field:"NCCategory",render:function(e){return r.a.createElement("span",null,e.NCCategory.Name)},editComponent:function(e){return r.a.createElement(In,{rowData:e.rowData,fromControl:a.state.formControls.NCCategory,handleChange:a.handleChange})}},{title:"Description",field:"Description",editComponent:function(e){return r.a.createElement(ge.a,{margin:"dense",id:"description",label:"description",type:"text",defaultValue:e.rowData.Description,onChange:function(t){a.handleChange(t.target.value,"Description",e.rowData)}})}},{title:"Inactive",field:"Inactive",type:"boolean",render:function(e){return r.a.createElement("span",null,e.Inactive?"Yes":"No")},editComponent:function(e){return r.a.createElement(Xe.a,{checked:e.rowData.Inactive,onChange:function(t){a.handleChange(t.target.checked,"Inactive",e.rowData)},value:e.value,inputProps:{"aria-label":"secondary checkbox"},color:"primary"})}},{title:"Operator",field:"LastUpdatedBy",editable:"never"},{title:"Last Updated",field:"LastUpdatedAt",render:function(e){return r.a.createElement("span",null,void 0===e?"":new Date(e.LastUpdatedAt).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}))},editable:"never"}],data:[],formState:{valid:!0,errors:[]},dialogOpen:!1,currentDeleteData:null,dialogMessage:"",alertClass:"",alertOpen:!1,alertMessage:"",operator:"Admin"},a.snackOpen=a.snackOpen.bind(Object(Pe.a)(a)),a.snackClose=a.snackClose.bind(Object(Pe.a)(a)),a.dialogOpen=a.dialogOpen.bind(Object(Pe.a)(a)),a.dialogClose=a.dialogClose.bind(Object(Pe.a)(a)),a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a.OnDelete=a.OnDelete.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.InitNCType()}},{key:"InitNCType",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.awrap(Vn.getNCType("").then((function(t){!0===t.code&&e.setState({data:t.data})})));case 2:case"end":return t.stop()}}))}},{key:"snackOpen",value:function(e,t){this.setState({alertOpen:!0,alertMessage:e,alertClass:t})}},{key:"snackClose",value:function(){this.setState({alertOpen:!1,alertMessage:"",alertClass:""})}},{key:"dialogOpen",value:function(e,t){this.setState({dialogOpen:!0,currentDeleteData:t,dialogMessage:r.a.createElement("span",null,"Are you sure to delete this record ",r.a.createElement("b",null,t.Name)," ? This cannot be undone.")})}},{key:"handleChange",value:function(e,t,a){var n=this.state.formControls;""===e||null===e||void 0===e?(n[t].valid=!1,n[t].message="".concat(t," cannot be empty")):(n[t].valid=!0,n[t].message="",n[t].value=e),a[t]=e,this.setState({formControls:n})}},{key:"OnDelete",value:function(){var e=this;null!==this.state.currentDeleteData?Vn.delete("".concat(this.state.currentDeleteData._id)).then((function(t){if(!0===t.code){var a=Object(je.a)(e.state.data),n=a.indexOf(e.state.currentDeleteData);a.splice(n,1),e.snackOpen("Successfully Deleted!","success"),e.dialogClose(),e.setState({data:a})}else e.snackOpen("Oops, something went wrong while processing your request!","error")})):this.snackOpen("Please try again later!","info")}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{style:{margin:"20px 20px 10px 0px"}},r.a.createElement(Ve.a,{title:"NC Type",columns:this.state.columns,data:this.state.data,editable:{onRowAdd:function(t){return new Promise((function(a,n){setTimeout((function(){var r=Object(je.a)(e.state.data),o=e.state.formControls,s=Vn.validateFields(t);s.valid?Vn.add("",t).then((function(t){!0===t.code?(r.push(t.data),e.snackOpen("Successfully added!","success"),e.setState({data:r},(function(){return a()}))):(n(),t.errors.map((function(e){o[e.property].valid=!1,o[e.property].message=e.message})),e.setState({formControls:o}),e.snackOpen("Please fix the error(s) highlighted to save the details!","error"))})).catch((function(t){n(),e.snackOpen("Oops, something went wrong while processing your request!","error")})):(n(),s.errors.map((function(e){o[e.property].valid=!1,o[e.property].message=e.message})),e.setState({formControls:o}))}),1e3)}))},onRowUpdate:function(t,a){return new Promise((function(n,r){setTimeout((function(){var o=Object(je.a)(e.state.data),s=e.state.formControls,i=Vn.validateFields(t);i.valid?Vn.update("",t).then((function(t){if(!0===t.code){var i=o.indexOf(a);o[i]=t.data,e.setState({data:o},(function(){return n()})),e.snackOpen("Successfully added!","success")}else r(),t.errors.map((function(e){return s[e.property].valid=!1,s[e.property].message=e.message,s})),e.setState({formControls:s}),e.snackOpen("Please fix the error(s) highlighted to save the details!","error")})).catch((function(t){r(),e.snackOpen("Oops, something went wrong while processing your request!","error")})):(r(),i.errors.map((function(e){s[e.property].valid=!1,s[e.property].message=e.message})),e.setState({formControls:s}))}),1e3)}))}},actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.data,columns:e.state.columns,fileName:"NC Type"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.InitNCType()}},{icon:"delete",tooltip:"Delete Contamination",onClick:function(t,a){return e.dialogOpen(t,a)}}],options:{}}),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:6e3,open:this.state.alertOpen,onClose:this.snackClose,message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.dialogClose,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.dialogClose,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:function(){return e.OnDelete()},color:"primary"},"Delete"))))}}]),t}(r.a.Component),Un={properties:{GradeGroup:{description:"",type:["number","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Grade group cannot be empty.",type:"Please Select Grade group."}},GradeCode:{description:"",type:"string",required:!0,allowEmpty:!1,messages:{allowEmpty:"Grade code cannot be empty"}},GradeName:{description:"",type:"string",required:!0,allowEmpty:!1,messages:{allowEmpty:"Grade name cannot be empty"}},GradeCountry:{description:"",type:"string",required:!0,allowEmpty:!1,messages:{allowEmpty:"Country cannot be empty"}},GradeCountryGrd:{description:"",type:"string",required:!0,allowEmpty:!1,messages:{allowEmpty:"Country grade cannot be empty"}}}},qn=a(24),Gn={validateFields:function(e){var t=qn.validate(e,Un,{cast:!0});return console.log(t),t},getProductGrade:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="productGrade/"+e,a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 2:case"end":return a.stop()}}))},getFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("productGrade-filter/").concat(e),a.next=3,l.a.awrap(We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 3:return a.abrupt("return",a.sent);case 4:case"end":return a.stop()}}))},update:function(e,t){return Qe("productGrade/"+e,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Product grade updated successfully.",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="productGrade/"+e,n.abrupt("return",He(a,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,message:"Product grade added successfully.",data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("productGrade/"+e).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e}))},getForDropDown:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("productGrade-dropdown/").concat(e),a.next=3,l.a.awrap(We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 3:return a.abrupt("return",a.sent);case 4:case"end":return a.stop()}}))}},Wn={getProdGradeGrp:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="productGradeGroup/"+e,a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 2:case"end":return a.stop()}}))}},Hn=(n.Component,function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={countryGradeData:[]},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){void 0!==this.props.countryId&&""!==this.props.countryId&&this.fetchCountryGradeData(this.props.countryId)}},{key:"componentDidUpdate",value:function(e){this.props.countryId!==e.countryId&&void 0!==this.props.countryId&&""!==this.props.countryId&&this.fetchCountryGradeData(this.props.countryId)}},{key:"fetchCountryGradeData",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.awrap(Cn.getToolFilter("?Country=".concat(this.props.countryId)).then((function(t){!0===t.code&&e.setState({countryGradeData:t.data})})));case 2:case"end":return t.stop()}}),null,this)}},{key:"renderOptions",value:function(){return this.state.countryGradeData.map((function(e,t){return r.a.createElement(et.a,{label:"Select country grade",value:e._id,key:e._id,name:e.CountryGrade},e.CountryGrade)}))}},{key:"handleChange",value:function(e,t){var a=this.state.countryGradeData.find((function(t){return t._id===e.target.value}));void 0!==a?this.props.handleChange(a,t):this.props.handleChange("",t)}},{key:"render",value:function(){var e=this;return r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Ea.a,{shrink:!0,htmlFor:"countryGrade",required:!0,error:!this.props.formControl.valid},"Country Grade"),r.a.createElement(ba.a,{id:this.props.propertyName,value:void 0===this.props.formControl.value._id?this.props.formControl.value:this.props.formControl.value._id,error:!this.props.formControl.valid,onChange:function(t){return e.handleChange(t,e.props.propertyName)},displayEmpty:!0},r.a.createElement(et.a,{value:""},r.a.createElement("em",null,"Select country grade ")),this.renderOptions()),r.a.createElement(Sa.a,{error:!this.props.formControl.valid,style:{display:this.props.formControl.valid?"none":""}},this.props.formControl.valid?"":this.props.formControl.message))}}]),t}(n.Component)),Qn=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={buyerData:[]},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){void 0===this.props.countryId?this.initBuyer():""!==this.props.countryId&&this.fetchBuyerData(this.props.countryId)}},{key:"initBuyer",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.awrap(pa.get("").then((function(t){!0===t.code&&e.setState({buyerData:t.data})})));case 2:case"end":return t.stop()}}))}},{key:"fetchBuyerData",value:function(e){var t=this;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,l.a.awrap(pa.getFilter("?country=".concat(e)).then((function(e){!0===e.code&&t.setState({buyerData:e.data})})));case 2:case"end":return a.stop()}}))}},{key:"renderOptions",value:function(){return this.state.buyerData.map((function(e,t){return r.a.createElement(et.a,{label:"Select buyer",value:e._id,key:e._id,name:e.name},e.name)}))}},{key:"handleChange",value:function(e,t){var a=this.state.buyerData.find((function(t){return t._id===e.target.value}));void 0!==a?this.props.handleChange(a,this.props.propertyName):this.props.handleChange("",this.props.propertyName)}},{key:"render",value:function(){var e=this;return r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense",disabled:this.props.disabled},r.a.createElement(Ea.a,{shrink:!0,htmlFor:"buyer",error:!this.props.formState.valid,required:!0},"Buyer"),r.a.createElement(ba.a,{id:this.props.propertyName,value:void 0===this.props.selectedValue._id?this.props.selectedValue:this.props.selectedValue._id,error:!this.props.formState.valid,onChange:function(t){return e.handleChange(t,e.props.propertyName)},displayEmpty:!0},r.a.createElement(et.a,{value:""},r.a.createElement("em",null,"Select buyer ")),this.renderOptions()),r.a.createElement(Sa.a,{error:!this.props.formState.valid,style:{display:this.props.formState.valid?"none":""}},this.props.formState.valid?"":this.props.formState.message))}}]),t}(n.Component),zn=function(e){var t=e.inputRef,a=e.onChange,n=e.className,o=e.onFocus,s=e.defaultValue;return r.a.createElement(Xa.a,{className:n,getInputRef:t,onValueChange:function(e){a({target:{value:e.value}})},defaultValue:s,onFocus:o,decimalScale:2,fixedDecimalScale:!0})},Yn=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={validProductGrade:!1,formControls:{GradeGroup:{valid:!0,message:"",value:void 0===a.props.formData.GradeGroup||""===a.props.formData.GradeGroup?"":a.props.formData.GradeGroup},GradeCode:{valid:!0,message:"",value:a.props.formData.GradeCode},GradeName:{valid:!0,message:"",value:a.props.formData.GradeName},GradeCountry:{valid:!0,message:"",value:void 0===a.props.formData.GradeCountry||""===a.props.formData.GradeCountry?"":a.props.formData.GradeCountry._id},GradeCountryGrd:{valid:!0,message:"",value:void 0===a.props.formData.GradeCountryGrd||""===a.props.formData.GradeCountryGrd?"":a.props.formData.GradeCountryGrd._id},GradeBuyer:{valid:!0,message:"",value:void 0===a.props.formData.GradeBuyer||""===a.props.formData.GradeBuyer?"":a.props.formData.GradeBuyer._id},GradeBuyerProdCode:{valid:!0,message:"",value:a.props.formData.GradeBuyerProdCode},GradeDesc:{valid:!0,message:"",value:a.props.formData.GradeDesc},GradeLCL:{valid:!0,message:"",value:a.props.formData.GradeLCL},GradeUCL:{valid:!0,message:"",value:a.props.formData.GradeUCL},POLSL:{valid:!0,message:"",value:a.props.formData.POLSL},POCenter:{valid:!0,message:"",value:a.props.formData.POCenter},POUSL:{valid:!0,message:"",value:a.props.formData.POUSL},PRILSL:{valid:!0,message:"",value:a.props.formData.PRILSL},PRICenter:{valid:!0,message:"",value:a.props.formData.PRICenter},PRIUSL:{valid:!0,message:"",value:a.props.formData.PRIUSL},DirtLSL:{valid:!0,message:"",value:a.props.formData.DirtLSL},DirtCenter:{valid:!0,message:"",value:a.props.formData.DirtCenter},DirtUSL:{valid:!0,message:"",value:a.props.formData.DirtUSL},VMLSL:{valid:!0,message:"",value:a.props.formData.VMLSL},VMCenter:{valid:!0,message:"",value:a.props.formData.VMCenter},VMUSL:{valid:!0,message:"",value:a.props.formData.VMUSL},AshLSL:{valid:!0,message:"",value:a.props.formData.AshLSL},AshCenter:{valid:!0,message:"",value:a.props.formData.AshCenter},AshUSL:{valid:!0,message:"",value:a.props.formData.AshUSL},NitrogenLSL:{valid:!0,message:"",value:a.props.formData.NitrogenLSL},NitrogenCenter:{valid:!0,message:"",value:a.props.formData.NitrogenCenter},NitrogenUSL:{valid:!0,message:"",value:a.props.formData.NitrogenUSL},MooneyLSL:{valid:!0,message:"",value:a.props.formData.MooneyLSL},MooneyCenter:{valid:!0,message:"",value:a.props.formData.MooneyCenter},MooneyUSL:{valid:!0,message:"",value:a.props.formData.MooneyUSL},AshtLSL:{valid:!0,message:"",value:a.props.formData.AshtLSL},AshtCenter:{valid:!0,message:"",value:a.props.formData.AshtCenter},AshtUSL:{valid:!0,message:"",value:a.props.formData.AshtUSL},GradeInactive:{valid:!0,message:"",value:a.props.formData.GradeInactive}},formState:{valid:!0,dirty:!1,errors:[]},productGradeGroup:[]},a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initProductGradeGroup()}},{key:"initProductGradeGroup",value:function(){var e=this;Oa("productGradeGroup.json").then((function(e){return e.data})).then((function(t){e.setState({productGradeGroup:t.ProductGradeGroup})}))}},{key:"renderProductGradeGroupOptions",value:function(){return this.state.productGradeGroup.map((function(e,t){return r.a.createElement(et.a,{label:"Select product grade group",value:e.Value,key:e.Value,name:e.Name},e.Name)}))}},{key:"handleChange",value:function(e,t){var a=this,n=this.state.formControls,r=this.state.formState;void 0===e||0===e.length||""===e?(n[t].valid=!1,n[t].message="".concat(t," cannot be empty.")):(n[t].valid=!0,n[t].message=""),this.props.handleChange(e,t),n[t].value=e,r.dirty=!0,this.setState({formControls:n,formState:r},(function(){return console.log(a.state)}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"form-container"},r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-evenly",alignItems:"center",md:6,xs:12,sm:12,xl:8,lg:8},r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Ea.a,{shrink:!0,htmlFor:"ddlGradeGroup",required:!0,error:!this.state.formControls.GradeGroup.valid},"Grade Group"),r.a.createElement(ba.a,{id:"ddlGradeGroup",value:this.state.formControls.GradeGroup.value,error:!this.state.formControls.GradeGroup.valid,onChange:function(t){return e.handleChange(t.target.value,"GradeGroup")},displayEmpty:!0},r.a.createElement(et.a,{value:""},r.a.createElement("em",null,"Select grade group")),this.renderProductGradeGroupOptions()),r.a.createElement(Sa.a,{error:!this.state.formControls.GradeGroup.valid,style:{display:this.state.formControls.GradeGroup.valid?"none":""}},this.state.formControls.GradeGroup.valid?"":this.state.formControls.GradeGroup.message)),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(ge.a,{required:!0,id:"GradeCode",label:"Grade Code",error:!this.state.formControls.GradeCode.valid,helperText:this.state.formControls.GradeCode.message,defaultValue:this.state.formControls.GradeCode.value,onChange:function(t){return e.handleChange(t.target.value.trim(),"GradeCode")}})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(ge.a,{required:!0,id:"GradeName",label:"Grade Name",error:!this.state.formControls.GradeName.valid,helperText:this.state.formControls.GradeName.message,defaultValue:this.state.formControls.GradeName.value,onChange:function(t){return e.handleChange(t.target.value.trim(),"GradeName")}})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Ba,{handleChange:this.handleChange,selectedValue:this.state.formControls.GradeCountry.value,formControl:this.state.formControls.GradeCountry,propertyName:"GradeCountry"})),r.a.createElement(Hn,{handleChange:this.handleChange,formControl:this.state.formControls.GradeCountryGrd,propertyName:"GradeCountryGrd",countryId:void 0===this.state.formControls.GradeCountry.value._id?this.state.formControls.GradeCountry.value:this.state.formControls.GradeCountry.value._id}),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(ge.a,{id:"GradeName",label:"Description",defaultValue:this.state.formControls.GradeDesc.value,onChange:function(t){return e.handleChange(t.target.value,"GradeDesc")},multiline:!0})),1===this.state.formControls.GradeGroup.value?r.a.createElement(Qn,{selectedValue:this.state.formControls.GradeBuyer.value,propertyName:"GradeBuyer",handleChange:this.handleChange,formState:this.state.formControls.GradeBuyer}):r.a.createElement("div",null),1===this.state.formControls.GradeGroup.value?r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(ge.a,{id:"GradeName",label:"Buyer Product Code",defaultValue:this.state.formControls.GradeBuyerProdCode.value,onChange:function(t){return e.handleChange(t.target.value,"GradeBuyerProdCode")}})):r.a.createElement("div",null),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(ge.a,{id:"GradeLCL",label:"PO LCL",type:"number",defaultValue:this.state.formControls.GradeLCL.value,onChange:function(t){return e.handleChange(t.target.value,"GradeLCL")},InputProps:{inputComponent:zn}})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(ge.a,{id:"GradeUCL",label:"PO UCL",type:"number",defaultValue:this.state.formControls.GradeUCL.value,onChange:function(t){return e.handleChange(t.target.value,"GradeUCL")},InputProps:{inputComponent:zn}})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(ga.a,{component:"label"},"Inactive"),r.a.createElement(Xe.a,{checked:this.state.formControls.GradeInactive.value,value:this.state.formControls.GradeInactive.value,color:"primary",inputProps:{"aria-label":"primary checkbox"},onChange:function(t){return e.handleChange(t.target.checked,"GradeInactive")}})),r.a.createElement(be.a,{container:!0},r.a.createElement(bn,{label:"PRODUCT SPECIFICATION",style:{width:"100%",margin:10}},r.a.createElement(be.a,{container:!0,spacing:3},r.a.createElement(be.a,{item:!0,xs:1}),r.a.createElement(be.a,{item:!0,container:!0,xs:11,spacing:3},r.a.createElement(be.a,{item:!0,xs:4},r.a.createElement(ga.a,null,"LSL")),r.a.createElement(be.a,{item:!0,xs:4},r.a.createElement(ga.a,null,"Center")),r.a.createElement(be.a,{item:!0,xs:4},r.a.createElement(ga.a,null,"USL")))),r.a.createElement(be.a,{container:!0,spacing:3},r.a.createElement(be.a,{item:!0,xs:1},r.a.createElement(ga.a,null,"PO")),r.a.createElement(be.a,{item:!0,container:!0,xs:11,spacing:3},r.a.createElement(be.a,{item:!0,xs:4},r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(ge.a,{id:"POLSL",type:"number",defaultValue:this.state.formControls.POLSL.value,onChange:function(t){return e.handleChange(t.target.value,"POLSL")},onFocus:function(e){e.target.select()},InputProps:{inputComponent:zn}}))),r.a.createElement(be.a,{item:!0,xs:4},r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(ge.a,{id:"POCenter",type:"number",defaultValue:this.state.formControls.POCenter.value,onChange:function(t){return e.handleChange(t.target.value,"POCenter")},onFocus:function(e){e.target.select()},InputProps:{inputComponent:zn}}))),r.a.createElement(be.a,{item:!0,xs:4},r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(ge.a,{id:"POUSL",type:"number",defaultValue:this.state.formControls.POUSL.value,onChange:function(t){return e.handleChange(t.target.value,"POUSL")},onFocus:function(e){e.target.select()},InputProps:{inputComponent:zn}}))))),r.a.createElement(be.a,{container:!0,spacing:3},r.a.createElement(be.a,{item:!0,xs:1},r.a.createElement(ga.a,null,"PRI")),r.a.createElement(be.a,{item:!0,container:!0,xs:11,spacing:3},r.a.createElement(be.a,{item:!0,xs:4},r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(ge.a,{id:"PRILSL",type:"number",defaultValue:this.state.formControls.PRILSL.value,onChange:function(t){return e.handleChange(t.target.value,"PRILSL")},onFocus:function(e){e.target.select()},InputProps:{inputComponent:zn}}))),r.a.createElement(be.a,{item:!0,xs:4},r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(ge.a,{id:"PRICenter",type:"number",defaultValue:this.state.formControls.PRICenter.value,onChange:function(t){return e.handleChange(t.target.value,"PRICenter")},onFocus:function(e){e.target.select()},InputProps:{inputComponent:zn}}))),r.a.createElement(be.a,{item:!0,xs:4},r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(ge.a,{id:"PRIUSL",type:"number",defaultValue:this.state.formControls.PRIUSL.value,onChange:function(t){return e.handleChange(t.target.value,"PRIUSL")},onFocus:function(e){e.target.select()},InputProps:{inputComponent:zn}}))))),r.a.createElement(be.a,{container:!0,spacing:3},r.a.createElement(be.a,{item:!0,xs:1},r.a.createElement(ga.a,null,"Dirt")),r.a.createElement(be.a,{item:!0,container:!0,xs:11,spacing:3},r.a.createElement(be.a,{item:!0,xs:4},r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(ge.a,{id:"DirtLSL",type:"number",defaultValue:this.state.formControls.DirtLSL.value,onChange:function(t){return e.handleChange(t.target.value,"DirtLSL")},onFocus:function(e){e.target.select()},InputProps:{inputComponent:zn}}))),r.a.createElement(be.a,{item:!0,xs:4},r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(ge.a,{id:"DirtCenter",type:"number",defaultValue:this.state.formControls.DirtCenter.value,onChange:function(t){return e.handleChange(t.target.value,"DirtCenter")},onFocus:function(e){e.target.select()},InputProps:{inputComponent:zn}}))),r.a.createElement(be.a,{item:!0,xs:4},r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(ge.a,{id:"DirtUSL",type:"number",defaultValue:this.state.formControls.DirtUSL.value,onChange:function(t){return e.handleChange(t.target.value,"DirtUSL")},onFocus:function(e){e.target.select()},InputProps:{inputComponent:zn}}))))),r.a.createElement(be.a,{container:!0,spacing:3},r.a.createElement(be.a,{item:!0,xs:1},r.a.createElement(ga.a,null,"VM")),r.a.createElement(be.a,{item:!0,container:!0,xs:11,spacing:3},r.a.createElement(be.a,{item:!0,xs:4},r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(ge.a,{id:"VMLSL",type:"number",defaultValue:this.state.formControls.VMLSL.value,onChange:function(t){return e.handleChange(t.target.value,"VMLSL")},onFocus:function(e){e.target.select()},InputProps:{inputComponent:zn}}))),r.a.createElement(be.a,{item:!0,xs:4},r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(ge.a,{id:"VMCenter",type:"number",defaultValue:this.state.formControls.VMCenter.value,onChange:function(t){return e.handleChange(t.target.value,"VMCenter")},onFocus:function(e){e.target.select()},InputProps:{inputComponent:zn}}))),r.a.createElement(be.a,{item:!0,xs:4},r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(ge.a,{id:"VMUSL",type:"number",defaultValue:this.state.formControls.VMUSL.value,onChange:function(t){return e.handleChange(t.target.value,"VMUSL")},onFocus:function(e){e.target.select()},InputProps:{inputComponent:zn}}))))),r.a.createElement(be.a,{container:!0,spacing:3},r.a.createElement(be.a,{item:!0,xs:1},r.a.createElement(ga.a,null,"Ash")),r.a.createElement(be.a,{item:!0,container:!0,xs:11,spacing:3},r.a.createElement(be.a,{item:!0,xs:4},r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(ge.a,{id:"AshLSL",type:"number",defaultValue:this.state.formControls.AshLSL.value,onChange:function(t){return e.handleChange(t.target.value,"AshLSL")},onFocus:function(e){e.target.select()},InputProps:{inputComponent:zn}}))),r.a.createElement(be.a,{item:!0,xs:4},r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(ge.a,{id:"AshCenter",type:"number",defaultValue:this.state.formControls.AshCenter.value,onChange:function(t){return e.handleChange(t.target.value,"AshCenter")},onFocus:function(e){e.target.select()},InputProps:{inputComponent:zn}}))),r.a.createElement(be.a,{item:!0,xs:4},r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(ge.a,{id:"AshUSL",type:"number",defaultValue:this.state.formControls.AshUSL.value,onChange:function(t){return e.handleChange(t.target.value,"AshUSL")},onFocus:function(e){e.target.select()},InputProps:{inputComponent:zn}}))))),r.a.createElement(be.a,{container:!0,spacing:3},r.a.createElement(be.a,{item:!0,xs:1},r.a.createElement(ga.a,null,"Nitrogen")),r.a.createElement(be.a,{item:!0,container:!0,xs:11,spacing:3},r.a.createElement(be.a,{item:!0,xs:4},r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(ge.a,{id:"NitrogenLSL",type:"number",defaultValue:this.state.formControls.NitrogenLSL.value,onChange:function(t){return e.handleChange(t.target.value,"NitrogenLSL")},onFocus:function(e){e.target.select()},InputProps:{inputComponent:zn}}))),r.a.createElement(be.a,{item:!0,xs:4},r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(ge.a,{id:"NitrogenCenter",type:"number",defaultValue:this.state.formControls.NitrogenCenter.value,onChange:function(t){return e.handleChange(t.target.value,"NitrogenCenter")},onFocus:function(e){e.target.select()},InputProps:{inputComponent:zn}}))),r.a.createElement(be.a,{item:!0,xs:4},r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(ge.a,{id:"NitrogenUSL",type:"number",defaultValue:this.state.formControls.NitrogenUSL.value,onChange:function(t){return e.handleChange(t.target.value,"NitrogenUSL")},onFocus:function(e){e.target.select()},InputProps:{inputComponent:zn}}))))),r.a.createElement(be.a,{container:!0,spacing:3},r.a.createElement(be.a,{item:!0,xs:1},r.a.createElement(ga.a,null,"Mooney")),r.a.createElement(be.a,{item:!0,container:!0,xs:11,spacing:3},r.a.createElement(be.a,{item:!0,xs:4},r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(ge.a,{id:"MooneyLSL",type:"number",defaultValue:this.state.formControls.MooneyLSL.value,onChange:function(t){return e.handleChange(t.target.value,"MooneyLSL")},onFocus:function(e){e.target.select()},InputProps:{inputComponent:zn}}))),r.a.createElement(be.a,{item:!0,xs:4},r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(ge.a,{id:"MooneyCenter",type:"number",defaultValue:this.state.formControls.MooneyCenter.value,onChange:function(t){return e.handleChange(t.target.value,"MooneyCenter")},onFocus:function(e){e.target.select()},InputProps:{inputComponent:zn}}))),r.a.createElement(be.a,{item:!0,xs:4},r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(ge.a,{id:"MooneyUSL",type:"number",defaultValue:this.state.formControls.MooneyUSL.value,onChange:function(t){return e.handleChange(t.target.value,"MooneyUSL")},onFocus:function(e){e.target.select()},InputProps:{inputComponent:zn}}))))),r.a.createElement(be.a,{container:!0,spacing:3},r.a.createElement(be.a,{item:!0,xs:1},r.a.createElement(ga.a,null,"Asht")),r.a.createElement(be.a,{item:!0,container:!0,xs:11,spacing:3},r.a.createElement(be.a,{item:!0,xs:4},r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(ge.a,{id:"AshtLSL",type:"number",defaultValue:this.state.formControls.AshtLSL.value,onChange:function(t){return e.handleChange(t.target.value,"AshtLSL")},onFocus:function(e){e.target.select()},InputProps:{inputComponent:zn}}))),r.a.createElement(be.a,{item:!0,xs:4},r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(ge.a,{id:"AshtCenter",type:"number",defaultValue:this.state.formControls.AshtCenter.value,onChange:function(t){return e.handleChange(t.target.value,"AshtCenter")},onFocus:function(e){e.target.select()},InputProps:{inputComponent:zn}}))),r.a.createElement(be.a,{item:!0,xs:4},r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(ge.a,{id:"AshtUSL",type:"number",defaultValue:this.state.formControls.AshtUSL.value,onChange:function(t){return e.handleChange(t.target.value,"AshtUSL")},onFocus:function(e){e.target.select()},InputProps:{inputComponent:zn}})))))))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=t.formControls;return e.formState.valid||Array.isArray(e.formState.errors)&&e.formState.errors.map((function(e){a[e.property].valid=!1,a[e.property].message=e.message})),{formState:e.formState,formControls:a}}}]),t}(r.a.Component),Kn={GradeGroup:"",GradeCode:"",GradeName:"",GradeCountry:"",GradeCountryGrd:"",GradeBuyer:"",GradeBuyerProdCode:"",GradeDesc:"",GradeLCL:0,GradeUCL:0,GradePOLSL:0,GradePOCenter:0,GradePOUSL:0,GradePRILSL:0,GradePRICenter:0,GradePRIUSL:0,GradeDirtLSL:0,GradeDirtCenter:0,GradeDirtUSL:0,GradeVMLSL:0,GradeVMCenter:0,GradeVMUSL:0,GradeAshLSL:0,GradeAshCenter:0,GradeAshUSL:0,GradeNitrogenLSL:0,GradeNitrogenCenter:0,GradeNitrogenUSL:0,GradeMooneyLSL:0,GradeMooneyCenter:0,GradeMooneyUSL:0,GradeAshtLSL:0,GradeAshtCenter:0,GradeAshtUSL:0,GradeInactive:!1,GradeCreatedAt:new Date(Date.now()).toLocaleString(),GradeCreatedBy:"Admin",GradeLastUpdatedAt:new Date(Date.now()).toLocaleString(),GradeLastUpdatedBy:"Admin"},Jn=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).openDialog=function(e){a.setState({dialogOpen:!0,currentDeleteData:e,dialogMessage:r.a.createElement("span",null,"Are you sure to delete this record ",r.a.createElement("b",null,e.GradeCode)," ? This cannot be undone.")})},a.closeDialog=function(){a.setState({dialogOpen:!1,currentDeleteData:null,dialogMessage:""})},a.openForm=function(e){void 0===e?a.setState({actionStatus:"Add",newData:Object(me.a)({},Kn)}):a.setState({actionStatus:"Update",newData:Object(me.a)({},e)}),a.setState({formOpen:!0,formState:{valid:!0,dirty:!1,errors:[]}})},a.closeForm=function(){a.setState({formOpen:!1,newData:{},actionStatus:""})},a.onSave=function(){var e=a.state.formState,t=Object(me.a)({},a.state.newData);"object"===typeof t.GradeCountry&&(t.GradeCountry=t.GradeCountry._id),"object"===typeof t.GradeCountryGrd&&(t.GradeCountryGrd=t.GradeCountryGrd._id),"object"===typeof t.GradeBuyer&&(t.GradeBuyer=t.GradeBuyer._id),console.log(t.GradeGroup._id),console.log(t);var n=Gn.validateFields(t);if(n.valid){var r=Object(je.a)(a.state.data);"Add"===a.state.actionStatus?Gn.add("",t).then((function(t){!0===t.code?(e.valid=!0,r.push(t.data),a.setState({data:r}),a.closeForm(),a.snackOpen("Product grade created successfully!","success")):(e.valid=!1,e.errors=t.errors,a.snackOpen("Please fix the error(s) highlighted to save the details!","error"))})).catch((function(e){a.snackOpen("Oops, something went wrong while processing your request!","error")})):Gn.update("",t).then((function(n){if(!0===n.code){e.valid=!0;var o=r.find((function(e){return e._id===t._id})),s=r.indexOf(o);r[s]=n.data,a.setState({data:r}),a.closeForm(),a.snackOpen("Product grade updated successfully!","success")}else e.valid=!1,e.errors=n.errors,a.snackOpen("Please fix the error(s) highlighted to save the details!","error")})).catch((function(e){a.snackOpen("Oops, something went wrong while processing your request!","error")}))}else{e.valid=!1;var o=n.errors.map((function(e){var t={};return t.property=e.property,t.message=e.message,t}));e.errors=o,a.snackOpen("Please fix the error(s) highlighted to save the details!","error")}a.setState({formState:e})},a.onDelete=function(){null!==a.state.currentDeleteData&&Gn.delete("".concat(a.state.currentDeleteData._id)).then((function(e){if(!0===e.code){var t=a.state.data.indexOf(a.state.currentDeleteData),n=a.state.data.splice(t,1);a.closeDialog(),a.snackOpen("Successfully Deleted!","success"),a.setState({data:n})}else a.snackOpen("Oops, something went wrong while processing your request!","error")}))},a.onEdit=function(e){a.openForm(e)},a.state={columns:[{field:"_id",hidden:!0},{title:"Product Grade Group",field:"GradeGroup",lookup:{}},{title:"Product Grade Code",field:"GradeCode"},{title:"Product Grade Name",field:"GradeName"},{title:"Country",field:"GradeCountry",render:function(e){return r.a.createElement("span",null,void 0===e.GradeCountry?"":e.GradeCountry.name)}},{title:"Country Grade",field:"GradeCountryGrd",render:function(e){return r.a.createElement("span",null,void 0===e.GradeCountryGrd?"":e.GradeCountryGrd.CountryGrade)}},{title:"Buyer",field:"GradeBuyer",render:function(e){return r.a.createElement("span",null,void 0===e.GradeBuyer?"":e.GradeBuyer.name)}},{title:"Product Code",field:"GradeBuyerProdCode"},{title:"Description",field:"GradeDesc"},{title:"LCL",field:"GradeLCL",render:function(e){return r.a.createElement(Xa.a,{value:e.GradeLCL,displayType:"text",decimalScale:2,fixedDecimalScale:!0})}},{title:"UCL",field:"GradeUCL",render:function(e){return r.a.createElement(Xa.a,{value:e.GradeUCL,displayType:"text",decimalScale:2,fixedDecimalScale:!0})}},{title:"Inactive",field:"GradeInactive",render:function(e){return r.a.createElement("span",null,e.GradeInactive?"Yes":"No")}},{title:"Operator",field:"GradeLastUpdatedBy"},{title:"Last Updated",field:"GradeLastUpdatedAt",render:function(e){return r.a.createElement("span",null,void 0===e?"":new Date(e.GradeLastUpdatedAt).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}))}}],data:[],currentDeleteData:null,newData:Kn,formOpen:!1,dialogOpen:!1,dialogMessage:"",disabled:!1,actionStatus:"",formState:{valid:!0,dirty:!1,errors:[]}},a.openDialog=a.openDialog.bind(Object(Pe.a)(a)),a.closeDialog=a.closeDialog.bind(Object(Pe.a)(a)),a.openForm=a.openForm.bind(Object(Pe.a)(a)),a.closeForm=a.closeForm.bind(Object(Pe.a)(a)),a.snackOpen=a.snackOpen.bind(Object(Pe.a)(a)),a.snackClose=a.snackClose.bind(Object(Pe.a)(a)),a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initProductGrade(),this.initGradeGroupData()}},{key:"initProductGrade",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.awrap(Gn.getProductGrade("").then((function(t){!0===t.code&&e.setState({data:t.data})})));case 2:case"end":return t.stop()}}))}},{key:"initGradeGroupData",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:Oa("productGradeGroup.json").then((function(e){return e.data})).then((function(t){var a={};t.ProductGradeGroup.forEach((function(e){return a[e.Value]=e.Name}));var n=Object(je.a)(e.state.columns),r=n.findIndex((function(e){return"GradeGroup"===e.field}));n[r].lookup=a,e.setState({columns:n})}));case 1:case"end":return t.stop()}}))}},{key:"handleChange",value:function(e,t){var a=this.state.newData;a[t]=e;var n=this.state.formState;n.valid=!0,this.setState({newData:a,formState:n})}},{key:"snackOpen",value:function(e,t){this.setState({alertOpen:!0,alertMessage:e,alertClass:t})}},{key:"snackClose",value:function(){this.setState({alertOpen:!1,alertMessage:"",alertClass:"",currentDeleteData:null})}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{style:{margin:"20px 20px 10px 0px"}},r.a.createElement(Ve.a,{title:"Product Grade",columns:this.state.columns,data:this.state.data,components:{Toolbar:function(t){return r.a.createElement("div",null,r.a.createElement(Le.MTableToolbar,t),r.a.createElement("div",{style:{padding:"0px 15px"}},r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:function(){return e.openForm()},"aria-label":"add"},r.a.createElement(wt.a,null))))}},actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.data,columns:e.state.columns,fileName:"Product Grade"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.initProductGrade()}},{icon:"edit",tooltip:"Edit Product Grade",onClick:function(t,a){return e.openForm(a)}},{icon:"delete",tooltip:"Delete Product Grade",onClick:function(t,a){return e.openDialog(a)}}],options:{}}),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:6e3,open:this.state.alertOpen,onClose:this.snackClose,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}),r.a.createElement(Ae.a,{fullScreen:!0,open:this.state.formOpen,onClose:this.closeForm,TransitionComponent:this.Transition},r.a.createElement(w.a,{className:"appBar"},r.a.createElement(F.a,null,r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:this.closeForm,"aria-label":"close"},r.a.createElement(Vt.a,null)),r.a.createElement(x.a,{variant:"h6",className:"app-title"},"Product Grade Details"),r.a.createElement(he.a,{color:"inherit",disabled:this.state.disabled,onClick:this.onSave},"save"))),r.a.createElement(_e.a,null,r.a.createElement(Yn,{handleChange:this.handleChange,formData:this.state.newData,formState:this.state.formState}))),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.closeDialog,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.closeDialog,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDelete,color:"primary"},"Delete"))))}}]),t}(r.a.Component),Zn={get:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="NCHandling/"+e,a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 2:case"end":return a.stop()}}))},getFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("NCHandling-filter/").concat(e),a.next=3,l.a.awrap(We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 3:return a.abrupt("return",a.sent);case 4:case"end":return a.stop()}}))},update:function(e,t){return Qe("NCHandling/"+e,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Handling method updated successfully.",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,errors:e.data.errors,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="NCHandling/"+e,n.abrupt("return",He(a,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,message:"Handling method added successfully.",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("NCHandling/"+e).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))}},Xn=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).handleClickDelOpen=function(e){a.setState({delopen:!0,delId:e._id,deleteMessage:r.a.createElement("span",null," ","Are you sure to delete this record ",r.a.createElement("b",null,e.NCHandlingName)," ? This cannot be undone.")})},a.handleDelClose=function(){a.setState({delopen:!1})},a.handleClose=function(){a.setState({open:!1,errMessage:""})},a.onDel=function(){Zn.delete(a.state.delId).then((function(e){if(!0===e.code){var t=a.state.NCHandlingData.findIndex((function(e){return e._id===a.state.delId})),n=Object(je.a)(a.state.NCHandlingData);n.splice(t,1),a.setState({NCHandlingData:n}),a.handleOpen(e.message,"success")}else a.handleOpen("Please try again later!","info");a.setState({delId:""}),a.setState({delopen:!1})}))},a.state={columns:[{title:"Handling Method",field:"NCHandlingName",initialEditValue:"",editComponent:function(e){return r.a.createElement(ge.a,{required:!0,margin:"dense",id:"input-NCHandlingName",label:"Name",error:a.state.formState&&(void 0===e.rowData.NCHandlingName||0===e.rowData.NCHandlingName.length),helperText:!a.state.formState||void 0!==e.rowData.NCHandlingName&&0!==e.rowData.NCHandlingName.length?"":"NC Handling Method Name cannot be empty.",type:"text",defaultValue:e.value,onChange:function(t){return a.onChange(t.target.value.trim(),e.rowData,"NCHandlingName")}})}},{title:"Remarks",field:"NCHandlingRemarks",initialEditValue:"",editComponent:function(e){return r.a.createElement(ge.a,{margin:"dense",id:"input-ProcRemarks",label:"Remarks",defaultValue:e.value,type:"text",onChange:function(t){return a.onChange(t.target.value,e.rowData,"NCHandlingRemarks")}})}},{title:"Inactive",field:"NCHandlingInactive",initialEditValue:!1,lookup:{true:"Yes",false:"No"},editComponent:function(e){return r.a.createElement(Xe.a,{checked:e.value,onChange:function(t){return e.onChange(t.target.checked)},id:"input-NCHandlingInactive",value:e.value,color:"primary",inputProps:{"aria-label":"primary checkbox"}})}},{title:"Operator",field:"NCHandlingLastUpdatedBy",editable:"never"},{title:"Last Updated",field:"NCHandlingLastUpdatedAt",render:function(e){return r.a.createElement("span",null,void 0===e?"":new Date(e.NCHandlingLastUpdatedAt).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}))},editable:"never"}],NCHandlingData:[],NCHandlingUpdateData:{},delId:"",formState:!1,errMessage:"",open:!1,delopen:!1,operator:"Admin"},a.handleOpen=a.handleOpen.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.getNCHandlingData()}},{key:"handleOpen",value:function(e,t){this.setState({open:!0,vertical:"bottom",horizontal:"right",errMessage:e,errorState:t})}},{key:"onChange",value:function(e,t,a){t[a]=e,""!==t.NCHandlingName&&void 0!==t.NCHandlingName?this.setState({formState:!1}):this.setState({formState:!0})}},{key:"getNCHandlingData",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.awrap(Zn.get("").then((function(t){!0===t.code&&e.setState({NCHandlingData:t.data})})));case 2:case"end":return t.stop()}}))}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{style:{margin:"20px 20px 10px 0px"}},r.a.createElement(Ve.a,{title:"NC Handling Method",columns:this.state.columns,data:this.state.NCHandlingData,components:{Toolbar:function(e){return r.a.createElement("div",null,r.a.createElement(Le.MTableToolbar,e))}},actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.NCHandlingData,columns:e.state.columns,fileName:"NC Handling Method"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.getNCHandlingData()}},{icon:"delete",tooltip:"Delete",onClick:function(t,a){return e.handleClickDelOpen(a)}}],editable:{onRowAdd:function(t){return new Promise((function(a,n){setTimeout((function(){""!==t.NCHandlingName&&void 0!==t.NCHandlingName?(e.setState({formState:!1}),t.NCHandlingLastUpdatedBy=e.state.operator,t.NCHandlingCreatedBy=e.state.operator,Zn.add("",t).then((function(t){if(!0===t.code){var r=Object(je.a)(e.state.NCHandlingData);r.push(t.data),e.setState({NCHandlingData:r},(function(){return a()})),e.handleOpen(t.message,"success")}else n(),e.setState({formState:!0}),e.handleOpen(t.message,"error")}))):(n(),e.setState({formState:!0}),e.handleOpen("Please fix the error(s) highlighted to save the details!","error"))}),100)}))},onRowUpdate:function(t,a){return new Promise((function(n,r){setTimeout((function(){""!==t.NCHandlingName&&void 0!==t.NCHandlingName?(e.setState({formState:!1}),t.NCHandlingLastUpdatedBy=e.state.operator,Zn.update("",t).then((function(t){if(!0===t.code){var o=Object(je.a)(e.state.NCHandlingData),s=o.indexOf(a);o[s]=t.data,e.setState({NCHandlingData:o},(function(){return n()})),e.handleOpen(t.message,"success")}else e.setState({formState:!0}),e.handleOpen(t.message,"error"),r()}))):(e.setState({formState:!0}),r(),e.handleOpen("Please fix the error(s) highlighted to save the details!","error"))}),100)}))}},options:{}}),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.errorState,autoHideDuration:6e3,open:this.state.open,onClose:this.handleClose,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.errMessage)}),r.a.createElement(Ae.a,{open:this.state.delopen,onClose:this.handleDelClose,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,""===this.state.errMessage?this.state.deleteMessage:this.state.errMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.handleDelClose,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDel,color:"primary"},"Delete"))))}}]),t}(n.Component),$n={get:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="QPRReason/"+e,a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 2:case"end":return a.stop()}}))},getFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("QPRReason-filter/").concat(e),a.next=3,l.a.awrap(We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 3:return a.abrupt("return",a.sent);case 4:case"end":return a.stop()}}))},update:function(e,t){return Qe("QPRReason/"+e,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"QPR reason updated successfully.",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,errors:e.data.errors,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="QPRReason/"+e,n.abrupt("return",He(a,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,message:"QPR reason added successfully.",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("QPRReason/"+e).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))}},er=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).handleClickDelOpen=function(e){a.setState({delopen:!0,delId:e._id,deleteMessage:r.a.createElement("span",null," ","Are you sure to delete this record ",r.a.createElement("b",null,e.QPRReason)," ? This cannot be undone.")})},a.handleDelClose=function(){a.setState({delopen:!1})},a.handleClose=function(){a.setState({open:!1,errMessage:""})},a.onDel=function(){$n.delete(a.state.delId).then((function(e){if(!0===e.code){var t=a.state.data.findIndex((function(e){return e._id===a.state.delId})),n=Object(je.a)(a.state.data);n.splice(t,1),a.setState({data:n}),a.handleOpen(e.message,"success")}else a.handleOpen("Please try again later!","info");a.setState({delId:""}),a.setState({delopen:!1})}))},a.state={columns:[{title:"QPR Reason",field:"QPRReason",initialEditValue:"",editComponent:function(e){return r.a.createElement(ge.a,{required:!0,margin:"dense",id:"input-QPRReason",label:"Name",error:a.state.formState&&(void 0===e.rowData.QPRReason||0===e.rowData.QPRReason.length),helperText:!a.state.formState||void 0!==e.rowData.QPRReason&&0!==e.rowData.QPRReason.length?"":"QPR Reason cannot be empty.",type:"text",defaultValue:e.value,onChange:function(t){return a.onChange(t.target.value.trim(),e.rowData,"QPRReason")}})}},{title:"Remarks",field:"QPRReasonRemarks",initialEditValue:"",editComponent:function(e){return r.a.createElement(ge.a,{margin:"dense",id:"input-ProcRemarks",label:"Remarks",defaultValue:e.value,type:"text",onChange:function(t){return a.onChange(t.target.value,e.rowData,"QPRReasonRemarks")}})}},{title:"Inactive",field:"QPRReasonInactive",initialEditValue:!1,lookup:{true:"Yes",false:"No"},editComponent:function(e){return r.a.createElement(Xe.a,{checked:e.value,onChange:function(t){return e.onChange(t.target.checked)},id:"input-QPRReasonInactive",value:e.value,color:"primary",inputProps:{"aria-label":"primary checkbox"}})}},{title:"Operator",field:"QPRReasonLastUpdatedBy",editable:"never"},{title:"Last Updated",field:"QPRReasonLastUpdatedAt",render:function(e){return r.a.createElement("span",null,void 0===e?"":new Date(e.QPRReasonLastUpdatedAt).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}))},editable:"never"}],data:[],QPRReasonUpdateData:{},delId:"",formState:!1,errMessage:"",open:!1,delopen:!1,operator:"Admin"},a.handleOpen=a.handleOpen.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.getQPRReasonData()}},{key:"handleOpen",value:function(e,t){this.setState({open:!0,vertical:"bottom",horizontal:"right",errMessage:e,errorState:t})}},{key:"onChange",value:function(e,t,a){t[a]=e,""!==t.QPRReason&&void 0!==t.QPRReason?this.setState({formState:!1}):this.setState({formState:!0})}},{key:"getQPRReasonData",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.awrap($n.get("").then((function(t){!0===t.code&&e.setState({data:t.data})})));case 2:case"end":return t.stop()}}))}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{style:{margin:"20px 20px 10px 0px"}},r.a.createElement(Ve.a,{title:"QPR Reason",columns:this.state.columns,data:this.state.data,components:{Toolbar:function(e){return r.a.createElement("div",null,r.a.createElement(Le.MTableToolbar,e))}},actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.data,columns:e.state.columns,fileName:"QPR Reason"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.getQPRReasonData()}},{icon:"delete",tooltip:"Delete",onClick:function(t,a){return e.handleClickDelOpen(a)}}],editable:{onRowAdd:function(t){return new Promise((function(a,n){setTimeout((function(){var r=Object(je.a)(e.state.data);""!==t.QPRReason&&void 0!==t.QPRReason?(e.setState({formState:!1}),t.QPRReasonLastUpdatedBy=e.state.operator,t.QPRReasonCreatedBy=e.state.operator,$n.add("",t).then((function(t){!0===t.code?(r.push(t.data),e.setState({data:r},(function(){return a()})),e.handleOpen(t.message,"success")):(n(),e.setState({formState:!0}),e.handleOpen(t.message,"error"))}))):(n(),e.setState({formState:!0}),e.handleOpen("Please fix the error(s) highlighted to save the details!","error"))}),100)}))},onRowUpdate:function(t,a){return new Promise((function(n,r){setTimeout((function(){var o=Object(je.a)(e.state.data);""!==t.QPRReason&&void 0!==t.QPRReason?(e.setState({formState:!1}),t.QPRReasonLastUpdatedBy=e.state.operator,$n.update("",t).then((function(t){if(!0===t.code){var s=o.indexOf(a);o[s]=t.data,e.setState({data:o},(function(){return n()})),e.handleOpen(t.message,"success")}else e.setState({formState:!0}),e.handleOpen(t.message,"error"),r()}))):(e.setState({formState:!0}),r(),e.handleOpen("Please fix the error(s) highlighted to save the details!","error"))}),100)}))}},options:{}}),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.errorState,autoHideDuration:6e3,open:this.state.open,onClose:this.handleClose,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.errMessage)}),r.a.createElement(Ae.a,{open:this.state.delopen,onClose:this.handleDelClose,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,""===this.state.errMessage?this.state.deleteMessage:this.state.errMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.handleDelClose,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDel,color:"primary"},"Delete"))))}}]),t}(n.Component),tr={properties:{MachGrpName:{description:"",type:"string",required:!0,allowEmpty:!1,messages:{allowEmpty:"Machine group name cannot be empty.",required:"Machine group name cannot be empty."}}}},ar=a(24),nr={validateFields:function(e){return ar.validate(e,tr,{cast:!0})},get:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="machineGroup/"+e,a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 2:case"end":return a.stop()}}))},getToolFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("machineGroup-filter/").concat(e),a.next=3,l.a.awrap(We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 3:return a.abrupt("return",a.sent);case 4:case"end":return a.stop()}}))},update:function(e,t){return Qe("machineGroup/"+e,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Machine group updated successfully.",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,errors:e.data.errors,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="machineGroup/"+e,n.abrupt("return",He(a,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,message:"Machine group added successfully.",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("machineGroup/"+e).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))}},rr={MachGrpName:"",MachGrpRemarks:"",MachGrpCreatedAt:new Date(Date.now()).toLocaleString(),MachGrpCreatedBy:"Admin",MachGrpLastUpdatedAt:new Date(Date.now()).toLocaleString(),MachGrpLastUpdatedBy:"Admin"},or=a(23),sr={MachGrpName:{valid:!0,message:""},MachGrpRemarks:{valid:!0,message:""}},ir=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).openDialog=function(e){a.setState({dialogOpen:!0,currentDeleteData:e,dialogMessage:r.a.createElement("span",null,"Are you sure to delete ",r.a.createElement("b",null,e.MachGrpName)," ? This cannot be undone.")})},a.closeDialog=function(){a.setState({dialogOpen:!1,currentDeleteData:null,dialogMessage:""})},a.onDelete=function(){null!==a.state.currentDeleteData&&nr.delete("".concat(a.state.currentDeleteData._id)).then((function(e){if(!0===e.code){var t=Object(je.a)(a.state.data),n=t.indexOf(a.state.currentDeleteData);t.splice(n,1),a.setState({data:t,currentDeleteData:"",dialogOpen:!a.state.dialogOpen}),a.snackOpen("Successfully Deleted!","success")}else a.snackOpen("Oops, something went wrong while processing your request!","error")}))},a.onEdit=function(e){a.openForm(e)},a.state={formControls:or(sr),columns:[{field:"_id",hidden:!0},{title:"Machine Group",field:"MachGrpName",editComponent:function(e){return r.a.createElement(ge.a,{required:!0,margin:"dense",id:"MachGrpName",label:"Machine Group",type:"text",error:!a.state.formControls.MachGrpName.valid,helperText:a.state.formControls.MachGrpName.message,defaultValue:e.rowData.MachGrpName,onChange:function(t){a.onChange(t.target.value.trim(),e.rowData,"MachGrpName")}})}},{title:"Description",field:"MachGrpRemarks",editComponent:function(e){return r.a.createElement(ge.a,{margin:"dense",id:"remarks",label:"Remarks",type:"text",defaultValue:e.rowData.MachGrpRemarks,onChange:function(t){a.onChange(t.target.value,e.rowData,"MachGrpRemarks")}})}},{title:"Operator",field:"MachGrpLastUpdatedBy",editable:"never"},{title:"Last Updated",field:"MachGrpLastUpdatedAt",render:function(e){return r.a.createElement("span",null,void 0===e?"":new Date(e.MachGrpLastUpdatedAt).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}))},editable:"never"}],data:[],currentDeleteData:null,newData:rr,formOpen:!1,dialogOpen:!1,dialogMessage:"",disabled:!1,actionStatus:"",formState:{valid:!0,dirty:!1,errors:[]},operator:"Admin"},a.openDialog=a.openDialog.bind(Object(Pe.a)(a)),a.closeDialog=a.closeDialog.bind(Object(Pe.a)(a)),a.snackOpen=a.snackOpen.bind(Object(Pe.a)(a)),a.snackClose=a.snackClose.bind(Object(Pe.a)(a)),a.onChange=a.onChange.bind(Object(Pe.a)(a)),a.initFormControl=a.initFormControl.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initMachineGroup()}},{key:"initFormControl",value:function(){this.setState({formControls:or(sr)})}},{key:"onChange",value:function(e,t,a){var n=this.state.formControls;""===e||null===e||void 0===e?(n[a].valid=!1,n[a].message="".concat(a," cannot be empty")):(n[a].valid=!0,n[a].message=""),t[a]=e,this.setState({formControls:n})}},{key:"initMachineGroup",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.awrap(nr.get("").then((function(t){!0===t.code&&e.setState({data:t.data})})));case 2:case"end":return t.stop()}}))}},{key:"snackOpen",value:function(e,t){this.setState({alertOpen:!0,alertMessage:e,alertClass:t})}},{key:"snackClose",value:function(){this.setState({alertOpen:!1,alertMessage:"",alertClass:"",currentDeleteData:null})}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{style:{margin:"20px 20px 10px 0px"}},r.a.createElement(Ve.a,{title:"Machine Group",columns:this.state.columns,data:this.state.data,components:{Toolbar:function(e){return r.a.createElement("div",null,r.a.createElement(Le.MTableToolbar,e))}},editable:{onRowAdd:function(t){return new Promise((function(a,n){setTimeout((function(){var r=Object(je.a)(e.state.data),o=e.state.formControls,s=nr.validateFields(t);s.valid?nr.add("",t).then((function(t){!0===t.code?(r.push(t.data),e.snackOpen("Successfully added!","success"),e.setState({data:r},(function(){return a()}))):(n(),t.errors.map((function(e){o[e.property].valid=!1,o[e.property].message=e.message})),e.setState({formControls:o}),e.snackOpen("Please fix the error(s) highlighted to save the details!","error"))})).catch((function(t){n(),e.snackOpen("Oops, something went wrong while processing your request!","error")})):(n(),s.errors.map((function(e){o[e.property].valid=!1,o[e.property].message=e.message})),e.setState({formControls:o}))}),1e3)}))},onRowUpdate:function(t,a){return new Promise((function(n,r){setTimeout((function(){var o=Object(je.a)(e.state.data),s=Object(me.a)({},e.state.formControls),i=nr.validateFields(t);i.valid?nr.update("",t).then((function(t){if(!0===t.code){var i=o.indexOf(a);o[i]=t.data,e.snackOpen("Successfully updated!","success"),e.setState({data:o},(function(){return n()}))}else r(),t.errors.map((function(e){return s[e.property].valid=!1,s[e.property].message=e.message,s})),e.setState({formControls:s}),e.snackOpen("Please fix the error(s) highlighted to save the details!","error")})).catch((function(t){r(),e.snackOpen("Oops, something went wrong while processing your request!","error")})):(r(),i.errors.map((function(e){s[e.property].valid=!1,s[e.property].message=e.message})),e.setState({formControls:s}))}),1e3)}))}},actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.data,columns:e.state.columns,fileName:"Machine Group"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.initMachineGroup()}},{icon:"delete",tooltip:"Delete",onClick:function(t,a){return e.openDialog(a)}}],icons:{Clear:function(t){return r.a.createElement(Nt.a,{onClick:function(){e.initFormControl()},style:{padding:0,margin:0}})}},options:{}}),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:6e3,open:this.state.alertOpen,onClose:this.snackClose,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.closeDialog,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.closeDialog,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDelete,color:"primary"},"Delete"))))}}]),t}(r.a.Component),lr={properties:{MachGrp:{description:"",type:"string",required:!0,allowEmpty:!1,messages:{allowEmpty:"Machine group cannot be empty."}},MachName:{description:"",type:"string",required:!0,allowEmpty:!1,messages:{allowEmpty:"Machine name cannot be empty."}}}},cr=a(24),ur={validateFields:function(e){return cr.validate(e,lr,{cast:!0})},get:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="machine/"+e,a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 2:case"end":return a.stop()}}))},getToolFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("machine-filter/").concat(e),a.next=3,l.a.awrap(We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 3:return a.abrupt("return",a.sent);case 4:case"end":return a.stop()}}))},update:function(e,t){return Qe("machine/"+e,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Machine updated successfully.",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,errors:e.data.errors,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="machine/"+e,n.abrupt("return",He(a,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,message:"Machine added successfully.",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("machine/"+e).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))}},dr=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={machineGrpData:[]},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initMachingGroup()}},{key:"initMachingGroup",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.awrap(nr.get("").then((function(t){!0===t.code&&e.setState({machineGrpData:t.data})})));case 2:case"end":return t.stop()}}))}},{key:"renderOptions",value:function(){return this.state.machineGrpData.map((function(e,t){return r.a.createElement(et.a,{label:"Select machine group",value:e._id,key:e._id,name:e.MachGrpName},r.a.createElement(E.a,{style:{width:"100%"}},r.a.createElement(b.a,{alignItems:"flex-start"},r.a.createElement(S.a,{primary:e.MachGrpName,style:{width:"30%"}}),r.a.createElement(S.a,{primary:e.MachGrpRemarks,style:{width:"70%"}}))))}))}},{key:"handleChange",value:function(e,t){this.props.handleChange(e.target.value,t)}},{key:"render",value:function(){var e=this;return r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Ea.a,{shrink:!0,htmlFor:"machineGrp",required:!0,error:!this.props.formControl.valid},"Machine Group - Remarks"),r.a.createElement(ba.a,{id:this.props.propertyName,value:this.props.selectedValue,error:!this.props.formControl.valid,onChange:function(t){return e.handleChange(t,e.props.propertyName)},displayEmpty:!0},r.a.createElement(et.a,{value:""},r.a.createElement("em",null,"Select machine group")),this.renderOptions()),r.a.createElement(Sa.a,{error:!this.props.formControl.valid,style:{display:this.props.formControl.valid?"none":""}},this.props.formControl.valid?"":this.props.formControl.message))}}]),t}(n.Component),mr=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={formControls:{MachGrp:{valid:!0,message:"",value:void 0===a.props.formData.MachGrp||""===a.props.formData.MachGrp?"":a.props.formData.MachGrp._id},MachName:{valid:!0,message:"",value:a.props.formData.MachName},MachAbvr:{valid:!0,message:"",value:a.props.formData.MachAbvr},MachDesc:{valid:!0,message:"",value:a.props.formData.MachDesc},MachRemarks:{valid:!0,message:"",value:a.props.formData.MachRemarks},MachInactive:{valid:!0,message:"",value:a.props.formData.MachInactive}},formState:{valid:!0,dirty:!1,errors:[]}},a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"handleChange",value:function(e,t){var a=this.state.formControls,n=this.state.formState;void 0===e||0===e.length?(a[t].valid=!1,a[t].message="".concat(t," cannot be empty.")):(a[t].valid=!0,a[t].message=""),this.props.handleChange(e,t),a[t].value=e,n.dirty=!0,this.setState({formControls:a,formState:n})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"form-container"},r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-evenly",alignItems:"center",md:6,xs:12,sm:12,xl:8,lg:8},r.a.createElement(dr,{handleChange:this.handleChange,selectedValue:this.state.formControls.MachGrp.value,formControl:this.state.formControls.MachGrp,propertyName:"MachGrp"}),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(ge.a,{required:!0,id:"MachName",label:"Name",error:!this.state.formControls.MachName.valid,helperText:this.state.formControls.MachName.message,defaultValue:this.state.formControls.MachName.value,onChange:function(t){return e.handleChange(t.target.value.trim(),"MachName")}})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(ge.a,{id:"MachAbvr",label:"Abbreviation",defaultValue:this.state.formControls.MachAbvr.value,onChange:function(t){return e.handleChange(t.target.value,"MachAbvr")}})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(ge.a,{id:"MachDesc",label:"Description",defaultValue:this.state.formControls.MachDesc.value,onChange:function(t){return e.handleChange(t.target.value,"MachDesc")},multiline:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(ge.a,{id:"MachRemarks",label:"Remarks",defaultValue:this.state.formControls.MachRemarks.value,onChange:function(t){return e.handleChange(t.target.value,"MachRemarks")},multiline:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(ga.a,{component:"label"},"Inactive"),r.a.createElement(Xe.a,{checked:this.state.formControls.MachInactive.value,value:this.state.formControls.MachInactive.value,color:"primary",inputProps:{"aria-label":"primary checkbox"},onChange:function(t){return e.handleChange(t.target.checked,"MachInactive")}}))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=t.formControls;return e.formState.valid||Array.isArray(e.formState.errors)&&e.formState.errors.map((function(e){a[e.property].valid=!1,a[e.property].message=e.message})),{formState:e.formState,formControls:a}}}]),t}(r.a.Component),pr={MachGrp:"",MachName:"",MachAbvr:"",MachDesc:"",MachRemarks:"",MachInactive:!1,MachCreatedAt:new Date(Date.now()).toLocaleString(),MachCreatedBy:"Admin",MachLastUpdatedAt:new Date(Date.now()).toLocaleString(),MachLastUpdatedBy:"Admin"},fr={properties:{Factory:{type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Factory cannot be empty."}},TrolleyNumber:{type:"number",required:!0,allowEmpty:!1,messages:{allowEmpty:"Trolley number cannot be empty."}},Description:{type:"string"},Inactive:{type:"boolean"},InactDescription:{type:"string"}}},hr=a(24),gr={validateFields:function(e){return hr.validate(e,fr,{cast:!0})},get:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="factoryTrolley/"+e,a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 2:case"end":return a.stop()}}))},getToolFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("factoryTrolley-filter/").concat(e),a.next=3,l.a.awrap(We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 3:return a.abrupt("return",a.sent);case 4:case"end":return a.stop()}}))},update:function(e,t){return Qe("factoryTrolley/"+e,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Machine updated successfully.",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,errors:e.data.errors,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="factoryTrolley/"+e,n.abrupt("return",He(a,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,message:"Machine added successfully.",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("factoryTrolley/"+e).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))}},yr=(Object(n.forwardRef)((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),r.a.forwardRef((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).dialogOpen=function(e){var t;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,l.a.awrap(ka("confirmation","delete"));case 2:t=n.sent,a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:e,dialogMessage:r.a.createElement("span",null,void 0!==t?t.replace("[Name]",e.MachName):"")});case 4:case"end":return n.stop()}}))},a.closeDialog=function(){a.setState({dialogOpen:!1,currentDeleteData:null,dialogMessage:""})},a.openForm=function(e){console.log(e),void 0===e?a.setState({actionStatus:"Add",newData:Object(me.a)({},pr)}):a.setState({actionStatus:"Update",newData:Object(me.a)({},e)}),a.setState({formOpen:!0,formState:{valid:!0,dirty:!1,errors:[]}})},a.closeForm=function(){a.setState({formOpen:!1,newData:{},actionStatus:""})},a.handleClickDelClose=function(){a.setState({dialogOpen:!1,currentDeleteData:null})},a.onSave=function(){var e=a.state.formState,t=Object(me.a)({},a.state.newData);"object"===typeof t.MachGrp&&(t.MachGrp=t.MachGrp._id);var n=ur.validateFields(t);if(n.valid){var r=Object(je.a)(a.state.data);"Add"===a.state.actionStatus?(t.MachLastUpdatedBy=a.state.operator,t.MachCreatedBy=a.state.operator,ur.add("",t).then((function(t){!0===t.code?(e.valid=!0,r.push(t.data),a.setState({data:r}),a.closeForm(),a.snackOpen("Machine created successfully!","success")):(e.valid=!1,e.errors=t.errors,a.snackOpen("Please fix the error(s) highlighted to save the details!","error"))})).catch((function(e){a.snackOpen("Oops, something went wrong while processing your request!","error")}))):(t.MachLastUpdatedBy=a.state.operator,ur.update("",t).then((function(n){if(!0===n.code){e.valid=!0;var o=r.find((function(e){return e._id===t._id})),s=r.indexOf(o);r[s]=n.data,a.setState({data:r}),a.closeForm(),a.snackOpen("Machine updated successfully!","success")}else e.valid=!1,e.errors=n.errors,a.snackOpen("Please fix the error(s) highlighted to save the details!","error")})).catch((function(e){a.snackOpen("Oops, something went wrong while processing your request!","error")})))}else{e.valid=!1;var o=n.errors.map((function(e){var t={};return t.property=e.property,t.message=e.message,t}));e.errors=o,a.snackOpen("Please fix the error(s) highlighted to save the details!","error")}a.setState({formState:e})},a.onDelete=function(){console.log(a.state.currentDeleteData),null!==a.state.currentDeleteData&&ur.delete("".concat(a.state.currentDeleteData._id)).then((function(e){if(!0===e.code){var t=Object(je.a)(a.state.data);console.log(t);var n=t.find((function(e){return e._id===a.state.currentDeleteData._id})),r=t.indexOf(n);t.splice(r,1),a.setState({data:t}),a.closeDialog(),a.snackOpen("Successfully Deleted!","success")}else a.snackOpen("Oops, something went wrong while processing your request!","error")}))},a.onEdit=function(e){a.openForm(e)},a.state={columns:[{field:"_id",hidden:!0},{title:"Machine Group",field:"MachGrp",render:function(e){return r.a.createElement("span",null,void 0===e.MachGrp?"":e.MachGrp.MachGrpName)}},{title:"Machine Name",field:"MachName"},{title:"Abbreviation",field:"MachAbvr"},{title:"Description",field:"MachDesc"},{title:"Remarks",field:"MachRemarks"},{title:"Inactive",field:"MachInactive",render:function(e){return r.a.createElement("span",null,e.MachInactive?"Yes":"No")}},{title:"Operator",field:"MachLastUpdatedBy"},{title:"Last Updated",field:"MachLastUpdatedAt",render:function(e){return r.a.createElement("span",null,void 0===e?"":new Date(e.MachLastUpdatedAt).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}))}}],data:[],currentDeleteData:null,newData:pr,formOpen:!1,dialogOpen:!1,dialogMessage:"",disabled:!1,actionStatus:"",formState:{valid:!0,dirty:!1,errors:[]},operator:"Admin"},a.dialogOpen=a.dialogOpen.bind(Object(Pe.a)(a)),a.closeDialog=a.closeDialog.bind(Object(Pe.a)(a)),a.openForm=a.openForm.bind(Object(Pe.a)(a)),a.closeForm=a.closeForm.bind(Object(Pe.a)(a)),a.snackOpen=a.snackOpen.bind(Object(Pe.a)(a)),a.snackClose=a.snackClose.bind(Object(Pe.a)(a)),a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initMachine()}},{key:"initMachine",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.awrap(ur.get("").then((function(t){!0===t.code&&e.setState({data:t.data})})));case 2:case"end":return t.stop()}}))}},{key:"handleChange",value:function(e,t){var a=this.state.newData;a[t]=e;var n=this.state.formState;n.valid=!0,this.setState({newData:a,formState:n})}},{key:"snackOpen",value:function(e,t){this.setState({alertOpen:!0,alertMessage:e,alertClass:t})}},{key:"snackClose",value:function(){this.setState({alertOpen:!1,alertMessage:"",alertClass:"",currentDeleteData:null})}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{style:{margin:"20px 20px 10px 0px"}},r.a.createElement(Ve.a,{title:"Machine ",columns:this.state.columns,data:this.state.data,components:{Toolbar:function(t){return r.a.createElement("div",null,r.a.createElement(Le.MTableToolbar,t),r.a.createElement("div",{style:{padding:"0px 15px"}},r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:function(){return e.openForm()},"aria-label":"add"},r.a.createElement(wt.a,null))))}},actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.data,columns:e.state.columns,fileName:"Machine"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.initMachine()}},{icon:"edit",tooltip:"Edit",onClick:function(t,a){return e.openForm(a)}},{icon:"delete",tooltip:"Delete",onClick:function(t,a){return e.dialogOpen(a)}}],options:{}}),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:6e3,open:this.state.alertOpen,onClose:this.snackClose,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}),r.a.createElement(Ae.a,{fullScreen:!0,open:this.state.formOpen,onClose:this.closeForm,TransitionComponent:this.Transition},r.a.createElement(w.a,{className:"appBar"},r.a.createElement(F.a,null,r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:this.closeForm,"aria-label":"close"},r.a.createElement(Vt.a,null)),r.a.createElement(x.a,{variant:"h6",className:"app-title"},"Machine Details"),r.a.createElement(he.a,{color:"inherit",disabled:this.state.disabled,onClick:this.onSave},"save"))),r.a.createElement(_e.a,null,r.a.createElement(mr,{handleChange:this.handleChange,formData:this.state.newData,formState:this.state.formState}))),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.closeDialog,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.closeDialog,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDelete,color:"primary"},"Delete"))))}}]),t}(r.a.Component)),vr={properties:{BRName:{description:"",type:"string",required:!0,allowEmpty:!1,messages:{required:"Breakdown reason cannot be empty",allowEmpty:"Breakdown reason cannot be empty"}},BRCat:{description:"",type:["object","string"],required:!0,allowEmpty:!1,messages:{required:"Category cannot be empty.",allowEmpty:"Category cannot be empty."}},BRRemarks:{description:"",type:"string"},BRInactive:{description:"",type:"boolean"}}},Cr=a(24),Dr={validateFields:function(e){return Cr.validate(e,vr,{cast:!0})},get:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="breakdownReason/"+e,a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 2:case"end":return a.stop()}}))},getToolFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("breakdownReason-filter/").concat(e),a.next=3,l.a.awrap(We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 3:return a.abrupt("return",a.sent);case 4:case"end":return a.stop()}}))},update:function(e,t){return Qe("breakdownReason/"+e,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,message:"Successfully Updated",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="breakdownReason/"+e,n.abrupt("return",He(a,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,message:"Successfully Added",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,formValid:!0,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("breakdownReason/"+e).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))}},Er=(a(812),{properties:{Code:{type:"string",required:!0,allowEmpty:!1,messages:{allowEmpty:"Activities code cannot be empty."}},Name:{type:"string",required:!0,allowEmpty:!1,messages:{allowEmpty:"Activities name cannot be empty."}},Description:{description:"",type:"string"},CreatedAt:{type:"any",default:new Date},CreatedBy:{type:"string",default:""},LastUpdatedAt:{type:"any",default:new Date},LastUpdatedBy:{type:"string",default:""}}}),br=a(24),Sr={validateFields:function(e){return br.validate(e,Er,{cast:!0})},get:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="maintenanceActivity/"+e,a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},getFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("maintenanceActivity-filter/").concat(e),a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},getOne:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("maintenanceActivity/").concat(e),a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},update:function(e,t){return Qe("maintenanceActivity/"+e,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Updated",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="maintenanceActivity/"+e,n.abrupt("return",He(a,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Added",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,formValid:!0,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("maintenanceActivity/"+e).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))}},Or=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={maintenanceActivityData:[]},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initMaintenanceActivityData(this.props.selectedFactory)}},{key:"initMaintenanceActivityData",value:function(){var e=this;Sr.getFilter("?Inactive=false").then((function(t){e.setState({maintenanceActivityData:t.data})}))}},{key:"renderOptions",value:function(){return this.state.maintenanceActivityData.map((function(e,t){return r.a.createElement(et.a,{label:"Select Activity",value:e._id,key:e._id,name:e.Name},e.Code,":",e.Name)}))}},{key:"handleChange",value:function(e){var t=this.state.maintenanceActivityData.find((function(t){return t._id===e.target.value}));void 0!==t?this.props.handleChange(t,this.props.propertyName,this.props.required):this.props.handleChange("",this.props.propertyName,this.props.required)}},{key:"render",value:function(){var e=this;return r.a.createElement(ya.a,{style:{width:"100%"}},r.a.createElement(Ea.a,{shrink:!0,htmlFor:"SubProcess",required:!0,error:!this.props.formControl.valid},"Activity"),r.a.createElement(ba.a,{id:this.props.propertyName,value:void 0===this.props.selectedValue._id?"":this.props.selectedValue._id,style:{minWidth:140},error:!this.props.formControl.valid,onChange:function(t){return e.handleChange(t,e.props.propertyName)},margin:"dense",displayEmpty:!0},r.a.createElement(et.a,{value:""},r.a.createElement("em",null,"Select Activity")),this.renderOptions()),r.a.createElement(Sa.a,{error:!this.props.formControl.valid,style:{display:this.props.formControl.valid?"none":""}},this.props.formControl.valid?"":this.props.formControl.message))}}]),t}(r.a.Component),kr=a(23),wr={BRName:{valid:!0,message:"",value:""},BRCat:{valid:!0,message:"",value:""},BRRemarks:{valid:!0,message:"",value:""},BRInactive:{valid:!0,message:"",value:!1}},Fr=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(d.a)(this,Object(m.a)(t).call(this))).handleClose=function(){e.setState({open:!1,errMessage:""})},e.handleClickDelClose=function(){e.setState({dialogOpen:!1,currentDeleteData:null})},e.state={formControls:kr(wr),columns:[{field:"_id",hidden:!0},{title:"Breakdown Reason",field:"BRName",editComponent:function(t){return r.a.createElement(ge.a,{autoFocus:!0,required:!0,margin:"dense",id:"BRName",label:"Breakdown Reason",error:!e.state.formControls.BRName.valid,helperText:e.state.formControls.BRName.message,type:"text",defaultValue:t.rowData.BRName,onChange:function(a){e.onChange(a.target.value.trim(),"BRName",t.rowData)}})}},{title:"Category",field:"BRCat",render:function(e){return r.a.createElement("span",null,e.BRCat.Name)},editComponent:function(t){return r.a.createElement(Or,{handleChange:function(a){return e.onChange(a,"BRCat",t.rowData)},selectedValue:void 0===t.rowData.BRCat?"":t.rowData.BRCat,formControl:e.state.formControls.BRCat,propertyName:"BRCat"})}},{title:"Description",field:"BRRemarks",editComponent:function(t){return r.a.createElement(ge.a,{margin:"dense",id:"remarks",label:"Remarks",type:"text",defaultValue:t.rowData.BRRemarks,onChange:function(a){e.onChange(a.target.value,"BRRemarks",t.rowData)}})}},{title:"Inactive",field:"BRInactive",type:"boolean",render:function(e){return r.a.createElement("span",null,e.BRInactive?"Yes":"No")},editComponent:function(t){return r.a.createElement(Xe.a,{checked:t.rowData.BRInactive,onChange:function(a){e.onChange(a.target.checked,"BRInactive",t.rowData)},value:t.value,inputProps:{"aria-label":"secondary checkbox"},color:"primary"})}},{title:"Operator",field:"BRLastUpdatedBy",editable:"never"},{title:"Last Updated",field:"BRLastUpdatedAt",render:function(e){return r.a.createElement("span",null,void 0===e?"":new Date(e.BRLastUpdatedAt).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}))},editable:"never"}],data:[],formState:{valid:!0,errors:[]},dialogOpen:!1,currentDeleteData:null,deleteMessage:"",alertClass:"",alertOpen:!1,alertMessage:"",initBreakdownCategoryData:[],operator:"Admin"},e.handleClickDelClose=e.handleClickDelClose.bind(Object(Pe.a)(e)),e.handleClickDelOpen=e.handleClickDelOpen.bind(Object(Pe.a)(e)),e.OnDelete=e.OnDelete.bind(Object(Pe.a)(e)),e.snackOpen=e.snackOpen.bind(Object(Pe.a)(e)),e.snackClose=e.snackClose.bind(Object(Pe.a)(e)),e.onChange=e.onChange.bind(Object(Pe.a)(e)),e}return Object(p.a)(t,e),Object(u.a)(t,[{key:"snackOpen",value:function(e,t){this.setState({alertOpen:!0,alertMessage:e,alertClass:t})}},{key:"snackClose",value:function(){this.setState({alertOpen:!1,alertMessage:"",alertClass:""})}},{key:"componentDidMount",value:function(){this.initBreakdownReason()}},{key:"initFormControl",value:function(){this.setState({formControls:kr(wr)})}},{key:"onChange",value:function(e,t,a){var n=this.state.formControls;""===e||null===e||void 0===e?(n[t].valid=!1,n[t].message="".concat(t," cannot be empty")):(n[t].valid=!0,n[t].message="",n[t].value=e),a[t]=e,this.setState({formControls:n})}},{key:"handleClickDelOpen",value:function(e,t){this.setState({dialogOpen:!0,currentDeleteData:t,dialogMessage:r.a.createElement("span",null,"Are you sure to delete this record ",r.a.createElement("b",null,t.BRName)," ? This cannot be undone.")})}},{key:"OnDelete",value:function(){var e=this;null!==this.state.currentDeleteData?Dr.delete("".concat(this.state.currentDeleteData._id)).then((function(t){if(!0===t.code){var a=Object(je.a)(e.state.data),n=a.indexOf(e.state.currentDeleteData);a.splice(n,1),e.snackOpen("Successfully Deleted!","success"),e.handleClickDelClose(),e.setState({data:a})}else e.snackOpen("Oops, something went wrong while processing your request!","error")})):this.snackOpen("Please try again later!","info")}},{key:"initBreakdownReason",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.awrap(Dr.get("").then((function(t){!0===t.code&&e.setState({data:t.data})})));case 2:case"end":return t.stop()}}))}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{style:{margin:"20px 20px 10px 0px"}},r.a.createElement(Ve.a,{title:"Machine Breakdown Reason",columns:this.state.columns,data:this.state.data,editable:{onRowAdd:function(t){return new Promise((function(a,n){setTimeout((function(){var r=Object(je.a)(e.state.data),o=e.state.formControls,s=Dr.validateFields(t);s.valid?Dr.add("",t).then((function(t){!0===t.code?(r.push(t.data),e.snackOpen("Successfully added!","success"),e.setState({data:r},(function(){return a()}))):(n(),t.errors.map((function(e){o[e.property].valid=!1,o[e.property].message=e.message})),e.setState({formControls:o}),e.snackOpen("Please fix the error(s) highlighted to save the details!","error"))})).catch((function(t){n(),e.snackOpen("Oops, something went wrong while processing your request!","error")})):(n(),s.errors.map((function(e){o[e.property].valid=!1,o[e.property].message=e.message})),e.setState({formControls:o}))}),1e3)}))},onRowUpdate:function(t,a){return new Promise((function(n,r){setTimeout((function(){var o=Object(je.a)(e.state.data),s=Object(me.a)({},e.state.formControls),i=Dr.validateFields(t);i.valid?Dr.update("",t).then((function(t){if(!0===t.code){var i=o.indexOf(a);o[i]=t.data,e.setState({data:o},(function(){return n()})),e.snackOpen("Successfully updated!","success")}else r(),t.errors.map((function(e){return s[e.property].valid=!1,s[e.property].message=e.message,s})),e.setState({formControls:s}),e.snackOpen("Please fix the error(s) highlighted to save the details!","error")})).catch((function(t){r(),e.snackOpen("Oops, something went wrong while processing your request!","error")})):(r(),i.errors.map((function(e){s[e.property].valid=!1,s[e.property].message=e.message})),e.setState({formControls:s}))}),1e3)}))}},actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.data,columns:e.state.columns,fileName:"Breakdown Reason"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.initBreakdownReason()}},{icon:"delete",tooltip:"Delete",onClick:function(t,a){return e.handleClickDelOpen(t,a)}}],icons:{Clear:function(t){return r.a.createElement(Nt.a,{onClick:function(){e.initFormControl()},style:{padding:0,margin:0}})}},options:{}}),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:6e3,open:this.state.alertOpen,onClose:this.snackClose,message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.handleClickDelClose,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.handleClickDelClose,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:function(){return e.OnDelete()},color:"primary"},"Delete"))))}}]),t}(r.a.Component),xr={properties:{STDEffCountry:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Country cannot be empty."}}}},Tr=a(24),Nr={validateFields:function(e){return Tr.validate(e,xr,{cast:!0})},get:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="stdEffluent/"+e,a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 2:case"end":return a.stop()}}))},getToolFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("stdEffluent-filter/").concat(e),a.next=3,l.a.awrap(We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 3:return a.abrupt("return",a.sent);case 4:case"end":return a.stop()}}))},update:function(e,t){return Qe("stdEffluent/"+e,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Product grade updated successfully.",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="stdEffluent/"+e,n.abrupt("return",He(a,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,message:"Product grade added successfully.",data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("stdEffluent/"+e).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e}))}},jr=function(e){var t=e.inputRef,a=e.onChange,n=e.className,o=e.onFocus,s=e.defaultValue;return r.a.createElement(Xa.a,{className:n,getInputRef:t,onValueChange:function(e){a({target:{value:e.value}})},defaultValue:s,onFocus:o,decimalScale:2,fixedDecimalScale:!0})},Pr=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={formControls:{STDEffCountry:{valid:!0,message:"",value:void 0===a.props.formData.STDEffCountry||""===a.props.formData.STDEffCountry?"":a.props.formData.STDEffCountry._id},STDEffSTDpHMin:{valid:!0,message:"",value:a.props.formData.STDEffSTDpHMin},STDEffSTDpHMax:{valid:!0,message:"",value:a.props.formData.STDEffSTDpHMax},STDEffSTDBOD:{valid:!0,message:"",value:a.props.formData.STDEffSTDBOD},STDEffSTDCOD:{valid:!0,message:"",value:a.props.formData.STDEffSTDCOD},STDEffSTDTSS:{valid:!0,message:"",value:a.props.formData.STDEffSTDTSS},STDEffSTDNH3N:{valid:!0,message:"",value:a.props.formData.STDEffSTDNH3N},STDEffSTDNTotal:{valid:!0,message:"",value:a.props.formData.STDEffSTDNTotal},STDEffSTDPhosphor:{valid:!0,message:"",value:a.props.formData.STDEffSTDPhosphor},STDEffRemarks:{valid:!0,message:"",value:a.props.formData.STDEffRemarks}},formState:{valid:!0,dirty:!1,errors:[]}},a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"handleChange",value:function(e,t){var a=this.state.formControls,n=this.state.formState;void 0===e||0===e?(a[t].valid=!1,a[t].message="".concat(t," cannot be empty.")):(a[t].valid=!0,a[t].message=""),this.props.handleChange(e,t),a[t].value=e,n.dirty=!0,this.setState({formControls:a,formState:n})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"form-container"},r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-evenly",alignItems:"center",md:6,xs:12,sm:12,xl:8,lg:8},r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(Ba,{handleChange:this.handleChange,selectedValue:this.state.formControls.STDEffCountry.value,formControl:this.state.formControls.STDEffCountry,propertyName:"STDEffCountry"})),r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(ge.a,{id:"STDEffSTDpHMin",label:"Std pH Min.",type:"number",defaultValue:this.state.formControls.STDEffSTDpHMin.value,onChange:function(t){return e.handleChange(t.target.value,"STDEffSTDpHMin")},onFocus:function(e){e.target.select()},InputProps:{inputComponent:jr}})),r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(ge.a,{id:"STDEffSTDpHMax",label:"Std pH Max.",type:"number",defaultValue:this.state.formControls.STDEffSTDpHMax.value,onChange:function(t){return e.handleChange(t.target.value,"STDEffSTDpHMax")},onFocus:function(e){e.target.select()},InputProps:{inputComponent:jr}})),r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(ge.a,{id:"STDEffSTDBOD",label:"Std BOD (ppm (mg/L))",type:"number",defaultValue:this.state.formControls.STDEffSTDBOD.value,onChange:function(t){return e.handleChange(t.target.value,"STDEffSTDBOD")},onFocus:function(e){e.target.select()},InputProps:{inputComponent:jr}})),r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(ge.a,{id:"STDEffSTDCOD",label:"Std COD (ppm (mg/L))",type:"number",defaultValue:this.state.formControls.STDEffSTDCOD.value,onChange:function(t){return e.handleChange(t.target.value,"STDEffSTDCOD")},onFocus:function(e){e.target.select()},InputProps:{inputComponent:jr}})),r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(ge.a,{id:"STDEffSTDTSS",label:"Std TSS (ppm (mg/L))",type:"number",defaultValue:this.state.formControls.STDEffSTDTSS.value,onChange:function(t){return e.handleChange(t.target.value,"STDEffSTDTSS")},onFocus:function(e){e.target.select()},InputProps:{inputComponent:jr}})),r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(ge.a,{id:"STDEffSTDNH3N",label:"Std NH3-N (ppm (mg/L))",type:"number",defaultValue:this.state.formControls.STDEffSTDNH3N.value,onChange:function(t){return e.handleChange(t.target.value,"STDEffSTDNH3N")},onFocus:function(e){e.target.select()},InputProps:{inputComponent:jr}})),r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(ge.a,{id:"STDEffSTDNTotal",label:"Std N-Total (ppm (mg/L))",type:"number",defaultValue:this.state.formControls.STDEffSTDNTotal.value,onChange:function(t){return e.handleChange(t.target.value,"STDEffSTDNTotal")},onFocus:function(e){e.target.select()},InputProps:{inputComponent:jr}})),r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(ge.a,{id:"STDEffSTDPhosphor",label:"Std Phosphorus (ppm (mg/L))",type:"number",defaultValue:this.state.formControls.STDEffSTDPhosphor.value,onChange:function(t){return e.handleChange(t.target.value,"STDEffSTDPhosphor")},onFocus:function(e){e.target.select()},InputProps:{inputComponent:jr}})),r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(ge.a,{id:"STDEffRemarks",label:"Remarks",defaultValue:this.state.formControls.STDEffRemarks.value,onChange:function(t){return e.handleChange(t.target.value,"STDEffRemarks")},multiline:!0}))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=t.formControls;return e.formState.valid||Array.isArray(e.formState.errors)&&e.formState.errors.map((function(e){a[e.property].valid=!1,a[e.property].message=e.message})),{formState:e.formState,formControls:a}}}]),t}(r.a.Component),Ar={STDEffCountry:"",STDEffSTDpHMin:0,STDEffSTDpHMax:0,STDEffSTDBOD:0,STDEffSTDCOD:0,STDEffSTDTSS:0,STDEffSTDNH3N:0,STDEffSTDNTotal:0,STDEffSTDPhosphor:0,STDEffRemarks:"",STDEffCreatedAt:new Date(Date.now()).toLocaleString(),STDEffCreatedBy:"Admin",STDEffLastUpdatedAt:new Date(Date.now()).toLocaleString(),STDEffLastUpdatedBy:"Admin"},Mr=(Object(n.forwardRef)((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),r.a.forwardRef((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).openDialog=function(e){a.setState({dialogOpen:!0,currentDeleteData:e,dialogMessage:r.a.createElement("span",null,"Are you sure to delete this record ",r.a.createElement("b",null,e.STDEffCountry.name),"? This cannot be undone.")})},a.closeDialog=function(){a.setState({dialogOpen:!1,currentDeleteData:null,dialogMessage:""})},a.openForm=function(e){void 0===e?a.setState({actionStatus:"Add",newData:Object(me.a)({},Ar)}):a.setState({actionStatus:"Update",newData:Object(me.a)({},e)}),a.setState({formOpen:!0,formState:{valid:!0,dirty:!1,errors:[]}})},a.closeForm=function(){a.setState({formOpen:!1,newData:{},actionStatus:""})},a.onSave=function(){var e=a.state.formState,t=Object(me.a)({},a.state.newData);"object"===typeof t.STDEffCountry&&(t.STDEffCountry=t.STDEffCountry._id);var n=Nr.validateFields(t);if(a.state.formState.valid)if(n.valid){var r=Object(je.a)(a.state.data);"Add"===a.state.actionStatus?(t.STDEffLastUpdatedBy=a.state.operator,t.STDEffCreatedBy=a.state.operator,Nr.add("",t).then((function(t){!0===t.code?(e.valid=!0,r.push(t.data),a.setState({data:r}),a.closeForm(),a.snackOpen("Waste water standard created successfully!","success")):(e.valid=!1,e.errors=t.errors,a.snackOpen("Please fix the error(s) highlighted to save the details!","error"))})).catch((function(e){a.snackOpen("Oops, something went wrong while processing your request!","error")}))):(t.STDEffLastUpdatedBy=a.state.operator,Nr.update("",t).then((function(n){if(!0===n.code){e.valid=!0;var o=r.find((function(e){return e._id===t._id})),s=r.indexOf(o);r[s]=n.data,a.setState({data:r}),a.closeForm(),a.snackOpen("Waste water standard updated successfully!","success")}else e.valid=!1,e.errors=n.errors,a.snackOpen("Please fix the error(s) highlighted to save the details!","error")})).catch((function(e){a.snackOpen("Oops, something went wrong while processing your request!","error")})))}else{e.valid=!1;var o=n.errors.map((function(e){var t={};return t.property=e.property,t.message=e.message,t}));e.errors=o,a.snackOpen("Please fix the error(s) highlighted to save the details!","error")}a.setState({formState:e})},a.onDelete=function(){null!==a.state.currentDeleteData&&Nr.delete("".concat(a.state.currentDeleteData._id)).then((function(e){if(!0===e.code){var t=Object(je.a)(a.state.data),n=t.indexOf(a.state.currentDeleteData);t.splice(n,1),a.setState({data:t}),a.closeDialog(),a.snackOpen("Successfully Deleted!","success")}else a.snackOpen("Oops, something went wrong while processing your request!","error")}))},a.onEdit=function(e){a.openForm(e)},a.state={columns:[{field:"_id",hidden:!0},{title:"Country",field:"STDEffCountry",render:function(e){return r.a.createElement("span",null,void 0===e.STDEffCountry?"":e.STDEffCountry.name)}},{title:"Std pH Min.",field:"STDEffSTDpHMin",render:function(e){return r.a.createElement(Xa.a,{value:e.STDEffSTDpHMin,displayType:"text",decimalScale:2,fixedDecimalScale:!0})}},{title:"Std pH Max.",field:"STDEffSTDpHMax",render:function(e){return r.a.createElement(Xa.a,{value:e.STDEffSTDpHMax,displayType:"text",decimalScale:2,fixedDecimalScale:!0})}},{title:"Std BOD",field:"STDEffSTDBOD",render:function(e){return r.a.createElement(Xa.a,{value:e.STDEffSTDBOD,displayType:"text",decimalScale:2,fixedDecimalScale:!0})}},{title:"Std COD",field:"STDEffSTDCOD",render:function(e){return r.a.createElement(Xa.a,{value:e.STDEffSTDCOD,displayType:"text",decimalScale:2,fixedDecimalScale:!0})}},{title:"Std TSS",field:"STDEffSTDTSS",render:function(e){return r.a.createElement(Xa.a,{value:e.STDEffSTDTSS,displayType:"text",decimalScale:2,fixedDecimalScale:!0})}},{title:"Std NH3-N",field:"STDEffSTDNH3N",render:function(e){return r.a.createElement(Xa.a,{value:e.STDEffSTDNH3N,displayType:"text",decimalScale:2,fixedDecimalScale:!0})}},{title:"Std N-Total",field:"STDEffSTDNTotal",render:function(e){return r.a.createElement(Xa.a,{value:e.STDEffSTDNTotal,displayType:"text",decimalScale:2,fixedDecimalScale:!0})}},{title:"Std Phosphor",field:"STDEffSTDPhosphor",render:function(e){return r.a.createElement(Xa.a,{value:e.STDEffSTDNTotal,displayType:"text",decimalScale:2,fixedDecimalScale:!0})}},{title:"Remarks",field:"STDEffRemarks"},{title:"Operator",field:"STDEffLastUpdatedBy"},{title:"Last Updated",field:"STDEffLastUpdatedAt",render:function(e){return r.a.createElement("span",null,void 0===e?"":new Date(e.STDEffLastUpdatedAt).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}))}}],data:[],currentDeleteData:null,newData:Ar,formOpen:!1,dialogOpen:!1,dialogMessage:"",disabled:!1,actionStatus:"",formState:{valid:!0,dirty:!1,errors:[]},operator:"Admin"},a.openDialog=a.openDialog.bind(Object(Pe.a)(a)),a.closeDialog=a.closeDialog.bind(Object(Pe.a)(a)),a.openForm=a.openForm.bind(Object(Pe.a)(a)),a.closeForm=a.closeForm.bind(Object(Pe.a)(a)),a.snackOpen=a.snackOpen.bind(Object(Pe.a)(a)),a.snackClose=a.snackClose.bind(Object(Pe.a)(a)),a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initSTDEffluent()}},{key:"initSTDEffluent",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.awrap(Nr.get("").then((function(t){!0===t.code&&e.setState({data:t.data})})));case 2:case"end":return t.stop()}}))}},{key:"handleChange",value:function(e,t){var a=this.state.newData;a[t]=e;var n=this.state.formState;if(n.valid=!0,"STDEffCountry"===t){var r=this.state.data.find((function(t){return t.STDEffCountry._id===e}));void 0!==r&&r._id!==a._id&&(n.errors.push({property:"STDEffCountry",message:"Waste water standard for country ".concat(r.STDEffCountry.name," already exists.")}),n.valid=!1,this.snackOpen("Please fix the error(s) highlighted to save the details!","error"))}this.setState({newData:a,formState:n})}},{key:"snackOpen",value:function(e,t){this.setState({alertOpen:!0,alertMessage:e,alertClass:t})}},{key:"snackClose",value:function(){this.setState({alertOpen:!1,alertMessage:"",alertClass:"",currentDeleteData:null})}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{style:{margin:"20px 20px 10px 0px"}},r.a.createElement(Ve.a,{title:"Waste water standard",columns:this.state.columns,data:this.state.data,components:{Toolbar:function(t){return r.a.createElement("div",null,r.a.createElement(Le.MTableToolbar,t),r.a.createElement("div",{style:{padding:"0px 15px"}},r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:function(){return e.openForm()},"aria-label":"add"},r.a.createElement(wt.a,null))))}},actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.data,columns:e.state.columns,fileName:"Waste Water Standard"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.initSTDEffluent()}},{icon:"edit",tooltip:"Edit",onClick:function(t,a){return e.openForm(a)}},{icon:"delete",tooltip:"Delete",onClick:function(t,a){return e.openDialog(a)}}],options:{}}),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:6e3,open:this.state.alertOpen,onClose:this.snackClose,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}),r.a.createElement(Ae.a,{fullScreen:!0,open:this.state.formOpen,onClose:this.closeForm,TransitionComponent:this.Transition},r.a.createElement(w.a,{className:"appBar"},r.a.createElement(F.a,null,r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:this.closeForm,"aria-label":"close"},r.a.createElement(Vt.a,null)),r.a.createElement(x.a,{variant:"h6",className:"app-title"},"Waste Water Details"),r.a.createElement(he.a,{color:"inherit",disabled:this.state.disabled,onClick:this.onSave},"save"))),r.a.createElement(_e.a,null,r.a.createElement(Pr,{handleChange:this.handleChange,formData:this.state.newData,formState:this.state.formState}))),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.closeDialog,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.closeDialog,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDelete,color:"primary"},"Delete"))))}}]),t}(r.a.Component)),_r={properties:{EnergyName:{description:"",type:"string",required:!0,allowEmpty:!1,messages:{required:"Energy name cannot be empty",allowEmpty:"Energy name cannot be empty"}},EnergyGroup:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{required:"Group cannot be empty",allowEmpty:"Group cannot be empty"}},EnergyFuelUnit:{description:"",type:"string",required:!0,allowEmpty:!1,messages:{required:"Fuel unit cannot be empty",allowEmpty:"Fuel unit cannot be empty"}},EnergyConst:{description:"",type:"number"},EnergyRemarks:{description:"",type:"string"},EnergyInactive:{description:"",type:"boolean"}}},Ir=a(24),Rr={validateFields:function(e){return Ir.validate(e,_r,{cast:!0})},get:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="energyStd/"+e,a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 2:case"end":return a.stop()}}))},getToolFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("energyStd-filter/").concat(e),a.next=3,l.a.awrap(We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 3:return a.abrupt("return",a.sent);case 4:case"end":return a.stop()}}))},update:function(e,t){return Qe("energyStd/"+e,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,message:"Successfully Updated",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="energyStd/"+e,n.abrupt("return",He(a,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,message:"Successfully Added",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,formValid:!0,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("energyStd/"+e).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))}},Lr={get:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="energyCat/"+e,a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 2:case"end":return a.stop()}}))},getToolFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("energyCat-filter/").concat(e),a.next=3,l.a.awrap(We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 3:return a.abrupt("return",a.sent);case 4:case"end":return a.stop()}}))}},Vr=(n.Component,function(e){var t=e.inputRef,a=e.onChange,n=e.className,o=e.onFocus,s=e.defaultValue;return r.a.createElement(Xa.a,{className:n,getInputRef:t,onValueChange:function(e){a({target:{value:e.value}})},defaultValue:s,onFocus:o,decimalScale:2,fixedDecimalScale:!0,thousandSeparator:!0})}),Br=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(d.a)(this,Object(m.a)(t).call(this))).handleClose=function(){e.setState({open:!1,errMessage:""})},e.handleClickDelClose=function(){e.setState({dialogOpen:!1,currentDeleteData:null})},e.state={formControls:{EnergyGroup:{valid:!0,message:"",value:""},EnergyName:{valid:!0,message:"",value:""},EnergyFuelUnit:{valid:!0,message:"",value:""},EnergyConst:{valid:!0,message:"",value:0},EnergyRemarks:{valid:!0,message:"",value:""},EnergyInactive:{valid:!0,message:"",value:!1}},columns:[{field:"_id",hidden:!0},{title:"Energy Group",field:"EnergyGroup",render:function(e){return r.a.createElement("span",null,e.EnergyGroup.Name)},editComponent:function(t){return r.a.createElement(xa,{jsonFileName:"energyGroup",jsonPropertyName:"EnergyGroup",formControl:e.state.formControls.EnergyGroup,propertyName:"EnergyGroup",required:!0,label:"Energy Group",handleChange:function(a){return e.onChange(a,t.rowData,"EnergyGroup")},selectedValue:e.state.formControls.EnergyGroup.value.Value})}},{title:"Energy Name",field:"EnergyName",editComponent:function(t){return r.a.createElement(ge.a,{required:!0,margin:"dense",id:"EnergyName",label:"Energy Name",error:!e.state.formControls.EnergyName.valid,helperText:e.state.formControls.EnergyName.message,type:"text",defaultValue:t.rowData.EnergyName,onChange:function(a){e.onChange(a.target.value.trim(),t.rowData,"EnergyName")}})}},{title:"Unit",field:"EnergyFuelUnit",editComponent:function(t){return r.a.createElement(ge.a,{required:!0,margin:"dense",id:"EnergyFuelUnit",label:"Unit",error:!e.state.formControls.EnergyFuelUnit.valid,helperText:e.state.formControls.EnergyFuelUnit.message,type:"text",defaultValue:t.rowData.EnergyFuelUnit,onChange:function(a){e.onChange(a.target.value.trim(),t.rowData,"EnergyFuelUnit")}})}},{title:"Conversion Constant",field:"EnergyConst",editComponent:function(t){return r.a.createElement(ge.a,{margin:"dense",id:"EnergyConst",label:"Conversion Constant",error:!e.state.formControls.EnergyConst.valid,helperText:e.state.formControls.EnergyConst.message,type:"number",defaultValue:t.rowData.EnergyConst,onChange:function(a){e.onChange(a.target.value,t.rowData,"EnergyConst")},InputProps:{inputComponent:Vr}})},render:function(e){return r.a.createElement(Xa.a,{value:e.EnergyConst,displayType:"text",decimalScale:2,fixedDecimalScale:!0})}},{title:"Unit",emptyValue:"KCal",editable:"never"},{title:"Remarks",field:"EnergyRemarks",editComponent:function(t){return r.a.createElement(ge.a,{margin:"dense",id:"remarks",label:"Remarks",type:"text",defaultValue:t.rowData.EnergyRemarks,onChange:function(a){e.onChange(a.target.value,t.rowData,"EnergyRemarks")}})}},{title:"Inactive",field:"EnergyInactive",type:"boolean",render:function(e){return r.a.createElement("span",null,e.EnergyInactive?"Yes":"No")},editComponent:function(t){return r.a.createElement(Xe.a,{checked:t.rowData.EnergyInactive,onChange:function(a){e.onChange(a.target.checked,t.rowData,"EnergyInactive")},value:t.value,inputProps:{"aria-label":"secondary checkbox"},color:"primary"})}},{title:"Operator",field:"EnergyLastUpdatedBy",editable:"never"},{title:"Last Updated",field:"EnergyLastUpdatedAt",render:function(e){return r.a.createElement("span",null,void 0===e?"":new Date(e.EnergyLastUpdatedAt).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}))},editable:"never"}],data:[],formState:{valid:!0,errors:[]},dialogOpen:!1,currentDeleteData:null,deleteMessage:"",alertClass:"",alertOpen:!1,alertMessage:"",operator:"Admin"},e.handleClickDelClose=e.handleClickDelClose.bind(Object(Pe.a)(e)),e.handleClickDelOpen=e.handleClickDelOpen.bind(Object(Pe.a)(e)),e.OnDelete=e.OnDelete.bind(Object(Pe.a)(e)),e.snackOpen=e.snackOpen.bind(Object(Pe.a)(e)),e.snackClose=e.snackClose.bind(Object(Pe.a)(e)),e.onChange=e.onChange.bind(Object(Pe.a)(e)),e}return Object(p.a)(t,e),Object(u.a)(t,[{key:"snackOpen",value:function(e,t){this.setState({alertOpen:!0,alertMessage:e,alertClass:t})}},{key:"snackClose",value:function(){this.setState({alertOpen:!1,alertMessage:"",alertClass:""})}},{key:"componentDidMount",value:function(){this.initEnergyStd()}},{key:"onChange",value:function(e,t,a){var n=this.state.formControls;""===e||null===e||void 0===e?(n[a].valid=!1,n[a].message="".concat(a," cannot be empty")):(n[a].valid=!0,n[a].message="",n[a].value=e),t[a]=e,this.setState({formControls:n})}},{key:"handleClickDelOpen",value:function(e,t){this.setState({dialogOpen:!0,currentDeleteData:t,dialogMessage:r.a.createElement("span",null,"Are you sure to delete this record ",r.a.createElement("b",null,t.EnergyName)," ? This cannot be undone.")})}},{key:"OnDelete",value:function(){var e=this;null!==this.state.currentDeleteData?Rr.delete("".concat(this.state.currentDeleteData._id)).then((function(t){if(!0===t.code){var a=Object(je.a)(e.state.data),n=a.indexOf(e.state.currentDeleteData);a.splice(n,1),e.snackOpen("Successfully Deleted!","success"),e.handleClickDelClose(),e.setState({data:a})}else e.snackOpen("Oops, something went wrong while processing your request!","error")})):this.snackOpen("Please try again later!","info")}},{key:"initEnergyStd",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.awrap(Rr.get("").then((function(t){!0===t.code&&e.setState({data:t.data})})));case 2:case"end":return t.stop()}}))}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{style:{margin:"20px 20px 10px 0px"}},r.a.createElement(Ve.a,{title:"Standard Energy Conversion",columns:this.state.columns,data:this.state.data,editable:{onRowAdd:function(t){return new Promise((function(a,n){setTimeout((function(){var r=Object(je.a)(e.state.data),o=e.state.formControls,s=Rr.validateFields(t);s.valid?Rr.add("",t).then((function(t){!0===t.code?(r.push(t.data),e.snackOpen("Successfully added!","success"),e.setState({data:r},(function(){return a()}))):(n(),t.errors.map((function(e){o[e.property].valid=!1,o[e.property].message=e.message})),e.setState({formControls:o}),e.snackOpen("Please fix the error(s) highlighted to save the details!","error"))})).catch((function(t){n(),e.snackOpen("Oops, something went wrong while processing your request!","error")})):(n(),s.errors.map((function(e){o[e.property].valid=!1,o[e.property].message=e.message})),e.setState({formControls:o}))}),1e3)}))},onRowUpdate:function(t,a){return new Promise((function(n,r){setTimeout((function(){var o=Object(je.a)(e.state.data),s=Object(me.a)({},e.state.formControls),i=Rr.validateFields(t);i.valid?Rr.update("",t).then((function(t){if(!0===t.code){var i=o.indexOf(a);o[i]=t.data,e.snackOpen("Successfully updated!","success"),e.setState({data:o},(function(){return n()}))}else r(),t.errors.map((function(e){return s[e.property].valid=!1,s[e.property].message=e.message,s})),e.setState({formControls:s}),e.snackOpen("Please fix the error(s) highlighted to save the details!","error")})).catch((function(t){r(),e.snackOpen("Oops, something went wrong while processing your request!","error")})):(r(),i.errors.map((function(e){s[e.property].valid=!1,s[e.property].message=e.message})),e.setState({formControls:s}))}),1e3)}))}},actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.data,columns:e.state.columns,fileName:"Energy Conversion"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.initEnergyStd()}},{icon:"delete",tooltip:"Delete",onClick:function(t,a){return e.handleClickDelOpen(t,a)}}],options:{}}),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:6e3,open:this.state.alertOpen,onClose:this.snackClose,message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.handleClickDelClose,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.handleClickDelClose,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:function(){return e.OnDelete()},color:"primary"},"Delete"))))}}]),t}(r.a.Component),Ur={properties:{MachLstFcty:{description:"",type:"string",required:!0,allowEmpty:!1,messages:{allowEmpty:"Factory cannot be empty."}},MachLstMachine:{description:"",type:"string",required:!0,allowEmpty:!1,messages:{allowEmpty:"Machine name cannot be empty."}},MachLstCode:{description:"",type:"string",required:!0,allowEmpty:!1,messages:{allowEmpty:"Machine code cannot be empty."}},MachLstClass:{description:"",type:"string",required:!0,allowEmpty:!1,messages:{allowEmpty:"Machine class cannot be empty."}},MachLstInactive:{description:"",type:"boolean"}}},qr=a(24),Gr={validateFields:function(e){return qr.validate(e,Ur,{cast:!0})},get:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="machineList/"+e,a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 2:case"end":return a.stop()}}))},getToolFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("machineList-filter/").concat(e),a.next=3,l.a.awrap(We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 3:return a.abrupt("return",a.sent);case 4:case"end":return a.stop()}}))},update:function(e,t){return Qe("machineList/"+e,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Machine updated successfully.",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,errors:e.data.errors,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="machineList/"+e,n.abrupt("return",He(a,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,message:"Machine added successfully.",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("machineList/"+e).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))},getByFctyAndMachAbvrs:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("machineList-filter/").concat(e),a.next=3,l.a.awrap(We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 3:return a.abrupt("return",a.sent);case 4:case"end":return a.stop()}}))}},Wr=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={machineData:[],data:[]},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidUpdate",value:function(e,t,a){this.props.machineGrp!==e.machineGrp&&this.fetchMachine(this.props.machineGrp)}},{key:"fetchMachine",value:function(e){var t=this.state.data.filter((function(t){return t.MachGrp._id===e}));this.setState({machineData:t})}},{key:"componentDidMount",value:function(){this.initMachine()}},{key:"initMachine",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.awrap(ur.get("").then((function(t){!0===t.code&&(e.setState({data:t.data}),""!==e.props.machineGrp&&e.fetchMachine(e.props.machineGrp))})));case 2:case"end":return t.stop()}}))}},{key:"renderOptions",value:function(){return this.state.machineData.map((function(e,t){return r.a.createElement(et.a,{label:"Select machine",value:e._id,key:e._id,name:e.MachName},r.a.createElement(E.a,{style:{width:"100%"}},r.a.createElement(b.a,{alignItems:"flex-start"},r.a.createElement(S.a,{primary:e.MachName,style:{width:"50%"}}),r.a.createElement(S.a,{primary:e.MachAbvr,style:{width:"50%"}}))))}))}},{key:"handleChange",value:function(e,t){this.props.handleChange(e.target.value,t)}},{key:"render",value:function(){var e=this;return r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Ea.a,{shrink:!0,htmlFor:"machine",required:!0,error:!this.props.formControl.valid},"Machine - Abbreviation"),r.a.createElement(ba.a,{id:this.props.propertyName,value:this.props.selectedValue,error:!this.props.formControl.valid,onChange:function(t){return e.handleChange(t,e.props.propertyName)},displayEmpty:!0},r.a.createElement(et.a,{value:""},r.a.createElement("em",null,"Select machine ")),this.renderOptions()),r.a.createElement(Sa.a,{error:!this.props.formControl.valid,style:{display:this.props.formControl.valid?"none":""}},this.props.formControl.valid?"":this.props.formControl.message))}}]),t}(n.Component),Hr=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={factoryData:[]},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initFactory()}},{key:"initFactory",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.awrap(Qa.get("").then((function(t){!0===t.code&&e.setState({factoryData:t.data})})));case 2:case"end":return t.stop()}}))}},{key:"renderOptions",value:function(){return this.state.factoryData.map((function(e,t){return r.a.createElement(et.a,{label:"Select factory",value:e._id,key:e._id,name:e.FctyCode},r.a.createElement(E.a,{style:{width:"100%"}},r.a.createElement(b.a,{alignItems:"flex-start"},r.a.createElement(S.a,{primary:e.FctyName,style:{width:"50%"}}),r.a.createElement(S.a,{primary:e.FctyCode,style:{width:"50%"}}))))}))}},{key:"handleChange",value:function(e){var t=this.state.factoryData.find((function(t){return t._id===e.target.value}));void 0!==t?this.props.handleChange(t,this.props.propertyName,this.props.required):this.props.handleChange("",this.props.propertyName,this.props.required)}},{key:"render",value:function(){var e=this;return r.a.createElement(ya.a,{style:{width:"100%",margin:4},disabled:this.props.disabled},r.a.createElement(Ea.a,{shrink:!0,htmlFor:"factory",required:!0,error:void 0!==this.props.formControl&&!this.props.formControl.valid},"Factory - Code"),r.a.createElement(ba.a,{id:this.props.propertyName,value:void 0===this.props.selectedValue||void 0===this.props.selectedValue._id?"":this.props.selectedValue._id,style:{minWidth:190},error:void 0!==this.props.formControl&&!this.props.formControl.valid,onChange:function(t){return e.handleChange(t)},displayEmpty:!0,margin:"dense"},r.a.createElement(et.a,{value:""},r.a.createElement("em",null,"Select factory")),this.renderOptions()),void 0===this.props.formControl||this.props.formControl.valid||""===this.props.formControl.message?"":r.a.createElement(Sa.a,{error:void 0!==this.props.formControl&&!this.props.formControl.valid,style:{display:(void 0===this.props.formControl||this.props.formControl.valid,"")}},void 0===this.props.formControl||this.props.formControl.valid?"":this.props.formControl.message))}}]),t}(n.Component),Qr=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={formControls:{MachLstFcty:{valid:!0,message:"",value:void 0===a.props.formData.MachLstFcty||""===a.props.formData.MachLstFcty?"":a.props.formData.MachLstFcty._id},MachLstMachineGrp:{valid:!0,message:"",value:void 0===a.props.formData.MachLstMachine||""===a.props.formData.MachLstMachine?"":a.props.formData.MachLstMachine.MachGrp},MachLstMachine:{valid:!0,message:"",value:void 0===a.props.formData.MachLstMachine||""===a.props.formData.MachLstMachine?"":a.props.formData.MachLstMachine._id},MachLstCode:{valid:!0,message:"",value:a.props.formData.MachLstCode},MachLstClass:{valid:!0,message:"",value:a.props.formData.MachLstClass},MachLstRemarks:{valid:!0,message:"",value:a.props.formData.MachLstRemarks},MachLstInactive:{valid:!0,message:"",value:a.props.formData.MachLstInactive}},formState:{valid:!0,dirty:!1,errors:[]}},a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"handleChange",value:function(e,t){var a=this.state.formControls,n=this.state.formState;void 0===e||0===e.length?(a[t].valid=!1,a[t].message="".concat(t," cannot be empty.")):(a[t].valid=!0,a[t].message=""),this.props.handleChange(e,t),a[t].value=e,"MachLstMachineGrp"===t&&(a.MachLstMachine.valid=!0,a.MachLstMachine.message="",a.MachLstMachine.value=""),n.dirty=!0,this.setState({formControls:a,formState:n})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"form-container"},r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-evenly",alignItems:"center",md:6,xs:12,sm:12,xl:8,lg:8},r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Hr,{handleChange:this.handleChange,selectedValue:this.state.formControls.MachLstFcty.value,formControl:this.state.formControls.MachLstFcty,propertyName:"MachLstFcty"})),r.a.createElement(dr,{handleChange:this.handleChange,selectedValue:this.state.formControls.MachLstMachineGrp.value,formControl:this.state.formControls.MachLstMachineGrp,propertyName:"MachLstMachineGrp"}),r.a.createElement(Wr,{handleChange:this.handleChange,selectedValue:this.state.formControls.MachLstMachine.value,formControl:this.state.formControls.MachLstMachine,propertyName:"MachLstMachine",machineGrp:this.state.formControls.MachLstMachineGrp.value}),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(ge.a,{required:!0,id:"MachLstCode",label:"Machine Code",error:!this.state.formControls.MachLstCode.valid,helperText:this.state.formControls.MachLstCode.message,defaultValue:this.state.formControls.MachLstCode.value,onChange:function(t){return e.handleChange(t.target.value.trim(),"MachLstCode")}})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Ea.a,{shrink:!0,error:!this.state.formControls.MachLstClass.valid},"Machine Class"),r.a.createElement(ba.a,{required:!0,id:"machClass",value:this.state.formControls.MachLstClass.value,error:!this.state.formControls.MachLstClass.valid,helperText:this.state.formControls.MachLstClass.message,onChange:function(t){return e.handleChange(t.target.value,"MachLstClass")},displayEmpty:!0},r.a.createElement(et.a,{value:""},r.a.createElement("em",null,"Select class")),["High Criticality","Medium Criticality","Low Criticality"].map((function(e,t){return r.a.createElement(et.a,{label:"Select class",value:e,key:e,name:e},e)})))),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(ge.a,{id:"MachLstRemarks",label:"Remarks",defaultValue:this.state.formControls.MachLstRemarks.value,onChange:function(t){return e.handleChange(t.target.value,"MachLstRemarks")},multiline:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(ga.a,{component:"label"},"Inactive"),r.a.createElement(Xe.a,{checked:this.state.formControls.MachLstInactive.value,value:this.state.formControls.MachLstInactive.value,color:"primary",inputProps:{"aria-label":"primary checkbox"},onChange:function(t){return e.handleChange(t.target.checked,"MachLstInactive")}}))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=t.formControls;return e.formState.valid||Array.isArray(e.formState.errors)&&e.formState.errors.map((function(e){a[e.property].valid=!1,a[e.property].message=e.message})),{formState:e.formState,formControls:a}}}]),t}(r.a.Component),zr={MachLstFcty:"",MachLstMachine:"",MachLstCode:"",MachLstClass:"",MachLstRemarks:"",MachLstInactive:!1,MachLstCreatedAt:new Date(Date.now()).toLocaleString(),MachLstCreatedBy:"Admin",MachLstLastUpdatedAt:new Date(Date.now()).toLocaleString(),MachLstLastUpdatedBy:"Admin"},Yr=(Object(n.forwardRef)((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),r.a.forwardRef((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).openDialog=function(e){var t;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,l.a.awrap(ka("confirmation","delete"));case 2:t=n.sent,a.setState({dialogOpen:!0,currentDeleteData:e,dialogMessage:r.a.createElement("span",null,void 0!==t?t.replace("[Name]",e.MachLstCode):"")});case 4:case"end":return n.stop()}}))},a.closeDialog=function(){a.setState({dialogOpen:!1,currentDeleteData:null,dialogMessage:""})},a.openForm=function(e){void 0===e?a.setState({actionStatus:"Add",newData:Object(me.a)({},zr)}):a.setState({actionStatus:"Update",newData:Object(me.a)({},e)}),a.setState({formOpen:!0,formState:{valid:!0,dirty:!1,errors:[]}})},a.closeForm=function(){a.setState({formOpen:!1,newData:{},actionStatus:""})},a.onSave=function(){var e=a.state.formState,t=Object(me.a)({},a.state.newData);"object"===typeof t.MachLstFcty&&(t.MachLstFcty=t.MachLstFcty._id),"object"===typeof t.MachLstMachine&&(t.MachLstMachine=t.MachLstMachine._id);var n=Gr.validateFields(t);if(n.valid){var r=Object(je.a)(a.state.data);"Add"===a.state.actionStatus?(t.MachLstLastUpdatedBy=a.state.operator,t.MachLstCreatedBy=a.state.operator,Gr.add("",t).then((function(t){!0===t.code?(e.valid=!0,r.push(t.data),a.setState({data:r}),a.closeForm(),a.snackOpen("Factory machine created successfully!","success")):(e.valid=!1,e.errors=t.errors,a.snackOpen("Please fix the error(s) highlighted to save the details!","error"))})).catch((function(e){a.snackOpen("Oops, something went wrong while processing your request!","error")}))):(t.MachLstLastUpdatedBy=a.state.operator,Gr.update("",t).then((function(n){if(!0===n.code){e.valid=!0;var o=r.find((function(e){return e._id===t._id})),s=r.indexOf(o);r[s]=n.data,a.setState({data:r}),a.closeForm(),a.snackOpen("Factory machine updated successfully!","success")}else e.valid=!1,e.errors=n.errors,a.snackOpen("Please fix the error(s) highlighted to save the details!","error")})).catch((function(e){a.snackOpen("Oops, something went wrong while processing your request!","error")})))}else{e.valid=!1;var o=n.errors.map((function(e){var t={};return t.property=e.property,t.message=e.message,t}));e.errors=o,a.snackOpen("Please fix the error(s) highlighted to save the details!","error")}a.setState({formState:e})},a.onDelete=function(){null!==a.state.currentDeleteData&&Gr.delete("".concat(a.state.currentDeleteData._id)).then((function(e){if(!0===e.code){var t=Object(je.a)(a.state.data),n=t.find((function(e){return e._id===a.state.currentDeleteData._id})),r=t.indexOf(n);t.splice(r,1),a.setState({data:t}),a.closeDialog(),a.snackOpen("Successfully Deleted!","success")}else a.snackOpen("Oops, something went wrong while processing your request!","error")}))},a.onEdit=function(e){a.openForm(e)},a.state={columns:[{field:"_id",hidden:!0},{title:"Factory",field:"MachLstFcty",render:function(e){return r.a.createElement("span",null,void 0===e.MachLstFcty?"":e.MachLstFcty.FctyCode)}},{title:"Machine Name",field:"MachLstMachine",render:function(e){return r.a.createElement("span",null,void 0===e.MachLstMachine?"":e.MachLstMachine.MachName)}},{title:"Machine Abbreviation",field:"MachLstMachine",render:function(e){return r.a.createElement("span",null,void 0===e.MachLstMachine?"":e.MachLstMachine.MachAbvr)}},{title:"Machine Code",field:"MachLstCode"},{title:"Machine Class",field:"MachLstClass"},{title:"Description",field:"MachLstRemarks"},{title:"Inactive",field:"MachLstInactive",render:function(e){return r.a.createElement("span",null,e.MachLstInactive?"Yes":"No")}},{title:"Operator",field:"MachLstLastUpdatedBy"},{title:"Last Updated",field:"MachLstLastUpdatedAt",render:function(e){return r.a.createElement("span",null,void 0===e?"":new Date(e.MachLstLastUpdatedAt).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}))}}],data:[],currentDeleteData:null,newData:zr,formOpen:!1,dialogOpen:!1,dialogMessage:"",disabled:!1,actionStatus:"",formState:{valid:!0,dirty:!1,errors:[]},operator:"Admin"},a.openDialog=a.openDialog.bind(Object(Pe.a)(a)),a.closeDialog=a.closeDialog.bind(Object(Pe.a)(a)),a.openForm=a.openForm.bind(Object(Pe.a)(a)),a.closeForm=a.closeForm.bind(Object(Pe.a)(a)),a.snackOpen=a.snackOpen.bind(Object(Pe.a)(a)),a.snackClose=a.snackClose.bind(Object(Pe.a)(a)),a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initMachineList()}},{key:"initMachineList",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.awrap(Gr.get("").then((function(t){!0===t.code&&e.setState({data:t.data})})));case 2:case"end":return t.stop()}}))}},{key:"handleChange",value:function(e,t){var a=this.state.newData;a[t]=e,"MachLstMachineGrp"===t&&(a.MachLstMachine="");var n=this.state.formState;n.valid=!0,this.setState({newData:a,formState:n})}},{key:"snackOpen",value:function(e,t){this.setState({alertOpen:!0,alertMessage:e,alertClass:t})}},{key:"snackClose",value:function(){this.setState({alertOpen:!1,alertMessage:"",alertClass:"",currentDeleteData:null})}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{style:{margin:"20px 20px 10px 0px"}},r.a.createElement(Ve.a,{title:"Factory Machine List",columns:this.state.columns,data:this.state.data,components:{Toolbar:function(t){return r.a.createElement("div",null,r.a.createElement(Le.MTableToolbar,t),r.a.createElement("div",{style:{padding:"0px 15px"}},r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:function(){return e.openForm()},"aria-label":"add"},r.a.createElement(wt.a,null))))}},actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.data,columns:e.state.columns,fileName:"Maching List"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.initMachineList()}},{icon:"edit",tooltip:"Edit",onClick:function(t,a){return e.openForm(a)}},{icon:"delete",tooltip:"Delete",onClick:function(t,a){return e.openDialog(a)}}],options:{}}),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:6e3,open:this.state.alertOpen,onClose:this.snackClose,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}),r.a.createElement(Ae.a,{fullScreen:!0,open:this.state.formOpen,onClose:this.closeForm,TransitionComponent:this.Transition},r.a.createElement(w.a,{className:"appBar"},r.a.createElement(F.a,null,r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:this.closeForm,"aria-label":"close"},r.a.createElement(Vt.a,null)),r.a.createElement(x.a,{variant:"h6",className:"app-title"},"Factory Machine List Details"),r.a.createElement(he.a,{color:"inherit",disabled:this.state.disabled,onClick:this.onSave},"save"))),r.a.createElement(_e.a,null,r.a.createElement(Qr,{handleChange:this.handleChange,formData:this.state.newData,formState:this.state.formState}))),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.closeDialog,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.closeDialog,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDelete,color:"primary"},"Delete"))))}}]),t}(r.a.Component)),Kr=(a(813),{Factory:"",Month:Date.now(),PO:0,PRI:0,Money:0,Remarks:"",CreatedAt:new Date(Date.now()).toLocaleString(),CreatedBy:"Admin",LastUpdatedAt:new Date(Date.now()).toLocaleString(),LastUpdatedBy:"Admin"}),Jr={properties:{Factory:{description:"",type:"any",required:!0,allowEmpty:!1,messages:{allowEmpty:"Factory cannot be empty.",conform:"Factory cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},Month:{description:"",type:"any",required:!0,allowEmpty:!1,messages:{allowEmpty:"Month cannot be empty.",conform:"Month cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},PO:{description:"",type:"any"},PRI:{description:"",type:"any"},Money:{description:"",type:"any"},Remarks:{description:"",type:"string",default:""},CreatedAt:{type:"any",default:Date.now()},CreatedBy:{type:"string",default:""},LastUpdatedAt:{type:"any",default:Date.now()},LastUpdatedBy:{type:"string",default:""}}},Zr=a(24),Xr={validateFields:function(e){return Zr.validate(e,Jr,{cast:!0})},getMonthlyCPK:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="monthly-cpk/"+e,a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 2:case"end":return a.stop()}}))},getMonthlyCPKFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("monthly-cpk-filter/").concat(e),a.next=3,l.a.awrap(We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 3:return a.abrupt("return",a.sent);case 4:case"end":return a.stop()}}))},update:function(e,t){return Qe("monthly-cpk/"+e,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Updated",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="monthly-cpk/"+e,n.abrupt("return",He(a,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Added",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,formValid:!0,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("monthly-cpk/"+e).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))}},$r=(a(814),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).handleDateChange=function(e,t){if(void 0!==e&&null!==e){var n=new Date(e);a.handleChange(n,t)}},a.state={formControls:{Factory:{valid:!0,message:"",value:void 0===a.props.formData.Factory._id?"":a.props.formData.Factory._id},Month:{valid:!0,message:"",value:a.props.formData.Month},PO:{valid:!0,message:"",value:a.props.formData.PO},Money:{valid:!0,message:"",value:a.props.formData.Money},PRI:{valid:!0,message:"",value:a.props.formData.PRI},Remarks:{valid:!0,message:"",value:a.props.formData.Remarks},Inactive:{valid:!0,message:"",value:a.props.formData.Inactive}},formState:{valid:!0,dirty:!1,errors:[]}},a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a.handleDateChange=a.handleDateChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"handleChange",value:function(e,t){var a=this.state.formControls,n=this.state.formState;void 0===e||0===e.length?(a[t].valid=!1,a[t].message="".concat(t," cannot be empty.")):(a[t].value=e,a[t].valid=!0,a[t].message="",this.props.handleChange(e,t)),n.dirty=!0,this.setState({formControls:a,formState:n})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"form-container"},r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-evenly",alignItems:"center",md:6,xs:12,sm:12,xl:8,lg:8},r.a.createElement(Hr,{handleChange:this.handleChange,formControl:this.state.formControls.Factory,propertyName:"Factory",selectedValue:this.state.formControls.Factory.value}),r.a.createElement(ya.a,{style:{width:"100%",margin:10}},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Da.b,{margin:"normal",id:"date-picker-dialog",label:"Date picker dialog",format:"MMM, yyyy",value:this.state.formControls.Month.value,onChange:function(t){return e.handleDateChange(t,"Month")},KeyboardButtonProps:{"aria-label":"change month"}}))),r.a.createElement(ya.a,{style:{width:"100%",margin:10}},r.a.createElement(ge.a,{id:"txtPO",label:"PO",rows:"3",defaultValue:this.state.formControls.PO.value,className:"",onChange:function(t){return e.handleChange(t.target.value,"PO")},margin:"normal"})),r.a.createElement(ya.a,{style:{width:"100%",margin:10}},r.a.createElement(ge.a,{id:"txtPRI",label:"PRI",rows:"3",defaultValue:this.state.formControls.PRI.value,className:"",onChange:function(t){return e.handleChange(t.target.value,"PRI")},margin:"normal"})),r.a.createElement(ya.a,{style:{width:"100%",margin:10,paddingTop:13}},r.a.createElement(ga.a,null,"Money"),r.a.createElement(Xa.a,{customInput:ge.a,thousandSeparator:", ",decimalSeparator:".",prefix:"$"})),r.a.createElement(ya.a,{style:{width:"100%",margin:10}},r.a.createElement(ge.a,{id:"standard-multiline-static",label:"Remarks",multiline:!0,rows:"3",defaultValue:this.state.formControls.Remarks.value,className:"",onChange:function(t){return e.handleChange(t.target.value,"Remarks")},margin:"dense"})),r.a.createElement(ya.a,{style:{width:"100%",margin:10}},r.a.createElement(ga.a,null,"Inactive"),r.a.createElement(Xe.a,{checked:this.state.formControls.Inactive.value,onChange:function(t){return e.handleChange(t.target.checked,"Inactive")},value:this.state.formControls.Inactive.value,inputProps:{"aria-label":"Inactive"}}))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=t.formControls;return e.formState.valid||Array.isArray(e.formState.errors)&&e.formState.errors.map((function(e){a[e.property].valid=!1,a[e.property].message=e.message})),{formState:e.formState,formControls:a}}}]),t}(r.a.Component)),eo=(Object(n.forwardRef)((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),r.a.forwardRef((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).openDialog=function(e){a.setState({dialogOpen:!0,currentDeleteData:e,dialogMessage:r.a.createElement("span",null,"Are you sure to delete this record ",r.a.createElement("b",null,e.Factory.FctyName)," ? This cannot be undone.")})},a.closeDialog=function(){a.setState({dialogOpen:!1,currentDeleteData:null,dialogMessage:""})},a.openForm=function(e){var t=Object(me.a)({},Kr);void 0===e?a.setState({formOpen:!0,actionStatus:"Add",newData:Object(me.a)({},t)}):a.setState({formOpen:!0,actionStatus:"Update",newData:e})},a.closeForm=function(){a.setState({formOpen:!1,newData:{},actionStatus:"",formState:{valid:!0,dirty:!1,errors:[]}})},a.onSave=function(){var e=a.state.formState,t=Object(me.a)({},a.state.newData);"object"===typeof t.Factory&&(t.Factory=t.Factory._id);var n=Xr.validateFields(t);if(n.valid){var r=Object(je.a)(a.state.data);if("Add"===a.state.actionStatus)Xr.add("",t).then((function(t){!0===t.code?(e.valid=!0,r.push(t.data),a.setState({data:r}),a.closeForm(),a.snackOpen("Successfully added!","success")):(e.valid=!1,e.errors=t.errors,a.snackOpen("Please fix the error(s) highlighted to save the details!","error"))})).catch((function(e){a.snackOpen("Oops, something went wrong while processing your request!","error")}));else{var o=a.state.data,s=a.state.data.find((function(e){return e._id===t._id})),i=a.state.data.indexOf(s);Xr.update("",t).then((function(t){!0===t.code?(e.valid=!0,o[i]=t.data,a.setState({data:o}),a.closeForm(),a.snackOpen("Successfully Updated!","success")):(e.valid=!1,e.errors=t.errors,a.snackOpen("Please fix the error(s) highlighted to save the details!","error"))})).catch((function(e){a.snackOpen("Oops, something went wrong while processing your request!","error")}))}}else{e.valid=!1;var l=n.errors.map((function(e){var t={};return t.property=e.property,t.message=e.message,t}));e.errors=l,a.snackOpen("Please fix the error(s) highlighted to save the details!","error")}a.setState({formState:e})},a.onDelete=function(){null!==a.state.currentDeleteData&&Xr.delete("".concat(a.state.currentDeleteData._id)).then((function(e){if(!0===e.code){var t=Object(je.a)(a.state.data),n=t.indexOf(a.state.currentDeleteData);t=t.splice(n,1),a.closeDialog(),a.snackOpen("Successfully Deleted!","success"),a.setState({data:t})}else a.snackOpen("Oops, something went wrong while processing your request!","error")}))},a.onEdit=function(e){a.openForm(e)},a.state={columns:[{field:"_id",hidden:!0},{title:"Factory",field:"Factory",render:function(e){return r.a.createElement("span",null,e.Factory.FctyName)}},{title:"Month",field:"Month",render:function(e){return r.a.createElement("span",null,new Date(e.Month).toLocaleDateString("en-US",{year:"numeric",month:"short"}))}},{title:"PO",field:"PO"},{title:"PRI",field:"PRI"},{title:"Money",field:"Money",render:function(e){return r.a.createElement(Xa.a,{value:e.PRI,displayType:"text",thousandSeparator:!0,prefix:""})}},{title:"Remarks",field:"Remarks"},{title:"Total Production (Kg)"},{title:"Total NC (Kg)"},{title:"NC%"},{title:"Operator",field:"LastUpdatedBy"},{title:"Last Updated",field:"LastUpdatedAt",render:function(e){return r.a.createElement("span",null,void 0===e?"":new Date(e.LastUpdatedAt).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}))}}],data:[],currentDeleteData:null,newData:{},alertClass:"",alertOpen:!1,alertMessage:"",formOpen:!1,dialogOpen:!1,dialogMessage:"",disabled:!1,actionStatus:"",formState:{valid:!0,dirty:!1,errors:[]}},a.openDialog=a.openDialog.bind(Object(Pe.a)(a)),a.closeDialog=a.closeDialog.bind(Object(Pe.a)(a)),a.openForm=a.openForm.bind(Object(Pe.a)(a)),a.closeForm=a.closeForm.bind(Object(Pe.a)(a)),a.snackOpen=a.snackOpen.bind(Object(Pe.a)(a)),a.snackClose=a.snackClose.bind(Object(Pe.a)(a)),a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initMonthlyCPK()}},{key:"initMonthlyCPK",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.awrap(Xr.getMonthlyCPK("").then((function(t){!0===t.code&&e.setState({data:t.data})})));case 2:case"end":return t.stop()}}))}},{key:"handleChange",value:function(e,t){var a=this.state.newData;a[t]=e;var n=this.state.formState;n.valid=!0,n.errors.map((function(e){e.hasOwnProperty(t)&&(e[t].valid=!0)})),this.setState({newData:a,formState:n})}},{key:"snackOpen",value:function(e,t){this.setState({alertOpen:!0,alertMessage:e,alertClass:t})}},{key:"snackClose",value:function(){this.setState({alertOpen:!1,alertMessage:"",alertClass:"",currentDeleteData:null})}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{style:{margin:"20px 20px 10px 0px"}},r.a.createElement(Ve.a,{title:"Monthly CPK",columns:this.state.columns,data:this.state.data,components:{Toolbar:function(t){return r.a.createElement("div",null,r.a.createElement(Le.MTableToolbar,t),r.a.createElement("div",{style:{padding:"0px 15px"}},r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:function(){return e.openForm(t.rowData)},"aria-label":"add"},r.a.createElement(wt.a,null))))}},actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.data,columns:e.state.columns,fileName:"Monthly CPK"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.initMonthlyCPK()}},{icon:"edit",tooltip:"Edit User",onClick:function(t,a){return e.openForm(a)}},{icon:"delete",tooltip:"Delete User",onClick:function(t,a){return e.openDialog(a)}}],options:{}}),r.a.createElement(Ae.a,{fullScreen:!0,open:this.state.formOpen,onClose:this.closeForm,TransitionComponent:this.Transition},r.a.createElement(w.a,{className:"appBar"},r.a.createElement(F.a,null,r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:this.closeForm,"aria-label":"close"},r.a.createElement(Vt.a,null)),r.a.createElement(x.a,{variant:"h6",className:"app-title"},"Monthly CPK"),r.a.createElement(he.a,{color:"inherit",disabled:this.state.disabled,onClick:this.onSave},"save"))),r.a.createElement(_e.a,null,r.a.createElement($r,{handleChange:this.handleChange,formData:this.state.newData,formState:this.state.formState}))),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:600,open:this.state.alertOpen,onClose:this.snackClose,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.closeDialog,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.closeDialog,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDelete,color:"primary"},"Delete"))))}}]),t}(r.a.Component)),to=(a(815),a(97)),ao=a.n(to),no={properties:{Factory:{description:"",type:"any",required:!0,allowEmpty:!1,messages:{allowEmpty:"Factory cannot be empty.",conform:"Factory cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},RequestDate:{description:"",type:"any",required:!0,allowEmpty:!1,messages:{allowEmpty:"Request Date cannot be empty.",conform:"Request Date cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},ProcessChangeNo:{description:"",type:"string",required:!0,allowEmpty:!1,messages:{allowEmpty:"Request Change No cannot be empty.",conform:"Request Change No cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},Requestor:{description:"",type:"string",required:!0,allowEmpty:!1,messages:{allowEmpty:"Requestor cannot be empty.",conform:"Requestor cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},ProcessCategory:{description:"",type:"any",required:!0,allowEmpty:!1,messages:{allowEmpty:"Process Category cannot be empty.",conform:"Process Category cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},ProcessChangeStatus:{description:"",type:"boolean",required:!0,allowEmpty:!1,messages:{allowEmpty:"Process Change Status cannot be empty.",conform:"Process Change Status cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},Cost:{description:"",required:!0,allowEmpty:!1,type:"number",exclusiveMinimum:0,messages:{allowEmpty:"Cost cannot be empty.",conform:"Cost cannot be empty.",exclusiveMinimum:"Cost must be greater than 0."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},CompleteDate:{description:"",type:"any",required:!0,allowEmpty:!1,messages:{allowEmpty:"Complete Date cannot be empty.",conform:"Complete Date cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},Description:{description:"",type:"string",default:""},Reason:{description:"",type:"string",default:""},Cat_Man:{description:"",type:"boolean",default:!1},Cat_Man_Description:{description:"",type:"string",default:""},Cat_Machine:{description:"",type:"boolean",default:!1},Cat_Machine_Description:{description:"",type:"string",default:""},Cat_Method:{description:"",type:"boolean",default:!1},Cat_Method_Description:{description:"",type:"string",default:""},Cat_Material:{description:"",type:"boolean",default:!1},Cat_Material_Description:{description:"",type:"string",default:""},Impact_Safety:{description:"",type:"boolean",default:!1},Impact_Safety_Description:{description:"",type:"string",default:""},Impact_Environment:{description:"",type:"boolean",default:!1},Impact_Environment_Description:{description:"",type:"string",default:""},Impact_Quality:{description:"",type:"boolean",default:!1},Impact_Quality_Description:{description:"",type:"string",default:""},Impact_Efficiency:{description:"",type:"boolean",default:!1},Impact_Efficiency_Description:{description:"",type:"string",default:""},Impact_Other:{description:"",type:"boolean",default:!1},Impact_Other_Description:{description:"",type:"string",default:""},Factory_Disposition:{description:"",type:"any",default:1},AuthorizedBy:{description:"",type:"string",default:""},Justification:{description:"",type:"string",default:""},Eva_Disposition:{description:"",type:"any",default:1},Eva_Inform_Customer:{description:"",type:"boolean",default:!1},Eva_Comment:{description:"",type:"string",default:""},Res_Change:{description:"",type:"string",default:""},Res_verification:{description:"",type:"string",default:""},BuyerInfo:{description:"",type:"array",default:[{Buyer:"",Status:!1,Inactive:!1,CreatedAt:Date.now(),CreatedBy:"Admin",LastUpdatedAt:Date.now(),LastUpdatedBy:"Admin"}]},SupportDocInfo:{description:"",type:"array",default:[{Remarks:"",Name:"",Type:"",Inactive:!1,CreatedAt:Date.now(),CreatedBy:"Admin",LastUpdatedAt:Date.now(),LastUpdatedBy:"Admin"}]},Inactive:{description:"",type:"boolean",default:!1},CreatedAt:{type:"any",default:Date.now()},CreatedBy:{type:"string",default:""},LastUpdatedAt:{type:"any",default:Date.now()},LastUpdatedBy:{type:"string",default:""}}},ro=a(24),oo={validateFields:function(e){return ro.validate(e,no,{cast:!0})},getProcessChange:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="processChange/"+e,a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 2:case"end":return a.stop()}}))},getOneProcessChange:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("processChange/").concat(e),a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 2:case"end":return a.stop()}}))},getFileBuffer:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("processChange/").concat(e),a.abrupt("return",Ye(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data?{code:!0,formValid:!0,message:"Succeed",data:e.data}:200===e.status&&null===e.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 2:case"end":return a.stop()}}))},getProcesschangeFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("processChange-filter/").concat(e),a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 2:case"end":return a.stop()}}))},update:function(e,t){return Qe("processChange/"+e,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Updated",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="processChange/"+e,n.abrupt("return",He(a,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Added",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,formValid:!0,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("processChange/"+e).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))}},so={Factory:"",RequestDate:Date.now(),ProcessChangeNo:"",Requestor:"",ProcessCategory:"",ProcessChangeStatus:!1,Cost:0,CompleteDate:Date.now(),Description:"",Reason:"",Cat_Man:!1,Cat_Man_Description:"",Cat_Machine:!1,Cat_Machine_Description:"",Cat_Method:!1,Cat_Method_Description:"",Cat_Material:!1,Cat_Material_Description:"",Impact_Safety:!1,Impact_Safety_Description:"",Impact_Environment:!1,Impact_Environment_Description:"",Impact_Quality:!1,Impact_Quality_Description:"",Impact_Efficiency:!1,Impact_Efficiency_Description:"",Impact_Other:!1,Impact_Other_Description:"",Factory_Disposition:1,AuthorizedBy:"",Justification:"",Eva_Disposition:1,Eva_Inform_Customer:!1,Eva_Comment:"",Res_Change:"",Res_verification:"",BuyerInfo:[],SupportDocument:[],Inactive:!1,CreatedAt:Date.now(),CreatedBy:"Admin",LastUpdatedAt:Date.now(),LastUpdatedBy:"Admin"},io=(a(816),a(1127)),lo=a(1138),co=(Date.now(),Date.now(),{properties:{Buyer:{description:"",type:"any",required:!0,allowEmpty:!1,messages:{allowEmpty:"Buyer cannot be empty.",conform:"Buyer cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},Status:{description:"",type:"boolean",required:!0,allowEmpty:!1,messages:{allowEmpty:"Status Date cannot be empty.",conform:"Status Date cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},Inactive:{description:"",type:"boolean",default:!1},CreatedAt:{type:"any",default:Date.now()},CreatedBy:{type:"string",default:""},LastUpdatedAt:{type:"any",default:Date.now()},LastUpdatedBy:{type:"string",default:""}}}),uo=a(24),mo={validateFields:function(e){return uo.validate(e,co,{cast:!0})},getBuyerInfo:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="processChange-BuyerInfo/"+e,a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 2:case"end":return a.stop()}}))},getBuyerInfoFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("processChange-BuyerInfo-filter/").concat(e),a.next=3,l.a.awrap(We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 3:return a.abrupt("return",a.sent);case 4:case"end":return a.stop()}}))},update:function(e,t){return Qe("processChange-BuyerInfo/"+e,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Updated",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="processChange-BuyerInfo/"+e,n.abrupt("return",He(a,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Added",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,formValid:!0,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("processChange-BuyerInfo/"+e).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))}},po=(a(817),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).dialogClose=function(){a.setState({dialogOpen:!1,currentDeleteData:null})},a.state={formControls:{Buyer:{valid:!0,message:"",value:a.props.formData.Buyer},Status:{valid:!0,message:"",value:a.props.formData.Status}},columns:[{title:"Role",field:"Buyer",render:function(e){return r.a.createElement("span",null,e.Buyer.name)},editComponent:function(e){return r.a.createElement(Qn,{propertyName:"Buyer",formData:e.rowData.Buyer,handleChange:e.onChange,formState:{valid:!0,message:""}})}},{title:"Status",field:"Status",render:function(e){return r.a.createElement("span",null,e.Status?"Active":"Inactive")},editComponent:function(e){return r.a.createElement(Xe.a,{checked:e.rowData.Status,onChange:function(t){a.handleChange(t.target.checked,"Status",e.rowData)},value:e.value,inputProps:{"aria-label":"secondary checkbox"},color:"primary"})}}],data:a.props.formData,dialogOpen:!1,currentDeleteData:null,dialogMessage:"",alertClass:"",alertOpen:!1,alertMessage:""},a.snackOpen=a.snackOpen.bind(Object(Pe.a)(a)),a.snackClose=a.snackClose.bind(Object(Pe.a)(a)),a.dialogOpen=a.dialogOpen.bind(Object(Pe.a)(a)),a.dialogClose=a.dialogClose.bind(Object(Pe.a)(a)),a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a.OnDelete=a.OnDelete.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"InitBuyerInfo",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.awrap(mo.getBuyerInfo("").then((function(t){!0===t.code&&e.setState({data:t.data})})));case 2:case"end":return t.stop()}}))}},{key:"snackOpen",value:function(e,t){this.setState({alertOpen:!0,alertMessage:e,alertClass:t})}},{key:"snackClose",value:function(){this.setState({alertOpen:!1,alertMessage:"",alertClass:""})}},{key:"dialogOpen",value:function(e,t){this.setState({dialogOpen:!0,currentDeleteData:t,dialogMessage:r.a.createElement("span",null,"Are you sure to delete this record ",r.a.createElement("b",null,t.Name)," ? This cannot be undone.")})}},{key:"handleChange",value:function(e,t,a){var n=this.state.formControls;""===e||null===e||void 0===e?(n[t].valid=!1,n[t].message="".concat(t," cannot be empty")):(n[t].valid=!0,n[t].message="",n[t].value=e),a[t]=e,this.setState({formControls:n})}},{key:"OnDelete",value:function(){var e=Object(je.a)(this.state.data),t=e.indexOf(this.state.currentDeleteData);e.splice(t,1),this.props.deleteBuyerInfo(e),this.setState({data:e}),this.snackOpen("Successfully Deleted!","success"),this.dialogClose()}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{style:{margin:"20px 0px 10px 0px",width:"100%"}},r.a.createElement(Ve.a,{title:"BUYER TO BE INFORMED",columns:this.state.columns,data:this.state.data,editable:{onRowAdd:function(t){return new Promise((function(a,n){setTimeout((function(){var r=Object(je.a)(e.state.data),o=e.state.formControls;void 0==t.Status&&(t.Status=!1);var s=mo.validateFields(t);s.valid?(r.push(t),e.snackOpen("Successfully added!","success"),e.setState({data:r},(function(){return a()})),e.props.addBuyerInfo(t)):(n(),s.errors.map((function(e){o[e.property].valid=!1,o[e.property].message=e.message})),e.setState({formControls:o}))}),1e3)}))},onRowUpdate:function(t,a){return new Promise((function(n,r){setTimeout((function(){var o=Object(je.a)(e.state.data),s=e.state.formControls,i=mo.validateFields(t);if(i.valid){var l=o.indexOf(a);o[l]=t,e.snackOpen("Successfully added!","success"),e.setState({data:o},(function(){return n()})),e.props.updateBuyerInfo(t,l)}else r(),i.errors.map((function(e){s[e.property].valid=!1,s[e.property].message=e.message})),e.setState({formControls:s})}),1e3)}))}},actions:[{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.InitBuyerInfo()}},{icon:"delete",tooltip:"Delete Process Change Buyer Info",onClick:function(t,a){return e.dialogOpen(t,a)}}],options:{exportButton:!0,actionsColumnIndex:-1}}),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:6e3,open:this.state.alertOpen,onClose:this.snackClose,message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.dialogClose,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.dialogClose,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:function(){return e.OnDelete()},color:"primary"},"Delete"))))}}]),t}(r.a.Component)),fo=(a(818),a(1126)),ho=((new Date).getTime(),{properties:{Remarks:{description:"",type:"string",required:!0,allowEmpty:!1,messages:{allowEmpty:"Remarks cannot be empty.",conform:"Remarks cannot be empty.",required:"Remarks cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},Document:{description:"",type:["object","array"],required:!0,allowEmpty:!1,messages:{allowEmpty:"File cannot be empty.",conform:"File cannot be empty.",required:"File cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},Inactive:{description:"",type:"boolean",default:!1},CreatedAt:{type:"any",default:Date.now()},CreatedBy:{type:"string",default:""},LastUpdatedAt:{type:"any",default:Date.now()},LastUpdatedBy:{type:"string",default:""}}}),go=a(24),yo={validateFields:function(e){return go.validate(e,ho,{cast:!0})},getSupportDoc:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="processChange-DocInfo/"+e,a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 2:case"end":return a.stop()}}))},getSupportDocFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("processChange-DocInfo/").concat(e),a.next=3,l.a.awrap(We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 3:return a.abrupt("return",a.sent);case 4:case"end":return a.stop()}}))},getOneSupportDoc:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("processChange-DocInfo/").concat(e),a.next=3,l.a.awrap(We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 3:return a.abrupt("return",a.sent);case 4:case"end":return a.stop()}}))},update:function(e,t){return Je("processChange-DocInfo/"+e,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Updated",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="processChange-DocInfo/"+e,n.abrupt("return",Ke(a,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Added",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,formValid:!0,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("processChange-DocInfo/"+e).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))}},vo=function(e){if(void 0!==e&&null!==e)return e/Math.pow(1024,2)};function Co(e,t,a){var n=new Blob([e]),r="".concat(t);if(navigator.msSaveBlob)navigator.msSaveBlob(n,r);else{var o=document.createElement("a");if(void 0!==o.download){var s=URL.createObjectURL(n);o.setAttribute("href",s),o.setAttribute("download",r),o.style.visibility="hidden",document.body.appendChild(o),o.click(),document.body.removeChild(o)}}}function Do(e){try{return We("Common/"+e).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0}))}catch(t){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}}}function Eo(e){try{return We("Common/getTemplateFiles/"+e,{responseType:"blob"}).then((function(e){return 200===e.status&&null!==e.data?{code:!0,message:"Succeed",data:e.data}:{code:!1,message:"Oops, something went wrong while processing your request!",data:null}}))}catch(t){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}}}function bo(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(void 0===e||null===e||void 0===t||null===t){n.next=9;break}return n.next=3,l.a.awrap(Oa(e).then((function(e){if(void 0!==e.data&&null!==e.data)return e.data[t]})));case 3:if(void 0===(a=n.sent)||null===a||!Array.isArray(a)){n.next=8;break}return n.abrupt("return",a);case 8:return n.abrupt("return",null);case 9:case"end":return n.stop()}}))}var So=function(e,t,a){if(!a)return!0;switch(t){case"empty":return void 0!==e&&null!==e&&""!==e}},Oo=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).dialogClose=function(){a.setState({dialogOpen:!1,currentDeleteData:null})},a.state={formControls:{Remarks:{valid:!0,message:"",value:""},Document:{valid:!0,message:"",value:""}},columns:[{title:"Remarks",field:"Remarks",render:function(e){return r.a.createElement("span",null,e.Remarks)},editComponent:function(e){return r.a.createElement(ge.a,{autoFocus:!0,margin:"dense",id:"remarks",label:"Remarks*",error:!a.state.formControls.Remarks.valid,helperText:a.state.formControls.Remarks.message,type:"text",defaultValue:e.rowData.Remarks,onChange:function(t){a.handleChange(t.target.value,"Remarks",e.rowData)}})}},{title:"Document",field:"Document",render:function(e){return r.a.createElement(he.a,{href:"#text-buttons",className:"",color:"primary",onClick:function(t){a.downloadDocument(e)}},void 0!==e.Document?e.Document.name:e.Name)},editComponent:function(e){return r.a.createElement("div",null,r.a.createElement("input",{accept:"pdf",className:"",id:"file-upload",color:"primary",type:"file",style:{display:"none"},onChange:function(t){a.handleChange(t.target.files[0],"Document",e.rowData)}}),r.a.createElement("label",{htmlFor:"file-upload"},r.a.createElement(fo.a,{size:"small",color:"primary",component:"span","aria-label":"add",className:""},r.a.createElement(wt.a,null)),r.a.createElement("span",null," ",void 0===e.rowData.Document?"":e.rowData.Document.name)),r.a.createElement(Ea.a,{htmlFor:"file-upload",style:{paddingTop:5},error:!0},a.state.formControls.Document.valid?"":a.state.formControls.Document.message))}}],data:a.props.formData,processChangeId:a.props.processChangeId,dialogOpen:!1,currentDeleteData:null,dialogMessage:"",alertClass:"",alertOpen:!1,alertMessage:"",formState:{dirty:!1,valid:!0}},a.snackOpen=a.snackOpen.bind(Object(Pe.a)(a)),a.snackClose=a.snackClose.bind(Object(Pe.a)(a)),a.dialogOpen=a.dialogOpen.bind(Object(Pe.a)(a)),a.dialogClose=a.dialogClose.bind(Object(Pe.a)(a)),a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a.downloadDocument=a.downloadDocument.bind(Object(Pe.a)(a)),a.OnDelete=a.OnDelete.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"InitSupportDoc",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.awrap(yo.getBuyerInfo("").then((function(t){!0===t.code&&e.setState({data:t.data})})));case 2:case"end":return t.stop()}}))}},{key:"snackOpen",value:function(e,t){this.setState({alertOpen:!0,alertMessage:e,alertClass:t})}},{key:"snackClose",value:function(){this.setState({alertOpen:!1,alertMessage:"",alertClass:""})}},{key:"dialogOpen",value:function(e,t){this.setState({dialogOpen:!0,currentDeleteData:t,dialogMessage:r.a.createElement("span",null,"Are you sure to delete this record ",r.a.createElement("b",null,t.Name)," ? This cannot be undone.")})}},{key:"handleChange",value:function(e,t,a){var n=this.state.formControls,r=this.state.formState;if(r.dirty=!0,""===e||null===e||void 0===e)n[t].valid=!1,n[t].message="".concat(t," cannot be empty");else if("Document"===t){var o=vo(e.size),s=e.type;o>2||"application/pdf"!==s?(n.Document.valid=!1,n.Document.message=o>2?"File cannot be exceed 2MB.":"Only pdf is allowed.",n.Document.value=""):(n.Document.valid=!0,n.Document.message="",n.Document.value=e,a.Document=e)}else n[t].valid=!0,n[t].message="",n[t].value=e,a[t]=e;this.setState({formControls:n,formState:r})}},{key:"downloadDocument",value:function(e){var t=this;void 0!==e&&null!==e&&(void 0!==e._id&&null!==e._id&&yo.getOneSupportDoc("".concat(this.state.processChangeId,"/").concat(e._id)).then((function(e){!0===e.code?Co(new Uint8Array(e.data.FileData.data),e.data.Name):t.snackOpen("Oops, Error while donwloading document!","error")})).catch((function(e){t.snackOpen("Oops, something went wrong while processing your request!","error")})),void 0!==e.Document&&null!==e.Document&&Co(e.Document,e.Document.name))}},{key:"OnDelete",value:function(){if(null!==this.state.currentDeleteData){var e=Object(je.a)(this.state.data),t=e.indexOf(this.state.currentDeleteData);e.splice(t,1),this.snackOpen("Successfully Deleted!","success"),this.dialogClose(),this.props.deleteSupportDoc(e),this.setState({data:e})}else this.snackOpen("Oops, something went wrong while processing your request!","error")}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{style:{margin:"20px 0px 10px 0px",width:"100%"}},r.a.createElement(Ve.a,{title:"UPLOAD SUPPORTING DOCUMENT (MAX. 2 MB)",columns:this.state.columns,data:this.state.data,editable:{onRowAdd:function(t){return new Promise((function(a,n){setTimeout((function(){var r=Object(je.a)(e.state.data),o=e.state.formControls,s=yo.validateFields(t);if(s.valid){var i;i=t,r.push(i),e.snackOpen("Successfully added!","success"),e.setState({data:r},(function(){return a()})),e.props.addSupportDoc(t)}else n(),s.errors.map((function(e){o[e.property].valid=!1,o[e.property].message=e.message})),e.setState({formControls:o})}),1e3)}))},onRowUpdate:function(t,a){return new Promise((function(n,r){setTimeout((function(){var o=Object(je.a)(e.state.data),s=e.state.formControls,i=yo.validateFields(t);if(i.valid){var l=o.indexOf(a);o[l]=t,e.setState({data:o},(function(){return n()})),e.snackOpen("Successfully added!","success"),e.props.updateSupportDoc(t,l)}else r(),i.errors.map((function(e){s[e.property].valid=!1,s[e.property].message=e.message})),e.setState({formControls:s})}),1e3)}))}},actions:[{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.InitSupportDoc()}},{icon:"delete",tooltip:"Delete Process Change Buyer Info",onClick:function(t,a){return e.dialogOpen(t,a)}}],options:{exportButton:!0,actionsColumnIndex:-1}}),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:600,open:this.state.alertOpen,onClose:this.snackClose,message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.dialogClose,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.dialogClose,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:function(){return e.OnDelete()},color:"primary"},"Delete"))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){t.formData}}]),t}(r.a.Component),ko=Oo,wo=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).handleDateChange=function(e,t){if(void 0!==e&&null!==e){var n=new Date(e);a.handleChange(n,t)}},a.updateBuyerInfo=function(e,t){if(void 0!==t&&void 0!==e){var n=a.state.buyerInfo;n[t]=e,a.setState({buyerInfo:n}),a.props.handleChange(n,"BuyerInfo")}},a.addBuyerInfo=function(e){if(void 0!==e){var t=a.state.buyerInfo;t.push(e),a.setState({buyerInfo:t}),a.props.handleChange(t,"BuyerInfo")}},a.deleteBuyerInfo=function(e){void 0!==e&&null!==e&&(a.setState({buyerInfo:e}),a.props.handleChange(e,"BuyerInfo"))},a.updateSupportDoc=function(e,t){if(void 0!==t&&void 0!==e){var n=a.state.supportDoc;n[t]=e,a.setState({supportDoc:n}),a.props.handleChange(n,"SupportDocument")}},a.addSupportDoc=function(e){if(void 0!==e){var t=a.state.supportDoc;t.push(e),a.setState({supportDoc:t}),a.props.handleChange(t,"SupportDocument")}},a.deleteSupportDoc=function(e){void 0!==e&&null!==e&&(a.setState({supportDoc:e}),a.props.handleChange(e,"SupportDocument"))},a.state={formControls:{Factory:{valid:!0,message:"",value:void 0===a.props.formData.Factory._id?"":a.props.formData.Factory._id},RequestDate:{valid:!0,message:"",value:a.props.formData.RequestDate},ProcessChangeNo:{valid:!0,message:"",value:a.props.formData.ProcessChangeNo},Requestor:{valid:!0,message:"",value:a.props.formData.Requestor},ProcessCategory:{valid:!0,message:"",value:void 0===a.props.formData.ProcessCategory.Value?"":a.props.formData.ProcessCategory.Value},ProcessChangeStatus:{valid:!0,message:"",value:a.props.formData.ProcessChangeStatus},Cost:{valid:!0,message:"",value:a.props.formData.Cost},CompleteDate:{valid:!0,message:"",value:a.props.formData.CompleteDate},Description:{valid:!0,message:"",value:a.props.formData.Description},Reason:{valid:!0,message:"",value:a.props.formData.Reason},Cat_Man:{valid:!0,message:"",value:a.props.formData.Cat_Man},Cat_Man_Description:{valid:!0,message:"",value:a.props.formData.Cat_Man_Description},Cat_Machine:{valid:!0,message:"",value:a.props.formData.Cat_Machine},Cat_Machine_Description:{valid:!0,message:"",value:a.props.formData.Cat_Machine_Description},Cat_Method:{valid:!0,message:"",value:a.props.formData.Cat_Method},Cat_Method_Description:{valid:!0,message:"",value:a.props.formData.Cat_Method_Description},Cat_Material:{valid:!0,message:"",value:a.props.formData.Cat_Material},Cat_Material_Description:{valid:!0,message:"",value:a.props.formData.Cat_Material_Description},Impact_Safety:{valid:!0,message:"",value:a.props.formData.Impact_Safety},Impact_Safety_Description:{valid:!0,message:"",value:a.props.formData.Impact_Safety_Description},Impact_Environment:{valid:!0,message:"",value:a.props.formData.Impact_Environment},Impact_Environment_Description:{valid:!0,message:"",value:a.props.formData.Impact_Environment_Description},Impact_Quality:{valid:!0,message:"",value:a.props.formData.Impact_Quality},Impact_Quality_Description:{valid:!0,message:"",value:a.props.formData.Impact_Quality_Description},Impact_Efficiency:{valid:!0,message:"",value:a.props.formData.Impact_Efficiency},Impact_Efficiency_Description:{valid:!0,message:"",value:a.props.formData.Impact_Efficiency_Description},Impact_Other:{valid:!0,message:"",value:a.props.formData.Impact_Other},Impact_Other_Description:{valid:!0,message:"",value:a.props.formData.Impact_Other_Description},Factory_Disposition:{valid:!0,message:"",value:void 0===a.props.formData.Factory_Disposition.Value?"":a.props.formData.Factory_Disposition.Value},AuthorizedBy:{valid:!0,message:"",value:a.props.formData.AuthorizedBy},Justification:{valid:!0,message:"",value:a.props.formData.Justification},Eva_Disposition:{valid:!0,message:"",value:void 0===a.props.formData.Eva_Disposition.Value?"":a.props.formData.Eva_Disposition.Value},Eva_Inform_Customer:{valid:!0,message:"",value:a.props.formData.Eva_Inform_Customer},Eva_Comment:{valid:!0,message:"",value:a.props.formData.Eva_Comment},Res_Change:{valid:!0,message:"",value:a.props.formData.Res_Change},Res_verification:{valid:!0,message:"",value:a.props.formData.Res_verification},BuyerInfo:{valid:!0,message:"",value:a.props.formData.BuyerInfo},SupportDocument:{valid:!0,message:"",value:a.props.formData.SupportDocument},Inactive:{valid:!0,message:"",value:a.props.formData.Inactive}},mocCategoryData:[],evalDisposition:[],buyerInfo:a.props.formData.BuyerInfo,supportDoc:a.props.formData.SupportDocument},a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a.handleDateChange=a.handleDateChange.bind(Object(Pe.a)(a)),a.renderMOCCategoryOptions=a.renderMOCCategoryOptions.bind(Object(Pe.a)(a)),a.updateBuyerInfo=a.updateBuyerInfo.bind(Object(Pe.a)(a)),a.addBuyerInfo=a.addBuyerInfo.bind(Object(Pe.a)(a)),a.deleteBuyerInfo=a.deleteBuyerInfo.bind(Object(Pe.a)(a)),a.updateSupportDoc=a.updateSupportDoc.bind(Object(Pe.a)(a)),a.addSupportDoc=a.addSupportDoc.bind(Object(Pe.a)(a)),a.deleteSupportDoc=a.deleteSupportDoc.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initSupportDoc(),this.initMOCCategoryOptions(),this.initEvalDisposition()}},{key:"initMOCCategoryOptions",value:function(){var e=this;Oa("moccategory.json").then((function(e){return e.data})).then((function(t){e.setState({mocCategoryData:t.ProcessCategory})}))}},{key:"initEvalDisposition",value:function(){var e=this;Oa("evaldisposition.json").then((function(e){return e.data})).then((function(t){e.setState({evalDisposition:t.EvalDisposition})}))}},{key:"initProcessBuyerInfo",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.awrap(mo.getBuyerInfo("").then((function(t){!0===t.code&&e.setState({buyerInfo:t.data})})));case 2:case"end":return t.stop()}}))}},{key:"initSupportDoc",value:function(){return l.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}))}},{key:"renderEvalDispositionOptions",value:function(){return this.state.evalDisposition.map((function(e,t){return r.a.createElement(et.a,{label:"Select HeveaPRO Disposition",value:e.Value,key:e.Value,name:e.Name},r.a.createElement(E.a,{style:{width:"100%"}},r.a.createElement(b.a,{alignItems:"flex-start"},r.a.createElement(S.a,{primary:e.Name}))))}))}},{key:"renderMOCCategoryOptions",value:function(){return this.state.mocCategoryData.map((function(e,t){return r.a.createElement(et.a,{label:"Select MOC Category",value:e.Value,key:e.Value,name:e.Name},r.a.createElement(E.a,{style:{width:"100%"}},r.a.createElement(b.a,{alignItems:"flex-start"},r.a.createElement(S.a,{primary:e.Name}))))}))}},{key:"handleChange",value:function(e,t){var a=this.state.formControls,n=this.state.formState;if(void 0===e||0===e.length)a[t].valid=!1,a[t].message="".concat(t," cannot be empty.");else{if("ProcessCategory"===t){var r=this.state.mocCategoryData.find((function(t){return t.Value===e}));void 0!==r&&null!==r&&(a[t].value=r.Value,e=r)}else if("Factory_Disposition"===t){var o={Value:e,Name:1===e?"Approve":2===e?"Reject":"Defer"};a[t].value=o.Value,e=o}else if("Eva_Disposition"===t){var s=this.state.evalDisposition.find((function(t){return t.Value===e}));void 0!==s&&null!==s&&(a[t].value=s.Value,e=s)}else a[t].value=e;a[t].valid=!0,a[t].message="",this.props.handleChange(e,t)}n.dirty=!0,this.setState({formControls:a,formState:n})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"form-container"},r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-evenly",alignItems:"center",md:10,xs:12,sm:12,xl:10,lg:10},r.a.createElement(be.a,{container:!0,direction:"row",justify:"space-around",alignItems:"center",spacing:1},r.a.createElement(be.a,{item:!0,container:!0,md:5,xs:12,sm:12},r.a.createElement(Hr,{handleChange:this.handleChange,formControl:this.state.formControls.Factory,propertyName:"Factory",selectedValue:this.state.formControls.Factory.value})),r.a.createElement(be.a,{item:!0,container:!0,md:5,xs:12,sm:12},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Da.b,{style:{width:"100%",margin:7},margin:"dense",id:"date-picker-dialog",label:"Request Date*",format:"dd-MMM-yyyy",value:this.state.formControls.RequestDate.value,onChange:function(t){return e.handleDateChange(t,"RequestDate")},KeyboardButtonProps:{"aria-label":"change month"}})))),r.a.createElement(be.a,{container:!0,direction:"row",justify:"space-around",alignItems:"center",spacing:1},r.a.createElement(be.a,{item:!0,container:!0,md:5,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:7}},r.a.createElement(ge.a,{id:"txtProcessChangeNumber",label:"Process Change Number",required:!0,defaultValue:this.state.formControls.ProcessChangeNo.value,className:"",error:!this.state.formControls.ProcessChangeNo.valid,helperText:this.state.formControls.ProcessChangeNo.message,onChange:function(t){return e.handleChange(t.target.value.trim(),"ProcessChangeNo")},margin:"dense"}))),r.a.createElement(be.a,{item:!0,container:!0,md:5,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:7}},r.a.createElement(ge.a,{id:"txtRequestor",label:"Requestor",required:!0,error:!this.state.formControls.Requestor.valid,helperText:this.state.formControls.Requestor.message,defaultValue:this.state.formControls.Requestor.value,className:"",onChange:function(t){return e.handleChange(t.target.value.trim(),"Requestor")},margin:"dense"})))),r.a.createElement(be.a,{container:!0,direction:"row",justify:"space-around",alignItems:"center",spacing:1},r.a.createElement(be.a,{item:!0,container:!0,md:5,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:7}},r.a.createElement(Ea.a,{shrink:!0,htmlFor:"ddlProcessCategory",required:!0,error:!this.state.formControls.ProcessCategory.valid},"MOC Category"),r.a.createElement(ba.a,{id:"ddlProcessCategory",value:this.state.formControls.ProcessCategory.value,error:!this.state.formControls.ProcessCategory.valid,onChange:function(t){return e.handleChange(t.target.value,"ProcessCategory")},displayEmpty:!0},r.a.createElement(et.a,{value:""},r.a.createElement("em",null,"Select MOC Category")),this.renderMOCCategoryOptions()),r.a.createElement(Sa.a,{error:!this.state.formControls.ProcessCategory.valid,style:{display:this.state.formControls.ProcessCategory.valid?"none":""}},this.state.formControls.ProcessCategory.valid?"":!this.state.formControls.ProcessCategory.message))),r.a.createElement(be.a,{item:!0,container:!0,md:5,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:7}},r.a.createElement(ga.a,null,"Process Change Status*"),r.a.createElement(ye.a,{control:r.a.createElement(Xe.a,{checked:this.state.formControls.ProcessChangeStatus.value,onChange:function(t){return e.handleChange(t.target.checked,"ProcessChangeStatus")},value:this.state.formControls.ProcessChangeStatus.value,inputProps:{"aria-label":"Process Change Status"},color:"primary"}),label:this.state.formControls.ProcessChangeStatus.value?"Close":"Open"})))),r.a.createElement(be.a,{container:!0,direction:"row",justify:"space-around",alignItems:"center",spacing:1},r.a.createElement(be.a,{item:!0,container:!0,md:5,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:7}},r.a.createElement(Xa.a,{id:"Cost",label:"Cost",customInput:ge.a,value:this.state.formControls.Cost.value,onValueChange:function(t){return e.handleChange(t.floatValue,"Cost",!0)},onFocus:function(e){e.target.select()},decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0,error:!this.state.formControls.Cost.valid,helperText:this.state.formControls.Cost.message}))),r.a.createElement(be.a,{item:!0,container:!0,md:5,xs:12,sm:12},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Da.b,{style:{width:"100%",margin:7},margin:"dense",id:"date-picker-dialog",label:"Complete Date*",format:"dd-MMM-yyyy",value:this.state.formControls.CompleteDate.value,onChange:function(t){return e.handleDateChange(t,"CompleteDate")},KeyboardButtonProps:{"aria-label":"Complete Date"}})))),r.a.createElement(be.a,{container:!0,direction:"row",justify:"space-around",alignItems:"center",spacing:1},r.a.createElement(be.a,{item:!0,container:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:7}},r.a.createElement(ge.a,{id:"standard-multiline-static",label:"Description",multiline:!0,rows:"4",defaultValue:this.state.formControls.Description.value,className:"",onChange:function(t){return e.handleChange(t.target.value,"Description")},margin:"dense"})))),r.a.createElement(be.a,{container:!0,direction:"row",justify:"space-around",alignItems:"center",spacing:1},r.a.createElement(be.a,{item:!0,container:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:7}},r.a.createElement(ge.a,{id:"standard-multiline-static",label:"Reason",multiline:!0,rows:"4",defaultValue:this.state.formControls.Reason.value,className:"",onChange:function(t){return e.handleChange(t.target.value,"Reason")},margin:"dense"})))),r.a.createElement(be.a,{container:!0,style:{marginTop:25},direction:"row",justify:"space-around",alignItems:"center",spacing:1,md:11,xs:12,sm:12},r.a.createElement(bn,{label:"CATEGORY OF CHANGE (SELECT WHERE APPLICABLE)",style:{width:"100%"}},r.a.createElement(be.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center"},r.a.createElement(be.a,{item:!0,xs:12,sm:4,md:2,lg:2},r.a.createElement(ye.a,{style:{width:"100%",margin:5,paddingTop:24},control:r.a.createElement(ve.a,{checked:this.state.formControls.Cat_Man.value,onChange:function(t){return e.handleChange(t.target.checked,"Cat_Man")},value:this.state.formControls.Cat_Man.value,color:"primary"}),label:"Man"})),r.a.createElement(be.a,{item:!0,xs:12,sm:8,md:10,lg:10},r.a.createElement(ya.a,{style:{width:"100%",margin:5}},r.a.createElement(ge.a,{id:"txtCatManDescription",label:"Description",multiline:!0,rows:"2",defaultValue:this.state.formControls.Cat_Man_Description.value,className:"",onChange:function(t){return e.handleChange(t.target.value,"Cat_Man_Description")},margin:"dense"}))),r.a.createElement(be.a,{item:!0,xs:12,sm:4,md:2,lg:2},r.a.createElement(ye.a,{style:{width:"100%",margin:5,paddingTop:24},control:r.a.createElement(ve.a,{checked:this.state.formControls.Cat_Machine.value,onChange:function(t){return e.handleChange(t.target.checked,"Cat_Machine")},value:this.state.formControls.Cat_Machine.value,color:"primary"}),label:"Machine"})),r.a.createElement(be.a,{item:!0,xs:12,sm:8,md:10,lg:10},r.a.createElement(ya.a,{style:{width:"100%",margin:5}},r.a.createElement(ge.a,{id:"txtCatMachineDescription",label:"Description",multiline:!0,rows:"2",defaultValue:this.state.formControls.Cat_Machine_Description.value,className:"",onChange:function(t){return e.handleChange(t.target.value,"Cat_Machine_Description")},margin:"dense"}))),r.a.createElement(be.a,{item:!0,xs:12,sm:4,md:2,lg:2},r.a.createElement(ye.a,{style:{width:"100%",margin:5,paddingTop:24},control:r.a.createElement(ve.a,{checked:this.state.formControls.Cat_Method.value,onChange:function(t){return e.handleChange(t.target.checked,"Cat_Method")},value:this.state.formControls.Cat_Method.value,color:"primary"}),label:"Method"})),r.a.createElement(be.a,{item:!0,xs:12,sm:8,md:10,lg:10},r.a.createElement(ya.a,{style:{width:"100%",margin:5}},r.a.createElement(ge.a,{id:"txtCat_MethodDescription",label:"Description",multiline:!0,rows:"2",defaultValue:this.state.formControls.Cat_Method_Description.value,className:"",onChange:function(t){return e.handleChange(t.target.value,"Cat_Method_Description")},margin:"dense"}))),r.a.createElement(be.a,{item:!0,xs:12,sm:4,md:2,lg:2},r.a.createElement(ye.a,{style:{width:"100%",margin:5,paddingTop:24},control:r.a.createElement(ve.a,{checked:this.state.formControls.Cat_Material.value,onChange:function(t){return e.handleChange(t.target.checked,"Cat_Material")},value:this.state.formControls.Cat_Material.value,color:"primary"}),label:"Material"})),r.a.createElement(be.a,{item:!0,xs:12,sm:8,md:10,lg:10},r.a.createElement(ya.a,{style:{width:"100%",margin:5}},r.a.createElement(ge.a,{id:"txtCat_MaterialDescription",label:"Description",multiline:!0,rows:"2",defaultValue:this.state.formControls.Cat_Material_Description.value,className:"",onChange:function(t){return e.handleChange(t.target.value,"Cat_Material_Description")},margin:"dense"})))))),r.a.createElement(be.a,{container:!0,style:{marginTop:25},direction:"row",justify:"space-around",alignItems:"center",spacing:1,md:11,xs:12,sm:12},r.a.createElement(bn,{label:"IMPACT OF CHANGE (SELECT WHERE APPLICABLE)",style:{width:"100%"}},r.a.createElement(be.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center"},r.a.createElement(be.a,{item:!0,xs:12,sm:4,md:2,lg:2},r.a.createElement(ye.a,{style:{width:"100%",margin:5,paddingTop:24},control:r.a.createElement(ve.a,{checked:this.state.formControls.Impact_Safety.value,onChange:function(t){return e.handleChange(t.target.checked,"Impact_Safety")},value:this.state.formControls.Impact_Safety.value,color:"primary"}),label:"Safety"})),r.a.createElement(be.a,{item:!0,xs:12,sm:8,md:10,lg:10},r.a.createElement(ya.a,{style:{width:"100%",margin:5}},r.a.createElement(ge.a,{id:"txtImpact_Safety",label:"Description",color:"primary",multiline:!0,rows:"2",defaultValue:this.state.formControls.Impact_Safety_Description.value,className:"",onChange:function(t){return e.handleChange(t.target.value,"Impact_Safety_Description")},margin:"dense"}))),r.a.createElement(be.a,{item:!0,xs:12,sm:4,md:2,lg:2},r.a.createElement(ye.a,{style:{width:"100%",margin:5,paddingTop:24},control:r.a.createElement(ve.a,{checked:this.state.formControls.Impact_Environment.value,onChange:function(t){return e.handleChange(t.target.checked,"Impact_Environment")},value:this.state.formControls.Impact_Environment.value,color:"primary"}),label:"Environment"})),r.a.createElement(be.a,{item:!0,xs:12,sm:8,md:10,lg:10},r.a.createElement(ya.a,{style:{width:"100%",margin:5}},r.a.createElement(ge.a,{id:"txtImpact_EnvironmentDescription",label:"Description",color:"primary",multiline:!0,rows:"2",defaultValue:this.state.formControls.Impact_Environment_Description.value,className:"",onChange:function(t){return e.handleChange(t.target.value,"Impact_Environment_Description")},margin:"dense"}))),r.a.createElement(be.a,{item:!0,xs:12,sm:4,md:2,lg:2},r.a.createElement(ye.a,{style:{width:"100%",margin:5,paddingTop:24},control:r.a.createElement(ve.a,{checked:this.state.formControls.Impact_Quality.value,onChange:function(t){return e.handleChange(t.target.checked,"Impact_Quality")},value:this.state.formControls.Impact_Quality.value,color:"primary"}),label:"Quality"})),r.a.createElement(be.a,{item:!0,xs:12,sm:8,md:10,lg:10},r.a.createElement(ya.a,{style:{width:"100%",margin:5}},r.a.createElement(ge.a,{id:"txtImpact_QualityDescription",label:"Description",color:"primary",multiline:!0,rows:"2",defaultValue:this.state.formControls.Impact_Quality_Description.value,className:"",onChange:function(t){return e.handleChange(t.target.value,"Impact_Quality_Description")},margin:"dense"}))),r.a.createElement(be.a,{item:!0,xs:12,sm:4,md:2,lg:2},r.a.createElement(ye.a,{style:{width:"100%",margin:5,paddingTop:24},control:r.a.createElement(ve.a,{checked:this.state.formControls.Impact_Efficiency.value,onChange:function(t){return e.handleChange(t.target.checked,"Impact_Efficiency")},value:this.state.formControls.Impact_Efficiency.value,color:"primary"}),label:"Efficiency"})),r.a.createElement(be.a,{item:!0,xs:12,sm:8,md:10,lg:10},r.a.createElement(ya.a,{style:{width:"100%",margin:5}},r.a.createElement(ge.a,{id:"txtImpact_EfficiencyDescription",label:"Description",color:"primary",multiline:!0,rows:"2",defaultValue:this.state.formControls.Impact_Efficiency_Description.value,className:"",onChange:function(t){return e.handleChange(t.target.value,"Impact_Efficiency_Description")},margin:"dense"}))),r.a.createElement(be.a,{item:!0,xs:12,sm:4,md:2,lg:2},r.a.createElement(ye.a,{style:{width:"100%",margin:5,paddingTop:24},control:r.a.createElement(ve.a,{checked:this.state.formControls.Impact_Other.value,onChange:function(t){return e.handleChange(t.target.checked,"Impact_Other")},value:this.state.formControls.Impact_Other.value,color:"primary"}),label:"Other"})),r.a.createElement(be.a,{item:!0,xs:12,sm:8,md:10,lg:10},r.a.createElement(ya.a,{style:{width:"100%",margin:5}},r.a.createElement(ge.a,{id:"txtImpact_OtherDescription",label:"Description",color:"primary",multiline:!0,rows:"2",defaultValue:this.state.formControls.Impact_Other_Description.value,className:"",onChange:function(t){return e.handleChange(t.target.value,"Impact_Other_Description")},margin:"dense"})))))),r.a.createElement(be.a,{container:!0,style:{marginTop:15},direction:"row",justify:"space-around",alignItems:"flex-start",spacing:1,md:11,xs:12,sm:12},r.a.createElement(bn,{label:"FACTORY MANAGEMENT DISPOSITION",style:{width:"100%"}},r.a.createElement(be.a,{container:!0,direction:"row",justify:"space-around",alignItems:"flex-start",spacing:1},r.a.createElement(be.a,{item:!0,xs:12},r.a.createElement(io.a,{"aria-label":"gender",name:"gender1",value:this.state.formControls.Factory_Disposition.value,onChange:function(t){return e.handleChange(t.target.value,"Factory_Disposition")},row:!0,start:!0},r.a.createElement(ye.a,{value:"1",control:r.a.createElement(lo.a,null),label:"Approve",checked:1==this.state.formControls.Factory_Disposition.value}),r.a.createElement(ye.a,{value:"2",control:r.a.createElement(lo.a,null),label:"Reject",checked:2==this.state.formControls.Factory_Disposition.value}),r.a.createElement(ye.a,{value:"3",control:r.a.createElement(lo.a,null),label:"Defer",checked:3==this.state.formControls.Factory_Disposition.value}))),r.a.createElement(D.a,{smDown:!0},r.a.createElement(be.a,{item:!0,md:2},r.a.createElement(x.a,{component:"div",style:{paddingTop:27}},r.a.createElement(Ee.a,{fontFamily:"fontFamily",m:1},"Authorized By")))),r.a.createElement(be.a,{item:!0,xs:12,sm:12,md:10},r.a.createElement(ya.a,{style:{width:"100%"}},r.a.createElement(ge.a,{id:"txtAuthorizedBy",label:"AuthorizedBy",defaultValue:this.state.formControls.AuthorizedBy.value,className:"",onChange:function(t){return e.handleChange(t.target.value,"AuthorizedBy")},margin:"dense"}))),r.a.createElement(D.a,{smDown:!0},r.a.createElement(be.a,{item:!0,md:2},r.a.createElement(x.a,{component:"div",style:{paddingTop:27}},r.a.createElement(Ee.a,{fontFamily:"fontFamily",m:1},"Justification for Approval, Rejection or Deferral")))),r.a.createElement(be.a,{item:!0,xs:12,sm:12,md:10},r.a.createElement(ya.a,{style:{width:"100%"}},r.a.createElement(ge.a,{id:"txtJustification",label:"Justification",multiline:!0,rows:"2",defaultValue:this.state.formControls.Justification.value,className:"",onChange:function(t){return e.handleChange(t.target.value,"Justification")},margin:"dense"})))))),r.a.createElement(be.a,{container:!0,style:{marginTop:15},direction:"row",justify:"space-around",alignItems:"center",spacing:1,md:11,xs:12,sm:12},r.a.createElement(bn,{label:"HEVEAPRO EVALUATION",style:{width:"100%"}},r.a.createElement(be.a,{container:!0,direction:"row",justify:"space-around",alignItems:"center",spacing:1},r.a.createElement(D.a,{smDown:!0},r.a.createElement(be.a,{item:!0,md:2},r.a.createElement(x.a,{component:"div",style:{paddingTop:27}},r.a.createElement(Ee.a,{fontFamily:"fontFamily",m:1},"HeveaPRO Disposition")))),r.a.createElement(be.a,{item:!0,xs:12,sm:12,md:10},r.a.createElement(ya.a,{style:{width:"100%"}},r.a.createElement(Ea.a,{shrink:!0,htmlFor:"ddlEvalDisposition"},"Disposition"),r.a.createElement(ba.a,{id:"ddlDisposition",value:this.state.formControls.Eva_Disposition.value,onChange:function(t){return e.handleChange(t.target.value,"Eva_Disposition")},displayEmpty:!0},r.a.createElement(et.a,{value:""},r.a.createElement("em",null,"Select Disposition")),this.renderEvalDispositionOptions()))),r.a.createElement(D.a,{smDown:!0},r.a.createElement(be.a,{item:!0,md:2},r.a.createElement(x.a,{component:"div",style:{paddingTop:27}},r.a.createElement(Ee.a,{fontFamily:"fontFamily",m:1},"HeveaPRO Comment")))),r.a.createElement(be.a,{item:!0,xs:12,sm:12,md:10},r.a.createElement(ya.a,{style:{width:"100%"}},r.a.createElement(ge.a,{id:"txtEva_Comment",label:"HeveaPRO Comment",multiline:!0,rows:"2",defaultValue:this.state.formControls.Eva_Comment.value,className:"",onChange:function(t){return e.handleChange(t.target.value,"Eva_Comment")},margin:"dense"})))))),r.a.createElement(be.a,{container:!0,style:{marginTop:15},direction:"row",justify:"space-around",alignItems:"center",spacing:1,md:11,xs:12,sm:12},r.a.createElement(bn,{label:"RESULT OF CHANGE ANALYSIS",style:{width:"100%"}},r.a.createElement(be.a,{container:!0,direction:"row",justify:"space-around",alignItems:"center",spacing:1},r.a.createElement(D.a,{smDown:!0},r.a.createElement(be.a,{item:!0,md:2},r.a.createElement(x.a,{component:"div",style:{paddingTop:27}},r.a.createElement(Ee.a,{fontFamily:"fontFamily",m:1},"Result of Change")))),r.a.createElement(be.a,{item:!0,xs:12,sm:12,md:10},r.a.createElement(ya.a,{style:{width:"100%"}},r.a.createElement(ge.a,{id:"txtRes_Change",label:"Result of Change",multiline:!0,rows:"3",defaultValue:this.state.formControls.Res_Change.value,className:"",onChange:function(t){return e.handleChange(t.target.value,"Res_Change")},margin:"dense"}))),r.a.createElement(D.a,{smDown:!0},r.a.createElement(be.a,{item:!0,md:2},r.a.createElement(x.a,{component:"div",style:{paddingTop:27}},r.a.createElement(Ee.a,{fontFamily:"fontFamily",m:1},"Verification of Change Result")))),r.a.createElement(be.a,{item:!0,xs:12,sm:12,md:10},r.a.createElement(ya.a,{style:{width:"100%"}},r.a.createElement(ge.a,{id:"txtRes_verification",label:"Verification of Change Result",multiline:!0,rows:"2",defaultValue:this.state.formControls.Res_verification.value,className:"",onChange:function(t){return e.handleChange(t.target.value,"Res_verification")},margin:"dense"})))))),r.a.createElement(be.a,{container:!0,style:{marginTop:15},direction:"row",justify:"space-around",alignItems:"center",spacing:1,md:11,xs:12,sm:12},r.a.createElement(bn,{label:"BUYER TO BE INFORMED",style:{width:"100%"}},r.a.createElement(be.a,{container:!0,direction:"row",justify:"space-around",alignItems:"center",spacing:1},r.a.createElement(po,{formData:this.state.formControls.BuyerInfo.value,updateBuyerInfo:this.updateBuyerInfo,addBuyerInfo:this.addBuyerInfo,deleteBuyerInfo:this.deleteBuyerInfo})))),r.a.createElement(be.a,{container:!0,style:{marginTop:15},direction:"row",justify:"space-around",alignItems:"center",spacing:1,md:11,xs:12,sm:12},r.a.createElement(bn,{label:"UPLOAD SUPPORTING DOCUMENT (MAX. 2 MB)",style:{width:"100%"}},r.a.createElement(be.a,{container:!0,direction:"row",justify:"space-around",alignItems:"center",spacing:1},r.a.createElement(ko,{processChangeId:this.props.formData._id,formData:this.state.formControls.SupportDocument.value,updateSupportDoc:this.updateSupportDoc,addSupportDoc:this.addSupportDoc,deleteSupportDoc:this.deleteSupportDoc}))))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=t.formControls;return e.formState.valid||Array.isArray(e.formState.errors)&&e.formState.errors.map((function(e){a[e.property].valid=!1,a[e.property].message=e.message})),{formState:e.formState,formControls:a}}}]),t}(r.a.Component),Fo=wo,xo={properties:{Factory:{description:"",type:["string","object"],messages:{conform:"Factory cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},StorageNo:{description:"",type:"any",required:!0,allowEmpty:!1,messages:{conform:"Storage number cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},Capacity:{description:"",type:"number",exclusiveMinimum:0,messages:{conform:"Capacity cannot be empty.",exclusiveMinimum:"Capacity must be greater than 0."},conform:function(e){return""!==e&&void 0!==e}},NumberStartPeriod:{description:"",type:"any",messages:{conform:"Number start period cannot be empty."},conform:function(e){return""!==e&&void 0!==e}}}},To=a(24),No={validateFields:function(e){return To.validate(e,xo,{cast:!0})},get:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="storageLocation/"+e,a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?(console.log(e),{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}):200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},getFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("storageLocation-filter/").concat(e),a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},getOne:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("storageLocation/").concat(e),a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},update:function(e,t){return Qe("storageLocation/"+e,t).then((function(e){return console.log(e),200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Updated",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="storageLocation/"+e,n.abrupt("return",He(a,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Added",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,formValid:!0,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("storageLocation/"+e).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))}},jo=(Object(n.forwardRef)((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),r.a.forwardRef((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).openDialog=function(e){a.setState({dialogOpen:!0,currentDeleteData:e,dialogMessage:r.a.createElement("span",null,"Are you sure to delete this record ",r.a.createElement("b",null,e.Factory.FctyName)," ? This cannot be undone.")})},a.closeDialog=function(){a.setState({dialogOpen:!1,currentDeleteData:null,dialogMessage:""})},a.openForm=function(e){var t=Object(me.a)({},so);void 0===e?a.setState({formOpen:!0,actionStatus:"Add",newData:Object(me.a)({},t)}):a.setState({formOpen:!0,actionStatus:"Update",newData:e})},a.closeForm=function(){a.setState({formOpen:!1,newData:{},actionStatus:"",formState:{valid:!0,dirty:!1,errors:[]}})},a.onSave=function(){var e=a.state.formState,t=Object(me.a)({},a.state.newData);"object"===typeof t.Factory&&(t.Factory=t.Factory._id);var n=oo.validateFields(t);if(console.log(n),n.valid){var r=Object(je.a)(a.state.data),o=a.getFormDataFromObject(t);if("Add"===a.state.actionStatus)oo.add("",o).then((function(t){!0===t.code?(e.valid=!0,r.push(t.data),a.setState({data:r}),a.closeForm(),a.snackOpen("Successfully added!","success")):(e.valid=!1,e.errors=t.errors,a.snackOpen("Please fix the error(s) highlighted to save the details!","error"))})).catch((function(e){a.snackOpen("Oops, something went wrong while processing your request!","error")}));else{var s=Object(je.a)(a.state.data),i=s.find((function(e){return e._id===t._id})),l=s.indexOf(i);oo.update("",o).then((function(t){!0===t.code?(e.valid=!0,s[l]=t.data,a.setState({data:s}),a.closeForm(),a.snackOpen("Successfully Updated!","success")):(e.valid=!1,e.errors=t.errors,a.snackOpen("Please fix the error(s) highlighted to save the details!","error"))})).catch((function(e){a.snackOpen("Oops, something went wrong while processing your request!","error")}))}}else{e.valid=!1;var c=n.errors.map((function(e){var t={};return t.property=e.property,t.message=e.message,t}));e.errors=c,a.snackOpen("Please fix the error(s) highlighted to save the details!","error")}a.setState({formState:e})},a.onDelete=function(){null!==a.state.currentDeleteData&&oo.delete("".concat(a.state.currentDeleteData._id)).then((function(e){if(!0===e.code){var t=Object(je.a)(a.state.data),n=t.indexOf(a.state.currentDeleteData);t.splice(n,1),a.closeDialog(),a.snackOpen("Successfully Deleted!","success"),a.setState({data:t})}else a.snackOpen("Oops, something went wrong while processing your request!","error")}))},a.onEdit=function(e){a.openForm(e)},a.state={columns:[{title:"Print",field:"_id",render:function(e){return r.a.createElement(bt.a,{"aria-label":"Print",className:"",onClick:function(){return a.printFormData(e._id)}},r.a.createElement(ao.a,{fontSize:"inherit"}))}},{title:"Factory",field:"Factory",render:function(e){return r.a.createElement("span",null,e.Factory.FctyName)}},{title:"Request Date",field:"RequestDate",render:function(e){return r.a.createElement("span",null,new Date(e.RequestDate).toLocaleDateString())}},{title:"Process Change No",field:"ProcessChangeNo"},{title:"Requestor",field:"Requestor"},{title:"MOC Category",field:"ProcessCategory",render:function(e){return r.a.createElement("span",null,e.ProcessCategory.Name)}},{title:"Process Change Status",field:"ProcessChangeStatus",render:function(e){return r.a.createElement("span",null,e.ProcessChangeStatus?"Yes":"No")}},{title:"Cost",field:"Cost"},{title:"Complete Date",field:"CompleteDate",render:function(e){return r.a.createElement("span",null,new Date(e.CompleteDate).toLocaleDateString())}},{title:"Description",field:"Description"},{title:"Reason",field:"Reason"},{title:"Factory Disposition",field:"Factory_Disposition",render:function(e){return r.a.createElement("span",null,e.Factory_Disposition.Name)}},{title:"Authorized",field:"AuthorizedBy"},{title:"Justification",field:"Justification"},{title:"Disposition",field:"Eva_Disposition",render:function(e){return r.a.createElement("span",null,e.Eva_Disposition.Name)}},{title:"Result Change",field:"Res_Change"},{title:"Result Verification",field:"Res_verification"},{title:"Operator",field:"LastUpdatedBy"},{title:"Last Updated",field:"LastUpdatedAt",render:function(e){return r.a.createElement("span",null,void 0===e?"":new Date(e.LastUpdatedAt).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}))}}],data:[],currentDeleteData:null,newData:{},alertClass:"",alertOpen:!1,alertMessage:"",formOpen:!1,dialogOpen:!1,dialogMessage:"",disabled:!1,actionStatus:"",formState:{valid:!0,dirty:!1,errors:[]}},a.openDialog=a.openDialog.bind(Object(Pe.a)(a)),a.closeDialog=a.closeDialog.bind(Object(Pe.a)(a)),a.openForm=a.openForm.bind(Object(Pe.a)(a)),a.closeForm=a.closeForm.bind(Object(Pe.a)(a)),a.snackOpen=a.snackOpen.bind(Object(Pe.a)(a)),a.snackClose=a.snackClose.bind(Object(Pe.a)(a)),a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a.printFormData=a.printFormData.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initProcessChange()}},{key:"initProcessChange",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.awrap(oo.getProcessChange("").then((function(t){!0===t.code&&e.setState({data:t.data})})));case 2:case"end":return t.stop()}}))}},{key:"handleChange",value:function(e,t){var a=this.state.newData;a[t]=e;var n=this.state.formState;n.valid=!0,n.errors.map((function(e){e.hasOwnProperty(t)&&(e[t].valid=!0)})),this.setState({newData:a,formState:n})}},{key:"snackOpen",value:function(e,t){this.setState({alertOpen:!0,alertMessage:e,alertClass:t})}},{key:"snackClose",value:function(){this.setState({alertOpen:!1,alertMessage:"",alertClass:"",currentDeleteData:null})}},{key:"printFormData",value:function(e){var t=this;oo.getOneProcessChange("print/".concat(e)).then((function(e){return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:!0===e.code?Co(new Uint8Array(e.data.data),"ProcessChange_".concat(new Date(Date.now()).toString("ddMMyyyy"),".pdf")):t.snackOpen("Oops. Something went wrong while processing your request!","error");case 1:case"end":return a.stop()}}))})).catch((function(e){t.snackOpen("Oops. Something went wrong while processing your request!","error")}))}},{key:"getFormDataFromObject",value:function(e){var t=this,a=new FormData;return void 0!==e&&Object.keys(e).map((function(n,r){if("SupportDocument"===n){var o=new Array;if("Add"===t.state.actionStatus)e[n].map((function(e){o.push({Remarks:e.Remarks,DocumentName:e.Document.name}),a.append("file",e.Document)}));else{var s=(o=e[n]).filter((function(e){return void 0!==e.Document}));void 0!==s&&s.length>0&&s.map((function(e){var t=o.indexOf(e);o[t]={Remarks:e.Remarks,DocumentName:e.Document.name},a.append("file",e.Document)}))}a.set("SupportDocument",JSON.stringify(o))}else if("BuyerInfo"===n){var i=new Array;e[n].map((function(e){i.push({Buyer:e.Buyer,Status:e.Status})})),a.append("BuyerInfo[]",JSON.stringify(i))}else"ProcessCategory"===n?a.append("ProcessCategory",JSON.stringify(e[n])):"Factory_Disposition"===n?a.append("Factory_Disposition",JSON.stringify(e[n])):"Eva_Disposition"===n?a.append("Eva_Disposition",JSON.stringify(e[n])):a.append(n,e[n])})),a}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{style:{margin:"20px 20px 10px 0px"}},r.a.createElement(Ve.a,{title:"Process Change",columns:this.state.columns,data:this.state.data,components:{Toolbar:function(t){return r.a.createElement("div",null,r.a.createElement(Le.MTableToolbar,t),r.a.createElement("div",{style:{padding:"0px 15px"}},r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:function(){return e.openForm(t.rowData)},"aria-label":"add"},r.a.createElement(wt.a,null))))}},actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.data,columns:e.state.columns,fileName:"Process Change"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.initProcessChange()}},{icon:"edit",tooltip:"Edit User",onClick:function(t,a){return e.openForm(a)}},{icon:"delete",tooltip:"Delete User",onClick:function(t,a){return e.openDialog(a)}}],options:{}}),r.a.createElement(Ae.a,{fullScreen:!0,open:this.state.formOpen,onClose:this.closeForm,TransitionComponent:this.Transition},r.a.createElement(w.a,{className:"appBar"},r.a.createElement(F.a,null,r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:this.closeForm,"aria-label":"close"},r.a.createElement(Vt.a,null)),r.a.createElement(x.a,{variant:"h6",className:"app-title"},"Process Change"),r.a.createElement(he.a,{color:"inherit",disabled:this.state.disabled,onClick:this.onSave},"save"))),r.a.createElement(_e.a,null,r.a.createElement(Fo,{handleChange:this.handleChange,formData:this.state.newData,formState:this.state.formState}))),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:600,open:this.state.alertOpen,onClose:this.snackClose,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.closeDialog,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.closeDialog,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDelete,color:"primary"},"Delete"))))}}]),t}(r.a.Component)),Po={properties:{Factory:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Factory cannot be empty."}},Year:{description:"",type:"number",required:!0,allowEmpty:!1,messages:{allowEmpty:"Year cannot be empty."}},Details:{type:"array",minItems:1,messages:{minItems:"Please enter details."}}}},Ao=a(24),Mo={validateFields:function(e){return Ao.validate(e,Po,{cast:!0})},get:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="factoryBasicData/"+e,a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 2:case"end":return a.stop()}}))},getByUid:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="factoryBasicData/"+e,a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 2:case"end":return a.stop()}}))},getFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("factoryBasicData-filter/").concat(e),a.next=3,l.a.awrap(We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 3:return a.abrupt("return",a.sent);case 4:case"end":return a.stop()}}))},update:function(e,t){return Qe("factoryBasicData/"+e,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Updated successfully.",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,errors:e.data.errors,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="factoryBasicData/"+e,n.abrupt("return",He(a,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,message:"Added successfully.",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("factoryBasicData/"+e).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))}},_o={properties:{Month:{description:"",type:"number",required:!0,allowEmpty:!1,messages:{allowEmpty:"Month cannot be empty."}}}},Io=a(24),Ro={validateFields:function(e){return Io.validate(e,_o,{cast:!0})},get:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="factoryBasicDataDetail/"+e,a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 2:case"end":return a.stop()}}))},getToolFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("factoryBasicDataDetail-filter/").concat(e),a.next=3,l.a.awrap(We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 3:return a.abrupt("return",a.sent);case 4:case"end":return a.stop()}}))},update:function(e,t){return Qe("factoryBasicDataDetail/"+e,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Updated successfully.",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,errors:e.data.errors,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="factoryBasicDataDetail/"+e,n.abrupt("return",He(a,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,message:"Added successfully.",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("factoryBasicDataDetail/"+e).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))}},Lo={Month:new Date(Date.now()).getMonth(),BudgetCycle:1,WaterFresh:0,WaterRecycle:0,EffluentDischarge:0,ElectricityEffluent:0,ElectricityPreclean:0,ElectricityWet:0,ElectricityDry:0,Production:0,DryerEnergyBiomass:0,DryerEnergyFuel:0,DryerEnergyGas:0,DryerEnergyCoal:0,ManningIndirect:0,ManningDirect:0,WetlineCapacity:0,DryerCapacity:0,DPCapacity:0,ManningEffciency:0,DowntimeRate:0,NOTRate:0,NCRate:0},Vo=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={formControls:{Month:{valid:!0,message:"",value:a.props.formData.Month},BudgetCycle:{valid:!0,message:"",value:a.props.formData.BudgetCycle},WaterFresh:{valid:!0,message:"",value:a.props.formData.WaterFresh},WaterRecycle:{valid:!0,message:"",value:a.props.formData.WaterRecycle},EffluentDischarge:{valid:!0,message:"",value:a.props.formData.EffluentDischarge},ElectricityEffluent:{valid:!0,message:"",value:a.props.formData.ElectricityEffluent},ElectricityPreclean:{valid:!0,message:"",value:a.props.formData.ElectricityPreclean},ElectricityWet:{valid:!0,message:"",value:a.props.formData.ElectricityWet},ElectricityDry:{valid:!0,message:"",value:a.props.formData.ElectricityDry},Production:{valid:!0,message:"",value:a.props.formData.Production},DryerEnergyBiomass:{valid:!0,message:"",value:a.props.formData.DryerEnergyBiomass},DryerEnergyFuel:{valid:!0,message:"",value:a.props.formData.DryerEnergyFuel},DryerEnergyGas:{valid:!0,message:"",value:a.props.formData.DryerEnergyGas},DryerEnergyCoal:{valid:!0,message:"",value:a.props.formData.DryerEnergyCoal},ManningIndirect:{valid:!0,message:"",value:a.props.formData.ManningIndirect},ManningDirect:{valid:!0,message:"",value:a.props.formData.ManningDirect},WetlineCapacity:{valid:!0,message:"",value:a.props.formData.WetlineCapacity},DryerCapacity:{valid:!0,message:"",value:a.props.formData.DryerCapacity},DPCapacity:{valid:!0,message:"",value:a.props.formData.DPCapacity},ManningEffciency:{valid:!0,message:"",value:a.props.formData.ManningEffciency},DowntimeRate:{valid:!0,message:"",value:a.props.formData.DowntimeRate},NOTRate:{valid:!0,message:"",value:a.props.formData.NOTRate},NCRate:{valid:!0,message:"",value:a.props.formData.NCRate}},formState:{valid:!0,dirty:!1,errors:[]},budgetCycleData:[]},a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initBudgetCycleOptions()}},{key:"initBudgetCycleOptions",value:function(){var e=this;Oa("budgetCycle.json").then((function(e){return e.data})).then((function(t){e.setState({budgetCycleData:t.BudgetCycle})}))}},{key:"handleChange",value:function(e,t){var a=this.state.formControls,n=this.state.formState;void 0===e||0===e.length?(this.props.handleChange(0,t),a[t].value=0):(this.props.handleChange(e,t),a[t].value=e),n.dirty=!0,this.setState({formControls:a,formState:n})}},{key:"renderBudgetCycleOptions",value:function(){return this.state.budgetCycleData.map((function(e,t){return r.a.createElement(et.a,{value:e.Value,key:e.Value,name:e.Name},e.Name)}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"form-container"},r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-evenly",alignItems:"center",md:6,xs:12,sm:12,xl:8,lg:8},r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Da.a,{required:!0,openTo:"month",format:"MMM",label:"Month",views:["month"],value:new Date(this.props.currentYear,this.state.formControls.Month.value,1),onChange:function(t){var a=new Date(t.toString()).getMonth();e.handleChange(a,"Month")},disableFuture:!0})),r.a.createElement(Sa.a,{error:!this.state.formControls.Month.valid,style:{display:this.state.formControls.Month.valid?"none":""}},this.state.formControls.Month.message)),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense",disabled:!0},r.a.createElement(Ea.a,{shrink:!0,error:!this.state.formControls.BudgetCycle.valid},"Budget Cycle"),r.a.createElement(ba.a,{required:!0,id:"machClass",value:this.state.formControls.BudgetCycle.value},this.renderBudgetCycleOptions())),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Xa.a,{id:"WaterFresh",label:"Water Consump. Fresh (M3)",customInput:ge.a,defaultValue:this.state.formControls.WaterFresh.value,onValueChange:function(t){return e.handleChange(t.floatValue,"WaterFresh")},onFocus:function(e){e.target.select()},decimalScale:2,fixedDecimalScale:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Xa.a,{id:"WaterRecycle",label:"Water Consump. Fresh (M3)",customInput:ge.a,defaultValue:this.state.formControls.WaterRecycle.value,onValueChange:function(t){return e.handleChange(t.floatValue,"WaterRecycle")},onFocus:function(e){e.target.select()},decimalScale:2,fixedDecimalScale:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Xa.a,{id:"WaterRecycle",label:"Water Consump. Recycle (M3)",customInput:ge.a,defaultValue:this.state.formControls.WaterRecycle.value,onValueChange:function(t){return e.handleChange(t.floatValue,"WaterRecycle")},onFocus:function(e){e.target.select()},decimalScale:2,fixedDecimalScale:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Xa.a,{id:"EffluentDischarge",label:"Water Consump. Discharge (M3)",customInput:ge.a,defaultValue:this.state.formControls.EffluentDischarge.value,onValueChange:function(t){return e.handleChange(t.floatValue,"EffluentDischarge")},onFocus:function(e){e.target.select()},decimalScale:2,fixedDecimalScale:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Xa.a,{id:"ElectricityEffluent",label:"Electricity Waste Water (Kwh)",customInput:ge.a,defaultValue:this.state.formControls.ElectricityEffluent.value,onValueChange:function(t){return e.handleChange(t.floatValue,"ElectricityEffluent")},onFocus:function(e){e.target.select()},decimalScale:2,fixedDecimalScale:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Xa.a,{id:"ElectricityWet",label:"Electricity Sheeting/Preclean (Kwh)",customInput:ge.a,defaultValue:this.state.formControls.ElectricityWet.value,onValueChange:function(t){return e.handleChange(t.floatValue,"ElectricityWet")},onFocus:function(e){e.target.select()},decimalScale:2,fixedDecimalScale:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Xa.a,{id:"ElectricityWet",label:"Electricity Wet Line (Kwh)",customInput:ge.a,defaultValue:this.state.formControls.ElectricityWet.value,onValueChange:function(t){return e.handleChange(t.floatValue,"ElectricityWet")},onFocus:function(e){e.target.select()},decimalScale:2,fixedDecimalScale:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Xa.a,{id:"ElectricityDry",label:"Electricity Dry Line (Kwh)",customInput:ge.a,defaultValue:this.state.formControls.ElectricityDry.value,onValueChange:function(t){return e.handleChange(t.floatValue,"ElectricityDry")},onFocus:function(e){e.target.select()},decimalScale:2,fixedDecimalScale:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Xa.a,{id:"Production",label:"Production (Kg)",customInput:ge.a,defaultValue:this.state.formControls.Production.value,onValueChange:function(t){return e.handleChange(t.floatValue,"Production")},onFocus:function(e){e.target.select()},decimalScale:2,fixedDecimalScale:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Xa.a,{id:"DryerEnergyBiomass",label:"Dryer Consump. Biomass (Kg)",customInput:ge.a,defaultValue:this.state.formControls.DryerEnergyBiomass.value,onValueChange:function(t){return e.handleChange(t.floatValue,"DryerEnergyBiomass")},onFocus:function(e){e.target.select()},decimalScale:2,fixedDecimalScale:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Xa.a,{id:"DryerEnergyFuel",label:"Dyer Consump. Diesel (Liter)",customInput:ge.a,defaultValue:this.state.formControls.DryerEnergyFuel.value,onValueChange:function(t){return e.handleChange(t.floatValue,"DryerEnergyFuel")},onFocus:function(e){e.target.select()},decimalScale:2,fixedDecimalScale:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Xa.a,{id:"DryerEnergyGas",label:"Dyer Consump. Gas (MMBTU)",customInput:ge.a,defaultValue:this.state.formControls.DryerEnergyGas.value,onValueChange:function(t){return e.handleChange(t.floatValue,"DryerEnergyGas")},onFocus:function(e){e.target.select()},decimalScale:2,fixedDecimalScale:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Xa.a,{id:"DryerEnergyCoal",label:"Dyer Consump. Coal (Kg)",customInput:ge.a,defaultValue:this.state.formControls.DryerEnergyCoal.value,onValueChange:function(t){return e.handleChange(t.floatValue,"DryerEnergyCoal")},onFocus:function(e){e.target.select()},decimalScale:2,fixedDecimalScale:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Xa.a,{id:"DryerEnergyCoal",label:"Manning Indirect (Person)",customInput:ge.a,defaultValue:this.state.formControls.ManningIndirect.value,onValueChange:function(t){return e.handleChange(t.floatValue,"ManningIndirect")},onFocus:function(e){e.target.select()},decimalScale:2,fixedDecimalScale:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Xa.a,{id:"ManningDirect",label:"Manning Direct (Person)",customInput:ge.a,defaultValue:this.state.formControls.ManningDirect.value,onValueChange:function(t){return e.handleChange(t.floatValue,"ManningDirect")},onFocus:function(e){e.target.select()},decimalScale:2,fixedDecimalScale:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Xa.a,{id:"WetlineCapacity",label:"Wet Line Rated Capacity (Kg Wet/Hr)",customInput:ge.a,defaultValue:this.state.formControls.WetlineCapacity.value,onValueChange:function(t){return e.handleChange(t.floatValue,"WetlineCapacity")},onFocus:function(e){e.target.select()},decimalScale:2,fixedDecimalScale:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Xa.a,{id:"DryerCapacity",label:"Dryer Rated Capacity (Kg/Hr)",customInput:ge.a,defaultValue:this.state.formControls.DryerCapacity.value,onValueChange:function(t){return e.handleChange(t.floatValue,"DryerCapacity")},onFocus:function(e){e.target.select()},decimalScale:2,fixedDecimalScale:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Xa.a,{id:"DPCapacity",label:"DP Rated Capacity (Kg/Hr)",customInput:ge.a,defaultValue:this.state.formControls.DPCapacity.value,onValueChange:function(t){return e.handleChange(t.floatValue,"DPCapacity")},onFocus:function(e){e.target.select()},decimalScale:2,fixedDecimalScale:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Xa.a,{id:"ManningEffciency",label:"Manning Efficiency (Kg/PMH)",customInput:ge.a,defaultValue:this.state.formControls.ManningEffciency.value,onValueChange:function(t){return e.handleChange(t.floatValue,"ManningEffciency")},onFocus:function(e){e.target.select()},decimalScale:2,fixedDecimalScale:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Xa.a,{id:"DowntimeRate",label:"Machine Breakdown Time (%)",customInput:ge.a,defaultValue:this.state.formControls.DowntimeRate.value,onValueChange:function(t){return e.handleChange(t.floatValue,"DowntimeRate")},onFocus:function(e){e.target.select()},decimalScale:2,fixedDecimalScale:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Xa.a,{id:"NOTRate",label:"Dryer NOT (%)",customInput:ge.a,defaultValue:this.state.formControls.NOTRate.value,onValueChange:function(t){return e.handleChange(t.floatValue,"NOTRate")},onFocus:function(e){e.target.select()},decimalScale:2,fixedDecimalScale:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Xa.a,{id:"NCRate",label:"NC Rate (%)",customInput:ge.a,defaultValue:this.state.formControls.NCRate.value,onValueChange:function(t){return e.handleChange(t.floatValue,"NCRate")},onFocus:function(e){e.target.select()},decimalScale:2,fixedDecimalScale:!0}))),r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-evenly",alignItems:"center",sm:12}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=t.formControls;return e.formState.valid||Array.isArray(e.formState.errors)&&e.formState.errors.map((function(e){a[e.property].valid=!1,a[e.property].message=e.message})),{formState:e.formState,formControls:a}}}]),t}(r.a.Component),Bo=(Object(n.forwardRef)((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),r.a.forwardRef((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).openDialog=function(e){a.setState({dialogOpen:!0,currentDeleteData:e,dialogMessage:r.a.createElement("span",null,"Are you sure to delete this month record? This cannot be undone.")})},a.closeDialog=function(){a.setState({dialogOpen:!1,currentDeleteData:null,dialogMessage:""})},a.openForm=function(e){void 0===e?a.setState({actionStatus:"Add",newData:Object(me.a)({},Lo)}):a.setState({actionStatus:"Update",newData:Object(me.a)({},e)}),a.setState({formOpen:!0,formState:{valid:!0,dirty:!1,errors:[]}})},a.closeForm=function(){a.setState({formOpen:!1,newData:{},actionStatus:""})},a.onSave=function(){var e=a.state.formState,t=Object(me.a)({},a.state.newData),n=a.state.data.find((function(e){return e.Month===t.Month}));if(void 0!==n&&n!==t&&n._id!==t._id)e.errors.push({property:"Month",message:"Record for this month already exists."}),e.valid=!1;else if(a.state.formState.valid){var r=Ro.validateFields(t);if(r.valid){var o=Object(je.a)(a.state.data);if("Add"===a.state.actionStatus)t.LastUpdatedBy=a.state.operator,t.CreatedBy=a.state.operator,o.push(t);else{t.LastUpdatedBy=a.state.operator;var s=o.find((function(e){return e._id===t._id})),i=o.indexOf(s);o[i]=t}a.setState({data:o}),a.props.handleDetailChange(o,"Details"),a.closeForm()}else{e.valid=!1;var l=r.errors.map((function(e){var t={};return t.property=e.property,t.message=e.message,t}));e.errors=l}}a.setState({formState:e})},a.onDelete=function(){if(null!==a.state.currentDeleteData){var e=Object(je.a)(a.state.data),t=e.indexOf(a.state.currentDeleteData);e.splice(t,1),a.setState({data:e}),a.props.handleDetailChange(e,"Details"),a.closeDialog()}},a.state={columns:[{title:"Month ",field:"Month",lookup:{}},{title:"Budget Cycle",field:"BudgetCycle",lookup:{}},{title:"Water Consump. Fresh (M3)",field:"WaterFresh",render:function(e){return r.a.createElement(Xa.a,{value:e.WaterFresh,displayType:"text",decimalScale:2,fixedDecimalScale:!0})}},{title:"Water Consump. Recycle (M3)",field:"WaterRecycle",render:function(e){return r.a.createElement(Xa.a,{value:e.WaterRecycle,displayType:"text",decimalScale:2,fixedDecimalScale:!0})}},{title:"Water Consump. Discharge (M3)",field:"EffluentDischarge",render:function(e){return r.a.createElement(Xa.a,{value:e.EffluentDischarge,displayType:"text",decimalScale:2,fixedDecimalScale:!0})}},{title:"Electricity Waste Water (Kwh)",field:"ElectricityEffluent",render:function(e){return r.a.createElement(Xa.a,{value:e.ElectricityEffluent,displayType:"text",decimalScale:2,fixedDecimalScale:!0})}},{title:"Electricity Sheeting/Preclean (Kwh)",field:"ElectricityPreclean",render:function(e){return r.a.createElement(Xa.a,{value:e.ElectricityPreclean,displayType:"text",decimalScale:2,fixedDecimalScale:!0})}},{title:"Electricity Wet Line (Kwh)",field:"ElectricityWet",render:function(e){return r.a.createElement(Xa.a,{value:e.ElectricityWet,displayType:"text",decimalScale:2,fixedDecimalScale:!0})}},{title:"Electricity Dry Line (Kwh)",field:"ElectricityDry",render:function(e){return r.a.createElement(Xa.a,{value:e.ElectricityDry,displayType:"text",decimalScale:2,fixedDecimalScale:!0})}},{title:"Production (Kg)",field:"Production",render:function(e){return r.a.createElement(Xa.a,{value:e.Production,displayType:"text",decimalScale:2,fixedDecimalScale:!0})}},{title:"Dryer Consump. Biomass (Kg)",field:"DryerEnergyBiomass",render:function(e){return r.a.createElement(Xa.a,{value:e.DryerEnergyBiomass,displayType:"text",decimalScale:2,fixedDecimalScale:!0})}},{title:"Dyer Consump. Diesel (Liter)",field:"DryerEnergyFuel",render:function(e){return r.a.createElement(Xa.a,{value:e.DryerEnergyFuel,displayType:"text",decimalScale:2,fixedDecimalScale:!0})}},{title:"Dyer Consump. Gas (MMBTU)",field:"DryerEnergyGas",render:function(e){return r.a.createElement(Xa.a,{value:e.DryerEnergyGas,displayType:"text",decimalScale:2,fixedDecimalScale:!0})}},{title:"Dyer Consump. Coal (Kg)",field:"DryerEnergyCoal",render:function(e){return r.a.createElement(Xa.a,{value:e.DryerEnergyCoal,displayType:"text",decimalScale:2,fixedDecimalScale:!0})}},{title:"Manning Indirect (Person)",field:"ManningIndirect",render:function(e){return r.a.createElement(Xa.a,{value:e.ManningIndirect,displayType:"text",decimalScale:2,fixedDecimalScale:!0})}},{title:"Manning Direct (Person)",field:"ManningDirect",render:function(e){return r.a.createElement(Xa.a,{value:e.ManningDirect,displayType:"text",decimalScale:2,fixedDecimalScale:!0})}},{title:"Wet Line Rated Capacity (Kg Wet/Hr)",field:"WetlineCapacity",render:function(e){return r.a.createElement(Xa.a,{value:e.WetlineCapacity,displayType:"text",decimalScale:2,fixedDecimalScale:!0})}},{title:"Dryer Rated Capacity (Kg/Hr)",field:"DryerCapacity",render:function(e){return r.a.createElement(Xa.a,{value:e.DryerCapacity,displayType:"text",decimalScale:2,fixedDecimalScale:!0})}},{title:"DP Rated Capacity (Kg/Hr)",field:"DPCapacity",render:function(e){return r.a.createElement(Xa.a,{value:e.DPCapacity,displayType:"text",decimalScale:2,fixedDecimalScale:!0})}},{title:"Manning Efficiency (Kg/PMH)",field:"ManningEffciency",render:function(e){return r.a.createElement(Xa.a,{value:e.ManningEffciency,displayType:"text",decimalScale:2,fixedDecimalScale:!0})}},{title:"Machine Breakdown Time (%)",field:"DowntimeRate",render:function(e){return r.a.createElement(Xa.a,{value:e.DowntimeRate,displayType:"text",decimalScale:2,fixedDecimalScale:!0})}},{title:"Dryer NOT (%)",field:"NOTRate",render:function(e){return r.a.createElement(Xa.a,{value:e.NOTRate,displayType:"text",decimalScale:2,fixedDecimalScale:!0})}},{title:"NC Rate (%)",field:"NCRate",render:function(e){return r.a.createElement(Xa.a,{value:e.NCRate,displayType:"text",decimalScale:2,fixedDecimalScale:!0})}}],data:e.data,currentDeleteData:null,newData:Lo,formOpen:!1,dialogOpen:!1,dialogMessage:"",disabled:!1,actionStatus:"",formState:{valid:!0,dirty:!1,errors:[]},operator:"Admin"},a.openDialog=a.openDialog.bind(Object(Pe.a)(a)),a.closeDialog=a.closeDialog.bind(Object(Pe.a)(a)),a.openForm=a.openForm.bind(Object(Pe.a)(a)),a.closeForm=a.closeForm.bind(Object(Pe.a)(a)),a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initBudgetCycleData(),this.initMonthData()}},{key:"initBudgetCycleData",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:Oa("budgetCycle.json").then((function(e){return e.data})).then((function(t){var a={};t.BudgetCycle.forEach((function(e){return a[e.Value]=e.Name}));var n=Object(je.a)(e.state.columns),r=n.findIndex((function(e){return"BudgetCycle"===e.field}));n[r].lookup=a,e.setState({columns:n})}));case 1:case"end":return t.stop()}}))}},{key:"initMonthData",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:Oa("month.json").then((function(e){return e.data})).then((function(t){var a={};t.Month.forEach((function(e){return a[e.Value]=e.Name}));var n=Object(je.a)(e.state.columns),r=n.findIndex((function(e){return"Month"===e.field}));n[r].lookup=a,e.setState({columns:n})}));case 1:case"end":return t.stop()}}))}},{key:"handleChange",value:function(e,t){var a=this.state.newData;a[t]=e;var n=this.state.formState;n.valid=!0,this.setState({newData:a,formState:n})}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,null,r.a.createElement(Ve.a,{title:"Detail Data",columns:this.state.columns,data:this.state.data,components:{Toolbar:function(e){return r.a.createElement("div",null,r.a.createElement(Le.MTableToolbar,e))}},actions:[{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){}},{icon:"add_box",tooltip:"Add",isFreeAction:!0,onClick:function(t){return e.openForm()}},{icon:"edit",tooltip:"Edit",onClick:function(t,a){return e.openForm(a)}},{icon:"delete",tooltip:"Delete",onClick:function(t,a){return e.openDialog(a)}}],options:{search:!1,actionsColumnIndex:-1}}),r.a.createElement(Ae.a,{fullWidth:!0,maxWidth:"md",open:this.state.formOpen,onClose:this.closeForm,TransitionComponent:this.Transition},r.a.createElement(w.a,{className:"appBar"},r.a.createElement(F.a,null,r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:this.closeForm,"aria-label":"close"},r.a.createElement(Vt.a,null)),r.a.createElement(x.a,{variant:"h6",className:"app-title"},"Factory Basic Data Details"),r.a.createElement(he.a,{color:"inherit",disabled:this.state.disabled,onClick:this.onSave},"save"))),r.a.createElement(_e.a,null,r.a.createElement(Vo,{handleChange:this.handleChange,formData:this.state.newData,formState:this.state.formState,currentYear:this.props.currentYear}))),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.closeDialog,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.closeDialog,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDelete,color:"primary"},"Delete"))))}}]),t}(r.a.Component)),Uo=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={formControls:{Factory:{valid:!0,message:"",value:void 0===a.props.formData.Factory||""===a.props.formData.Factory?"":a.props.formData.Factory._id},Year:{valid:!0,message:"",value:a.props.formData.Year},Remarks:{valid:!0,message:"",value:a.props.formData.Remarks},Details:{valid:!0,message:"",value:a.props.formData.Details}},formState:{valid:!0,dirty:!1,errors:[]},Details:[]},a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"handleChange",value:function(e,t){var a=this.state.formControls,n=this.state.formState;void 0===e||0===e.length?(a[t].valid=!1,a[t].message="".concat(t," cannot be empty.")):(a[t].valid=!0,a[t].message=""),this.props.handleChange(e,t),a[t].value=e,n.dirty=!0,this.setState({formControls:a,formState:n})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"form-container"},r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-evenly",alignItems:"center",md:6,xs:12,sm:12,xl:8,lg:8},r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Hr,{handleChange:this.handleChange,selectedValue:this.state.formControls.Factory.value,formControl:this.state.formControls.Factory,propertyName:"Factory"})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Da.a,{required:!0,openTo:"year",format:"yyyy",label:"Year",views:["year"],value:new Date(this.state.formControls.Year.value,0,1),onChange:function(t){var a=new Date(t.toString()).getFullYear();e.handleChange(a,"Year")},disabled:void 0!==this.props.formData._id,disableFuture:!0})),r.a.createElement(Sa.a,{error:!this.state.formControls.Year.valid,style:{display:this.state.formControls.Year.valid?"none":""}},this.state.formControls.Year.message)),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(ge.a,{id:"Remarks",label:"Remarks",defaultValue:this.state.formControls.Remarks.value,onChange:function(t){return e.handleChange(t.target.value,"Remarks")},multiline:!0}))),r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-evenly",alignItems:"center",sm:12},r.a.createElement("div",{style:{overflowX:"scroll"}},r.a.createElement(Bo,{data:this.state.formControls.Details.value,handleDetailChange:this.handleChange,currentYear:this.state.formControls.Year.value}))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=t.formControls;return e.formState.valid||Array.isArray(e.formState.errors)&&e.formState.errors.map((function(e){a[e.property].valid=!1,a[e.property].message=e.message})),{formState:e.formState,formControls:a}}}]),t}(r.a.Component),qo={Factory:"",Year:new Date(Date.now()).getFullYear(),Remarks:"",Details:[],CreatedAt:new Date(Date.now()).toLocaleString(),CreatedBy:"Admin",LastUpdatedAt:new Date(Date.now()).toLocaleString(),LastUpdatedBy:"Admin"},Go=(Object(n.forwardRef)((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),r.a.forwardRef((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).openDialog=function(e){a.setState({dialogOpen:!0,currentDeleteData:e,dialogMessage:r.a.createElement("span",null,"Are you sure to delete this record factory"," ",r.a.createElement("b",null,e.Factory.FctyCode," "),"in year ",r.a.createElement("b",null,e.Year," "),"? This cannot be undone.")})},a.closeDialog=function(){a.setState({dialogOpen:!1,currentDeleteData:null,dialogMessage:""})},a.openForm=function(e){void 0===e?a.setState({actionStatus:"Add",newData:Object(me.a)({},qo)}):a.setState({actionStatus:"Update",newData:Object(me.a)({},e)}),a.setState({formOpen:!0,formState:{valid:!0,dirty:!1,errors:[]}})},a.closeForm=function(){a.setState({formOpen:!1,newData:{},actionStatus:""})},a.onSave=function(){var e=a.state.formState,t=Object(me.a)({},a.state.newData),n=Mo.validateFields(t);if(n.valid){var r=Object(je.a)(a.state.data);"Add"===a.state.actionStatus?(t.LastUpdatedBy=a.state.operator,t.CreatedBy=a.state.operator,Mo.add("",t).then((function(t){!0===t.code?(e.valid=!0,r.push(t.data),a.setState({data:r}),a.closeForm(),a.snackOpen("Factory basic data created successfully!","success")):(e.valid=!1,e.errors=t.errors,a.snackOpen("Please fix the error(s) highlighted to save the details!","error"))})).catch((function(e){a.snackOpen("Oops, something went wrong while processing your request!","error")}))):(t.LastUpdatedBy=a.state.operator,Mo.update("",t).then((function(n){if(!0===n.code){e.valid=!0;var o=r.find((function(e){return e._id===t._id})),s=r.indexOf(o);r[s]=n.data,a.setState({data:r}),a.closeForm(),a.snackOpen("Factory basic data updated successfully!","success")}else e.valid=!1,e.errors=n.errors,a.snackOpen("Please fix the error(s) highlighted to save the details!","error")})).catch((function(e){a.snackOpen("Oops, something went wrong while processing your request!","error")})))}else{e.valid=!1;var o=n.errors.map((function(e){var t={};return t.property=e.property,t.message=e.message,t}));e.errors=o,void 0!==o.find((function(e){return"Details"===e.property}))?a.snackOpen(o.find((function(e){return"Details"===e.property})).message,"error"):a.snackOpen("Please fix the error(s) highlighted to save the details!","error")}a.setState({formState:e})},a.onDelete=function(){null!==a.state.currentDeleteData&&Mo.delete("".concat(a.state.currentDeleteData._id)).then((function(e){if(!0===e.code){var t=Object(je.a)(a.state.data),n=t.indexOf(a.state.currentDeleteData);t.splice(n,1),a.snackOpen("Successfully Deleted!","success"),a.closeDialog(),a.setState({data:t})}else a.snackOpen("Oops, something went wrong while processing your request!","error")}))},a.onEdit=function(e){a.openForm(e)},a.state={columns:[{field:"_id",hidden:!0},{title:"Factory",field:"Factory",render:function(e){return r.a.createElement("span",null,void 0===e.Factory?"":e.Factory.FctyCode)}},{title:"Year",field:"Year"},{title:"Detail Count",field:"Details",render:function(e){return r.a.createElement("span",null,e.Details.length)}},{title:"Remarks",field:"Remarks"},{title:"Operator",field:"LastUpdatedBy"},{title:"Last Updated",field:"LastUpdatedAt",render:function(e){return r.a.createElement("span",null,void 0===e?"":new Date(e.LastUpdatedAt).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}))}}],data:[],currentDeleteData:null,newData:qo,formOpen:!1,dialogOpen:!1,dialogMessage:"",disabled:!1,actionStatus:"",formState:{valid:!0,dirty:!1,errors:[]},operator:"Admin"},a.openDialog=a.openDialog.bind(Object(Pe.a)(a)),a.closeDialog=a.closeDialog.bind(Object(Pe.a)(a)),a.openForm=a.openForm.bind(Object(Pe.a)(a)),a.closeForm=a.closeForm.bind(Object(Pe.a)(a)),a.snackOpen=a.snackOpen.bind(Object(Pe.a)(a)),a.snackClose=a.snackClose.bind(Object(Pe.a)(a)),a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initFactoryBasicData()}},{key:"initFactoryBasicData",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.awrap(Mo.get("").then((function(t){!0===t.code&&e.setState({data:t.data})})));case 2:case"end":return t.stop()}}))}},{key:"handleChange",value:function(e,t){var a=this.state.newData;a[t]=e;var n=this.state.formState;n.valid=!0,this.setState({newData:a,formState:n})}},{key:"snackOpen",value:function(e,t){this.setState({alertOpen:!0,alertMessage:e,alertClass:t})}},{key:"snackClose",value:function(){this.setState({alertOpen:!1,alertMessage:"",alertClass:"",currentDeleteData:null})}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{style:{margin:"20px 20px 10px 0px"}},r.a.createElement(Ve.a,{title:"Factory Basic Data ",columns:this.state.columns,data:this.state.data,components:{Toolbar:function(t){return r.a.createElement("div",null,r.a.createElement(Le.MTableToolbar,t),r.a.createElement("div",{style:{padding:"0px 15px"}},r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:function(){return e.openForm()},"aria-label":"add"},r.a.createElement(wt.a,null))))}},actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.data,columns:e.state.columns,fileName:"Factory Basic Data"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.initFactoryBasicData()}},{icon:"edit",tooltip:"Edit",onClick:function(t,a){return e.openForm(a)}},{icon:"delete",tooltip:"Delete",onClick:function(t,a){return e.openDialog(a)}}],options:{}}),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:6e3,open:this.state.alertOpen,onClose:this.snackClose,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}),r.a.createElement(Ae.a,{fullScreen:!0,open:this.state.formOpen,onClose:this.closeForm,TransitionComponent:this.Transition},r.a.createElement(w.a,{className:"appBar"},r.a.createElement(F.a,null,r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:this.closeForm,"aria-label":"close"},r.a.createElement(Vt.a,null)),r.a.createElement(x.a,{variant:"h6",className:"app-title"},"Factory Basic Data Details"),r.a.createElement(he.a,{color:"inherit",disabled:this.state.disabled,onClick:this.onSave},"save"))),r.a.createElement(_e.a,null,r.a.createElement(Uo,{handleChange:this.handleChange,formData:this.state.newData,formState:this.state.formState}))),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.closeDialog,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.closeDialog,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDelete,color:"primary"},"Delete"))))}}]),t}(r.a.Component)),Wo={properties:{ConvFactory:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Factory cannot be empty."}},ConvFuelType:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Fuel type cannot be empty."}},ConvGasType:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Gas type cannot be empty."}},ConvBiomassType:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Biomass type cannot be empty."}},ConvCoalType:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Coal type cannot be empty."}}}},Ho=a(24),Qo={validateFields:function(e){return Ho.validate(e,Wo,{cast:!0})},get:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="factoryEnergyConversion/"+e,a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 2:case"end":return a.stop()}}))},getByUid:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="factoryEnergyConversion/"+e,a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 2:case"end":return a.stop()}}))},getToolFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("factoryEnergyConversion-filter/").concat(e),a.next=3,l.a.awrap(We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 3:return a.abrupt("return",a.sent);case 4:case"end":return a.stop()}}))},update:function(e,t){return Qe("factoryEnergyConversion/"+e,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Updated successfully.",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,errors:e.data.errors,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="factoryEnergyConversion/"+e,n.abrupt("return",He(a,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,message:"Added successfully.",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("factoryEnergyConversion/"+e).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))}},zo=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={energyStandardData:[]},a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initEnergyStandardData()}},{key:"initEnergyStandardData",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===this.props.energyCat){t.next=5;break}return t.next=3,l.a.awrap(Lr.getToolFilter("?CatName=".concat(this.props.energyCat)).then((function(t){if(!0===t.code&&t.data.length>0){var a=t.data[0]._id;Rr.getToolFilter("?EnergyCat=".concat(a)).then((function(t){!0===t.code&&e.setState({energyStandardData:t.data})})).catch((function(e){throw e}))}})).catch((function(e){throw e})));case 3:t.next=7;break;case 5:return t.next=7,l.a.awrap(Rr.get("").then((function(t){!0===t.code&&e.setState({energyStandardData:t.data})})).catch((function(e){throw e})));case 7:case"end":return t.stop()}}),null,this)}},{key:"renderOptions",value:function(){return this.state.energyStandardData.map((function(e,t){return r.a.createElement(et.a,{label:"Select Type",value:e._id,key:e.EnergyName,name:e.EnergyName},r.a.createElement(E.a,{style:{width:"100%"}},r.a.createElement(b.a,{alignItems:"flex-start"},r.a.createElement(S.a,{primary:e.EnergyName,style:{width:"40%"}}),r.a.createElement(D.a,{only:"xs"},r.a.createElement(S.a,{primary:r.a.createElement(Xa.a,{value:e.EnergyConst,displayType:"text",decimalScale:2,fixedDecimalScale:!0}),style:{width:"20%"}}),r.a.createElement(S.a,{primary:e.EnergyFuelUnit+" to KCal",style:{width:"40%"}})))))}))}},{key:"handleChange",value:function(e,t){var a=this.state.energyStandardData.find((function(t){return t._id===e.target.value}));void 0!==a&&this.props.handleChange(a,t)}},{key:"render",value:function(){var e=this;return r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Ea.a,{shrink:!0,htmlFor:"energyStd",required:!0,error:!this.props.formControl.valid},void 0===this.props.energyCat?"Energy Type":this.props.energyCat),r.a.createElement(ba.a,{id:this.props.propertyName,value:void 0===this.props.selectedValue._id?this.props.selectedValue:this.props.selectedValue._id,error:!this.props.formControl.valid,onChange:function(t){return e.handleChange(t,e.props.propertyName)},displayEmpty:!0},r.a.createElement(et.a,{value:""},r.a.createElement("em",null,"Select ")),this.renderOptions()),r.a.createElement(Sa.a,{error:!this.props.formControl.valid,style:{display:this.props.formControl.valid?"none":""}},this.props.formControl.valid?"":this.props.formControl.message))}}]),t}(n.Component),Yo=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={formControls:{ConvFactory:{valid:!0,message:"",value:void 0===a.props.formData.ConvFactory||""===a.props.formData.ConvFactory?"":a.props.formData.ConvFactory._id},ConvFuelType:{valid:!0,message:"",value:void 0===a.props.formData.ConvFuelType||""===a.props.formData.ConvFuelType?"":a.props.formData.ConvFuelType},ConvGasType:{valid:!0,message:"",value:void 0===a.props.formData.ConvGasType||""===a.props.formData.ConvGasType?"":a.props.formData.ConvGasType},ConvBiomassType:{valid:!0,message:"",value:void 0===a.props.formData.ConvBiomassType||""===a.props.formData.ConvBiomassType?"":a.props.formData.ConvBiomassType},ConvCoalType:{valid:!0,message:"",value:void 0===a.props.formData.ConvCoalType||""===a.props.formData.ConvCoalType?"":a.props.formData.ConvCoalType}},formState:{valid:!0,dirty:!1,errors:[]},fctyBDDetails:[]},a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"handleChange",value:function(e,t){var a=this.state.formControls,n=this.state.formState;void 0===e||0===e.length?(a[t].valid=!1,a[t].message="".concat(t," cannot be empty.")):(a[t].valid=!0,a[t].message=""),this.props.handleChange(e,t),a[t].value=e,n.dirty=!0,this.setState({formControls:a,formState:n})}},{key:"render",value:function(){return r.a.createElement("div",{className:"form-container"},r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-evenly",alignItems:"center",md:6,xs:12,sm:12,xl:8,lg:8},r.a.createElement(Hr,{handleChange:this.handleChange,selectedValue:this.state.formControls.ConvFactory.value,formControl:this.state.formControls.ConvFactory,propertyName:"ConvFactory"}),r.a.createElement(zo,{handleChange:this.handleChange,selectedValue:this.state.formControls.ConvFuelType.value,formControl:this.state.formControls.ConvFuelType,propertyName:"ConvFuelType",energyCat:"Fuel"}),r.a.createElement(zo,{handleChange:this.handleChange,selectedValue:this.state.formControls.ConvGasType.value,formControl:this.state.formControls.ConvGasType,propertyName:"ConvGasType",energyCat:"Gas"}),r.a.createElement(zo,{handleChange:this.handleChange,selectedValue:this.state.formControls.ConvBiomassType.value,formControl:this.state.formControls.ConvBiomassType,propertyName:"ConvBiomassType",energyCat:"Biomass"}),r.a.createElement(zo,{handleChange:this.handleChange,selectedValue:this.state.formControls.ConvCoalType.value,formControl:this.state.formControls.ConvCoalType,propertyName:"ConvCoalType",energyCat:"Coal"})))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=t.formControls;return e.formState.valid||Array.isArray(e.formState.errors)&&e.formState.errors.map((function(e){a[e.property].valid=!1,a[e.property].message=e.message})),{formState:e.formState,formControls:a}}}]),t}(r.a.Component),Ko={ConvFactory:"",ConvFuelType:"",ConvGasType:"",ConvBiomassType:"",ConvCoalType:"",CreatedAt:new Date(Date.now()).toLocaleString(),CreatedBy:"Admin",LastUpdatedAt:new Date(Date.now()).toLocaleString(),LastUpdatedBy:"Admin"},Jo=(Object(n.forwardRef)((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),r.a.forwardRef((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).openDialog=function(e){a.setState({dialogOpen:!0,currentDeleteData:e,dialogMessage:r.a.createElement("span",null,"Are you sure to delete this record for factory",r.a.createElement("b",null," ",e.ConvFactory.FctyCode),"?")})},a.closeDialog=function(){a.setState({dialogOpen:!1,currentDeleteData:null,dialogMessage:""})},a.openForm=function(e){void 0===e?a.setState({actionStatus:"Add",newData:Object(me.a)({},Ko)}):a.setState({actionStatus:"Update",newData:Object(me.a)({},e)}),a.setState({formOpen:!0,formState:{valid:!0,dirty:!1,errors:[]}})},a.closeForm=function(){a.setState({formOpen:!1,newData:{},actionStatus:""})},a.onSave=function(){var e=a.state.formState,t=Object(me.a)({},a.state.newData),n=Qo.validateFields(t);if(n.valid){var r=Object(je.a)(a.state.data);"Add"===a.state.actionStatus?(t.LastUpdatedBy=a.state.operator,t.CreatedBy=a.state.operator,Qo.add("",t).then((function(t){!0===t.code?(e.valid=!0,r.push(t.data),a.setState({data:r}),a.closeForm(),a.snackOpen("Factory energy conversion created successfully!","success")):(e.valid=!1,e.errors=t.errors,a.snackOpen("Please fix the error(s) highlighted to save the details!","error"))})).catch((function(e){a.snackOpen("Oops, something went wrong while processing your request!","error")}))):(t.LastUpdatedBy=a.state.operator,Qo.update("",t).then((function(n){if(!0===n.code){e.valid=!0;var o=r.find((function(e){return e._id===t._id})),s=r.indexOf(o);r[s]=n.data,a.setState({data:r}),a.closeForm(),a.snackOpen("Factory energy conversion updated successfully!","success")}else e.valid=!1,e.errors=n.errors,a.snackOpen("Please fix the error(s) highlighted to save the details!","error")})).catch((function(e){a.snackOpen("Oops, something went wrong while processing your request!","error")})))}else{e.valid=!1;var o=n.errors.map((function(e){var t={};return t.property=e.property,t.message=e.message,t}));e.errors=o,a.snackOpen("Please fix the error(s) highlighted to save the details!","error")}a.setState({formState:e})},a.onDelete=function(){null!==a.state.currentDeleteData&&Qo.delete("".concat(a.state.currentDeleteData._id)).then((function(e){if(!0===e.code){var t=Object(je.a)(a.state.data),n=t.indexOf(a.state.currentDeleteData);t.splice(n,1),a.snackOpen("Successfully Deleted!","success"),a.closeDialog(),a.setState({data:t})}else a.snackOpen("Oops, something went wrong while processing your request!","error")}))},a.onEdit=function(e){a.openForm(e)},a.state={columns:[{field:"_id",hidden:!0},{title:"Factory",field:"ConvFactory",render:function(e){return r.a.createElement("span",null,void 0===e.ConvFactory?"":e.ConvFactory.FctyCode)}},{title:"Fuel (Liter to Kcal)",field:"ConvFuelType",render:function(e){return r.a.createElement("span",null,void 0===e.ConvFuelType?"":r.a.createElement(Xa.a,{value:e.ConvFuelType.EnergyConst,displayType:"text",decimalScale:2,fixedDecimalScale:!0}))}},{title:"Gas (MMBTU to Kcal)",field:"ConvGasType",render:function(e){return r.a.createElement("span",null,void 0===e.ConvGasType?"":r.a.createElement(Xa.a,{value:e.ConvGasType.EnergyConst,displayType:"text",decimalScale:2,fixedDecimalScale:!0}))}},{title:"Biomass (Kg to Kcal)",field:"ConvBiomassType",render:function(e){return r.a.createElement("span",null,void 0===e.ConvBiomassType?"":r.a.createElement(Xa.a,{value:e.ConvBiomassType.EnergyConst,displayType:"text",decimalScale:2,fixedDecimalScale:!0}))}},{title:"Coal (Kg to Kcal)",field:"ConvCoalType",render:function(e){return r.a.createElement("span",null,void 0===e.ConvCoalType?"":r.a.createElement(Xa.a,{value:e.ConvCoalType.EnergyConst,displayType:"text",decimalScale:2,fixedDecimalScale:!0}))}},{title:"Operator",field:"LastUpdatedBy"},{title:"Last Updated",field:"LastUpdatedAt",render:function(e){return r.a.createElement("span",null,void 0===e?"":new Date(e.LastUpdatedAt).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}))}}],data:[],currentDeleteData:null,newData:Ko,formOpen:!1,dialogOpen:!1,dialogMessage:"",disabled:!1,actionStatus:"",formState:{valid:!0,dirty:!1,errors:[]},operator:"Admin"},a.openDialog=a.openDialog.bind(Object(Pe.a)(a)),a.closeDialog=a.closeDialog.bind(Object(Pe.a)(a)),a.openForm=a.openForm.bind(Object(Pe.a)(a)),a.closeForm=a.closeForm.bind(Object(Pe.a)(a)),a.snackOpen=a.snackOpen.bind(Object(Pe.a)(a)),a.snackClose=a.snackClose.bind(Object(Pe.a)(a)),a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initfactoryEnergyConversion()}},{key:"initfactoryEnergyConversion",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.awrap(Qo.get("").then((function(t){!0===t.code&&e.setState({data:t.data})})));case 2:case"end":return t.stop()}}))}},{key:"handleChange",value:function(e,t){var a=this.state.newData;a[t]=e;var n=this.state.formState;n.valid=!0,this.setState({newData:a,formState:n})}},{key:"snackOpen",value:function(e,t){this.setState({alertOpen:!0,alertMessage:e,alertClass:t})}},{key:"snackClose",value:function(){this.setState({alertOpen:!1,alertMessage:"",alertClass:"",currentDeleteData:null})}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{style:{margin:"20px 20px 10px 0px"}},r.a.createElement(Ve.a,{title:"Factory Energy Conversion ",columns:this.state.columns,data:this.state.data,components:{Toolbar:function(t){return r.a.createElement("div",null,r.a.createElement(Le.MTableToolbar,t),r.a.createElement("div",{style:{padding:"0px 15px"}},r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:function(){return e.openForm()},"aria-label":"add"},r.a.createElement(wt.a,null))))}},actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.data,columns:e.state.columns,fileName:"Factory Energy Conversion"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.initfactoryEnergyConversion()}},{icon:"edit",tooltip:"Edit",onClick:function(t,a){return e.openForm(a)}},{icon:"delete",tooltip:"Delete",onClick:function(t,a){return e.openDialog(a)}}],options:{}}),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:6e3,open:this.state.alertOpen,onClose:this.snackClose,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}),r.a.createElement(Ae.a,{fullScreen:!0,open:this.state.formOpen,onClose:this.closeForm,TransitionComponent:this.Transition},r.a.createElement(w.a,{className:"appBar"},r.a.createElement(F.a,null,r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:this.closeForm,"aria-label":"close"},r.a.createElement(Vt.a,null)),r.a.createElement(x.a,{variant:"h6",className:"app-title"},"Factory Energy Conversion Details"),r.a.createElement(he.a,{color:"inherit",disabled:this.state.disabled,onClick:this.onSave},"save"))),r.a.createElement(_e.a,null,r.a.createElement(Yo,{handleChange:this.handleChange,formData:this.state.newData,formState:this.state.formState}))),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.closeDialog,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.closeDialog,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDelete,color:"primary"},"Delete"))))}}]),t}(r.a.Component)),Zo={properties:{Factory:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Factory cannot be empty."}},Year:{description:"",type:"number",required:!0,allowEmpty:!1,messages:{allowEmpty:"Year cannot be empty."}},Shift:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Shift cannot be empty."}},Details:{type:"array",minItems:1,messages:{minItems:"Please enter details."}}}},Xo=a(24),$o={validateFields:function(e){return Xo.validate(e,Zo,{cast:!0})},get:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="budgetWorkingDay/"+e,a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 2:case"end":return a.stop()}}))},getByUid:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="budgetWorkingDay/"+e,a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 2:case"end":return a.stop()}}))},getToolFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("budgetWorkingDay-filter/").concat(e),a.next=3,l.a.awrap(We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 3:return a.abrupt("return",a.sent);case 4:case"end":return a.stop()}}))},update:function(e,t){return Qe("budgetWorkingDay/"+e,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Updated successfully.",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,errors:e.data.errors,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="budgetWorkingDay/"+e,n.abrupt("return",He(a,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,message:"Added successfully.",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("budgetWorkingDay/"+e).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))}},es={properties:{Factory:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Factory cannot be empty."}},Name:{description:"",type:"string",required:!0,allowEmpty:!1,messages:{allowEmpty:"Shfit name cannot be empty"}},TimeBegin:{description:"",type:["date","string"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Time begin cannot be empty"}},TimeEnd:{description:"",type:["date","string"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Time end cannot be empty"}}}},ts=a(24),as={validateFields:function(e){return ts.validate(e,es,{cast:!0})},get:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="shift/"+e,a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 2:case"end":return a.stop()}}))},getToolFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("shift-filter/").concat(e),a.next=3,l.a.awrap(We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 3:return a.abrupt("return",a.sent);case 4:case"end":return a.stop()}}))},update:function(e,t){return Qe("shift/"+e,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Shift updated successfully.",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="shift/"+e,n.abrupt("return",He(a,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,message:"Shift added successfully.",data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("shift/"+e).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e}))}},ns=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={shiftData:[]},a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){""!==this.props.factoryId&&this.fetchShiftData(this.props.factoryId)}},{key:"componentDidUpdate",value:function(e){this.props.factoryId!==e.factoryId&&void 0!==this.props.factoryId&&""!==this.props.factoryId&&this.fetchShiftData(this.props.factoryId)}},{key:"fetchShiftData",value:function(e){var t=this;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:as.getToolFilter("?Factory=".concat(e)).then((function(e){if(!0===e.code){t.setState({shiftData:e.data});var a=(new Date).toLocaleTimeString("en-GB");if("object"!==typeof t.props.selectedValue){var n=!0,r=!1,o=void 0;try{for(var s,i=e.data[Symbol.iterator]();!(n=(s=i.next()).done);n=!0){var l=s.value;new Date(l.TimeBegin).toLocaleTimeString("en-GB")<=a&&a<new Date(l.TimeEnd).toLocaleTimeString("en-GB")&&t.props.handleChange(l,"Shift")}}catch(c){r=!0,o=c}finally{try{n||null==i.return||i.return()}finally{if(r)throw o}}}}})).catch((function(e){throw e}));case 1:case"end":return a.stop()}}))}},{key:"renderOptions",value:function(){return this.state.shiftData.map((function(e,t){return r.a.createElement(et.a,{label:"Select Shift",value:e._id,key:e.Name,name:e.Name},e.Name)}))}},{key:"handleChange",value:function(e,t){var a=this.state.shiftData.find((function(t){return t._id===e}));void 0!==a?this.props.handleChange(a,this.props.propertyName):this.props.handleChange("",this.props.propertyName)}},{key:"render",value:function(){var e=this;return r.a.createElement(ya.a,{style:{width:"100%"}},r.a.createElement(Ea.a,{shrink:!0,htmlFor:"shift",required:!0,error:!this.props.formControl.valid},"Shift"),r.a.createElement(ba.a,{id:this.props.propertyName,value:""===this.props.selectedValue||null===this.props.selectedValue?"":void 0===this.props.selectedValue._id?"":this.props.selectedValue._id,error:!this.props.formControl.valid,onChange:function(t){return e.handleChange(t.target.value,e.props.propertyName)},displayEmpty:!0},r.a.createElement(et.a,{value:""},r.a.createElement("em",null,"Select ")),this.renderOptions()),r.a.createElement(Sa.a,{error:!this.props.formControl.valid,style:{display:this.props.formControl.valid?"none":""}},this.props.formControl.valid?"":this.props.formControl.message))}}]),t}(n.Component),rs={properties:{Month:{description:"",type:"number",required:!0,allowEmpty:!1,messages:{allowEmpty:"Month cannot be empty."}}}},os=a(24),ss={validateFields:function(e){return os.validate(e,rs,{cast:!0})},get:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="budgetWorkingDayDetail/"+e,a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 2:case"end":return a.stop()}}))},getByUid:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="budgetWorkingDayDetail/"+e,a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 2:case"end":return a.stop()}}))},getToolFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("budgetWorkingDayDetail-filter/").concat(e),a.next=3,l.a.awrap(We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 3:return a.abrupt("return",a.sent);case 4:case"end":return a.stop()}}))},update:function(e,t){return Qe("budgetWorkingDayDetail/"+e,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Updated successfully.",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,errors:e.data.errors,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="budgetWorkingDayDetail/"+e,n.abrupt("return",He(a,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,message:"Added successfully.",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("budgetWorkingDayDetail/"+e).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))}},is={Month:new Date(Date.now()).getMonth(),WD_Normal:0,WD_Saturday:0,WD_Sunday:0,WD_PH:0,WH_Normal:0,WH_Saturday:0,WH_Sunday:0,WH_PH:0,OT_Normal:0,OT_Saturday:0,OT_Sunday:0,OT_PH:0,Manning_Direct:0,Manning_OnLeave:0,CreatedAt:new Date(Date.now()).toLocaleString(),CreatedBy:"Admin",LastUpdatedAt:new Date(Date.now()).toLocaleString(),LastUpdatedBy:"Admin"},ls=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={formControls:{Month:{valid:!0,message:"",value:a.props.formData.Month},WD_Normal:{valid:!0,message:"",value:a.props.formData.WD_Normal},WD_Saturday:{valid:!0,message:"",value:a.props.formData.WD_Saturday},WD_Sunday:{valid:!0,message:"",value:a.props.formData.WD_Sunday},WD_PH:{valid:!0,message:"",value:a.props.formData.WD_PH},WH_Normal:{valid:!0,message:"",value:a.props.formData.WH_Normal},WH_Saturday:{valid:!0,message:"",value:a.props.formData.WH_Saturday},WH_Sunday:{valid:!0,message:"",value:a.props.formData.WH_Sunday},WH_PH:{valid:!0,message:"",value:a.props.formData.WH_PH},OT_Normal:{valid:!0,message:"",value:a.props.formData.OT_Normal},OT_Saturday:{valid:!0,message:"",value:a.props.formData.OT_Saturday},OT_Sunday:{valid:!0,message:"",value:a.props.formData.OT_Sunday},OT_PH:{valid:!0,message:"",value:a.props.formData.OT_PH},Manning_Direct:{valid:!0,message:"",value:a.props.formData.Manning_Direct},Manning_OnLeave:{valid:!0,message:"",value:a.props.formData.Manning_OnLeave}},formState:{valid:!0,dirty:!1,errors:[]}},a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"handleChange",value:function(e,t){var a=this.state.formControls,n=this.state.formState;a[t].valid=!0,a[t].message="",void 0===e||0===e.length?(this.props.handleChange(0,t),a[t].value=0):(this.props.handleChange(e,t),a[t].value=e),n.dirty=!0,this.setState({formControls:a,formState:n})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"form-container"},r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-evenly",alignItems:"center",md:6,xs:12,sm:12,xl:8,lg:8},r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Da.a,{required:!0,openTo:"month",format:"MMM",label:"Month",views:["month"],value:new Date(this.props.currentYear,this.state.formControls.Month.value,1),onChange:function(t){var a=new Date(t.toString()).getMonth();e.handleChange(a,"Month")},disableFuture:!0})),r.a.createElement(Sa.a,{error:!this.state.formControls.Month.valid,style:{display:this.state.formControls.Month.valid?"none":""}},this.state.formControls.Month.message)),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Xa.a,{id:"WD_Normal",label:"Work Days - Regular",customInput:ge.a,defaultValue:this.state.formControls.WD_Normal.value,onValueChange:function(t){return e.handleChange(t.floatValue,"WD_Normal")},onFocus:function(e){e.target.select()},decimalScale:2,fixedDecimalScale:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Xa.a,{id:"WD_Saturday",label:"Work Days - Saturday",customInput:ge.a,defaultValue:this.state.formControls.WD_Saturday.value,onValueChange:function(t){return e.handleChange(t.floatValue,"WD_Saturday")},onFocus:function(e){e.target.select()},decimalScale:2,fixedDecimalScale:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Xa.a,{id:"WD_Sunday",label:"Work Days - Sunday",customInput:ge.a,defaultValue:this.state.formControls.WD_Sunday.value,onValueChange:function(t){return e.handleChange(t.floatValue,"WD_Sunday")},onFocus:function(e){e.target.select()},decimalScale:2,fixedDecimalScale:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Xa.a,{id:"WD_PH",label:"Work Days - Public Holiday",customInput:ge.a,defaultValue:this.state.formControls.WD_PH.value,onValueChange:function(t){return e.handleChange(t.floatValue,"WD_PH")},onFocus:function(e){e.target.select()},decimalScale:2,fixedDecimalScale:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Xa.a,{id:"WH_Normal",label:"Work Hours - Regular",customInput:ge.a,defaultValue:this.state.formControls.WH_Normal.value,onValueChange:function(t){return e.handleChange(t.floatValue,"WH_Normal")},onFocus:function(e){e.target.select()},decimalScale:2,fixedDecimalScale:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Xa.a,{id:"WH_Saturday",label:"Work Hours - Saturday",customInput:ge.a,defaultValue:this.state.formControls.WH_Saturday.value,onValueChange:function(t){return e.handleChange(t.floatValue,"WH_Saturday")},onFocus:function(e){e.target.select()},decimalScale:2,fixedDecimalScale:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Xa.a,{id:"WH_Sunday",label:"Work Hours - Sunday",customInput:ge.a,defaultValue:this.state.formControls.WH_Sunday.value,onValueChange:function(t){return e.handleChange(t.floatValue,"WH_Sunday")},onFocus:function(e){e.target.select()},decimalScale:2,fixedDecimalScale:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Xa.a,{id:"WH_PH",label:"Work Hours - Public Holiday",customInput:ge.a,defaultValue:this.state.formControls.WH_PH.value,onValueChange:function(t){return e.handleChange(t.floatValue,"WH_PH")},onFocus:function(e){e.target.select()},decimalScale:2,fixedDecimalScale:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Xa.a,{id:"OT_Normal",label:"Overtime Hours - Regular",customInput:ge.a,defaultValue:this.state.formControls.OT_Normal.value,onValueChange:function(t){return e.handleChange(t.floatValue,"OT_Normal")},onFocus:function(e){e.target.select()},decimalScale:2,fixedDecimalScale:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Xa.a,{id:"OT_Saturday",label:"Overtime Hours - Saturday",customInput:ge.a,defaultValue:this.state.formControls.OT_Saturday.value,onValueChange:function(t){return e.handleChange(t.floatValue,"OT_Saturday")},onFocus:function(e){e.target.select()},decimalScale:2,fixedDecimalScale:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Xa.a,{id:"OT_Sunday",label:"Overtime Hours - Sunday",customInput:ge.a,defaultValue:this.state.formControls.OT_Sunday.value,onValueChange:function(t){return e.handleChange(t.floatValue,"OT_Sunday")},onFocus:function(e){e.target.select()},decimalScale:2,fixedDecimalScale:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Xa.a,{id:"OT_PH",label:"Overtime Hours - Public Holiday",customInput:ge.a,defaultValue:this.state.formControls.OT_PH.value,onValueChange:function(t){return e.handleChange(t.floatValue,"OT_PH")},onFocus:function(e){e.target.select()},decimalScale:2,fixedDecimalScale:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Xa.a,{id:"Manning_Direct",label:"Direct",customInput:ge.a,defaultValue:this.state.formControls.Manning_Direct.value,onValueChange:function(t){return e.handleChange(t.floatValue,"Manning_Direct")},onFocus:function(e){e.target.select()},decimalScale:2,fixedDecimalScale:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Xa.a,{id:"Manning_OnLeave",label:"On Leave",customInput:ge.a,defaultValue:this.state.formControls.Manning_OnLeave.value,onValueChange:function(t){return e.handleChange(t.floatValue,"Manning_OnLeave")},onFocus:function(e){e.target.select()},decimalScale:2,fixedDecimalScale:!0}))),r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-evenly",alignItems:"center",sm:12}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=t.formControls;return e.formState.valid||Array.isArray(e.formState.errors)&&e.formState.errors.map((function(e){a[e.property].valid=!1,a[e.property].message=e.message})),{formState:e.formState,formControls:a}}}]),t}(r.a.Component),cs=(Object(n.forwardRef)((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),r.a.forwardRef((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).openDialog=function(e){a.setState({dialogOpen:!0,currentDeleteData:e,dialogMessage:r.a.createElement("span",null,"Are you sure to delete this month record?")})},a.closeDialog=function(){a.setState({dialogOpen:!1,currentDeleteData:null,dialogMessage:""})},a.openForm=function(e){void 0===e?a.setState({actionStatus:"Add",newData:Object(me.a)({},is)}):a.setState({actionStatus:"Update",newData:Object(me.a)({},e)}),a.setState({formOpen:!0,formState:{valid:!0,dirty:!1,errors:[]}})},a.closeForm=function(){a.setState({formOpen:!1,newData:{},actionStatus:""})},a.onSave=function(){var e=a.state.formState,t=Object(me.a)({},a.state.newData),n=a.state.data.find((function(e){return e.Month===t.Month}));if(void 0!==n&&n!==t&&n._id!==t._id)e.errors.push({property:"Month",message:"Record for this month already exists."}),e.valid=!1;else if(a.state.formState.valid){var r=ss.validateFields(t);if(r.valid){var o=Object(je.a)(a.state.data);if("Add"===a.state.actionStatus)t.LastUpdatedBy=a.state.operator,t.CreatedBy=a.state.operator,o.push(t);else{t.LastUpdatedBy=a.state.operator;var s=o.find((function(e){return e._id===t._id})),i=o.indexOf(s);o[i]=t}a.setState({data:o}),a.props.handleDetailChange(o,"Details"),a.closeForm()}else{e.valid=!1;var l=r.errors.map((function(e){var t={};return t.property=e.property,t.message=e.message,t}));e.errors=l}}a.setState({formState:e})},a.onDelete=function(){if(null!==a.state.currentDeleteData){var e=Object(je.a)(a.state.data),t=e.indexOf(a.state.currentDeleteData);e.splice(t,1),a.setState({data:e}),a.props.handleDetailChange(e,"Details"),a.closeDialog()}},a.state={columns:[{title:"Month ",field:"Month",lookup:{}},{title:"Days Normal",field:"WD_Normal",render:function(e){return r.a.createElement(Xa.a,{value:e.WD_Normal,displayType:"text",decimalScale:2,fixedDecimalScale:!0})}},{title:"Days Saturday",field:"WD_Saturday",render:function(e){return r.a.createElement(Xa.a,{value:e.WD_Saturday,displayType:"text",decimalScale:2,fixedDecimalScale:!0})}},{title:"Days Sunday",field:"WD_Sunday",render:function(e){return r.a.createElement(Xa.a,{value:e.WD_Sunday,displayType:"text",decimalScale:2,fixedDecimalScale:!0})}},{title:"Days Holidays",field:"WD_PH",render:function(e){return r.a.createElement(Xa.a,{value:e.WD_PH,displayType:"text",decimalScale:2,fixedDecimalScale:!0})}},{title:"Hours Normal",field:"WH_Normal",render:function(e){return r.a.createElement(Xa.a,{value:e.WH_Normal,displayType:"text",decimalScale:2,fixedDecimalScale:!0})}},{title:"Hours Saturday",field:"WH_Saturday",render:function(e){return r.a.createElement(Xa.a,{value:e.WH_Normal,displayType:"text",decimalScale:2,fixedDecimalScale:!0})}},{title:"Hours Sunday",field:"WH_Sunday",render:function(e){return r.a.createElement(Xa.a,{value:e.WH_Sunday,displayType:"text",decimalScale:2,fixedDecimalScale:!0})}},{title:"Hours Holidays",field:"WH_PH",render:function(e){return r.a.createElement(Xa.a,{value:e.WH_PH,displayType:"text",decimalScale:2,fixedDecimalScale:!0})}},{title:"Overtime Normal",field:"OT_Normal",render:function(e){return r.a.createElement(Xa.a,{value:e.OT_Normal,displayType:"text",decimalScale:2,fixedDecimalScale:!0})}},{title:"Overtime Saturday",field:"OT_Saturday",render:function(e){return r.a.createElement(Xa.a,{value:e.OT_Saturday,displayType:"text",decimalScale:2,fixedDecimalScale:!0})}},{title:"Overtime Sunday",field:"OT_Sunday",render:function(e){return r.a.createElement(Xa.a,{value:e.OT_Sunday,displayType:"text",decimalScale:2,fixedDecimalScale:!0})}},{title:"Overtime Holidays",field:"OT_PH",render:function(e){return r.a.createElement(Xa.a,{value:e.OT_PH,displayType:"text",decimalScale:2,fixedDecimalScale:!0})}},{title:"Manning Direct",field:"Manning_Direct",render:function(e){return r.a.createElement(Xa.a,{value:e.Manning_Direct,displayType:"text",decimalScale:2,fixedDecimalScale:!0})}},{title:"Manning On Leave",field:"Manning_OnLeave",render:function(e){return r.a.createElement(Xa.a,{value:e.Manning_OnLeave,displayType:"text",decimalScale:2,fixedDecimalScale:!0})}}],data:e.data,currentDeleteData:null,newData:is,formOpen:!1,dialogOpen:!1,dialogMessage:"",disabled:!1,actionStatus:"",formState:{valid:!0,dirty:!1,errors:[]},operator:"Admin"},a.openDialog=a.openDialog.bind(Object(Pe.a)(a)),a.closeDialog=a.closeDialog.bind(Object(Pe.a)(a)),a.openForm=a.openForm.bind(Object(Pe.a)(a)),a.closeForm=a.closeForm.bind(Object(Pe.a)(a)),a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initMonthData()}},{key:"initMonthData",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:Oa("month.json").then((function(e){return e.data})).then((function(t){var a={};t.Month.forEach((function(e){return a[e.Value]=e.Name}));var n=Object(je.a)(e.state.columns),r=n.findIndex((function(e){return"Month"===e.field}));n[r].lookup=a,e.setState({columns:n})}));case 1:case"end":return t.stop()}}))}},{key:"handleChange",value:function(e,t){var a=this.state.newData;a[t]=e;var n=this.state.formState;n.valid=!0,this.setState({newData:a,formState:n})}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,null,r.a.createElement(Ve.a,{title:"Detail Budget",columns:this.state.columns,data:this.state.data,components:{Toolbar:function(e){return r.a.createElement("div",null,r.a.createElement(Le.MTableToolbar,e))}},actions:[{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){}},{icon:"add_box",tooltip:"Add",isFreeAction:!0,onClick:function(t){return e.openForm()}},{icon:"edit",tooltip:"Edit",onClick:function(t,a){return e.openForm(a)}},{icon:"delete",tooltip:"Delete",onClick:function(t,a){return e.openDialog(a)}}],options:{search:!1,actionsColumnIndex:-1}}),r.a.createElement(Ae.a,{fullWidth:!0,maxWidth:"md",open:this.state.formOpen,onClose:this.closeForm,TransitionComponent:this.Transition},r.a.createElement(w.a,{className:"appBar"},r.a.createElement(F.a,null,r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:this.closeForm,"aria-label":"close"},r.a.createElement(Vt.a,null)),r.a.createElement(x.a,{variant:"h6",className:"app-title"},"Budget Detail"),r.a.createElement(he.a,{color:"inherit",disabled:this.state.disabled,onClick:this.onSave},"save"))),r.a.createElement(_e.a,null,r.a.createElement(ls,{handleChange:this.handleChange,formData:this.state.newData,formState:this.state.formState,currentYear:this.props.currentYear}))),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.closeDialog,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.closeDialog,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDelete,color:"primary"},"Delete"))))}}]),t}(r.a.Component)),us=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={formControls:{Factory:{valid:!0,message:"",value:void 0===a.props.formData.Factory||""===a.props.formData.Factory?"":a.props.formData.Factory._id},Year:{valid:!0,message:"",value:a.props.formData.Year},Shift:{valid:!0,message:"",value:void 0===a.props.formData.Shift||""===a.props.formData.Shift?"":a.props.formData.Shift},Remarks:{valid:!0,message:"",value:a.props.formData.Remarks},Details:{valid:!0,message:"",value:a.props.formData.Details}},formState:{valid:!0,dirty:!1,errors:[]}},a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"handleChange",value:function(e,t){var a=this.state.formControls,n=this.state.formState;void 0===e||0===e.length?(a[t].valid=!1,a[t].message="".concat(t," cannot be empty.")):(a[t].valid=!0,a[t].message=""),this.props.handleChange(e,t),a[t].value=e,n.dirty=!0,this.setState({formControls:a,formState:n})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"form-container"},r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-evenly",alignItems:"center",md:6,xs:12,sm:12,xl:8,lg:8},r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Hr,{handleChange:this.handleChange,selectedValue:this.state.formControls.Factory.value,formControl:this.state.formControls.Factory,propertyName:"Factory"})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(ns,{handleChange:this.handleChange,selectedValue:this.state.formControls.Shift.value,formControl:this.state.formControls.Shift,propertyName:"Shift",factoryId:void 0===this.state.formControls.Factory.value._id?this.state.formControls.Factory.value:this.state.formControls.Factory.value._id,autoSelect:void 0===this.props.formData._id})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Da.a,{required:!0,openTo:"year",format:"yyyy",label:"Year",views:["year"],value:new Date(this.state.formControls.Year.value,0,1),onChange:function(t){var a=new Date(t.toString()).getFullYear();e.handleChange(a,"Year")},disableFuture:!0})),r.a.createElement(Sa.a,{error:!this.state.formControls.Year.valid,style:{display:this.state.formControls.Year.valid?"none":""}},this.state.formControls.Year.message)),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(ge.a,{id:"Remarks",label:"Remarks",defaultValue:this.state.formControls.Remarks.value,onChange:function(t){return e.handleChange(t.target.value,"Remarks")},multiline:!0}))),r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-evenly",alignItems:"center",sm:12},r.a.createElement("div",{style:{overflowX:"scroll"}},r.a.createElement(cs,{data:this.state.formControls.Details.value,handleDetailChange:this.handleChange,currentYear:this.state.formControls.Year.value}))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=t.formControls;return e.formState.valid||Array.isArray(e.formState.errors)&&e.formState.errors.map((function(e){a[e.property].valid=!1,a[e.property].message=e.message})),{formState:e.formState,formControls:a}}}]),t}(r.a.Component),ds={Factory:"",Shift:"",Year:new Date(Date.now()).getFullYear(),Remarks:"",Details:[],CreatedAt:new Date(Date.now()).toLocaleString(),CreatedBy:"Admin",LastUpdatedAt:new Date(Date.now()).toLocaleString(),LastUpdatedBy:"Admin"},ms=(Object(n.forwardRef)((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),r.a.forwardRef((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).openDialog=function(e){a.setState({dialogOpen:!0,currentDeleteData:e,dialogMessage:r.a.createElement("span",null,"Are you sure to delete this record factory"," ",r.a.createElement("b",null,e.Factory.FctyCode," "),"in year ",r.a.createElement("b",null,e.Year," "),"? This cannot be undone.")})},a.closeDialog=function(){a.setState({dialogOpen:!1,currentDeleteData:null,dialogMessage:""})},a.openForm=function(e){void 0===e?a.setState({actionStatus:"Add",newData:Object(me.a)({},ds)}):a.setState({actionStatus:"Update",newData:Object(me.a)({},e)}),a.setState({formOpen:!0,formState:{valid:!0,dirty:!1,errors:[]}})},a.closeForm=function(){a.setState({formOpen:!1,newData:{},actionStatus:""})},a.onSave=function(){var e=a.state.formState,t=Object(me.a)({},a.state.newData),n=$o.validateFields(t);if(n.valid){var r=Object(je.a)(a.state.data);"Add"===a.state.actionStatus?(t.LastUpdatedBy=a.state.operator,t.CreatedBy=a.state.operator,$o.add("",t).then((function(t){!0===t.code?(e.valid=!0,r.push(t.data),a.setState({data:r}),a.closeForm(),a.snackOpen("Factory plan working days created successfully!","success")):(e.valid=!1,e.errors=t.errors,a.snackOpen("Please fix the error(s) highlighted to save the details!","error"))})).catch((function(e){a.snackOpen("Oops, something went wrong while processing your request!","error")}))):(t.LastUpdatedBy=a.state.operator,$o.update("",t).then((function(n){if(!0===n.code){e.valid=!0;var o=r.find((function(e){return e._id===t._id})),s=r.indexOf(o);r[s]=n.data,a.setState({data:r}),a.closeForm(),a.snackOpen("Factory plan working days updated successfully!","success")}else e.valid=!1,e.errors=n.errors,a.snackOpen("Please fix the error(s) highlighted to save the details!","error")})).catch((function(e){a.snackOpen("Oops, something went wrong while processing your request!","error")})))}else{e.valid=!1;var o=n.errors.map((function(e){var t={};return t.property=e.property,t.message=e.message,t}));e.errors=o,void 0!==o.find((function(e){return"Details"===e.property}))?a.snackOpen(o.find((function(e){return"Details"===e.property})).message,"error"):a.snackOpen("Please fix the error(s) highlighted to save the details!","error")}a.setState({formState:e})},a.onDelete=function(){null!==a.state.currentDeleteData&&$o.delete("".concat(a.state.currentDeleteData._id)).then((function(e){if(!0===e.code){var t=Object(je.a)(a.state.data),n=t.indexOf(a.state.currentDeleteData);t.splice(n,1),a.snackOpen("Successfully Deleted!","success"),a.closeDialog(),a.setState({data:t})}else a.snackOpen("Oops, something went wrong while processing your request!","error")}))},a.onEdit=function(e){a.openForm(e)},a.state={columns:[{field:"_id",hidden:!0},{title:"Factory",field:"Factory",render:function(e){return r.a.createElement("span",null,void 0===e.Factory?"":e.Factory.FctyCode)}},{title:"Year",field:"Year"},{title:"Shift",field:"Shift",render:function(e){return r.a.createElement("span",null,void 0===e.Shift?"":e.Shift.Name)}},{title:"Remarks",field:"Remarks"},{title:"Operator",field:"LastUpdatedBy"},{title:"Last Updated",field:"LastUpdatedAt",render:function(e){return r.a.createElement("span",null,void 0===e?"":new Date(e.LastUpdatedAt).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}))}}],data:[],currentDeleteData:null,newData:ds,formOpen:!1,dialogOpen:!1,dialogMessage:"",disabled:!1,actionStatus:"",formState:{valid:!0,dirty:!1,errors:[]},operator:"Admin"},a.openDialog=a.openDialog.bind(Object(Pe.a)(a)),a.closeDialog=a.closeDialog.bind(Object(Pe.a)(a)),a.openForm=a.openForm.bind(Object(Pe.a)(a)),a.closeForm=a.closeForm.bind(Object(Pe.a)(a)),a.snackOpen=a.snackOpen.bind(Object(Pe.a)(a)),a.snackClose=a.snackClose.bind(Object(Pe.a)(a)),a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initBudgetWorkingDay()}},{key:"initBudgetWorkingDay",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.awrap($o.get("").then((function(t){!0===t.code&&e.setState({data:t.data})})));case 2:case"end":return t.stop()}}))}},{key:"handleChange",value:function(e,t){var a=this.state.newData;a[t]=e;var n=this.state.formState;n.valid=!0,this.setState({newData:a,formState:n})}},{key:"snackOpen",value:function(e,t){this.setState({alertOpen:!0,alertMessage:e,alertClass:t})}},{key:"snackClose",value:function(){this.setState({alertOpen:!1,alertMessage:"",alertClass:"",currentDeleteData:null})}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{style:{margin:"20px 20px 10px 0px"}},r.a.createElement(Ve.a,{title:"Factory Plan Working Days",columns:this.state.columns,data:this.state.data,components:{Toolbar:function(t){return r.a.createElement("div",null,r.a.createElement(Le.MTableToolbar,t),r.a.createElement("div",{style:{padding:"0px 15px"}},r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:function(){return e.openForm()},"aria-label":"add"},r.a.createElement(wt.a,null))))}},actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.data,columns:e.state.columns,fileName:"Factory Plan Working Days"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.initBudgetWorkingDay()}},{icon:"edit",tooltip:"Edit",onClick:function(t,a){return e.openForm(a)}},{icon:"delete",tooltip:"Delete",onClick:function(t,a){return e.openDialog(a)}}],options:{}}),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:6e3,open:this.state.alertOpen,onClose:this.snackClose,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}),r.a.createElement(Ae.a,{fullScreen:!0,open:this.state.formOpen,onClose:this.closeForm,TransitionComponent:this.Transition},r.a.createElement(w.a,{className:"appBar"},r.a.createElement(F.a,null,r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:this.closeForm,"aria-label":"close"},r.a.createElement(Vt.a,null)),r.a.createElement(x.a,{variant:"h6",className:"app-title"},"Factory Plan Working Days Details"),r.a.createElement(he.a,{color:"inherit",disabled:this.state.disabled,onClick:this.onSave},"save"))),r.a.createElement(_e.a,null,r.a.createElement(us,{handleChange:this.handleChange,formData:this.state.newData,formState:this.state.formState}))),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.closeDialog,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.closeDialog,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDelete,color:"primary"},"Delete"))))}}]),t}(r.a.Component)),ps={properties:{Factory:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Factory cannot be empty."}},Year:{description:"",type:"number",required:!0,allowEmpty:!1,messages:{allowEmpty:"Year cannot be empty."}},Details:{type:"array",minItems:1,messages:{minItems:"Please enter details."}}}},fs=a(24),hs={validateFields:function(e){return fs.validate(e,ps,{cast:!0})},get:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="maintenanceIndicator/"+e,a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 2:case"end":return a.stop()}}))},getByUid:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="maintenanceIndicator/"+e,a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 2:case"end":return a.stop()}}))},getToolFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("maintenanceIndicator-filter/").concat(e),a.next=3,l.a.awrap(We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 3:return a.abrupt("return",a.sent);case 4:case"end":return a.stop()}}))},update:function(e,t){return Qe("maintenanceIndicator/"+e,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Updated successfully.",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,errors:e.data.errors,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="maintenanceIndicator/"+e,n.abrupt("return",He(a,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,message:"Added successfully.",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("maintenanceIndicator/"+e).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))}},gs={Month:new Date(Date.now()).getMonth(),BudgetCycle:1,BreakdownNumber:0,MBMT:0,SR:0,BreakdownTime:0,CreatedAt:new Date(Date.now()).toLocaleString(),CreatedBy:"Admin",LastUpdatedAt:new Date(Date.now()).toLocaleString(),LastUpdatedBy:"Admin"},ys=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={formControls:{Month:{valid:!0,message:"",value:a.props.formData.Month},BreakdownNumber:{valid:!0,message:"",value:a.props.formData.BreakdownNumber},BudgetCycle:{valid:!0,message:"",value:a.props.formData.BudgetCycle},MBMT:{valid:!0,message:"",value:a.props.formData.MBMT},SR:{valid:!0,message:"",value:a.props.formData.SR},BreakdownTime:{valid:!0,message:"",value:a.props.formData.BreakdownTime}},formState:{valid:!0,dirty:!1,errors:[]}},a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"handleChange",value:function(e,t){var a=this.state.formControls,n=this.state.formState;a[t].valid=!0,a[t].message="",void 0===e||0===e.length?(this.props.handleChange(0,t),a[t].value=0):(this.props.handleChange(e,t),a[t].value=e),n.dirty=!0,this.setState({formControls:a,formState:n})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"form-container"},r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-evenly",alignItems:"center",md:6,xs:12,sm:12,xl:8,lg:8},r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Da.a,{required:!0,openTo:"month",format:"MMM",label:"Month",views:["month"],value:new Date(this.props.currentYear,this.state.formControls.Month.value,1),onChange:function(t){var a=new Date(t.toString()).getMonth();e.handleChange(a,"Month")},disableFuture:!0})),r.a.createElement(Sa.a,{error:!this.state.formControls.Month.valid,style:{display:this.state.formControls.Month.valid?"none":""}},this.state.formControls.Month.message)),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense",disabled:!0},r.a.createElement(Ea.a,{shrink:!0,error:!this.state.formControls.BudgetCycle.valid},"Budget Cycle"),r.a.createElement(ba.a,{required:!0,id:"machClass",value:this.state.formControls.BudgetCycle.value},r.a.createElement(et.a,{value:1},"OB"),r.a.createElement(et.a,{value:2},"RB"))),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Xa.a,{id:"BreakdownNumber",label:"Number of Breakdown",customInput:ge.a,defaultValue:this.state.formControls.BreakdownNumber.value,onValueChange:function(t){return e.handleChange(t.floatValue,"BreakdownNumber")},onFocus:function(e){e.target.select()},decimalScale:2,fixedDecimalScale:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Xa.a,{id:"MBMT",label:"MBMT (Mean Breakdown Maintenance Time)",customInput:ge.a,defaultValue:this.state.formControls.MBMT.value,onValueChange:function(t){return e.handleChange(t.floatValue,"MBMT")},onFocus:function(e){e.target.select()},decimalScale:2,fixedDecimalScale:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Xa.a,{id:"SR",label:"Strategic Ratio",customInput:ge.a,defaultValue:this.state.formControls.SR.value,onValueChange:function(t){return e.handleChange(t.floatValue,"SR")},onFocus:function(e){e.target.select()},decimalScale:2,fixedDecimalScale:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Xa.a,{id:"BreakdownTime",label:"Breakdown Time",customInput:ge.a,defaultValue:this.state.formControls.BreakdownTime.value,onValueChange:function(t){return e.handleChange(t.floatValue,"BreakdownTime")},onFocus:function(e){e.target.select()},decimalScale:2,fixedDecimalScale:!0}))),r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-evenly",alignItems:"center",sm:12}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=t.formControls;return e.formState.valid||Array.isArray(e.formState.errors)&&e.formState.errors.map((function(e){a[e.property].valid=!1,a[e.property].message=e.message})),{formState:e.formState,formControls:a}}}]),t}(r.a.Component),vs=(Object(n.forwardRef)((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),r.a.forwardRef((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).openDialog=function(e){a.setState({dialogOpen:!0,currentDeleteData:e,dialogMessage:r.a.createElement("span",null,"Are you sure to delete this month record?")})},a.closeDialog=function(){a.setState({dialogOpen:!1,currentDeleteData:null,dialogMessage:""})},a.openForm=function(e){void 0===e?a.setState({actionStatus:"Add",newData:Object(me.a)({},gs)}):a.setState({actionStatus:"Update",newData:Object(me.a)({},e)}),a.setState({formOpen:!0,formState:{valid:!0,dirty:!1,errors:[]}})},a.closeForm=function(){a.setState({formOpen:!1,newData:{},actionStatus:""})},a.onSave=function(){var e=a.state.formState,t=Object(me.a)({},a.state.newData),n=a.state.data.find((function(e){return e.Month===t.Month}));if(void 0!==n&&n!==t&&n._id!==t._id)e.errors.push({property:"Month",message:"Record for this month already exists."}),e.valid=!1;else{var r=Object(je.a)(a.state.data);if("Add"===a.state.actionStatus)t.LastUpdatedBy=a.state.operator,t.CreatedBy=a.state.operator,r.push(t);else{t.LastUpdatedBy=a.state.operator;var o=r.find((function(e){return e._id===t._id})),s=r.indexOf(o);r[s]=t}a.setState({data:r}),a.props.handleDetailChange(r,"Details"),a.closeForm()}a.setState({formState:e})},a.onDelete=function(){if(null!==a.state.currentDeleteData){var e=Object(je.a)(a.state.data),t=e.indexOf(a.state.currentDeleteData);e.splice(t,1),a.setState({data:e}),a.props.handleDetailChange(e,"Details"),a.closeDialog()}},a.state={columns:[{field:"_id",hidden:!0},{title:"Month ",field:"Month",lookup:{}},{title:"Budget Cycle",field:"BudgetCycle",lookup:{1:"OB",2:"RB"}},{title:"Number of Breakdown",field:"BreakdownNumber",render:function(e){return r.a.createElement(Xa.a,{value:e.BreakdownNumber,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"MBMT",field:"MBMT",render:function(e){return r.a.createElement(Xa.a,{value:e.MBMT,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"Strategic Ratio",field:"SR",render:function(e){return r.a.createElement(Xa.a,{value:e.SR,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"Breakdown Time",field:"BreakdownTime",render:function(e){return r.a.createElement(Xa.a,{value:e.BreakdownTime,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}}],data:e.data,budgetCycle:[],currentDeleteData:null,newData:gs,formOpen:!1,dialogOpen:!1,dialogMessage:"",disabled:!1,actionStatus:"",formState:{valid:!0,dirty:!1,errors:[]},operator:"Admin"},a.openDialog=a.openDialog.bind(Object(Pe.a)(a)),a.closeDialog=a.closeDialog.bind(Object(Pe.a)(a)),a.openForm=a.openForm.bind(Object(Pe.a)(a)),a.closeForm=a.closeForm.bind(Object(Pe.a)(a)),a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initMonthData()}},{key:"initMonthData",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:Oa("month.json").then((function(e){return e.data})).then((function(t){var a={};t.Month.forEach((function(e){return a[e.Value]=e.Name}));var n=Object(je.a)(e.state.columns),r=n.findIndex((function(e){return"Month"===e.field}));n[r].lookup=a,e.setState({columns:n})}));case 1:case"end":return t.stop()}}))}},{key:"handleChange",value:function(e,t){var a=this.state.newData;a[t]=e;var n=this.state.formState;n.valid=!0,this.setState({newData:a,formState:n})}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,null,r.a.createElement(Ve.a,{title:"Detail Budget",columns:this.state.columns,data:this.state.data,components:{Toolbar:function(e){return r.a.createElement("div",null,r.a.createElement(Le.MTableToolbar,e))}},actions:[{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){}},{icon:"add_box",tooltip:"Add",isFreeAction:!0,onClick:function(t){return e.openForm()}},{icon:"edit",tooltip:"Edit",onClick:function(t,a){return e.openForm(a)}},{icon:"delete",tooltip:"Delete",onClick:function(t,a){return e.openDialog(a)}}],options:{search:!1,actionsColumnIndex:-1}}),r.a.createElement(Ae.a,{fullWidth:!0,maxWidth:"md",open:this.state.formOpen,onClose:this.closeForm,TransitionComponent:this.Transition},r.a.createElement(w.a,{className:"appBar"},r.a.createElement(F.a,null,r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:this.closeForm,"aria-label":"close"},r.a.createElement(Vt.a,null)),r.a.createElement(x.a,{variant:"h6",className:"app-title"},"Budget Detail"),r.a.createElement(he.a,{color:"inherit",disabled:this.state.disabled,onClick:this.onSave},"save"))),r.a.createElement(_e.a,null,r.a.createElement(ys,{handleChange:this.handleChange,formData:this.state.newData,formState:this.state.formState,currentYear:this.props.currentYear}))),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.closeDialog,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.closeDialog,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDelete,color:"primary"},"Delete"))))}}]),t}(r.a.Component)),Cs=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={formControls:{Factory:{valid:!0,message:"",value:a.props.formData.Factory},Year:{valid:!0,message:"",value:a.props.formData.Year},Remarks:{valid:!0,message:"",value:a.props.formData.Remarks},Details:{valid:!0,message:"",value:a.props.formData.Details}},formState:{valid:!0,dirty:!1,errors:[]}},a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"handleChange",value:function(e,t){var a=this.state.formControls,n=this.state.formState;void 0===e||0===e.length?(a[t].valid=!1,a[t].message="".concat(t," cannot be empty.")):(a[t].valid=!0,a[t].message=""),this.props.handleChange(e,t),a[t].value=e,n.dirty=!0,this.setState({formControls:a,formState:n})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"form-container"},r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-evenly",alignItems:"center",md:6,xs:12,sm:12,xl:8,lg:8},r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Hr,{handleChange:this.handleChange,selectedValue:this.state.formControls.Factory.value,formControl:this.state.formControls.Factory,propertyName:"Factory"})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Da.a,{required:!0,openTo:"year",format:"yyyy",label:"Year",views:["year"],value:new Date(this.state.formControls.Year.value,0,1),onChange:function(t){var a=new Date(t.toString()).getFullYear();e.handleChange(a,"Year")},disableFuture:!0})),r.a.createElement(Sa.a,{error:!this.state.formControls.Year.valid,style:{display:this.state.formControls.Year.valid?"none":""}},this.state.formControls.Year.message)),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(ge.a,{id:"Remarks",label:"Remarks",defaultValue:this.state.formControls.Remarks.value,onChange:function(t){return e.handleChange(t.target.value,"Remarks")},multiline:!0}))),r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-evenly",alignItems:"center",sm:12},r.a.createElement("div",{style:{overflowX:"scroll"}},r.a.createElement(vs,{data:this.state.formControls.Details.value,handleDetailChange:this.handleChange,currentYear:this.state.formControls.Year.value}))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=t.formControls;return e.formState.valid||Array.isArray(e.formState.errors)&&e.formState.errors.map((function(e){a[e.property].valid=!1,a[e.property].message=e.message})),{formState:e.formState,formControls:a}}}]),t}(r.a.Component),Ds={Factory:"",Year:new Date(Date.now()).getFullYear(),Remarks:"",Details:[],CreatedAt:new Date(Date.now()).toLocaleString(),CreatedBy:"",LastUpdatedAt:new Date(Date.now()).toLocaleString(),LastUpdatedBy:""},Es=(Object(n.forwardRef)((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),r.a.forwardRef((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).openDialog=function(e){a.setState({dialogOpen:!0,currentDeleteData:e,dialogMessage:r.a.createElement("span",null,"Are you sure to delete this record factory",r.a.createElement("b",null,e.Factory.FctyCode," "),"in year ",r.a.createElement("b",null,e.Year," "),"? This cannot be undone.")})},a.closeDialog=function(){a.setState({dialogOpen:!1,currentDeleteData:null,dialogMessage:""})},a.openForm=function(e){void 0===e?a.setState({actionStatus:"Add",newData:Object(me.a)({},Ds)}):a.setState({actionStatus:"Update",newData:Object(me.a)({},e)}),a.setState({formOpen:!0,formState:{valid:!0,dirty:!1,errors:[]}})},a.closeForm=function(){a.setState({formOpen:!1,newData:{},actionStatus:""})},a.onSave=function(){var e=a.state.formState,t=Object(me.a)({},a.state.newData),n=hs.validateFields(t);if(n.valid){var r=Object(je.a)(a.state.data);"Add"===a.state.actionStatus?(t.LastUpdatedBy=a.state.operator,t.CreatedBy=a.state.operator,hs.add("",t).then((function(t){!0===t.code?(e.valid=!0,r.push(t.data),a.setState({data:r}),a.closeForm(),a.snackOpen("Maintenance indicator created successfully!","success")):(e.valid=!1,e.errors=t.errors,a.snackOpen("Please fix the error(s) highlighted to save the details!","error"))})).catch((function(e){a.snackOpen("Oops, something went wrong while processing your request!","error")}))):(t.LastUpdatedBy=a.state.operator,hs.update("",t).then((function(n){if(!0===n.code){e.valid=!0;var o=r.find((function(e){return e._id===t._id})),s=r.indexOf(o);r[s]=n.data,a.setState({data:r}),a.closeForm(),a.snackOpen("Maintenance indicator updated successfully!","success")}else e.valid=!1,e.errors=n.errors,a.snackOpen("Please fix the error(s) highlighted to save the details!","error")})).catch((function(e){a.snackOpen("Oops, something went wrong while processing your request!","error")})))}else{e.valid=!1;var o=n.errors.map((function(e){var t={};return t.property=e.property,t.message=e.message,t}));e.errors=o,void 0!==o.find((function(e){return"Details"===e.property}))?a.snackOpen(o.find((function(e){return"Details"===e.property})).message,"error"):a.snackOpen("Please fix the error(s) highlighted to save the details!","error")}a.setState({formState:e})},a.onDelete=function(){null!==a.state.currentDeleteData&&hs.delete("".concat(a.state.currentDeleteData._id)).then((function(e){if(!0===e.code){var t=Object(je.a)(a.state.data),n=t.indexOf(a.state.currentDeleteData);t.splice(n,1),a.snackOpen("Successfully Deleted!","success"),a.closeDialog(),a.setState({data:t})}else a.snackOpen("Oops, something went wrong while processing your request!","error")}))},a.onEdit=function(e){a.openForm(e)},a.state={columns:[{field:"_id",hidden:!0},{title:"Factory",field:"Factory",render:function(e){return r.a.createElement("span",null,void 0===e.Factory?"":e.Factory.FctyCode)}},{title:"Year",field:"Year"},{title:"Remarks",field:"Remarks"},{title:"Operator",field:"LastUpdatedBy"},{title:"Last Updated",field:"LastUpdatedAt",render:function(e){return r.a.createElement("span",null,void 0===e?"":new Date(e.LastUpdatedAt).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}))}}],data:[],currentDeleteData:null,newData:Ds,formOpen:!1,dialogOpen:!1,dialogMessage:"",disabled:!1,actionStatus:"",formState:{valid:!0,dirty:!1,errors:[]},operator:"Admin"},a.openDialog=a.openDialog.bind(Object(Pe.a)(a)),a.closeDialog=a.closeDialog.bind(Object(Pe.a)(a)),a.openForm=a.openForm.bind(Object(Pe.a)(a)),a.closeForm=a.closeForm.bind(Object(Pe.a)(a)),a.snackOpen=a.snackOpen.bind(Object(Pe.a)(a)),a.snackClose=a.snackClose.bind(Object(Pe.a)(a)),a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initMaintenanceIndicator()}},{key:"initMaintenanceIndicator",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.awrap(hs.get("").then((function(t){!0===t.code&&e.setState({data:t.data})})));case 2:case"end":return t.stop()}}))}},{key:"handleChange",value:function(e,t){var a=this.state.newData;a[t]=e;var n=this.state.formState;n.valid=!0,this.setState({newData:a,formState:n})}},{key:"snackOpen",value:function(e,t){this.setState({alertOpen:!0,alertMessage:e,alertClass:t})}},{key:"snackClose",value:function(){this.setState({alertOpen:!1,alertMessage:"",alertClass:"",currentDeleteData:null})}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{style:{margin:"20px 20px 10px 0px"}},r.a.createElement(Ve.a,{title:"Maintenance Indicator",columns:this.state.columns,data:this.state.data,components:{Toolbar:function(t){return r.a.createElement("div",null,r.a.createElement(Le.MTableToolbar,t),r.a.createElement("div",{style:{padding:"0px 15px"}},r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:function(){return e.openForm()},"aria-label":"add"},r.a.createElement(wt.a,null))))}},actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.data,columns:e.state.columns,fileName:"Maintenance Indicator"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.initMaintenanceIndicator()}},{icon:"edit",tooltip:"Edit",onClick:function(t,a){return e.openForm(a)}},{icon:"delete",tooltip:"Delete",onClick:function(t,a){return e.openDialog(a)}}],options:{}}),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:6e3,open:this.state.alertOpen,onClose:this.snackClose,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}),r.a.createElement(Ae.a,{fullScreen:!0,open:this.state.formOpen,onClose:this.closeForm,TransitionComponent:this.Transition},r.a.createElement(w.a,{className:"appBar"},r.a.createElement(F.a,null,r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:this.closeForm,"aria-label":"close"},r.a.createElement(Vt.a,null)),r.a.createElement(x.a,{variant:"h6",className:"app-title"},"Maintenance Indicator Details"),r.a.createElement(he.a,{color:"inherit",disabled:this.state.disabled,onClick:this.onSave},"save"))),r.a.createElement(_e.a,null,r.a.createElement(Cs,{handleChange:this.handleChange,formData:this.state.newData,formState:this.state.formState}))),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.closeDialog,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.closeDialog,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDelete,color:"primary"},"Delete"))))}}]),t}(r.a.Component)),bs=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={formControls:{Factory:{valid:!0,message:"",value:void 0===a.props.formData.Factory||""===a.props.formData.Factory?"":a.props.formData.Factory._id},TrolleyNumber:{valid:!0,message:"",value:a.props.formData.TrolleyNumber},Description:{valid:!0,message:"",value:a.props.formData.Description},Inactive:{valid:!0,message:"",value:a.props.formData.Inactive}},formState:{valid:!0,dirty:!1,errors:[]}},a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"handleChange",value:function(e,t){var a=this.state.formControls,n=this.state.formState;void 0===e||0===e.length?(a[t].valid=!1,a[t].message="".concat(t," cannot be empty.")):(a[t].valid=!0,a[t].message=""),this.props.handleChange(e,t),a[t].value=e,n.dirty=!0,this.setState({formControls:a,formState:n})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"form-container"},r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-evenly",alignItems:"center",md:6,xs:12,sm:12,xl:8,lg:8},r.a.createElement(Hr,{handleChange:this.handleChange,selectedValue:this.state.formControls.Factory.value,formControl:this.state.formControls.Factory,propertyName:"Factory"}),r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(ge.a,{required:!0,id:"TrolleyNumber",label:"TrolleyNumber",type:"number",error:!this.state.formControls.TrolleyNumber.valid,helperText:this.state.formControls.TrolleyNumber.message,defaultValue:this.state.formControls.TrolleyNumber.value,onChange:function(t){return e.handleChange(t.target.value.trim(),"TrolleyNumber")}})),r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(ge.a,{id:"Description",label:"Description",defaultValue:this.state.formControls.Description.value,onChange:function(t){return e.handleChange(t.target.value,"Description")},multiline:!0})),r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(ga.a,{component:"label"},"Inactive"),r.a.createElement(Xe.a,{checked:this.state.formControls.Inactive.value,value:this.state.formControls.Inactive.value,color:"primary",inputProps:{"aria-label":"primary checkbox"},onChange:function(t){return e.handleChange(t.target.checked,"Inactive")}}))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=t.formControls;return e.formState.valid||Array.isArray(e.formState.errors)&&e.formState.errors.map((function(e){a[e.property].valid=!1,a[e.property].message=e.message})),{formState:e.formState,formControls:a}}}]),t}(r.a.Component),Ss={Factory:"",TrolleyNumber:"",Description:"",Inactive:!1,InactDescription:"",CreatedAt:new Date(Date.now()).toLocaleString(),CreatedBy:"Admin",LastUpdatedAt:new Date(Date.now()).toLocaleString(),LastUpdatedBy:"Admin"},Os=(Object(n.forwardRef)((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),r.a.forwardRef((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).openDialog=function(e){var t;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,l.a.awrap(ka("confirmation","delete"));case 2:t=n.sent,a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:e,dialogMessage:r.a.createElement("span",null,void 0!==t?t.replace("[Name]",e.Factory.FctyName):"")});case 4:case"end":return n.stop()}}))},a.closeDialog=function(){a.setState({dialogOpen:!1,currentDeleteData:null,dialogMessage:""})},a.openForm=function(e){void 0===e?a.setState({actionStatus:"Add",newData:Object(me.a)({},Ss)}):a.setState({actionStatus:"Update",newData:Object(me.a)({},e)}),a.setState({formOpen:!0,formState:{valid:!0,dirty:!1,errors:[]}})},a.closeForm=function(){a.setState({formOpen:!1,newData:{},actionStatus:""})},a.onSave=function(){var e=a.state.formState,t=Object(me.a)({},a.state.newData);"object"===typeof t.Fcty&&(t.Fcty=t.Fcty._id),"object"===typeof t.Machine&&(t.Machine=t.Machine._id);var n=gr.validateFields(t);if(n.valid){var r=Object(je.a)(a.state.data);"Add"===a.state.actionStatus?(t.LastUpdatedBy=a.state.operator,t.CreatedBy=a.state.operator,gr.add("",t).then((function(t){!0===t.code?(e.valid=!0,r.push(t.data),a.setState({data:r}),a.closeForm(),a.snackOpen("Factory machine created successfully!","success")):(e.valid=!1,e.errors=t.errors,a.snackOpen("Please fix the error(s) highlighted to save the details!","error"))})).catch((function(e){a.snackOpen("Oops, something went wrong while processing your request!","error")}))):(t.LastUpdatedBy=a.state.operator,gr.update("",t).then((function(n){if(!0===n.code){e.valid=!0;var o=r.find((function(e){return e._id===t._id})),s=r.indexOf(o);r[s]=n.data,a.setState({data:r}),a.closeForm(),a.snackOpen("Factory machine updated successfully!","success")}else e.valid=!1,e.errors=n.errors,a.snackOpen("Please fix the error(s) highlighted to save the details!","error")})).catch((function(e){a.snackOpen("Oops, something went wrong while processing your request!","error")})))}else{e.valid=!1;var o=n.errors.map((function(e){var t={};return t.property=e.property,t.message=e.message,t}));e.errors=o,a.snackOpen("Please fix the error(s) highlighted to save the details!","error")}a.setState({formState:e})},a.onDelete=function(){console.log(a.state.currentDeleteData),null!==a.state.currentDeleteData&&gr.delete("".concat(a.state.currentDeleteData._id)).then((function(e){if(!0===e.code){var t=Object(je.a)(a.state.data),n=t.find((function(e){return e._id===a.state.currentDeleteData._id})),r=t.indexOf(n);t.splice(r,1),a.setState({data:t}),a.closeDialog(),a.snackOpen("Successfully Deleted!","success")}else a.snackOpen("Oops, something went wrong while processing your request!","error")}))},a.onEdit=function(e){a.openForm(e)},a.state={columns:[{field:"_id",hidden:!0},{title:"Factory",field:"Factory",render:function(e){return r.a.createElement("span",null,void 0===e.Factory?"":e.Factory.FctyCode)}},{title:"Trolley Number",field:"TrolleyNumber"},{title:"Description",field:"Description"},{title:"Inactive",field:"Inactive",render:function(e){return r.a.createElement("span",null,e.Inactive?"Yes":"No")}},{title:"Inactive Description",field:"InactDescription"},{title:"Status",field:"Status",lookup:{}},{title:"Operator",field:"LastUpdatedBy"},{title:"Last Updated",field:"LastUpdatedAt",render:function(e){return r.a.createElement("span",null,void 0===e?"":new Date(e.LastUpdatedAt).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}))}}],data:[],currentDeleteData:null,newData:Ss,formOpen:!1,dialogOpen:!1,dialogMessage:"",disabled:!1,actionStatus:"",formState:{valid:!0,dirty:!1,errors:[]},operator:"Admin"},a.openDialog=a.openDialog.bind(Object(Pe.a)(a)),a.closeDialog=a.closeDialog.bind(Object(Pe.a)(a)),a.openForm=a.openForm.bind(Object(Pe.a)(a)),a.closeForm=a.closeForm.bind(Object(Pe.a)(a)),a.snackOpen=a.snackOpen.bind(Object(Pe.a)(a)),a.snackClose=a.snackClose.bind(Object(Pe.a)(a)),a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initFactoryTrolley(),this.initTrolleyStatus()}},{key:"initFactoryTrolley",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.awrap(gr.get("").then((function(t){!0===t.code&&e.setState({data:t.data})})));case 2:case"end":return t.stop()}}))}},{key:"initTrolleyStatus",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:Oa("trolleyStatus.json").then((function(e){return e.data})).then((function(t){var a={};t.TrolleyStatus.forEach((function(e){return a[e.Value]=e.Name}));var n=Object(je.a)(e.state.columns),r=n.findIndex((function(e){return"Status"===e.field}));n[r].lookup=a,e.setState({columns:n})}));case 1:case"end":return t.stop()}}))}},{key:"handleChange",value:function(e,t){var a=this.state.newData;a[t]=e,"MachineGrp"===t&&(a.Machine="");var n=this.state.formState;n.valid=!0,this.setState({newData:a,formState:n})}},{key:"snackOpen",value:function(e,t){this.setState({alertOpen:!0,alertMessage:e,alertClass:t})}},{key:"snackClose",value:function(){this.setState({alertOpen:!1,alertMessage:"",alertClass:"",currentDeleteData:null})}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{style:{margin:"20px 20px 10px 0px"}},r.a.createElement(Ve.a,{title:"Factory Trolley",columns:this.state.columns,data:this.state.data,components:{Toolbar:function(t){return r.a.createElement("div",null,r.a.createElement(Le.MTableToolbar,t),r.a.createElement("div",{style:{padding:"0px 15px"}},r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:function(){return e.openForm()},"aria-label":"add"},r.a.createElement(wt.a,null))))}},actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.data,columns:e.state.columns,fileName:"Trolley"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.initFactoryTrolley()}},{icon:"edit",tooltip:"Edit",onClick:function(t,a){return e.openForm(a)}},{icon:"delete",tooltip:"Delete",onClick:function(t,a){return e.openDialog(a)}}],options:{}}),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:6e3,open:this.state.alertOpen,onClose:this.snackClose,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}),r.a.createElement(Ae.a,{fullScreen:!0,open:this.state.formOpen,onClose:this.closeForm,TransitionComponent:this.Transition},r.a.createElement(w.a,{className:"appBar"},r.a.createElement(F.a,null,r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:this.closeForm,"aria-label":"close"},r.a.createElement(Vt.a,null)),r.a.createElement(x.a,{variant:"h6",className:"app-title"},"Factory Trolley Details"),r.a.createElement(he.a,{color:"inherit",disabled:this.state.disabled,onClick:this.onSave},"save"))),r.a.createElement(_e.a,null,r.a.createElement(bs,{handleChange:this.handleChange,formData:this.state.newData,formState:this.state.formState}))),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.closeDialog,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.closeDialog,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDelete,color:"primary"},"Delete"))))}}]),t}(r.a.Component)),ks=(a(819),a(1078)),ws=a(467),Fs=(Date.now(),Date.now(),{properties:{Factory:{description:"",type:["object","string"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Factory cannot be empty.",conform:"Factory cannot be empty.",required:"Factory cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},CompanyProfile:{description:"",type:["object","array"]},FactoryLayout:{description:"",type:["object","array"]},FlowProcess:{description:"",type:["object","array"]},OrgChart:{description:"",type:["object","array"]},ControlPlan:{description:"",type:["object","array"]},ContingencyPlan:{description:"",type:["object","array"]},FMEA:{description:"",type:["object","array"]},FactoryLicense:{description:"",type:["object","array"]},ProductCertificate:{description:"",type:["object","array"]},ISO9001:{description:"",type:["object","array"]},ISO14000_EMS:{description:"",type:["object","array"]},ISO18000_OSHAS:{description:"",type:["object","array"]},ISO17027_Lab:{description:"",type:["object","array"]},C_TPAT:{description:"",type:["object","array"]},CreatedAt:{type:"any",default:Date.now()},CreatedBy:{type:"string",default:""},LastUpdatedAt:{type:"any",default:Date.now()},LastUpdatedBy:{type:"string",default:""}}}),xs=a(24),Ts={validateFields:function(e){return xs.validate(e,Fs,{cast:!0})},getMandatoryDoc:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="mandatorydoc/"+e,a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?Array.isArray(e.data.data)&&e.data.data.length>0?{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 2:case"end":return a.stop()}}))},getMandatoryDocFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("mandatorydoc-filter/").concat(e),a.next=3,l.a.awrap(We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 3:return a.abrupt("return",a.sent);case 4:case"end":return a.stop()}}))},getOneMandatoryDoc:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("mandatorydoc/").concat(e),a.next=3,l.a.awrap(We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 3:return a.abrupt("return",a.sent);case 4:case"end":return a.stop()}}))},update:function(e,t){return Je("mandatorydoc/"+e,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Updated",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="mandatorydoc/"+e,n.abrupt("return",Ke(a,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Added",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,formValid:!0,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("mandatorydoc/"+e).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))}},Ns=(a(820),{properties:{Factory:{description:"",type:["object","string"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Factory cannot be empty.",conform:"Factory cannot be empty.",required:"Factory cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},OthersupportDocument_Desc:{description:"",type:"string",required:!0,allowEmpty:!1,messages:{allowEmpty:"Document Description cannot be empty.",conform:"Document Description cannot be empty.",required:"Document Description cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},OthersupportDocument_Document:{description:"",type:["object","array"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Document cannot be empty.",conform:"Document cannot be empty.",required:"Document cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},OthersupportDocument_Reason:{description:"",type:"string"},OthersupportDocument_EffectiveDate:{description:"",type:"string",required:!0,allowEmpty:!1,messages:{allowEmpty:"Document cannot be empty.",conform:"Document cannot be empty.",required:"Document cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}}}}),js=a(24),Ps={validateFields:function(e){return js.validate(e,Ns,{cast:!0})},getOtherDoc:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="mandatorydoc/otherdoc/"+e,a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 2:case"end":return a.stop()}}))},getOtherDocFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("/mandatorydoc/otherdoc-filter/").concat(e),a.next=3,l.a.awrap(We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 3:return a.abrupt("return",a.sent);case 4:case"end":return a.stop()}}))},getOneOtherDoc:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("mandatorydoc/otherdoc/").concat(e),a.next=3,l.a.awrap(We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 3:return a.abrupt("return",a.sent);case 4:case"end":return a.stop()}}))},update:function(e,t){return Je("mandatorydoc/otherdoc/"+e,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Updated",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="mandatorydoc/otherdoc/"+e,n.abrupt("return",Ke(a,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Added",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,formValid:!0,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("mandatorydoc/otherdoc/"+e).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))}},As=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).dialogClose=function(){a.setState({dialogOpen:!1,currentDeleteData:null})},a.handleDateChange=function(e,t,n,r){if(void 0!==e&&null!==e){var o=new Date(e);a.handleChange(o,t,n,r)}},a.state={formControls:{OthersupportDocument_Desc:{valid:!0,message:"",value:""},OthersupportDocument_Document:{valid:!0,message:"",value:""},OthersupportDocument_Reason:{valid:!0,message:"",value:""},OthersupportDocument_EffectiveDate:{valid:!0,message:"",value:""}},columns:[{title:"Remark",field:"OthersupportDocument_Desc",render:function(e){return r.a.createElement("span",null,e.OthersupportDocument_Desc)},editComponent:function(e){return r.a.createElement(ge.a,{autoFocus:!0,margin:"dense",id:"remarks",label:"Remarks*",color:"primary",error:!a.state.formControls.OthersupportDocument_Desc.valid,helperText:a.state.formControls.OthersupportDocument_Desc.message,type:"text",defaultValue:e.rowData.OthersupportDocument_Desc,onChange:function(t){a.handleChange(t.target.value,"OthersupportDocument_Desc",e.rowData,!0)}})}},{title:"Document",field:"OthersupportDocument_Document",render:function(e){return r.a.createElement(he.a,{href:"#text-buttons",className:"",color:"primary",onClick:function(t){a.downloadDocument(e.OthersupportDocument_Document._id)}},void 0===e.OthersupportDocument_Document?void 0===e.Document?"":e.Document.name:e.OthersupportDocument_Document.name)},editComponent:function(e){return r.a.createElement("div",null,r.a.createElement("input",{accept:"pdf",className:"",id:"OthersupportDocument_Document",color:"primary",type:"file",style:{display:"none"},onChange:function(t){return a.handleChange(t.target.files[0],"OthersupportDocument_Document",e.rowData,!0)}}),r.a.createElement("label",{htmlFor:"OthersupportDocument_Document"},r.a.createElement(fo.a,{size:"small",color:"primary",component:"span","aria-label":"add",className:""},r.a.createElement(wt.a,null)),r.a.createElement("span",null," ",void 0===e.rowData.OthersupportDocument_Document?"":e.rowData.OthersupportDocument_Document.name)),r.a.createElement(Ea.a,{htmlFor:"OthersupportDocument_Document",style:{paddingTop:5},error:!0},a.state.formControls.OthersupportDocument_Document.valid?"":a.state.formControls.OthersupportDocument_Document.message))}},{title:"Reason",field:"OthersupportDocument_Reason",render:function(e){return r.a.createElement("span",null,e.OthersupportDocument_Reason)},editComponent:function(e){return r.a.createElement(ge.a,{margin:"dense",id:"remarks",label:"Reason",color:"primary",type:"text",defaultValue:e.rowData.OthersupportDocument_Reason,onChange:function(t){a.handleChange(t.target.value,"OthersupportDocument_Reason",e.rowData,!1)}})}},{title:"Effective Date",field:"OthersupportDocument_EffectiveDate",render:function(e){return r.a.createElement("span",null,e.OthersupportDocument_EffectiveDate)},editComponent:function(e){return r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Da.b,{margin:"dense",id:"OthersupportDocument_EffectiveDate",label:"Effective Date",format:"dd-MMM-yyyy",value:void 0===e.rowData.OthersupportDocument_EffectiveDate?Date.now():e.rowData.OthersupportDocument_EffectiveDate,onChange:function(t){return a.handleDateChange(t,"OthersupportDocument_EffectiveDate",e.rowData,!0)},KeyboardButtonProps:{"aria-label":"Effective Date"}}))}}],data:a.props.formData,selectedFactory:a.props.selectedFactory,newData:{},dialogOpen:!1,currentDeleteData:null,dialogMessage:"",alertClass:"",alertOpen:!1,alertMessage:"",formState:{dirty:!1,valid:!1,errors:[]}},a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a.snackOpen=a.snackOpen.bind(Object(Pe.a)(a)),a.snackClose=a.snackClose.bind(Object(Pe.a)(a)),a.dialogOpen=a.dialogOpen.bind(Object(Pe.a)(a)),a.dialogClose=a.dialogClose.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"initOtherDocument",value:function(){var e=this;Ps.getOtherDoc("").then((function(t){!0===t.code?e.setState({data:t.data}):e.snackOpen("Oops, something went wrong while processing your request!","error")}))}},{key:"snackOpen",value:function(e,t){this.setState({alertOpen:!0,alertMessage:e,alertClass:t})}},{key:"snackClose",value:function(){this.setState({alertOpen:!1,alertMessage:"",alertClass:""})}},{key:"dialogOpen",value:function(e,t){this.setState({dialogOpen:!0,currentDeleteData:t,dialogMessage:r.a.createElement("span",null,"Are you sure to delete this record ",r.a.createElement("b",null,t.Name)," ? This cannot be undone.")})}},{key:"handleChange",value:function(e,t,a,n){var r=Object(me.a)({},this.state.formControls);if(!n||""!==e&&void 0!==e)if("OthersupportDocument_Document"===t){var o=vo(e.size),s=e.type;o>4||"application/pdf"!==s?(r.OthersupportDocument_Document.valid=!1,r.OthersupportDocument_Document.message=o>2?"File cannot be exceed 4MB.":"Only pdf is allowed.",r.OthersupportDocument_Document.value="",e=""):(r.OthersupportDocument_Document.valid=!0,r.OthersupportDocument_Document.message="",r.OthersupportDocument_Document.value=e)}else r[t].valid=!0,r[t].message="",r[t].value=e;else r[t].valid=!1,r[t].message="".concat(t," cannot be empty.");a[t]=e,this.setState({formControls:r})}},{key:"OnDelete",value:function(){if(null!==this.state.currentDeleteData){var e=Object(je.a)(this.state.data),t=e.indexOf(this.state.currentDeleteData);Ts.delete(this.state.currentDeleteData._id).then((function(e){})),e.splice(t,1),this.snackOpen("Successfully Deleted!","success"),this.dialogClose(),this.setState({data:e})}else this.snackOpen("Oops, something went wrong while processing your request!","error")}},{key:"downloadDocument",value:function(e){var t=this;Ts.getOneMandatoryDoc("".concat(e,"/OtherDocument")).then((function(e){!0===e.code?Co(new Uint8Array(e.data.data.data),e.data.name):t.snackOpen("Oops, Error while donwloading document!","error")})).catch((function(e){t.snackOpen("Oops, something went wrong while processing your request!","error")}))}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{style:{margin:"20px 0px 10px 0px",width:"100%"}},r.a.createElement(Ve.a,{title:"UPLOAD Other DOCUMENT (PDF ONLY & MAX 4MB)",columns:this.state.columns,data:this.state.data,editable:{onRowAdd:function(t){return new Promise((function(a,n){setTimeout((function(){if(void 0===e.state.selectedFactory||null===e.state.selectedFactory)n(),e.props.handleChange("","Factory"),e.snackOpen("Please select factory.","error");else{Object(me.a)({},e.state.data);var r=new FormData;r.append("file",t.OthersupportDocument_Document),r.append("SelectedFactory",e.state.selectedFactory._id),r.append("OthersupportDocument_Desc",void 0===t.OthersupportDocument_Desc?"":t.OthersupportDocument_Desc),r.append("OthersupportDocument_EffectiveDate",void 0===t.OthersupportDocument_EffectiveDate?"":t.OthersupportDocument_EffectiveDate),r.append("OthersupportDocument_Reason",void 0===t.OthersupportDocument_Reason?"":t.OthersupportDocument_Reason),Ps.add("",r).then((function(t){if(!0===t.code){var r=t.data.OthersupportDocument;e.setState({data:r}),a(),e.props.handleChange(r,"OthersupportDocument"),e.snackOpen("Successfully added!","success")}else n(),e.snackOpen("Oops, something went wrong while processing your request!","error")})).catch((function(t){n(),e.snackOpen("Oops, something went wrong while processing your request!","error")}))}}),1e3)}))},onRowUpdate:function(t,a){return new Promise((function(a,n){setTimeout((function(){Object(je.a)(e.state.data),e.state.formControls;if(void 0===e.state.selectedFactory||null===e.state.selectedFactory)n(),e.props.handleChange("","Factory"),e.snackOpen("Please select factory.","error");else{Object(me.a)({},e.state.data);var r=new FormData;r.append("file",t.OthersupportDocument_Document),r.append("SelectedFactory",e.state.selectedFactory._id),r.append("SelectedDocId",t._id),r.append("OthersupportDocument_Desc",void 0===t.OthersupportDocument_Desc?"":t.OthersupportDocument_Desc),r.append("OthersupportDocument_EffectiveDate",void 0===t.OthersupportDocument_EffectiveDate?"":t.OthersupportDocument_EffectiveDate),r.append("OthersupportDocument_Reason",void 0===t.OthersupportDocument_Reason?"":t.OthersupportDocument_Reason),Ps.update("",r).then((function(t){if(!0===t.code){var r=Object(me.a)({},e.state.data);r.push(t.data.OthersupportDocument),e.props.formData=r,e.setState({data:r},(function(){return a()})),e.snackOpen("Successfully added!","success")}else n(),e.snackOpen("Oops, something went wrong while processing your request!","error")})).catch((function(t){n(),e.snackOpen("Oops, something went wrong while processing your request!","error")}))}}),1e3)}))}},actions:[{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.initOtherDocument()}},{icon:"delete",tooltip:"Delete Process Change Buyer Info",onClick:function(t,a){return e.dialogOpen(t,a)}}],options:{exportButton:!0,actionsColumnIndex:-1}}),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:600,open:this.state.alertOpen,onClose:this.snackClose,message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.dialogClose,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.dialogClose,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:function(){return e.OnDelete()},color:"primary"},"Delete"))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){t.data;return{data:e.formData,selectedFactory:e.selectedFactory}}}]),t}(r.a.Component),Ms=a(453),_s=function(){return r.a.createElement(Ms.CircleLoading,{color:"#88fced"})},Is=(a(856),a(857),a(1128)),Rs=a(427),Ls=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).handleChangePage=function(e,t){a.setState({page:t})},a.handleChangeRowsPerPage=function(e){a.setState({rowsPerPage:parseInt(e.target.value,10),page:0})},a.state={rowsPerPage:a.props.rowsPerPage,page:0},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidUpdate",value:function(e,t,a){}},{key:"desc",value:function(e,t,a){return t[a]<e[a]?-1:t[a]>e[a]?1:0}},{key:"stableSort",value:function(e,t){var a=e.map((function(e,t){return[e,t]}));return a.sort((function(e,a){var n=t(e[0],a[0]);return 0!==n?n:e[1]-a[1]})),a.map((function(e){return e[0]}))}},{key:"getSorting",value:function(e,t){var a=this;return"desc"===e?function(e,n){return a.desc(e,n,t)}:function(e,n){return-a.desc(e,n,t)}}},{key:"renderColumns",value:function(){var e=[];return void 0!==this.props.columns&&null!==this.props.columns&&Array.isArray(this.props.columns)&&this.props.columns.length>0&&this.props.columns.forEach((function(t,a){e.push(r.a.createElement(Ct.a,{className:"tblCell-primary",align:"center"},t.DisplayName))})),e}},{key:"generateCell",value:function(e){var t=[];return void 0!==e&&this.props.columns.forEach((function(a){if("object"===typeof e[a.Key]){var n=e[a.Key][a.ObjectKey];t.push(r.a.createElement(Ct.a,{align:"center"},n))}else"boolean"===typeof e[a.Key]?t.push(r.a.createElement(Ct.a,{align:"center"},e[a.Key]?"Enabled":"Disabled")):a.Key.indexOf("Date")>-1?t.push(r.a.createElement(Ct.a,{align:"center"},new Date(e[a.Key]).toLocaleString())):t.push(r.a.createElement(Ct.a,{align:"center"},e[a.Key]))})),t}},{key:"renderRows",value:function(){var e=this;console.log(this.props.row);var t=[];return void 0!==this.props.row&&null!==this.props.row&&Array.isArray(this.props.row)&&this.props.row.length>0&&this.stableSort(this.props.row,this.getSorting(this.props.order,this.props.orderBy)).slice(this.state.page*this.state.rowsPerPage,this.state.page*this.state.rowsPerPage+this.state.rowsPerPage).map((function(a,n){var o=r.a.createElement(Et.a,{key:n},"object"===typeof a?e.generateCell(a):r.a.createElement(Ct.a,{align:"center"},a));t.push(o)})),t}},{key:"render",value:function(){return r.a.createElement(be.a,{style:{margin:"20px 0px 10px 0px",width:"100%"}},r.a.createElement(Is.a,{component:De.a},r.a.createElement(yt.a,{style:{minWidth:450},"aria-label":"simple table"},r.a.createElement(Dt.a,null,r.a.createElement(Et.a,null,this.renderColumns())),r.a.createElement(vt.a,null,this.props.row.length>0?this.renderRows():""))),r.a.createElement(Rs.a,{rowsPerPageOptions:[5,10,25],component:"div",count:this.props.row.length,rowsPerPage:this.props.row.length>0?this.state.rowsPerPage:1,page:this.state.page,onChangePage:this.handleChangePage,onChangeRowsPerPage:this.handleChangeRowsPerPage}))}}]),t}(r.a.Component),Vs=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).factoryChange=function(e,t){a.setState({selectedFactory:e})},a.docChange=function(e,t){a.setState({selectedDocument:e},(function(){return a.getHistory()}))},a.state={selectedFactory:{_id:""},selectedDocument:"",documentList:[],tableData:[]},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initDocumentDropDown()}},{key:"initDocumentDropDown",value:function(){var e=this;Oa("mandatory-documents.json").then((function(t){200===t.status&&t.data.hasOwnProperty("Documents")&&e.setState({documentList:t.data.Documents})}))}},{key:"getHistory",value:function(){var e=this;void 0!==this.state.selectedFactory&&""!==this.state.selectedFactory._id&&void 0!==this.state.selectedDocument&&""!==this.state.selectedDocument.Value&&We("mandatorydoc-history/".concat(this.state.selectedFactory._id,"/").concat(this.state.selectedDocument.Value)).then((function(t){200===t.status&&null!==t.data&&null!==t.data.data&&t.data.data.length>0?e.setState({tableData:t.data.data}):e.setState({tableData:[]})}))}},{key:"render",value:function(){return r.a.createElement(be.a,{style:{margin:"20px 0px 0px 0px"}},r.a.createElement(be.a,{container:!0,direction:"row",justify:"space-around",alignItems:"center"},r.a.createElement(be.a,Object(y.a)({item:!0,style:{padding:10},xs:12,sm:5,md:5,lg:5},"style",{paddingTop:17}),r.a.createElement(Hr,{selectedValue:this.state.selectedFactory,propertyName:"Factory",formControl:{valid:!0,message:""},required:!1,handleChange:this.factoryChange})),r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:5,md:5,lg:5},r.a.createElement(Fa,{jsonFileName:"mandatory-documents",jsonPropertyName:"Documents",label:"Ducuments",propertyName:"Value",selectedValue:this.state.selectedDocument.Value,required:!1,formControl:{valid:!0,message:""},handleChange:this.docChange})),r.a.createElement(be.a,Object(y.a)({item:!0,style:{marginTop:10},xs:12},"style",{padding:10}),r.a.createElement(Ls,{rowsPerPage:5,columns:[{Key:"Description",DisplayName:"Description"},{Key:"Revision",DisplayName:"Revision"},{Key:"ActiveDate",DisplayName:"ActiveDate"},{Key:"Reason",DisplayName:"Reason"}],row:this.state.tableData}))))}}]),t}(r.a.Component),Bs=(Object(n.forwardRef)((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),r.a.forwardRef((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),{Factory:{valid:!0,message:"",value:""},CompanyProfile:{valid:!0,message:"",value:""},FactoryLayout:{valid:!0,message:"",value:""},FlowProcess:{valid:!0,message:"",value:""},OrgChart:{valid:!0,message:"",value:""},ControlPlan:{valid:!0,message:"",value:""},ContingencyPlan:{valid:!0,message:"",value:""},FMEA:{valid:!0,message:"",value:""},FactoryLicense:{valid:!0,message:"",value:""},ProductCertificate:{valid:!0,message:"",value:""},ISO9001:{valid:!0,message:"",value:""},ISO14000_EMS:{valid:!0,message:"",value:""},ISO18000_OSHAS:{valid:!0,message:"",value:""},ISO17027_Lab:{valid:!0,message:"",value:""},C_TPAT:{valid:!0,message:"",value:""},OthersupportDocument:{valid:!0,message:"",value:""}}),Us=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).tabhandleChange=function(e,t){a.setState({value:t})},a.snackClose=function(){a.setState({snackOpen:!1,snackMessage:"",snackClass:""})},a.snackOpen=function(e,t){var n;return l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0===e||null===e||void 0===t||null===t){r.next=7;break}return r.next=3,l.a.awrap(ka(e,t));case 3:n=r.sent,a.setState({snackOpen:!a.state.snackOpen,snackMessage:n,snackClass:e}),r.next=8;break;case 7:a.setState({snackOpen:!1});case 8:case"end":return r.stop()}}))},a.setLoading=function(e){a.setState({loading:e})},a.dialogClose=function(){a.setState({dialogOpen:!1,currentDeleteData:null})},a.handleChange=function(e,t){var n=Object(me.a)({},a.state.data),r=Object(me.a)({},a.state.formcontrols);"Factory"===t?void 0===e||""===e?(r[t].valid=!1,r[t].message="Factory cannot be empty."):(n[t]=e,a.setState({selectedFactory:e,formcontrols:r}),a.initMandatoryDocument(e._id)):"object"===typeof e&&e instanceof File&&"application/pdf"!==e.type?a.snackOpen("error","pdfFormat"):n[t]=e,a.setState({data:n})},a.handleDateChange=function(e,t){if(void 0!==e&&null!==e){var n=new Date(e);a.handleChange(n,t)}},a.removeFile=function(e){var t=Object(me.a)({},a.state.data);t.hasOwnProperty(e)&&(t[e]=null,document.querySelector("input[id='".concat(e,"']")).value="",a.setState({data:t}))},a.downloadFile=function(e,t){Ts.getMandatoryDoc("".concat(a.state.selectedFactory._id,"/").concat(t)).then((function(e){if(!0===e.code){var n=null,r=null;switch(t){case"CompanyProfile":n=e.data.CompanyProfile.CompanyProfile_Document.data,r=e.data.CompanyProfile.CompanyProfile_Document.name;break;case"FactoryLayout":n=e.data.FactoryLayout.FactoryLayout_Document.data,r=e.data.FactoryLayout.FactoryLayout_Document.name;break;case"FlowProcess":n=e.data.FlowProcess.FlowProcess_Document.data,r=e.data.FlowProcess.FlowProcess_Document.name;break;case"OrgChart":n=e.data.OrgChart.OrgChart_Document.data,r=e.data.OrgChart.OrgChart_Document.name;break;case"ControlPlan":n=e.data.ControlPlan.ControlPlan_Document.data,r=e.data.ControlPlan.ControlPlan_Document.name;break;case"ContingencyPlan":n=e.data.ContingencyPlan.ContingencyPlan_Document.data,r=e.data.ContingencyPlan.ContingencyPlan_Document.name;break;case"FMEA":n=e.data.FMEA.FMEA_Document.data,r=e.data.FMEA.FMEA_Document.name;break;case"FactoryLicense":n=e.data.FactoryLicense.FactoryLicense_Document.data,r=e.data.FactoryLicense.FactoryLicense_Document.name;break;case"ProductCertificate":n=e.data.ProductCertificate.ProductCertificate_Document.data,r=e.data.ProductCertificate.ProductCertificate_Document.name;break;case"ISO9001":n=e.data.ISO9001.ISO9001_Document.data,r=e.data.ISO9001.ISO9001_Document.name;break;case"ISO14000":n=e.data.ISO14000.ISO14000_Document.data,r=e.data.ISO14000.ISO14000_Document.name;break;case"ISO18000":n=e.data.ISO18000.ISO18000_Document.data,r=e.data.ISO18000.ISO18000_Document.name;break;case"ISO17025":n=e.data.ISO17025.ISO17025_Document.data,r=e.data.ISO17025.ISO17025_Document.name;break;case"C_TPAT":n=e.data.C_TPAT.C_TPAT_Document.data,r=e.data.C_TPAT.C_TPAT_Document.name}Co(n=new Uint8Array(n.data),r)}else a.snackOpen("error","server")}))},a.save=function(){var e;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return a.setLoading(!0),(e=new FormData).append("Factory",a.state.selectedFactory._id),t.next=5,l.a.awrap(Object.keys(a.state.data).map((function(t){var n=a.state.data[t];t.indexOf("_Document")>0&&null!==n&&!n.hasOwnProperty("_id")?(console.log(a.state.data[t]),e.append("files",n,t)):"Factory"!==t&&e.append(t,n)})));case 5:return t.next=7,l.a.awrap(Ts.add("",e).then((function(e){if(!0===e.code)a.setState({data:e.data},(function(){return a.setLoading(!1)}));else{var t=Object(me.a)({},a.state.formState),n={propertyName:"Server Error",message:e.message};t.errors.push(n),a.setState({formState:t},(function(){return a.setLoading(!1)}))}})).catch((function(e){a.setLoading(!1)})));case 7:case"end":return t.stop()}}))},a.cancel=function(){a.setLoading(!1),Object.keys(a.state.data).map((function(e){e.indexOf("_Document")>-1&&(document.querySelector("input[id='".concat(e,"']")).value="")})),a.setState({data:{},selectedFactory:{_id:""}})},a.state={loading:!1,formcontrols:Object(me.a)({},Bs),data:{},selectedFactory:{_id:""},index:1,value:0,dialogOpen:!1,currentDeleteData:null,dialogMessage:"",snackOpen:!1,snackMessage:"",snackClass:"",formState:{dirty:!1,valid:!1,errors:[]}},a.tabhandleChange=a.tabhandleChange.bind(Object(Pe.a)(a)),a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a.handleDateChange=a.handleDateChange.bind(Object(Pe.a)(a)),a.snackClose=a.snackClose.bind(Object(Pe.a)(a)),a.dialogOpen=a.dialogOpen.bind(Object(Pe.a)(a)),a.dialogClose=a.dialogClose.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"dialogOpen",value:function(e,t){this.setState({dialogOpen:!0,currentDeleteData:t,dialogMessage:r.a.createElement("span",null,"Are you sure to delete this record ",r.a.createElement("b",null,t.Name)," ? This cannot be undone.")})}},{key:"updateParentData",value:function(e){}},{key:"initMandatoryDocument",value:function(e){var t=this;void 0!==e&&null!==e&&""!==e&&Ts.getMandatoryDocFilter("?Factory=".concat(e)).then((function(e){!0===e.code&&t.setState({data:e.data})}))}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{style:{margin:"20px 0px 0px 0px"}},r.a.createElement(be.a,{item:!0,style:{display:this.state.loading?"block":"none"},className:"loading"},r.a.createElement(_s,null)),r.a.createElement(be.a,{item:!0,container:!0,xs:12},r.a.createElement(w.a,{position:"static",color:"default"},r.a.createElement(ks.a,{value:this.state.value,onChange:this.tabhandleChange,indicatorColor:"primary",textColor:"primary",variant:"fullWidth","aria-label":"Mandatory Document"},r.a.createElement(ws.a,{label:"Mandatory Document"}),r.a.createElement(ws.a,{label:"Mandatory Document History"}))),r.a.createElement(x.a,{component:"div",role:"tabpanel",hidden:0!==this.state.value,id:"tabpanel-".concat(this.state.index),"aria-labelledby":"tab-".concat(this.state.index),style:{width:"100%"}},r.a.createElement(De.a,null,r.a.createElement(be.a,{container:!0,style:{marginTop:4},direction:"row",justify:"space-around",alignItems:"center"},r.a.createElement(be.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center"},r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:3,lg:3},r.a.createElement(Hr,{selectedValue:this.state.selectedFactory,propertyName:"Factory",formControl:this.state.formcontrols.Factory,handleChange:this.handleChange}))),r.a.createElement(bn,{label:"SUPPORTING DOCUMENTS MANAGEMENT",style:{width:"100%",padding:"10px"}},r.a.createElement(be.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center"},r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:3,lg:3},r.a.createElement(ya.a,{style:{width:"100%",margin:7}},r.a.createElement(ge.a,{id:"standard-multiline-static",label:"Description - Company Profile",multiline:!0,rows:"2",value:void 0===this.state.data.CompanyProfile_Desc?"":this.state.data.CompanyProfile_Desc,className:"",onChange:function(t){return e.handleChange(t.target.value,"CompanyProfile_Desc")},margin:"dense"}))),r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:3,lg:3},r.a.createElement(ya.a,{style:{width:"100%",margin:7}},r.a.createElement("input",{accept:"application/pdf",className:"",id:"CompanyProfile_Document",color:"primary",type:"file",style:{display:"none"},onChange:function(t){e.handleChange(t.target.files[0],"CompanyProfile_Document")}}),void 0===this.state.data.CompanyProfile_Document||null===this.state.data.CompanyProfile_Document?r.a.createElement("label",{htmlFor:"CompanyProfile_Document",style:{textAlign:"center"}},r.a.createElement("span",{style:{padding:7}},void 0===this.state.data.CompanyProfile_Document||null===this.state.data.CompanyProfile_Document?"":this.state.data.CompanyProfile_Document.name),r.a.createElement(bt.a,{color:"primary",component:"span","aria-label":"add",className:""},r.a.createElement(wt.a,null))):r.a.createElement("span",null,r.a.createElement(St.a,{title:void 0===this.state.data.CompanyProfile_Document||null===this.state.data.CompanyProfile_Document?"":this.state.data.CompanyProfile_Document.name},r.a.createElement(he.a,{variant:"outlined",color:"primary",onClick:function(t){return e.downloadFile(e.state.data.CompanyProfile_Document,"CompanyProfile")}},r.a.createElement("span",{style:{minWidth:80,maxWidth:135,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}},void 0===this.state.data.CompanyProfile_Document||null===this.state.data.CompanyProfile_Document?"":this.state.data.CompanyProfile_Document.name))),r.a.createElement(bt.a,{"aria-label":"delete",color:"secondary",onClick:function(t){return e.removeFile("CompanyProfile_Document")}},r.a.createElement(xt.a,null))),r.a.createElement(Ea.a,{htmlFor:"file-upload",style:{paddingTop:5},error:!0}))),r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:3,lg:3},r.a.createElement(ya.a,{style:{width:"100%",margin:7}},r.a.createElement(ge.a,{id:"standard-multiline-static",label:"Change Reason",multiline:!0,rows:"2",value:void 0===this.state.data.CompanyProfile_Reason?"":this.state.data.CompanyProfile_Reason,className:"",onChange:function(t){return e.handleChange(t.target.value,"CompanyProfile_Reason")},margin:"dense"}))),r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:3,lg:3},r.a.createElement(ya.a,{style:{width:"100%",margin:7}},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Da.b,{style:{width:"100%",marginTop:27},margin:"dense",id:"date-picker-dialog",label:"Effective Date",format:"dd-MMM-yyyy",value:void 0===this.state.data.CompanyProfile_EffectiveDate?Date.now():this.state.data.CompanyProfile_EffectiveDate,onChange:function(t){return e.handleDateChange(t,"CompanyProfile_EffectiveDate")},KeyboardButtonProps:{"aria-label":"Effective Date"}}))))),r.a.createElement(k.a,null),r.a.createElement(be.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center"},r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:3,lg:3},r.a.createElement(ya.a,{style:{width:"100%",margin:7}},r.a.createElement(ge.a,{id:"FactoryLayout_Desc",label:"Description - Factory Layout",multiline:!0,rows:"2",value:void 0===this.state.data.FactoryLayout_Desc?"":this.state.data.FactoryLayout_Desc,className:"",onChange:function(t){return e.handleChange(t.target.value,"FactoryLayout_Desc")},margin:"dense"}))),r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:3,lg:3},r.a.createElement(ya.a,{style:{width:"100%",margin:7}},r.a.createElement("input",{accept:"application/pdf",className:"",id:"FactoryLayout_Document",color:"primary",type:"file",style:{display:"none"},onChange:function(t){e.handleChange(t.target.files[0],"FactoryLayout_Document")}}),void 0===this.state.data.FactoryLayout_Document||null===this.state.data.FactoryLayout_Document||""===this.state.data.FactoryLayout_Document.name?r.a.createElement("label",{htmlFor:"FactoryLayout_Document",style:{textAlign:"center"}},r.a.createElement("span",{style:{padding:7}},void 0===this.state.data.FactoryLayout_Document||null===this.state.data.FactoryLayout_Document?"":this.state.data.FactoryLayout_Document.name),r.a.createElement(bt.a,{color:"primary",component:"span","aria-label":"add",className:""},r.a.createElement(wt.a,null))):r.a.createElement("span",null,r.a.createElement(St.a,{title:void 0===this.state.data.FactoryLayout_Document||null===this.state.data.FactoryLayout_Document?"":this.state.data.FactoryLayout_Document.name},r.a.createElement(he.a,{variant:"outlined",color:"primary",onClick:function(t){return e.downloadFile(e.state.data.FactoryLayout_Document,"FactoryLayout")}},r.a.createElement("span",{style:{minWidth:80,maxWidth:135,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}},void 0===this.state.data.FactoryLayout_Document||null===this.state.data.FactoryLayout_Document?"":this.state.data.FactoryLayout_Document.name))),r.a.createElement(bt.a,{"aria-label":"delete",color:"secondary",onClick:function(t){return e.removeFile("FactoryLayout_Document")}},r.a.createElement(xt.a,null))),r.a.createElement(Ea.a,{htmlFor:"FactoryLayout_Document",style:{paddingTop:5},error:!0}))),r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:3,lg:3},r.a.createElement(ya.a,{style:{width:"100%",margin:7}},r.a.createElement(ge.a,{id:"FactoryLayout_Reason",label:"Change Reason",multiline:!0,rows:"2",value:void 0===this.state.data.FactoryLayout_Reason?"":this.state.data.FactoryLayout_Reason,className:"",onChange:function(t){return e.handleChange(t.target.value,"FactoryLayout_Reason")},margin:"dense"}))),r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:3,lg:3},r.a.createElement(ya.a,{style:{width:"100%",margin:7}},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Da.b,{style:{width:"100%",marginTop:27},margin:"dense",id:"FactoryLayout_EffectiveDate",label:"Effective Date",format:"dd-MMM-yyyy",value:void 0===this.state.data.FactoryLayout_EffectiveDate?Date.now():this.state.data.FactoryLayout_EffectiveDate,onChange:function(t){return e.handleDateChange(t,"FactoryLayout_EffectiveDate")},KeyboardButtonProps:{"aria-label":"Effective Date"}}))))),r.a.createElement(k.a,null),r.a.createElement(be.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center"},r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:3,lg:3},r.a.createElement(ya.a,{style:{width:"100%",margin:7}},r.a.createElement(ge.a,{id:"FlowProcess_Desc",label:"Description - Flow Process",multiline:!0,rows:"2",value:void 0===this.state.data.FlowProcess_Desc?"":this.state.data.FlowProcess_Desc,className:"",onChange:function(t){return e.handleChange(t.target.value,"FlowProcess_Desc")},margin:"dense"}))),r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:3,lg:3},r.a.createElement(ya.a,{style:{width:"100%",margin:7}},r.a.createElement("input",{accept:"application/pdf",className:"",id:"FlowProcess_Document",color:"primary",type:"file",style:{display:"none"},onChange:function(t){e.handleChange(t.target.files[0],"FlowProcess_Document")}}),void 0===this.state.data.FlowProcess_Document||null===this.state.data.FlowProcess_Document||""===this.state.data.FlowProcess_Document.name?r.a.createElement("label",{htmlFor:"FlowProcess_Document",style:{textAlign:"center"}},r.a.createElement("span",{style:{padding:7}},void 0===this.state.data.FlowProcess_Document||null===this.state.data.FlowProcess_Document?"":this.state.data.FlowProcess_Document.name),r.a.createElement(bt.a,{color:"primary",component:"span","aria-label":"add",className:""},r.a.createElement(wt.a,null))):r.a.createElement("span",null,r.a.createElement(St.a,{title:void 0===this.state.data.FlowProcess_Document||null===this.state.data.FlowProcess_Document?"":this.state.data.FlowProcess_Document.name},r.a.createElement(he.a,{variant:"outlined",color:"primary",onClick:function(t){return e.downloadFile(e.state.data.FlowProcess_Document,"FlowProcess")}},r.a.createElement("span",{style:{minWidth:80,maxWidth:135,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}},void 0===this.state.data.FlowProcess_Document||null===this.state.data.FlowProcess_Document?"":this.state.data.FlowProcess_Document.name))),r.a.createElement(bt.a,{"aria-label":"delete",color:"secondary",onClick:function(t){return e.removeFile("FlowProcess_Document")}},r.a.createElement(xt.a,null))),r.a.createElement(Ea.a,{htmlFor:"FlowProcess_Document",style:{paddingTop:5},error:!0}))),r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:3,lg:3},r.a.createElement(ya.a,{style:{width:"100%",margin:7}},r.a.createElement(ge.a,{id:"FlowProcess_Reason",label:"Change Reason",multiline:!0,rows:"2",value:void 0===this.state.data.FlowProcess_Reason?"":this.state.data.FlowProcess_Reason,className:"",onChange:function(t){return e.handleChange(t.target.value,"FlowProcess_Reason")},margin:"dense"}))),r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:3,lg:3},r.a.createElement(ya.a,{style:{width:"100%",margin:7}},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Da.b,{style:{width:"100%",marginTop:27},margin:"dense",id:"FlowProcess_EffectiveDate",label:"Effective Date",format:"dd-MMM-yyyy",value:void 0===this.state.data.FlowProcess_EffectiveDate?Date.now():this.state.data.FlowProcess_EffectiveDate,onChange:function(t){return e.handleDateChange(t,"FlowProcess_EffectiveDate")},KeyboardButtonProps:{"aria-label":"Effective Date"}}))))),r.a.createElement(k.a,null),r.a.createElement(be.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center"},r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:3,lg:3},r.a.createElement(ya.a,{style:{width:"100%",margin:7}},r.a.createElement(ge.a,{id:"OrgChart_Desc",label:"Description - Org Chart",multiline:!0,rows:"2",value:void 0===this.state.data.OrgChart_Desc?"":this.state.data.OrgChart_Desc,className:"",onChange:function(t){return e.handleChange(t.target.value,"OrgChart_Desc")},margin:"dense"}))),r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:3,lg:3},r.a.createElement(ya.a,{style:{width:"100%",margin:7}},r.a.createElement("input",{accept:"application/pdf",className:"",id:"OrgChart_Document",color:"primary",type:"file",style:{display:"none"},onChange:function(t){e.handleChange(t.target.files[0],"OrgChart_Document")}}),void 0===this.state.data.OrgChart_Document||null===this.state.data.OrgChart_Document||""===this.state.data.OrgChart_Document.name?r.a.createElement("label",{htmlFor:"OrgChart_Document",style:{textAlign:"center"}},r.a.createElement("span",{style:{padding:7}},void 0===this.state.data.OrgChart_Document||null===this.state.data.OrgChart_Document?"":this.state.data.OrgChart_Document.name),r.a.createElement(bt.a,{color:"primary",component:"span","aria-label":"add",className:""},r.a.createElement(wt.a,null))):r.a.createElement("span",null,r.a.createElement(St.a,{title:void 0===this.state.data.OrgChart_Document||null===this.state.data.OrgChart_Document?"":this.state.data.OrgChart_Document.name},r.a.createElement(he.a,{variant:"outlined",color:"primary",onClick:function(t){return e.downloadFile(e.state.data.OrgChart_Document,"OrgChart")}},r.a.createElement("span",{style:{minWidth:80,maxWidth:135,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}},void 0===this.state.data.OrgChart_Document||null===this.state.data.OrgChart_Document?"":this.state.data.OrgChart_Document.name))),r.a.createElement(bt.a,{"aria-label":"delete",color:"secondary",onClick:function(t){return e.removeFile("OrgChart_Document")}},r.a.createElement(xt.a,null))),r.a.createElement(Ea.a,{htmlFor:"OrgChart_Document",style:{paddingTop:5},error:!0}))),r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:3,lg:3},r.a.createElement(ya.a,{style:{width:"100%",margin:7}},r.a.createElement(ge.a,{id:"OrgChart_Reason",label:"Change Reason",multiline:!0,rows:"2",value:void 0===this.state.data.OrgChart_Reason?"":this.state.data.OrgChart_Reason,className:"",onChange:function(t){return e.handleChange(t.target.value,"OrgChart_Reason")},margin:"dense"}))),r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:3,lg:3},r.a.createElement(ya.a,{style:{width:"100%",margin:7}},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Da.b,{style:{width:"100%",marginTop:27},margin:"dense",id:"OrgChart_EffectiveDate",label:"Effective Date",format:"dd-MMM-yyyy",value:void 0===this.state.data.OrgChart_EffectiveDate?Date.now():this.state.data.OrgChart_EffectiveDate,onChange:function(t){return e.handleDateChange(t,"OrgChart_EffectiveDate")},KeyboardButtonProps:{"aria-label":"Effective Date"}}))))),r.a.createElement(k.a,null),r.a.createElement(be.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center"},r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:3,lg:3},r.a.createElement(ya.a,{style:{width:"100%",margin:7}},r.a.createElement(ge.a,{id:"ControlPlan_Desc",label:"Description - Control Plan",multiline:!0,rows:"2",value:void 0===this.state.data.ControlPlan_Desc?"":this.state.data.ControlPlan_Desc,className:"",onChange:function(t){return e.handleChange(t.target.value,"ControlPlan_Desc")},margin:"dense"}))),r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:3,lg:3},r.a.createElement(ya.a,{style:{width:"100%",margin:7}},r.a.createElement("input",{accept:"application/pdf",className:"",id:"ControlPlan_Document",color:"primary",type:"file",style:{display:"none"},onChange:function(t){e.handleChange(t.target.files[0],"ControlPlan_Document")}}),void 0===this.state.data.ControlPlan_Document||null===this.state.data.ControlPlan_Document||""===this.state.data.ControlPlan_Document.name?r.a.createElement("label",{htmlFor:"ControlPlan_Document",style:{textAlign:"center"}},r.a.createElement("span",{style:{padding:7}},void 0===this.state.data.ControlPlan_Document||null===this.state.data.ControlPlan_Document?"":this.state.data.ControlPlan_Document.name),r.a.createElement(bt.a,{color:"primary",component:"span","aria-label":"add",className:""},r.a.createElement(wt.a,null))):r.a.createElement("span",null,r.a.createElement(St.a,{title:void 0===this.state.data.ControlPlan_Document||null===this.state.data.ControlPlan_Document?"":this.state.data.ControlPlan_Document.name},r.a.createElement(he.a,{variant:"outlined",color:"primary",onClick:function(t){return e.downloadFile(e.state.data.ControlPlan_Document,"ControlPlan")}},r.a.createElement("span",{style:{minWidth:80,maxWidth:135,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}},void 0===this.state.data.ControlPlan_Document||null===this.state.data.ControlPlan_Document?"":this.state.data.ControlPlan_Document.name))),r.a.createElement(bt.a,{"aria-label":"delete",color:"secondary",onClick:function(t){return e.removeFile("ControlPlan_Document")}},r.a.createElement(xt.a,null))),r.a.createElement(Ea.a,{htmlFor:"ControlPlan_Document",style:{paddingTop:5},error:!0}))),r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:3,lg:3},r.a.createElement(ya.a,{style:{width:"100%",margin:7}},r.a.createElement(ge.a,{id:"ControlPlan_Reason",label:"Change Reason",multiline:!0,rows:"2",value:void 0===this.state.data.ControlPlan_Reason?"":this.state.data.ControlPlan_Reason,className:"",onChange:function(t){return e.handleChange(t.target.value,"ControlPlan_Reason")},margin:"dense"}))),r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:3,lg:3},r.a.createElement(ya.a,{style:{width:"100%",margin:7}},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Da.b,{style:{width:"100%",marginTop:27},margin:"dense",id:"ControlPlan_EffectiveDate",label:"Effective Date",format:"dd-MMM-yyyy",value:void 0===this.state.data.ControlPlan_EffectiveDate?Date.now():this.state.data.ControlPlan_EffectiveDate,onChange:function(t){return e.handleDateChange(t,"ControlPlan_EffectiveDate")},KeyboardButtonProps:{"aria-label":"Effective Date"}}))))),r.a.createElement(k.a,null),r.a.createElement(be.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center"},r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:3,lg:3},r.a.createElement(ya.a,{style:{width:"100%",margin:7}},r.a.createElement(ge.a,{id:"ContingencyPlan_Desc",label:"Description - Contingency Plan",multiline:!0,rows:"2",value:void 0===this.state.data.ContingencyPlan_Desc?"":this.state.data.ContingencyPlan_Desc,className:"",onChange:function(t){return e.handleChange(t.target.value,"ContingencyPlan_Desc")},margin:"dense"}))),r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:3,lg:3},r.a.createElement(ya.a,{style:{width:"100%",margin:7}},r.a.createElement("input",{accept:"application/pdf",className:"",id:"ContingencyPlan_Document",color:"primary",type:"file",style:{display:"none"},onChange:function(t){e.handleChange(t.target.files[0],"ContingencyPlan_Document")}}),void 0===this.state.data.ContingencyPlan_Document||null===this.state.data.ContingencyPlan_Document||""===this.state.data.ContingencyPlan_Document.name?r.a.createElement("label",{htmlFor:"ContingencyPlan_Document",style:{textAlign:"center"}},r.a.createElement("span",{style:{padding:7}},void 0===this.state.data.ContingencyPlan_Document||null===this.state.data.ContingencyPlan_Document?"":this.state.data.ContingencyPlan_Document.name),r.a.createElement(bt.a,{color:"primary",component:"span","aria-label":"add",className:""},r.a.createElement(wt.a,null))):r.a.createElement("span",null,r.a.createElement(St.a,{title:void 0===this.state.data.ContingencyPlan_Document||null===this.state.data.ContingencyPlan_Document?"":this.state.data.ContingencyPlan_Document.name},r.a.createElement(he.a,{variant:"outlined",color:"primary",onClick:function(t){return e.downloadFile(e.state.data.ContingencyPlan_Document,"ContingencyPlan")}},r.a.createElement("span",{style:{minWidth:80,maxWidth:135,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}},void 0===this.state.data.ContingencyPlan_Document||null===this.state.data.ContingencyPlan_Document?"":this.state.data.ContingencyPlan_Document.name))),r.a.createElement(bt.a,{"aria-label":"delete",color:"secondary",onClick:function(t){return e.removeFile("ContingencyPlan_Document")}},r.a.createElement(xt.a,null))),r.a.createElement(Ea.a,{htmlFor:"ContingencyPlan_Document",style:{paddingTop:5},error:!0}))),r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:3,lg:3},r.a.createElement(ya.a,{style:{width:"100%",margin:7}},r.a.createElement(ge.a,{id:"ContingencyPlan_Reason",label:"Change Reason",multiline:!0,rows:"2",value:void 0===this.state.data.ContingencyPlan_Reason?"":this.state.data.ContingencyPlan_Reason,className:"",onChange:function(t){return e.handleChange(t.target.value,"ContingencyPlan_Reason")},margin:"dense"}))),r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:3,lg:3},r.a.createElement(ya.a,{style:{width:"100%",margin:7}},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Da.b,{style:{width:"100%",marginTop:27},margin:"dense",id:"ContingencyPlan_EffectiveDate",label:"Effective Date",format:"dd-MMM-yyyy",value:void 0===this.state.data.ContingencyPlan_EffectiveDate?Date.now():this.state.data.ContingencyPlan_EffectiveDate,onChange:function(t){return e.handleDateChange(t,"ContingencyPlan_EffectiveDate")},KeyboardButtonProps:{"aria-label":"Effective Date"}}))))),r.a.createElement(k.a,null),r.a.createElement(be.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center"},r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:3,lg:3},r.a.createElement(ya.a,{style:{width:"100%",margin:7}},r.a.createElement(ge.a,{id:"FMEA_Desc",label:"Description - FMEA",multiline:!0,rows:"2",value:void 0===this.state.data.FMEA_Desc?"":this.state.data.FMEA_Desc,className:"",onChange:function(t){return e.handleChange(t.target.value,"FMEA_Desc")},margin:"dense"}))),r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:3,lg:3},r.a.createElement(ya.a,{style:{width:"100%",margin:7}},r.a.createElement("input",{accept:"application/pdf",className:"",id:"FMEA_Document",color:"primary",type:"file",style:{display:"none"},onChange:function(t){e.handleChange(t.target.files[0],"FMEA_Document")}}),void 0===this.state.data.FMEA_Document||null===this.state.data.FMEA_Document||""===this.state.data.ControlPlan_Document.data?r.a.createElement("label",{htmlFor:"FMEA_Document",style:{textAlign:"center"}},r.a.createElement("span",{style:{padding:7}},void 0===this.state.data.FMEA_Document||null===this.state.data.FMEA_Document?"":this.state.data.FMEA_Document.name),r.a.createElement(bt.a,{color:"primary",component:"span","aria-label":"add",className:""},r.a.createElement(wt.a,null))):r.a.createElement("span",null,r.a.createElement(St.a,{title:void 0===this.state.data.FMEA_Document||null===this.state.data.FMEA_Document?"":this.state.data.FMEA_Document.name},r.a.createElement(he.a,{variant:"outlined",color:"primary",onClick:function(t){return e.downloadFile(e.state.data.FMEA_Document,"FMEA")}},r.a.createElement("span",{style:{minWidth:80,maxWidth:135,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}},void 0===this.state.data.FMEA_Document||null===this.state.data.FMEA_Document?"":this.state.data.FMEA_Document.name))),r.a.createElement(bt.a,{"aria-label":"delete",color:"secondary",onClick:function(t){return e.removeFile("FMEA_Document")}},r.a.createElement(xt.a,null))),r.a.createElement(Ea.a,{htmlFor:"FMEA_Document",style:{paddingTop:5},error:!0}))),r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:3,lg:3},r.a.createElement(ya.a,{style:{width:"100%",margin:7}},r.a.createElement(ge.a,{id:"FMEA_Reason",label:"Change Reason",multiline:!0,rows:"2",value:void 0===this.state.data.FMEA_Reason?"":this.state.data.FMEA_Reason,className:"",onChange:function(t){return e.handleChange(t.target.value,"FMEA_Reason")},margin:"dense"}))),r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:3,lg:3},r.a.createElement(ya.a,{style:{width:"100%",margin:7}},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Da.b,{style:{width:"100%",marginTop:27},margin:"dense",id:"FMEA_EffectiveDate",label:"Effective Date",format:"dd-MMM-yyyy",value:void 0===this.state.data.FMEA_EffectiveDate?Date.now():this.state.data.FMEA_EffectiveDate,onChange:function(t){return e.handleDateChange(t,"FMEA_EffectiveDate")},KeyboardButtonProps:{"aria-label":"Effective Date"}})))))),r.a.createElement(bn,{label:"CERTIFICATE MANAGEMENT",style:{width:"100%",padding:"10px"}},r.a.createElement(be.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center"},r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:3,lg:3},r.a.createElement(ya.a,{style:{width:"100%",margin:7}},r.a.createElement(ge.a,{id:"FactoryLicense_Desc",label:"Description - Factory License",multiline:!0,rows:"2",value:void 0===this.state.data.FactoryLicense_Desc?"":this.state.data.FactoryLicense_Desc,className:"",onChange:function(t){return e.handleChange(t.target.value,"FactoryLicense_Desc")},margin:"dense"}))),r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:3,lg:3},r.a.createElement(ya.a,{style:{width:"100%",margin:7}},r.a.createElement("input",{accept:"application/pdf",className:"",id:"FactoryLicense_Document",color:"primary",type:"file",style:{display:"none"},onChange:function(t){e.handleChange(t.target.files[0],"FactoryLicense_Document")}}),void 0===this.state.data.FactoryLicense_Document||null===this.state.data.FactoryLicense_Document||""===this.state.data.ControlPlan_Document.name?r.a.createElement("label",{htmlFor:"FactoryLicense_Document",style:{textAlign:"center"}},r.a.createElement("span",{style:{padding:7}},void 0===this.state.data.FactoryLicense_Document||null===this.state.data.FactoryLicense_Document?"":this.state.data.FactoryLicense_Document.name),r.a.createElement(bt.a,{color:"primary",component:"span","aria-label":"add",className:""},r.a.createElement(wt.a,null))):r.a.createElement("span",null,r.a.createElement(St.a,{title:void 0===this.state.data.FactoryLicense_Document||null===this.state.data.FactoryLicense_Document?"":this.state.data.FactoryLicense_Document.name},r.a.createElement(he.a,{variant:"outlined",color:"primary",onClick:function(t){return e.downloadFile(e.state.data.FactoryLicense_Document,"FactoryLicense")}},r.a.createElement("span",{style:{minWidth:80,maxWidth:135,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}},void 0===this.state.data.FactoryLicense_Document||null===this.state.data.FactoryLicense_Document||""===this.state.data.FactoryLicense_Document.name?"":this.state.data.FactoryLicense_Document.name))),r.a.createElement(bt.a,{"aria-label":"delete",color:"secondary",onClick:function(t){return e.handleChange(null,"FactoryLicense_Document")}},r.a.createElement(xt.a,null))),r.a.createElement(Ea.a,{htmlFor:"FactoryLicense_Document",style:{paddingTop:5},error:!0}))),r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:3,lg:3},r.a.createElement(ya.a,{style:{width:"100%",margin:7}},r.a.createElement(ge.a,{id:"FactoryLicense_Reason",label:"Change Reason",multiline:!0,rows:"2",value:void 0===this.state.data.FactoryLicense_Reason?"":this.state.data.FactoryLicense_Reason,className:"",onChange:function(t){return e.handleChange(t.target.value,"FactoryLicense_Reason")},margin:"dense"}))),r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:3,lg:3},r.a.createElement(ya.a,{style:{width:"100%",margin:7}},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Da.b,{style:{width:"100%",marginTop:27},margin:"dense",id:"FactoryLicense_EffectiveDate",label:"Effective Date",format:"dd-MMM-yyyy",value:void 0===this.state.data.FactoryLicense_EffectiveDate?Date.now():this.state.data.FactoryLicense_EffectiveDate,onChange:function(t){return e.handleDateChange(t,"FactoryLicense_EffectiveDate")},KeyboardButtonProps:{"aria-label":"Effective Date"}}))))),r.a.createElement(k.a,null),r.a.createElement(be.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center"},r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:3,lg:3},r.a.createElement(ya.a,{style:{width:"100%",margin:7}},r.a.createElement(ge.a,{id:"ProductCertificate_Desc",label:"Description - Product Certificate",multiline:!0,rows:"2",value:void 0===this.state.data.ProductCertificate_Desc?"":this.state.data.ProductCertificate_Desc,className:"",onChange:function(t){return e.handleChange(t.target.value,"ProductCertificate_Desc")},margin:"dense"}))),r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:3,lg:3},r.a.createElement(ya.a,{style:{width:"100%",margin:7}},r.a.createElement("input",{accept:"application/pdf",className:"",id:"ProductCertificate_Document",color:"primary",type:"file",style:{display:"none"},onChange:function(t){e.handleChange(t.target.files[0],"ProductCertificate_Document")}}),void 0===this.state.data.ProductCertificate_Document||null===this.state.data.ProductCertificate_Document||""===this.state.data.ProductCertificate_Document.name?r.a.createElement("label",{htmlFor:"ProductCertificate_Document",style:{textAlign:"center"}},r.a.createElement("span",{style:{padding:7}},void 0===this.state.data.ProductCertificate_Document||null===this.state.data.ProductCertificate_Document?"":this.state.data.ProductCertificate_Document.name),r.a.createElement(bt.a,{color:"primary",component:"span","aria-label":"add",className:""},r.a.createElement(wt.a,null))):r.a.createElement("span",null,r.a.createElement(St.a,{title:void 0===this.state.data.ProductCertificate_Document||null===this.state.data.ProductCertificate_Document?"":this.state.data.ProductCertificate_Document.name},r.a.createElement(he.a,{variant:"outlined",color:"primary",onClick:function(t){return e.downloadFile(e.state.data.ProductCertificate_Document,"ProductCertificate")}},r.a.createElement("span",{style:{minWidth:80,maxWidth:135,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}},void 0===this.state.data.ProductCertificate_Document||null===this.state.data.ProductCertificate_Document?"":this.state.data.ProductCertificate_Document.name))),r.a.createElement(bt.a,{"aria-label":"delete",color:"secondary",onClick:function(t){return e.handleChange(null,"ProductCertificate_Document")}},r.a.createElement(xt.a,null))),r.a.createElement(Ea.a,{htmlFor:"ProductCertificate_Document",style:{paddingTop:5},error:!0}))),r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:3,lg:3},r.a.createElement(ya.a,{style:{width:"100%",margin:7}},r.a.createElement(ge.a,{id:"ProductCertificate_Reason",label:"Change Reason",multiline:!0,rows:"2",value:void 0===this.state.data.ProductCertificate_Reason?"":this.state.data.ProductCertificate_Reason,className:"",onChange:function(t){return e.handleChange(t.target.value,"ProductCertificate_Reason")},margin:"dense"}))),r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:3,lg:3},r.a.createElement(ya.a,{style:{width:"100%",margin:7}},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Da.b,{style:{width:"100%",marginTop:27},margin:"dense",id:"ProductCertificate_EffectiveDate",label:"Effective Date",format:"dd-MMM-yyyy",value:void 0===this.state.data.ProductCertificate_EffectiveDate?Date.now():this.state.data.ProductCertificate_EffectiveDate,onChange:function(t){return e.handleDateChange(t,"ProductCertificate_EffectiveDate")},KeyboardButtonProps:{"aria-label":"Effective Date"}}))))),r.a.createElement(k.a,null),r.a.createElement(be.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center"},r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:3,lg:3},r.a.createElement(ya.a,{style:{width:"100%",margin:7}},r.a.createElement(ge.a,{id:"ISO9001_Desc",label:"Description - ISO9001",multiline:!0,rows:"2",value:void 0===this.state.data.ISO9001_Desc?"":this.state.data.ISO9001_Desc,className:"",onChange:function(t){return e.handleChange(t.target.value,"ISO9001_Desc")},margin:"dense"}))),r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:3,lg:3},r.a.createElement(ya.a,{style:{width:"100%",margin:7}},r.a.createElement("input",{accept:"application/pdf",className:"",id:"ISO9001_Document",color:"primary",type:"file",style:{display:"none"},onChange:function(t){e.handleChange(t.target.files[0],"ISO9001_Document")}}),void 0===this.state.data.ISO9001_Document||null===this.state.data.ISO9001_Document||""===this.state.data.ISO9001_Document.name?r.a.createElement("label",{htmlFor:"ProductCertificate_Document",style:{textAlign:"center"}},r.a.createElement("span",{style:{padding:7}},void 0===this.state.data.ISO9001_Document||null===this.state.data.ISO9001_Document?"":this.state.data.ISO9001_Document.name),r.a.createElement(bt.a,{color:"primary",component:"span","aria-label":"add",className:""},r.a.createElement(wt.a,null))):r.a.createElement("span",null,r.a.createElement(St.a,{title:void 0===this.state.data.ISO9001_Document||null===this.state.data.ISO9001_Document?"":this.state.data.ISO9001_Document.name},r.a.createElement(he.a,{variant:"outlined",color:"primary",onClick:function(t){return e.downloadFile(e.state.data.ISO9001_Document,"ISO9001")}},r.a.createElement("span",{style:{minWidth:80,maxWidth:135,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}},void 0===this.state.data.ISO9001_Document||null===this.state.data.ISO9001_Document?"":this.state.data.ISO9001_Document.name))),r.a.createElement(bt.a,{"aria-label":"delete",color:"secondary",onClick:function(t){return e.removeFile("ISO9001_Document")}},r.a.createElement(xt.a,null))),r.a.createElement(Ea.a,{htmlFor:"ProductCertificate_Document",style:{paddingTop:5},error:!0}))),r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:3,lg:3},r.a.createElement(ya.a,{style:{width:"100%",margin:7}},r.a.createElement(ge.a,{id:"ISO9001_Reason",label:"Change Reason",multiline:!0,rows:"2",value:void 0===this.state.data.ISO9001_Reason?"":this.state.data.ISO9001_Reason,className:"",onChange:function(t){return e.handleChange(t.target.value,"ISO9001_Reason")},margin:"dense"}))),r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:3,lg:3},r.a.createElement(ya.a,{style:{width:"100%",margin:7}},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Da.b,{style:{width:"100%",marginTop:27},margin:"dense",id:"ISO9001_EffectiveDate",label:"Effective Date",format:"dd-MMM-yyyy",value:void 0===this.state.data.ISO9001_EffectiveDate?Date.now():this.state.data.ISO9001_EffectiveDate,onChange:function(t){return e.handleDateChange(t,"ISO9001_EffectiveDate")},KeyboardButtonProps:{"aria-label":"Effective Date"}}))))),r.a.createElement(k.a,null),r.a.createElement(be.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center"},r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:3,lg:3},r.a.createElement(ya.a,{style:{width:"100%",margin:7}},r.a.createElement(ge.a,{id:"ISO14000_Desc",label:"Description - ISO14000",multiline:!0,rows:"2",value:void 0===this.state.data.ISO14000_Desc?"":this.state.data.ISO14000_Desc,className:"",onChange:function(t){return e.handleChange(t.target.value,"ISO14000_Desc")},margin:"dense"}))),r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:3,lg:3},r.a.createElement(ya.a,{style:{width:"100%",margin:7}},r.a.createElement("input",{accept:"application/pdf",className:"",id:"ISO14000_Document",color:"primary",type:"file",style:{display:"none"},onChange:function(t){e.handleChange(t.target.files[0],"ISO14000_Document")}}),void 0===this.state.data.ISO14000_Document||null===this.state.data.ISO14000_Document||""===this.state.data.ISO14000_Document.name?r.a.createElement("label",{htmlFor:"ISO14000_Document",style:{textAlign:"center"}},r.a.createElement("span",{style:{padding:7}},void 0===this.state.data.ISO14000_Document||null===this.state.data.ISO14000_Document?"":this.state.data.ISO14000_Document.name),r.a.createElement(bt.a,{color:"primary",component:"span","aria-label":"add",className:""},r.a.createElement(wt.a,null))):r.a.createElement("span",null,r.a.createElement(St.a,{title:void 0===this.state.data.ISO14000_Document||null===this.state.data.ISO14000_Document?"":this.state.data.ISO14000_Document.name},r.a.createElement(he.a,{variant:"outlined",color:"primary",onClick:function(t){return e.downloadFile(e.state.data.ISO14000_Document,"ISO14000_EMS")}},r.a.createElement("span",{style:{minWidth:80,maxWidth:135,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}},void 0===this.state.data.ISO14000_Document||null===this.state.data.ISO14000_Document?"":this.state.data.ISO14000_Document.name))),r.a.createElement(bt.a,{"aria-label":"delete",color:"secondary",onClick:function(t){return e.removeFile("ISO14000_Document")}},r.a.createElement(xt.a,null))),r.a.createElement(Ea.a,{htmlFor:"ISO14000_Document",style:{paddingTop:5},error:!0}))),r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:3,lg:3},r.a.createElement(ya.a,{style:{width:"100%",margin:7}},r.a.createElement(ge.a,{id:"ISO14000_Reason",label:"Change Reason",multiline:!0,rows:"2",value:void 0===this.state.data.ISO14000_Reason?"":this.state.data.ISO14000_Reason,className:"",onChange:function(t){return e.handleChange(t.target.value,"ISO14000_Reason")},margin:"dense"}))),r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:3,lg:3},r.a.createElement(ya.a,{style:{width:"100%",margin:7}},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Da.b,{style:{width:"100%",marginTop:27},margin:"dense",id:"ISO14000_EffectiveDate",label:"Effective Date",format:"dd-MMM-yyyy",value:void 0===this.state.data.ISO14000_EffectiveDate?Date.now():this.state.data.ISO14000_EffectiveDate,onChange:function(t){return e.handleDateChange(t,"ISO14000_EffectiveDate")},KeyboardButtonProps:{"aria-label":"Effective Date"}}))))),r.a.createElement(k.a,null),r.a.createElement(be.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center"},r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:3,lg:3},r.a.createElement(ya.a,{style:{width:"100%",margin:7}},r.a.createElement(ge.a,{id:"ISO18000_Desc",label:"Description - ISO18000",multiline:!0,rows:"2",value:void 0===this.state.data.ISO18000_Desc?"":this.state.data.ISO18000_Desc,className:"",onChange:function(t){return e.handleChange(t.target.value,"ISO18000_Desc")},margin:"dense"}))),r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:3,lg:3},r.a.createElement(ya.a,{style:{width:"100%",margin:7}},r.a.createElement("input",{accept:"application/pdf",className:"",id:"ISO18000_Document",color:"primary",type:"file",style:{display:"none"},onChange:function(t){e.handleChange(t.target.files[0],"ISO18000_Document")}}),void 0===this.state.data.ISO18000_Document||null===this.state.data.ISO18000_Document||""===this.state.data.ISO18000_Document.name?r.a.createElement("label",{htmlFor:"ISO18000_Document",style:{textAlign:"center"}},r.a.createElement("span",{style:{padding:7}},void 0===this.state.data.ISO18000_Document||null===this.state.data.ISO18000_Document?"":this.state.data.ISO18000_Document.name),r.a.createElement(bt.a,{color:"primary",component:"span","aria-label":"add",className:""},r.a.createElement(wt.a,null))):r.a.createElement("span",null,r.a.createElement(St.a,{title:void 0===this.state.data.ISO18000_Document||null===this.state.data.ISO18000_Document?"":this.state.data.ISO18000_Document.name},r.a.createElement(he.a,{variant:"outlined",color:"primary",onClick:function(t){return e.downloadFile(e.state.data.ISO18000_Document,"ISO18000_OSHAS")}},r.a.createElement("span",{style:{minWidth:80,maxWidth:135,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}},void 0===this.state.data.ISO18000_Document||null===this.state.data.ISO18000_Document?"":this.state.data.ISO18000_Document.name))),r.a.createElement(bt.a,{"aria-label":"delete",color:"secondary",onClick:function(t){return e.removeFile("ISO18000_Document")}},r.a.createElement(xt.a,null))),r.a.createElement(Ea.a,{htmlFor:"ISO18000_Document",style:{paddingTop:5},error:!0}))),r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:3,lg:3},r.a.createElement(ya.a,{style:{width:"100%",margin:7}},r.a.createElement(ge.a,{id:"ISO18000_Reason",label:"Change Reason",multiline:!0,rows:"2",value:void 0===this.state.data.ISO18000_Reason?"":this.state.data.ISO18000_Reason,className:"",onChange:function(t){return e.handleChange(t.target.value,"ISO18000_Reason")},margin:"dense"}))),r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:3,lg:3},r.a.createElement(ya.a,{style:{width:"100%",margin:7}},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Da.b,{style:{width:"100%",marginTop:27},margin:"dense",id:"ISO18000_EffectiveDate",label:"Effective Date",format:"dd-MMM-yyyy",value:void 0===this.state.data.ISO18000_EffectiveDate?Date.now():this.state.data.ISO18000_EffectiveDate,onChange:function(t){return e.handleDateChange(t,"ISO18000_EffectiveDate")},KeyboardButtonProps:{"aria-label":"Effective Date"}}))))),r.a.createElement(k.a,null),r.a.createElement(be.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center"},r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:3,lg:3},r.a.createElement(ya.a,{style:{width:"100%",margin:7}},r.a.createElement(ge.a,{id:"ISO17027_Desc",label:"Description - ISO17027",multiline:!0,rows:"2",value:void 0===this.state.data.ISO17027_Desc?"":this.state.data.ISO17027_Desc,className:"",onChange:function(t){return e.handleChange(t.target.value,"ISO17027_Desc")},margin:"dense"}))),r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:3,lg:3},r.a.createElement(ya.a,{style:{width:"100%",margin:7}},r.a.createElement("input",{accept:"application/pdf",className:"",id:"ISO17027_Document",color:"primary",type:"file",style:{display:"none"},onChange:function(t){e.handleChange(t.target.files[0],"ISO17027_Document")}}),void 0===this.state.data.ISO17027_Document||null===this.state.data.ISO17027_Document||""===this.state.data.ISO18000_Document.name?r.a.createElement("label",{htmlFor:"ISO17027_Document",style:{textAlign:"center"}},r.a.createElement("span",{style:{padding:7}},void 0===this.state.data.ISO17027_Document||null===this.state.data.ISO17027_Document?"":this.state.data.ISO17027_Document.name),r.a.createElement(bt.a,{color:"primary",component:"span","aria-label":"add",className:""},r.a.createElement(wt.a,null))):r.a.createElement("span",null,r.a.createElement(St.a,{title:void 0===this.state.data.ISO17027_Document||null===this.state.data.ISO17027_Document?"":this.state.data.ISO17027_Document.name},r.a.createElement(he.a,{variant:"outlined",color:"primary",onClick:function(t){return e.downloadFile(e.state.data.ISO17027_Document,"ISO17025_Lab")}},r.a.createElement("span",{style:{minWidth:80,maxWidth:135,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}},void 0===this.state.data.ISO17027_Document||null===this.state.data.ISO17027_Document?"":this.state.data.ISO17027_Document.name))),r.a.createElement(bt.a,{"aria-label":"delete",color:"secondary",onClick:function(t){return e.removeFile("ISO18000_Document")}},r.a.createElement(xt.a,null))),r.a.createElement(Ea.a,{htmlFor:"ISO17027_Document",style:{paddingTop:5},error:!0}))),r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:3,lg:3},r.a.createElement(ya.a,{style:{width:"100%",margin:7}},r.a.createElement(ge.a,{id:"ISO17027_Reason",label:"Change Reason",multiline:!0,rows:"2",value:void 0===this.state.data.ISO17027_Reason?"":this.state.data.ISO17027_Reason,className:"",onChange:function(t){return e.handleChange(t.target.value,"ISO17027_Reason")},margin:"dense"}))),r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:3,lg:3},r.a.createElement(ya.a,{style:{width:"100%",margin:7}},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Da.b,{style:{width:"100%",marginTop:27},margin:"dense",id:"ISO17027_EffectiveDate",label:"Effective Date",format:"dd-MMM-yyyy",value:void 0===this.state.data.ISO17027_EffectiveDate?Date.now():this.state.data.ISO17027_EffectiveDate,onChange:function(t){return e.handleDateChange(t,"ISO17027_EffectiveDate")},KeyboardButtonProps:{"aria-label":"Effective Date"}}))))),r.a.createElement(k.a,null),r.a.createElement(be.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center"},r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:3,lg:3},r.a.createElement(ya.a,{style:{width:"100%",margin:7}},r.a.createElement(ge.a,{id:"C_TPAT_Desc",label:"Description - C-TPAT",multiline:!0,rows:"2",value:void 0===this.state.data.C_TPAT_Desc?"":this.state.data.C_TPAT_Desc,className:"",onChange:function(t){return e.handleChange(t.target.value,"C_TPAT_Desc")},margin:"dense"}))),r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:3,lg:3},r.a.createElement(ya.a,{style:{width:"100%",margin:7}},r.a.createElement("input",{accept:"application/pdf",className:"",id:"C_TPAT_Document",color:"primary",type:"file",style:{display:"none"},onChange:function(t){e.handleChange(t.target.files[0],"C_TPAT_Document")}}),void 0===this.state.data.C_TPAT_Document||null===this.state.data.C_TPAT_Document||""===this.state.data.C_TPAT_Document.name?r.a.createElement("label",{htmlFor:"C_TPAT_Document",style:{textAlign:"center"}},r.a.createElement("span",{style:{padding:7}},void 0===this.state.data.C_TPAT_Document||null===this.state.data.C_TPAT_Document?"":this.state.data.C_TPAT_Document.name),r.a.createElement(bt.a,{color:"primary",component:"span","aria-label":"add",className:""},r.a.createElement(wt.a,null))):r.a.createElement("span",null,r.a.createElement(St.a,{title:void 0===this.state.data.C_TPAT_Document||null===this.state.data.C_TPAT_Document?"":this.state.data.C_TPAT_Document.name},r.a.createElement(he.a,{variant:"outlined",color:"primary",onClick:function(t){return e.downloadFile(e.state.data.C_TPAT_Document,"C_TPAT")}},r.a.createElement("span",{style:{minWidth:80,maxWidth:135,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}},void 0===this.state.data.C_TPAT_Document||null===this.state.data.C_TPAT_Document?"":this.state.data.C_TPAT_Document.name))),r.a.createElement(bt.a,{"aria-label":"delete",color:"secondary",onClick:function(t){return e.removeFile("C_TPAT_Document")}},r.a.createElement(xt.a,null))),r.a.createElement(Ea.a,{htmlFor:"C_TPAT_Document",style:{paddingTop:5},error:!0}))),r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:3,lg:3},r.a.createElement(ya.a,{style:{width:"100%",margin:7}},r.a.createElement(ge.a,{id:"C_TPAT_Reason",label:"Change Reason",multiline:!0,rows:"2",value:void 0===this.state.data.C_TPAT_Reason?"":this.state.data.C_TPAT_Reason,className:"",onChange:function(t){return e.handleChange(t.target.value,"C_TPAT_Reason")},margin:"dense"}))),r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:3,lg:3},r.a.createElement(ya.a,{style:{width:"100%",margin:7}},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Da.b,{style:{width:"100%",marginTop:27},margin:"dense",id:"C_TPAT_EffectiveDate",label:"Effective Date",format:"dd-MMM-yyyy",value:void 0===this.state.data.C_TPAT_EffectiveDate?Date.now():this.state.data.C_TPAT_EffectiveDate,onChange:function(t){return e.handleDateChange(t,"C_TPAT_EffectiveDate")},KeyboardButtonProps:{"aria-label":"Effective Date"}}))))))),r.a.createElement(be.a,{item:!0,xs:12},!1===this.state.formState.valid&&this.state.formState.errors.length>0?this.state.formSate.errors.map((function(e){return r.a.createElement(x.a,{variant:"overline",component:"h2"},e.message)})):""),r.a.createElement("div",{class:"form-btn-container"},r.a.createElement(be.a,{item:!0,style:{padding:10},xs:3,sm:2,md:1},r.a.createElement(he.a,{variant:"contained",color:"primary",onClick:this.save},"Save")),r.a.createElement(be.a,{item:!0,style:{padding:10},xs:3,sm:2,md:1},r.a.createElement(he.a,{variant:"contained",onClick:this.cancel},"Cancel"))),r.a.createElement(bn,{label:"UPLOAD OTHER DOCUMENT",style:{width:"100%",padding:"10px"}},r.a.createElement(be.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center"},r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12},r.a.createElement(As,{formData:this.state.data.OthersupportDocument,selectedFactory:this.state.data.Factory,handleChange:this.handleChange}))),r.a.createElement(k.a,null)))),r.a.createElement(x.a,{component:"div",role:"tabpanel",hidden:1!==this.state.value,id:"tabpanel-".concat(this.state.index),"aria-labelledby":"tab-".concat(this.state.index),style:{width:"100%"}},r.a.createElement(De.a,{style:{width:"100%"}},r.a.createElement(Vs,null)))),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.snackClass,autoHideDuration:6e3,open:this.state.snackOpen,onClose:this.snackClose,message:r.a.createElement("span",{id:"message-id"},this.state.snackMessage)}),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.dialogClose,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.dialogClose,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:function(){return e.OnDelete()},color:"primary"},"Delete"))))}}]),t}(r.a.Component),qs=(a(858),{ShippingType:"Container",Factory:"",StuffingDate:new Date(Date.now()),ShippingInstruction:"",Shipping:"",ContainerDetail:"",SealNo:0,TruckID:"",Driver:"",Supervisor:""}),Gs={properties:{ShippingType:{description:"",type:["object","string"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Shipping Type cannot be empty.",conform:"Shipping Type cannot be empty.",required:"Shipping Type cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},Factory:{description:"",type:["object","string"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Factory cannot be empty.",conform:"Factory cannot be empty.",required:"Factory cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},StuffingDate:{description:"",type:"any",required:!0,allowEmpty:!1,messages:{allowEmpty:"Date cannot be empty.",conform:"Date cannot be empty.",required:"Date cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},ShippingInstruction:{description:"",type:["object","string"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Shipping Instruction cannot be empty.",conform:"Shipping Instruction cannot be empty.",required:"Shipping Instruction cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},Shipping:{description:"",type:["object","string"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Sequence Number cannot be empty.",conform:"Sequence Number cannot be empty.",required:"Sequence Number cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},ContainerDetail:{description:"",type:["object","string"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Container cannot be empty.",conform:"Container cannot be empty.",required:"Container cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},TruckID:{description:"",type:"string"},Driver:{description:"",type:"string"},Supervisor:{description:"",type:"string"},ContainerImages:{description:"",type:"object"},OtherImages:{description:"",type:"array"},CreatedAt:{type:"any",default:Date.now()},CreatedBy:{type:"string",default:""},LastUpdatedAt:{type:"any",default:Date.now()},LastUpdatedBy:{type:"string",default:""}}},Ws=a(24),Hs={validateFields:function(e){return Ws.validate(e,Gs,{cast:!0})},getStuffingContainer:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="StuffingContainer/"+e,a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 2:case"end":return a.stop()}}))},getStuffingContainerFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("StuffingContainer-filter/").concat(e),a.next=3,l.a.awrap(We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 3:return a.abrupt("return",a.sent);case 4:case"end":return a.stop()}}))},getOneStuffingContainer:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("StuffingContainer/").concat(e),a.next=3,l.a.awrap(We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 3:return a.abrupt("return",a.sent);case 4:case"end":return a.stop()}}))},update:function(e,t){return Qe("StuffingContainer/"+e,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Updated",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="StuffingContainer/"+e,n.abrupt("return",He(a,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Added",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,formValid:!0,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("StuffingContainer/"+e).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))}},Qs=a(464),zs=a(1129),Ys=a(1130),Ks=a(1131),Js=(a(859),a(197)),Zs=a.n(Js),Xs=(a(860),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={currentActionName:a.props.actionFor},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"onTakePhoto",value:function(e){void 0!==e&&null!==e&&this.props.handelChange(e,this.state.currentActionName),this.props.closeCamera()}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{item:!0,container:!0,xs:12},r.a.createElement(Zs.a,{idealFacingMode:Js.FACING_MODES.ENVIRONMENT,idealResolution:{width:768,height:1024},imageType:Js.IMAGE_TYPES.PNG,imageCompression:.97,isMaxResolution:!0,isImageMirror:!1,isSilentMode:!0,isDisplayStartCameraError:!0,isFullscreen:!0,sizeFactor:.7,onTakePhoto:function(t){e.onTakePhoto(t)}}))}}]),t}(r.a.Component));Zs.a.propTypes={};var $s=Xs,ei=a(89),ti=a.n(ei),ai=(a(861),a(320)),ni=a(463),ri=(r.a.forwardRef((function(e,t){return r.a.createElement(Qs.a,Object.assign({in:this.state.open,ref:t},e))})),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).handleOpen=function(){a.setState({open:!0})},a.handleClose=function(){a.props.closeModal()},a.state={open:a.props.modalState,contents:a.props.contents},a.handleOpen=a.handleOpen.bind(Object(Pe.a)(a)),a.handleClose=a.handleClose.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(ai.a,{className:"pop-modal",open:this.state.open,onClose:this.handleClose,closeAfterTransition:!0,BackdropComponent:ni.a,BackdropProps:{timeout:500}},r.a.createElement(Qs.a,{in:this.state.open},r.a.createElement("div",{className:"paper"},r.a.createElement(bt.a,{"aria-label":"close",className:"",color:"primary",onClick:this.handleClose,style:{right:0,position:"absolute"}},r.a.createElement(Vt.a,{fontSize:"large"})),r.a.createElement("img",{src:this.state.contents.img,width:"100%",height:"100%",alt:this.state.contents.propertyName}))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return{open:e.modalState,contents:e.contents}}}]),t}(r.a.Component)),oi=ri,si=(a(862),{properties:{Factory:{type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Factory cannot be empty."}},Buyer:{type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Buyer cannot be empty."}},ProductGrade:{type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"ProductGrade cannot be empty."}},Contract:{type:"string",required:!0,allowEmpty:!1,messages:{required:"Contract cannot be empty.",allowEmpty:"Contract cannot be empty."}},Broker:{description:"",type:["string","object"]},BrokerContract:{description:"",type:"string"},Date:{type:["date","string"],required:!0,allowEmpty:!1,messages:{required:"Date cannot be empty.",allowEmpty:"Date cannot be empty."}},SINo:{type:"string",required:!0,allowEmpty:!1,messages:{required:"SI No cannot be empty.",allowEmpty:"SI No cannot be empty."}},PackingType:{type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Packing type cannot be empty."}},Weight:{type:"number",exclusiveMinimum:0,messages:{exclusiveMinimum:"SI quantity must be greater than 0."}},NumberOfPallet:{type:"number",exclusiveMinimum:0,messages:{exclusiveMinimum:"Number of pallet must be greater than 0."}},ETD:{type:["date","string"],required:!0,allowEmpty:!1,messages:{required:"Estimated of departure cannot be empty.",allowEmpty:"Estimated of departure cannot be empty."}},ETA:{type:["date","string"],required:!0,allowEmpty:!1,messages:{required:"Estimated of arrival cannot be empty.",allowEmpty:"Estimated of arrival cannot be empty."}},Destination:{type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Destination cannot be empty."}}}}),ii=a(24),li={validateFields:function(e){return ii.validate(e,si,{cast:!0})},get:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="shippingInstruction/"+e,a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 2:case"end":return a.stop()}}))},getByUid:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="shippingInstruction/"+e,a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 2:case"end":return a.stop()}}))},getFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("shippingInstruction-filter/").concat(e),a.next=3,l.a.awrap(We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 3:return a.abrupt("return",a.sent);case 4:case"end":return a.stop()}}))},update:function(e,t){return Qe("shippingInstruction/"+e,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Updated successfully.",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,errors:e.data.errors,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="shippingInstruction/"+e,n.abrupt("return",He(a,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,message:"Added successfully.",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("shippingInstruction/"+e).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))},getForAllocation:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="siAllocation/"+e,a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 2:case"end":return a.stop()}}))},updateForAllocation:function(e,t){return Qe("siAllocation/"+e,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Updated successfully.",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,errors:e.data.errors,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))}},ci=li,ui=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={siData:[]},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){void 0!==this.props.selectedFactory&&""!==this.props.selectedFactory&&this.fetchSIData()}},{key:"componentDidUpdate",value:function(e){void 0!==this.props.selectedFactory&&""!==this.props.selectedFactory&&("Shipping"===this.props.for&&this.props.selectedFactory!==e.selectedFactory||"ContainerList"===this.props.for&&this.props.selectedBuyer!==e.selectedBuyer&&void 0!==this.props.selectedBuyer&&""!==this.props.selectedBuyer)&&this.fetchSIData()}},{key:"fetchSIData",value:function(){var e,t=this;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:console.log(this.props.selectedFactory),e=[],a.t0=this.props.for,a.next="ContainerList"===a.t0?5:"Shipping"===a.t0?8:11;break;case 5:return a.next=7,l.a.awrap(ci.getFilter("?Factory=".concat(this.props.selectedFactory,"&Buyer=").concat(this.props.selectedBuyer,"&AllocationStatus=OPEN")).then((function(t){!0===t.code&&(e=t.data)})));case 7:return a.abrupt("break",13);case 8:return a.next=10,l.a.awrap(Do("ShippingInstruction/getForShipping/".concat(this.props.selectedFactory)).then((function(t){!0===t.code&&(e=t.data)})));case 10:return a.abrupt("break",13);case 11:return a.next=13,l.a.awrap(ci.get("").then((function(t){!0===t.code&&(e=t.data)})));case 13:""!==this.props.existingSelection&&void 0!==this.props.existingSelection&&null!==this.props.existingSelection&&0===e.filter((function(e){return e._id===t.props.existingSelection._id})).length&&e.push(this.props.existingSelection),this.setState({siData:e});case 15:case"end":return a.stop()}}),null,this)}},{key:"renderOptions",value:function(){return this.state.siData.map((function(e,t){return r.a.createElement(et.a,{label:"Select ShippingInstruction",value:e._id,key:e._id,name:e.Name},r.a.createElement(E.a,{style:{width:"100%"}},r.a.createElement(b.a,{alignItems:"flex-start"},r.a.createElement(S.a,{primary:e.SINo,style:{width:"40%"}}),r.a.createElement(S.a,{primary:new Date(e.Date).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric"}),style:{width:"30%"}}),r.a.createElement(S.a,{primary:e.Weight,style:{width:"40%"}}))))}))}},{key:"handleChange",value:function(e,t){var a=this.state.siData.find((function(t){return t._id===e.target.value}));void 0!==a?this.props.handleChange(a,t,this.props.required):this.props.handleChange("",t,this.props.required)}},{key:"render",value:function(){var e=this;return r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(Ea.a,{shrink:!0,htmlFor:"SI",required:!0,error:!this.props.formControl.valid},"SI # - Date -Qty (kg)"),r.a.createElement(ba.a,{id:this.props.propertyName,value:void 0===this.props.selectedValue||void 0===this.props.selectedValue._id?"":this.props.selectedValue._id,error:!this.props.formControl.valid,onChange:function(t){return e.handleChange(t,e.props.propertyName)},margin:"dense",displayEmpty:!0},r.a.createElement(et.a,{value:""},r.a.createElement("em",null,"Select Shipping Instruction")),this.renderOptions()),r.a.createElement(Sa.a,{error:!this.props.formControl.valid,style:{display:this.props.formControl.valid?"none":""}},this.props.formControl.valid?"":this.props.formControl.message))}}]),t}(r.a.Component),di=ui,mi={properties:{Factory:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Factory cannot be empty.",conform:"Factory cannot be empty.",required:"Factory cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},ShippingInstruction:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Shipping Instruction cannot be empty.",conform:"Shipping Instruction cannot be empty.",required:"Shipping Instruction cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},Date:{description:"",type:"any",required:!0,allowEmpty:!1,messages:{allowEmpty:"Date cannot be empty.",conform:"Date cannot be empty.",required:"Date cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},ShippingMethod:{description:"",type:"any",required:!0,allowEmpty:!1,messages:{allowEmpty:"Shipping Method cannot be empty.",conform:"Shipping Method cannot be empty.",required:"Shipping Method cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},Weather:{description:"",type:"any",required:!0,allowEmpty:!1,messages:{allowEmpty:"Weather cannot be empty.",conform:"Weather cannot be empty.",required:"Weather cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},StuffingLocation:{description:"",type:"any",required:!0,allowEmpty:!1,messages:{allowEmpty:"Stuffing Location cannot be empty.",conform:"Stuffing Location cannot be empty.",required:"Stuffing Location cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},ContainerDetail:{description:"",type:"any"},Remarks:{description:"",type:"string"},Pallet:{type:"array"}}},pi=a(24),fi={validateFields:function(e){return pi.validate(e,mi,{cast:!0})},get:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="shipping/"+e,a.abrupt("return",We(t).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},getFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("shipping-filter/").concat(e),a.abrupt("return",We(t).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},getOne:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("shipping/").concat(e),a.abrupt("return",We(t).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},update:function(e,t){return Qe("shipping/"+e,t).then((function(e){return console.log(e),200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Updated",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="shipping/"+e,n.abrupt("return",He(a,t).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Added",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,formValid:!0,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("shipping/"+e).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))}},hi=fi,gi=(a(863),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={dataModel:[]},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initDataModel()}},{key:"componentDidUpdate",value:function(e,t,a){e.data!==this.props.data&&this.initDataModel()}},{key:"initDataModel",value:function(){return l.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:void 0!==this.props.data&&null!==this.props.data&&this.setState({dataModel:this.props.data});case 1:case"end":return e.stop()}}),null,this)}},{key:"renderOptions",value:function(){var e=this;return this.state.dataModel.map((function(t,a){return r.a.createElement(et.a,{label:"Select",value:t._id,key:a,name:t[e.props.displayName]},r.a.createElement(E.a,{style:{width:"100%"}},r.a.createElement(b.a,{alignItems:"flex-start"},e.props.columns.map((function(e){return r.a.createElement(S.a,{key:t[e],primary:t[e],style:{minWidth:"30%"}})})))))}))}},{key:"handleChange",value:function(e){var t=this.state.dataModel.find((function(t){return t._id===e.target.value}));void 0!==t?this.props.handleChange(t,this.props.propertyName,this.props.required):this.props.handleChange(null,this.props.propertyName,this.props.required)}},{key:"render",value:function(){var e=this;return r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Ea.a,{shrink:!0,htmlFor:"genericDropdown",required:!0,error:void 0!==this.props.formControl&&!this.props.formControl.valid},this.props.columns.join(" - ")),r.a.createElement(ba.a,{id:this.props.propertyName,value:void 0===this.props.selectedValue||null===this.props.selectedValue||void 0===this.props.selectedValue._id?"":this.props.selectedValue._id,style:{minWidth:190},error:void 0!==this.props.formControl&&!this.props.formControl.valid,onChange:function(t){return e.handleChange(t,e.props.propertyName)},margin:"dense",displayEmpty:!0},r.a.createElement(et.a,{value:""},r.a.createElement("em",null,"--- Select ---")),this.renderOptions()),r.a.createElement(Sa.a,{error:void 0!==this.props.formControl&&!this.props.formControl.valid,style:{display:void 0!==this.props.formControl&&this.props.formControl.valid?"none":""}},void 0===this.props.formControl||this.props.formControl.valid?"":this.props.formControl.message))}}]),t}(r.a.Component)),yi=gi,vi=a(23),Ci=(Object(n.forwardRef)((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),{ShippingType:{valid:!0,message:"",value:""},Factory:{valid:!0,message:"",value:""},StuffingDate:{valid:!0,message:"",value:""},SI:{valid:!0,message:"",value:""},Container:{valid:!0,message:"",value:""},DynamicDescription:{valid:!0,message:"",value:""},DynamicImage:{valid:!0,message:"",value:""}}),Di=(r.a.forwardRef((function(e,t){return r.a.createElement(Qs.a,Object.assign({in:this.state.open,ref:t},e))})),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).closeModal=function(){a.setState({modalState:!1})},a.closeForm=function(){a.setState({formControl:vi(Ci)},(function(){return a.props.closeForm()}))},a.openImageForm=function(){var e=Object(me.a)({},a.state.formControls);e.DynamicDescription.valid=!0,e.DynamicImage.valid=!0,a.setState({openImageForm:!0,actionType:"dynamic",formControls:e,currentImgData:""})},a.closeImageForm=function(){a.setState({openImageForm:!1,actionType:"fixed"})},a.onImgSave=function(e,t,n){if("dynamic"===n){var r=Object(je.a)(a.state.otherImgData),o=Object(me.a)({},a.state.formControls);void 0===a.state.currentImgData.Description||""===a.state.currentImgData.Description||void 0===a.state.currentImgData.ImageData||""===a.state.currentImgData.ImageData?(o.DynamicDescription.valid=!1,o.DynamicImage.valid=!1,a.setState({formControls:o})):(r.push(a.state.currentImgData),o.DynamicDescription.valid=!0,o.DynamicImage.valid=!0,a.setState({otherImgData:r,openImageForm:!1,currentImgData:"",formControls:o}))}else{var s=Object(me.a)({},a.state.stuffingUploadDocument);s[t]=e,a.setState({stuffingUploadDocument:s})}},a.onImgCancel=function(){var e=Object(me.a)({},a.state.formState);e.valid=!0,e.errors=[],a.setState({currentImgData:"",openImageForm:!1,formState:e})},a.save=function(){var e=Object(me.a)({},a.state.data),t=Object(je.a)(a.state.otherImgData),n=Object(me.a)({},a.state.formState);e.ContainerImages=Object(me.a)({},a.state.stuffingUploadDocument),e.OtherImages=t;var r=Hs.validateFields(e);r.valid?(a.setState({formState:{valid:!0,errors:[]}}),"Add"===a.props.formAction?Hs.add("",e).then((function(e){!0===e.code?a.props.onSuccess(e.data,a.props.formAction):n.errors.push({PropertyName:e.errors.propertyName,Message:e.errors.message})})):Hs.update("",e).then((function(e){!0===e.code?a.props.onSuccess(e.data,a.props.formAction):n.errors.push({PropertyName:e.errors.propertyName,Message:e.errors.message})}))):(n.errors=[],r.errors.map((function(e){"conform"===e.attribute&&n.errors.push({PropertyName:e.property,Message:e.message})})),a.setState({formState:n}))},a.state={data:a.props.formData,formOpen:a.props.formOpen,formAction:a.props.formAction,formControls:Object(me.a)({},Ci),shippingList:[],containerList:[],stuffingDocumentList:[],stuffingUploadDocument:{},currentImgData:"",openCamera:!1,otherImgData:[],currentActionName:"ImageData",actionType:"fixed",imageContent:"",modalState:!1,factorySelectedValue:"",formState:{valid:!0,errors:[]}},a.closeCamera=a.closeCamera.bind(Object(Pe.a)(a)),a.handelChange=a.handelChange.bind(Object(Pe.a)(a)),a.openCamera=a.openCamera.bind(Object(Pe.a)(a)),a.onHandelChange=a.onHandelChange.bind(Object(Pe.a)(a)),a.closeModal=a.closeModal.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initContainerDocument(),"Update"===this.props.formAction&&(this.initContainer(),this.initShipping())}},{key:"initContainerDocument",value:function(){var e,t,a=this;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,l.a.awrap(Do("getStuffingDocument/Container").then((function(e){if(!0===e.code)return e.data})));case 2:e=n.sent,"Update"===this.props.formAction?(t=Object(me.a)({},this.state.stuffingUploadDocument),Object.keys(this.state.data.ContainerImages).map((function(e){t[e]=a.state.data.ContainerImages[e]})),this.setState({stuffingDocumentList:e,otherImgData:this.state.data.OtherImages,stuffingUploadDocument:t})):this.setState({stuffingDocumentList:e});case 4:case"end":return n.stop()}}),null,this)}},{key:"initShipping",value:function(){var e=this;"object"===typeof this.state.data.ShippingInstruction&&void 0!==this.state.data.ShippingInstruction._id&&hi.getFilter("?ShippingInstruction=".concat(this.state.data.ShippingInstruction._id)).then((function(t){if(!0===t.code)e.setState({shippingList:t.data});else{var a=Object(me.a)({},e.state.formState),n=new Object(e);null===t.errors?(n.propertyName="",n.message="Error retrieving Sequence Number.",a.errors.push(n)):(n.propertyName=t.errors.propertyName,n.message=t.errors.message,a.errors.push(n)),e.setState({formState:a})}}))}},{key:"initContainer",value:function(){var e=this;"object"===typeof this.state.data.ShippingInstruction&&""!==this.state.data.ShippingInstruction._id&&Do("ContainerDetail/getContainerDetailBySI/".concat(this.state.data.ShippingInstruction._id)).then((function(t){if(!0===t.code)e.setState({containerList:t.data});else{var a=Object(me.a)({},e.state.formState),n=new Object(e);null===t.errors?(n.propertyName="",n.message="Error retrieving Sequence Number.",a.errors.push(n)):(n.propertyName=t.errors.propertyName,n.message=t.errors.message,a.errors.push(n)),e.setState({formState:a})}}))}},{key:"renderStuffingDocument",value:function(){var e=this;if(Array.isArray(this.state.stuffingDocumentList)&&this.state.stuffingDocumentList.length>0)return this.state.stuffingDocumentList.map((function(t,a){return t.StuffingDocument.length>0?r.a.createElement(be.a,{key:"g".concat(a+1),item:!0,container:!0,xs:12},r.a.createElement(bn,{label:t.Name,style:{width:"100%",padding:"10px"}},r.a.createElement(be.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center",wrap:"wrap"},t.StuffingDocument.length>0?t.StuffingDocument.map((function(t,a){return r.a.createElement(be.a,{key:"s".concat(a+1),item:!0,style:{padding:10},xs:12,sm:6,md:3,lg:3},r.a.createElement(jt.a,null,r.a.createElement(zs.a,{action:r.a.createElement(bt.a,{"aria-label":"close",onClick:function(a){e.removeImage(t.Name,"Stuffing")}},r.a.createElement(Vt.a,null)),title:t.Name}),r.a.createElement(Ys.a,{onClick:function(a){e.openCamera(t.Name,"fixed")}},r.a.createElement(Ks.a,{style:{height:250,backgroundSize:"cover"},image:""===e.state.stuffingUploadDocument[t.Name]||void 0===e.state.stuffingUploadDocument[t.Name]?ti.a:e.state.stuffingUploadDocument[t.Name],title:t.Name}))))})):""))):""}))}},{key:"openCamera",value:function(e,t){var a=this;if("dynamic"===t)if(void 0===e||null===e)this.setState({openCamera:!0});else{var n={img:this.state.otherImgData[e].ImageData,propertyName:this.state.otherImgData[e].Description};this.setState({modalState:!0,imageContent:n,actionType:"dynamic"},(function(){return console.log(a.state)}))}else if("fixed"===t)if(""===this.state.stuffingUploadDocument[e]||void 0===this.state.stuffingUploadDocument[e])this.setState({openCamera:!0,currentActionName:e,actionType:"fixed"});else{var r={img:this.state.stuffingUploadDocument[e],propertyName:e};this.setState({modalState:!0,imageContent:r,actionType:"fixed"})}}},{key:"closeCamera",value:function(){this.setState({openCamera:!1})}},{key:"onHandelChange",value:function(e,t){var a=this,n=Object(me.a)({},this.state.data);n[t]=e,"ShippingInstruction"===t&&"object"===typeof e&&""!==e?this.setState({data:n,formState:{valid:!0,errors:[]}},(function(){a.initShipping(),a.initContainer()})):this.setState({data:n,formState:{valid:!0,errors:[]}})}},{key:"handelChange",value:function(e,t){"fixed"===this.state.actionType?this.onImgSave(e,t):"dynamic"===this.state.actionType&&this.imgFormOnChange(e,"ImageData")}},{key:"removeImage",value:function(e,t){if("Stuffing"===t){var a=Object(me.a)({},this.state.stuffingUploadDocument);a[e]="",this.setState({stuffingUploadDocument:a})}else{var n=Object(je.a)(this.state.otherImgData),r=n.indexOf(e);n.splice(r,1),this.setState({otherImgData:n})}}},{key:"imgFormOnChange",value:function(e,t){var a=Object(me.a)({},this.state.currentImgData),n=Object(me.a)({},this.state.formControls);"Description"===t?void 0===e||""===e?n.DynamicDescription.valid=!1:void 0!==e&&""!==e&&(a[t]=e,n.DynamicDescription.valid=!0):void 0===e||""===e?n.DynamicImage.valid=!1:void 0!==e&&""!==e&&(a[t]=e,n.DynamicImage.valid=!0),this.setState({currentImgData:a,formControls:n})}},{key:"renderImageData",value:function(){var e=this;return this.state.otherImgData.map((function(t,a){return r.a.createElement(be.a,{key:a,item:!0,style:{padding:10},xs:12,sm:6,md:3,lg:3},r.a.createElement(jt.a,null,r.a.createElement(zs.a,{action:r.a.createElement(bt.a,{"aria-label":"close",onClick:function(a){e.removeImage(t,"Other")}},r.a.createElement(Vt.a,null)),title:t.Description}),r.a.createElement(Ys.a,{onClick:function(t){e.openCamera(a,"dynamic")}},r.a.createElement(Ks.a,{style:{height:250,backgroundSize:"cover"},image:t.ImageData,title:t.Description}))))}))}},{key:"cancel",value:function(){}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{container:!0},r.a.createElement(Ae.a,{fullScreen:!0,open:this.state.formOpen,onClose:this.closeForm,TransitionComponent:this.Transition},r.a.createElement(w.a,{className:"appBar"},r.a.createElement(F.a,null,r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:this.closeForm,"aria-label":"close"},r.a.createElement(Vt.a,null)),r.a.createElement(x.a,{variant:"h6",className:"app-title"},"Stuffing Container"),r.a.createElement(he.a,{color:"inherit",disabled:this.state.disabled,onClick:this.save},"save"))),r.a.createElement(_e.a,null,r.a.createElement("div",{className:"form-container"},r.a.createElement(be.a,{container:!0},r.a.createElement(be.a,{item:!0,container:!0,xs:12},r.a.createElement(be.a,{container:!0,direction:"row",justify:"flex-start",wrap:"wrap"},r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:6,lg:6},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"Shipping_Type",label:"Shipping Type",error:!this.state.formControls.ShippingType.valid,helperText:this.state.formControls.ShippingType.message,defaultValue:"Container",className:"",onChange:function(t){return e.onHandelChange(t.target.value,"ShippingType")},disabled:!0,margin:"dense"}))),r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:6,lg:6},r.a.createElement(Hr,{selectedValue:void 0!==this.state.data&&null!==this.state.data?this.state.data.Factory:"",handleChange:function(t){return e.onHandelChange(t,"Factory")},propertyName:"Factory",formControl:this.state.formControls.Factory})),r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:6,lg:6},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Da.b,{style:{width:"100%"},margin:"dense",id:"date-picker-dialog",label:"Date",format:"dd-MMM-yyyy",value:void 0===this.state.data||null===this.state.data||void 0===this.state.data.StuffingDate?Date.now():this.state.data.StuffingDate,onChange:function(t){return e.onHandelChange(t,"StuffingDate")},KeyboardButtonProps:{"aria-label":"Date"}})))),r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:6,lg:6},r.a.createElement(di,{for:"Shipping",selectedFactory:void 0===this.state.data||null===this.state.data?"":this.state.data.Factory._id,formControl:this.state.formControls.SI,selectedValue:this.state.data.ShippingInstruction,handleChange:function(t){return e.onHandelChange(t,"ShippingInstruction")},required:!1,propertyName:"ShippingInstruction"})),r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:6,lg:6},r.a.createElement(yi,{selectedValue:this.state.data.Shipping,data:this.state.shippingList,displayName:"Sequence Number",columns:["SequenceNumber"],propertyName:"Shipping",required:!0,handleChange:this.onHandelChange})),r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:6,lg:6},r.a.createElement(yi,{selectedValue:this.state.data.ContainerDetail,data:this.state.containerList,displayName:"Container#",columns:["Container"],propertyName:"ContainerDetail",required:!0,handleChange:this.onHandelChange})),r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:6,lg:6},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"SealNo",label:"Seal No.",value:void 0===this.state.data||null===this.state.data||void 0===this.state.data.ContainerDetail||""===this.state.data.ContainerDetail?0:this.state.data.ContainerDetail.Seal,className:"",onChange:function(t){return e.onHandelChange(t.target.value,"SealNo")},disabled:!0,margin:"dense"}))),r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:6,lg:6},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"Truck_ID",label:"Truck ID",defaultValue:this.state.data.TruckID,className:"",onChange:function(t){return e.onHandelChange(t.target.value,"TruckID")},margin:"dense"}))),r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:6,lg:6},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"Driver",label:"Driver",defaultValue:this.state.data.Driver,className:"",onChange:function(t){return e.onHandelChange(t.target.value,"Driver")},margin:"dense"}))),r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:6,lg:6},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"Supervisor",label:"Supervisor",defaultValue:this.state.data.Supervisor,className:"",onChange:function(t){return e.onHandelChange(t.target.value,"Supervisor")},margin:"dense"}))))),r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12},this.state.formState.errors.length>0?this.state.formState.errors.map((function(e){return r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12},r.a.createElement(x.a,{variant:"overline",color:"secondary"},e.Message))})):""),this.renderStuffingDocument(),this.state.otherImgData.length>0?r.a.createElement(be.a,{item:!0,container:!0,xs:12},r.a.createElement(bn,{label:"Others",style:{width:"100%",padding:"10px"}},r.a.createElement(be.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",wrap:"wrap"},0===this.state.otherImgData.length?r.a.createElement("h5",null,"No Data"):"",this.renderImageData()))):"",r.a.createElement(Ae.a,{fullScreen:!0,open:this.state.openCamera,onClose:this.closeCamera,TransitionComponent:this.Transition},this.state.openCamera?r.a.createElement($s,{closeCamera:this.closeCamera,handelChange:this.handelChange,actionFor:this.state.currentActionName}):""),r.a.createElement(oi,{modalState:this.state.modalState,contents:this.state.imageContent,closeModal:this.closeModal}),r.a.createElement("div",{className:"floating-btn-container"},r.a.createElement(fo.a,{color:"primary","aria-label":"add",onClick:this.openImageForm},r.a.createElement(wt.a,null))),r.a.createElement(Ae.a,{open:void 0!==this.state.openImageForm&&this.state.openImageForm,onClose:this.closeImageForm,"aria-labelledby":"Add Image"},r.a.createElement(Re.a,{id:"dialog-title"},"Add Image"),r.a.createElement(_e.a,null,r.a.createElement(be.a,{container:!0,direction:"column",justify:"flex-start",wrap:"wrap",style:{minWidth:450}},r.a.createElement(be.a,{item:!0,style:{padding:4}},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"Description",label:"Description",error:!this.state.formControls.DynamicDescription.valid,helperText:!0===this.state.formControls.DynamicDescription.valid?"":"Image Description cannot be empty.",defaultValue:"",className:"",onChange:function(t){return e.imgFormOnChange(t.target.value,"Description")},margin:"dense"}))),r.a.createElement(be.a,{item:!0,style:{padding:10}},!0===this.state.formControls.DynamicImage.valid?"":r.a.createElement(x.a,{variant:"span",component:"span",style:{fontSize:"0.75rem",color:"red"}},"Image need to capture."),r.a.createElement(jt.a,{className:"".concat(!0===this.state.formControls.DynamicImage.valid?"border-none":"border-red")},r.a.createElement(Ys.a,{onClick:function(t){e.openCamera(null,"dynamic")}},r.a.createElement(Ks.a,{style:{height:250,backgroundSize:"cover"},image:void 0===this.state.currentImgData.ImageData?ti.a:this.state.currentImgData.ImageData})))))),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.onImgCancel,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:function(t){return e.onImgSave(null,null,"dynamic")},color:"primary"},"Save"))))))))}}]),t}(r.a.Component)),Ei=Di,bi=a(23),Si=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).snackOpen=function(e,t){var n;return l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0===e||null===e||void 0===t||null===t){r.next=7;break}return r.next=3,l.a.awrap(ka(e,t));case 3:n=r.sent,a.setState({snackOpen:!a.state.snackOpen,alertMessage:n,alertClass:e}),r.next=8;break;case 7:a.setState({snackOpen:!1});case 8:case"end":return r.stop()}}))},a.dialogOpen=function(e){var t;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,l.a.awrap(ka("confirmation","delete"));case 2:t=n.sent,a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:e,dialogMessage:r.a.createElement("span",null,void 0!==t?t.replace("[Name]",e.Factory.FctyName):"")});case 4:case"end":return n.stop()}}))},a.diaLogClose=function(){a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:null})},a.onDelete=function(){null!==a.state.currentDeleteData&&Hs.delete("".concat(a.state.currentDeleteData._id)).then((function(e){if(!0===e.code){var t=Object(je.a)(a.state.data),n=t.indexOf(a.state.currentDeleteData);t.splice(n,1),a.setState({data:t,currentDeleteData:"",dialogOpen:!a.state.dialogOpen},(function(){return a.snackOpen("success","delete")}))}else a.snackOpen("error","server")}))},a.state={columns:[{title:"Factory",field:"Factory",render:function(e){return r.a.createElement("span",null,e.Factory.FctyName)}},{title:"Date",field:"StuffingDate",render:function(e){return r.a.createElement("span",null,new Date(e.StuffingDate).toLocaleDateString())}},{title:"SI#",field:"ShippingInstruction",render:function(e){return r.a.createElement("span",null,e.ShippingInstruction.SINo)}},{title:"Sequence#",field:"Sequence",render:function(e){return r.a.createElement("span",null,e.Shipping.SequenceNumber)}},{title:"Container#",field:"ContainerDetail",render:function(e){return r.a.createElement("span",null,void 0===e.ContainerDetail?0:e.ContainerDetail.Container)}},{title:"Seal #",field:"Seal",render:function(e){return r.a.createElement("span",null,void 0===e.ContainerDetail?0:e.ContainerDetail.Seal)}},{title:"TruckID",field:"TruckID"},{title:"Driver",field:"Driver"},{title:"Supervisor",field:"Supervisor"},{title:"Operator",field:"LastUpdatedBy",editable:"never"},{title:"Last Updated",field:"LastUpdatedAt",render:function(e){return r.a.createElement("span",null,void 0===e?"":new Date(e.LastUpdatedAt).toLocaleDateString())},editable:"never"}],data:[],formData:null,currentDeleteData:null,formOpen:!1,formAction:"",dialogOpen:!1,snackOpen:!1,alertMessage:"",dialogMessage:"",alertClass:""},a.stuffingContainerModel=bi(qs),a.onSuccess=a.onSuccess.bind(Object(Pe.a)(a)),a.closeForm=a.closeForm.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initstuffingContainer()}},{key:"initstuffingContainer",value:function(){var e=this;Hs.getStuffingContainer("").then((function(t){!0===t.code&&e.setState({data:t.data})}))}},{key:"openForm",value:function(e){var t,a,n;return l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(t=e,a=!this.state.formOpen,void 0!==t&&null!==t){r.next=8;break}t=this.stuffingContainerModel,n="Add",a=!0,r.next=11;break;case 8:return n="Update",r.next=11,l.a.awrap(Hs.getOneStuffingContainer("ImageUpload/".concat(t._id)).then((function(e){!0===e.code?(t=e.data,a=!0):a=!1})));case 11:this.setState({formData:t,formOpen:a,formAction:n});case 12:case"end":return r.stop()}}),null,this)}},{key:"closeForm",value:function(){this.setState({formData:null,formOpen:!1,formAction:""})}},{key:"onSuccess",value:function(e,t){var a=this,n=Object(je.a)(this.state.data);if("object"===typeof e&&null!==e)if("Add"===this.state.formAction)n.push(e),this.setState({data:n,formOpen:!1,formAction:"",currentRowData:null},(function(){return a.snackOpen("success","add")}));else{var r=n.indexOf(this.state.formData);n[r]=e,this.setState({data:n,formOpen:!1,formAction:"",currentRowData:null},(function(){return a.snackOpen("success","update")}))}else this.snackOpen("error","server")}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{container:!0,direction:"column",justify:"center",wrap:"wrap",style:{margin:"20px 20px 10px 0px"}},r.a.createElement(be.a,{item:!0,xs:12},r.a.createElement(Ve.a,{title:"Stuffing Container",columns:this.state.columns,data:this.state.data,components:{Toolbar:function(t){return r.a.createElement("div",null,r.a.createElement(Le.MTableToolbar,t),r.a.createElement("div",{style:{padding:"0px 15px"}},r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:function(){return e.openForm(t.rowData)},"aria-label":"add"},r.a.createElement(wt.a,null))))}},actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.data,columns:e.state.columns,fileName:"stuffingContainer"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.initstuffingContainer()}},{icon:"edit",tooltip:"Edit User",onClick:function(t,a){return e.openForm(a)}},{icon:"delete",tooltip:"Delete User",onClick:function(t,a){return e.dialogOpen(a)}}],icons:{Clear:function(t){return r.a.createElement(Nt.a,{onClick:function(){e.initFormControl()},style:{padding:0,margin:0}})}},options:{}})),r.a.createElement(be.a,{item:!0,xs:12},this.state.formOpen?r.a.createElement(Ei,{formAction:this.state.formAction,formData:this.state.formData,formOpen:this.state.formOpen,onSuccess:this.onSuccess,closeForm:this.closeForm}):""),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:1e3,open:this.state.snackOpen,onClose:this.snackOpen,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.diaLogClose,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.diaLogClose,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDelete,color:"primary"},"Delete"))))}}]),t}(r.a.Component),Oi=Si,ki=(a(864),a(865),Object(n.forwardRef)((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),{ShippingType:{valid:!0,message:"",value:""},Factory:{valid:!0,message:"",value:""},StuffingDate:{valid:!0,message:"",value:""},SI:{valid:!0,message:"",value:""},Container:{valid:!0,message:"",value:""}}),wi=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).openImageForm=function(){a.setState({openImageForm:!0})},a.closeImageForm=function(){a.setState({openImageForm:!1})},a.onImgSave=function(){var e=Object(je.a)(a.state.data),t=Object(me.a)({},a.state.currentImgData);e.push(t),a.setState({data:e,openImageForm:!1,currentImgData:""})},a.onImgCancel=function(){var e=Object(me.a)({},a.state.formState);e.valid=!0,e.errors=[],a.setState({currentImgData:"",openImageForm:!1,formState:e})},a.handleDateChange=function(e,t){if(void 0!==e&&null!==e){var n=new Date(e);a.handelChange(n,t)}},a.save=function(){Hs.add("",a.state.data).then((function(e){}))},a.state={data:[],formControls:Object(me.a)({},ki),currentImgData:"",openCamera:!1,openImageForm:!1,currentActionName:"ImageData",imageContent:"",modalState:!1,factorySelectedValue:"",formState:{valid:!0,errors:[]}},a.closeCamera=a.closeCamera.bind(Object(Pe.a)(a)),a.handelChange=a.handelChange.bind(Object(Pe.a)(a)),a.openCamera=a.openCamera.bind(Object(Pe.a)(a)),a.handelChange=a.handelChange.bind(Object(Pe.a)(a)),a.closeModal=a.closeModal.bind(Object(Pe.a)(a)),a.imgFormOnChange=a.imgFormOnChange.bind(Object(Pe.a)(a)),a.onImgSave=a.onImgSave.bind(Object(Pe.a)(a)),a.onImgCancel=a.onImgCancel.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){return!0}},{key:"openCamera",value:function(e){if(void 0===e||null===e)this.setState({openCamera:!0});else{var t={img:this.state.data[e].ImageData,propertyName:this.state.data[e].Description};this.setState({modalState:!0,imageContent:t})}}},{key:"closeCamera",value:function(){this.setState({openCamera:!1})}},{key:"closeModal",value:function(){this.setState({modalState:!1})}},{key:"imgFormOnChange",value:function(e,t){var a=Object(me.a)({},this.state.currentImgData),n=Object(me.a)({},this.state.formState);void 0!==e&&null!==e&&""!==e?(a[t]=e,n.valid=!0,this.setState({currentImgData:a,formState:n})):(n.valid=!1,this.setState({formState:n}))}},{key:"renderImageData",value:function(){var e=this;return this.state.data.map((function(t,a){return r.a.createElement(be.a,{key:a,item:!0,style:{padding:10},xs:12,sm:6,md:3,lg:3},r.a.createElement(jt.a,null,r.a.createElement(zs.a,{action:r.a.createElement(bt.a,{"aria-label":"close",onClick:function(a){e.removeImage(t)}},r.a.createElement(Vt.a,null)),title:t.Description}),r.a.createElement(Ys.a,{onClick:function(t){e.openCamera(a)}},r.a.createElement(Ks.a,{style:{height:250,backgroundSize:"cover"},image:t.ImageData,title:t.Description}))))}))}},{key:"handelChange",value:function(e,t){var a=Object(me.a)({},this.state.formControls),n=Object(me.a)({},this.state.data);!this.state.formControls.hasOwnProperty(t)||""!==e&&void 0!==e?(this.state.formControls.hasOwnProperty(t)&&(a[t].valid=!0,a[t].message=""),n[t]=e):(a[t].valid=!1,a[t].message="".concat(t," cannot be Empty")),"Factory"===t&&this.setState({factorySelectedValue:e}),this.setState({data:n,formControls:a})}},{key:"removeImage",value:function(e){var t=Object(je.a)(this.state.data),a=t.indexOf(e);t.splice(a,1),this.setState({data:t})}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{container:!0},r.a.createElement(x.a,{variant:"h4"},"Stuffing Container"),r.a.createElement(be.a,{item:!0,container:!0,xs:12},r.a.createElement(be.a,{container:!0,direction:"row",justify:"flex-start",wrap:"wrap"},r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:6,lg:6},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"Shipping_Type",label:"Shipping Type",error:!this.state.formControls.ShippingType.valid,helperText:this.state.formControls.ShippingType.message,defaultValue:"",className:"",onChange:function(t){return e.handelChange(t.target.value,"ShippingType")},margin:"dense"}))),r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:6,lg:6},r.a.createElement(Hr,{selectedValue:this.state.factorySelectedValue,handleChange:this.handelChange,propertyName:"Factory",formControl:this.state.formControls.Factory})),r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:6,lg:6},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Da.b,{style:{width:"100%"},margin:"dense",id:"date-picker-dialog",label:"Date",format:"dd-MMM-yyyy",value:void 0===this.state.StuffingDate?Date.now():this.state.StuffingDate,onChange:function(t){return e.handleDateChange(t,"StuffingDate")},KeyboardButtonProps:{"aria-label":"Date"}})))),r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:6,lg:6}),r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:6,lg:6}),r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:6,lg:6}),r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:6,lg:6}),r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:6,lg:6},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"Truck_ID",label:"Truck ID",defaultValue:"",className:"",onChange:function(t){return e.handelChange(t.target.value,"TruckID")},margin:"dense"}))),r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:6,lg:6},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"Driver",label:"Driver",defaultValue:"",className:"",onChange:function(t){return e.handelChange(t.target.value,"Driver")},margin:"dense"}))),r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:6,lg:6},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"Supervisor",label:"Supervisor",defaultValue:"",className:"",onChange:function(t){return e.handelChange(t.target.value,"Supervisor")},margin:"dense"}))))),r.a.createElement(be.a,{item:!0,container:!0,xs:12},r.a.createElement(bn,{label:"Group: 1. Before Stuffing",style:{width:"100%",padding:"10px"}},r.a.createElement(be.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",wrap:"wrap"},0===this.state.data.length?r.a.createElement("h5",null,"No Data"):"",this.renderImageData()))),r.a.createElement("div",{className:"floating-btn-container"},r.a.createElement(fo.a,{color:"primary","aria-label":"add",onClick:this.openImageForm},r.a.createElement(wt.a,null))),r.a.createElement(Ae.a,{open:this.state.openImageForm,onClose:this.closeImageForm,"aria-labelledby":"Add Image"},r.a.createElement(Re.a,{id:"dialog-title"},"Add Image"),r.a.createElement(_e.a,null,r.a.createElement(be.a,{container:!0,direction:"column",justify:"flex-start",wrap:"wrap",style:{minWidth:450}},r.a.createElement(be.a,{item:!0,style:{padding:4}},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"Description",label:"Description",error:!this.state.formState,helperText:"Image Description cannot be empty.",defaultValue:"",className:"",onChange:function(t){return e.imgFormOnChange(t.target.value,"Description")},margin:"dense"}))),r.a.createElement(be.a,{item:!0,style:{padding:10}},r.a.createElement(jt.a,null,r.a.createElement(Ys.a,{onClick:function(t){e.openCamera(null)}},r.a.createElement(Ks.a,{style:{height:250,backgroundSize:"cover"},image:void 0===this.state.currentImgData.ImageData?ti.a:this.state.currentImgData.ImageData})))))),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.onImgCancel,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onImgSave,color:"primary"},"Save"))),r.a.createElement(Ae.a,{fullScreen:!0,open:this.state.openCamera,onClose:this.closeCamera,TransitionComponent:this.Transition},this.state.openCamera?r.a.createElement($s,{closeCamera:this.closeCamera,handelChange:this.imgFormOnChange,actionFor:this.state.currentActionName}):""),r.a.createElement(oi,{modalState:this.state.modalState,contents:this.state.imageContent,closeModal:this.closeModal}))}}]),t}(r.a.Component),Fi=wi,xi=(a(866),{properties:{Name:{description:"",type:"string",required:!0,allowEmpty:!1,messages:{allowEmpty:"Name cannot be empty.",conform:"Name cannot be empty.",required:"Name cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},Description:{description:"",type:"string",required:!0,allowEmpty:!1,messages:{allowEmpty:"Description cannot be empty.",conform:"Description cannot be empty.",required:"Description cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},Inactive:{description:"",type:"boolean"},CreatedAt:{type:"any",default:Date.now()},CreatedBy:{type:"string",default:""},LastUpdatedAt:{type:"any",default:Date.now()},LastUpdatedBy:{type:"string",default:""}}}),Ti=a(24),Ni={validateFields:function(e){return Ti.validate(e,xi,{cast:!0})},getBroker:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="broker/"+e,a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?(console.log(e),{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}):200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},getBrokerFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("broker-filter/").concat(e),a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},getOneBroker:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("broker/").concat(e),a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},update:function(e,t){return Qe("broker/"+e,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Updated",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="broker/"+e,n.abrupt("return",He(a,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Added",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,formValid:!0,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("broker/"+e).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))}},ji=Ni,Pi=a(23),Ai=(Object(n.forwardRef)((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),r.a.forwardRef((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),{Name:{valid:!0,message:""},Description:{valid:!0,message:""}}),Mi=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).snackOpen=function(e,t){a.setState({snackOpen:!a.state.snackOpen,alertMessage:e,alertClass:t})},a.dialogOpen=function(e){a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:e,dialogMessage:r.a.createElement("span",null,"Are you sure to delete this record ",r.a.createElement("b",null,e.Name)," ? This cannot be undone.")})},a.onDelete=function(){null!==a.state.currentDeleteData&&ji.delete("".concat(a.state.currentDeleteData._id)).then((function(e){if(!0===e.code){var t=Object(je.a)(a.state.data),n=t.indexOf(a.state.currentDeleteData);t.splice(n,1),a.setState({data:t,currentDeleteData:"",dialogOpen:!a.state.dialogOpen}),a.snackOpen("Successfully Deleted!","success")}else a.snackOpen("Oops, something went wrong while processing your request!","error")}))},a.state={columns:[{title:"Name",field:"Name",editComponent:function(e){return r.a.createElement(ge.a,{margin:"dense",id:"Name",required:!0,label:"Name",multiline:!0,rows:"2",type:"text",error:""===e.value||!a.state.formControls.Name.valid,helperText:""===e.value?"Name cannot empty":a.state.formControls.Name.valid?"":a.state.formControls.Name.message,defaultValue:e.rowData.Name,onChange:function(t){return e.onChange(t.target.value.trim())}})}},{title:"Description",field:"Description",editComponent:function(e){return r.a.createElement(ge.a,{margin:"dense",id:"description",label:"Description",required:!0,multiline:!0,rows:"2",type:"text",error:""===e.value||!a.state.formControls.Description.valid,helperText:""===e.value?"Description cannot empty":a.state.formControls.Description.valid?"":a.state.formControls.Description.message,defaultValue:e.rowData.Description,onChange:function(t){return e.onChange(t.target.value.trim())}})}},{title:"Inactive",field:"Inactive",type:"boolean",render:function(e){return r.a.createElement("span",null," ",e.Inactive?"Yes":"No")},editComponent:function(e){return r.a.createElement(Xe.a,{checked:e.rowData.Inactive,onChange:function(t){return e.onChange(t.target.checked)},value:e.value,inputProps:{"aria-label":"secondary checkbox"},color:"primary"})}}],data:[],formControls:Pi(Ai),currentDeleteData:"",dialogOpen:!1,snackOpen:!1,alertMessage:"",dialogMessage:"",alertClass:""},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initBroker()}},{key:"initBroker",value:function(){var e=this;ji.getBroker("").then((function(t){if(!0===t.code){var a=Object(je.a)(e.state.data);a=t.data,e.setState({data:a})}}))}},{key:"initFormControl",value:function(){this.setState({formControls:Pi(Ai)})}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{container:!0,direction:"column",justify:"center",wrap:"wrap",style:{margin:"20px 20px 10px 0px"}},r.a.createElement(be.a,{item:!0,xs:12},r.a.createElement(Ve.a,{title:"Broker",columns:this.state.columns,data:this.state.data,editable:{onRowAdd:function(t){return new Promise((function(a,n){setTimeout((function(){var r=Object(je.a)(e.state.data),o=Object(me.a)({},e.state.formControls),s=ji.validateFields(t);s.valid?ji.add("",t).then((function(t){!0===t.code?(r.push(t.data),e.snackOpen("Successfully added!","success"),e.setState({data:r},(function(){return a()}))):(n(),t.errors.map((function(e){o[e.property].valid=!1,o[e.property].message=e.message})),e.setState({formControls:o}),e.snackOpen("Please fix the error(s) highlighted to save the details!","error"))})).catch((function(t){n(),e.snackOpen("Oops, something went wrong while processing your request!","error")})):(n(),s.errors.map((function(e){o[e.property].valid=!1,o[e.property].message=e.message})),e.setState({formControls:o}))}),1e3)}))},onRowUpdate:function(t,a){return new Promise((function(n,r){setTimeout((function(){var o=Object(je.a)(e.state.data),s=e.state.formControls,i=ji.validateFields(t);i.valid?ji.update("",t).then((function(t){if(!0===t.code){var i=o.indexOf(a);o[i]=t.data,e.setState({data:o},(function(){return n()})),e.snackOpen("Successfully added!","success")}else r(),t.errors.map((function(e){return s[e.property].valid=!1,s[e.property].message=e.message,s})),e.setState({formControls:s}),e.snackOpen("Please fix the error(s) highlighted to save the details!","error")})).catch((function(t){r(),e.snackOpen("Oops, something went wrong while processing your request!","error")})):(r(),i.errors.map((function(e){s[e.property].valid=!1,s[e.property].message=e.message})),e.setState({formControls:s}))}),1e3)}))}},actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.data,columns:e.state.columns,fileName:"Broker"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.initBroker()}},{icon:"delete",tooltip:"Delete Contamination",onClick:function(t,a){return e.dialogOpen(a)}}],icons:{Clear:function(t){return r.a.createElement(Nt.a,{onClick:function(){e.initFormControl()},style:{padding:0,margin:0}})}},options:{}})),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:600,open:this.state.snackOpen,onClose:this.snackOpen,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.dialogOpen,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.dialogOpen,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDelete,color:"primary"},"Delete"))))}}]),t}(r.a.Component),_i=Mi,Ii=(a(867),{properties:{Factory:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Factory cannot be empty.",conform:"Factory cannot be empty.",required:"Factory cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},Date:{description:"",type:"any",required:!0,allowEmpty:!1,messages:{allowEmpty:"Contract Date cannot be empty.",conform:"Contract Date cannot be empty.",required:"Contract Date cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},Contract:{description:"",type:"string",required:!0,allowEmpty:!1,messages:{allowEmpty:"Contract cannot be empty.",conform:"Contract cannot be empty.",required:"Contract cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},YourContract:{description:"",type:"string"},Qty:{description:"",type:"any"},PackingDetail:{description:"",type:"string"},IsTolerance:{description:"",type:"boolean"},WeightTolerance:{description:"",type:"any",dependencies:"IsTolerance"},Remarks:{description:"",type:"string"},Close:{description:"",type:"boolean"},Inactive:{description:"",type:"string"},CreatedAt:{type:"any",default:Date.now()},CreatedBy:{type:"string",default:""},LastUpdatedAt:{type:"any",default:Date.now()},LastUpdatedBy:{type:"string",default:""}}}),Ri=a(24),Li={validateFields:function(e){return Ri.validate(e,Ii,{cast:!0})},getContract:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="Contract/"+e,a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?(console.log(e),{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}):200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},getContractFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("Contract-filter/").concat(e),a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},getOneContract:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("Contract/").concat(e),a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},update:function(e,t){return Qe("Contract/"+e,t).then((function(e){return console.log(e),200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Updated",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="Contract/"+e,n.abrupt("return",He(a,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Added",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,formValid:!0,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("Contract/"+e).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))}},Vi=Li,Bi={Factory:"",Date:Date.now(),Contract:"",YourContract:"",Qty:0,PackingDetail:"",IsTolerance:!1,WeightTolerance:0,Remarks:"",Close:!1},Ui=Bi,qi=(a(868),a(23)),Gi=(Object(n.forwardRef)((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),{Factory:{valid:!0,message:""},ContractDate:{valid:!0,message:""},Contract:{valid:!0,message:""},YourContract:{valid:!0,message:""},Qty:{valid:!0,message:""}}),Wi=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).closeForm=function(){a.setState({formControl:qi(Gi)},(function(){return a.props.openForm(null)}))},a.snackOpen=function(e,t){a.setState({snackMessage:e,snackClass:t,snackOpen:!a.state.snackOpen})},a.onSave=function(){var e=Object(me.a)({},a.state.formData),t=Object(me.a)({},a.state.formControl),n=Vi.validateFields(e);n.valid?"Add"===a.props.formAction?Vi.add("",e).then((function(e){!0===e.code?a.props.onSuccess(e.data):null!==e.errors&&Array.isArray(e.errors)?(e.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t})):a.snackOpen("Oops, something went wrong while processing your request!","error")})):Vi.update("",e).then((function(e){!0===e.code?a.props.onSuccess(e.data):null!==e.errors&&Array.isArray(e.errors)?(e.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t})):a.snackOpen("Oops, something went wrong while processing your request!","error")})):(n.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t}),a.snackOpen("Please fix the error(s) highlighted to save the details!","error"))},a.state={formData:a.props.formData,formOpen:a.props.formOpen,formControl:qi(Gi),disabled:!1,snackOpen:!1,snackMessage:"",snackClass:""},a.handelChange=a.handelChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"handelChange",value:function(e,t,a){var n=Object(me.a)({},this.state.formData),r=Object(me.a)({},this.state.formControl);a&&(void 0===e||""===e?(r[t].valid=!1,r[t].message=t+" cannot be empty"):(r[t].valid=!0,r[t].message="")),"IsTolerance"===t&&!1===e&&(n.WeightTolerance=0),n[t]=e,this.setState({formData:n})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(Ae.a,{fullScreen:!0,open:this.state.formOpen,onClose:this.closeForm,TransitionComponent:this.Transition},r.a.createElement(w.a,{className:"appBar"},r.a.createElement(F.a,null,r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:this.closeForm,"aria-label":"close"},r.a.createElement(Vt.a,null)),r.a.createElement(x.a,{variant:"h6",className:"app-title"},"Contract"),r.a.createElement(he.a,{color:"inherit",disabled:this.state.disabled,onClick:this.onSave},"save"))),r.a.createElement(_e.a,null,r.a.createElement("div",{className:"form-container"},r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-evenly",alignItems:"center",md:6,xs:12,sm:12,xl:8,lg:8},r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(Hr,{selectedValue:this.state.formData.Factory,propertyName:"Factory",handleChange:this.handelChange,required:!0,formControl:this.state.formControl.Factory})),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Da.b,{style:{width:"100%"},margin:"dense",id:"date-picker-dialog",label:"Date",format:"dd-MMM-yyyy",error:!this.state.formControl.ContractDate.valid,value:void 0===this.state.formData.ContractDate?Date.now():this.state.formData.ContractDate,onChange:function(t){return e.handelChange(new Date(t),"ContractDate",!0)},KeyboardButtonProps:{"aria-label":"Date"}})),r.a.createElement(Sa.a,{error:!this.state.formControl.ContractDate.valid,style:{display:this.state.formControl.ContractDate.valid?"none":""}},this.state.formControl.ContractDate.message))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"Contract",required:!0,label:"Contract #",error:!this.state.formControl.Contract.valid,helperText:this.state.formControl.Contract.message,defaultValue:this.state.formData.Contract,className:"",onChange:function(t){return e.handelChange(t.target.value.trim(),"Contract",!0)},margin:"dense"}))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"Your_Contract",label:"Your Contract #",defaultValue:this.state.formData.YourContract,className:"",onChange:function(t){return e.handelChange(t.target.value,"YourContract",!1)},margin:"dense"}))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Qty",defaultValue:this.state.formData.Qty,decimalSeparator:".",decimalScale:2,fixedDecimalScale:!0,onValueChange:function(t){t.formattedValue;var a=t.value;e.handelChange(a,"Qty",!1)}}))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"Packing_Detail",label:"Packing Detail",defaultValue:this.state.formData.PackingDetail,className:"",onChange:function(t){return e.handelChange(t.target.value,"PackingDetail",!1)},margin:"dense"}))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ye.a,{style:{width:"100%",margin:5,paddingTop:24},control:r.a.createElement(ve.a,{checked:this.state.formData.IsTolerance,onChange:function(t){return e.handelChange(t.target.checked,"IsTolerance",!1)},value:this.state.formData.IsTolerance,color:"primary"}),label:"Weight Tolerance"})),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Weight Tolerance",style:{display:this.state.formData.IsTolerance?"":"none"},value:this.state.formData.WeightTolerance,defaultValue:this.state.formData.WeightTolerance,decimalSeparator:".",decimalScale:2,fixedDecimalScale:!0,onValueChange:function(t){t.formattedValue;var a=t.value;e.handelChange(a,"WeightTolerance",!1)}}))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"Remarks",label:"Remarks",multiline:!0,rows:"4",defaultValue:this.state.formData.Remarks,className:"",onChange:function(t){return e.handelChange(t.target.value,"Remarks",!1)},margin:"dense"}))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ye.a,{style:{width:"100%",margin:5,paddingTop:24},control:r.a.createElement(ve.a,{checked:this.state.formData.Close,onChange:function(t){return e.handelChange(t.target.checked,"Close",!1)},value:this.state.formData.Close,color:"primary"}),label:"Close"})))))),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.snackClass,autoHideDuration:600,open:this.state.snackOpen,onClose:this.snackOpen,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.snackMessage)}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return{formOpen:e.formOpen}}}]),t}(r.a.Component),Hi=Wi,Qi=a(23),zi=(Object(n.forwardRef)((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),r.a.forwardRef((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).snackOpen=function(e,t){a.setState({snackOpen:!a.state.snackOpen,alertMessage:e,alertClass:t})},a.snackClose=function(){a.setState({snackOpen:!1})},a.dialogOpen=function(e){a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:e,dialogMessage:r.a.createElement("span",null,"Are you sure to delete this record"," ",r.a.createElement("b",null,e.Factory.FctyName)," ? This cannot be undone.")})},a.onDelete=function(){var e=Object(je.a)(a.state.data),t=e.indexOf(a.state.currentDeleteData);void 0!==a.state.currentDeleteData&&null!==a.state.currentDeleteData&&Vi.delete(a.state.currentDeleteData._id).then((function(n){!0===n.code?(e.splice(t,1),a.setState({data:e,dialogOpen:!1},(function(){return a.snackOpen("Successfully deleted.","success")}))):a.setState({dialogOpen:!1},(function(){return a.snackOpen("Oops!, Something went wrong while processing your request, please try again later.","success")}))}))},a.state={columns:[{title:"Factory",field:"Factory",render:function(e){return r.a.createElement("span",null,e.Factory.FctyName)}},{title:"Date",field:"ContractDate",render:function(e){return r.a.createElement("span",null,new Date(e.ContractDate).toLocaleDateString())}},{title:"Contract #",field:"Contract"},{title:"Your Contract #",field:"YourContract"},{title:"Qty (kg)",field:"Qty"},{title:"Packing Detail",field:"PackingDetail"},{title:"Tolerance (%)",field:"WeightTolerance"},{title:"Remark",field:"Remarks"},{title:"Status",field:"Status"},{title:"Operator",field:"LastUpdatedBy"},{title:"Last Updated",field:"LastUpdatedAt",render:function(e){return r.a.createElement("span",null,new Date(e.LastUpdatedAt).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}))}}],data:[],currentRowData:null,currentDeleteData:null,formOpen:!1,formAction:"",snackOpen:!1,dialogOpen:!1,alertMessage:"",dialogMessage:"",alertClass:""},a.ContractModel=Qi(Ui),a.openForm=a.openForm.bind(Object(Pe.a)(a)),a.onSuccess=a.onSuccess.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initContract()}},{key:"openForm",value:function(e){var t=e,a=this.state.formAction;void 0===t||null===t?(t=this.ContractModel,a="Add"):a="update",this.setState({currentRowData:t,formOpen:!this.state.formOpen,formAction:a})}},{key:"initContract",value:function(){var e=this;Vi.getContract("").then((function(t){!0===t.code?e.setState({data:t.data}):e.snackOpen("Oops!, Something went wrong while processing your request, please try again later.","error")}))}},{key:"onSuccess",value:function(e){var t=this,a=Object(je.a)(this.state.data);if(void 0!==e&&null!==e)if("Add"===this.state.formAction)a.push(e),this.setState({data:a,formOpen:!this.state.formOpen,formAction:"",currentRowData:null},(function(){return t.snackOpen("Successfully added!","success")}));else{var n=a.indexOf(this.state.currentRowData);a[n]=e,this.setState({data:a,formOpen:!this.state.formOpen,formAction:"",currentRowData:null},(function(){return t.snackOpen("Successfully updated!","success")}))}else this.snackOpen("Your operation is not succeed, please try again later.","error")}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{container:!0,direction:"column",justify:"center",wrap:"wrap",style:{margin:"20px 20px 10px 0px"}},r.a.createElement(be.a,{item:!0,xs:12},r.a.createElement(Ve.a,{title:"Contract",columns:this.state.columns,data:this.state.data,components:{Toolbar:function(t){return r.a.createElement("div",null,r.a.createElement(Le.MTableToolbar,t),r.a.createElement("div",{style:{padding:"0px 15px"}},r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:function(){return e.openForm(t.rowData)},"aria-label":"add"},r.a.createElement(wt.a,null))))}},actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.data,columns:e.state.columns,fileName:"Contract"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.initContract()}},{icon:"edit",tooltip:"Edit User",onClick:function(t,a){return e.openForm(a)}},{icon:"delete",tooltip:"Delete User",onClick:function(t,a){return e.dialogOpen(a)}}],options:{}})),r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-evenly",alignItems:"center",md:10,xs:12,sm:12,xl:10,lg:10},this.state.formOpen?r.a.createElement(Hi,{formData:this.state.currentRowData,openForm:this.openForm,formOpen:this.state.formOpen,onSuccess:this.onSuccess,formAction:this.state.formAction}):""),this.state.snackOpen?r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:600,open:this.state.snackOpen,onClose:this.snackClose,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}):"",this.state.dialogOpen?r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.closeDialog,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.closeDialog,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDelete,color:"primary"},"Delete"))):"")}}]),t}(r.a.Component)),Yi=zi,Ki=(a(869),{Factory:"",Buyer:"",SI:"",Remarks:"",ContainerDetails:[]}),Ji=(a(870),{properties:{Factory:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Factory cannot be empty.",conform:"Factory cannot be empty.",required:"Factory cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},Buyer:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Buyer cannot be empty.",conform:"Buyer cannot be empty.",required:"Buyer cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},SI:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"SI cannot be empty.",conform:"SI cannot be empty.",required:"SI cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},Remarks:{description:"",type:"string"},ContainerDetails:{description:"",type:"array"},CreatedAt:{type:"any",default:Date.now()},CreatedBy:{type:"string",default:""},LastUpdatedAt:{type:"any",default:Date.now()},LastUpdatedBy:{type:"string",default:""}}}),Zi={properties:{Container:{description:"",type:"string",required:!0,allowEmpty:!1,messages:{allowEmpty:"Container cannot be empty.",conform:"Container cannot be empty.",required:"Container cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},ReceivedDate:{description:"",type:"any",required:!0,allowEmpty:!1,messages:{allowEmpty:"ReceivedDate cannot be empty.",conform:"ReceivedDate cannot be empty.",required:"ReceivedDate cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},Condition:{description:"",type:"string",required:!0,allowEmpty:!1,messages:{allowEmpty:"Condition cannot be empty.",conform:"Condition cannot be empty.",required:"Condition cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},Qty:{description:"",type:"number",required:!0,allowEmpty:!1,pattern:/^[0-9]+$/,messages:{allowEmpty:"Qty cannot be empty.",conform:"Qty value must be greater than 0.",required:"Qty cannot be empty.",type:"Only number is allowed"},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},Status:{description:"",type:"string"},Seal:{description:"",type:"string"},CreatedAt:{type:"any",default:Date.now()},CreatedBy:{type:"string",default:""},LastUpdatedAt:{type:"any",default:Date.now()},LastUpdatedBy:{type:"string",default:""}}},Xi=a(24),$i={validateFields:function(e){return Xi.validate(e,Ji,{cast:!0})},validateContainerDetailsFields:function(e){return Xi.validate(e,Zi,{cast:!0})},get:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="containerList/"+e,a.abrupt("return",We(t).then((function(e){return 200===e.status&&null!==e.data.data?(console.log(e),{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}):200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},getFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("containerList-filter/").concat(e),a.abrupt("return",We(t).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},getOne:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("containerList/").concat(e),a.abrupt("return",We(t).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},update:function(e,t){return Qe("containerList/"+e,t).then((function(e){return console.log(e),200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Updated",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="containerList/"+e,n.abrupt("return",He(a,t).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Added",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,formValid:!0,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("containerList/"+e).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))}},el=$i,tl={properties:{Factory:{type:["string","object"],required:!0,messages:{conform:"Factory cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},Buyer:{type:["string","object"],required:!0,messages:{conform:"Buyer cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},BuyerApprovedGrade:{type:["array"],required:!0,minItems:1,messages:{minItems:"Buyer Approved Grade should be enter."}}}},al={properties:{Grade:{type:["string","object"],required:!0,messages:{required:"Grade cannot be empty.",conform:"Grade cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},StatusDate:{type:["any"],required:!0,messages:{required:"Approval date cannot be empty.",conform:"Approval date cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},ApprovalStatus:{type:["any"],required:!0,messages:{required:"Approval status cannot be empty.",conform:"Approval status cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}}}},nl=a(24),rl={validateFields:function(e){return nl.validate(e,tl,{cast:!0})},validateGradeFields:function(e){return nl.validate(e,al,{cast:!0})},get:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="buyerApproval/"+e,a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 2:case"end":return a.stop()}}))},getByUid:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="buyerApproval/"+e,a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 2:case"end":return a.stop()}}))},getFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("buyerApproval-filter/").concat(e),a.next=3,l.a.awrap(We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 3:return a.abrupt("return",a.sent);case 4:case"end":return a.stop()}}))},update:function(e,t){return Qe("buyerApproval/"+e,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Updated successfully.",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,errors:e.data.errors,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="buyerApproval/"+e,n.abrupt("return",He(a,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,message:"Added successfully.",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("buyerApproval/"+e).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))}},ol=rl,sl=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={buyerApprovalData:[],disabled:!1},a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){""!==this.props.selectedFactory&&void 0!==this.props.selectedFactory&&this.fetchBuyerApprovalData()}},{key:"componentDidUpdate",value:function(e){this.props.selectedFactory!==e.selectedFactory&&void 0!==this.props.selectedFactory&&""!==this.props.selectedFactory&&this.fetchBuyerApprovalData()}},{key:"fetchBuyerApprovalData",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:ol.getFilter("?Factory=".concat(this.props.selectedFactory,"&Inactive=false")).then((function(t){if(!0===t.code){var a=t.data.map((function(e){return e.Buyer}));e.setState({buyerApprovalData:a})}})).catch((function(e){throw e}));case 1:case"end":return t.stop()}}),null,this)}},{key:"renderOptions",value:function(){return this.state.buyerApprovalData.map((function(e,t){return r.a.createElement(et.a,{label:"Select Buyer",value:e._id,key:e._id,name:e.name},e.name)}))}},{key:"handleChange",value:function(e,t){var a=this.state.buyerApprovalData.find((function(t){return t._id===e.target.value}));void 0!==a?this.props.handleChange(a,t,this.props.required):this.props.handleChange("",t,this.props.required)}},{key:"render",value:function(){var e=this;return r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(Ea.a,{shrink:!0,htmlFor:"buyerApproval",required:this.props.required,error:!this.props.formControl.valid},"Buyer"),r.a.createElement(ba.a,{id:this.props.propertyName,value:void 0===this.props.selectedValue._id?"":this.props.selectedValue._id,error:!this.props.formControl.valid,onChange:function(t){return e.handleChange(t,e.props.propertyName)},margin:"dense",displayEmpty:!0},r.a.createElement(et.a,{value:""},r.a.createElement("em",null,"Select Buyer ")),this.renderOptions()),r.a.createElement(Sa.a,{error:!this.props.formControl.valid,style:{display:this.props.formControl.valid?"none":""}},this.props.formControl.valid?"":this.props.formControl.message))}}]),t}(n.Component),il=sl,ll=a(23),cl=(r.a.forwardRef((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),{Factory:{valid:!0,message:""},Buyer:{valid:!0,message:""},SI:{valid:!0,message:""},ContainerDetails:{Container:{valid:!0,message:""},ReceivedDate:{valid:!0,message:""},Condition:{valid:!0,message:""},Qty:{valid:!0,message:""}}}),ul=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).closeForm=function(){a.setState({formControl:ll(cl)},(function(){return a.props.closeForm()}))},a.snackOpen=function(e,t,n){var r;return l.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(void 0===e||null===e||void 0===t||null===t){o.next=11;break}if(void 0!==n){o.next=7;break}return o.next=4,l.a.awrap(ka(e,t));case 4:r=o.sent,o.next=8;break;case 7:r=n;case 8:a.setState({snackOpen:!a.state.snackOpen,snackMessage:r,snackClass:e}),o.next=12;break;case 11:a.setState({snackOpen:!1});case 12:case"end":return o.stop()}}))},a.dialogOpen=function(e){var t;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(void 0===e||null===e){n.next=7;break}return n.next=3,l.a.awrap(ka("confirmation","delete"));case 3:t=n.sent,a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:e,dialogMessage:r.a.createElement("span",null,void 0!==t?t.replace("[Name]",e.Container):"")}),n.next=8;break;case 7:a.setState({dialogOpen:!1});case 8:case"end":return n.stop()}}))},a.onSave=function(){var e,t,n;return l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return e=Object(me.a)({},a.state.formData),t=Object(me.a)({},a.state.formControl),e.ContainerDetails=a.state.containerDetail,r.next=5,l.a.awrap(el.validateFields(e));case 5:(n=r.sent).valid?"Add"===a.props.formAction?el.add("",e).then((function(e){!0===e.code?a.props.onSuccess(e.data):null!==e.errors&&Array.isArray(e.errors)?(e.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t})):a.snackOpen("Oops, something went wrong while processing your request!","error")})):el.update("",e).then((function(e){!0===e.code?a.props.onSuccess(e.data):null!==e.errors&&Array.isArray(e.errors)?(e.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t})):a.snackOpen("Oops, something went wrong while processing your request!","error")})):(n.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t}),a.snackOpen("Please fix the error(s) highlighted to save the details!","error"));case 7:case"end":return r.stop()}}))},a.onDelete=function(){if(null!==a.state.currentDeleteData&&void 0!==a.state.currentDeleteData){var e=Object(je.a)(a.state.containerDetail),t=e.indexOf(a.state.currentDeleteData);e.splice(t,1),a.setState({containerDetail:e},(function(){return a.dialogOpen()}))}},a.state={formData:a.props.formData,formOpen:a.props.formOpen,containerDetail:[],formControl:ll(cl),columns:[{title:"Container",field:"Container",editComponent:function(e){return r.a.createElement(ge.a,{margin:"dense",id:"Container",label:"Container",type:"text",error:""===e.value||!a.state.formControl.ContainerDetails.Container.valid,helperText:""===e.value?"Container cannot empty":a.state.formControl.ContainerDetails.Container.valid?"":a.state.formControl.ContainerDetails.Container.message,defaultValue:e.rowData.Container,onChange:function(t){return e.onChange(t.target.value)}})}},{title:"Date",field:"ReceivedDate",render:function(e){return r.a.createElement("span",null,new Date(e.ReceivedDate).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric"}))},editComponent:function(e){return r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Da.b,{style:{width:"100%"},margin:"dense",id:"dReceivedDate",label:"Date",format:"dd-MMM-yyyy",error:!a.state.formControl.ContainerDetails.ReceivedDate.valid,value:void 0===e.rowData.ReceivedDate?Date.now():e.rowData.ReceivedDate,onChange:function(t){return e.onChange(new Date(t))},KeyboardButtonProps:{"aria-label":"Date"}}))}},{title:"Condition",field:"Condition",editComponent:function(e){return r.a.createElement(ge.a,{margin:"dense",id:"Condition",label:"Condition",type:"text",error:""===e.value||!a.state.formControl.ContainerDetails.Condition.valid,helperText:""===e.value?"Condition cannot empty":a.state.formControl.ContainerDetails.Condition.valid?"":a.state.formControl.ContainerDetails.Condition.message,defaultValue:e.rowData.Condition,onChange:function(t){return e.onChange(t.target.value)}})}},{title:"Qty (Pallet)",field:"Qty",editComponent:function(e){return r.a.createElement(ge.a,{margin:"dense",id:"Qty",label:"Qty",type:"number",error:""===e.value||!a.state.formControl.ContainerDetails.Qty.valid,helperText:""===e.value?"Condition cannot empty":a.state.formControl.ContainerDetails.Qty.valid?"":a.state.formControl.ContainerDetails.Qty.message,defaultValue:e.rowData.Qty,onChange:function(t){return e.onChange(t.target.value)}})}},{title:"Container Status",field:"Status",editable:"never"},{title:"Seal",field:"Seal",editComponent:function(e){return r.a.createElement(ge.a,{margin:"dense",id:"Seal",label:"Seal",type:"text",defaultValue:e.rowData.Seal,onChange:function(t){return e.onChange(t.target.value)}})}}],currentDeleteData:null,dialogOpen:!1,dialogMessage:"",disabled:!1,snackOpen:!1,snackMessage:"",snackClass:""},a.handelChange=a.handelChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.setState({containerDetail:this.props.formData.ContainerDetails})}},{key:"handelChange",value:function(e,t,a){var n=Object(me.a)({},this.state.formData),r=Object(me.a)({},this.state.formControl);"Factory"===t&&(void 0===e||""===e?(r[t].valid=!1,r[t].message="Factory cannot be empty."):(r[t].valid=!0,r[t].message=""),n.Buyer="",n.SI=""),"Buyer"===t&&(void 0===e||""===e?(r[t].valid=!1,r[t].message="Buyer cannot be empty."):(r[t].valid=!0,r[t].message=""),n.SI=""),a&&(void 0===e||""===e?(r[t].valid=!1,r[t].message="".concat(t," cannot be empty.")):(r[t].valid=!0,r[t].message="")),n[t]=e,this.setState({formData:n})}},{key:"initFormControl",value:function(){this.setState({formControls:ll(cl)})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(Ae.a,{fullScreen:!0,open:this.state.formOpen,onClose:this.closeForm,TransitionComponent:this.Transition},r.a.createElement(w.a,{className:"appBar"},r.a.createElement(F.a,null,r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:this.closeForm,"aria-label":"close"},r.a.createElement(Vt.a,null)),r.a.createElement(x.a,{variant:"h6",className:"app-title"},"Container List"),r.a.createElement(he.a,{color:"inherit",disabled:this.state.disabled,onClick:this.onSave},"save"))),r.a.createElement(_e.a,null,r.a.createElement("div",{className:"form-container"},r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-evenly",alignItems:"center",md:6,xs:12,sm:12,xl:8,lg:8},r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(Hr,{selectedValue:this.state.formData.Factory,propertyName:"Factory",handleChange:this.handelChange,formControl:this.state.formControl.Factory})),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(il,{selectedValue:this.state.formData.Buyer,propertyName:"Buyer",handleChange:this.handelChange,formControl:this.state.formControl.Buyer,selectedFactory:void 0===this.state.formData.Factory._id?this.state.formData.Factory:this.state.formData.Factory._id,required:!0}))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(di,{selectedValue:this.state.formData.SI,propertyName:"SI",handleChange:this.handelChange,formControl:this.state.formControl.SI,required:!0,selectedFactory:this.state.formData.Factory._id,selectedBuyer:this.state.formData.Buyer._id,for:"ContainerList",existingSelection:this.props.formData.SI}))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{disabled:!0,id:"Contract",required:!0,label:"Contract #",value:this.state.formData.SI.Contract,defaultValue:" ",className:"",margin:"dense"}))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{disabled:!0,id:"Grade",label:"Grade",value:void 0===this.state.formData.SI.ProductGrade?" ":this.state.formData.SI.ProductGrade.GradeCode,defaultValue:" ",className:"",margin:"dense"}))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{disabled:!0,customInput:ge.a,label:"Qty",value:this.state.formData.SI.Weight,thousandSeparator:!0,decimalScale:2,fixedDecimalScale:!0}))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"Remarks",label:"Remarks",multiline:!0,rows:"4",defaultValue:this.state.formData.Remarks,className:"",onChange:function(t){return e.handelChange(t.target.value,"Remarks",!1)},margin:"dense"}))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12,style:{paddingTop:7}},r.a.createElement(Ve.a,{title:"CONTAINER DETAIL",columns:this.state.columns,data:this.state.containerDetail,editable:{onRowAdd:function(t){return new Promise((function(a,n){setTimeout((function(){var r=Object(je.a)(e.state.containerDetail),o=Object(me.a)({},e.state.formControl),s=el.validateContainerDetailsFields(t);if(s.valid){var i=Object(me.a)({},t);i.ReceivedDate=void 0===t.ReceivedDate?new Date:t.ReceivedDate,i.Status="Open",r.push(i),e.setState({containerDetail:r},(function(){return a()}))}else n(),s.errors.map((function(e){o.ContainerDetails[e.property].valid=!1,o.ContainerDetails[e.property].message=e.message})),e.setState({formControl:o})}),1e3)}))},onRowUpdate:function(t,a){return new Promise((function(n,r){setTimeout((function(){var o=Object(je.a)(e.state.containerDetail),s=Object(me.a)({},e.state.formControl),i=el.validateContainerDetailsFields(t);if(i.valid){var l=o.indexOf(a);o[l]=t,e.setState({containerDetail:o},(function(){return n()}))}else r(),i.errors.map((function(e){s.ContainerDetails[e.property].valid=!1,s.ContainerDetails[e.property].message=e.message})),e.setState({formControl:s})}),1e3)}))}},actions:[{icon:"delete",tooltip:"Delete",onClick:function(t,a){return e.dialogOpen(a)}}],icons:{Clear:function(t){return r.a.createElement(Nt.a,{onClick:function(){e.initFormControl()},style:{padding:0,margin:0}})}},options:{search:!1}})))))),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.snackClass,autoHideDuration:600,open:this.state.snackOpen,onClose:this.snackOpen,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.snackMessage)}),this.state.dialogOpen?r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.dialogOpen,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.dialogOpen,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDelete,color:"primary"},"Delete"))):"")}}],[{key:"getDerivedStateFromProps",value:function(e,t){return{formOpen:e.formOpen}}}]),t}(r.a.Component),dl=ul,ml=a(23),pl=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).snackOpen=function(e,t){var n;return l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0===e||null===e||void 0===t||null===t){r.next=7;break}return r.next=3,l.a.awrap(ka(e,t));case 3:n=r.sent,a.setState({snackOpen:!a.state.snackOpen,alertMessage:n,alertClass:e}),r.next=8;break;case 7:a.setState({snackOpen:!1});case 8:case"end":return r.stop()}}))},a.dialogOpen=function(e){var t;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,l.a.awrap(ka("confirmation","delete"));case 2:t=n.sent,a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:e,dialogMessage:r.a.createElement("span",null,void 0!==t?t.replace("[Name]","container list for ".concat(e.SI.SINo)):"")});case 4:case"end":return n.stop()}}))},a.diaLogClose=function(){a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:null})},a.onDelete=function(){null!==a.state.currentDeleteData&&el.delete("".concat(a.state.currentDeleteData._id)).then((function(e){if(!0===e.code){var t=Object(je.a)(a.state.data),n=t.indexOf(a.state.currentDeleteData);t.splice(n,1),a.setState({data:t,currentDeleteData:"",dialogOpen:!a.state.dialogOpen},(function(){return a.snackOpen("success","delete")}))}else a.snackOpen("error","server")}))},a.state={columns:[{title:"Factory",field:"Factory",render:function(e){return r.a.createElement("span",null,e.Factory.FctyName)}},{title:"SI #",field:"SI",render:function(e){return r.a.createElement("span",null,e.SI.SINo)}},{title:"Contract #",render:function(e){return r.a.createElement("span",null,e.SI.Contract)}},{title:"Grade",render:function(e){return r.a.createElement("span",null,e.SI.ProductGrade.GradeCode)}},{title:"Qty (kg)",render:function(e){return r.a.createElement("span",null,e.SI.Weight)}},{title:"Container",field:"Container",render:function(e){return r.a.createElement("span",null,e.ContainerDetails.length)}},{title:"Remarks",field:"Remarks",render:function(e){return r.a.createElement("span",null,e.Remarks)}},{title:"Operator",field:"LastUpdatedBy",render:function(e){return r.a.createElement("span",null,e.LastUpdatedBy)}},{title:"Last Updated",field:"LastUpdatedAt",render:function(e){return r.a.createElement("span",null,new Date(e.LastUpdatedAt).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}))}}],data:[],formData:null,currentDeleteData:null,formAction:"",openSnack:!1,snackMessage:"",snackClass:"",openForm:!1,openDialog:!1},a.containerListModel=ml(Ki),a.openForm=a.openForm.bind(Object(Pe.a)(a)),a.closeForm=a.closeForm.bind(Object(Pe.a)(a)),a.onSuccess=a.onSuccess.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initContainerList()}},{key:"initContainerList",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.awrap(el.get("").then((function(t){!0===t.code&&e.setState({data:t.data})})));case 2:case"end":return t.stop()}}))}},{key:"openForm",value:function(e){var t,a=ml(e);void 0===e||null===e?(a=ml(this.containerListModel),t="Add"):t="update",this.setState({formData:a,formOpen:!this.state.formOpen,formAction:t})}},{key:"closeForm",value:function(){this.setState({formData:null,formOpen:!1,formAction:""})}},{key:"onSuccess",value:function(e){var t=this,a=Object(je.a)(this.state.data);if(void 0!==e&&null!==e)if("Add"===this.state.formAction)a.push(e),this.setState({data:a,formOpen:!this.state.formOpen,formAction:"",currentRowData:null},(function(){return t.snackOpen("success","add")}));else{var n=a.find((function(e){return e._id===t.state.formData._id})),r=a.indexOf(n);a[r]=e,this.setState({data:a,formOpen:!this.state.formOpen,formAction:"",currentRowData:null},(function(){return t.snackOpen("success","update")}))}else this.snackOpen("error","server")}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{container:!0,direction:"column",justify:"center",wrap:"wrap",style:{margin:"20px 20px 10px 0px"}},r.a.createElement(be.a,{item:!0,xs:12},r.a.createElement(Ve.a,{title:"Container List",columns:this.state.columns,data:this.state.data,components:{Toolbar:function(t){return r.a.createElement("div",null,r.a.createElement(Le.MTableToolbar,t),r.a.createElement("div",{style:{padding:"0px 15px"}},r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:function(){return e.openForm(t.rowData)},"aria-label":"add"},r.a.createElement(wt.a,null))))}},actions:[{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.initContainerList()}},{icon:"edit",tooltip:"Edit",onClick:function(t,a){return e.openForm(a)}},{icon:"delete",tooltip:"Delete",onClick:function(t,a){return e.dialogOpen(a)}}]})),r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-evenly",alignItems:"center",md:10,xs:12,sm:12,xl:10,lg:10},this.state.formOpen?r.a.createElement(dl,{formAction:this.state.formAction,formData:this.state.formData,formOpen:this.state.formOpen,onSuccess:this.onSuccess,closeForm:this.closeForm}):""),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:600,open:this.state.snackOpen,onClose:this.snackOpen,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.diaLogClose,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.diaLogClose,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDelete,color:"primary"},"Delete"))))}}]),t}(r.a.Component),fl=pl,hl=a(272),gl=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={formControls:{Factory:{valid:!0,message:"",value:void 0===a.props.formData.Factory||""===a.props.formData.Factory?"":a.props.formData.Factory._id},Name:{valid:!0,message:"",value:a.props.formData.Name},TimeBegin:{valid:!0,message:"",value:a.props.formData.TimeBegin},TimeEnd:{valid:!0,message:"",value:a.props.formData.TimeEnd},Inactive:{valid:!0,message:"",value:a.props.formData.Inactive},Remarks:{valid:!0,message:"",value:a.props.formData.Remarks}},formState:{valid:!0,dirty:!1,errors:[]}},a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"handleChange",value:function(e,t){var a=this.state.formControls,n=this.state.formState;"TimeBegin"===t||"TimeEnd"===t?"TimeBegin"===t&&e>this.state.formControls.TimeEnd.value||"TimeEnd"===t&&this.state.formControls.TimeBegin.value>e?(a.TimeBegin.valid=!1,a.TimeBegin.message="Time begin should be greater than time end.",a.TimeEnd.valid=!1,a.TimeEnd.message="Time begin should be greater than time end."):(a.TimeBegin.valid=!0,a.TimeBegin.message="",a.TimeEnd.valid=!0,a.TimeEnd.message=""):void 0===e||0===e.length?(a[t].valid=!1,a[t].message="".concat(t," cannot be empty.")):(a[t].valid=!0,a[t].message=""),this.props.handleChange(e,t),a[t].value=e,n.dirty=!0,this.setState({formControls:a,formState:n})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"form-container"},r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-evenly",alignItems:"center",md:6,xs:12,sm:12,xl:8,lg:8},r.a.createElement(Hr,{handleChange:this.handleChange,selectedValue:this.state.formControls.Factory.value,formControl:this.state.formControls.Factory,propertyName:"Factory"}),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(ge.a,{required:!0,id:"Name",label:"Name",error:!this.state.formControls.Name.valid,helperText:this.state.formControls.Name.message,defaultValue:this.state.formControls.Name.value,onChange:function(t){return e.handleChange(t.target.value.trim(),"Name")}})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(hl.b,{required:!0,label:"Time Begin",value:this.state.formControls.TimeBegin.value,onChange:function(t){return e.handleChange(t,"TimeBegin")}}),r.a.createElement(Sa.a,{error:!this.state.formControls.TimeBegin.valid,style:{display:this.state.formControls.TimeBegin.valid?"none":""}},this.state.formControls.TimeBegin.message))),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(hl.b,{required:!0,label:"Time End",value:this.state.formControls.TimeEnd.value,onChange:function(t){return e.handleChange(t,"TimeEnd")}}),r.a.createElement(Sa.a,{error:!this.state.formControls.TimeEnd.valid,style:{display:this.state.formControls.TimeEnd.valid?"none":""}},this.state.formControls.TimeEnd.message))),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(ge.a,{id:"Remarks",label:"Remarks",defaultValue:this.state.formControls.Remarks.value,onChange:function(t){return e.handleChange(t.target.value,"Remarks")},multiline:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(ga.a,{component:"label"},"Inactive"),r.a.createElement(Xe.a,{checked:this.state.formControls.Inactive.value,value:this.state.formControls.Inactive.value,color:"primary",inputProps:{"aria-label":"primary checkbox"},onChange:function(t){return e.handleChange(t.target.checked,"Inactive")}}))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=t.formControls;return e.formState.valid||Array.isArray(e.formState.errors)&&e.formState.errors.map((function(e){a[e.property].valid=!1,a[e.property].message=e.message})),{formState:e.formState,formControls:a}}}]),t}(r.a.Component),yl=gl,vl={Factory:"",Name:"",TimeBegin:new Date("1990-01-01 00:00"),TimeEnd:new Date("1990-01-01 00:00"),Remarks:"",Inactive:!1,GradeCreatedAt:new Date(Date.now()).toLocaleString(),GradeCreatedBy:"Admin",GradeLastUpdatedAt:new Date(Date.now()).toLocaleString(),GradeLastUpdatedBy:"Admin"},Cl=vl,Dl=(Object(n.forwardRef)((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),r.a.forwardRef((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).openDialog=function(e){a.setState({dialogOpen:!0,currentDeleteData:e,dialogMessage:r.a.createElement("span",null,"Are you sure to delete this record for factory"," ",r.a.createElement("b",null,e.Factory.FctyCode),", shift ",r.a.createElement("b",null,e.Name),"? This cannot be undone.")})},a.closeDialog=function(){a.setState({dialogOpen:!1,currentDeleteData:null,dialogMessage:""})},a.openForm=function(e){void 0===e?a.setState({actionStatus:"Add",newData:Object(me.a)({},Cl)}):a.setState({actionStatus:"Update",newData:Object(me.a)({},e)}),a.setState({formOpen:!0,formState:{valid:!0,dirty:!1,errors:[]}})},a.closeForm=function(){a.setState({formOpen:!1,newData:{},actionStatus:""})},a.onSave=function(){var e=a.state.formState,t=Object(me.a)({},a.state.newData),n=as.validateFields(t);if(a.state.formState.valid)if(n.valid){var r=Object(je.a)(a.state.data);"Add"===a.state.actionStatus?(t.LastUpdatedBy=a.state.operator,t.CreatedBy=a.state.operator,as.add("",t).then((function(t){!0===t.code?(e.valid=!0,r.push(t.data),a.setState({data:r}),a.closeForm(),a.snackOpen("Shift created successfully!","success")):(e.valid=!1,e.errors=t.errors,a.snackOpen("Please fix the error(s) highlighted to save the details!","error"))})).catch((function(e){a.snackOpen("Oops, something went wrong while processing your request!","error")}))):(t.LastUpdatedBy=a.state.operator,as.update("",t).then((function(n){if(!0===n.code){e.valid=!0;var o=r.find((function(e){return e._id===t._id})),s=r.indexOf(o);r[s]=n.data,a.setState({data:r}),a.closeForm(),a.snackOpen("Shift updated successfully!","success")}else e.valid=!1,e.errors=n.errors,a.snackOpen("Please fix the error(s) highlighted to save the details!","error")})).catch((function(e){a.snackOpen("Oops, something went wrong while processing your request!","error")})))}else{e.valid=!1;var o=n.errors.map((function(e){var t={};return t.property=e.property,t.message=e.message,t}));e.errors=o,a.snackOpen("Please fix the error(s) highlighted to save the details!","error")}a.setState({formState:e})},a.onDelete=function(){null!==a.state.currentDeleteData&&as.delete("".concat(a.state.currentDeleteData._id)).then((function(e){if(!0===e.code){var t=Object(je.a)(a.state.data),n=t.indexOf(a.state.currentDeleteData);t.splice(n,1),a.setState({data:t}),a.closeDialog(),a.snackOpen("Successfully Deleted!","success")}else a.snackOpen("Oops, something went wrong while processing your request!","error")}))},a.onEdit=function(e){a.openForm(e)},a.state={columns:[{field:"_id",hidden:!0},{title:"Factory",field:"Factory",render:function(e){return r.a.createElement("span",null,void 0===e.Factory?"":e.Factory.FctyCode)}},{title:"Shift",field:"Name"},{title:"Time Begin",field:"TimeBegin",render:function(e){return r.a.createElement("span",null,new Date(e.TimeBegin).toLocaleTimeString("en-US"))}},{title:"Time End",field:"TimeEnd",render:function(e){return r.a.createElement("span",null,new Date(e.TimeEnd).toLocaleTimeString("en-US"))}},{title:"Remarks",field:"Remarks"},{title:"Inactive",field:"Inactive",render:function(e){return r.a.createElement("span",null,e.Inactive?"Yes":"No")}},{title:"Operator",field:"LastUpdatedBy"},{title:"Last Updated",field:"LastUpdatedAt",render:function(e){return r.a.createElement("span",null,void 0===e?"":new Date(e.LastUpdatedAt).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}))}}],data:[],currentDeleteData:null,newData:Cl,formOpen:!1,dialogOpen:!1,dialogMessage:"",disabled:!1,actionStatus:"",formState:{valid:!0,dirty:!1,errors:[]},operator:"Admin"},a.openDialog=a.openDialog.bind(Object(Pe.a)(a)),a.closeDialog=a.closeDialog.bind(Object(Pe.a)(a)),a.openForm=a.openForm.bind(Object(Pe.a)(a)),a.closeForm=a.closeForm.bind(Object(Pe.a)(a)),a.snackOpen=a.snackOpen.bind(Object(Pe.a)(a)),a.snackClose=a.snackClose.bind(Object(Pe.a)(a)),a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initShift()}},{key:"initShift",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.awrap(as.get("").then((function(t){!0===t.code&&e.setState({data:t.data})})));case 2:case"end":return t.stop()}}))}},{key:"handleChange",value:function(e,t){var a=this.state.newData;a[t]=e;var n=this.state.formState;n.valid=!0,this.setState({newData:a,formState:n})}},{key:"snackOpen",value:function(e,t){this.setState({alertOpen:!0,alertMessage:e,alertClass:t})}},{key:"snackClose",value:function(){this.setState({alertOpen:!1,alertMessage:"",alertClass:"",currentDeleteData:null})}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{style:{margin:"20px 20px 10px 0px"}},r.a.createElement(Ve.a,{title:"Shift",columns:this.state.columns,data:this.state.data,components:{Toolbar:function(t){return r.a.createElement("div",null,r.a.createElement(Le.MTableToolbar,t),r.a.createElement("div",{style:{padding:"0px 15px"}},r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:function(){return e.openForm()},"aria-label":"add"},r.a.createElement(wt.a,null))))}},actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.data,columns:e.state.columns,fileName:"Shift"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.initShift()}},{icon:"edit",tooltip:"Edit",onClick:function(t,a){return e.openForm(a)}},{icon:"delete",tooltip:"Delete",onClick:function(t,a){return e.openDialog(a)}}],options:{}}),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:6e3,open:this.state.alertOpen,onClose:this.snackClose,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}),r.a.createElement(Ae.a,{fullScreen:!0,open:this.state.formOpen,onClose:this.closeForm,TransitionComponent:this.Transition},r.a.createElement(w.a,{className:"appBar"},r.a.createElement(F.a,null,r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:this.closeForm,"aria-label":"close"},r.a.createElement(Vt.a,null)),r.a.createElement(x.a,{variant:"h6",className:"app-title"},"Shift Details"),r.a.createElement(he.a,{color:"inherit",disabled:this.state.disabled,onClick:this.onSave},"save"))),r.a.createElement(_e.a,null,r.a.createElement(yl,{handleChange:this.handleChange,formData:this.state.newData,formState:this.state.formState}))),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.closeDialog,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.closeDialog,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDelete,color:"primary"},"Delete"))))}}]),t}(r.a.Component)),El=Dl,bl={properties:{Factory:{type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Factory cannot be empty."}},Date:{type:["date","string"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Date cannot be empty."}},WorkdayType:{type:["string","number"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Workday type cannot be empty."}},Shift:{type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Shift cannot be empty."}},Details:{type:"array",minItems:1,messages:{minItems:"Please enter details."}}}},Sl=a(24),Ol={validateFields:function(e){return Sl.validate(e,bl,{cast:!0})},get:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="production/"+e,a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 2:case"end":return a.stop()}}))},getByUid:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="production/"+e,a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 2:case"end":return a.stop()}}))},getFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("production-filter/").concat(e),a.next=3,l.a.awrap(We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 3:return a.abrupt("return",a.sent);case 4:case"end":return a.stop()}}))},update:function(e,t){return Qe("production/"+e,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Updated successfully.",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,errors:e.data.errors,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="production/"+e,n.abrupt("return",He(a,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,message:"Added successfully.",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("production/"+e).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))}},kl=Ol,wl=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={productGradeData:[],disabled:!1},a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){void 0!==this.props.countryId&&""!==this.props.countryId&&""!==this.props.buyerId&&this.fetchProductGradeData(this.props.countryId)}},{key:"componentDidUpdate",value:function(e){(this.props.countryId!==e.countryId||this.props.buyerId!==e.buyerId&&""!==this.props.buyerId)&&void 0!==this.props.countryId&&""!==this.props.countryId&&this.fetchProductGradeData(this.props.countryId),this.props.ncHandling!==e.ncHandling&&void 0!==this.props.ncHandling&&""!==this.props.ncHandling&&(["Reprocess","Rework","DP"].includes(this.props.ncHandling.NCHandlingName)?(void 0===this.props.rowData?this.props.handleChange("BB",this.props.propertyName):this.props.handleChange("",this.props.propertyName,this.props.rowData),this.setState({disabled:!0})):"Switch"===this.props.ncHandling.NCHandlingName&&""!==this.props.orignalGrade?(void 0===this.props.rowData?this.props.handleChange(this.props.orignalGrade,this.props.propertyName):this.props.handleChange(this.props.orignalGrade,this.props.propertyName,this.props.rowData),this.setState({disabled:!1})):this.setState({disabled:!1}))}},{key:"fetchProductGradeData",value:function(e){var t=this;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:Gn.getForDropDown("?countryId=".concat(e).concat(void 0===this.props.buyerId?"":"&buyerId="+this.props.buyerId)).then((function(e){!0===e.code&&t.setState({productGradeData:e.data})})).catch((function(e){throw e}));case 1:case"end":return a.stop()}}),null,this)}},{key:"renderOptions",value:function(){return this.state.productGradeData.map((function(e,t){return r.a.createElement(et.a,{label:"Select Grade",value:e._id,key:e._id,name:e.GradeCode},e.GradeName)}))}},{key:"handleChange",value:function(e,t){var a=this.state.productGradeData.find((function(t){return t._id===e.target.value}));void 0!==a&&(void 0===this.props.rowData?this.props.handleChange(a,t):this.props.handleChange(a,t,this.props.rowData))}},{key:"render",value:function(){var e=this;return r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense",disabled:void 0!==this.props.ncHandling&&["Reprocess","Rework","DP"].includes(this.props.ncHandling.NCHandlingName)},r.a.createElement(Ea.a,{shrink:!0,htmlFor:"productGrade",required:!0,error:!this.props.formControl.valid},"Product Grade"),r.a.createElement(ba.a,{id:this.props.propertyName,value:void 0===this.props.rowData?void 0===this.props.selectedValue._id?this.props.selectedValue:this.props.selectedValue._id:0===Object.keys(this.props.rowData).length||void 0===this.props.rowData[this.props.propertyName]||null===this.props.rowData[this.props.propertyName]?"":void 0===this.props.rowData[this.props.propertyName]._id?this.props.rowData[this.props.propertyName]:this.props.rowData[this.props.propertyName]._id,error:!this.props.formControl.valid,onChange:function(t){return e.handleChange(t,e.props.propertyName)},displayEmpty:!0},r.a.createElement(et.a,{value:""},r.a.createElement("em",null,this.props.isRework?"Block Rubber":"Select grade"," ")),this.renderOptions()),r.a.createElement(Sa.a,{error:!this.props.formControl.valid,style:{display:this.props.formControl.valid?"none":""}},this.props.formControl.valid?"":this.props.formControl.message))}}]),t}(n.Component),Fl=wl,xl=(a(871),{properties:{Factory:{type:["string","object"],required:!0,allowEmpty:!1,conform:function(e){return!(0===e||""===e||void 0===e)},messages:{conform:"Factory cannot be empty.",allowEmpty:"Factory cannot be empty."}},LotNumber:{description:"",type:"string",required:!0,allowEmpty:!1,messages:{allowEmpty:"Lot number cannot be empty.",conform:"Lot number cannot be empty.",required:"Lot number cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},Date:{description:"",type:"any",required:!0,allowEmpty:!1,messages:{allowEmpty:"Lot date cannot be empty.",conform:"Lot date cannot be empty.",required:"Lot date cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},RMGrade:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Lot grade cannot be empty.",conform:"Lot grade cannot be empty.",required:"Lot grade cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},CreatedAt:{type:"any",default:new Date},CreatedBy:{type:"string",default:""},LastUpdatedAt:{type:"any",default:new Date},LastUpdatedBy:{type:"string",default:""}}}),Tl=a(24),Nl={validateFields:function(e){return Tl.validate(e,xl,{cast:!0})},get:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="rLot/"+e,a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},getFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("rLot-filter/").concat(e),a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},getOne:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("rLot/").concat(e),a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},update:function(e,t){return Qe("rLot/"+e,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Updated",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="rLot/"+e,n.abrupt("return",He(a,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Added",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,formValid:!0,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("rLot/"+e).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))}},jl=Nl,Pl=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={rLotData:[]},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){void 0!==this.props.selectedFactory&&""!==this.props.selectedFactory&&this.fetchRLotData(this.props.selectedFactory)}},{key:"componentDidUpdate",value:function(e){this.props.selectedFactory!==e.selectedFactory&&void 0!==this.props.selectedFactory&&""!==this.props.selectedFactory&&this.fetchRLotData(this.props.selectedFactory)}},{key:"fetchRLotData",value:function(e){var t=this;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:a.t0=this.props.for,a.next="Allocation"===a.t0?3:"Production"===a.t0?6:9;break;case 3:return a.next=5,l.a.awrap(Do("getRLotForAllocationDropDownData/?Factory=".concat(e).concat(void 0===this.props.allocationId?"":"&AllocationId="+this.props.allocationId)).then((function(e){!0===e.code&&t.setState({rLotData:e.data})})));case 5:return a.abrupt("break",11);case 6:return a.next=8,l.a.awrap(Do("getRLotForProductionDropDownData/?Factory=".concat(e)).then((function(e){!0===e.code&&t.setState({rLotData:e.data})})));case 8:return a.abrupt("break",11);case 9:return a.next=11,l.a.awrap(jl.getFilter("?Factory=".concat(e)).then((function(e){!0===e.code&&t.setState({rLotData:e.data})})));case 11:case"end":return a.stop()}}),null,this)}},{key:"renderOptions",value:function(){return this.state.rLotData.map((function(e,t){return r.a.createElement(et.a,{label:"Select R Lot",value:e._id,key:e._id,name:e.LotNumber},e.LotNumber)}))}},{key:"handleChange",value:function(e,t){var a=this.state.rLotData.find((function(t){return t._id===e.target.value}));void 0!==a?this.props.handleChange(a,this.props.propertyName,this.props.required):this.props.handleChange("",this.props.propertyName,this.props.required)}},{key:"render",value:function(){var e=this,t=!this.props.formControl.valid;return r.a.createElement(ya.a,{style:{width:"100%",margin:4,paddingTop:7}},r.a.createElement(Ea.a,{shrink:!0,htmlFor:"rLot",required:this.props.required,error:t},"R Lot"),r.a.createElement(ba.a,{id:this.props.propertyName,value:void 0===this.props.selectedValue||null===this.props.selectedValue?"":this.props.selectedValue,error:t,onChange:function(t){return e.handleChange(t,e.props.propertyName)},margin:"dense",displayEmpty:!0},r.a.createElement(et.a,{value:""},r.a.createElement("em",null,"Select R Lot")),this.renderOptions()),r.a.createElement(Sa.a,{error:t,style:{display:t?"":"none"}},this.props.required&&""===this.props.selectedValue?"R Lot cannot be empty.":this.props.formControl.valid?"":this.props.formControl.message))}}]),t}(r.a.Component),Al=Pl,Ml=Al,_l={properties:{Grade:{type:["string","object"],required:!0,allowEmpty:!1,messages:{required:"Grade value is required.",allowEmpty:"Grade cannot be empty."}},Quantity:{type:"number",required:!0,allowEmpty:!1,exclusiveMinimum:0,messages:{allowEmpty:"Quantity cannot be empty.",exclusiveMinimum:"Quantity must be greater than 0."}}}},Il=a(24),Rl={validateFields:function(e){return Il.validate(e,_l,{cast:!0})}},Ll=Rl,Vl=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).handleClickDelClose=function(){a.setState({dialogOpen:!1,currentDeleteData:null})},a.state={formControls:{Grade:{valid:!0,message:"",value:""},Quantity:{valid:!0,message:"",value:""},RLot:{valid:!0,message:"",value:""}},columns:[{field:"_id",hidden:!0},{title:"Grade",field:"Grade",render:function(e){return r.a.createElement("span",null,void 0===e.Grade?"":e.Grade.GradeName)},editComponent:function(e){return r.a.createElement(Fl,{handleChange:a.handleChange,formControl:a.state.formControls.Grade,propertyName:"Grade",rowData:e.rowData,countryId:a.props.countryId,selectedValue:a.state.formControls.Grade.value})}},{title:"Qty (Kg)",field:"Quantity",initialEditValue:0,render:function(e){return r.a.createElement(Xa.a,{value:e.Quantity,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})},editComponent:function(e){return r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Xa.a,{margin:"dense",id:"Quantity",label:"Qty (Kg)",customInput:ge.a,error:!a.state.formControls.Quantity.valid,defaultValue:e.rowData.Quantity,onValueChange:function(t){return a.handleChange(t.floatValue,"Quantity",e.rowData)},onFocus:function(e){e.target.select()},decimalScale:2,fixedDecimalScale:!0}),r.a.createElement(Sa.a,{error:!a.state.formControls.Quantity.valid,style:{display:a.state.formControls.Quantity.valid?"none":""}},a.state.formControls.Quantity.message))}},{title:"R. Lot",field:"RLot",render:function(e){return r.a.createElement("span",null,void 0===e.RLot||null===e.RLot?"":e.RLot.LotNumber)},editComponent:function(e){return r.a.createElement(Ml,{selectedValue:"object"===typeof e.rowData.RLot&&null!==e.rowData.RLot&&void 0!==e.rowData.RLot?e.rowData.RLot._id:"",formControl:a.state.formControls.RLot,propertyName:"RLot",required:!1,handleChange:function(t){a.handleChange(t,"RLot",e.rowData)},selectedFactory:a.props.factoryId,for:"Production"})}}],data:e.data,formState:{valid:!0,errors:[]},dialogOpen:!1,currentDeleteData:null,deleteMessage:"",alertClass:"",alertOpen:!1,alertMessage:"",operator:"Admin"},a.handleClickDelClose=a.handleClickDelClose.bind(Object(Pe.a)(a)),a.handleClickDelOpen=a.handleClickDelOpen.bind(Object(Pe.a)(a)),a.OnDelete=a.OnDelete.bind(Object(Pe.a)(a)),a.snackOpen=a.snackOpen.bind(Object(Pe.a)(a)),a.snackClose=a.snackClose.bind(Object(Pe.a)(a)),a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"snackOpen",value:function(e,t){this.setState({alertOpen:!0,alertMessage:e,alertClass:t})}},{key:"snackClose",value:function(){this.setState({alertOpen:!1,alertMessage:"",alertClass:""})}},{key:"handleChange",value:function(e,t,a){var n=this.state.formControls;"RLot"===t||""!==e&&null!==e&&void 0!==e?(n[t].valid=!0,n[t].message="",n[t].value=e):(n[t].valid=!1,n[t].message="".concat(t," cannot be empty")),a[t]=e,this.setState({formControls:n})}},{key:"handleClickDelOpen",value:function(e,t){this.setState({dialogOpen:!0,currentDeleteData:t,dialogMessage:r.a.createElement("span",null,"Are you sure to delete this record ?")})}},{key:"OnDelete",value:function(){if(null!==this.state.currentDeleteData&&null!==this.state.currentDeleteData){var e=Object(je.a)(this.state.data),t=e.indexOf(this.state.currentDeleteData);e.splice(t,1),this.setState({data:e}),this.props.handleDetailChange(e,"Details"),this.handleClickDelClose()}}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,null,r.a.createElement(Ve.a,{title:"Production Detail",columns:this.state.columns,data:this.state.data,editable:{onRowAdd:function(t){return new Promise((function(a,n){setTimeout((function(){var r=Object(je.a)(e.state.data),o=e.state.formControls,s=Ll.validateFields(t);s.valid?(t.LastUpdatedBy=e.state.operator,t.CreatedBy=e.state.operator,r.push(t),e.props.handleDetailChange(r,"Details"),e.setState({data:r},(function(){return a()}))):(n(),s.errors.map((function(e){o[e.property].valid=!1,o[e.property].message=e.message})),e.setState({formControls:o}))}),500)}))},onRowUpdate:function(t,a){return new Promise((function(a,n){setTimeout((function(){var r=Object(je.a)(e.state.data),o=Object(me.a)({},e.state.formControls),s=Ll.validateFields(t);if(s.valid){t.LastUpdatedBy=e.state.operator;var i=r.find((function(e){return e._id===t._id})),l=r.indexOf(i);r[l]=t,e.props.handleDetailChange(r,"Details"),e.setState({data:r},(function(){return a()}))}else n(),s.errors.map((function(e){o[e.property].valid=!1,o[e.property].message=e.message})),e.setState({formControls:o})}),500)}))}},actions:[{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){}},{icon:"delete",tooltip:"Delete",onClick:function(t,a){return e.handleClickDelOpen(t,a)}}],options:{search:!1,actionsColumnIndex:-1}}),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.handleClickDelClose,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.handleClickDelClose,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:function(){return e.OnDelete()},color:"primary"},"Delete"))))}}]),t}(r.a.Component),Bl=Vl,Ul=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={formControls:{Factory:{valid:!0,message:"",value:a.props.formData.Factory},Date:{valid:!0,message:"",value:new Date(a.props.formData.Date)},WorkdayType:{valid:!0,message:"",value:a.props.formData.WorkdayType},Shift:{valid:!0,message:"",value:a.props.formData.Shift},OutputWetLine:{valid:!0,message:"",value:a.props.formData.OutputWetLine},OutputDry:{valid:!0,message:"",value:a.props.formData.OutputDry},Remarks:{valid:!0,message:"",value:a.props.formData.Remarks},Details:{valid:!0,message:"",value:a.props.formData.Details}},formState:{valid:!0,dirty:!1,errors:[]},workdayTypeData:[]},a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initWorkdayTypeOptions()}},{key:"initWorkdayTypeOptions",value:function(){var e=this;Oa("workdayType.json").then((function(e){return e.data})).then((function(t){e.setState({workdayTypeData:t.WorkdayType})}))}},{key:"handleChange",value:function(e,t){var a=this.state.formControls,n=this.state.formState;void 0===e||0===e.length?(a[t].valid=!1,a[t].message="".concat(t," cannot be empty.")):(a[t].valid=!0,a[t].message=""),this.props.handleChange(e,t),a[t].value=e,n.dirty=!0,this.setState({formControls:a,formState:n})}},{key:"renderWorkdayTypeOptions",value:function(){return this.state.workdayTypeData.map((function(e,t){return r.a.createElement(et.a,{value:e.Value,key:e.Value,name:e.Name},e.Name)}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"form-container"},r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-evenly",alignItems:"center",md:6,xs:12,sm:12,xl:8,lg:8},r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Hr,{handleChange:this.handleChange,selectedValue:this.state.formControls.Factory.value,formControl:this.state.formControls.Factory,propertyName:"Factory"})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Da.a,{required:!0,format:"dd-MMM-yyyy",label:"Date",value:this.state.formControls.Date.value,onChange:function(t){e.handleChange(t,"Date")},disableFuture:!0})),r.a.createElement(Sa.a,{error:!this.state.formControls.Date.valid,style:{display:this.state.formControls.Date.valid?"none":""}},this.state.formControls.Date.message)),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Ea.a,{required:!0,shrink:!0,error:!this.state.formControls.WorkdayType.valid},"Workday Type"),r.a.createElement(ba.a,{required:!0,id:"WorkdayType",value:this.state.formControls.WorkdayType.value,error:!this.state.formControls.WorkdayType.valid,onChange:function(t){return e.handleChange(t.target.value,"WorkdayType")},displayEmpty:!0},r.a.createElement(et.a,{value:""},r.a.createElement("em",null,"Select")),this.renderWorkdayTypeOptions()),r.a.createElement(Sa.a,{error:!this.state.formControls.WorkdayType.valid,style:{display:this.state.formControls.WorkdayType.valid?"none":""}},this.state.formControls.WorkdayType.message)),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(ns,{handleChange:this.handleChange,selectedValue:this.state.formControls.Shift.value,formControl:this.state.formControls.Shift,propertyName:"Shift",factoryId:void 0===this.state.formControls.Factory.value._id?this.state.formControls.Factory.value:this.state.formControls.Factory.value._id,autoSelect:void 0===this.props.formData._id})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Xa.a,{id:"OutputWetLine",label:"Production Output - Wetline",customInput:ge.a,defaultValue:this.state.formControls.OutputWetLine.value,onValueChange:function(t){return e.handleChange(t.floatValue,"OutputWetLine")},onFocus:function(e){e.target.select()},decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Xa.a,{id:"OutputDry",label:"Production Output - Dryer/DP",customInput:ge.a,defaultValue:this.state.formControls.OutputDry.value,onValueChange:function(t){return e.handleChange(t.floatValue,"OutputDry")},onFocus:function(e){e.target.select()},decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(ge.a,{id:"Remarks",label:"Remarks",defaultValue:this.state.formControls.Remarks.value,onChange:function(t){return e.handleChange(t.target.value,"Remarks")},multiline:!0}))),r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-evenly",alignItems:"center",md:6,xs:12,sm:12,xl:8,lg:8},r.a.createElement("div",{style:{overflowX:"scroll",width:"100%"}},r.a.createElement(Bl,{data:this.state.formControls.Details.value,handleDetailChange:this.handleChange,factoryId:this.state.formControls.Factory.value._id,countryId:void 0===this.state.formControls.Factory.value.FctyCountry?"":void 0===this.state.formControls.Factory.value.FctyCountry._id?this.state.formControls.Factory.value.FctyCountry:this.state.formControls.Factory.value.FctyCountry._id}))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=t.formControls;return e.formState.valid||Array.isArray(e.formState.errors)&&e.formState.errors.map((function(e){a[e.property].valid=!1,a[e.property].message=e.message})),{formState:e.formState,formControls:a}}}]),t}(r.a.Component),ql=Ul,Gl={Factory:"",Date:new Date(Date.now()),WorkdayType:"",Shift:"",OutputWetLine:0,OutputDry:0,Remarks:"",Details:[],CreatedAt:new Date(Date.now()).toLocaleString(),CreatedBy:"Admin",LastUpdatedAt:new Date(Date.now()).toLocaleString(),LastUpdatedBy:"Admin"},Wl=Gl,Hl=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).openDialog=function(e){return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.awrap(ka("confirmation","delete"));case 2:t.sent,a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:e,dialogMessage:r.a.createElement("span",null,"Are you sure to delete this record factory"," ",r.a.createElement("b",null,e.Factory.FctyCode," "),"in date"," ",r.a.createElement("b",null,new Date(e.Date).toLocaleString().split(",")[0]," "),"? This cannot be undone.")});case 4:case"end":return t.stop()}}))},a.closeDialog=function(){a.setState({dialogOpen:!1,currentDeleteData:null,dialogMessage:""})},a.openForm=function(e){void 0===e?a.setState({actionStatus:"Add",newData:Object(me.a)({},Wl)}):a.setState({actionStatus:"Update",newData:Object(me.a)({},e)}),a.setState({formOpen:!0,formState:{valid:!0,dirty:!1,errors:[]}})},a.closeForm=function(){a.setState({formOpen:!1,newData:{},actionStatus:""})},a.onSave=function(){var e=a.state.formState,t=Object(me.a)({},a.state.newData);"object"===typeof t.Factory&&(t.Factory=t.Factory._id);var n=kl.validateFields(t);if(n.valid){var r=Object(je.a)(a.state.data);"Add"===a.state.actionStatus?(t.LastUpdatedBy=a.state.operator,t.CreatedBy=a.state.operator,kl.add("",t).then((function(t){!0===t.code?(e.valid=!0,r.push(t.data),a.setState({data:r}),a.closeForm(),a.snackOpen("Daily production created successfully!","success")):(e.valid=!1,e.errors=t.errors,void 0!==t.errors.find((function(e){return"Details"===e.property}))?a.snackOpen(t.errors.find((function(e){return"Details"===e.property})).message,"error"):a.snackOpen("Please fix the error(s) highlighted to save the details!","error"))})).catch((function(e){a.snackOpen("Oops, something went wrong while processing your request!","error")}))):(t.LastUpdatedBy=a.state.operator,kl.update("",t).then((function(n){if(!0===n.code){e.valid=!0;var o=r.find((function(e){return e._id===t._id})),s=r.indexOf(o);r[s]=n.data,a.setState({data:r}),a.closeForm(),a.snackOpen("Daily production updated successfully!","success")}else e.valid=!1,e.errors=n.errors,void 0!==n.errors.find((function(e){return"Details"===e.property}))?a.snackOpen(n.errors.find((function(e){return"Details"===e.property})).message,"error"):a.snackOpen("Please fix the error(s) highlighted to save the details!","error")})).catch((function(e){a.snackOpen("Oops, something went wrong while processing your request!","error")})))}else{e.valid=!1;var o=n.errors.map((function(e){var t={};return t.property=e.property,t.message=e.message,t}));e.errors=o,void 0!==o.find((function(e){return"Details"===e.property}))?a.snackOpen(o.find((function(e){return"Details"===e.property})).message,"error"):a.snackOpen("Please fix the error(s) highlighted to save the details!","error")}a.setState({formState:e})},a.onDelete=function(){null!==a.state.currentDeleteData&&kl.delete("".concat(a.state.currentDeleteData._id)).then((function(e){if(!0===e.code){var t=Object(je.a)(a.state.data),n=t.indexOf(a.state.currentDeleteData);t.splice(n,1),a.snackOpen("Successfully Deleted!","success"),a.closeDialog(),a.setState({data:t})}else a.snackOpen("Oops, something went wrong while processing your request!","error")}))},a.onEdit=function(e){a.openForm(e)},a.state={columns:[{field:"_id",hidden:!0},{title:"Factory",field:"Factory",render:function(e){return r.a.createElement("span",null,void 0===e.Factory?"":e.Factory.FctyCode)}},{title:"Date",field:"Date",render:function(e){return r.a.createElement("span",null,new Date(e.Date).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric"}))}},{title:"Workday Type",field:"WorkdayType",lookup:{}},{title:"Shift",field:"Shift",render:function(e){return r.a.createElement("span",null,void 0===e.Shift?"":e.Shift.Name)}},{title:"Prod. Output -Wetline",field:"OutputWetLine",render:function(e){return r.a.createElement(Xa.a,{value:e.OutputWetLine,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"Prod. Output -DP",field:"OutputDry",render:function(e){return r.a.createElement(Xa.a,{value:e.OutputDry,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"Grade",render:function(e){return r.a.createElement(E.a,null,e.Details.map((function(e,t){return r.a.createElement(b.a,{divider:!0,key:e._id},r.a.createElement(S.a,{primary:e.Grade.GradeCode}))})))}},{title:"Total Production",render:function(e){return r.a.createElement(E.a,null,e.Details.map((function(e,t){return r.a.createElement(b.a,{divider:!0,key:e.Quantity},r.a.createElement(S.a,{primary:r.a.createElement(Xa.a,{value:e.Quantity,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}))})))}},{title:"Total Good Production",render:function(e){return r.a.createElement(E.a,null,e.Details.map((function(e,t){return r.a.createElement(b.a,{divider:!0,key:void 0===e.GoodProdQty?e.Quantity:e.GoodProdQty},r.a.createElement(S.a,{primary:r.a.createElement(Xa.a,{value:void 0===e.GoodProdQty?e.Quantity:e.GoodProdQty,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}))})))}},{title:"Remarks",field:"Remarks"},{title:"Operator",field:"LastUpdatedBy"},{title:"Last Updated",field:"LastUpdatedAt",render:function(e){return r.a.createElement("span",null,void 0===e?"":new Date(e.LastUpdatedAt).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}))}}],data:[],currentDeleteData:null,newData:Wl,formOpen:!1,dialogOpen:!1,dialogMessage:"",disabled:!1,actionStatus:"",formState:{valid:!0,dirty:!1,errors:[]},operator:"Admin"},a.openDialog=a.openDialog.bind(Object(Pe.a)(a)),a.closeDialog=a.closeDialog.bind(Object(Pe.a)(a)),a.openForm=a.openForm.bind(Object(Pe.a)(a)),a.closeForm=a.closeForm.bind(Object(Pe.a)(a)),a.snackOpen=a.snackOpen.bind(Object(Pe.a)(a)),a.snackClose=a.snackClose.bind(Object(Pe.a)(a)),a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initProduction(),this.initWorkdayTypeData()}},{key:"initWorkdayTypeData",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:Oa("WorkdayType.json").then((function(e){return e.data})).then((function(t){var a={};t.WorkdayType.forEach((function(e){return a[e.Value]=e.Name}));var n=Object(je.a)(e.state.columns),r=n.findIndex((function(e){return"WorkdayType"===e.field}));n[r].lookup=a,e.setState({columns:n})}));case 1:case"end":return t.stop()}}))}},{key:"initProduction",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.awrap(kl.get("").then((function(t){!0===t.code&&e.setState({data:t.data})})));case 2:case"end":return t.stop()}}))}},{key:"handleChange",value:function(e,t){var a=this.state.newData;a[t]=e;var n=this.state.formState;n.valid=!0,this.setState({newData:a,formState:n})}},{key:"snackOpen",value:function(e,t){this.setState({alertOpen:!0,alertMessage:e,alertClass:t})}},{key:"snackClose",value:function(){this.setState({alertOpen:!1,alertMessage:"",alertClass:"",currentDeleteData:null})}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{style:{margin:"20px 20px 10px 0px"}},r.a.createElement(Ve.a,{title:"Daily Production",columns:this.state.columns,data:this.state.data,icons:{Filter:function(){return r.a.createElement("div",null)}},components:{Toolbar:function(t){return r.a.createElement("div",null,r.a.createElement(Le.MTableToolbar,t),r.a.createElement("div",{style:{padding:"0px 15px"}},r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:function(){return e.openForm(t.rowData)},"aria-label":"add"},r.a.createElement(wt.a,null))))}},actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.data,columns:e.state.columns,fileName:"Production"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.initProduction()}},{icon:"edit",tooltip:"Edit",onClick:function(t,a){return e.openForm(a)}},{icon:"delete",tooltip:"Delete",onClick:function(t,a){return e.openDialog(a)}}],options:{}}),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:6e3,open:this.state.alertOpen,onClose:this.snackClose,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}),r.a.createElement(Ae.a,{fullScreen:!0,open:this.state.formOpen,onClose:this.closeForm,TransitionComponent:this.Transition},r.a.createElement(w.a,{className:"appBar"},r.a.createElement(F.a,null,r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:this.closeForm,"aria-label":"close"},r.a.createElement(Vt.a,null)),r.a.createElement(x.a,{variant:"h6",className:"app-title"},"Daily Production Details"),r.a.createElement(he.a,{color:"inherit",disabled:this.state.disabled,onClick:this.onSave},"save"))),r.a.createElement(_e.a,null,r.a.createElement(ql,{handleChange:this.handleChange,formData:this.state.newData,formState:this.state.formState}))),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.closeDialog,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.closeDialog,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDelete,color:"primary"},"Delete"))))}}]),t}(r.a.Component),Ql=Hl,zl={properties:{ProdDetail:{type:"string",required:!0,allowEmpty:!1,messages:{required:"Production detail cannot be empty",allowEmpty:"Production detail cannot be empty"}},NCType:{type:["string","object"],required:!0,allowEmpty:!1,messages:{required:"NC type cannot be empty",allowEmpty:"NC type cannot be empty"}},Quantity:{type:"number",required:!0,allowEmpty:!1,exclusiveMinimum:0,messages:{required:"Quantity must be greater than 0.",allowEmpty:"Quantity must be greater than 0.",exclusiveMinimum:"Quantity must be greater than 0."}}}},Yl=a(24),Kl={validateFields:function(e){return Yl.validate(e,zl,{cast:!0})},get:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="nc/"+e,a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 2:case"end":return a.stop()}}))},getFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("nc-filter/").concat(e),a.next=3,l.a.awrap(We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 3:return a.abrupt("return",a.sent);case 4:case"end":return a.stop()}}))},update:function(e,t){return Qe("nc/"+e,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Updated",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="nc/"+e,n.abrupt("return",He(a,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Added",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,formValid:!0,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("nc/"+e).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))},getByFactoryAndStatus:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("nc-filter/").concat(e),a.next=3,l.a.awrap(We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 3:return a.abrupt("return",a.sent);case 4:case"end":return a.stop()}}))}},Jl=Kl,Zl=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={ncTypeData:[]},a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a.fetchNCTypeData=a.fetchNCTypeData.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){""!==this.props.ncCategoryId?this.fetchNCTypeData(this.props.ncCategoryId):void 0!==this.props.rowData.NCType&&this.fetchNCTypeData(this.props.rowData.NCType.NCCategory._id)}},{key:"componentDidUpdate",value:function(e){this.props.ncCategoryId!==e.ncCategoryId&&void 0!==this.props.ncCategoryId&&""!==this.props.ncCategoryId&&this.fetchNCTypeData(this.props.ncCategoryId)}},{key:"fetchNCTypeData",value:function(e){var t=this;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:Vn.getNcTypeFilter("?NCCategory=".concat(e)).then((function(e){!0===e.code&&t.setState({ncTypeData:e.data})})).catch((function(e){throw e}));case 1:case"end":return a.stop()}}))}},{key:"renderOptions",value:function(){return this.state.ncTypeData.map((function(e,t){return r.a.createElement(et.a,{label:"Select NC Type",value:e._id,key:e.Name,name:e.Name},e.Name)}))}},{key:"handleChange",value:function(e,t,a){var n=this.state.ncTypeData.find((function(t){return t._id===e}));void 0!==n&&this.props.handleChange(n,t,a)}},{key:"render",value:function(){var e=this;return r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(Ea.a,{shrink:!0,required:!0,error:!this.props.fromControl.valid},"NC Type"),r.a.createElement(ba.a,{id:"nctype",value:0===Object.keys(this.props.rowData).length||void 0===this.props.rowData.NCType?"":void 0===this.props.rowData.NCType._id?this.props.rowData.NCType:this.props.rowData.NCType._id,error:!this.props.fromControl.valid,onChange:function(t){return e.handleChange(t.target.value,"NCType",e.props.rowData)},displayEmpty:!0},r.a.createElement(et.a,{value:""},r.a.createElement("em",null,"Select NC Type ")),this.renderOptions()),r.a.createElement(Sa.a,{error:!this.props.fromControl.valid,style:{display:this.props.fromControl.valid?"none":""}},this.props.fromControl.valid?"":this.props.fromControl.message))}}]),t}(n.Component),Xl=Zl,$l=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).handleClickDelClose=function(){a.setState({dialogOpen:!1,currentDeleteData:null})},a.tableRef=r.a.createRef(),a.state={filterFormControls:{Factory:{valid:!0,message:"",value:""},Date:{valid:!0,message:"",value:new Date},Shift:{valid:!0,message:"",value:""}},formControls:{ProdDetail:{valid:!0,message:"",value:""},NCCategory:{valid:!0,message:"",value:""},NCType:{valid:!0,message:"",value:""},Quantity:{valid:!0,message:"",value:0},Remarks:{valid:!0,message:"",value:""}},columns:[{title:"NC Category",field:"NCCategory",render:function(e){return r.a.createElement("span",null,void 0===e.NCType?"":e.NCType.NCCategory.Name)},editComponent:function(e){return r.a.createElement(In,{rowData:void 0===e.rowData.NCType?e.rowData:e.rowData.NCType,fromControl:a.state.formControls.NCCategory,handleChange:a.handleChange})}},{title:"NC Type",field:"NCType",render:function(e){return r.a.createElement("span",null,void 0===e.NCType?"":e.NCType.Name)},editComponent:function(e){return r.a.createElement(Xl,{rowData:e.rowData,fromControl:a.state.formControls.NCType,handleChange:a.handleChange,ncCategoryId:""===a.state.formControls.NCCategory.value?"":a.state.formControls.NCCategory.value._id})}},{title:"Qty (kg)",field:"Quantity",initialEditValue:0,render:function(e){return r.a.createElement(Xa.a,{value:e.Quantity,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})},editComponent:function(e){return r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Xa.a,{id:"Quantity",label:"Quantity",customInput:ge.a,error:!a.state.formControls.Quantity.valid,defaultValue:e.rowData.Quantity,onValueChange:function(t){return a.handleChange(t.floatValue,"Quantity",e.rowData)},onFocus:function(e){e.target.select()},decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0}),r.a.createElement(Sa.a,{error:!a.state.formControls.Quantity.valid,style:{display:a.state.formControls.Quantity.valid?"none":""}},a.state.formControls.Quantity.message))}},{title:"Remarks",field:"Remarks",editComponent:function(e){return r.a.createElement(ge.a,{margin:"dense",id:"Remarks",label:"Remarks",type:"text",defaultValue:e.value,onChange:function(t){a.handleChange(t.target.value,"Remarks",e.rowData)}})}},{title:"Status",field:"Status",lookup:{},editable:"never"},{title:"Handled Qty (kg)",render:function(e){return void 0===e?"":r.a.createElement(Xa.a,{value:e.HandledQty,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})},editable:"never"},{title:"Balance Qty (kg)",render:function(e){return void 0===e?"":r.a.createElement(Xa.a,{value:e.Quantity-e.HandledQty,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})},editable:"never"}],data:[],dialogOpen:!1,formState:{valid:!0,dirty:!1,errors:[]},ncStatus:[],Details:[],selectedDetailId:"",selectedNCCat:""},a.handleClickDelClose=a.handleClickDelClose.bind(Object(Pe.a)(a)),a.handleClickDelOpen=a.handleClickDelOpen.bind(Object(Pe.a)(a)),a.OnDelete=a.OnDelete.bind(Object(Pe.a)(a)),a.snackOpen=a.snackOpen.bind(Object(Pe.a)(a)),a.snackClose=a.snackClose.bind(Object(Pe.a)(a)),a.handleFilterChange=a.handleFilterChange.bind(Object(Pe.a)(a)),a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a.resetFormControls=a.resetFormControls.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initStatusData()}},{key:"initStatusData",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:Oa("ncStatus.json").then((function(e){return e.data})).then((function(t){var a={};t.NCStatus.forEach((function(e){return a[e.Value]=e.Name}));var n=Object(je.a)(e.state.columns),r=n.findIndex((function(e){return"Status"===e.field}));n[r].lookup=a,e.setState({columns:n})}));case 1:case"end":return t.stop()}}))}},{key:"snackOpen",value:function(e,t){this.setState({alertOpen:!0,alertMessage:e,alertClass:t})}},{key:"snackClose",value:function(){this.setState({alertOpen:!1,alertMessage:"",alertClass:""})}},{key:"handleClickDelOpen",value:function(e,t){this.setState({dialogOpen:!0,currentDeleteData:t,dialogMessage:r.a.createElement("span",null,"Are you sure to delete this record ",r.a.createElement("b",null,t.code)," ? This cannot be undone.")})}},{key:"OnDelete",value:function(){var e=this;null!==this.state.currentDeleteData?Jl.delete("".concat(this.state.currentDeleteData._id)).then((function(t){if(!0===t.code){var a=Object(je.a)(e.state.data),n=a.indexOf(e.state.currentDeleteData);a.splice(n,1),e.snackOpen("Successfully Deleted!","success"),e.handleClickDelClose(),e.setState({data:a})}else e.snackOpen("Oops, something went wrong while processing your request!","error")})):this.snackOpen("Please try again later!","info")}},{key:"handleFilterChange",value:function(e,t){var a=this,n=this.state.filterFormControls;n[t].value=e,this.setState({filterFormControls:n}),this.setState({selectedDetailId:""}),""!==this.state.filterFormControls.Factory.value&&""!==this.state.filterFormControls.Shift.value&&kl.getFilter("?Factory=".concat(this.state.filterFormControls.Factory.value._id,"&Shift=").concat(this.state.filterFormControls.Shift.value._id,"&Date=").concat(this.state.filterFormControls.Date.value.toISOString().split("T")[0])).then((function(e){!0===e.code&&e.data.length>0?a.setState({Details:e.data[0].Details}):a.setState({Details:[]})}))}},{key:"handleChange",value:function(e,t,a){var n=this.state.formControls;""===e||null===e||void 0===e?(n[t].valid=!1,n[t].message="".concat(t," cannot be empty")):("NCCategory"===t&&(n.NCType.valid=!0,n.NCType.message="",n.NCType.value=""),n[t].valid=!0,n[t].message="",n[t].value=e),a[t]=e,this.setState({formControls:n})}},{key:"handleDetailClick",value:function(e,t){this.setState({selectedDetailId:t}),this.initNC(t)}},{key:"initNC",value:function(e){var t=this;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,l.a.awrap(Jl.getFilter("?ProdDetail=".concat(e)).then((function(e){!0===e.code&&t.setState({data:e.data})})));case 2:case"end":return a.stop()}}))}},{key:"resetFormControls",value:function(){this.setState({formControls:{ProdDetail:{valid:!0,message:"",value:""},NCCategory:{valid:!0,message:"",value:""},NCType:{valid:!0,message:"",value:""},Quantity:{valid:!0,message:"",value:0},Remarks:{valid:!0,message:"",value:""}}})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"form-container"},r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-evenly",alignItems:"center",md:6,xs:12,sm:12,xl:8,lg:8},r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Hr,{handleChange:this.handleFilterChange,selectedValue:this.state.filterFormControls.Factory.value,formControl:this.state.filterFormControls.Factory,propertyName:"Factory"})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Da.a,{required:!0,format:"dd-MMM-yyyy",label:"Date",value:this.state.filterFormControls.Date.value,onChange:function(t){e.handleFilterChange(t,"Date")}}))),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(ns,{handleChange:this.handleFilterChange,selectedValue:this.state.filterFormControls.Shift.value,formControl:this.state.filterFormControls.Shift,propertyName:"Shift",factoryId:void 0===this.state.filterFormControls.Factory.value._id?this.state.filterFormControls.Factory.value:this.state.filterFormControls.Factory.value._id}))),r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-evenly",alignItems:"center",md:6,xs:12,sm:12,xl:8,lg:8},r.a.createElement(bn,{label:"Production Detail",style:{width:"100%"}},r.a.createElement(yt.a,null,r.a.createElement(Dt.a,null,r.a.createElement(Et.a,null,r.a.createElement(Ct.a,null,"Grade"),r.a.createElement(Ct.a,null,"Quantity"))),r.a.createElement(vt.a,null,this.state.Details.map((function(t){var a;return r.a.createElement(Et.a,(a={key:t.Grade.GradeCode,hover:!0,onClick:function(a){return e.handleDetailClick(a,t._id)}},Object(y.a)(a,"key",t._id),Object(y.a)(a,"selected",t._id===e.state.selectedDetailId),a),r.a.createElement(Ct.a,null,t.Grade.GradeCode),r.a.createElement(Ct.a,null,r.a.createElement(Xa.a,{value:t.Quantity,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})))})))))),r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-evenly",alignItems:"center",md:10,xs:12,sm:12,xl:10,lg:10},r.a.createElement("div",{style:{overflowX:"scroll",width:"100%",display:this.state.selectedDetailId.length>0?"":"none"}},r.a.createElement(Ve.a,{title:"NC (Off Spec Product)",columns:this.state.columns,data:this.state.data,editable:{onRowAdd:function(t){return new Promise((function(a,n){setTimeout((function(){var r=Object(je.a)(e.state.data),o=e.state.formControls;t.ProdDetail=e.state.selectedDetailId;var s=Jl.validateFields(t);s.valid?Jl.add("",t).then((function(t){!0===t.code?(r.push(t.data),e.snackOpen("Successfully added!","success"),e.setState({data:r},(function(){return a()})),Object.keys(o).forEach((function(e,t){o[e].value=""})),e.setState({formControls:o}),e.initNC(e.state.selectedDetailId)):(n(),t.errors.map((function(e){o[e.property].valid=!1,o[e.property].message=e.message})),e.setState({formControls:o}),e.snackOpen("Please fix the error(s) highlighted to save the details!","error"))})).catch((function(t){n(),e.snackOpen("Oops, something went wrong while processing your request!","error")})):(n(),s.errors.map((function(e){o[e.property].valid=!1,o[e.property].message=e.message})),e.setState({formControls:o}))}),500)}))},onRowUpdate:function(t,a){return new Promise((function(n,r){setTimeout((function(){var o=Object(je.a)(e.state.data),s=Object(me.a)({},e.state.formControls),i=Jl.validateFields(t);i.valid?Jl.update("",t).then((function(t){if(!0===t.code){var i=o.indexOf(a);o[i]=t.data,e.snackOpen("Successfully updated!","success"),e.setState({data:o},(function(){return n()})),Object.keys(s).forEach((function(e,t){s[e].value=""})),e.setState({formControls:s}),e.initNC(e.state.selectedDetailId)}else r(),t.errors.map((function(e){return s[e.property].valid=!1,s[e.property].message=e.message,s})),e.setState({formControls:s}),e.snackOpen("Please fix the error(s) highlighted to save the details!","error")})).catch((function(t){r(),e.snackOpen("Oops, something went wrong while processing your request!","error")})):(r(),i.errors.map((function(e){s[e.property].valid=!1,s[e.property].message=e.message})),e.setState({formControls:s}))}),500)}))}},actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.data,columns:e.state.columns,fileName:"NC"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){}},{icon:"delete",tooltip:"Delete",onClick:function(t,a){return e.handleClickDelOpen(t,a)}}],options:{search:!1,actionsColumnIndex:-1},tableRef:function(t){if(t){var a=t.onEditingCanceled;t.onEditingCanceled=function(t,n){e.resetFormControls(),a(t,n)}}}}),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:6e3,open:this.state.alertOpen,onClose:this.snackClose,message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.handleClickDelClose,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.handleClickDelClose,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:function(){return e.OnDelete()},color:"primary"},"Delete"))))))}}]),t}(r.a.Component),ec=$l,tc=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={ncHandlingData:[]},a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initNCHandlingData()}},{key:"initNCHandlingData",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.awrap(Zn.get("").then((function(t){!0===t.code&&e.setState({ncHandlingData:t.data})})).catch((function(e){throw e})));case 2:case"end":return t.stop()}}))}},{key:"renderOptions",value:function(){return this.state.ncHandlingData.map((function(e,t){return r.a.createElement(et.a,{label:"Select NC Handling",value:e._id,key:e.NCHandlingName,name:e.NCHandlingName},e.NCHandlingName)}))}},{key:"handleChange",value:function(e,t,a){var n=this.state.ncHandlingData.find((function(t){return t._id===e.target.value}));void 0!==n&&this.props.handleChange(n,t,a)}},{key:"render",value:function(){var e=this;return r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(Ea.a,{shrink:!0,required:!0,error:!this.props.fromControl.valid},"NC Handling"),r.a.createElement(ba.a,{id:"nchandling",value:void 0===this.props.rowData||0===Object.keys(this.props.rowData).length||void 0===this.props.rowData.NCHandling?"":void 0===this.props.rowData.NCHandling._id?this.props.rowData.NCHandling:this.props.rowData.NCHandling._id,error:!this.props.fromControl.valid,onChange:function(t){return e.handleChange(t,"NCHandling",e.props.rowData)},displayEmpty:!0},r.a.createElement(et.a,{value:""},r.a.createElement("em",null,"Select NC handling ")),this.renderOptions()),r.a.createElement(Sa.a,{error:!this.props.fromControl.valid,style:{display:this.props.fromControl.valid?"none":""}},this.props.fromControl.valid?"":this.props.fromControl.message))}}]),t}(n.Component),ac=tc,nc={properties:{NC:{type:"string",required:!0,allowEmpty:!1,messages:{required:"NC cannot be empty",allowEmpty:"NC cannot be empty"}},Date:{type:["date","string"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Date cannot be empty."}},NCHandling:{type:["string","object"],required:!0,allowEmpty:!1,messages:{required:"Rework handling cannot be empty",allowEmpty:"Rework handling cannot be empty"}},Quantity:{type:"number",required:!0,allowEmpty:!1,exclusiveMinimum:0,messages:{required:"Quantity must be greater than 0.",allowEmpty:"Quantity must be greater than 0.",exclusiveMinimum:"Quantity must be greater than 0."}}}},rc=a(24),oc={validateFields:function(e){return rc.validate(e,nc,{cast:!0})},get:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="ncRework/"+e,a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 2:case"end":return a.stop()}}))},getFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("ncRework-filter/").concat(e),a.next=3,l.a.awrap(We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 3:return a.abrupt("return",a.sent);case 4:case"end":return a.stop()}}))},update:function(e,t){return Qe("ncRework/"+e,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Updated",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="ncRework/"+e,n.abrupt("return",He(a,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Added",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,formValid:!0,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("ncRework/"+e).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))}},sc=oc,ic=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).handleClickDelClose=function(){a.setState({dialogOpen:!1,currentDeleteData:null})},a.state={filterFormControls:{Factory:{valid:!0,message:"",value:""},NCStatus:{valid:!0,message:"",value:2}},formControls:{Date:{valid:!0,message:"",value:new Date},NCHandling:{valid:!0,message:"",value:""},Grade:{valid:!0,message:"",value:""},Quantity:{valid:!0,message:"",value:0},Remarks:{valid:!0,message:"",value:""}},columns:[{title:"Date",field:"Date",initialEditValue:new Date,render:function(e){return r.a.createElement("span",null,void 0===e?"":new Date(e.Date).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric"}))},editComponent:function(e){return r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Da.a,{required:!0,format:"dd-MMM-yyyy",label:"Date",value:a.state.formControls.Date.value,onChange:function(t){a.handleChange(t,"Date",e.rowData)},disableFuture:!0})))}},{title:"Rework Handling",field:"NCHandling",render:function(e){return r.a.createElement("span",null,void 0===e.NCHandling?"":e.NCHandling.NCHandlingName)},editComponent:function(e){return r.a.createElement(ac,{rowData:e.rowData,fromControl:a.state.formControls.NCHandling,handleChange:a.handleChange})}},{title:"Grade",field:"Grade",render:function(e){return r.a.createElement("span",null,null===e.Grade?"Block Rubber":e.Grade.GradeName)},editComponent:function(e){return r.a.createElement(Fl,{handleChange:a.handleChange,formControl:a.state.formControls.Grade,propertyName:"Grade",rowData:e.rowData,countryId:""===a.state.selectedNC?"":a.state.selectedNC.ProdDetail.Grade.GradeCountry,ncHandling:""===a.state.formControls.NCHandling.value&&void 0!==e.rowData.NCHandling?e.rowData.NCHandling:a.state.formControls.NCHandling.value,orignalGrade:""===a.state.selectedNC?"":a.state.selectedNC.ProdDetail.Grade,isRework:!0})}},{title:"Qty (Kg)",field:"Quantity",initialEditValue:0,render:function(e){return r.a.createElement(Xa.a,{value:e.Quantity,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})},editComponent:function(e){return r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Xa.a,{id:"Quantity",label:"Quantity",customInput:ge.a,error:!a.state.formControls.Quantity.valid,defaultValue:e.rowData.Quantity,onValueChange:function(t){return a.handleChange(t.floatValue,"Quantity",e.rowData)},onFocus:function(e){e.target.select()},decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0}),r.a.createElement(Sa.a,{error:!a.state.formControls.Quantity.valid,style:{display:a.state.formControls.Quantity.valid?"none":""}},a.state.formControls.Quantity.message))}},{title:"Remarks",field:"Remarks",editComponent:function(e){return r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(ge.a,{id:"Remarks",label:"Remarks",defaultValue:a.state.formControls.Remarks.value,onChange:function(t){return a.handleChange(t.target.value,"Remarks",e.rowData)},multiline:!0}))}}],data:[],NCStatusData:[],dialogOpen:!1,formState:{valid:!0,dirty:!1,errors:[]},NCs:[],selectedNC:""},a.handleClickDelClose=a.handleClickDelClose.bind(Object(Pe.a)(a)),a.handleClickDelOpen=a.handleClickDelOpen.bind(Object(Pe.a)(a)),a.OnDelete=a.OnDelete.bind(Object(Pe.a)(a)),a.snackOpen=a.snackOpen.bind(Object(Pe.a)(a)),a.snackClose=a.snackClose.bind(Object(Pe.a)(a)),a.handleFilterChange=a.handleFilterChange.bind(Object(Pe.a)(a)),a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initStatusData()}},{key:"initStatusData",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:Oa("ncStatus.json").then((function(e){return e.data})).then((function(t){e.setState({NCStatusData:t.NCStatus})}));case 1:case"end":return t.stop()}}))}},{key:"snackOpen",value:function(e,t){this.setState({alertOpen:!0,alertMessage:e,alertClass:t})}},{key:"snackClose",value:function(){this.setState({alertOpen:!1,alertMessage:"",alertClass:""})}},{key:"handleClickDelOpen",value:function(e,t){this.setState({dialogOpen:!0,currentDeleteData:t,dialogMessage:r.a.createElement("span",null,"Are you sure to delete this record ",r.a.createElement("b",null,t.code)," ? This cannot be undone.")})}},{key:"OnDelete",value:function(){var e=this;null!==this.state.currentDeleteData?sc.delete("".concat(this.state.currentDeleteData._id)).then((function(t){if(!0===t.code){var a=Object(je.a)(e.state.data),n=a.indexOf(e.state.currentDeleteData);a.splice(n,1),e.snackOpen("Successfully Deleted!","success"),e.handleClickDelClose(),e.setState({data:a})}else e.snackOpen("Oops, something went wrong while processing your request!","error")})):this.snackOpen("Please try again later!","info")}},{key:"handleFilterChange",value:function(e,t){var a=this.state.filterFormControls;a[t].value=e,this.setState({filterFormControls:a}),this.setState({selectedNC:""}),""!==this.state.filterFormControls.Factory.value&&this.fetchNCData()}},{key:"handleChange",value:function(e,t,a){var n=this.state.formControls;n[t].valid=!0,n[t].message="",n[t].value=e,a[t]=e,this.setState({formControls:n})}},{key:"handleNCClick",value:function(e,t){this.setState({selectedNC:t}),this.initNCRework(t._id)}},{key:"initNCRework",value:function(e){var t=this;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,l.a.awrap(sc.getFilter("?NC=".concat(e)).then((function(e){!0===e.code&&t.setState({data:e.data})})));case 2:case"end":return a.stop()}}))}},{key:"fetchNCData",value:function(){var e=this;Jl.getByFactoryAndStatus("".concat(this.state.filterFormControls.Factory.value._id,"/").concat(this.state.filterFormControls.NCStatus.value)).then((function(t){!0===t.code&&t.data.length>0?e.setState({NCs:t.data}):e.setState({NCs:[]})}))}},{key:"renderNCStatusOptions",value:function(){return this.state.NCStatusData.map((function(e,t){return r.a.createElement(et.a,{value:e.Value,key:e.Value,name:e.Name},e.Name)}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"form-container"},r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-evenly",alignItems:"center",md:6,xs:12,sm:12,xl:8,lg:8},r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Hr,{handleChange:this.handleFilterChange,selectedValue:this.state.filterFormControls.Factory.value,formControl:this.state.filterFormControls.Factory,propertyName:"Factory"})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Ea.a,{shrink:!0},"NC Status"),r.a.createElement(ba.a,{required:!0,id:"machClass",value:this.state.filterFormControls.NCStatus.value,onChange:function(t){return e.handleFilterChange(t.target.value,"NCStatus")},displayEmpty:!0},r.a.createElement(et.a,{value:"0"},r.a.createElement("em",null,"All ")),this.renderNCStatusOptions()))),r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-evenly",alignItems:"center",md:6,xs:12,sm:12,xl:8,lg:8},r.a.createElement(bn,{label:"NC List",style:{width:"100%"}},r.a.createElement(yt.a,null,r.a.createElement(Dt.a,null,r.a.createElement(Et.a,null,r.a.createElement(Ct.a,null,"Date"),r.a.createElement(Ct.a,null,"Grade"),r.a.createElement(Ct.a,null,"NCType"),r.a.createElement(Ct.a,null,"Qty (Kg)"),r.a.createElement(Ct.a,null,"Status"),r.a.createElement(Ct.a,null,"Remarks"),r.a.createElement(Ct.a,null,"Handled Qty (Kg)"),r.a.createElement(Ct.a,null,"Balance Qty (Kg)"))),r.a.createElement(vt.a,null,this.state.NCs.map((function(t){var a;return r.a.createElement(Et.a,(a={key:t._id,hover:!0,onClick:function(a){return e.handleNCClick(a,t)}},Object(y.a)(a,"key",t._id),Object(y.a)(a,"selected",t._id===e.state.selectedNC._id),a),r.a.createElement(Ct.a,null,new Date(t.ProdDetail.Production.Date).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric"})),r.a.createElement(Ct.a,null,t.ProdDetail.Grade.GradeName),r.a.createElement(Ct.a,null,t.NCType.Name),r.a.createElement(Ct.a,null,r.a.createElement(Xa.a,{value:t.Quantity,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})),r.a.createElement(Ct.a,null,e.state.NCStatusData.find((function(e){return e.Value===t.Status})).Name),r.a.createElement(Ct.a,null,t.Remarks),r.a.createElement(Ct.a,null,r.a.createElement(Xa.a,{value:t.HandledQty,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})),r.a.createElement(Ct.a,null,r.a.createElement(Xa.a,{value:t.Quantity-t.HandledQty,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})))})))))),r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-evenly",alignItems:"center",md:10,xs:12,sm:12,xl:10,lg:10},r.a.createElement("div",{style:{overflowX:"scroll",width:"100%",display:void 0!==this.state.selectedNC._id?"":"none"}},r.a.createElement(Ve.a,{title:"NC Rework",columns:this.state.columns,data:this.state.data,editable:{isEditable:function(){return 2===e.state.selectedNC.Status},isDeletable:function(){return 2===e.state.selectedNC.Status},onRowAdd:2===this.state.selectedNC.Status?function(t){new Promise((function(a,n){setTimeout((function(){var r=Object(je.a)(e.state.data),o=e.state.formControls;t.NC=e.state.selectedNC._id;var s=sc.validateFields(t);if(s.valid){var i=0;r.forEach((function(e){return i+=e.Quantity})),i+t.Quantity>e.state.selectedNC.Quantity?(n(),e.snackOpen("Qty Handle is over the Off Spec. Qty. The maximum available Off Spec. qty is ".concat(e.state.selectedNC.Quantity-i),"error")):sc.add("",t).then((function(t){!0===t.code?(e.fetchNCData(),r.push(t.data),e.setState({data:r},(function(){return a()})),e.snackOpen("Successfully added!","success")):(n(),t.errors.map((function(e){o[e.property].valid=!1,o[e.property].message=e.message})),e.setState({formControls:o}),e.snackOpen("Please fix the error(s) highlighted to save the details!","error"))})).catch((function(t){n(),e.snackOpen("Oops, something went wrong while processing your request!","error")}))}else n(),s.errors.map((function(e){o[e.property].valid=!1,o[e.property].message=e.message})),e.setState({formControls:o})}),500)}))}:void 0,onRowUpdate:function(t,a){return new Promise((function(n,r){setTimeout((function(){var o=Object(je.a)(e.state.data),s=Object(me.a)({},e.state.formControls),i=sc.validateFields(t);if(i.valid){var l=0;o.forEach((function(e){e._id!==t._id&&(l+=e.Quantity)})),l+t.Quantity>e.state.selectedNC.Quantity?(r(),e.snackOpen("Qty Handle is over the Off Spec. Qty. The maximum available Off Spec. qty is ".concat(e.state.selectedNC.Quantity-l),"error")):sc.update("",t).then((function(t){if(!0===t.code){e.fetchNCData();var i=o.indexOf(a);o[i]=t.data,e.setState({data:o},(function(){return n()})),e.snackOpen("Successfully updated!","success")}else r(),t.errors.map((function(e){return s[e.property].valid=!1,s[e.property].message=e.message,s})),e.setState({formControls:s}),e.snackOpen("Please fix the error(s) highlighted to save the details!","error")})).catch((function(t){r(),e.snackOpen("Oops, something went wrong while processing your request!","error")}))}else r(),i.errors.map((function(e){s[e.property].valid=!1,s[e.property].message=e.message})),e.setState({formControls:s})}),500)}))}},actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.data,columns:e.state.columns,fileName:"NC Rework"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.initNCRework(e.state.selectedNC._id)}},{icon:"delete",tooltip:"Delete",onClick:function(t,a){return e.handleClickDelOpen(t,a)}}],options:{search:!1,actionsColumnIndex:-1}}),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:6e3,open:this.state.alertOpen,onClose:this.snackClose,message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.handleClickDelClose,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.handleClickDelClose,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:function(){return e.OnDelete()},color:"primary"},"Delete"))))))}}]),t}(r.a.Component),lc=ic,cc={properties:{Factory:{type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Factory cannot be empty."}},Date:{type:["date","string"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Date cannot be empty."}},Shift:{type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Shift cannot be empty."}},ElectricityEffluent:{type:"number"},ElectricityPreclean:{type:"number"},ElectricityWetLine:{type:"number"},ElectricityDryLine:{type:"number"},DryerBiomass:{type:"number"},DryerGas:{type:"number"},DryerFuel:{type:"number"},DryerCoal:{type:"number"},Remarks:{type:"string"}}},uc=a(24),dc={validateFields:function(e){return uc.validate(e,cc,{cast:!0})},get:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="energyConsumption/"+e,a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 2:case"end":return a.stop()}}))},getByUid:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="energyConsumption/"+e,a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 2:case"end":return a.stop()}}))},getToolFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("energyConsumption-filter/").concat(e),a.next=3,l.a.awrap(We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 3:return a.abrupt("return",a.sent);case 4:case"end":return a.stop()}}))},update:function(e,t){return Qe("energyConsumption/"+e,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Updated successfully.",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,errors:e.data.errors,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="energyConsumption/"+e,n.abrupt("return",He(a,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,message:"Added successfully.",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("energyConsumption/"+e).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))}},mc=dc,pc=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={formControls:{Factory:{valid:!0,message:"",value:a.props.formData.Factory},Date:{valid:!0,message:"",value:new Date(a.props.formData.Date)},Shift:{valid:!0,message:"",value:a.props.formData.Shift},ElectricityEffluent:{valid:!0,message:"",value:a.props.formData.ElectricityEffluent},ElectricityPreclean:{valid:!0,message:"",value:a.props.formData.ElectricityPreclean},ElectricityWetLine:{valid:!0,message:"",value:a.props.formData.ElectricityWetLine},ElectricityDryLine:{valid:!0,message:"",value:a.props.formData.ElectricityDryLine},DryerBiomass:{valid:!0,message:"",value:a.props.formData.DryerBiomass},DryerGas:{valid:!0,message:"",value:a.props.formData.DryerGas},DryerFuel:{valid:!0,message:"",value:a.props.formData.DryerFuel},DryerCoal:{valid:!0,message:"",value:a.props.formData.DryerCoal},Remarks:{valid:!0,message:"",value:a.props.formData.Remarks}},formState:{valid:!0,dirty:!1,errors:[]}},a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"handleChange",value:function(e,t){var a=this.state.formControls,n=this.state.formState;void 0===e||0===e.length?(a[t].valid=!1,a[t].message="".concat(t," cannot be empty.")):(a[t].valid=!0,a[t].message=""),this.props.handleChange(e,t),a[t].value=e,"Factory"===t&&(a.Shift.value=""),n.dirty=!0,this.setState({formControls:a,formState:n})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"form-container"},r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-evenly",alignItems:"center",md:6,xs:12,sm:12,xl:8,lg:8},r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Hr,{handleChange:this.handleChange,selectedValue:this.state.formControls.Factory.value,formControl:this.state.formControls.Factory,propertyName:"Factory"})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Da.a,{required:!0,format:"dd-MMM-yyyy",label:"Date",value:this.state.formControls.Date.value,onChange:function(t){e.handleChange(t,"Date")},disableFuture:!0})),r.a.createElement(Sa.a,{error:!this.state.formControls.Date.valid,style:{display:this.state.formControls.Date.valid?"none":""}},this.state.formControls.Date.message)),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(ns,{handleChange:this.handleChange,selectedValue:this.state.formControls.Shift.value,formControl:this.state.formControls.Shift,propertyName:"Shift",factoryId:void 0===this.state.formControls.Factory.value._id?this.state.formControls.Factory.value:this.state.formControls.Factory.value._id,autoSelect:void 0===this.props.formData._id})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Xa.a,{id:"ElectricityEffluent",label:"Electricity - Waste Water",customInput:ge.a,defaultValue:this.state.formControls.ElectricityEffluent.value,onValueChange:function(t){return e.handleChange(t.floatValue,"ElectricityEffluent")},onFocus:function(e){e.target.select()},decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Xa.a,{id:"ElectricityPreclean",label:"Electricity - Sheeting/Preclean",customInput:ge.a,defaultValue:this.state.formControls.ElectricityPreclean.value,onValueChange:function(t){return e.handleChange(t.floatValue,"ElectricityPreclean")},onFocus:function(e){e.target.select()},decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Xa.a,{id:"ElectricityWetLine",label:"Electricity - Wet Line",customInput:ge.a,defaultValue:this.state.formControls.ElectricityWetLine.value,onValueChange:function(t){return e.handleChange(t.floatValue,"ElectricityWetLine")},onFocus:function(e){e.target.select()},decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Xa.a,{id:"ElectricityDryLine",label:"Electricity - Dry Line",customInput:ge.a,defaultValue:this.state.formControls.ElectricityDryLine.value,onValueChange:function(t){return e.handleChange(t.floatValue,"ElectricityDryLine")},onFocus:function(e){e.target.select()},decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Xa.a,{id:"DryerBiomass",label:"Dryer Consumption - Biomass",customInput:ge.a,defaultValue:this.state.formControls.DryerBiomass.value,onValueChange:function(t){return e.handleChange(t.floatValue,"DryerBiomass")},onFocus:function(e){e.target.select()},decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Xa.a,{id:"DryerGas",label:"Dryer Consumption - Gas",customInput:ge.a,defaultValue:this.state.formControls.DryerGas.value,onValueChange:function(t){return e.handleChange(t.floatValue,"DryerGas")},onFocus:function(e){e.target.select()},decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Xa.a,{id:"DryerFuel",label:"Dryer Consumption - Fuel",customInput:ge.a,defaultValue:this.state.formControls.DryerFuel.value,onValueChange:function(t){return e.handleChange(t.floatValue,"DryerFuel")},onFocus:function(e){e.target.select()},decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Xa.a,{id:"DryerCoal",label:"Dryer Consumption - Coal",customInput:ge.a,defaultValue:this.state.formControls.DryerCoal.value,onValueChange:function(t){return e.handleChange(t.floatValue,"DryerCoal")},onFocus:function(e){e.target.select()},decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(ge.a,{id:"Remarks",label:"Remarks",defaultValue:this.state.formControls.Remarks.value,onChange:function(t){return e.handleChange(t.target.value,"Remarks")},multiline:!0}))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=t.formControls;return e.formState.valid||Array.isArray(e.formState.errors)&&e.formState.errors.map((function(e){a[e.property].valid=!1,a[e.property].message=e.message})),{formState:e.formState,formControls:a}}}]),t}(r.a.Component),fc=pc,hc={Factory:"",Date:new Date(Date.now()),Shift:"",ElectricityEffluent:0,ElectricityPreclean:0,ElectricityWetLine:0,ElectricityDryLine:0,DryerBiomass:0,DryerGas:0,DryerFuel:0,DryerCoal:0,Remarks:"",CreatedAt:new Date(Date.now()).toLocaleString(),CreatedBy:"Admin",LastUpdatedAt:new Date(Date.now()).toLocaleString(),LastUpdatedBy:"Admin"},gc=hc,yc=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).openDialog=function(e){return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.awrap(ka("confirmation","delete"));case 2:t.sent,a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:e,dialogMessage:r.a.createElement("span",null,"Are you sure to delete this record factory"," ",r.a.createElement("b",null,e.Factory.FctyCode," "),"in date"," ",r.a.createElement("b",null,new Date(e.Date).toLocaleString().split(",")[0]," "),"? This cannot be undone.")});case 4:case"end":return t.stop()}}))},a.closeDialog=function(){a.setState({dialogOpen:!1,currentDeleteData:null,dialogMessage:""})},a.openForm=function(e){void 0===e?a.setState({actionStatus:"Add",newData:Object(me.a)({},gc)}):a.setState({actionStatus:"Update",newData:Object(me.a)({},e)}),a.setState({formOpen:!0,formState:{valid:!0,dirty:!1,errors:[]}})},a.closeForm=function(){a.setState({formOpen:!1,newData:{},actionStatus:""})},a.onSave=function(){var e=a.state.formState,t=Object(me.a)({},a.state.newData),n=mc.validateFields(t);if(n.valid){var r=Object(je.a)(a.state.data);"Add"===a.state.actionStatus?(t.LastUpdatedBy=a.state.operator,t.CreatedBy=a.state.operator,mc.add("",t).then((function(t){!0===t.code?(e.valid=!0,r.push(t.data),a.setState({data:r}),a.closeForm(),a.snackOpen("Energy consumption created successfully!","success")):(e.valid=!1,e.errors=t.errors,a.snackOpen("Please fix the error(s) highlighted to save the details!","error"))})).catch((function(e){a.snackOpen("Oops, something went wrong while processing your request!","error")}))):(t.LastUpdatedBy=a.state.operator,mc.update("",t).then((function(n){if(!0===n.code){e.valid=!0;var o=r.find((function(e){return e._id===t._id})),s=r.indexOf(o);r[s]=n.data,a.setState({data:r}),a.closeForm(),a.snackOpen("Energy consumption updated successfully!","success")}else e.valid=!1,e.errors=n.errors,a.snackOpen("Please fix the error(s) highlighted to save the details!","error")})).catch((function(e){a.snackOpen("Oops, something went wrong while processing your request!","error")})))}else{e.valid=!1;var o=n.errors.map((function(e){var t={};return t.property=e.property,t.message=e.message,t}));e.errors=o,a.snackOpen("Please fix the error(s) highlighted to save the details!","error")}a.setState({formState:e})},a.onDelete=function(){null!==a.state.currentDeleteData&&mc.delete("".concat(a.state.currentDeleteData._id)).then((function(e){if(!0===e.code){var t=Object(je.a)(a.state.data),n=t.indexOf(a.state.currentDeleteData);t.splice(n,1),a.snackOpen("Successfully Deleted!","success"),a.closeDialog(),a.setState({data:t})}else a.snackOpen("Oops, something went wrong while processing your request!","error")}))},a.onEdit=function(e){a.openForm(e)},a.state={columns:[{title:"Factory",field:"Factory",render:function(e){return r.a.createElement("span",null,void 0===e.Factory?"":e.Factory.FctyCode)}},{title:"Date",field:"Date",render:function(e){return r.a.createElement("span",null,new Date(e.Date).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric"}))}},{title:"Shift",field:"Shift",render:function(e){return r.a.createElement("span",null,void 0===e.Shift?"":e.Shift.Name)}},{title:"Electricity - Waste Water",field:"ElectricityEffluent",render:function(e){return r.a.createElement(Xa.a,{value:e.ElectricityEffluent,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"Electricity - Sheeting/Preclean",field:"ElectricityPreclean",render:function(e){return r.a.createElement(Xa.a,{value:e.ElectricityPreclean,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"Electricity - Wet Line",field:"ElectricityWetLine",render:function(e){return r.a.createElement(Xa.a,{value:e.ElectricityWetLine,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"Electricity - Dry Line",field:"ElectricityDryLine",render:function(e){return r.a.createElement(Xa.a,{value:e.ElectricityDryLine,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"Dryer Consumption - Biomass",field:"DryerBiomass",render:function(e){return r.a.createElement(Xa.a,{value:e.DryerBiomass,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"Dryer Consumption - Gas",field:"DryerGas",render:function(e){return r.a.createElement(Xa.a,{value:e.DryerGas,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"Dryer Consumption - Fuel",field:"DryerCoal",render:function(e){return r.a.createElement(Xa.a,{value:e.DryerCoal,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"Dryer Consumption - Coal",field:"DryerFuel",render:function(e){return r.a.createElement(Xa.a,{value:e.DryerFuel,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"Remarks",field:"Remarks"},{title:"Operator",field:"LastUpdatedBy"},{title:"Last Updated",field:"LastUpdatedAt",render:function(e){return r.a.createElement("span",null,new Date(e.Date).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}))}}],data:[],currentDeleteData:null,newData:gc,formOpen:!1,dialogOpen:!1,dialogMessage:"",disabled:!1,actionStatus:"",formState:{valid:!0,dirty:!1,errors:[]},operator:"Admin"},a.openDialog=a.openDialog.bind(Object(Pe.a)(a)),a.closeDialog=a.closeDialog.bind(Object(Pe.a)(a)),a.openForm=a.openForm.bind(Object(Pe.a)(a)),a.closeForm=a.closeForm.bind(Object(Pe.a)(a)),a.snackOpen=a.snackOpen.bind(Object(Pe.a)(a)),a.snackClose=a.snackClose.bind(Object(Pe.a)(a)),a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initEnergyConsumption()}},{key:"initEnergyConsumption",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.awrap(mc.get("").then((function(t){!0===t.code&&e.setState({data:t.data})})));case 2:case"end":return t.stop()}}))}},{key:"handleChange",value:function(e,t){var a=this.state.newData;a[t]=e;var n=this.state.formState;"Factory"===t&&(a.Shift=""),n.valid=!0,this.setState({newData:a,formState:n})}},{key:"snackOpen",value:function(e,t){this.setState({alertOpen:!0,alertMessage:e,alertClass:t})}},{key:"snackClose",value:function(){this.setState({alertOpen:!1,alertMessage:"",alertClass:"",currentDeleteData:null})}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{style:{margin:"20px 20px 10px 0px"}},r.a.createElement(Ve.a,{title:"Daily Energy Consumption",columns:this.state.columns,data:this.state.data,components:{Toolbar:function(t){return r.a.createElement("div",null,r.a.createElement(Le.MTableToolbar,t),r.a.createElement("div",{style:{padding:"0px 15px"}},r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:function(){return e.openForm()},"aria-label":"add"},r.a.createElement(wt.a,null))))}},actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.data,columns:e.state.columns,fileName:"Energy Consumption"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.initEnergyConsumption()}},{icon:"edit",tooltip:"Edit",onClick:function(t,a){return e.openForm(a)}},{icon:"delete",tooltip:"Delete",onClick:function(t,a){return e.openDialog(a)}}],options:{}}),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:6e3,open:this.state.alertOpen,onClose:this.snackClose,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}),r.a.createElement(Ae.a,{fullScreen:!0,open:this.state.formOpen,onClose:this.closeForm,TransitionComponent:this.Transition},r.a.createElement(w.a,{className:"appBar"},r.a.createElement(F.a,null,r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:this.closeForm,"aria-label":"close"},r.a.createElement(Vt.a,null)),r.a.createElement(x.a,{variant:"h6",className:"app-title"},"Daily Energy Consumption Details"),r.a.createElement(he.a,{color:"inherit",disabled:this.state.disabled,onClick:this.onSave},"save"))),r.a.createElement(_e.a,null,r.a.createElement(fc,{handleChange:this.handleChange,formData:this.state.newData,formState:this.state.formState}))),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.closeDialog,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.closeDialog,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDelete,color:"primary"},"Delete"))))}}]),t}(r.a.Component),vc=yc,Cc={properties:{Factory:{type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Factory cannot be empty."}},Date:{type:["date","string"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Date cannot be empty."}},Shift:{type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Shift cannot be empty."}},DirectRegular:{type:"number"},DirectOT:{type:"number"},IndirectRegular:{type:"number"},IndirectOT:{type:"number"},WorkHourRegular:{type:"number"},WorkHourOT:{type:"number"},TotalWorkHourRegular:{type:"number"},TotalWorkHourOT:{type:"number"},RuntimeWetLine:{type:"number"},RuntimeDryer:{type:"number"},RuntimeDP:{type:"number"},Remarks:{type:"string"}}},Dc=a(24),Ec={validateFields:function(e){return Dc.validate(e,Cc,{cast:!0})},get:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="manning/"+e,a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 2:case"end":return a.stop()}}))},getByUid:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="manning/"+e,a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 2:case"end":return a.stop()}}))},getFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("manning-filter/").concat(e),a.next=3,l.a.awrap(We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 3:return a.abrupt("return",a.sent);case 4:case"end":return a.stop()}}))},update:function(e,t){return Qe("manning/"+e,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Updated successfully.",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,errors:e.data.errors,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="manning/"+e,n.abrupt("return",He(a,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,message:"Added successfully.",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("manning/"+e).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))}},bc=Ec,Sc=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={formControls:{Factory:{valid:!0,message:"",value:a.props.formData.Factory},Date:{valid:!0,message:"",value:new Date(a.props.formData.Date)},Shift:{valid:!0,message:"",value:a.props.formData.Shift},DirectRegular:{valid:!0,message:"",value:a.props.formData.DirectRegular},DirectOT:{valid:!0,message:"",value:a.props.formData.DirectOT},IndirectRegular:{valid:!0,message:"",value:a.props.formData.IndirectRegular},IndirectOT:{valid:!0,message:"",value:a.props.formData.IndirectOT},WorkHourRegular:{valid:!0,message:"",value:a.props.formData.WorkHourRegular},WorkHourOT:{valid:!0,message:"",value:a.props.formData.WorkHourOT},TotalWorkHourRegular:{valid:!0,message:"",value:a.props.formData.TotalWorkHourRegular},TotalWorkHourOT:{valid:!0,message:"",value:a.props.formData.TotalWorkHourOT},RuntimeWetLine:{valid:!0,message:"",value:a.props.formData.RuntimeWetLine},RuntimeDryer:{valid:!0,message:"",value:a.props.formData.RuntimeDryer},RuntimeDP:{valid:!0,message:"",value:a.props.formData.RuntimeDP},Remarks:{valid:!0,message:"",value:a.props.formData.Remarks}},formState:{valid:!0,dirty:!1,errors:[]}},a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"handleChange",value:function(e,t){var a=this.state.formControls,n=this.state.formState;void 0===e||0===e.length?(a[t].valid=!1,a[t].message="".concat(t," cannot be empty.")):(a[t].valid=!0,a[t].message=""),this.props.handleChange(e,t),a[t].value=e,"Factory"===t&&(a.Shift.value=""),n.dirty=!0,this.setState({formControls:a,formState:n})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"form-container"},r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-evenly",alignItems:"center",md:6,xs:12,sm:12,xl:8,lg:8},r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Hr,{handleChange:this.handleChange,selectedValue:this.state.formControls.Factory.value,formControl:this.state.formControls.Factory,propertyName:"Factory"})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Da.a,{required:!0,format:"dd-MMM-yyyy",label:"Date",value:this.state.formControls.Date.value,onChange:function(t){e.handleChange(t,"Date")}})),r.a.createElement(Sa.a,{error:!this.state.formControls.Date.valid,style:{display:this.state.formControls.Date.valid?"none":""}},this.state.formControls.Date.message)),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(ns,{handleChange:this.handleChange,selectedValue:this.state.formControls.Shift.value,formControl:this.state.formControls.Shift,propertyName:"Shift",factoryId:void 0===this.state.formControls.Factory.value._id?this.state.formControls.Factory.value:this.state.formControls.Factory.value._id,autoSelect:void 0===this.props.formData._id})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Xa.a,{id:"DirectRegular",label:"Manning Direct - Regular",customInput:ge.a,defaultValue:this.state.formControls.DirectRegular.value,onValueChange:function(t){return e.handleChange(t.floatValue,"DirectRegular")},onFocus:function(e){e.target.select()},decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Xa.a,{id:"DirectOT",label:"Manning Direct - OT",customInput:ge.a,defaultValue:this.state.formControls.DirectOT.value,onValueChange:function(t){return e.handleChange(t.floatValue,"DirectOT")},onFocus:function(e){e.target.select()},decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Xa.a,{id:"IndirectRegular",label:"Manning Indirect - Regular",customInput:ge.a,defaultValue:this.state.formControls.IndirectRegular.value,onValueChange:function(t){return e.handleChange(t.floatValue,"IndirectRegular")},onFocus:function(e){e.target.select()},decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Xa.a,{id:"IndirectOT",label:"Manning Indirect - OT",customInput:ge.a,defaultValue:this.state.formControls.IndirectOT.value,onValueChange:function(t){return e.handleChange(t.floatValue,"IndirectOT")},onFocus:function(e){e.target.select()},decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Xa.a,{id:"WorkHourRegular",label:"Work Hour - Regular",customInput:ge.a,defaultValue:this.state.formControls.WorkHourRegular.value,onValueChange:function(t){return e.handleChange(t.floatValue,"WorkHourRegular")},onFocus:function(e){e.target.select()},decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Xa.a,{id:"WorkHourOT",label:"Work Hour - OT",customInput:ge.a,defaultValue:this.state.formControls.WorkHourOT.value,onValueChange:function(t){return e.handleChange(t.floatValue,"WorkHourOT")},onFocus:function(e){e.target.select()},decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Xa.a,{id:"TotalWorkHourRegular",label:"Total Work Hour - Regular",customInput:ge.a,defaultValue:this.state.formControls.TotalWorkHourRegular.value,onValueChange:function(t){return e.handleChange(t.floatValue,"TotalWorkHourRegular")},onFocus:function(e){e.target.select()},decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Xa.a,{id:"TotalWorkHourOT",label:"Total Work Hour - OT",customInput:ge.a,defaultValue:this.state.formControls.TotalWorkHourOT.value,onValueChange:function(t){return e.handleChange(t.floatValue,"TotalWorkHourOT")},onFocus:function(e){e.target.select()},decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Xa.a,{id:"RuntimeWetLine",label:"Runtime - Wet Line",customInput:ge.a,defaultValue:this.state.formControls.RuntimeWetLine.value,onValueChange:function(t){return e.handleChange(t.floatValue,"RuntimeWetLine")},onFocus:function(e){e.target.select()},decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Xa.a,{id:"RuntimeDryer",label:"Runtime - Dryer",customInput:ge.a,defaultValue:this.state.formControls.RuntimeDryer.value,onValueChange:function(t){return e.handleChange(t.floatValue,"RuntimeDryer")},onFocus:function(e){e.target.select()},decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Xa.a,{id:"RuntimeDP",label:"Runtime - DP",customInput:ge.a,defaultValue:this.state.formControls.RuntimeDP.value,onValueChange:function(t){return e.handleChange(t.floatValue,"RuntimeDP")},onFocus:function(e){e.target.select()},decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(ge.a,{id:"Remarks",label:"Remarks",defaultValue:this.state.formControls.Remarks.value,onChange:function(t){return e.handleChange(t.target.value,"Remarks")},multiline:!0}))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=t.formControls;return e.formState.valid||Array.isArray(e.formState.errors)&&e.formState.errors.map((function(e){a[e.property].valid=!1,a[e.property].message=e.message})),{formState:e.formState,formControls:a}}}]),t}(r.a.Component),Oc=Sc,kc={Factory:"",Date:new Date(Date.now()),Shift:"",DirectRegular:0,DirectOT:0,IndirectRegular:0,IndirectOT:0,WorkHourRegular:0,WorkHourOT:0,TotalWorkHourRegular:0,TotalWorkHourOT:0,RuntimeWetLine:0,RuntimeDryer:0,RuntimeDP:0,Remarks:"",CreatedAt:new Date(Date.now()).toLocaleString(),CreatedBy:"Admin",LastUpdatedAt:new Date(Date.now()).toLocaleString(),LastUpdatedBy:"Admin"},wc=kc,Fc=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).openDialog=function(e){a.setState({dialogOpen:!0,currentDeleteData:e,dialogMessage:r.a.createElement("span",null,"Are you sure to delete this record factory"," ",r.a.createElement("b",null,e.Factory.FctyCode," "),"in date"," ",r.a.createElement("b",null,new Date(e.Date).toLocaleString().split(",")[0]," "),"? This cannot be undone.")})},a.closeDialog=function(){a.setState({dialogOpen:!1,currentDeleteData:null,dialogMessage:""})},a.openForm=function(e){void 0===e?a.setState({actionStatus:"Add",newData:Object(me.a)({},wc)}):a.setState({actionStatus:"Update",newData:Object(me.a)({},e)}),a.setState({formOpen:!0,formState:{valid:!0,dirty:!1,errors:[]}})},a.closeForm=function(){a.setState({formOpen:!1,newData:{},actionStatus:""})},a.onSave=function(){var e=a.state.formState,t=Object(me.a)({},a.state.newData),n=bc.validateFields(t);if(n.valid){var r=Object(je.a)(a.state.data);"Add"===a.state.actionStatus?(t.LastUpdatedBy=a.state.operator,t.CreatedBy=a.state.operator,bc.add("",t).then((function(t){!0===t.code?(e.valid=!0,r.push(t.data),a.setState({data:r}),a.closeForm(),a.snackOpen("Manning created successfully!","success")):(e.valid=!1,e.errors=t.errors,a.snackOpen("Please fix the error(s) highlighted to save the details!","error"))})).catch((function(e){a.snackOpen("Oops, something went wrong while processing your request!","error")}))):(t.LastUpdatedBy=a.state.operator,bc.update("",t).then((function(n){if(!0===n.code){e.valid=!0;var o=r.find((function(e){return e._id===t._id})),s=r.indexOf(o);r[s]=n.data,a.setState({data:r}),a.closeForm(),a.snackOpen("Manning updated successfully!","success")}else e.valid=!1,e.errors=n.errors,a.snackOpen("Please fix the error(s) highlighted to save the details!","error")})).catch((function(e){a.snackOpen("Oops, something went wrong while processing your request!","error")})))}else{e.valid=!1;var o=n.errors.map((function(e){var t={};return t.property=e.property,t.message=e.message,t}));e.errors=o,a.snackOpen("Please fix the error(s) highlighted to save the details!","error")}a.setState({formState:e})},a.onDelete=function(){null!==a.state.currentDeleteData&&bc.delete("".concat(a.state.currentDeleteData._id)).then((function(e){if(!0===e.code){var t=Object(je.a)(a.state.data),n=t.indexOf(a.state.currentDeleteData);t.splice(n,1),a.snackOpen("Successfully Deleted!","success"),a.closeDialog(),a.setState({data:t})}else a.snackOpen("Oops, something went wrong while processing your request!","error")}))},a.onEdit=function(e){a.openForm(e)},a.state={columns:[{title:"Factory",field:"Factory",render:function(e){return r.a.createElement("span",null,void 0===e.Factory?"":e.Factory.FctyCode)}},{title:"Date",field:"Date",render:function(e){return r.a.createElement("span",null,new Date(e.Date).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric"}))}},{title:"Shift",field:"Shift",render:function(e){return r.a.createElement("span",null,void 0===e.Shift?"":e.Shift.Name)}},{title:"Manning Direct - Regular",field:"DirectRegular",render:function(e){return r.a.createElement(Xa.a,{value:e.DirectRegular,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"Manning Direct - OT",field:"DirectOT",render:function(e){return r.a.createElement(Xa.a,{value:e.DirectOT,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"Manning Indirect - Regular",field:"IndirectRegular",render:function(e){return r.a.createElement(Xa.a,{value:e.IndirectRegular,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"Manning Indirect - OT",field:"IndirectOT",render:function(e){return r.a.createElement(Xa.a,{value:e.IndirectOT,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"Work Hour - Regular",field:"WorkHourRegular",render:function(e){return r.a.createElement(Xa.a,{value:e.WorkHourRegular,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"Work Hour - OT",field:"WorkHourOT",render:function(e){return r.a.createElement(Xa.a,{value:e.WorkHourOT,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"Total Work Hour - Regular",field:"TotalWorkHourRegular",render:function(e){return r.a.createElement(Xa.a,{value:e.TotalWorkHourRegular,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"Total Work Hour - OT",field:"TotalWorkHourOT",render:function(e){return r.a.createElement(Xa.a,{value:e.TotalWorkHourOT,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"Runtime - Wet Line",field:"RuntimeWetLine",render:function(e){return r.a.createElement(Xa.a,{value:e.RuntimeWetLine,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"Runtime - Dryer",field:"RuntimeDryer",render:function(e){return r.a.createElement(Xa.a,{value:e.RuntimeDryer,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"Runtime - DP",field:"RuntimeDP",render:function(e){return r.a.createElement(Xa.a,{value:e.RuntimeDP,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"Remarks",field:"Remarks"},{title:"Operator",field:"LastUpdatedBy"},{title:"Last Updated",field:"LastUpdatedAt",render:function(e){return r.a.createElement("span",null,new Date(e.LastUpdatedAt).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}))}}],data:[],currentDeleteData:null,newData:wc,formOpen:!1,dialogOpen:!1,dialogMessage:"",disabled:!1,actionStatus:"",formState:{valid:!0,dirty:!1,errors:[]},operator:"Admin"},a.openDialog=a.openDialog.bind(Object(Pe.a)(a)),a.closeDialog=a.closeDialog.bind(Object(Pe.a)(a)),a.openForm=a.openForm.bind(Object(Pe.a)(a)),a.closeForm=a.closeForm.bind(Object(Pe.a)(a)),a.snackOpen=a.snackOpen.bind(Object(Pe.a)(a)),a.snackClose=a.snackClose.bind(Object(Pe.a)(a)),a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initManning()}},{key:"initManning",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.awrap(bc.get("").then((function(t){!0===t.code&&e.setState({data:t.data})})));case 2:case"end":return t.stop()}}))}},{key:"handleChange",value:function(e,t){var a=this.state.newData;a[t]=e;var n=this.state.formState;"Factory"===t&&(a.Shift=""),n.valid=!0,this.setState({newData:a,formState:n})}},{key:"snackOpen",value:function(e,t){this.setState({alertOpen:!0,alertMessage:e,alertClass:t})}},{key:"snackClose",value:function(){this.setState({alertOpen:!1,alertMessage:"",alertClass:"",currentDeleteData:null})}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{style:{margin:"20px 20px 10px 0px"}},r.a.createElement(Ve.a,{title:"Manning",columns:this.state.columns,data:this.state.data,components:{Toolbar:function(t){return r.a.createElement("div",null,r.a.createElement(Le.MTableToolbar,t),r.a.createElement("div",{style:{padding:"0px 15px"}},r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:function(){return e.openForm()},"aria-label":"add"},r.a.createElement(wt.a,null))))}},actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.data,columns:e.state.columns,fileName:"Manning"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.initManning()}},{icon:"edit",tooltip:"Edit",onClick:function(t,a){return e.openForm(a)}},{icon:"delete",tooltip:"Delete",onClick:function(t,a){return e.openDialog(a)}}],options:{}}),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:6e3,open:this.state.alertOpen,onClose:this.snackClose,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}),r.a.createElement(Ae.a,{fullScreen:!0,open:this.state.formOpen,onClose:this.closeForm,TransitionComponent:this.Transition},r.a.createElement(w.a,{className:"appBar"},r.a.createElement(F.a,null,r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:this.closeForm,"aria-label":"close"},r.a.createElement(Vt.a,null)),r.a.createElement(x.a,{variant:"h6",className:"app-title"},"Manning Details"),r.a.createElement(he.a,{color:"inherit",disabled:this.state.disabled,onClick:this.onSave},"save"))),r.a.createElement(_e.a,null,r.a.createElement(Oc,{handleChange:this.handleChange,formData:this.state.newData,formState:this.state.formState}))),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.closeDialog,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.closeDialog,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDelete,color:"primary"},"Delete"))))}}]),t}(r.a.Component),xc=Fc,Tc={properties:{Factory:{type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Factory cannot be empty."}},Datetime:{type:["date","string"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Datetime cannot be empty."}},Shift:{type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Shift cannot be empty."}},DryerMachine:{type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Dryer machine cannot be empty."}},Buyer:{type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Buyer cannot be empty."}},Grade:{type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Grade cannot be empty."}},Type:{type:"number"}}},Nc=a(24),jc={validateFields:function(e){return Nc.validate(e,Tc,{cast:!0})},get:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="spcData/"+e,a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 2:case"end":return a.stop()}}))},getByUid:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="spcData/"+e,a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 2:case"end":return a.stop()}}))},getFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("spcData-filter/").concat(e),a.next=3,l.a.awrap(We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 3:return a.abrupt("return",a.sent);case 4:case"end":return a.stop()}}))},update:function(e,t){return Qe("spcData/"+e,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Updated successfully.",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,errors:e.data.errors,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="spcData/"+e,n.abrupt("return",He(a,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,message:"Added successfully.",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("spcData/"+e).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))}},Pc=jc,Ac=a(273),Mc=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={machineListData:[],disabled:!1},a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){void 0!==this.props.factoryId&&""!==this.props.factoryId&&this.fetchMachineListData(this.props.factoryId)}},{key:"componentDidUpdate",value:function(e){this.props.factoryId!==e.factoryId&&void 0!==this.props.factoryId&&""!==this.props.factoryId&&this.fetchMachineListData(this.props.factoryId)}},{key:"fetchMachineListData",value:function(e){var t=this;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:Gr.getByFctyAndMachAbvrs("".concat(e,"/").concat(void 0===this.props.abvrs?"":this.props.abvrs)).then((function(e){!0===e.code&&t.setState({machineListData:e.data})})).catch((function(e){throw e}));case 1:case"end":return a.stop()}}),null,this)}},{key:"renderOptions",value:function(){return this.state.machineListData.map((function(e,t){return r.a.createElement(et.a,{label:"Select machine",value:e._id,key:e._id,name:e.MachLstCode},r.a.createElement(E.a,{style:{width:"100%"}},r.a.createElement(b.a,{alignItems:"flex-start"},r.a.createElement(S.a,{primary:e.MachLstCode,style:{width:"50%"}}),r.a.createElement(S.a,{primary:e.MachLstMachine.MachName,style:{width:"50%"}}))))}))}},{key:"handleChange",value:function(e,t){var a=this.state.machineListData.find((function(t){return t._id===e.target.value}));void 0!==a&&(void 0===this.props.rowData?this.props.handleChange(a,t):this.props.handleChange(a,t,this.props.rowData))}},{key:"render",value:function(){var e=this;return r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Ea.a,{shrink:!0,htmlFor:"machineList",required:!0,error:!this.props.formControl.valid},void 0===this.props.label?"Machine":this.props.label),r.a.createElement(ba.a,{id:this.props.propertyName,value:void 0===this.props.rowData?void 0===this.props.formControl.value._id?this.props.formControl.value:this.props.formControl.value._id:0===Object.keys(this.props.rowData).length||void 0===this.props.rowData[this.props.propertyName]||null===this.props.rowData[this.props.propertyName]?"":void 0===this.props.rowData[this.props.propertyName]._id?this.props.rowData[this.props.propertyName]:this.props.rowData[this.props.propertyName]._id,error:!this.props.formControl.valid,onChange:function(t){return e.handleChange(t,e.props.propertyName)},displayEmpty:!0},r.a.createElement(et.a,{value:""},r.a.createElement("em",null,"Select"," ",void 0===this.props.label?"Machine":this.props.label)),this.renderOptions()),r.a.createElement(Sa.a,{error:!this.props.formControl.valid,style:{display:this.props.formControl.valid?"none":""}},this.props.formControl.valid?"":this.props.formControl.message))}}]),t}(n.Component),_c=Mc,Ic=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={formControls:{Factory:{valid:!0,message:"",value:a.props.formData.Factory},Datetime:{valid:!0,message:"",value:new Date(a.props.formData.Datetime)},Shift:{valid:!0,message:"",value:a.props.formData.Shift},DryerMachine:{valid:!0,message:"",value:a.props.formData.DryerMachine},Buyer:{valid:!0,message:"",value:a.props.formData.Buyer},Grade:{valid:!0,message:"",value:a.props.formData.Grade},Type:{valid:!0,message:"",value:a.props.formData.Type},Lot:{valid:!0,message:"",value:a.props.formData.Lot},Val1:{valid:!0,message:"",value:a.props.formData.Val1},Val2:{valid:!0,message:"",value:a.props.formData.Val2},Timer:{valid:!0,message:"",value:a.props.formData.Timer},Temp1:{valid:!0,message:"",value:a.props.formData.Temp1},Temp2:{valid:!0,message:"",value:a.props.formData.Temp2},Temp3:{valid:!0,message:"",value:a.props.formData.Temp3},Temp4:{valid:!0,message:"",value:a.props.formData.Temp4},Temp5:{valid:!0,message:"",value:a.props.formData.Temp5},Temp6:{valid:!0,message:"",value:a.props.formData.Temp6},BiscuitTemp:{valid:!0,message:"",value:a.props.formData.BiscuitTemp},BiscuitWeight:{valid:!0,message:"",value:a.props.formData.BiscuitWeight},Event:{valid:!0,message:"",value:a.props.formData.Event}},formState:{valid:!0,dirty:!1,errors:[]}},a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"handleChange",value:function(e,t){var a=this.state.formControls,n=this.state.formState;void 0===e||0===e.length?(a[t].valid=!1,a[t].message="".concat(t," cannot be empty.")):(a[t].valid=!0,a[t].message=""),this.props.handleChange(e,t),a[t].value=e,"Factory"===t&&(a.Shift.value="",a.DryerMachine.value="",a.Buyer.value="",a.Grade.value=""),"Buyer"===t&&(a.Grade.value=""),n.dirty=!0,this.setState({formControls:a,formState:n})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"form-container"},r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-evenly",alignItems:"center",md:6,xs:12,sm:12,xl:8,lg:8},r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Hr,{handleChange:this.handleChange,selectedValue:this.state.formControls.Factory.value,formControl:this.state.formControls.Factory,propertyName:"Factory"})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Ac.a,{required:!0,format:"dd-MMM-yyyy hh:mm",label:"Datetime",value:this.state.formControls.Datetime.value,onChange:function(t){e.handleChange(t,"Datetime")},minutesStep:60,disableFuture:!0})),r.a.createElement(Sa.a,{error:!this.state.formControls.Datetime.valid,style:{display:this.state.formControls.Datetime.valid?"none":""}},this.state.formControls.Datetime.message)),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(ns,{handleChange:this.handleChange,selectedValue:this.state.formControls.Shift.value,formControl:this.state.formControls.Shift,propertyName:"Shift",factoryId:void 0===this.state.formControls.Factory.value._id?this.state.formControls.Factory.value:this.state.formControls.Factory.value._id,autoSelect:void 0===this.props.formData._id})),r.a.createElement(_c,{handleChange:this.handleChange,formControl:this.state.formControls.DryerMachine,propertyName:"DryerMachine",factoryId:void 0===this.state.formControls.Factory.value._id?this.state.formControls.Factory.value:this.state.formControls.Factory.value._id,label:"Dryer No.",abvrs:"DA,DT"}),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(io.a,{"aria-label":"type",name:"type",value:this.state.formControls.Type.value,onChange:function(t){return e.handleChange(parseInt(t.target.value),"Type")},row:!0},r.a.createElement(ye.a,{value:1,control:r.a.createElement(lo.a,{color:"primary"}),label:"PO",labelPlacement:"end"}),r.a.createElement(ye.a,{value:2,control:r.a.createElement(lo.a,{color:"primary"}),label:"Mooney",labelPlacement:"end"}))),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Qn,{selectedValue:this.state.formControls.Buyer.value,propertyName:"Buyer",handleChange:this.handleChange,formState:this.state.formControls.Buyer})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Fl,{handleChange:this.handleChange,formControl:this.state.formControls.Grade,propertyName:"Grade",countryId:""===this.state.formControls.Factory.value?"":void 0===this.state.formControls.Factory.value.FctyCountry._id?this.state.formControls.Factory.value.FctyCountry:this.state.formControls.Factory.value.FctyCountry._id,buyerId:void 0===this.state.formControls.Buyer.value._id?this.state.formControls.Buyer.value:this.state.formControls.Buyer.value._id,selectedValue:this.state.formControls.Grade.value})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(ge.a,{id:"Lot",label:"Production Pallet #",defaultValue:this.state.formControls.Lot.value,onChange:function(t){return e.handleChange(t.target.value,"Lot")}})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Xa.a,{id:"Val1",label:"1"===this.state.formControls.Type.value?"PO 1":"Mv 1",customInput:ge.a,defaultValue:this.state.formControls.Val1.value,onValueChange:function(t){return e.handleChange(t.floatValue,"Val1")},onFocus:function(e){e.target.select()},decimalScale:1,thousandSeparator:!0,fixedDecimalScale:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Xa.a,{id:"Val2",label:"1"===this.state.formControls.Type.value?"PO 2":"Mv 2",customInput:ge.a,defaultValue:this.state.formControls.Val2.value,onValueChange:function(t){return e.handleChange(t.floatValue,"Val2")},onFocus:function(e){e.target.select()},decimalScale:1,thousandSeparator:!0,fixedDecimalScale:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Xa.a,{id:"Timer",label:"Timer (minutes)",customInput:ge.a,defaultValue:this.state.formControls.Timer.value,onValueChange:function(t){return e.handleChange(t.floatValue,"Timer")},onFocus:function(e){e.target.select()},decimalScale:1,thousandSeparator:!0,fixedDecimalScale:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Xa.a,{id:"Temp1",label:"Temp1 (\u2103)",customInput:ge.a,defaultValue:this.state.formControls.Temp1.value,onValueChange:function(t){return e.handleChange(t.floatValue,"Temp1")},onFocus:function(e){e.target.select()},decimalScale:1,thousandSeparator:!0,fixedDecimalScale:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Xa.a,{id:"Temp2",label:"Temp2 (\u2103)",customInput:ge.a,defaultValue:this.state.formControls.Temp2.value,onValueChange:function(t){return e.handleChange(t.floatValue,"Temp2")},onFocus:function(e){e.target.select()},decimalScale:1,thousandSeparator:!0,fixedDecimalScale:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Xa.a,{id:"Temp2",label:"Temp2 (\u2103)",customInput:ge.a,defaultValue:this.state.formControls.Temp2.value,onValueChange:function(t){return e.handleChange(t.floatValue,"Temp2")},onFocus:function(e){e.target.select()},decimalScale:1,thousandSeparator:!0,fixedDecimalScale:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Xa.a,{id:"Temp3",label:"Temp3 (\u2103)",customInput:ge.a,defaultValue:this.state.formControls.Temp3.value,onValueChange:function(t){return e.handleChange(t.floatValue,"Temp3")},onFocus:function(e){e.target.select()},decimalScale:1,thousandSeparator:!0,fixedDecimalScale:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Xa.a,{id:"Temp4",label:"Temp4 (\u2103)",customInput:ge.a,defaultValue:this.state.formControls.Temp4.value,onValueChange:function(t){return e.handleChange(t.floatValue,"Temp4")},onFocus:function(e){e.target.select()},decimalScale:1,thousandSeparator:!0,fixedDecimalScale:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Xa.a,{id:"Temp5",label:"Temp5 (\u2103)",customInput:ge.a,defaultValue:this.state.formControls.Temp5.value,onValueChange:function(t){return e.handleChange(t.floatValue,"Temp5")},onFocus:function(e){e.target.select()},decimalScale:1,thousandSeparator:!0,fixedDecimalScale:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Xa.a,{id:"Temp6",label:"Temp6 (\u2103)",customInput:ge.a,defaultValue:this.state.formControls.Temp6.value,onValueChange:function(t){return e.handleChange(t.floatValue,"Temp6")},onFocus:function(e){e.target.select()},decimalScale:1,thousandSeparator:!0,fixedDecimalScale:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Xa.a,{id:"BiscuitTemp",label:"Biscuit Temp (\u2103)",customInput:ge.a,defaultValue:this.state.formControls.BiscuitTemp.value,onValueChange:function(t){return e.handleChange(t.floatValue,"BiscuitTemp")},onFocus:function(e){e.target.select()},decimalScale:1,thousandSeparator:!0,fixedDecimalScale:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Xa.a,{id:"BiscuitWeight",label:"Biscuit Weight (kg)",customInput:ge.a,defaultValue:this.state.formControls.BiscuitWeight.value,onValueChange:function(t){return e.handleChange(t.floatValue,"BiscuitWeight")},onFocus:function(e){e.target.select()},decimalScale:1,thousandSeparator:!0,fixedDecimalScale:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(ge.a,{id:"Event",label:"Significant Event",defaultValue:this.state.formControls.Event.value,onChange:function(t){return e.handleChange(t.target.value,"Event")},multiline:!0}))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=t.formControls;return e.formState.valid||Array.isArray(e.formState.errors)&&e.formState.errors.map((function(e){a[e.property].valid=!1,a[e.property].message=e.message})),{formState:e.formState,formControls:a}}}]),t}(r.a.Component),Rc=Ic,Lc={Factory:"",Datetime:new Date,Shift:"",DryerMachine:"",Buyer:"",Grade:"",Type:1,Lot:"",Val1:0,Val2:0,Timer:0,Temp1:0,Temp2:0,Temp3:0,Temp4:0,Temp5:0,Temp6:0,BiscuitTemp:0,BiscuitWeight:0,Event:"",CreatedAt:new Date,CreatedBy:"Admin",LastUpdatedAt:new Date,LastUpdatedBy:"Admin"},Vc=Lc,Bc=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).openDialog=function(e){return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.awrap(ka("confirmation","delete"));case 2:t.sent,a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:e,dialogMessage:r.a.createElement("span",null,"Are you sure to delete this record Factory",r.a.createElement("b",null,e.Factory.FctyCode," "),"in date",r.a.createElement("b",null,new Date(e.Datetime).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"})," "),"? This cannot be undone.")});case 4:case"end":return t.stop()}}))},a.closeDialog=function(){a.setState({dialogOpen:!1,currentDeleteData:null,dialogMessage:""})},a.openForm=function(e){void 0===e?a.setState({actionStatus:"Add",newData:Object(me.a)({},Vc)}):a.setState({actionStatus:"Update",newData:Object(me.a)({},e)}),a.setState({formOpen:!0,formState:{valid:!0,dirty:!1,errors:[]}})},a.closeForm=function(){a.setState({formOpen:!1,newData:{},actionStatus:""})},a.onSave=function(){var e=a.state.formState,t=Object(me.a)({},a.state.newData),n=Pc.validateFields(t);if(n.valid){var r=Object(je.a)(a.state.data);"Add"===a.state.actionStatus?(t.LastUpdatedBy=a.state.operator,t.CreatedBy=a.state.operator,Pc.add("",t).then((function(t){!0===t.code?(e.valid=!0,r.push(t.data),a.setState({data:r}),a.closeForm(),a.snackOpen("SPC data created successfully!","success")):(e.valid=!1,e.errors=t.errors,a.snackOpen("Please fix the error(s) highlighted to save the details!","error"))})).catch((function(e){a.snackOpen("Oops, something went wrong while processing your request!","error")}))):(t.LastUpdatedBy=a.state.operator,Pc.update("",t).then((function(n){if(!0===n.code){e.valid=!0;var o=r.find((function(e){return e._id===t._id})),s=r.indexOf(o);r[s]=n.data,a.setState({data:r}),a.closeForm(),a.snackOpen("SPC data updated successfully!","success")}else e.valid=!1,e.errors=n.errors,a.snackOpen("Please fix the error(s) highlighted to save the details!","error")})).catch((function(e){a.snackOpen("Oops, something went wrong while processing your request!","error")})))}else{e.valid=!1;var o=n.errors.map((function(e){var t={};return t.property=e.property,t.message=e.message,t}));e.errors=o,a.snackOpen("Please fix the error(s) highlighted to save the details!","error")}a.setState({formState:e})},a.onDelete=function(){null!==a.state.currentDeleteData&&Pc.delete("".concat(a.state.currentDeleteData._id)).then((function(e){if(!0===e.code){var t=Object(je.a)(a.state.data),n=t.indexOf(a.state.currentDeleteData);t.splice(n,1),a.snackOpen("Successfully Deleted!","success"),a.closeDialog(),a.setState({data:t})}else a.snackOpen("Oops, something went wrong while processing your request!","error")}))},a.onEdit=function(e){a.openForm(e)},a.state={columns:[{title:"Factory",field:"Factory",render:function(e){return r.a.createElement("span",null,void 0===e.Factory?"":e.Factory.FctyCode)}},{title:"Date",field:"Datetime",render:function(e){return r.a.createElement("span",null,new Date(e.Datetime).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric"}))}},{title:"Time",field:"Datetime",render:function(e){return r.a.createElement("span",null,new Date(e.Datetime).toLocaleString("en-GB",{hour:"numeric",minute:"numeric"}))}},{title:"Dryer Machine",field:"DryerMachine",render:function(e){return r.a.createElement("span",null,void 0===e.DryerMachine?"":e.DryerMachine.MachLstCode)}},{title:"Buyer",field:"Buyer",render:function(e){return r.a.createElement("span",null,void 0===e.Buyer?"":e.Buyer.name)}},{title:"Grade",field:"Grade",render:function(e){return r.a.createElement("span",null,void 0===e.Grade?"":e.Grade.GradeCode)}},{title:"Type",field:"Type",lookup:{1:"PO",2:"Mooney"}},{title:"Lot",field:"Lot"},{title:"Value 1",field:"Val1",render:function(e){return r.a.createElement(Xa.a,{value:e.Val1,displayType:"text",decimalScale:1,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"Value 2",field:"Val2",render:function(e){return r.a.createElement(Xa.a,{value:e.Val2,displayType:"text",decimalScale:1,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"Timer",field:"Timer",render:function(e){return r.a.createElement(Xa.a,{value:e.Timer,displayType:"text",decimalScale:1,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"Temp 1",field:"Temp1",render:function(e){return r.a.createElement(Xa.a,{value:e.Temp1,displayType:"text",decimalScale:1,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"Temp 2",field:"Temp2",render:function(e){return r.a.createElement(Xa.a,{value:e.Temp2,displayType:"text",decimalScale:1,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"Temp 3",field:"Temp3",render:function(e){return r.a.createElement(Xa.a,{value:e.Temp3,displayType:"text",decimalScale:1,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"Temp 4",field:"Temp4",render:function(e){return r.a.createElement(Xa.a,{value:e.Temp4,displayType:"text",decimalScale:1,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"Temp 5",field:"Temp5",render:function(e){return r.a.createElement(Xa.a,{value:e.Temp5,displayType:"text",decimalScale:1,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"Temp 6",field:"Temp6",render:function(e){return r.a.createElement(Xa.a,{value:e.Temp6,displayType:"text",decimalScale:1,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"Biscuit Temp(C)",field:"BiscuitTemp",render:function(e){return r.a.createElement(Xa.a,{value:e.BiscuitTemp,displayType:"text",decimalScale:1,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"Biscuit",field:"BiscuitWeight",render:function(e){return r.a.createElement(Xa.a,{value:e.BiscuitWeight,displayType:"text",decimalScale:1,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"Significant Event",field:"Event"},{title:"Operator",field:"LastUpdatedBy"},{title:"Last Updated",field:"LastUpdatedAt",render:function(e){return r.a.createElement("span",null,new Date(e.LastUpdatedAt).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}))},defaultSort:"desc"}],data:[],currentDeleteData:null,newData:Vc,formOpen:!1,dialogOpen:!1,dialogMessage:"",disabled:!1,actionStatus:"",formState:{valid:!0,dirty:!1,errors:[]},operator:"Admin"},a.openDialog=a.openDialog.bind(Object(Pe.a)(a)),a.closeDialog=a.closeDialog.bind(Object(Pe.a)(a)),a.openForm=a.openForm.bind(Object(Pe.a)(a)),a.closeForm=a.closeForm.bind(Object(Pe.a)(a)),a.snackOpen=a.snackOpen.bind(Object(Pe.a)(a)),a.snackClose=a.snackClose.bind(Object(Pe.a)(a)),a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initSPCData()}},{key:"initSPCData",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.awrap(Pc.get("").then((function(t){!0===t.code&&e.setState({data:t.data})})));case 2:case"end":return t.stop()}}))}},{key:"handleChange",value:function(e,t){var a=this.state.newData;a[t]=e;var n=this.state.formState;"Factory"===t&&(a.Shift="",a.DryerMachine="",a.Buyer="",a.Grade=""),"Buyer"===t&&(a.Grade=""),n.valid=!0,this.setState({newData:a,formState:n})}},{key:"snackOpen",value:function(e,t){this.setState({alertOpen:!0,alertMessage:e,alertClass:t})}},{key:"snackClose",value:function(){this.setState({alertOpen:!1,alertMessage:"",alertClass:"",currentDeleteData:null})}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{style:{margin:"20px 20px 10px 0px"}},r.a.createElement(Ve.a,{title:"SPC Data",columns:this.state.columns,data:this.state.data,components:{Toolbar:function(t){return r.a.createElement("div",null,r.a.createElement(Le.MTableToolbar,t),r.a.createElement("div",{style:{padding:"0px 15px"}},r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:function(){return e.openForm()},"aria-label":"add"},r.a.createElement(wt.a,null))))}},actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.data,columns:e.state.columns,fileName:"SPC Data"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.initSPCData()}},{icon:"add_box",tooltip:"Add",isFreeAction:!0,onClick:function(t){return e.openForm()}},{icon:"edit",tooltip:"Edit",onClick:function(t,a){return e.openForm(a)}},{icon:"delete",tooltip:"Delete",onClick:function(t,a){return e.openDialog(a)}}],options:{}}),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:6e3,open:this.state.alertOpen,onClose:this.snackClose,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}),r.a.createElement(Ae.a,{fullScreen:!0,open:this.state.formOpen,onClose:this.closeForm,TransitionComponent:this.Transition},r.a.createElement(w.a,{className:"appBar"},r.a.createElement(F.a,null,r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:this.closeForm,"aria-label":"close"},r.a.createElement(Vt.a,null)),r.a.createElement(x.a,{variant:"h6",className:"app-title"},"SPC Data Details"),r.a.createElement(he.a,{color:"inherit",disabled:this.state.disabled,onClick:this.onSave}," ","save"," "))),r.a.createElement(_e.a,null,r.a.createElement(Rc,{handleChange:this.handleChange,formData:this.state.newData,formState:this.state.formState}))),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.closeDialog,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.closeDialog,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDelete,color:"primary"},"Delete"))))}}]),t}(r.a.Component),Uc=Bc,qc={properties:{Name:{description:"",type:"string",messages:{conform:"Name cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},Unit:{description:"",type:"string",messages:{conform:"Unit cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},UsedFor:{description:"",type:"number",messages:{conform:"Used for cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},Description:{description:"",type:"string"},SupportDocInfo:{description:"",type:"array"},CreatedAt:{type:"any"},CreatedBy:{type:"string"},LastUpdatedAt:{type:"any"},LastUpdatedBy:{type:"string"}}},Gc=a(24),Wc={validateFields:function(e){return Gc.validate(e,qc,{cast:!0})},get:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="chemical/"+e,a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 2:case"end":return a.stop()}}))},getOne:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("chemical/").concat(e),a.next=3,l.a.awrap(We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 3:return a.abrupt("return",a.sent);case 4:case"end":return a.stop()}}))},getFileBuffer:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("chemical/").concat(e),a.next=3,l.a.awrap(Ye(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data?{code:!0,formValid:!0,message:"Succeed",data:e.data}:200===e.status&&null===e.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 3:return a.abrupt("return",a.sent);case 4:case"end":return a.stop()}}))},getFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("chemical-filter/").concat(e),a.next=3,l.a.awrap(We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 3:return a.abrupt("return",a.sent);case 4:case"end":return a.stop()}}))},update:function(e,t){return Qe("chemical/"+e,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Updated",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="chemical/"+e,n.abrupt("return",He(a,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Added",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,formValid:!0,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("chemical/"+e).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))}},Hc=Wc,Qc={Name:"",Unit:"",UsedFor:"",Description:"",SupportDocument:[],CreatedAt:Date.now(),CreatedBy:"Admin",LastUpdatedAt:Date.now(),LastUpdatedBy:"Admin"},zc=(a(872),a(873),(new Date).getTime(),{properties:{Remarks:{description:"",type:"string",required:!0,allowEmpty:!1,messages:{allowEmpty:"Remarks cannot be empty.",conform:"Remarks cannot be empty.",required:"Remarks cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},Document:{description:"",type:["object","array"],required:!0,allowEmpty:!1,messages:{allowEmpty:"File cannot be empty.",conform:"File cannot be empty.",required:"File cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},CreatedAt:{type:"any",default:Date.now()},CreatedBy:{type:"string",default:""},LastUpdatedAt:{type:"any",default:Date.now()},LastUpdatedBy:{type:"string",default:""}}}),Yc=a(24),Kc={validateFields:function(e){return Yc.validate(e,zc,{cast:!0})},getSupportDoc:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="supportDocInfo/"+e,a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 2:case"end":return a.stop()}}))},getSupportDocFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("supportDocInfo/").concat(e),a.next=3,l.a.awrap(We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 3:return a.abrupt("return",a.sent);case 4:case"end":return a.stop()}}))},getOneSupportDoc:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("supportDocInfo/").concat(e),a.next=3,l.a.awrap(We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 3:return a.abrupt("return",a.sent);case 4:case"end":return a.stop()}}))},update:function(e,t){return Je("supportDocInfo/"+e,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Updated",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="supportDocInfo/"+e,n.abrupt("return",Ke(a,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Added",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,formValid:!0,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("supportDocInfo/"+e).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))}},Jc=Kc,Zc=a(23),Xc={Remarks:{valid:!0,message:"",value:""},Document:{valid:!0,message:"",value:""}},$c=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).dialogClose=function(){a.setState({dialogOpen:!1,currentDeleteData:null})},a.state={columns:[{title:"Remarks",field:"Remarks",render:function(e){return r.a.createElement("span",null,e.Remarks)},editComponent:function(e){return r.a.createElement(ge.a,{autoFocus:!0,margin:"dense",id:"remarks",label:"Remarks",type:"text",defaultValue:e.rowData.Remarks,onChange:function(t){a.handleChange(t.target.value,"Remarks",e.rowData)}})}},{title:"Document",field:"Document",render:function(e){return r.a.createElement(he.a,{href:"#text-buttons",className:"",color:"primary",onClick:function(t){a.downloadDocument(e)}},void 0!==e.Document?e.Document.name:e.Name)},editComponent:function(e){return r.a.createElement("div",null,r.a.createElement("input",{accept:"pdf",className:"",id:"file-upload",color:"primary",type:"file",style:{display:"none"},onChange:function(t){a.handleChange(t.target.files[0],"Document",e.rowData)}}),r.a.createElement("label",{htmlFor:"file-upload"},r.a.createElement(fo.a,{size:"small",color:"primary",component:"span","aria-label":"add",className:""},r.a.createElement(wt.a,null)),r.a.createElement("span",null,void 0===e.rowData.Document?e.rowData.Name:e.rowData.Document.name)),r.a.createElement(Ea.a,{htmlFor:"file-upload",style:{paddingTop:5},error:!0},a.state.formControls.Document.valid?"":a.state.formControls.Document.message))}}],data:a.props.formData,formControls:Zc(Xc),dialogOpen:!1,currentDeleteData:null,dialogMessage:"",alertClass:"",alertOpen:!1,alertMessage:"",formState:{dirty:!1,valid:!0}},a.snackOpen=a.snackOpen.bind(Object(Pe.a)(a)),a.snackClose=a.snackClose.bind(Object(Pe.a)(a)),a.dialogOpen=a.dialogOpen.bind(Object(Pe.a)(a)),a.dialogClose=a.dialogClose.bind(Object(Pe.a)(a)),a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a.downloadDocument=a.downloadDocument.bind(Object(Pe.a)(a)),a.OnDelete=a.OnDelete.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"initFormControl",value:function(){this.setState({formControls:Zc(Xc)})}},{key:"snackOpen",value:function(e,t){this.setState({alertOpen:!0,alertMessage:e,alertClass:t})}},{key:"snackClose",value:function(){this.setState({alertOpen:!1,alertMessage:"",alertClass:""})}},{key:"dialogOpen",value:function(e,t){this.setState({dialogOpen:!0,currentDeleteData:t,dialogMessage:r.a.createElement("span",null,"Are you sure to delete this record ",r.a.createElement("b",null,t.Name)," ? This cannot be undone.")})}},{key:"handleChange",value:function(e,t,a){var n=this.state.formControls,r=this.state.formState;if(r.dirty=!0,""===e||null===e||void 0===e)n[t].valid=!1,n[t].message="".concat(t," cannot be empty");else if("Document"===t){var o=vo(e.size),s=e.type;o>2||"application/pdf"!==s?(n.Document.valid=!1,n.Document.message=o>2?"File cannot be exceed 2MB.":"Only pdf is allowed.",n.Document.value=""):(n.Document.valid=!0,n.Document.message="",n.Document.value=e,a.Document=e)}else n[t].valid=!0,n[t].message="",n[t].value=e,a[t]=e;this.setState({formControls:n,formState:r})}},{key:"downloadDocument",value:function(e){var t=this;void 0!==e&&null!==e&&(void 0!==e._id&&null!==e._id&&Jc.getOneSupportDoc("".concat(this.props.parentName,"/").concat(this.props.parentId,"/").concat(e._id)).then((function(e){!0===e.code?Co(new Uint8Array(e.data.FileData.data),e.data.Name):t.snackOpen("Oops, Error while downloading document!","error")})).catch((function(e){t.snackOpen("Oops, something went wrong while processing your request!","error")})),void 0!==e.Document&&null!==e.Document&&Co(e.Document,e.Document.name))}},{key:"OnDelete",value:function(){if(null!==this.state.currentDeleteData){var e=Object(je.a)(this.state.data),t=e.indexOf(this.state.currentDeleteData);e.splice(t,1),this.dialogClose(),this.props.deleteSupportDoc(e),this.setState({data:e})}}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{style:{margin:"20px 0px 10px 0px",width:"100%"}},r.a.createElement(Ve.a,{title:"UPLOAD SUPPORTING DOCUMENT (MAX. 2 MB)",columns:this.state.columns,data:this.state.data,editable:{onRowAdd:function(t){return new Promise((function(a,n){setTimeout((function(){var r=Object(je.a)(e.state.data),o=e.state.formControls,s=Jc.validateFields(t);if(s.valid){var i;i=t,r.push(i),e.setState({data:r},(function(){return a()})),e.props.addSupportDoc(t)}else n(),s.errors.map((function(e){o[e.property].valid=!1,o[e.property].message=e.message})),e.setState({formControls:o})}),1e3)}))},onRowUpdate:function(t,a){return new Promise((function(n,r){setTimeout((function(){var o=Object(je.a)(e.state.data),s=e.state.formControls,i=Jc.validateFields(t);if(i.valid){var l=o.indexOf(a);o[l]=t,e.setState({data:o},(function(){return n()})),e.props.updateSupportDoc(t,l)}else r(),i.errors.map((function(e){s[e.property].valid=!1,s[e.property].message=e.message})),e.setState({formControls:s})}),1e3)}))}},actions:[{icon:"delete",tooltip:"Delete",onClick:function(t,a){return e.dialogOpen(t,a)}}],icons:{Clear:function(t){return r.a.createElement(Nt.a,{onClick:function(){e.initFormControl()},style:{padding:0,margin:0}})}},options:{search:!1,actionsColumnIndex:-1}}),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:600,open:this.state.alertOpen,onClose:this.snackClose,message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.dialogClose,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.dialogClose,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:function(){return e.OnDelete()},color:"primary"},"Delete"))))}}]),t}(r.a.Component),eu=$c,tu=eu,au=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).updateSupportDoc=function(e,t){if(void 0!==t&&void 0!==e){var n=a.state.supportDoc;n[t]=e,a.setState({supportDoc:n}),a.props.handleChange(n,"SupportDocument")}},a.addSupportDoc=function(e){if(void 0!==e){var t=a.state.supportDoc;t.push(e),a.setState({supportDoc:t}),a.props.handleChange(t,"SupportDocument")}},a.deleteSupportDoc=function(e){void 0!==e&&null!==e&&(a.setState({supportDoc:e}),a.props.handleChange(e,"SupportDocument"))},a.state={formControls:{Name:{valid:!0,message:"",value:a.props.formData.Name},Unit:{valid:!0,message:"",value:a.props.formData.Unit},UsedFor:{valid:!0,message:"",value:a.props.formData.UsedFor},Description:{valid:!0,message:"",value:a.props.formData.Description},SupportDocument:{valid:!0,message:"",value:a.props.formData.SupportDocument}},chemicalUsedFor:[],supportDoc:a.props.formData.SupportDocument},a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a.renderChemicalUsedForOptions=a.renderChemicalUsedForOptions.bind(Object(Pe.a)(a)),a.updateSupportDoc=a.updateSupportDoc.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initChemicalUsedFor()}},{key:"initChemicalUsedFor",value:function(){var e=this;Oa("chemicalUsedFor.json").then((function(e){return e.data})).then((function(t){e.setState({chemicalUsedFor:t.ChemicalUsedFor})}))}},{key:"renderChemicalUsedForOptions",value:function(){return this.state.chemicalUsedFor.map((function(e,t){return r.a.createElement(et.a,{label:"Select used for",value:e.Value,key:e.Value,name:e.Name},e.Name)}))}},{key:"handleChange",value:function(e,t){var a=this.state.formControls,n=this.state.formState;void 0===e||0===e.length?(a[t].valid=!1,a[t].message="".concat(t," cannot be empty.")):(a[t].valid=!0,a[t].message=""),a[t].value=e,this.props.handleChange(e,t),n.dirty=!0,this.setState({formControls:a,formState:n})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"form-container"},r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-evenly",alignItems:"center",md:6,xs:12,sm:12,xl:8,lg:8},r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(ge.a,{required:!0,id:"name",label:"Name",error:!this.state.formControls.Name.valid,helperText:this.state.formControls.Name.message,defaultValue:this.state.formControls.Name.value,onChange:function(t){return e.handleChange(t.target.value.trim(),"Name")}})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Ea.a,{shrink:!0,htmlFor:"ddlUnit",required:!0,error:!this.state.formControls.Unit.valid},"Unit"),r.a.createElement(ba.a,{id:"ddlUnit",value:this.state.formControls.Unit.value,error:!this.state.formControls.Unit.valid,onChange:function(t){return e.handleChange(t.target.value,"Unit")},displayEmpty:!0},r.a.createElement(et.a,{value:""}," ",r.a.createElement("em",null,"Select unit")," "),r.a.createElement(et.a,{value:"Kg"}," Kg "),r.a.createElement(et.a,{value:"Liter"}," Liter ")),r.a.createElement(Sa.a,{error:!this.state.formControls.Unit.valid,style:{display:this.state.formControls.Unit.valid?"none":""}},this.state.formControls.Unit.valid?"":!this.state.formControls.Unit.message)),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Ea.a,{shrink:!0,htmlFor:"ddlUsedFor",required:!0,error:!this.state.formControls.UsedFor.valid},"Used For"),r.a.createElement(ba.a,{id:"ddlUsedFor",value:this.state.formControls.UsedFor.value,error:!this.state.formControls.UsedFor.valid,onChange:function(t){return e.handleChange(t.target.value,"UsedFor")},displayEmpty:!0},r.a.createElement(et.a,{value:""}," ",r.a.createElement("em",null,"Select used for")," "),this.renderChemicalUsedForOptions()),r.a.createElement(Sa.a,{error:!this.state.formControls.UsedFor.valid,style:{display:this.state.formControls.UsedFor.valid?"none":""}},this.state.formControls.UsedFor.valid?"":!this.state.formControls.UsedFor.message)),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(ge.a,{id:"Description",label:"Description",defaultValue:this.state.formControls.Description.value,onChange:function(t){return e.handleChange(t.target.value,"Description")}})),r.a.createElement(be.a,{container:!0,direction:"row",justify:"space-around",alignItems:"center",spacing:1},r.a.createElement(tu,{parentName:"Chemical",parentId:this.props.formData._id,formData:this.state.formControls.SupportDocument.value,updateSupportDoc:this.updateSupportDoc,addSupportDoc:this.addSupportDoc,deleteSupportDoc:this.deleteSupportDoc}))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=t.formControls;return e.formState.valid||Array.isArray(e.formState.errors)&&e.formState.errors.map((function(e){a[e.property].valid=!1,a[e.property].message=e.message})),{formState:e.formState,formControls:a}}}]),t}(r.a.Component),nu=au,ru={Factory:"",Date:new Date,Shift:"",CausticSoda:0,Checker:"",TrolleyCleaning_Detail:[]},ou=ru,su=a(23),iu=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).openDialog=function(e){a.setState({dialogOpen:!0,currentDeleteData:e,dialogMessage:r.a.createElement("span",null,"Are you sure to delete this record ",r.a.createElement("b",null,e.Name)," ? This cannot be undone.")})},a.closeDialog=function(){a.setState({dialogOpen:!1,currentDeleteData:null,dialogMessage:""})},a.openForm=function(e){void 0===e?a.setState({formOpen:!0,actionStatus:"Add",newData:su(Qc)}):a.setState({formOpen:!0,actionStatus:"Update",newData:e})},a.closeForm=function(){a.setState({formOpen:!1,newData:{},actionStatus:"",formState:{valid:!0,dirty:!1,errors:[]}})},a.onSave=function(){var e=a.state.formState,t=Object(me.a)({},a.state.newData),n=Hc.validateFields(t);if(n.valid){var r=Object(je.a)(a.state.data),o=a.getFormDataFromObject(t);if("Add"===a.state.actionStatus)Hc.add("",o).then((function(t){!0===t.code?(e.valid=!0,r.push(t.data),a.setState({data:r}),a.closeForm(),a.snackOpen("Successfully added!","success")):(e.valid=!1,e.errors=t.errors,a.snackOpen("Please fix the error(s) highlighted to save the details!","error"))})).catch((function(e){a.snackOpen("Oops, something went wrong while processing your request!","error")}));else{var s=Object(je.a)(a.state.data),i=s.find((function(e){return e._id===t._id})),l=s.indexOf(i);Hc.update("",o).then((function(t){!0===t.code?(e.valid=!0,s[l]=t.data,a.setState({data:s}),a.closeForm(),a.snackOpen("Successfully Updated!","success")):(e.valid=!1,e.errors=t.errors,a.snackOpen("Please fix the error(s) highlighted to save the details!","error"))})).catch((function(e){a.snackOpen("Oops, something went wrong while processing your request!","error")}))}}else{e.valid=!1;var c=n.errors.map((function(e){var t={};return t.property=e.property,t.message=e.message,t}));e.errors=c,a.snackOpen("Please fix the error(s) highlighted to save the details!","error")}a.setState({formState:e})},a.onDelete=function(){null!==a.state.currentDeleteData&&Hc.delete("".concat(a.state.currentDeleteData._id)).then((function(e){if(!0===e.code){var t=Object(je.a)(a.state.data),n=t.indexOf(a.state.currentDeleteData);t=t.splice(n,1),a.closeDialog(),a.snackOpen("Successfully Deleted!","success"),a.setState({data:t})}else a.snackOpen("Oops, something went wrong while processing your request!","error")}))},a.onEdit=function(e){a.openForm(e)},a.state={columns:[{title:"Chemical Name",field:"Name"},{title:"Chemical Unit",field:"Unit"},{title:"Description",field:"Description"},{title:"Chemical Used For",field:"UsedFor",lookup:{}},{title:"Operator",field:"LastUpdatedBy"},{title:"Last Updated",field:"LastUpdatedAt",render:function(e){return r.a.createElement("span",null,void 0===e?"":new Date(e.LastUpdatedAt).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}))}}],data:[],currentDeleteData:null,newData:{},alertClass:"",alertOpen:!1,alertMessage:"",formOpen:!1,dialogOpen:!1,dialogMessage:"",disabled:!1,actionStatus:"",formState:{valid:!0,dirty:!1,errors:[]}},a.chemicalModel=su(Qc),a.openDialog=a.openDialog.bind(Object(Pe.a)(a)),a.closeDialog=a.closeDialog.bind(Object(Pe.a)(a)),a.openForm=a.openForm.bind(Object(Pe.a)(a)),a.closeForm=a.closeForm.bind(Object(Pe.a)(a)),a.snackOpen=a.snackOpen.bind(Object(Pe.a)(a)),a.snackClose=a.snackClose.bind(Object(Pe.a)(a)),a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initChemical(),this.initChemicalUsedFor()}},{key:"initChemical",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.awrap(Hc.get("").then((function(t){!0===t.code&&e.setState({data:t.data})})));case 2:case"end":return t.stop()}}))}},{key:"initChemicalUsedFor",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:Oa("chemicalUsedFor.json").then((function(e){return e.data})).then((function(t){var a={};t.ChemicalUsedFor.forEach((function(e){return a[e.Value]=e.Name}));var n=Object(je.a)(e.state.columns),r=n.findIndex((function(e){return"UsedFor"===e.field}));n[r].lookup=a,e.setState({columns:n})}));case 1:case"end":return t.stop()}}))}},{key:"handleChange",value:function(e,t){var a=this.state.newData;a[t]=e;var n=this.state.formState;n.valid=!0,n.errors.map((function(e){e.hasOwnProperty(t)&&(e[t].valid=!0)})),this.setState({newData:a,formState:n})}},{key:"snackOpen",value:function(e,t){this.setState({alertOpen:!0,alertMessage:e,alertClass:t})}},{key:"snackClose",value:function(){this.setState({alertOpen:!1,alertMessage:"",alertClass:"",currentDeleteData:null})}},{key:"getFormDataFromObject",value:function(e){var t=this,a=new FormData;return void 0!==e&&Object.keys(e).map((function(n,r){if("SupportDocument"===n){var o=new Array;if("Add"===t.state.actionStatus)e[n].map((function(e){o.push({Remarks:e.Remarks,DocumentName:e.Document.name}),a.append("file",e.Document)}));else{var s=(o=e[n]).filter((function(e){return void 0!==e.Document}));void 0!==s&&s.length>0&&s.map((function(e){var t=o.indexOf(e);o[t]={Remarks:e.Remarks,DocumentName:e.Document.name},a.append("file",e.Document)}))}a.set("SupportDocument",JSON.stringify(o))}else a.append(n,e[n])})),a}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{style:{margin:"20px 20px 10px 0px"}},r.a.createElement(Ve.a,{title:"Chemical",columns:this.state.columns,data:this.state.data,components:{Toolbar:function(t){return r.a.createElement("div",null,r.a.createElement(Le.MTableToolbar,t),r.a.createElement("div",{style:{padding:"0px 15px"}},r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:function(){return e.openForm(t.rowData)},"aria-label":"add"},r.a.createElement(wt.a,null))))}},actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.data,columns:e.state.columns,fileName:"Chemical"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.initChemical()}},{icon:"edit",tooltip:"Edit User",onClick:function(t,a){return e.openForm(a)}},{icon:"delete",tooltip:"Delete User",onClick:function(t,a){return e.openDialog(a)}}],options:{}}),r.a.createElement(Ae.a,{fullScreen:!0,open:this.state.formOpen,onClose:this.closeForm,TransitionComponent:this.Transition},r.a.createElement(w.a,{className:"appBar"},r.a.createElement(F.a,null,r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:this.closeForm,"aria-label":"close"},r.a.createElement(Vt.a,null)),r.a.createElement(x.a,{variant:"h6",className:"app-title"},"Chemical"),r.a.createElement(he.a,{color:"inherit",disabled:this.state.disabled,onClick:this.onSave},"save"))),r.a.createElement(_e.a,null,r.a.createElement(nu,{handleChange:this.handleChange,formData:this.state.newData,formState:this.state.formState}))),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:600,open:this.state.alertOpen,onClose:this.snackClose,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.closeDialog,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.closeDialog,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDelete,color:"primary"},"Delete"))))}}]),t}(r.a.Component),lu=iu,cu=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={buyerApprovalGradeData:[],disabled:!1},a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){""!==this.props.selectedBuyer&&void 0!==this.props.selectedBuyer&&""!==this.props.selectedFactory&&void 0!==this.props.selectedFactory&&this.fetchBuyerApprovalGradeData()}},{key:"componentDidUpdate",value:function(e){this.props.selectedFactory===e.selectedFactory&&this.props.selectedBuyer===e.selectedBuyer||(void 0!==this.props.selectedFactory&&""!==this.props.selectedFactory&&void 0!==this.props.selectedBuyer&&""!==this.props.selectedBuyer?this.fetchBuyerApprovalGradeData():this.setState({buyerApprovalGradeData:[]}))}},{key:"fetchBuyerApprovalGradeData",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:ol.getFilter("?Factory=".concat(this.props.selectedFactory,"&Buyer=").concat(this.props.selectedBuyer,"&Inactive=false")).then((function(t){if(!0===t.code&&t.data.length>0){var a=t.data[0].BuyerApprovedGrade.map((function(e){if(!1===e.Inactive)return e.Grade}));e.setState({buyerApprovalGradeData:a})}})).catch((function(e){throw e}));case 1:case"end":return t.stop()}}),null,this)}},{key:"renderOptions",value:function(){return this.state.buyerApprovalGradeData.map((function(e,t){return r.a.createElement(et.a,{label:"Select Grade",value:e._id,key:e._id,name:e.GradeCode},e.GradeName)}))}},{key:"handleChange",value:function(e,t){var a=this.state.buyerApprovalGradeData.find((function(t){return t._id===e.target.value}));void 0!==a?this.props.handleChange(a,t,this.props.required):this.props.handleChange("",t,this.props.required)}},{key:"render",value:function(){var e=this;return r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(Ea.a,{shrink:!0,htmlFor:"buyerApprovalGrade",required:this.props.required,error:!this.props.formControl.valid},"Product Grade"),r.a.createElement(ba.a,{id:this.props.propertyName,value:void 0===this.props.selectedValue._id?"":this.props.selectedValue._id,error:!this.props.formControl.valid,onChange:function(t){return e.handleChange(t,e.props.propertyName)},margin:"dense",displayEmpty:!0},r.a.createElement(et.a,{value:""},r.a.createElement("em",null,this.props.isRework?"Block Rubber":"Select grade"," ")),this.renderOptions()),r.a.createElement(Sa.a,{error:!this.props.formControl.valid,style:{display:this.props.formControl.valid?"none":""}},this.props.formControl.valid?"":this.props.formControl.message))}}]),t}(n.Component),uu=cu,du=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={packingTypeData:[]},a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initPackingTypeData()}},{key:"initPackingTypeData",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.awrap(pt.getFilter("?PckTypeInactive=false").then((function(t){!0===t.code&&e.setState({packingTypeData:t.data})})).catch((function(e){throw e})));case 2:case"end":return t.stop()}}))}},{key:"renderOptions",value:function(){return this.state.packingTypeData.map((function(e,t){return r.a.createElement(et.a,{label:"Select packing type",value:e._id,key:e._id,name:e.PckTypeName},e.PckTypeName)}))}},{key:"handleChange",value:function(e,t){var a=this.state.packingTypeData.find((function(t){return t._id===e.target.value}));void 0!==a&&(void 0===this.props.rowData?this.props.handleChange(a,t):this.props.handleChange(a,t,this.props.rowData))}},{key:"render",value:function(){var e=this;return r.a.createElement(ya.a,{style:{width:"100%",margin:4},margin:"dense"},r.a.createElement(Ea.a,{shrink:!0,required:!0,error:!this.props.formControl.valid},"Packing Type"),r.a.createElement(ba.a,{id:"packingType",value:void 0===this.props.rowData?void 0===this.props.selectedValue._id?this.props.selectedValue:this.props.selectedValue._id:0===Object.keys(this.props.rowData).length||void 0===this.props.rowData[this.props.propertyName]||null===this.props.rowData[this.props.propertyName]?"":void 0===this.props.rowData[this.props.propertyName]._id?this.props.rowData[this.props.propertyName]:this.props.rowData[this.props.propertyName]._id,error:void 0!==this.props.formControl&&!this.props.formControl.valid,onChange:function(t){return e.handleChange(t,e.props.propertyName)},displayEmpty:!0},r.a.createElement(et.a,{value:""},r.a.createElement("em",null,"Select packing type ")),this.renderOptions()),r.a.createElement(Sa.a,{error:void 0!==this.props.formControl&&!this.props.formControl.valid,style:{display:void 0===this.props.formControl||this.props.formControl.valid?"none":""}},void 0===this.props.formControl||this.props.formControl.valid?"":this.props.formControl.message))}}]),t}(n.Component),mu=du,pu=(a(874),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={brokerData:[]},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initBroker()}},{key:"initBroker",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.awrap(ji.getBroker("").then((function(t){if(!0===t.code){var a=Object(je.a)(e.state.brokerData);a=t.data,e.setState({brokerData:a})}})));case 2:case"end":return t.stop()}}))}},{key:"renderOptions",value:function(){return this.state.brokerData.map((function(e,t){return r.a.createElement(et.a,{label:"Select Broker",value:e._id,key:e._id,name:e.Name},r.a.createElement(E.a,{style:{width:"100%"}},r.a.createElement(b.a,{alignItems:"flex-start"},r.a.createElement(S.a,{primary:e.Name,style:{width:"50%"}}),r.a.createElement(S.a,{primary:e.Description,style:{width:"50%"}}))))}))}},{key:"handleChange",value:function(e,t){var a=this.state.brokerData.find((function(t){return t._id===e.target.value}));void 0!==a?this.props.handleChange(a,t,this.props.required):this.props.handleChange("",t,this.props.required)}},{key:"render",value:function(){var e=this;return r.a.createElement(ya.a,{style:{width:"100%"}},r.a.createElement(Ea.a,{shrink:!0,htmlFor:"broker",required:this.props.required,error:!this.props.formControl.valid},"broker - Code"),r.a.createElement(ba.a,{id:this.props.propertyName,value:void 0===this.props.selectedValue._id?"":this.props.selectedValue._id,error:!this.props.formControl.valid,onChange:function(t){return e.handleChange(t,e.props.propertyName)},margin:"dense",displayEmpty:!0},r.a.createElement(et.a,{value:""},r.a.createElement("em",null,"Select broker")),this.renderOptions()),r.a.createElement(Sa.a,{error:!this.props.formControl.valid,style:{display:this.props.formControl.valid?"none":""}},this.props.formControl.valid?"":this.props.formControl.message))}}]),t}(r.a.Component)),fu=pu,hu=(a(875),{properties:{Destination:{description:"",type:"string",required:!0,allowEmpty:!1,messages:{allowEmpty:"Destination cannot be empty.",conform:"Destination cannot be empty.",required:"Destination cannot be empty."}},Country:{description:"",type:"string",required:!0,allowEmpty:!1,messages:{allowEmpty:"Country cannot be empty.",conform:"Country cannot be empty.",required:"Country cannot be empty."}},Inactive:{type:"boolean",default:!1},Latitude:{description:"",type:"string"},Longitude:{description:"",type:"string"},CreatedAt:{type:"any",default:Date.now()},CreatedBy:{type:"string",default:""},LastUpdatedAt:{type:"any",default:Date.now()},LastUpdatedBy:{type:"string",default:""}}}),gu=a(24),yu={validateFields:function(e){return gu.validate(e,hu,{cast:!0})},get:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="destination/"+e,a.abrupt("return",We(t).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},getFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("destination-filter/").concat(e),a.abrupt("return",We(t).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},getOne:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("destination/").concat(e),a.abrupt("return",We(t).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},update:function(e,t){return Qe("destination/"+e,t).then((function(e){return console.log(e),200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Updated",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="destination/"+e,n.abrupt("return",He(a,t).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Added",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,formValid:!0,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("destination/"+e).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))}},vu=yu,Cu=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={destinationData:[]},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initDestination()}},{key:"initDestination",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.awrap(vu.getOne("?Inactive=false").then((function(t){if(!0===t.code){var a=t.data;e.setState({destinationData:a})}})));case 2:case"end":return t.stop()}}))}},{key:"renderOptions",value:function(){return this.state.destinationData.map((function(e,t){return r.a.createElement(et.a,{label:"Select Destination",value:e._id,key:e._id,name:e.Destination},e.Destination)}))}},{key:"handleChange",value:function(e,t){var a=this.state.destinationData.find((function(t){return t._id===e.target.value}));void 0!==a?this.props.handleChange(a,t,this.props.required):this.props.handleChange("",t,this.props.required)}},{key:"render",value:function(){var e=this;return r.a.createElement(ya.a,{style:{width:"100%"}},r.a.createElement(Ea.a,{shrink:!0,htmlFor:"destination",required:this.props.required,error:!this.props.formControl.valid},"Destination"),r.a.createElement(ba.a,{id:this.props.propertyName,value:void 0===this.props.selectedValue._id?"":this.props.selectedValue._id,error:!this.props.formControl.valid,onChange:function(t){return e.handleChange(t,e.props.propertyName)},margin:"dense",displayEmpty:!0},r.a.createElement(et.a,{value:""},r.a.createElement("em",null,"Select destination")),this.renderOptions()),r.a.createElement(Sa.a,{error:!this.props.formControl.valid,style:{display:this.props.formControl.valid?"none":""}},this.props.formControl.valid?"":this.props.formControl.message))}}]),t}(r.a.Component),Du=Cu,Eu=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={formControls:{Factory:{valid:!0,message:"",value:a.props.formData.Factory},Buyer:{valid:!0,message:"",value:a.props.formData.Buyer},ProductGrade:{valid:!0,message:"",value:a.props.formData.ProductGrade},Contract:{valid:!0,message:"",value:a.props.formData.Contract},Broker:{valid:!0,message:"",value:null===a.props.formData.Broker?"":a.props.formData.Broker},BrokerContract:{valid:!0,message:"",value:a.props.formData.BrokerContract},Date:{valid:!0,message:"",value:new Date(a.props.formData.Date)},SINo:{valid:!0,message:"",value:a.props.formData.SINo},BuyerRef:{valid:!0,message:"",value:a.props.formData.BuyerRef},Weight:{valid:!0,message:"",value:a.props.formData.Weight},GrossWeight:{valid:!0,message:"",value:a.props.formData.GrossWeight},PackingType:{valid:!0,message:"",value:a.props.formData.PackingType},NumberOfPallet:{valid:!0,message:"",value:a.props.formData.NumberOfPallet},ETD:{valid:!0,message:"",value:a.props.formData.ETD},ETA:{valid:!0,message:"",value:a.props.formData.ETA},Destination:{valid:!0,message:"",value:a.props.formData.Destination},CargoReadyDate:{valid:!0,message:"",value:a.props.formData.ActualShippedDate},Vessel:{valid:!0,message:"",value:a.props.formData.Vessel},FeederVessel:{valid:!0,message:"",value:a.props.formData.FeederVessel},PortOfShipment:{valid:!0,message:"",value:a.props.formData.PortOfShipment},Freight:{valid:!0,message:"",value:a.props.formData.Freight},LoadingMarks:{valid:!0,message:"",value:a.props.formData.LoadingMarks},OtherMarks:{valid:!0,message:"",value:a.props.formData.OtherMarks},ShippingMarkStatus:{valid:!0,message:"",value:a.props.formData.ShippingMarkStatus},AdditionalMarkStatus:{valid:!0,message:"",value:a.props.formData.AdditionalMarkStatus},PG_IMP_Code:{valid:!0,message:"",value:a.props.formData.PG_IMP_Code},NIF:{valid:!0,message:"",value:a.props.formData.NIF},PlantCode:{valid:!0,message:"",value:a.props.formData.PlantCode},Remarks:{valid:!0,message:"",value:a.props.formData.Remarks},SIStatus:{valid:!0,message:"",value:a.props.formData.SIStatus},ShipStatus:{valid:!0,message:"",value:a.props.formData.ShipStatus},ShipDate:{valid:!0,message:"",value:a.props.formData.ShipDate},ActualShippedDate:{valid:!0,message:"",value:a.props.formData.ActualShippedDate}},formState:{valid:!0,dirty:!1,errors:[]}},a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"handleChange",value:function(e,t,a){var n=this.state.formControls,r=this.state.formState;void 0!==e&&0!==e.length||!a?(n[t].valid=!0,n[t].message=""):(n[t].valid=!1,n[t].message="".concat(t," cannot be empty.")),this.props.handleChange(e,t),n[t].value=e,"Factory"===t&&(n.Buyer.value="",n.ProductGrade.value=""),"Buyer"===t&&(n.ProductGrade.value=""),r.dirty=!0,this.setState({formControls:n,formState:r})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"form-container"},r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-evenly",alignItems:"center",md:6,xs:12,sm:12,xl:8,lg:8},r.a.createElement(Hr,{handleChange:this.handleChange,selectedValue:this.state.formControls.Factory.value,formControl:this.state.formControls.Factory,propertyName:"Factory",required:!0}),r.a.createElement(ya.a,{style:{width:"100%",margin:4},margin:"dense"},r.a.createElement(il,{selectedValue:this.state.formControls.Buyer.value,propertyName:"Buyer",handleChange:this.handleChange,formControl:this.state.formControls.Buyer,selectedFactory:void 0===this.state.formControls.Factory.value._id?this.state.formControls.Factory.value:this.state.formControls.Factory.value._id,required:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:4},margin:"dense"},r.a.createElement(uu,{selectedValue:this.state.formControls.ProductGrade.value,handleChange:this.handleChange,formControl:this.state.formControls.ProductGrade,propertyName:"ProductGrade",selectedBuyer:void 0===this.state.formControls.Buyer.value._id?this.state.formControls.Buyer.value:this.state.formControls.Buyer.value._id,selectedFactory:void 0===this.state.formControls.Factory.value._id?this.state.formControls.Factory.value:this.state.formControls.Factory.value._id,required:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:4},margin:"dense"},r.a.createElement(ge.a,{required:!0,id:"Contract",label:"Contract #",error:!this.state.formControls.Contract.valid,helperText:this.state.formControls.Contract.message,defaultValue:this.state.formControls.Contract.value,onChange:function(t){return e.handleChange(t.target.value.trim(),"Contract")}})),r.a.createElement(ya.a,{style:{width:"100%",margin:4},margin:"dense"},r.a.createElement(fu,{required:!1,propertyName:"Broker",selectedValue:this.state.formControls.Broker.value,formControl:this.state.formControls.Broker,handleChange:this.handleChange})),r.a.createElement(ya.a,{style:{width:"100%",margin:4},margin:"dense"},r.a.createElement(ge.a,{id:"Broker_Contract",label:"Broker Contract #",defaultValue:this.state.formControls.BrokerContract.value,className:"",onChange:function(t){return e.handleChange(t.target.value.trim(),"BrokerContract",!1)}})),r.a.createElement(ya.a,{style:{width:"100%",margin:4},margin:"dense"},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Da.a,{required:!0,format:"dd-MMM-yyyy",label:"SI Date",value:this.state.formControls.Date.value,onChange:function(t){e.handleChange(t,"Date")},disableFuture:!0,helperText:this.state.formControls.Date.message}))),r.a.createElement(ya.a,{style:{width:"100%",margin:4},margin:"dense"},r.a.createElement(ge.a,{required:!0,id:"SINo",label:"SI #",error:!this.state.formControls.SINo.valid,defaultValue:this.state.formControls.SINo.value,onChange:function(t){return e.handleChange(t.target.value.trim(),"SINo")},helperText:this.state.formControls.SINo.message})),r.a.createElement(ya.a,{style:{width:"100%",margin:4},margin:"dense"},r.a.createElement(ge.a,{id:"BuyerRef",label:"Buyer Ref. #",defaultValue:this.state.formControls.BuyerRef.value,onChange:function(t){return e.handleChange(t.target.value,"BuyerRef")}})),r.a.createElement(ya.a,{style:{width:"100%",margin:4},margin:"dense"},r.a.createElement(Xa.a,{id:"Weight",label:"SI Qty (kg)",customInput:ge.a,error:!this.state.formControls.Weight.valid,defaultValue:this.state.formControls.Weight.value,onValueChange:function(t){return e.handleChange(void 0===t.floatValue?0:t.floatValue,"Weight")},onFocus:function(e){e.target.select()},decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0,helperText:this.state.formControls.Weight.message})),r.a.createElement(ya.a,{style:{width:"100%",margin:4},margin:"dense"},r.a.createElement(Xa.a,{id:"GrossWeight",label:"Gross Weight",customInput:ge.a,defaultValue:this.state.formControls.GrossWeight.value,onValueChange:function(t){return e.handleChange(void 0===t.floatValue?0:t.floatValue,"GrossWeight")},onFocus:function(e){e.target.select()},decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})),r.a.createElement(mu,{selectedValue:this.state.formControls.PackingType.value,handleChange:this.handleChange,formControl:this.state.formControls.PackingType,propertyName:"PackingType"}),r.a.createElement(ya.a,{style:{width:"100%",margin:4},margin:"dense"},r.a.createElement(Xa.a,{required:!0,id:"NumberOfPallet",label:"Number Of Pallet",customInput:ge.a,error:!this.state.formControls.NumberOfPallet.valid,defaultValue:this.state.formControls.NumberOfPallet.value,onValueChange:function(t){return e.handleChange(void 0===t.floatValue?0:t.floatValue,"NumberOfPallet")},onFocus:function(e){e.target.select()},thousandSeparator:!0,helperText:this.state.formControls.NumberOfPallet.message})),r.a.createElement(ya.a,{style:{width:"100%",margin:4},margin:"dense"},r.a.createElement(Xa.a,{id:"LoadedQty",label:"Allocated SI Qty",disabled:!0,customInput:ge.a,defaultValue:void 0===this.props.formData.LoadedQty?0:this.props.formData.LoadedQty,decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:4},margin:"dense"},r.a.createElement(Xa.a,{id:"BalanceQty",label:"Balance Qty",disabled:!0,customInput:ge.a,value:void 0===this.props.formData.LoadedQty?this.state.formControls.Weight.value:this.state.formControls.Weight.value-this.props.formData.LoadedQty,decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:4},margin:"dense"},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Da.a,{required:!0,format:"dd-MMM-yyyy",label:"Est. Time Departure",value:this.state.formControls.ETD.value,onChange:function(t){e.handleChange(t,"ETD")},helperText:this.state.formControls.ETD.message}))),r.a.createElement(ya.a,{style:{width:"100%",margin:4},margin:"dense"},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Da.a,{required:!0,format:"dd-MMM-yyyy",label:"Est. Time Arrival",value:this.state.formControls.ETA.value,onChange:function(t){e.handleChange(t,"ETA")},helperText:this.state.formControls.ETA.message}))),r.a.createElement(ya.a,{style:{width:"100%",margin:4},margin:"dense"},r.a.createElement(Du,{selectedValue:this.state.formControls.Destination.value,handleChange:this.handleChange,formControl:this.state.formControls.Destination,propertyName:"Destination",required:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:4},margin:"dense"},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Da.a,{format:"dd-MMM-yyyy",label:"Cargo Ready Date",value:this.state.formControls.CargoReadyDate.value,onChange:function(t){e.handleChange(t,"CargoReadyDate")},disableFuture:!0}))),r.a.createElement(ya.a,{style:{width:"100%",margin:4},margin:"dense"},r.a.createElement(ge.a,{id:"Vessel",label:"Vessel",defaultValue:this.state.formControls.Vessel.value,onChange:function(t){return e.handleChange(t.target.value,"Vessel")}})),r.a.createElement(ya.a,{style:{width:"100%",margin:4},margin:"dense"},r.a.createElement(ge.a,{id:"FeederVessel",label:"Feeder Vessel",defaultValue:this.state.formControls.FeederVessel.value,onChange:function(t){return e.handleChange(t.target.value,"FeederVessel")}})),r.a.createElement(ya.a,{style:{width:"100%",margin:4},margin:"dense"},r.a.createElement(ge.a,{id:"PortOfShipment",label:"Port of Shipment",defaultValue:this.state.formControls.PortOfShipment.value,onChange:function(t){return e.handleChange(t.target.value,"PortOfShipment")}})),r.a.createElement(ya.a,{style:{width:"100%",margin:4},margin:"dense"},r.a.createElement(ge.a,{id:"Freight",label:"Freight Term",defaultValue:this.state.formControls.Freight.value,onChange:function(t){return e.handleChange(t.target.value,"Freight")}})),r.a.createElement(ya.a,{style:{width:"100%",margin:4},margin:"dense"},r.a.createElement(ge.a,{id:"LoadingMarks",label:"Loading Marks",defaultValue:this.state.formControls.LoadingMarks.value,onChange:function(t){return e.handleChange(t.target.value,"LoadingMarks")},multiline:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:4},margin:"dense"},r.a.createElement(ge.a,{id:"OtherMarks",label:"Other Marks",defaultValue:this.state.formControls.OtherMarks.value,onChange:function(t){return e.handleChange(t.target.value,"OtherMarks")},multiline:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:4},margin:"dense"},r.a.createElement(ga.a,{component:"label"},"Shipping Mark Status"),r.a.createElement(Xe.a,{checked:this.state.formControls.ShippingMarkStatus.value,value:this.state.formControls.ShippingMarkStatus.value,color:"primary",inputProps:{"aria-label":"primary checkbox"},onChange:function(t){return e.handleChange(t.target.checked,"ShippingMarkStatus")}})),r.a.createElement(ya.a,{style:{width:"100%",margin:4},margin:"dense"},r.a.createElement(ga.a,{component:"label"},"Additional Mark Status"),r.a.createElement(Xe.a,{checked:this.state.formControls.AdditionalMarkStatus.value,value:this.state.formControls.AdditionalMarkStatus.value,color:"primary",inputProps:{"aria-label":"primary checkbox"},onChange:function(t){return e.handleChange(t.target.checked,"AdditionalMarkStatus")}})),r.a.createElement(ya.a,{style:this.state.formControls.AdditionalMarkStatus.value?{width:"100%",margin:4}:{display:"none"},margin:"dense"},r.a.createElement(bn,{label:"Additional Mark Information",style:{width:"100%"}},r.a.createElement(ya.a,{style:{width:"100%",margin:4},margin:"dense"},r.a.createElement(ge.a,{id:"PG_IMP_Code",label:"PG_IMP Codes",defaultValue:this.state.formControls.PG_IMP_Code.value,onChange:function(t){return e.handleChange(t.target.value,"PG_IMP_Code")}})),r.a.createElement(ya.a,{style:{width:"100%",margin:4},margin:"dense"},r.a.createElement(ge.a,{id:"NIF",label:"NIF",defaultValue:this.state.formControls.NIF.value,onChange:function(t){return e.handleChange(t.target.value,"NIF")}})),r.a.createElement(ya.a,{style:{width:"100%",margin:4},margin:"dense"},r.a.createElement(ge.a,{id:"PlantCode",label:"Plant Code",defaultValue:this.state.formControls.PlantCode.value,onChange:function(t){return e.handleChange(t.target.value,"PlantCode")}})))),r.a.createElement(ya.a,{style:{width:"100%",margin:4},margin:"dense"},r.a.createElement(ge.a,{id:"Remarks",label:"Remarks",defaultValue:this.state.formControls.Remarks.value,onChange:function(t){return e.handleChange(t.target.value,"Remarks")}})),r.a.createElement(ya.a,{style:{width:"100%",margin:4},margin:"dense"},r.a.createElement(ga.a,{component:"label"},"SI Allocation",r.a.createElement("b",{style:{color:"red"}},this.state.formControls.SIStatus.value))),r.a.createElement(ya.a,{style:{width:"100%",margin:4},margin:"dense"},r.a.createElement(ga.a,{component:"label"},"Ship Status"),r.a.createElement(Xe.a,{checked:this.state.formControls.ShipStatus.value,value:this.state.formControls.ShipStatus.value,color:"primary",inputProps:{"aria-label":"primary checkbox"},onChange:function(t){return e.handleChange(t.target.checked,"ShipStatus")},disabled:"OPEN"===this.props.formData.SIStatus}),r.a.createElement(Sa.a,{error:this.state.formControls.ShipStatus.valid,style:{display:this.state.formControls.ShipStatus.valid?"none":""}},this.state.formControls.ShipStatus.valid?"":this.state.formControls.ShipStatus.message)),r.a.createElement(ya.a,{style:{width:"100%",margin:4},margin:"dense"},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Da.a,{format:"dd-MMM-yyyy",label:"Shipped Date",value:this.state.formControls.ShipDate.value,onChange:function(t){e.handleChange(t,"ShipDate")},disableFuture:!0,disabled:this.state.formControls.Weight.value-this.props.formData.LoadedQty!==0,error:!this.state.formControls.ShipDate.valid,helperText:this.state.formControls.ShipDate.message}))),r.a.createElement(ya.a,{style:{width:"100%",margin:4},margin:"dense"},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Da.a,{format:"dd-MMM-yyyy",label:"Actual Shipped Date",value:this.state.formControls.ActualShippedDate.value,onChange:function(t){e.handleChange(t,"ActualShippedDate")},disableFuture:!0,error:!this.state.formControls.ActualShippedDate.valid,helperText:this.state.formControls.ActualShippedDate.message})))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=t.formControls;return e.formState.valid||Array.isArray(e.formState.errors)&&e.formState.errors.map((function(e){a[e.property].valid=!1,a[e.property].message=e.message})),{formState:e.formState,formControls:a}}}]),t}(r.a.Component),bu=Eu,Su={Factory:"",Buyer:"",ProductGrade:"",Contract:"",Broker:"",BrokerContract:"",Date:new Date,SINo:"",BuyerRef:"",Weight:0,GrossWeight:0,PackingType:"",NumberOfPallet:0,ETD:new Date,ETA:new Date,Destination:"",CargoReadyDate:null,Vessel:"",FeederVessel:"",PortOfShipment:"",Freight:"",LoadingMarks:"",OtherMarks:"",ShippingMarkStatus:!0,AdditionalMarkStatus:!1,PG_IMP_Code:"",NIF:"",PlantCode:"",Remarks:"",SIStatus:"OPEN",AllocationStatus:1,ShipStatus:!1,ShipDate:null,ActualShippedDate:null,CreatedAt:new Date,CreatedBy:"Admin",LastUpdatedAt:new Date,LastUpdatedBy:"Admin"},Ou=Su,ku=a(248),wu=a.n(ku),Fu=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).openDialog=function(e){a.setState({dialogOpen:!0,currentDeleteData:e,dialogMessage:r.a.createElement("span",null,"Are you sure to delete SI ",r.a.createElement("b",null,e.SINo," "),"? This cannot be undone.")})},a.closeDialog=function(){a.setState({dialogOpen:!1,currentDeleteData:null,dialogMessage:""})},a.openForm=function(e){void 0===e?a.setState({actionStatus:"Add",newData:Object(me.a)({},Ou)}):a.setState({actionStatus:"Update",newData:Object(me.a)({},e)}),a.setState({formOpen:!0,formState:{valid:!0,dirty:!1,errors:[]}})},a.closeForm=function(){a.setState({formOpen:!1,newData:{},actionStatus:""})},a.onPrintQR=function(e){void 0!==e&&null!==e&&Do("getQRCode/SI/".concat(e._id)).then((function(e){!0===e.code?Co(new Uint8Array(e.data.data),"qrcode_si_".concat(Date.now().toLocaleString(),".pdf")):a.snackOpen("Oops, something went wrong while processing your request!","error")}))},a.onSave=function(){var e=a.state.formState,t=Object(me.a)({},a.state.newData),n=ci.validateFields(t);if(!n.valid){e.valid=!1;var r=n.errors.map((function(e){var t={};return t.property=e.property,t.message=e.message,t}));return e.errors=r,a.snackOpen("Please fix the error(s) highlighted to save the details!","error"),void a.setState({formState:e})}if(t.Weight-t.LoadedQty<0)return e.valid=!1,e.errors.push({property:"Weight",message:"You load over the Expected Qty!"}),a.snackOpen("Please fix the error(s) highlighted to save the details!","error"),void a.setState({formState:e});if((0===t.LoadedQty||void 0===t.LoadedQty)&&t.ShipStatus)return e.valid=!1,e.errors.push({property:"ShipStatus",message:"Ship Status can't be closed when there is nothing loaded!"}),a.snackOpen("Please fix the error(s) highlighted to save the details!","error"),void a.setState({formState:e});var o=Object(je.a)(a.state.data);t.SIStatus=t.Weight===t.LoadedQty?"CLOSE":"OPEN",t.ShipDate=t.ShipStatus?t.ShipDate:null,"Add"===a.state.actionStatus?(t.LastUpdatedBy=a.state.operator,t.CreatedBy=a.state.operator,ci.add("",t).then((function(t){!0===t.code?(e.valid=!0,o.push(t.data),a.setState({data:o}),a.closeForm(),a.snackOpen("Shipping Instruction created successfully!","success")):(e.valid=!1,e.errors=t.errors,a.snackOpen("Please fix the error(s) highlighted to save the details!","error"))})).catch((function(e){a.snackOpen("Oops, something went wrong while processing your request!","error")}))):(t.LastUpdatedBy=a.state.operator,ci.update("",t).then((function(n){if(!0===n.code){e.valid=!0;var r=o.find((function(e){return e._id===t._id})),s=o.indexOf(r);o[s]=n.data,a.setState({data:o}),a.closeForm(),a.snackOpen("Shipping Instruction updated successfully!","success")}else e.valid=!1,e.errors=n.errors,a.snackOpen("Please fix the error(s) highlighted to save the details!","error")})).catch((function(e){a.snackOpen("Oops, something went wrong while processing your request!","error")}))),a.setState({formState:e})},a.onDelete=function(){null!==a.state.currentDeleteData&&ci.delete("".concat(a.state.currentDeleteData._id)).then((function(e){if(!0===e.code){var t=Object(je.a)(a.state.data),n=t.indexOf(a.state.currentDeleteData);t.splice(n,1),a.snackOpen("Successfully Deleted!","success"),a.closeDialog(),a.setState({data:t})}else a.snackOpen("Oops, something went wrong while processing your request!","error")}))},a.onEdit=function(e){a.openForm(e)},a.state={columns:[{title:"Print QR Code",render:function(e){return r.a.createElement(bt.a,{"aria-label":"Print QR Code",style:{margin:1},size:"small",onClick:function(t){return a.onPrintQR(e)}},r.a.createElement("img",{src:wu.a}))}},{title:"Factory",field:"Factory",render:function(e){return r.a.createElement("span",null,void 0===e.Factory?"":e.Factory.FctyCode)}},{title:"Date",field:"Date",render:function(e){return r.a.createElement("span",null,new Date(e.Date).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric"}))}},{title:"Contract #",field:"Contract"},{title:"Broker",field:"Broker",render:function(e){return r.a.createElement("span",null,e.Broker.Name)}},{title:"Broker Contract #",field:"BrokerContract"},{title:"SI #",field:"SINo"},{title:"Buyer Ref. #",field:"BuyerRef"},{title:"Buyer",field:"Buyer",render:function(e){return r.a.createElement("span",null,void 0===e.Buyer?"":e.Buyer.name)}},{title:"ProductGrade",field:"ProductGrade",render:function(e){return r.a.createElement("span",null,void 0===e.ProductGrade?"":e.ProductGrade.GradeCode)}},{title:"SI Qty (kg)",field:"Weight",render:function(e){return r.a.createElement(Xa.a,{value:e.Weight,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"PackingType",field:"PackingType",render:function(e){return r.a.createElement("span",null,void 0===e.PackingType?"":e.PackingType.PckTypeName)}},{title:"NumberOfPallet",field:"NumberOfPallet"},{title:"Qty Balance (kg)",field:"Weight",render:function(e){return r.a.createElement(Xa.a,{value:e.Weight-(void 0===e.LoadedQty?0:e.LoadedQty),displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"ETD",field:"ETD",render:function(e){return r.a.createElement("span",null,new Date(e.ETD).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric"}))}},{title:"ETA",field:"ETA",render:function(e){return r.a.createElement("span",null,new Date(e.ETA).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric"}))}},{title:"Destination",field:"Destination",render:function(e){return r.a.createElement("span",null,void 0===e.Destination||null===e.Destination?"":e.Destination.Destination)}},{title:"Vessel",field:"Vessel"},{title:"Port Of Shipment",field:"PortOfShipment"},{title:"Freight",field:"Freight"},{title:"Loading Marks",field:"LoadingMarks"},{title:"Other Marks",field:"OtherMarks"},{title:"Remarks",field:"Remarks"},{title:"Loading Done",field:"SIStatus"},{title:"Shipped",field:"ShipStatus",render:function(e){return r.a.createElement("span",null,e.ShipStatus?"Yes":"No")}},{title:"Cargo Ready Date",field:"CargoReadyDate",render:function(e){return r.a.createElement("span",null,null===e.CargoReadyDate?"":new Date(e.CargoReadyDate).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric"}))}},{title:"Actual Shipped Date",field:"ActualShippedDate",render:function(e){return r.a.createElement("span",null,null===e.ActualShippedDate?"":new Date(e.ActualShippedDate).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric"}))}},{title:"Feeder Vessel",field:"FeederVessel"},{title:"Operator",field:"LastUpdatedBy"},{title:"Last Updated",field:"LastUpdatedAt",render:function(e){return r.a.createElement("span",null,new Date(e.LastUpdatedAt).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}))},defaultSort:"desc"}],data:[],currentDeleteData:null,newData:Ou,formOpen:!1,dialogOpen:!1,dialogMessage:"",disabled:!1,actionStatus:"",formState:{valid:!0,dirty:!1,errors:[]},operator:"Admin"},a.openDialog=a.openDialog.bind(Object(Pe.a)(a)),a.closeDialog=a.closeDialog.bind(Object(Pe.a)(a)),a.openForm=a.openForm.bind(Object(Pe.a)(a)),a.closeForm=a.closeForm.bind(Object(Pe.a)(a)),a.snackOpen=a.snackOpen.bind(Object(Pe.a)(a)),a.snackClose=a.snackClose.bind(Object(Pe.a)(a)),a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initShippingInstruction()}},{key:"initShippingInstruction",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.awrap(ci.get("").then((function(t){!0===t.code&&e.setState({data:t.data})})));case 2:case"end":return t.stop()}}))}},{key:"handleChange",value:function(e,t){var a=this.state.newData;a[t]=e;var n=this.state.formState;"Factory"===t&&(a.Buyer="",a.ProductGrade=""),"Buyer"===t&&(a.ProductGrade=""),n.valid=!0,this.setState({newData:a,formState:n})}},{key:"snackOpen",value:function(e,t){this.setState({alertOpen:!0,alertMessage:e,alertClass:t})}},{key:"snackClose",value:function(){this.setState({alertOpen:!1,alertMessage:"",alertClass:"",currentDeleteData:null})}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{style:{margin:"20px 20px 10px 0px"}},r.a.createElement(Ve.a,{title:"Shipping Instruction",columns:this.state.columns,data:this.state.data,components:{Toolbar:function(t){return r.a.createElement("div",null,r.a.createElement(Le.MTableToolbar,t),r.a.createElement("div",{style:{padding:"0px 15px"}},r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:function(){return e.openForm(t.rowData)},"aria-label":"add"},r.a.createElement(wt.a,null))))}},actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.data,columns:e.state.columns,fileName:"Shipping Instruction"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.initShippingInstruction()}},{icon:"edit",tooltip:"Edit",onClick:function(t,a){return e.openForm(a)}},{icon:"delete",tooltip:"Delete",onClick:function(t,a){return e.openDialog(a)}}]}),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:6e3,open:this.state.alertOpen,onClose:this.snackClose,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}),r.a.createElement(Ae.a,{fullScreen:!0,open:this.state.formOpen,onClose:this.closeForm,TransitionComponent:this.Transition},r.a.createElement(w.a,{className:"appBar"},r.a.createElement(F.a,null,r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:this.closeForm,"aria-label":"close"},r.a.createElement(Vt.a,null)),r.a.createElement(x.a,{variant:"h6",className:"app-title"},"Shipping Instruction Details"),r.a.createElement(he.a,{color:"inherit",disabled:this.state.disabled,onClick:this.onSave}," ","save"," "))),r.a.createElement(_e.a,null,r.a.createElement(bu,{handleChange:this.handleChange,formData:this.state.newData,formState:this.state.formState}))),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.closeDialog,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.closeDialog,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDelete,color:"primary"},"Delete"))))}}]),t}(r.a.Component),xu=Fu,Tu={properties:{Name:{description:"",type:"string",required:!0,allowEmpty:!1,messages:{allowEmpty:"Name cannot be empty.",conform:"Name cannot be empty.",required:"Name cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},Description:{description:"",type:"string"},CreatedAt:{type:"any",default:new Date},CreatedBy:{type:"string",default:""},LastUpdatedAt:{type:"any",default:new Date},LastUpdatedBy:{type:"string",default:""}}},Nu=a(24),ju={validateFields:function(e){return Nu.validate(e,Tu,{cast:!0})},get:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="trainingType/"+e,a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?(console.log(e),{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}):200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},getFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("trainingType-filter/").concat(e),a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},getOne:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("trainingType/").concat(e),a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},update:function(e,t){return Qe("trainingType/"+e,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Updated",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="trainingType/"+e,n.abrupt("return",He(a,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Added",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,formValid:!0,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("trainingType/"+e).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))}},Pu=ju,Au=a(23),Mu={Name:{valid:!0,message:"",value:""},Description:{valid:!0,message:"",value:""},Inactive:{valid:!0,message:"",value:""}},_u=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).snackOpen=function(e,t){var n;return l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,l.a.awrap(ka(e,t));case 2:n=r.sent,a.setState({snackOpen:!a.state.snackOpen,alertMessage:n,alertClass:e});case 4:case"end":return r.stop()}}))},a.dialogOpen=function(e){a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:e,dialogMessage:r.a.createElement("span",null,"Are you sure to delete this record ",r.a.createElement("b",null,e.Name)," ? This cannot be undone.")})},a.onDelete=function(){null!==a.state.currentDeleteData&&Pu.delete("".concat(a.state.currentDeleteData._id)).then((function(e){if(!0===e.code){var t=Object(je.a)(a.state.data),n=t.indexOf(a.state.currentDeleteData);t.splice(n,1),a.setState({data:t,currentDeleteData:"",dialogOpen:!a.state.dialogOpen}),a.snackOpen("success","delete")}else a.snackOpen("error","server")}))},a.state={columns:[{title:"Name",field:"Name",editComponent:function(e){return r.a.createElement(ge.a,{required:!0,margin:"dense",id:"Name",label:"Name",type:"text",error:!a.state.formControls.Name.valid,helperText:a.state.formControls.Name.message,defaultValue:e.rowData.Name,onChange:function(t){a.handleChange(t.target.value.trim(),"Name",e.rowData,!0)}})}},{title:"Description",field:"Description",editComponent:function(e){return r.a.createElement(ge.a,{margin:"dense",id:"description",label:"Description",multiline:!0,rows:"2",type:"text",defaultValue:e.rowData.Description,onChange:function(t){a.handleChange(t.target.value,"Description",e.rowData,!1)}})}},{title:"Inactive",field:"Inactive",type:"boolean",render:function(e){return r.a.createElement("span",null,e.Inactive?"Yes":"No")},editComponent:function(e){return r.a.createElement(Xe.a,{checked:e.rowData.Inactive,onChange:function(t){a.handleChange(t.target.checked,"Inactive",e.rowData,!1)},value:e.value,inputProps:{"aria-label":"secondary checkbox"},color:"primary"})}},{title:"Operator",field:"LastUpdatedBy",editable:"never"},{title:"Last Updated",field:"LastUpdatedAt",render:function(e){return r.a.createElement("span",null,void 0===e?"":new Date(e.LastUpdatedAt).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}))},editable:"never"}],data:[],formControls:Au(Mu),currentDeleteData:"",dialogOpen:!1,snackOpen:!1,alertMessage:"",dialogMessage:"",alertClass:""},a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initTrainingType()}},{key:"initTrainingType",value:function(){var e=this;Pu.get("").then((function(t){if(!0===t.code){var a=Object(je.a)(e.state.data);a=t.data,e.setState({data:a})}})).catch((function(e){}))}},{key:"initFormControl",value:function(){this.setState({formControls:Au(Mu)})}},{key:"handleChange",value:function(e,t,a,n){var r=Object(me.a)({},this.state.formControls);n&&(void 0===e||""===e||null===e?(r[t].valid=!1,r[t].message="".concat(t," cannot be empty.")):(r[t].valid=!0,r[t].message="")),this.setState({formControls:r},(function(){return a[t]=e}))}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{container:!0,direction:"column",justify:"center",wrap:"wrap",style:{margin:"20px 20px 10px 0px"}},r.a.createElement(be.a,{item:!0,xs:12},r.a.createElement(Ve.a,{title:"Training Type",columns:this.state.columns,data:this.state.data,editable:{onRowAdd:function(t){return new Promise((function(a,n){setTimeout((function(){var r=Object(je.a)(e.state.data),o=Object(me.a)({},e.state.formControls),s=Pu.validateFields(t);s.valid?Pu.add("",t).then((function(t){!0===t.code?(r.push(t.data),e.snackOpen("success","add"),e.setState({data:r},(function(){return a()}))):(n(),t.errors.map((function(e){o[e.property].valid=!1,o[e.property].message=e.message})),e.setState({formControls:o}),e.snackOpen("error","alertValidation"))})).catch((function(t){n(),e.snackOpen("error","server")})):(n(),s.errors.map((function(e){o[e.property].valid=!1,o[e.property].message=e.message})),e.setState({formControls:o}))}),1e3)}))},onRowUpdate:function(t,a){return new Promise((function(n,r){setTimeout((function(){var o=Object(je.a)(e.state.data),s=e.state.formControls,i=Pu.validateFields(t);i.valid?Pu.update("",t).then((function(t){if(!0===t.code){var i=o.indexOf(a);o[i]=t.data,e.setState({data:o},(function(){return n()})),e.snackOpen("success","update")}else r(),t.errors.map((function(e){return s[e.property].valid=!1,s[e.property].message=e.message,s})),e.setState({formControls:s}),e.snackOpen("error","alertValidation")})).catch((function(t){r(),e.snackOpen("error","server")})):(r(),i.errors.map((function(e){s[e.property].valid=!1,s[e.property].message=e.message})),e.setState({formControls:s}))}),1e3)}))}},actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.data,columns:e.state.columns,fileName:"Training Type"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.initTrainingType()}},{icon:"delete",tooltip:"Delete",onClick:function(t,a){return e.dialogOpen(a)}}],icons:{Clear:function(t){return r.a.createElement(Nt.a,{onClick:function(){e.initFormControl()},style:{padding:0,margin:0}})}}})),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:600,open:this.state.snackOpen,onClose:this.snackOpen,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.dialogOpen,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.dialogOpen,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDelete,color:"primary"},"Delete"))))}}]),t}(r.a.Component),Iu=_u,Ru={properties:{Factory:{type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Factory cannot be empty."}},Date:{type:["date","string"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Date cannot be empty."}},Shift:{type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Shift cannot be empty."}},Fresh:{type:"number"},WithdrawSource:{type:"number"},Recycle:{type:"number"},EffluentDischarge:{type:"number"},EffluentDischargeTo:{type:"number"},Remarks:{type:"string"}}},Lu=a(24),Vu={validateFields:function(e){return Lu.validate(e,Ru,{cast:!0})},get:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="waterConsumption/"+e,a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 2:case"end":return a.stop()}}))},getByUid:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="waterConsumption/"+e,a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 2:case"end":return a.stop()}}))},getFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("waterConsumption-filter/").concat(e),a.next=3,l.a.awrap(We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 3:return a.abrupt("return",a.sent);case 4:case"end":return a.stop()}}))},update:function(e,t){return Qe("waterConsumption/"+e,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Updated successfully.",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,errors:e.data.errors,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="waterConsumption/"+e,n.abrupt("return",He(a,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,message:"Added successfully.",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("waterConsumption/"+e).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))}},Bu=Vu,Uu=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={formControls:{Factory:{valid:!0,message:"",value:a.props.formData.Factory},Date:{valid:!0,message:"",value:a.props.formData.Date},Shift:{valid:!0,message:"",value:a.props.formData.Shift},Fresh:{valid:!0,message:"",value:a.props.formData.Fresh},WithdrawSource:{valid:!0,message:"",value:a.props.formData.WithdrawSource},Recycle:{valid:!0,message:"",value:a.props.formData.Recycle},EffluentDischarge:{valid:!0,message:"",value:a.props.formData.EffluentDischarge},EffluentDischargeTo:{valid:!0,message:"",value:a.props.formData.EffluentDischargeTo},Remarks:{valid:!0,message:"",value:a.props.formData.Remarks}},formState:{valid:!0,dirty:!1,errors:[]},waterSource:[],effluentDischargeTo:[]},a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initWaterSourceAndEffluentDischargeOptions()}},{key:"initWaterSourceAndEffluentDischargeOptions",value:function(){var e=this;Oa("waterConsumption.json").then((function(e){return e.data})).then((function(t){e.setState({waterSource:t.WaterSource}),e.setState({effluentDischargeTo:t.EffluentDischargeTo})}))}},{key:"handleChange",value:function(e,t){var a=this.state.formControls,n=this.state.formState;void 0===e||0===e.length?(a[t].valid=!1,a[t].message="".concat(t," cannot be empty.")):(a[t].valid=!0,a[t].message=""),this.props.handleChange(e,t),a[t].value=e,"Factory"===t&&(a.Shift.value=""),n.dirty=!0,this.setState({formControls:a,formState:n})}},{key:"renderWaterSourceOptions",value:function(){return this.state.waterSource.map((function(e,t){return r.a.createElement(et.a,{value:e.Value,key:e.Value,name:e.Name},e.Name)}))}},{key:"renderEffluentDischargeToOptions",value:function(){return this.state.effluentDischargeTo.map((function(e,t){return r.a.createElement(et.a,{value:e.Value,key:e.Value,name:e.Name},e.Name)}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"form-container"},r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-evenly",alignItems:"center",md:6,xs:12,sm:12,xl:8,lg:8},r.a.createElement(Hr,{handleChange:this.handleChange,selectedValue:this.state.formControls.Factory.value,formControl:this.state.formControls.Factory,propertyName:"Factory"}),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Da.a,{required:!0,format:"dd-MMM-yyyy",label:"Date",value:this.state.formControls.Date.value,onChange:function(t){e.handleChange(t,"Date")},disableFuture:!0})),r.a.createElement(Sa.a,{error:!this.state.formControls.Date.valid,style:{display:this.state.formControls.Date.valid?"none":""}},this.state.formControls.Date.message)),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(ns,{handleChange:this.handleChange,selectedValue:this.state.formControls.Shift.value,formControl:this.state.formControls.Shift,propertyName:"Shift",factoryId:void 0===this.state.formControls.Factory.value._id?this.state.formControls.Factory.value:this.state.formControls.Factory.value._id,autoSelect:void 0===this.props.formData._id})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Xa.a,{id:"Fresh",label:"Water Consumption - Fresh (m3)",customInput:ge.a,defaultValue:this.state.formControls.Fresh.value,onValueChange:function(t){return e.handleChange(t.floatValue,"Fresh")},onFocus:function(e){e.target.select()},decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Ea.a,{shrink:!0,error:!this.state.formControls.WithdrawSource.valid},"Water Withdrawn-Source"),r.a.createElement(ba.a,{id:"WithdrawSource",value:this.state.formControls.WithdrawSource.value,error:!this.state.formControls.WithdrawSource.valid,onChange:function(t){return e.handleChange(t.target.value,"WithdrawSource")},displayEmpty:!0},r.a.createElement(et.a,{value:0},r.a.createElement("em",null,"Select")),this.renderWaterSourceOptions()),r.a.createElement(Sa.a,{error:!this.state.formControls.WithdrawSource.valid,style:{display:this.state.formControls.WithdrawSource.valid?"none":""}},this.state.formControls.WithdrawSource.message)),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Xa.a,{id:"Recycle",label:"Water Recycled/Reused from Waste Water Treatment (m3)",customInput:ge.a,defaultValue:this.state.formControls.Recycle.value,onValueChange:function(t){return e.handleChange(t.floatValue,"Recycle")},onFocus:function(e){e.target.select()},decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Xa.a,{id:"EffluentDischarge",label:"Waste Water Discharge (m3)",customInput:ge.a,defaultValue:this.state.formControls.EffluentDischarge.value,onValueChange:function(t){return e.handleChange(t.floatValue,"EffluentDischarge")},onFocus:function(e){e.target.select()},decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Ea.a,{shrink:!0,error:!this.state.formControls.EffluentDischargeTo.valid},"Waste Water Discharge to"),r.a.createElement(ba.a,{id:"EffluentDischargeTo",value:this.state.formControls.EffluentDischargeTo.value,error:!this.state.formControls.EffluentDischargeTo.valid,onChange:function(t){return e.handleChange(t.target.value,"EffluentDischargeTo")},displayEmpty:!0},r.a.createElement(et.a,{value:0},r.a.createElement("em",null,"Select")),this.renderEffluentDischargeToOptions()),r.a.createElement(Sa.a,{error:!this.state.formControls.EffluentDischargeTo.valid,style:{display:this.state.formControls.EffluentDischargeTo.valid?"none":""}},this.state.formControls.EffluentDischargeTo.message)),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Xa.a,{id:"EffluentDischarge",label:"Recycled water usage ratio",customInput:ge.a,value:this.state.formControls.Recycle.value/(this.state.formControls.Fresh.value+this.state.formControls.Recycle.value)*100,decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0,suffix:"%",isAllowed:!1})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(ge.a,{id:"Remarks",label:"Remarks",defaultValue:this.state.formControls.Remarks.value,onChange:function(t){return e.handleChange(t.target.value,"Remarks")},multiline:!0}))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=t.formControls;return e.formState.valid||Array.isArray(e.formState.errors)&&e.formState.errors.map((function(e){a[e.property].valid=!1,a[e.property].message=e.message})),{formState:e.formState,formControls:a}}}]),t}(r.a.Component),qu=Uu,Gu={Factory:"",Date:new Date,Shift:"",Fresh:0,WithdrawSource:0,Recycle:0,EffluentDischarge:0,EffluentDischargeTo:0,Remarks:"",CreatedAt:new Date,CreatedBy:"Admin",LastUpdatedAt:new Date,LastUpdatedBy:"Admin"},Wu=Gu,Hu=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).openDialog=function(e){return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.awrap(ka("confirmation","delete"));case 2:t.sent,a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:e,dialogMessage:r.a.createElement("span",null,"Are you sure to delete this record factory"," ",r.a.createElement("b",null,e.Factory.FctyCode," "),"in date"," ",r.a.createElement("b",null,new Date(e.Date).toLocaleString().split(",")[0]," "),"? This cannot be undone.")});case 4:case"end":return t.stop()}}))},a.closeDialog=function(){a.setState({dialogOpen:!1,currentDeleteData:null,dialogMessage:""})},a.openForm=function(e){void 0===e?a.setState({actionStatus:"Add",newData:Object(me.a)({},Wu)}):a.setState({actionStatus:"Update",newData:Object(me.a)({},e)}),a.setState({formOpen:!0,formState:{valid:!0,dirty:!1,errors:[]}})},a.closeForm=function(){a.setState({formOpen:!1,newData:{},actionStatus:""})},a.onSave=function(){var e=a.state.formState,t=Object(me.a)({},a.state.newData),n=Bu.validateFields(t);if(n.valid){var r=Object(je.a)(a.state.data);"Add"===a.state.actionStatus?(t.LastUpdatedBy=a.state.operator,t.CreatedBy=a.state.operator,Bu.add("",t).then((function(t){!0===t.code?(e.valid=!0,r.push(t.data),a.setState({data:r}),a.closeForm(),a.snackOpen("Water consumption created successfully!","success")):(e.valid=!1,e.errors=t.errors,a.snackOpen("Please fix the error(s) highlighted to save the details!","error"))})).catch((function(e){a.snackOpen("Oops, something went wrong while processing your request!","error")}))):(t.LastUpdatedBy=a.state.operator,Bu.update("",t).then((function(n){if(!0===n.code){e.valid=!0;var o=r.find((function(e){return e._id===t._id})),s=r.indexOf(o);r[s]=n.data,a.setState({data:r}),a.closeForm(),a.snackOpen("Water consumption updated successfully!","success")}else e.valid=!1,e.errors=n.errors,a.snackOpen("Please fix the error(s) highlighted to save the details!","error")})).catch((function(e){a.snackOpen("Oops, something went wrong while processing your request!","error")})))}else{e.valid=!1;var o=n.errors.map((function(e){var t={};return t.property=e.property,t.message=e.message,t}));e.errors=o,a.snackOpen("Please fix the error(s) highlighted to save the details!","error")}a.setState({formState:e})},a.onDelete=function(){null!==a.state.currentDeleteData&&Bu.delete("".concat(a.state.currentDeleteData._id)).then((function(e){if(!0===e.code){var t=Object(je.a)(a.state.data),n=t.indexOf(a.state.currentDeleteData);t.splice(n,1),a.snackOpen("Successfully Deleted!","success"),a.closeDialog(),a.setState({data:t})}else a.snackOpen("Oops, something went wrong while processing your request!","error")}))},a.onEdit=function(e){a.openForm(e)},a.state={columns:[{title:"Factory",field:"Factory",render:function(e){return r.a.createElement("span",null,void 0===e.Factory?"":e.Factory.FctyCode)}},{title:"Date",field:"Date",render:function(e){return r.a.createElement("span",null,new Date(e.Date).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric"}))}},{title:"Shift",field:"Shift",render:function(e){return r.a.createElement("span",null,void 0===e.Shift?"":e.Shift.Name)}},{title:"Water Consump. Fresh",field:"Fresh",render:function(e){return r.a.createElement(Xa.a,{value:e.Fresh,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"Water Withdrawn-Source",field:"WithdrawSource",lookup:{}},{title:"Water Consump. Recycle",field:"Recycle",render:function(e){return r.a.createElement(Xa.a,{value:e.Recycle,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"Wastewater Discharge To",field:"EffluentDischargeTo",lookup:{}},{title:"Wastewater Discharge",field:"EffluentDischarge",render:function(e){return r.a.createElement(Xa.a,{value:e.EffluentDischarge,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"Recycled Water Usage ratio",render:function(e){return r.a.createElement(Xa.a,{value:e.Recycle/(e.Fresh+e.Recycle)*100,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0,suffix:"%"})}},{title:"Remarks",field:"Remarks"},{title:"Operator",field:"LastUpdatedBy"},{title:"Last Updated",field:"LastUpdatedAt",render:function(e){return r.a.createElement("span",null,new Date(e.LastUpdatedAt).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}))}}],data:[],currentDeleteData:null,newData:Wu,formOpen:!1,dialogOpen:!1,dialogMessage:"",disabled:!1,actionStatus:"",formState:{valid:!0,dirty:!1,errors:[]},operator:"Admin"},a.openDialog=a.openDialog.bind(Object(Pe.a)(a)),a.closeDialog=a.closeDialog.bind(Object(Pe.a)(a)),a.openForm=a.openForm.bind(Object(Pe.a)(a)),a.closeForm=a.closeForm.bind(Object(Pe.a)(a)),a.snackOpen=a.snackOpen.bind(Object(Pe.a)(a)),a.snackClose=a.snackClose.bind(Object(Pe.a)(a)),a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initWaterConsumption(),this.initWaterSourceAndEffluentDischargeToData()}},{key:"initWaterConsumption",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.awrap(Bu.get("").then((function(t){!0===t.code&&e.setState({data:t.data})})));case 2:case"end":return t.stop()}}))}},{key:"initWaterSourceAndEffluentDischargeToData",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:Oa("WaterConsumption.json").then((function(e){return e.data})).then((function(t){var a={},n={};t.WaterSource.forEach((function(e){return a[e.Value]=e.Name})),t.EffluentDischargeTo.forEach((function(e){return n[e.Value]=e.Name}));var r=Object(je.a)(e.state.columns);r[r.findIndex((function(e){return"WithdrawSource"===e.field}))].lookup=a,r[r.findIndex((function(e){return"EffluentDischargeTo"===e.field}))].lookup=n,e.setState({columns:r})}));case 1:case"end":return t.stop()}}))}},{key:"handleChange",value:function(e,t){var a=this.state.newData;a[t]=e;var n=this.state.formState;"Factory"===t&&(a.Shift=""),n.valid=!0,this.setState({newData:a,formState:n})}},{key:"snackOpen",value:function(e,t){this.setState({alertOpen:!0,alertMessage:e,alertClass:t})}},{key:"snackClose",value:function(){this.setState({alertOpen:!1,alertMessage:"",alertClass:"",currentDeleteData:null})}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{style:{margin:"20px 20px 10px 0px"}},r.a.createElement(Ve.a,{title:"Daily Water Consumption",columns:this.state.columns,data:this.state.data,components:{Toolbar:function(t){return r.a.createElement("div",null,r.a.createElement(Le.MTableToolbar,t),r.a.createElement("div",{style:{padding:"0px 15px"}},r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:function(){return e.openForm()},"aria-label":"add"},r.a.createElement(wt.a,null))))}},actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.data,columns:e.state.columns,fileName:"Water Consumption"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.initWaterConsumption()}},{icon:"edit",tooltip:"Edit",onClick:function(t,a){return e.openForm(a)}},{icon:"delete",tooltip:"Delete",onClick:function(t,a){return e.openDialog(a)}}],options:{}}),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:6e3,open:this.state.alertOpen,onClose:this.snackClose,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}),r.a.createElement(Ae.a,{fullScreen:!0,open:this.state.formOpen,onClose:this.closeForm,TransitionComponent:this.Transition},r.a.createElement(w.a,{className:"appBar"},r.a.createElement(F.a,null,r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:this.closeForm,"aria-label":"close"},r.a.createElement(Vt.a,null)),r.a.createElement(x.a,{variant:"h6",className:"app-title"},"Daily Water Consumption Details"),r.a.createElement(he.a,{color:"inherit",disabled:this.state.disabled,onClick:this.onSave},"save"))),r.a.createElement(_e.a,null,r.a.createElement(qu,{handleChange:this.handleChange,formData:this.state.newData,formState:this.state.formState}))),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.closeDialog,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.closeDialog,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDelete,color:"primary"},"Delete"))))}}]),t}(r.a.Component),Qu=Hu,zu={properties:{Factory:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Factory cannot be empty."}},Month:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Month cannot be empty."}},Lab:{description:"",type:["number"],required:!0,allowEmpty:!1,exclusiveMinimum:0,messages:{allowEmpty:"Lab cannot be empty.",exclusiveMinimum:"Lab cannot be empty"}}}},Yu=a(24),Ku={validateFields:function(e){return Yu.validate(e,zu,{cast:!0})},get:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="effluentTestResult/"+e,a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 2:case"end":return a.stop()}}))},getFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("effluentTestResult-filter/").concat(e),a.next=3,l.a.awrap(We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 3:return a.abrupt("return",a.sent);case 4:case"end":return a.stop()}}))},update:function(e,t){return Qe("effluentTestResult/"+e,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Successfully updated.",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="effluentTestResult/"+e,n.abrupt("return",He(a,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,message:"Successfully added.",data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("effluentTestResult/"+e).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e}))}},Ju=Ku,Zu=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={formControls:{Factory:{valid:!0,message:"",value:a.props.formData.Factory},Month:{valid:!0,message:"",value:a.props.formData.Month},Lab:{valid:!0,message:"",value:a.props.formData.Lab},pH:{valid:!0,message:"",value:a.props.formData.pH},BOD:{valid:!0,message:"",value:a.props.formData.BOD},COD:{valid:!0,message:"",value:a.props.formData.COD},TSS:{valid:!0,message:"",value:a.props.formData.TSS},NH3N:{valid:!0,message:"",value:a.props.formData.NH3N},NTotal:{valid:!0,message:"",value:a.props.formData.NTotal},Phosphor:{valid:!0,message:"",value:a.props.formData.Phosphor},Grease:{valid:!0,message:"",value:a.props.formData.Grease},MPNColiform:{valid:!0,message:"",value:a.props.formData.MPNColiform},Remarks:{valid:!0,message:"",value:a.props.formData.Remarks}},formState:{valid:!0,dirty:!1,errors:[]},lab:[]},a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initLabOptions()}},{key:"initLabOptions",value:function(){var e=this;Oa("lab.json").then((function(e){return e.data})).then((function(t){e.setState({lab:t.Lab})}))}},{key:"handleChange",value:function(e,t){var a=this.state.formControls,n=this.state.formState;void 0===e||0===e.length?(a[t].valid=!1,a[t].message="".concat(t," cannot be empty.")):(a[t].valid=!0,a[t].message=""),this.props.handleChange(e,t),a[t].value=e,n.dirty=!0,this.setState({formControls:a,formState:n})}},{key:"renderLabOptions",value:function(){return this.state.lab.map((function(e,t){return r.a.createElement(et.a,{value:e.Value,key:e.Value,name:e.Name},e.Name)}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"form-container"},r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-evenly",alignItems:"center",md:6,xs:12,sm:12,xl:8,lg:8},r.a.createElement(Hr,{handleChange:this.handleChange,selectedValue:this.state.formControls.Factory.value,formControl:this.state.formControls.Factory,propertyName:"Factory"}),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Da.a,{required:!0,format:"MMM-yyyy",label:"Month",views:["year","month"],openTo:"month",value:this.state.formControls.Month.value,onChange:function(t){e.handleChange(t,"Month")},disableFuture:!0})),r.a.createElement(Sa.a,{error:!this.state.formControls.Month.valid,style:{display:this.state.formControls.Month.valid?"none":""}},this.state.formControls.Month.message)),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense",required:!0},r.a.createElement(Ea.a,{shrink:!0,error:!this.state.formControls.Lab.valid},"Lab"),r.a.createElement(ba.a,{id:"Lab",value:this.state.formControls.Lab.value,error:!this.state.formControls.Lab.valid,onChange:function(t){return e.handleChange(t.target.value,"Lab")},displayEmpty:!0},r.a.createElement(et.a,{value:0},r.a.createElement("em",null,"Select")),this.renderLabOptions()),r.a.createElement(Sa.a,{error:!this.state.formControls.Lab.valid,style:{display:this.state.formControls.Lab.valid?"none":""}},this.state.formControls.Lab.message)),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Xa.a,{id:"pH",label:"pH",customInput:ge.a,defaultValue:this.state.formControls.pH.value,onValueChange:function(t){return e.handleChange(t.floatValue,"pH")},onFocus:function(e){e.target.select()},decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Xa.a,{id:"BOD",label:"BOD (ppm)",customInput:ge.a,defaultValue:this.state.formControls.BOD.value,onValueChange:function(t){return e.handleChange(t.floatValue,"BOD")},onFocus:function(e){e.target.select()},decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Xa.a,{id:"COD",label:"COD (ppm)",customInput:ge.a,defaultValue:this.state.formControls.COD.value,onValueChange:function(t){return e.handleChange(t.floatValue,"COD")},onFocus:function(e){e.target.select()},decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Xa.a,{id:"TSS",label:"TSS (ppm)",customInput:ge.a,defaultValue:this.state.formControls.TSS.value,onValueChange:function(t){return e.handleChange(t.floatValue,"TSS")},onFocus:function(e){e.target.select()},decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Xa.a,{id:"NH3N",label:"NH3-N (ppm)",customInput:ge.a,defaultValue:this.state.formControls.NH3N.value,onValueChange:function(t){return e.handleChange(t.floatValue,"NH3N")},onFocus:function(e){e.target.select()},decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Xa.a,{id:"Phosphor",label:"Phosphor (ppm)",customInput:ge.a,defaultValue:this.state.formControls.Phosphor.value,onValueChange:function(t){return e.handleChange(t.floatValue,"Phosphor")},onFocus:function(e){e.target.select()},decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Xa.a,{id:"NTotal",label:"NTotal (ppm)",customInput:ge.a,defaultValue:this.state.formControls.NTotal.value,onValueChange:function(t){return e.handleChange(t.floatValue,"NTotal")},onFocus:function(e){e.target.select()},decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Xa.a,{id:"Grease",label:"Grease (mg/L)",customInput:ge.a,defaultValue:this.state.formControls.Grease.value,onValueChange:function(t){return e.handleChange(t.floatValue,"Grease")},onFocus:function(e){e.target.select()},decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Xa.a,{id:"MPNColiform",label:"MpN Coliform (Jml/100ml)",customInput:ge.a,defaultValue:this.state.formControls.MPNColiform.value,onValueChange:function(t){return e.handleChange(t.floatValue,"MPNColiform")},onFocus:function(e){e.target.select()},decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(ge.a,{id:"Remarks",label:"Remarks",defaultValue:this.state.formControls.Remarks.value,onChange:function(t){return e.handleChange(t.target.value,"Remarks")},multiline:!0}))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=t.formControls;return e.formState.valid||Array.isArray(e.formState.errors)&&e.formState.errors.map((function(e){a[e.property].valid=!1,a[e.property].message=e.message})),{formState:e.formState,formControls:a}}}]),t}(r.a.Component),Xu=Zu,$u={Factory:"",Month:new Date,Lab:0,pH:0,BOD:0,COD:0,TSS:0,NH3N:0,NTotal:0,Phosphor:0,Grease:0,MPNColiform:0,Remarks:"",CreatedAt:new Date,CreatedBy:"Admin",LastUpdatedAt:new Date,LastUpdatedBy:"Admin"},ed=$u,td=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).openDialog=function(e){return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.awrap(ka("confirmation","delete"));case 2:t.sent,a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:e,dialogMessage:r.a.createElement("span",null,"Are you sure to delete this record factory",r.a.createElement("b",null," ",e.Factory.FctyCode," "),"in month"," ",r.a.createElement("b",null,new Date(e.Month).toLocaleString("en-GB",{year:"numeric",month:"short"})," "),"? This cannot be undone.")});case 4:case"end":return t.stop()}}))},a.closeDialog=function(){a.setState({dialogOpen:!1,currentDeleteData:null,dialogMessage:""})},a.openForm=function(e){void 0===e?a.setState({actionStatus:"Add",newData:Object(me.a)({},ed)}):a.setState({actionStatus:"Update",newData:Object(me.a)({},e)}),a.setState({formOpen:!0,formState:{valid:!0,dirty:!1,errors:[]}})},a.closeForm=function(){a.setState({formOpen:!1,newData:{},actionStatus:""})},a.onSave=function(){var e=a.state.formState,t=Object(me.a)({},a.state.newData),n=Ju.validateFields(t);if(n.valid){var r=Object(je.a)(a.state.data);"Add"===a.state.actionStatus?(t.LastUpdatedBy=a.state.operator,t.CreatedBy=a.state.operator,Ju.add("",t).then((function(t){!0===t.code?(e.valid=!0,r.push(t.data),a.setState({data:r}),a.closeForm(),a.snackOpen("Energy consumption created successfully!","success")):(e.valid=!1,e.errors=t.errors,a.snackOpen("Please fix the error(s) highlighted to save the details!","error"))})).catch((function(e){a.snackOpen("Oops, something went wrong while processing your request!","error")}))):(t.LastUpdatedBy=a.state.operator,Ju.update("",t).then((function(n){if(!0===n.code){e.valid=!0;var o=r.find((function(e){return e._id===t._id})),s=r.indexOf(o);r[s]=n.data,a.setState({data:r}),a.closeForm(),a.snackOpen("Energy consumption updated successfully!","success")}else e.valid=!1,e.errors=n.errors,a.snackOpen("Please fix the error(s) highlighted to save the details!","error")})).catch((function(e){a.snackOpen("Oops, something went wrong while processing your request!","error")})))}else{e.valid=!1;var o=n.errors.map((function(e){var t={};return t.property=e.property,t.message=e.message,t}));e.errors=o,a.snackOpen("Please fix the error(s) highlighted to save the details!","error")}a.setState({formState:e})},a.onDelete=function(){null!==a.state.currentDeleteData&&Ju.delete("".concat(a.state.currentDeleteData._id)).then((function(e){if(!0===e.code){var t=Object(je.a)(a.state.data),n=t.indexOf(a.state.currentDeleteData);t.splice(n,1),a.snackOpen("Successfully Deleted!","success"),a.closeDialog(),a.setState({data:t})}else a.snackOpen("Oops, something went wrong while processing your request!","error")}))},a.onEdit=function(e){a.openForm(e)},a.state={columns:[{title:"Factory",field:"Factory",render:function(e){return r.a.createElement("span",null,void 0===e.Factory?"":e.Factory.FctyCode)}},{title:"Month",field:"Month",render:function(e){return r.a.createElement("span",null,new Date(e.Month).toLocaleString("en-GB",{year:"numeric",month:"short"}))}},{title:"Lab",field:"Lab",lookup:{}},{title:"pH",field:"pH",render:function(e){return r.a.createElement(Xa.a,{value:e.pH,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"BOD",field:"BOD",render:function(e){return r.a.createElement(Xa.a,{value:e.BOD,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"COD",field:"COD",render:function(e){return r.a.createElement(Xa.a,{value:e.COD,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"TSS",field:"TSS",render:function(e){return r.a.createElement(Xa.a,{value:e.TSS,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"NH3-N",field:"NH3N",render:function(e){return r.a.createElement(Xa.a,{value:e.NH3N,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"Phosphor",field:"Phosphor",render:function(e){return r.a.createElement(Xa.a,{value:e.Phosphor,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"N Total",field:"NTotal",render:function(e){return r.a.createElement(Xa.a,{value:e.NTotal,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"Grease",field:"Grease",render:function(e){return r.a.createElement(Xa.a,{value:e.Grease,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"MPN Coliform",field:"MPNColiform",render:function(e){return r.a.createElement(Xa.a,{value:e.MPNColiform,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"Remarks",field:"Remarks"},{title:"Operator",field:"LastUpdatedBy"},{title:"Last Updated",field:"LastUpdatedAt",render:function(e){return r.a.createElement("span",null,new Date(e.LastUpdatedAt).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}))}}],data:[],currentDeleteData:null,newData:ed,formOpen:!1,dialogOpen:!1,dialogMessage:"",disabled:!1,actionStatus:"",formState:{valid:!0,dirty:!1,errors:[]},operator:"Admin"},a.openDialog=a.openDialog.bind(Object(Pe.a)(a)),a.closeDialog=a.closeDialog.bind(Object(Pe.a)(a)),a.openForm=a.openForm.bind(Object(Pe.a)(a)),a.closeForm=a.closeForm.bind(Object(Pe.a)(a)),a.snackOpen=a.snackOpen.bind(Object(Pe.a)(a)),a.snackClose=a.snackClose.bind(Object(Pe.a)(a)),a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initEffluentTestResult(),this.initLabData()}},{key:"initEffluentTestResult",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.awrap(Ju.get("").then((function(t){!0===t.code&&e.setState({data:t.data})})));case 2:case"end":return t.stop()}}))}},{key:"initLabData",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:Oa("lab.json").then((function(e){return e.data})).then((function(t){var a={};t.Lab.forEach((function(e){return a[e.Value]=e.Name}));var n=Object(je.a)(e.state.columns);n[n.findIndex((function(e){return"Lab"===e.field}))].lookup=a,e.setState({columns:n})}));case 1:case"end":return t.stop()}}))}},{key:"handleChange",value:function(e,t){var a=this.state.newData;a[t]=e;var n=this.state.formState;n.valid=!0,this.setState({newData:a,formState:n})}},{key:"snackOpen",value:function(e,t){this.setState({alertOpen:!0,alertMessage:e,alertClass:t})}},{key:"snackClose",value:function(){this.setState({alertOpen:!1,alertMessage:"",alertClass:"",currentDeleteData:null})}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{style:{margin:"20px 20px 10px 0px"}},r.a.createElement(Ve.a,{title:"Monthly Effluent Test Result",columns:this.state.columns,data:this.state.data,components:{Toolbar:function(t){return r.a.createElement("div",null,r.a.createElement(Le.MTableToolbar,t),r.a.createElement("div",{style:{padding:"0px 15px"}},r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:function(){return e.openForm()},"aria-label":"add"},r.a.createElement(wt.a,null))))}},actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.data,columns:e.state.columns,fileName:"Monthly Effluent Test Result"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.initEffluentTestResult()}},{icon:"edit",tooltip:"Edit",onClick:function(t,a){return e.openForm(a)}},{icon:"delete",tooltip:"Delete",onClick:function(t,a){return e.openDialog(a)}}],options:{}}),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:6e3,open:this.state.alertOpen,onClose:this.snackClose,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}),r.a.createElement(Ae.a,{fullScreen:!0,open:this.state.formOpen,onClose:this.closeForm,TransitionComponent:this.Transition},r.a.createElement(w.a,{className:"appBar"},r.a.createElement(F.a,null,r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:this.closeForm,"aria-label":"close"},r.a.createElement(Vt.a,null)),r.a.createElement(x.a,{variant:"h6",className:"app-title"},"Monthly Effluent Test Result Details"),r.a.createElement(he.a,{color:"inherit",disabled:this.state.disabled,onClick:this.onSave},"save"))),r.a.createElement(_e.a,null,r.a.createElement(Xu,{handleChange:this.handleChange,formData:this.state.newData,formState:this.state.formState}))),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.closeDialog,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.closeDialog,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDelete,color:"primary"},"Delete"))))}}]),t}(r.a.Component),ad=td,nd={properties:{Factory:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Factory cannot be empty."}},Month:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Month cannot be empty."}}}},rd=a(24),od={validateFields:function(e){return rd.validate(e,nd,{cast:!0})},get:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="wasteManagement/"+e,a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 2:case"end":return a.stop()}}))},getFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("wasteManagement-filter/").concat(e),a.next=3,l.a.awrap(We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 3:return a.abrupt("return",a.sent);case 4:case"end":return a.stop()}}))},update:function(e,t){return Qe("wasteManagement/"+e,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Successfully updated.",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="wasteManagement/"+e,n.abrupt("return",He(a,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,message:"Successfully added.",data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("wasteManagement/"+e).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e}))}},sd=od,id=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={formControls:{Factory:{valid:!0,message:"",value:a.props.formData.Factory},Month:{valid:!0,message:"",value:a.props.formData.Month},Hazard:{valid:!0,message:"",value:a.props.formData.Hazard},NonHazard:{valid:!0,message:"",value:a.props.formData.NonHazard},Recycled:{valid:!0,message:"",value:a.props.formData.Recycled},SludgeGenerated:{valid:!0,message:"",value:a.props.formData.SludgeGenerated},SludgeReused:{valid:!0,message:"",value:a.props.formData.SludgeReused},Remarks:{valid:!0,message:"",value:a.props.formData.Remarks}},formState:{valid:!0,dirty:!1,errors:[]},lab:[]},a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initLabOptions()}},{key:"initLabOptions",value:function(){var e=this;Oa("lab.json").then((function(e){return e.data})).then((function(t){e.setState({lab:t.Lab})}))}},{key:"handleChange",value:function(e,t){var a=this.state.formControls,n=this.state.formState;void 0===e||0===e.length?(a[t].valid=!1,a[t].message="".concat(t," cannot be empty.")):(a[t].valid=!0,a[t].message=""),this.props.handleChange(e,t),a[t].value=e,n.dirty=!0,this.setState({formControls:a,formState:n})}},{key:"renderLabOptions",value:function(){return this.state.lab.map((function(e,t){return r.a.createElement(et.a,{value:e.Value,key:e.Value,name:e.Name},e.Name)}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"form-container"},r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-evenly",alignItems:"center",md:6,xs:12,sm:12,xl:8,lg:8},r.a.createElement(Hr,{handleChange:this.handleChange,selectedValue:this.state.formControls.Factory.value,formControl:this.state.formControls.Factory,propertyName:"Factory"}),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Da.a,{required:!0,format:"MMM-yyyy",label:"Month",views:["year","month"],openTo:"month",value:this.state.formControls.Month.value,onChange:function(t){e.handleChange(t,"Month")},disableFuture:!0})),r.a.createElement(Sa.a,{error:!this.state.formControls.Month.valid,style:{display:this.state.formControls.Month.valid?"none":""}},this.state.formControls.Month.message)),r.a.createElement(be.a,{container:!0,style:{marginTop:25,width:"100%"},direction:"row",justify:"space-around",alignItems:"center"},r.a.createElement(bn,{label:"Production Process",tyle:{width:"100%"}},r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Xa.a,{id:"Hazard",label:"Total Hazardous Waste Generated (kg)",customInput:ge.a,defaultValue:this.state.formControls.Hazard.value,onValueChange:function(t){return e.handleChange(t.floatValue,"Hazard")},onFocus:function(e){e.target.select()},decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Xa.a,{id:"NonHazard",label:"Total Non Hazardous Waste Generated (kg)",customInput:ge.a,defaultValue:this.state.formControls.NonHazard.value,onValueChange:function(t){return e.handleChange(t.floatValue,"NonHazard")},onFocus:function(e){e.target.select()},decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Xa.a,{id:"Recycled",label:"Total Waste Recycled & Reused (kg)",customInput:ge.a,defaultValue:this.state.formControls.Recycled.value,onValueChange:function(t){return e.handleChange(t.floatValue,"Recycled")},onFocus:function(e){e.target.select()},decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})))),r.a.createElement(be.a,{container:!0,style:{marginTop:25,width:"100%"},direction:"row",justify:"space-around",alignItems:"center"},r.a.createElement(bn,{label:"Waste Water Treatment",style:{width:"100%"}},r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Xa.a,{id:"SludgeGenerated",label:"Total Sludge Generated (kg)",customInput:ge.a,defaultValue:this.state.formControls.SludgeGenerated.value,onValueChange:function(t){return e.handleChange(t.floatValue,"SludgeGenerated")},onFocus:function(e){e.target.select()},decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Xa.a,{id:"SludgeReused",label:"Total Sludge Reused (kg)",customInput:ge.a,defaultValue:this.state.formControls.SludgeReused.value,onValueChange:function(t){return e.handleChange(t.floatValue,"SludgeReused")},onFocus:function(e){e.target.select()},decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})))),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(ge.a,{id:"Remarks",label:"Remarks",defaultValue:this.state.formControls.Remarks.value,onChange:function(t){return e.handleChange(t.target.value,"Remarks")},multiline:!0}))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=t.formControls;return e.formState.valid||Array.isArray(e.formState.errors)&&e.formState.errors.map((function(e){a[e.property].valid=!1,a[e.property].message=e.message})),{formState:e.formState,formControls:a}}}]),t}(r.a.Component),ld=id,cd={Factory:"",Month:new Date,Hazard:0,NonHazard:0,Recycled:0,SludgeGenerated:0,SludgeReused:0,Remarks:"",CreatedAt:new Date,CreatedBy:"Admin",LastUpdatedAt:new Date,LastUpdatedBy:"Admin"},ud=cd,dd=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).openDialog=function(e){return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.awrap(ka("confirmation","delete"));case 2:t.sent,a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:e,dialogMessage:r.a.createElement("span",null,"Are you sure to delete this record factory",r.a.createElement("b",null," ",e.Factory.FctyCode," "),"in month"," ",r.a.createElement("b",null,new Date(e.Month).toLocaleString("en-GB",{year:"numeric",month:"short"})," "),"? This cannot be undone.")});case 4:case"end":return t.stop()}}))},a.closeDialog=function(){a.setState({dialogOpen:!1,currentDeleteData:null,dialogMessage:""})},a.openForm=function(e){void 0===e?a.setState({actionStatus:"Add",newData:Object(me.a)({},ud)}):a.setState({actionStatus:"Update",newData:Object(me.a)({},e)}),a.setState({formOpen:!0,formState:{valid:!0,dirty:!1,errors:[]}})},a.closeForm=function(){a.setState({formOpen:!1,newData:{},actionStatus:""})},a.onSave=function(){var e=a.state.formState,t=Object(me.a)({},a.state.newData),n=sd.validateFields(t);if(n.valid){var r=Object(je.a)(a.state.data);"Add"===a.state.actionStatus?(t.LastUpdatedBy=a.state.operator,t.CreatedBy=a.state.operator,sd.add("",t).then((function(t){!0===t.code?(e.valid=!0,r.push(t.data),a.setState({data:r}),a.closeForm(),a.snackOpen("Energy consumption created successfully!","success")):(e.valid=!1,e.errors=t.errors,a.snackOpen("Please fix the error(s) highlighted to save the details!","error"))})).catch((function(e){a.snackOpen("Oops, something went wrong while processing your request!","error")}))):(t.LastUpdatedBy=a.state.operator,sd.update("",t).then((function(n){if(!0===n.code){e.valid=!0;var o=r.find((function(e){return e._id===t._id})),s=r.indexOf(o);r[s]=n.data,a.setState({data:r}),a.closeForm(),a.snackOpen("Energy consumption updated successfully!","success")}else e.valid=!1,e.errors=n.errors,a.snackOpen("Please fix the error(s) highlighted to save the details!","error")})).catch((function(e){a.snackOpen("Oops, something went wrong while processing your request!","error")})))}else{e.valid=!1;var o=n.errors.map((function(e){var t={};return t.property=e.property,t.message=e.message,t}));e.errors=o,a.snackOpen("Please fix the error(s) highlighted to save the details!","error")}a.setState({formState:e})},a.onDelete=function(){null!==a.state.currentDeleteData&&sd.delete("".concat(a.state.currentDeleteData._id)).then((function(e){if(!0===e.code){var t=Object(je.a)(a.state.data),n=t.indexOf(a.state.currentDeleteData);t.splice(n,1),a.snackOpen("Successfully Deleted!","success"),a.closeDialog(),a.setState({data:t})}else a.snackOpen("Oops, something went wrong while processing your request!","error")}))},a.onEdit=function(e){a.openForm(e)},a.state={columns:[{title:"Factory",field:"Factory",render:function(e){return r.a.createElement("span",null,void 0===e.Factory?"":e.Factory.FctyCode)}},{title:"Month",field:"Month",render:function(e){return r.a.createElement("span",null,new Date(e.Month).toLocaleString("en-GB",{year:"numeric",month:"short"}))}},{title:"Hazardous Waste (Ton)",field:"Hazard",render:function(e){return r.a.createElement(Xa.a,{value:e.Hazard,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"Non Hazardous Waste (Ton)",field:"NonHazard",render:function(e){return r.a.createElement(Xa.a,{value:e.NonHazard,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"Waste Recycled (Ton)",field:"Recycled",render:function(e){return r.a.createElement(Xa.a,{value:e.Recycled,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"Sludge Generated (Ton)",field:"SludgeGenerated",render:function(e){return r.a.createElement(Xa.a,{value:e.SludgeGenerated,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"Sludge Reused (Ton)",field:"SludgeReused",render:function(e){return r.a.createElement(Xa.a,{value:e.SludgeReused,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"Remarks",field:"Remarks"},{title:"Operator",field:"LastUpdatedBy"},{title:"Last Updated",field:"LastUpdatedAt",render:function(e){return r.a.createElement("span",null,new Date(e.LastUpdatedAt).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}))}}],data:[],currentDeleteData:null,newData:ud,formOpen:!1,dialogOpen:!1,dialogMessage:"",disabled:!1,actionStatus:"",formState:{valid:!0,dirty:!1,errors:[]},operator:"Admin"},a.openDialog=a.openDialog.bind(Object(Pe.a)(a)),a.closeDialog=a.closeDialog.bind(Object(Pe.a)(a)),a.openForm=a.openForm.bind(Object(Pe.a)(a)),a.closeForm=a.closeForm.bind(Object(Pe.a)(a)),a.snackOpen=a.snackOpen.bind(Object(Pe.a)(a)),a.snackClose=a.snackClose.bind(Object(Pe.a)(a)),a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initWasteManagement()}},{key:"initWasteManagement",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.awrap(sd.get("").then((function(t){!0===t.code&&e.setState({data:t.data})})));case 2:case"end":return t.stop()}}))}},{key:"handleChange",value:function(e,t){var a=this.state.newData;a[t]=e;var n=this.state.formState;n.valid=!0,this.setState({newData:a,formState:n})}},{key:"snackOpen",value:function(e,t){this.setState({alertOpen:!0,alertMessage:e,alertClass:t})}},{key:"snackClose",value:function(){this.setState({alertOpen:!1,alertMessage:"",alertClass:"",currentDeleteData:null})}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{style:{margin:"20px 20px 10px 0px"}},r.a.createElement(Ve.a,{title:"Waste Management",columns:this.state.columns,data:this.state.data,components:{Toolbar:function(t){return r.a.createElement("div",null,r.a.createElement(Le.MTableToolbar,t),r.a.createElement("div",{style:{padding:"0px 15px"}},r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:function(){return e.openForm()},"aria-label":"add"},r.a.createElement(wt.a,null))))}},actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.data,columns:e.state.columns,fileName:"Waste Management"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.initWasteManagement()}},{icon:"edit",tooltip:"Edit",onClick:function(t,a){return e.openForm(a)}},{icon:"delete",tooltip:"Delete",onClick:function(t,a){return e.openDialog(a)}}],options:{}}),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:6e3,open:this.state.alertOpen,onClose:this.snackClose,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}),r.a.createElement(Ae.a,{fullScreen:!0,open:this.state.formOpen,onClose:this.closeForm,TransitionComponent:this.Transition},r.a.createElement(w.a,{className:"appBar"},r.a.createElement(F.a,null,r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:this.closeForm,"aria-label":"close"},r.a.createElement(Vt.a,null)),r.a.createElement(x.a,{variant:"h6",className:"app-title"},"Waste Management"),r.a.createElement(he.a,{color:"inherit",disabled:this.state.disabled,onClick:this.onSave},"save"))),r.a.createElement(_e.a,null,r.a.createElement(ld,{handleChange:this.handleChange,formData:this.state.newData,formState:this.state.formState}))),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.closeDialog,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.closeDialog,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDelete,color:"primary"},"Delete"))))}}]),t}(r.a.Component),md=dd,pd={properties:{Factory:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Factory cannot be empty."}},Month:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Month cannot be empty."}},Details:{type:"array",minItems:1,messages:{minItems:"Please enter details."}}}},fd=a(24),hd={validateFields:function(e){return fd.validate(e,pd,{cast:!0})},get:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="chemicalConsumption/"+e,a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 2:case"end":return a.stop()}}))},getFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("chemicalConsumption-filter/").concat(e),a.next=3,l.a.awrap(We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 3:return a.abrupt("return",a.sent);case 4:case"end":return a.stop()}}))},update:function(e,t){return Qe("chemicalConsumption/"+e,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Successfully updated.",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="chemicalConsumption/"+e,n.abrupt("return",He(a,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,message:"Successfully added.",data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("chemicalConsumption/"+e).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e}))}},gd=hd,yd=(a(876),a(877),{properties:{ChemicalType:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{required:"Chemical type cannot be empty.",allowEmpty:"Chemical type cannot be empty."}},Quantity:{description:"",type:["number"],required:!0,allowEmpty:!1,exclusiveMinimum:0,messages:{required:"Quantity must be greater than 0.",allowEmpty:"Quantity must be greater than 0.",exclusiveMinimum:"Quantity must be greater than 0."}}}}),vd=a(24),Cd={validateFields:function(e){return vd.validate(e,yd,{cast:!0})},get:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="chemicalConsumptionDetail/"+e,a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 2:case"end":return a.stop()}}))},getFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("chemicalConsumptionDetail-filter/").concat(e),a.next=3,l.a.awrap(We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 3:return a.abrupt("return",a.sent);case 4:case"end":return a.stop()}}))},update:function(e,t){return Qe("chemicalConsumptionDetail/"+e,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Successfully updated.",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="chemicalConsumptionDetail/"+e,n.abrupt("return",He(a,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,message:"Successfully added.",data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("chemicalConsumptionDetail/"+e).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e}))}},Dd=Cd,Ed=(a(878),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={chemicalData:[]},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initChemical()}},{key:"initChemical",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.awrap(Hc.get("").then((function(t){if(!0===t.code){var a=Object(je.a)(e.state.chemicalData);a=t.data,e.setState({chemicalData:a})}})));case 2:case"end":return t.stop()}}))}},{key:"renderOptions",value:function(){return this.state.chemicalData.map((function(e,t){return r.a.createElement(et.a,{label:"Select Chemical",value:e._id,key:e._id,name:e.Name},e.Name)}))}},{key:"handleChange",value:function(e,t){var a=this.state.chemicalData.find((function(t){return t._id===e.target.value}));void 0!==a?this.props.handleChange(a,t,this.props.required):this.props.handleChange("",t,this.props.required)}},{key:"render",value:function(){var e=this,t=this.props.required&&""===this.props.selectedValue||!this.props.formControl.valid;return r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Ea.a,{shrink:!0,htmlFor:"chemical",required:!0,error:t},"Chemical Type"),r.a.createElement(ba.a,{id:this.props.propertyName,value:void 0===this.props.selectedValue||void 0===this.props.selectedValue._id?"":this.props.selectedValue._id,error:t,onChange:function(t){return e.handleChange(t,e.props.propertyName)},margin:"dense",displayEmpty:!0},r.a.createElement(et.a,{value:""},r.a.createElement("em",null,"Select chemical type")),this.renderOptions()),r.a.createElement(Sa.a,{error:t,style:{display:t?"":"none"}},this.props.required&&""===this.props.selectedValue?"Chemical type cannot be empty":this.props.formControl.valid?"":this.props.formControl.message))}}]),t}(r.a.Component)),bd=Ed,Sd=a(23),Od={ChemicalType:{valid:!0,message:""},Quantity:{valid:!0,message:""}},kd=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).dialogClose=function(){a.setState({dialogOpen:!1,currentDeleteData:null})},a.state={columns:[{title:"Chemical Type",field:"ChemicalType",render:function(e){return r.a.createElement("span",null,e.ChemicalType.Name)},editComponent:function(e){return r.a.createElement(bd,{required:!0,propertyName:"ChemicalType",selectedValue:e.rowData.ChemicalType,formControl:a.state.formControls.ChemicalType,handleChange:e.onChange})}},{title:"Qty",field:"Quantity",render:function(e){return r.a.createElement(Xa.a,{value:e.Quantity,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})},editComponent:function(e){return r.a.createElement(Xa.a,{id:"Hazard",label:"Quantity",customInput:ge.a,value:void 0===e.rowData.Quantity?0:e.rowData.Quantity,onValueChange:function(t){return e.onChange(t.floatValue)},onFocus:function(e){e.target.select()},decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0,error:!a.state.formControls.Quantity.valid,helperText:a.state.formControls.Quantity.valid?"":a.state.formControls.Quantity.message})}},{title:"Unit",render:function(e){return r.a.createElement("span",null,void 0===e||void 0===e.ChemicalType?"":e.ChemicalType.Unit)},editable:"never"}],data:a.props.formData,chemicalId:a.props.chemicalId,formControls:Sd(Od),currentDeleteData:"",dialogOpen:!1,alertMessage:"",dialogMessage:"",alertClass:""},a.dialogOpen=a.dialogOpen.bind(Object(Pe.a)(a)),a.dialogClose=a.dialogClose.bind(Object(Pe.a)(a)),a.OnDelete=a.OnDelete.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"dialogOpen",value:function(e,t){this.setState({dialogOpen:!0,currentDeleteData:t,dialogMessage:r.a.createElement("span",null,"Are you sure to delete this record ",r.a.createElement("b",null,t.ChemicalType.Name)," ","?")})}},{key:"initFormControl",value:function(){this.setState({formControls:Sd(Od)})}},{key:"OnDelete",value:function(){if(null!==this.state.currentDeleteData){var e=Object(je.a)(this.state.data),t=e.indexOf(this.state.currentDeleteData);e.splice(t,1),this.dialogClose(),this.props.handleDetailChange(e,"Details"),this.setState({data:e})}}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{style:{margin:"20px 0px 10px 0px",width:"100%"}},r.a.createElement(Ve.a,{title:"Chemical Consumption Details",columns:this.state.columns,data:this.state.data,editable:{onRowAdd:function(t){return new Promise((function(a,n){setTimeout((function(){var r=Object(je.a)(e.state.data),o=Sd(Od),s=Dd.validateFields(t);s.valid?(r.push(t),e.setState({data:r},(function(){return a()})),e.props.handleDetailChange(r,"Details"),e.initFormControl()):(n(),s.errors.map((function(e){o[e.property].valid=!1,o[e.property].message=e.message})),e.setState({formControls:o}))}),100)}))},onRowUpdate:function(t,a){return new Promise((function(n,r){setTimeout((function(){var o=Object(je.a)(e.state.data),s=Sd(Od),i=Dd.validateFields(t);if(i.valid){var l=o.indexOf(a);o[l]=t,e.setState({data:o},(function(){return n()})),e.props.handleDetailChange(o,"Details"),e.initFormControl()}else r(),i.errors.map((function(e){s[e.property].valid=!1,s[e.property].message=e.message})),e.setState({formControls:s})}),100)}))}},actions:[{icon:"delete",tooltip:"Delete",onClick:function(t,a){return e.dialogOpen(t,a)}}],icons:{Clear:function(t){return r.a.createElement(Nt.a,{onClick:function(){e.initFormControl()},style:{padding:0,margin:0}})}},options:{search:!1,actionsColumnIndex:-1}}),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:600,open:this.state.alertOpen,onClose:this.snackClose,message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.dialogClose,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.dialogClose,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:function(){return e.OnDelete()},color:"primary"},"Delete"))))}}]),t}(r.a.Component),wd=kd,Fd=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={formControls:{Factory:{valid:!0,message:"",value:a.props.formData.Factory},Month:{valid:!0,message:"",value:a.props.formData.Month},Details:{valid:!0,message:"",value:a.props.formData.Details}},chemicalUsedFor:[],supportDoc:a.props.formData.SupportDocument},a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"initChemicalUsedFor",value:function(){var e=this;Oa("chemicalUsedFor.json").then((function(e){return e.data})).then((function(t){e.setState({chemicalUsedFor:t.ChemicalUsedFor})}))}},{key:"renderChemicalUsedForOptions",value:function(){return this.state.chemicalUsedFor.map((function(e,t){return r.a.createElement(et.a,{label:"Select used for",value:e.Value,key:e.Value,name:e.Name},e.Name)}))}},{key:"handleChange",value:function(e,t){var a=this.state.formControls,n=this.state.formState;void 0===e||0===e.length?(a[t].valid=!1,a[t].message="".concat(t," cannot be empty.")):(a[t].value=e,a[t].valid=!0,a[t].message="",this.props.handleChange(e,t)),n.dirty=!0,this.setState({formControls:a,formState:n})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"form-container"},r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-evenly",alignItems:"center",md:6,xs:12,sm:12,xl:8,lg:8},r.a.createElement(Hr,{handleChange:this.handleChange,selectedValue:this.state.formControls.Factory.value,formControl:this.state.formControls.Factory,propertyName:"Factory"}),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Da.a,{required:!0,format:"MMM-yyyy",label:"Month",views:["year","month"],openTo:"month",value:this.state.formControls.Month.value,onChange:function(t){e.handleChange(t,"Month")},disableFuture:!0})),r.a.createElement(Sa.a,{error:!this.state.formControls.Month.valid,style:{display:this.state.formControls.Month.valid?"none":""}},this.state.formControls.Month.message)),r.a.createElement(be.a,{container:!0,direction:"row",justify:"space-around",alignItems:"center",spacing:1},r.a.createElement(wd,{formData:this.state.formControls.Details.value,handleDetailChange:this.handleChange}))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=t.formControls;return e.formState.valid||Array.isArray(e.formState.errors)&&e.formState.errors.map((function(e){a[e.property].valid=!1,a[e.property].message=e.message})),{formState:e.formState,formControls:a}}}]),t}(r.a.Component),xd=Fd,Td={Factory:"",Month:new Date,Details:[],CreatedAt:new Date,CreatedBy:"Admin",LastUpdatedAt:new Date,LastUpdatedBy:"Admin"},Nd=Td,jd=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).openDialog=function(e){return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.awrap(ka("confirmation","delete"));case 2:t.sent,a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:e,dialogMessage:r.a.createElement("span",null,"Are you sure to delete this record factory",r.a.createElement("b",null," ",e.Factory.FctyCode," "),"in month"," ",r.a.createElement("b",null,new Date(e.Month).toLocaleString("en-GB",{year:"numeric",month:"short"})," "),"? This cannot be undone.")});case 4:case"end":return t.stop()}}))},a.closeDialog=function(){a.setState({dialogOpen:!1,currentDeleteData:null,dialogMessage:""})},a.openForm=function(e){void 0===e?a.setState({actionStatus:"Add",newData:Object(me.a)({},Nd)}):a.setState({actionStatus:"Update",newData:Object(me.a)({},e)}),a.setState({formOpen:!0,formState:{valid:!0,dirty:!1,errors:[]}})},a.closeForm=function(){a.setState({formOpen:!1,newData:{},actionStatus:""})},a.onSave=function(){var e=a.state.formState,t=Object(me.a)({},a.state.newData),n=gd.validateFields(t);if(n.valid){var r=Object(je.a)(a.state.data);"Add"===a.state.actionStatus?(t.LastUpdatedBy=a.state.operator,t.CreatedBy=a.state.operator,gd.add("",t).then((function(t){!0===t.code?(e.valid=!0,r.push(t.data),a.setState({data:r}),a.closeForm(),a.snackOpen("Energy consumption created successfully!","success")):(e.valid=!1,e.errors=t.errors,a.snackOpen("Please fix the error(s) highlighted to save the details!","error"))})).catch((function(e){a.snackOpen("Oops, something went wrong while processing your request!","error")}))):(t.LastUpdatedBy=a.state.operator,gd.update("",t).then((function(n){if(!0===n.code){e.valid=!0;var o=r.find((function(e){return e._id===t._id})),s=r.indexOf(o);r[s]=n.data,a.setState({data:r}),a.closeForm(),a.snackOpen("Energy consumption updated successfully!","success")}else e.valid=!1,e.errors=n.errors,a.snackOpen("Please fix the error(s) highlighted to save the details!","error")})).catch((function(e){a.snackOpen("Oops, something went wrong while processing your request!","error")})))}else{e.valid=!1;var o=n.errors.map((function(e){var t={};return t.property=e.property,t.message=e.message,t}));e.errors=o,void 0!==o.find((function(e){return"Details"===e.property}))?a.snackOpen(o.find((function(e){return"Details"===e.property})).message,"error"):a.snackOpen("Please fix the error(s) highlighted to save the details!","error")}a.setState({formState:e})},a.onDelete=function(){null!==a.state.currentDeleteData&&gd.delete("".concat(a.state.currentDeleteData._id)).then((function(e){if(!0===e.code){var t=Object(je.a)(a.state.data),n=t.indexOf(a.state.currentDeleteData);t.splice(n,1),a.snackOpen("Successfully Deleted!","success"),a.closeDialog(),a.setState({data:t})}else a.snackOpen("Oops, something went wrong while processing your request!","error")}))},a.onEdit=function(e){a.openForm(e)},a.state={columns:[{title:"Factory",field:"Factory",render:function(e){return r.a.createElement("span",null,void 0===e.Factory?"":e.Factory.FctyCode)}},{title:"Month",field:"Month",render:function(e){return r.a.createElement("span",null,new Date(e.Month).toLocaleString("en-GB",{year:"numeric",month:"short"}))}},{title:"Category",render:function(e){return r.a.createElement(E.a,null,e.Details.map((function(e,t){return r.a.createElement(b.a,{divider:!0,key:e.ChemicalType._id},e.ChemicalType.Name)})))}},{title:"Consumption",render:function(e){return r.a.createElement(E.a,null,e.Details.map((function(e,t){return r.a.createElement(b.a,{divider:!0,key:e.ChemicalType._id},r.a.createElement(Xa.a,{value:e.Quantity,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0}))})))}},{title:"Unit",render:function(e){return r.a.createElement(E.a,null,e.Details.map((function(e,t){return r.a.createElement(b.a,{divider:!0,key:e.ChemicalType._id},e.ChemicalType.Unit)})))}},{title:"Operator",field:"LastUpdatedBy"},{title:"Last Updated",field:"LastUpdatedAt",render:function(e){return r.a.createElement("span",null,new Date(e.LastUpdatedAt).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}))}}],data:[],currentDeleteData:null,newData:Nd,formOpen:!1,dialogOpen:!1,dialogMessage:"",disabled:!1,actionStatus:"",formState:{valid:!0,dirty:!1,errors:[]},operator:"Admin"},a.openDialog=a.openDialog.bind(Object(Pe.a)(a)),a.closeDialog=a.closeDialog.bind(Object(Pe.a)(a)),a.openForm=a.openForm.bind(Object(Pe.a)(a)),a.closeForm=a.closeForm.bind(Object(Pe.a)(a)),a.snackOpen=a.snackOpen.bind(Object(Pe.a)(a)),a.snackClose=a.snackClose.bind(Object(Pe.a)(a)),a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initChemicalConsumption()}},{key:"initChemicalConsumption",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.awrap(gd.get("").then((function(t){!0===t.code&&e.setState({data:t.data})})));case 2:case"end":return t.stop()}}))}},{key:"handleChange",value:function(e,t){var a=this.state.newData;a[t]=e;var n=this.state.formState;n.valid=!0,this.setState({newData:a,formState:n})}},{key:"snackOpen",value:function(e,t){this.setState({alertOpen:!0,alertMessage:e,alertClass:t})}},{key:"snackClose",value:function(){this.setState({alertOpen:!1,alertMessage:"",alertClass:"",currentDeleteData:null})}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{style:{margin:"20px 20px 10px 0px"}},r.a.createElement(Ve.a,{title:"Chemical Consumption",columns:this.state.columns,data:this.state.data,components:{Toolbar:function(t){return r.a.createElement("div",null,r.a.createElement(Le.MTableToolbar,t),r.a.createElement("div",{style:{padding:"0px 15px"}},r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:function(){return e.openForm()},"aria-label":"add"},r.a.createElement(wt.a,null))))}},actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.data,columns:e.state.columns,fileName:"Chemical Consumption"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.initChemicalConsumption()}},{icon:"edit",tooltip:"Edit",onClick:function(t,a){return e.openForm(a)}},{icon:"delete",tooltip:"Delete",onClick:function(t,a){return e.openDialog(a)}}],options:{}}),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:6e3,open:this.state.alertOpen,onClose:this.snackClose,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}),r.a.createElement(Ae.a,{fullScreen:!0,open:this.state.formOpen,onClose:this.closeForm,TransitionComponent:this.Transition},r.a.createElement(w.a,{className:"appBar"},r.a.createElement(F.a,null,r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:this.closeForm,"aria-label":"close"},r.a.createElement(Vt.a,null)),r.a.createElement(x.a,{variant:"h6",className:"app-title"},"Chemical Consumption"),r.a.createElement(he.a,{color:"inherit",disabled:this.state.disabled,onClick:this.onSave},"save"))),r.a.createElement(_e.a,null,r.a.createElement(xd,{handleChange:this.handleChange,formData:this.state.newData,formState:this.state.formState}))),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.closeDialog,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.closeDialog,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDelete,color:"primary"},"Delete"))))}}]),t}(r.a.Component),Pd=jd,Ad=(a(879),{properties:{ShippingType:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Shipping Type cannot be empty.",conform:"Shipping Type cannot be empty.",required:"Shipping Type cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},Name:{description:"",type:"string",required:!0,allowEmpty:!1,messages:{allowEmpty:"Name cannot be empty.",conform:"Name cannot be empty.",required:"Name cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},Remarks:{description:"",type:["string","object"]},CreatedAt:{type:"any",default:Date.now()},CreatedBy:{type:"string",default:""},LastUpdatedAt:{type:"any",default:Date.now()},LastUpdatedBy:{type:"string",default:""}}}),Md=a(24),_d={validateFields:function(e){return Md.validate(e,Ad,{cast:!0})},validateContainerDetailsFields:function(e){return Md.validate(e,Ad,{cast:!0})},getstuffingDocumentGroup:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="StuffingDocumentGroup/"+e,a.abrupt("return",We(t).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},getstuffingDocumentGroupFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("StuffingDocumentGroup-filter/").concat(e),a.abrupt("return",We(t).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},getOnestuffingDocumentGroup:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("StuffingDocumentGroup/").concat(e),a.abrupt("return",We(t).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},update:function(e,t){return Qe("StuffingDocumentGroup/"+e,t).then((function(e){return console.log(e),200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Updated",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="StuffingDocumentGroup/"+e,n.abrupt("return",He(a,t).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Added",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,formValid:!0,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("StuffingDocumentGroup/"+e).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))}},Id=_d,Rd=a(23),Ld=(Object(n.forwardRef)((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),r.a.forwardRef((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),{ShippingType:{valid:!0,message:""},Name:{valid:!0,message:""}}),Vd=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).snackOpen=function(e,t){a.setState({snackOpen:!a.state.snackOpen,alertMessage:e,alertClass:t})},a.dialogOpen=function(e){a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:e,dialogMessage:r.a.createElement("span",null,"Are you sure to delete this record ",r.a.createElement("b",null,e.Name)," ? This cannot be undone.")})},a.diaLogClose=function(){a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:null})},a.onDelete=function(){null!==a.state.currentDeleteData&&Id.delete("".concat(a.state.currentDeleteData._id)).then((function(e){if(!0===e.code){var t=Object(je.a)(a.state.data),n=t.indexOf(a.state.currentDeleteData);t.splice(n,1),a.setState({data:t,currentDeleteData:"",dialogOpen:!a.state.dialogOpen}),a.snackOpen("Successfully Deleted!","success")}else a.snackOpen("Oops, something went wrong while processing your request!","error")}))},a.state={formControls:Rd(Ld),columns:[{title:"Shipping Type",field:"ShippingType",render:function(e){return r.a.createElement("span",null,e.ShippingType.Name)},editComponent:function(e){return r.a.createElement(xa,{jsonFileName:"shipping",jsonPropertyName:"ShippingMethod",formControl:a.state.formControls.ShippingType,propertyName:"ShippingType",required:!0,label:"Shipping Type",handleChange:function(t){return e.onChange(t)},selectedValue:void 0===e.value?"":e.value.Value})}},{title:"Name",field:"Name",editComponent:function(e){return r.a.createElement(ge.a,{margin:"dense",required:!0,id:"Name",label:"Name",type:"text",error:""===e.value||!a.state.formControls.Name.valid,helperText:""===e.value?"Name cannot empty":a.state.formControls.Name.valid?"":a.state.formControls.Name.message,defaultValue:e.rowData.Name,onChange:function(t){return e.onChange(t.target.value.trim())}})}},{title:"Remarks",field:"Remarks",type:"string",editComponent:function(e){return r.a.createElement(ge.a,{margin:"dense",id:"Remarks",label:"Remarks",type:"text",defaultValue:e.rowData.Remarks,onChange:function(t){return e.onChange(t.target.value)}})}},{title:"Operator",field:"LastUpdatedBy",editable:"never"},{title:"Last Updated",field:"LastUpdatedAt",render:function(e){return r.a.createElement("span",null,void 0===e?"":new Date(e.LastUpdatedAt).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}))},editable:"never"}],data:[],currentDeleteData:"",dialogOpen:!1,snackOpen:!1,alertMessage:"",dialogMessage:"",alertClass:""},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initStuffingDocumentGroup()}},{key:"initStuffingDocumentGroup",value:function(){var e=this;Id.getstuffingDocumentGroup("").then((function(t){if(!0===t.code){var a=Object(je.a)(e.state.data);a=t.data,e.setState({data:a})}}))}},{key:"initFormControl",value:function(){this.setState({formControls:Rd(Ld)})}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{container:!0,direction:"column",justify:"center",wrap:"wrap",style:{margin:"20px 20px 10px 0px"}},r.a.createElement(be.a,{item:!0,xs:12},r.a.createElement(Ve.a,{title:"Stuffing Document Group",columns:this.state.columns,data:this.state.data,editable:{onRowAdd:function(t){return new Promise((function(a,n){setTimeout((function(){var r=Object(je.a)(e.state.data),o=Object(me.a)({},e.state.formControls),s=Id.validateFields(t);s.valid?Id.add("",t).then((function(t){!0===t.code?(r.push(t.data),e.snackOpen("Successfully added!","success"),e.setState({data:r},(function(){return a()}))):(n(),t.errors.map((function(e){o[e.property].valid=!1,o[e.property].message=e.message})),e.setState({formControls:o}),e.snackOpen("Please fix the error(s) highlighted to save the details!","error"))})).catch((function(t){n(),e.snackOpen("Oops, something went wrong while processing your request!","error")})):(n(),s.errors.map((function(e){o[e.property].valid=!1,o[e.property].message=e.message})),e.setState({formControls:o}))}),1e3)}))},onRowUpdate:function(t,a){return new Promise((function(n,r){setTimeout((function(){var o=Object(je.a)(e.state.data),s=e.state.formControls,i=Id.validateFields(t);i.valid?Id.update("",t).then((function(t){if(!0===t.code){var i=o.indexOf(a);o[i]=t.data,e.setState({data:o},(function(){return n()})),e.snackOpen("Successfully added!","success")}else r(),t.errors.map((function(e){return s[e.property].valid=!1,s[e.property].message=e.message,s})),e.setState({formControls:s}),e.snackOpen("Please fix the error(s) highlighted to save the details!","error")})).catch((function(t){r(),e.snackOpen("Oops, something went wrong while processing your request!","error")})):(r(),i.errors.map((function(e){s[e.property].valid=!1,s[e.property].message=e.message})),e.setState({formControls:s}))}),1e3)}))}},actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.data,columns:e.state.columns,fileName:"Stuffing Document Group"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.initStuffingDocumentGroup()}},{icon:"delete",tooltip:"Delete",onClick:function(t,a){return e.dialogOpen(a)}}],icons:{Clear:function(t){return r.a.createElement(Nt.a,{onClick:function(){e.initFormControl()},style:{padding:0,margin:0}})}},options:{}})),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:600,open:this.state.snackOpen,onClose:this.snackOpen,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.diaLogClose,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.diaLogClose,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDelete,color:"primary"},"Delete"))))}}]),t}(r.a.Component),Bd=Vd,Ud=(a(880),a(881),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={stuffingDocumentGroupData:[]},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){void 0!==this.props.selectedShippingType&&""!==this.props.selectedShippingType&&this.fetchStuffingDocument()}},{key:"componentDidUpdate",value:function(e){this.props.selectedShippingType!==e.selectedShippingType&&void 0!==this.props.selectedShippingType&&""!==this.props.selectedShippingType&&this.fetchStuffingDocument()}},{key:"fetchStuffingDocument",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.awrap(Id.getstuffingDocumentGroupFilter("?ShippingType.Value=".concat(this.props.selectedShippingType.Value)).then((function(e){return e.data})).then((function(t){e.setState({stuffingDocumentGroupData:t})})));case 2:case"end":return t.stop()}}),null,this)}},{key:"renderOptions",value:function(){return this.state.stuffingDocumentGroupData.map((function(e,t){return r.a.createElement(et.a,{label:"Select Stuffing Document Group",value:e._id,key:e._id,name:e.Name},e.Name)}))}},{key:"handleChange",value:function(e){var t=this.state.stuffingDocumentGroupData.find((function(t){return t._id===e.target.value}));void 0!==t?this.props.handleChange(t,this.props.propertyName,this.props.required):this.props.handleChange("",this.props.propertyName,this.props.required)}},{key:"render",value:function(){var e=this;return r.a.createElement(ya.a,{style:{width:"100%",margin:0,paddingTop:7}},r.a.createElement(Ea.a,{shrink:!0,htmlFor:"Stuffing Document Group",required:!0,error:!this.props.formControl.valid},"Stuffing Document Group"),r.a.createElement(ba.a,{id:this.props.propertyName,value:void 0===this.props.selectedValue||void 0===this.props.selectedValue._id?"":this.props.selectedValue._id,style:{paddingBottom:0,paddingTop:0},error:!this.props.formControl.valid,onChange:function(t){return e.handleChange(t,e.props.propertyName)},margin:"dense",displayEmpty:!0},r.a.createElement(et.a,{value:""},r.a.createElement("em",null,"Select Stuffing Document Group")),this.renderOptions()),r.a.createElement(Sa.a,{error:!this.props.formControl.valid,style:{display:this.props.formControl.valid?"none":""}},this.props.formControl.valid?"":this.props.formControl.message))}}]),t}(r.a.Component)),qd=Ud,Gd={properties:{ShippingType:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Shipping Type cannot be empty.",conform:"Shipping Type cannot be empty.",required:"Shipping Type cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},StuffingDocumentGroup:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Stuffing Document Group cannot be empty.",conform:"Stuffing Document Group cannot be empty.",required:"Stuffing Document Group cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},Name:{description:"",type:"string",required:!0,allowEmpty:!1,messages:{allowEmpty:"Name cannot be empty.",conform:"Name cannot be empty.",required:"Name cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},Remarks:{description:"",type:["string","object"]},Inactive:{description:"",type:"boolean"},CreatedAt:{type:"any",default:Date.now()},CreatedBy:{type:"string",default:""},LastUpdatedAt:{type:"any",default:Date.now()},LastUpdatedBy:{type:"string",default:""}}},Wd=a(24),Hd={validateFields:function(e){return Wd.validate(e,Gd,{cast:!0})},getstuffingDocument:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="stuffingDocument/"+e,a.abrupt("return",We(t).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},getstuffingDocumentFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("stuffingDocument-filter/").concat(e),a.abrupt("return",We(t).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},getOnestuffingDocument:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("stuffingDocument/").concat(e),a.abrupt("return",We(t).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},update:function(e,t){return Qe("stuffingDocument/"+e,t).then((function(e){return console.log(e),200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Updated",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="stuffingDocument/"+e,n.abrupt("return",He(a,t).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Added",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,formValid:!0,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("stuffingDocument/"+e).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))}},Qd=Hd,zd=a(23),Yd=(Object(n.forwardRef)((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),r.a.forwardRef((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),{ShippingType:{valid:!0,message:""},StuffingDocumentGroup:{valid:!0,message:""},Name:{valid:!0,message:""}}),Kd=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).snackOpen=function(e,t){a.setState({snackOpen:!0,alertMessage:e,alertClass:t})},a.snackClose=function(){a.setState({snackOpen:!1,alertMessage:"",alertClass:""})},a.dialogOpen=function(e){a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:e,dialogMessage:r.a.createElement("span",null,"Are you sure to delete this record ",r.a.createElement("b",null,e.Name)," ? This cannot be undone.")})},a.diaLogClose=function(){a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:null})},a.onDelete=function(){null!==a.state.currentDeleteData&&Qd.delete("".concat(a.state.currentDeleteData._id)).then((function(e){if(!0===e.code){var t=Object(je.a)(a.state.data),n=t.indexOf(a.state.currentDeleteData);t.splice(n,1),a.setState({data:t,currentDeleteData:"",dialogOpen:!a.state.dialogOpen}),a.snackOpen("Successfully Deleted!","success")}else a.snackOpen("Oops, something went wrong while processing your request!","error")}))},a.state={formControls:zd(Yd),columns:[{title:"Shipping Type",field:"ShippingType",render:function(e){return r.a.createElement("span",null,e.ShippingType.Name)},editComponent:function(e){return r.a.createElement(xa,{jsonFileName:"shipping",jsonPropertyName:"ShippingMethod",formControl:a.state.formControls.ShippingType,required:!0,label:"Shipping Type",handleChange:function(t){e.onChange(t),a.resetFormControl(t,"ShippingType")},selectedValue:void 0===e.value?"":e.value.Value})}},{title:"Stuffing Document Group",field:"StuffingDocumentGroup",render:function(e){return r.a.createElement("span",null,e.StuffingDocumentGroup.Name)},editComponent:function(e){return r.a.createElement(qd,{selectedValue:e.value,formControl:a.state.formControls.StuffingDocumentGroup,required:!0,handleChange:function(t){e.onChange(t),a.resetFormControl(t,"StuffingDocumentGroup")},selectedShippingType:e.rowData.ShippingType})}},{title:"Name",field:"Name",editComponent:function(e){return r.a.createElement(ge.a,{margin:"dense",required:!0,id:"Name",label:"Name",type:"text",error:!a.state.formControls.Name.valid,helperText:a.state.formControls.Name.message,defaultValue:e.rowData.Name,onChange:function(t){a.handleChange(t.target.value.trim(),"Name",e.rowData,!0)}})}},{title:"Remarks",field:"Remarks",type:"string",editComponent:function(e){return r.a.createElement(ge.a,{margin:"dense",id:"Remarks",label:"Remarks",type:"text",defaultValue:e.rowData.Remarks,onChange:function(t){return e.onChange(t.target.value)}})}},{title:"Inactive",field:"Inactive",lookup:{true:"Yes",false:"No"},editComponent:function(e){return r.a.createElement(Xe.a,{checked:e.rowData.Inactive,onChange:function(t){return e.onChange(t.target.checked)},value:e.value,inputProps:{"aria-label":"secondary checkbox"},color:"primary"})}},{title:"Operator",field:"LastUpdatedBy",editable:"never"},{title:"Last Updated",field:"LastUpdatedAt",render:function(e){return r.a.createElement("span",null,void 0===e?"":new Date(e.LastUpdatedAt).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}))},editable:"never"}],data:[],currentDeleteData:"",dialogOpen:!1,snackOpen:!1,alertMessage:"",dialogMessage:"",alertClass:""},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initstuffingDocument()}},{key:"initstuffingDocument",value:function(){var e=this;Qd.getstuffingDocument("").then((function(t){if(!0===t.code){var a=Object(je.a)(e.state.data);a=t.data,e.setState({data:a})}}))}},{key:"resetFormControl",value:function(e,t){var a=Object(me.a)({},this.state.formControls);void 0!==e&&null!==e&&""!==e&&(a[t].valid=!0,a[t].message=""),this.setState({formControls:a})}},{key:"initFormControl",value:function(){this.setState({formControls:zd(Yd)})}},{key:"handleChange",value:function(e,t,a,n){var r=Object(me.a)({},this.state.formControls);n&&(void 0===e||""===e||null===e?(r[t].valid=!1,r[t].message="".concat(t," cannot be empty.")):(r[t].valid=!0,r[t].message="")),this.setState({formControls:r},(function(){return a[t]=e}))}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{container:!0,direction:"column",justify:"center",wrap:"wrap",style:{margin:"20px 20px 10px 0px"}},r.a.createElement(be.a,{item:!0,xs:12},r.a.createElement(Ve.a,{title:"Stuffing Document",columns:this.state.columns,data:this.state.data,editable:{onRowAdd:function(t){return new Promise((function(a,n){setTimeout((function(){var r=Object(je.a)(e.state.data),o=Object(me.a)({},e.state.formControls),s=Qd.validateFields(t);s.valid?Qd.add("",t).then((function(t){!0===t.code?(r.push(t.data),e.snackOpen("Successfully added!","success"),e.setState({data:r},(function(){return a()}))):(n(),t.errors.map((function(e){o[e.property].valid=!1,o[e.property].message=e.message})),e.setState({formControls:o},(function(){return e.snackOpen("Please fix the error(s) highlighted to save the details!","error")})))})).catch((function(t){n(),e.snackOpen("Oops, something went wrong while processing your request!","error")})):(n(),s.errors.map((function(e){o[e.property].valid=!1,o[e.property].message=e.message})),e.setState({formControls:o}))}),1e3)}))},onRowUpdate:function(t,a){return new Promise((function(n,r){setTimeout((function(){var o=Object(je.a)(e.state.data),s=e.state.formControls,i=Qd.validateFields(t);i.valid?Qd.update("",t).then((function(t){if(!0===t.code){var i=o.indexOf(a);o[i]=t.data,e.setState({data:o},(function(){return n()})),e.snackOpen("Successfully added!","success")}else r(),t.errors.map((function(e){return s[e.property].valid=!1,s[e.property].message=e.message,s})),e.setState({formControls:s}),e.snackOpen("Please fix the error(s) highlighted to save the details!","error")})).catch((function(t){r(),e.snackOpen("Oops, something went wrong while processing your request!","error")})):(r(),i.errors.map((function(e){s[e.property].valid=!1,s[e.property].message=e.message})),e.setState({formControls:s}))}),1e3)}))}},actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.data,columns:e.state.columns,fileName:"Stuffing Document"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.initstuffingDocument()}},{icon:"delete",tooltip:"Delete",onClick:function(t,a){return e.dialogOpen(a)}}],icons:{Clear:function(t){return r.a.createElement(Nt.a,{onClick:function(){e.initFormControl()},style:{padding:0,margin:0}})}},options:{}})),!0===this.state.snackOpen?r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:1e3,open:this.state.snackOpen,onClose:this.snackClose,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}):"",r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.diaLogClose,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.diaLogClose,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDelete,color:"primary"},"Delete"))))}}]),t}(r.a.Component),Jd=Kd,Zd={properties:{Factory:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Factory cannot be empty."}},Month:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Month cannot be empty."}},Venue:{description:"",type:["number"],required:!0,allowEmpty:!1,exclusiveMinimum:0,messages:{exclusiveMinimum:"Training venue cannot be empty.",allowEmpty:"Training venue cannot be empty."}},TrainingType:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Training type cannot be empty."}},WorkerNumber:{description:"",type:["number"],required:!0,allowEmpty:!1,exclusiveMinimum:0,messages:{exclusiveMinimum:"Worker number must be greater than 0.",allowEmpty:"Worker number must be greater than 0.",required:"Worker number must be greater than 0."}},Hours:{description:"",type:["number"],required:!0,allowEmpty:!1,exclusiveMinimum:0,messages:{exclusiveMinimum:"Training hours must be greater than 0.",allowEmpty:"Training hours must be greater than 0.",required:"Training hours must be greater than 0."}}}},Xd=a(24),$d={validateFields:function(e){return Xd.validate(e,Zd,{cast:!0})},get:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="trainingHours/"+e,a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 2:case"end":return a.stop()}}))},getFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("trainingHours-filter/").concat(e),a.next=3,l.a.awrap(We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 3:return a.abrupt("return",a.sent);case 4:case"end":return a.stop()}}))},update:function(e,t){return Qe("trainingHours/"+e,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Successfully updated.",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="trainingHours/"+e,n.abrupt("return",He(a,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,message:"Successfully added.",data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("trainingHours/"+e).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e}))}},em=$d,tm=(a(882),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={trainingTypeData:[]},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initTrainingType()}},{key:"initTrainingType",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.awrap(Pu.get("").then((function(t){if(!0===t.code){var a=Object(je.a)(e.state.trainingTypeData);a=t.data,e.setState({trainingTypeData:a})}})));case 2:case"end":return t.stop()}}))}},{key:"renderOptions",value:function(){return this.state.trainingTypeData.map((function(e,t){return r.a.createElement(et.a,{label:"Select training type",value:e._id,key:e._id,name:e.Name},e.Name)}))}},{key:"handleChange",value:function(e,t){var a=this.state.trainingTypeData.find((function(t){return t._id===e.target.value}));void 0!==a?this.props.handleChange(a,t,this.props.required):this.props.handleChange("",t,this.props.required)}},{key:"render",value:function(){var e=this,t=!this.props.formControl.valid;return r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Ea.a,{shrink:!0,htmlFor:"trainingType",required:!0,error:t},"Type of Training"),r.a.createElement(ba.a,{id:this.props.propertyName,value:void 0===this.props.selectedValue||void 0===this.props.selectedValue._id?"":this.props.selectedValue._id,error:t,onChange:function(t){return e.handleChange(t,e.props.propertyName)},margin:"dense",displayEmpty:!0},r.a.createElement(et.a,{value:""},r.a.createElement("em",null,"Select training type")),this.renderOptions()),r.a.createElement(Sa.a,{error:t,style:{display:t?"":"none"}},this.props.required&&""===this.props.selectedValue?"Training type cannot be empty.":this.props.formControl.valid?"":this.props.formControl.message))}}]),t}(r.a.Component)),am=tm,nm=am,rm=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={formControls:{Factory:{valid:!0,message:"",value:a.props.formData.Factory},Month:{valid:!0,message:"",value:a.props.formData.Month},Venue:{valid:!0,message:"",value:a.props.formData.Venue},TrainingType:{valid:!0,message:"",value:a.props.formData.TrainingType},WorkerNumber:{valid:!0,message:"",value:a.props.formData.WorkerNumber},Hours:{valid:!0,message:"",value:a.props.formData.Hours},Remarks:{valid:!0,message:"",value:a.props.formData.Remarks}},formState:{valid:!0,dirty:!1,errors:[]},trainingVenue:[]},a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initTrainingVenueOptions()}},{key:"initTrainingVenueOptions",value:function(){var e=this;Oa("trainingVenue.json").then((function(e){return e.data})).then((function(t){e.setState({trainingVenue:t.TrainingVenue})}))}},{key:"handleChange",value:function(e,t){var a=this.state.formControls,n=this.state.formState;void 0===e||0===e.length?(a[t].valid=!1,a[t].message="".concat(t," cannot be empty.")):(a[t].valid=!0,a[t].message=""),this.props.handleChange(e,t),a[t].value=e,n.dirty=!0,this.setState({formControls:a,formState:n})}},{key:"renderLabOptions",value:function(){return this.state.trainingVenue.map((function(e,t){return r.a.createElement(et.a,{value:e.Value,key:e.Value,name:e.Name},e.Name)}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"form-container"},r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-evenly",alignItems:"center",md:6,xs:12,sm:12,xl:8,lg:8},r.a.createElement(Hr,{handleChange:this.handleChange,selectedValue:this.state.formControls.Factory.value,formControl:this.state.formControls.Factory,propertyName:"Factory"}),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Da.a,{required:!0,format:"MMM-yyyy",label:"Month",views:["year","month"],openTo:"month",value:this.state.formControls.Month.value,onChange:function(t){e.handleChange(t,"Month")},disableFuture:!0})),r.a.createElement(Sa.a,{error:!this.state.formControls.Month.valid,style:{display:this.state.formControls.Month.valid?"none":""}},this.state.formControls.Month.message)),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Ea.a,{shrink:!0,required:!0,error:!this.state.formControls.Venue.valid},"Training Venue"),r.a.createElement(ba.a,{id:"ddlTrainingVenue",value:this.state.formControls.Venue.value,error:!this.state.formControls.Venue.valid,onChange:function(t){return e.handleChange(t.target.value,"Venue")},displayEmpty:!0},r.a.createElement(et.a,{value:0},r.a.createElement("em",null,"Select training venue")),this.renderLabOptions()),r.a.createElement(Sa.a,{error:!this.state.formControls.Venue.valid,style:{display:this.state.formControls.Venue.valid?"none":""}},this.state.formControls.Venue.valid?"":this.state.formControls.Venue.message)),r.a.createElement(be.a,{container:!0,style:{marginTop:25,width:"100%"},direction:"row",justify:"space-around",alignItems:"center"},r.a.createElement(bn,{label:"Training Detail",tyle:{width:"100%"}},r.a.createElement(nm,{required:!0,propertyName:"TrainingType",selectedValue:this.state.formControls.TrainingType.value,formControl:this.state.formControls.TrainingType,handleChange:this.handleChange}),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Xa.a,{id:"WorkerNumber",label:"Number of workers trained",customInput:ge.a,defaultValue:this.state.formControls.WorkerNumber.value,onValueChange:function(t){return e.handleChange(t.floatValue,"WorkerNumber")},onFocus:function(e){e.target.select()},thousandSeparator:!0,fixedDecimalScale:!0,error:!this.state.formControls.WorkerNumber.valid,helperText:this.state.formControls.WorkerNumber.valid?"":this.state.formControls.WorkerNumber.message})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Xa.a,{id:"Hours",label:"Training Hour",customInput:ge.a,defaultValue:this.state.formControls.Hours.value,onValueChange:function(t){return e.handleChange(t.floatValue,"Hours")},onFocus:function(e){e.target.select()},decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0,error:!this.state.formControls.Hours.valid,helperText:this.state.formControls.Hours.valid?"":this.state.formControls.Hours.message})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(Xa.a,{id:"TotalHours",label:"Total number of training hours for all workers",customInput:ge.a,value:this.state.formControls.WorkerNumber.value*this.state.formControls.Hours.value,decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0,isAllowed:!1})))),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(ge.a,{id:"Remarks",label:"Remarks",defaultValue:this.state.formControls.Remarks.value,onChange:function(t){return e.handleChange(t.target.value,"Remarks")},multiline:!0}))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=t.formControls;return e.formState.valid||Array.isArray(e.formState.errors)&&e.formState.errors.map((function(e){a[e.property].valid=!1,a[e.property].message=e.message})),{formState:e.formState,formControls:a}}}]),t}(r.a.Component),om=rm,sm={Factory:"",Month:new Date,Venue:0,TrainingType:"",WorkerNumber:0,Hours:0,Remarks:"",CreatedAt:new Date,CreatedBy:"Admin",LastUpdatedAt:new Date,LastUpdatedBy:"Admin"},im=sm,lm=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).openDialog=function(e){a.setState({dialogOpen:!0,currentDeleteData:e,dialogMessage:r.a.createElement("span",null,"Are you sure to delete this record factory",r.a.createElement("b",null," ",e.Factory.FctyCode," "),"in month"," ",r.a.createElement("b",null,new Date(e.Month).toLocaleString("en-GB",{year:"numeric",month:"short"})," "),"? This cannot be undone.")})},a.closeDialog=function(){a.setState({dialogOpen:!1,currentDeleteData:null,dialogMessage:""})},a.openForm=function(e){void 0===e?a.setState({actionStatus:"Add",newData:Object(me.a)({},im)}):a.setState({actionStatus:"Update",newData:Object(me.a)({},e)}),a.setState({formOpen:!0,formState:{valid:!0,dirty:!1,errors:[]}})},a.closeForm=function(){a.setState({formOpen:!1,newData:{},actionStatus:""})},a.onSave=function(){var e=a.state.formState,t=Object(me.a)({},a.state.newData),n=em.validateFields(t);if(n.valid){var r=Object(je.a)(a.state.data);"Add"===a.state.actionStatus?(t.LastUpdatedBy=a.state.operator,t.CreatedBy=a.state.operator,em.add("",t).then((function(t){!0===t.code?(e.valid=!0,r.push(t.data),a.setState({data:r}),a.closeForm(),a.snackOpen("Energy consumption created successfully!","success")):(e.valid=!1,e.errors=t.errors,a.snackOpen("Please fix the error(s) highlighted to save the details!","error"))})).catch((function(e){a.snackOpen("Oops, something went wrong while processing your request!","error")}))):(t.LastUpdatedBy=a.state.operator,em.update("",t).then((function(n){if(!0===n.code){e.valid=!0;var o=r.find((function(e){return e._id===t._id})),s=r.indexOf(o);r[s]=n.data,a.setState({data:r}),a.closeForm(),a.snackOpen("Energy consumption updated successfully!","success")}else e.valid=!1,e.errors=n.errors,a.snackOpen("Please fix the error(s) highlighted to save the details!","error")})).catch((function(e){a.snackOpen("Oops, something went wrong while processing your request!","error")})))}else{e.valid=!1;var o=n.errors.map((function(e){var t={};return t.property=e.property,t.message=e.message,t}));e.errors=o,a.snackOpen("Please fix the error(s) highlighted to save the details!","error")}a.setState({formState:e})},a.onDelete=function(){null!==a.state.currentDeleteData&&em.delete("".concat(a.state.currentDeleteData._id)).then((function(e){if(!0===e.code){var t=Object(je.a)(a.state.data),n=t.indexOf(a.state.currentDeleteData);t.splice(n,1),a.snackOpen("Successfully Deleted!","success"),a.closeDialog(),a.setState({data:t})}else a.snackOpen("Oops, something went wrong while processing your request!","error")}))},a.onEdit=function(e){a.openForm(e)},a.state={columns:[{title:"Factory",field:"Factory",render:function(e){return r.a.createElement("span",null,void 0===e.Factory?"":e.Factory.FctyCode)}},{title:"Month",field:"Month",render:function(e){return r.a.createElement("span",null,new Date(e.Month).toLocaleString("en-GB",{year:"numeric",month:"short"}))}},{title:"Training Venue",field:"Venue",lookup:{}},{title:"Training Type",field:"TrainingType",render:function(e){return r.a.createElement("span",null,void 0===e.TrainingType?"":e.TrainingType.Name)}},{title:"Number of Workers Trained",field:"WorkerNumber"},{title:"Training Hours",field:"Hours",render:function(e){return r.a.createElement(Xa.a,{value:e.Hours,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"Training Hours (All Worker)",render:function(e){return r.a.createElement(Xa.a,{value:e.WorkerNumber*e.Hours,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"Description",field:"Remarks"},{title:"Operator",field:"LastUpdatedBy"},{title:"Last Updated",field:"LastUpdatedAt",render:function(e){return r.a.createElement("span",null,new Date(e.LastUpdatedAt).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}))}}],data:[],currentDeleteData:null,newData:im,formOpen:!1,dialogOpen:!1,dialogMessage:"",disabled:!1,actionStatus:"",formState:{valid:!0,dirty:!1,errors:[]},operator:"Admin"},a.openDialog=a.openDialog.bind(Object(Pe.a)(a)),a.closeDialog=a.closeDialog.bind(Object(Pe.a)(a)),a.openForm=a.openForm.bind(Object(Pe.a)(a)),a.closeForm=a.closeForm.bind(Object(Pe.a)(a)),a.snackOpen=a.snackOpen.bind(Object(Pe.a)(a)),a.snackClose=a.snackClose.bind(Object(Pe.a)(a)),a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initTrainingHours(),this.initTrainingVenueData()}},{key:"initTrainingHours",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.awrap(em.get("").then((function(t){!0===t.code&&e.setState({data:t.data})})));case 2:case"end":return t.stop()}}))}},{key:"initTrainingVenueData",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:Oa("trainingVenue.json").then((function(e){return e.data})).then((function(t){var a={};t.TrainingVenue.forEach((function(e){return a[e.Value]=e.Name}));var n=Object(je.a)(e.state.columns),r=n.findIndex((function(e){return"Venue"===e.field}));n[r].lookup=a,e.setState({columns:n})}));case 1:case"end":return t.stop()}}))}},{key:"handleChange",value:function(e,t){var a=this.state.newData;a[t]=e;var n=this.state.formState;n.valid=!0,this.setState({newData:a,formState:n})}},{key:"snackOpen",value:function(e,t){this.setState({alertOpen:!0,alertMessage:e,alertClass:t})}},{key:"snackClose",value:function(){this.setState({alertOpen:!1,alertMessage:"",alertClass:"",currentDeleteData:null})}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{style:{margin:"20px 20px 10px 0px"}},r.a.createElement(Ve.a,{title:"Training Hours",columns:this.state.columns,data:this.state.data,components:{Toolbar:function(t){return r.a.createElement("div",null,r.a.createElement(Le.MTableToolbar,t),r.a.createElement("div",{style:{padding:"0px 15px"}},r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:function(){return e.openForm()},"aria-label":"add"},r.a.createElement(wt.a,null))))}},actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.data,columns:e.state.columns,fileName:"Training Hours"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.initTrainingHours()}},{icon:"edit",tooltip:"Edit",onClick:function(t,a){return e.openForm(a)}},{icon:"delete",tooltip:"Delete",onClick:function(t,a){return e.openDialog(a)}}],options:{}}),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:6e3,open:this.state.alertOpen,onClose:this.snackClose,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}),r.a.createElement(Ae.a,{fullScreen:!0,open:this.state.formOpen,onClose:this.closeForm,TransitionComponent:this.Transition},r.a.createElement(w.a,{className:"appBar"},r.a.createElement(F.a,null,r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:this.closeForm,"aria-label":"close"},r.a.createElement(Vt.a,null)),r.a.createElement(x.a,{variant:"h6",className:"app-title"},"Training Hours"),r.a.createElement(he.a,{color:"inherit",disabled:this.state.disabled,onClick:this.onSave},"save"))),r.a.createElement(_e.a,null,r.a.createElement(om,{handleChange:this.handleChange,formData:this.state.newData,formState:this.state.formState}))),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.closeDialog,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.closeDialog,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDelete,color:"primary"},"Delete"))))}}]),t}(r.a.Component),cm=lm,um={properties:{Factory:{type:"any",messages:{conform:"Factory cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},ReportDate:{type:"any",messages:{conform:"Report date cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},CaseNo:{type:"string",messages:{conform:"Case No cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},RevisionNo:{type:"number",messages:{conform:"Revision No cannot be empty."},conform:function(e){return!(""===e||void 0===e)}},CaseStatus:{type:"boolean",messages:{conform:"Case status cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},IncidentCategory:{type:"any",messages:{conform:"Incident category cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},IncidentType:{type:"any",messages:{conform:"Incident type cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},Info_IncidentDate:{type:"any",messages:{conform:"Incident date cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},Info_PossibleCause:{type:"any",messages:{conform:"Possible cause cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}}}},dm=a(24),mm={validateFields:function(e){return dm.validate(e,um,{cast:!0})},get:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="fireIncident/"+e,a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 2:case"end":return a.stop()}}))},getOne:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("fireIncident/").concat(e),a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 2:case"end":return a.stop()}}))},getFileBuffer:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("fireIncident/").concat(e),a.abrupt("return",Ye(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data?{code:!0,formValid:!0,message:"Succeed",data:e.data}:200===e.status&&null===e.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 2:case"end":return a.stop()}}))},getFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("fireIncident-filter/").concat(e),a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 2:case"end":return a.stop()}}))},update:function(e,t){return Qe("fireIncident/"+e,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Updated",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="fireIncident/"+e,n.abrupt("return",He(a,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Added",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,formValid:!0,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("fireIncident/"+e).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))}},pm=mm,fm={Factory:"",ReportDate:new Date,CaseNo:"",RevisionNo:0,CaseStatus:!1,IncidentCategory:"",IncidentType:"",Report_By:"",Report_ID:"",Report_JobTitle:"",Report_Witness:"",Report_WitnessJobTitle:"",Info_Desc:"",Info_Location:"",Info_MachCode:"",Info_IncidentDate:new Date,Info_PossibleCause:"",Info_CauseOfFire:"",Info_ContributingFactor:"",Info_ExtDischarge:!1,Info_ExtUsed:0,Info_EstDmgValue:0,Info_DmgDesc:"",Info_Evacuation:!1,Info_EvacuationPerson:0,Info_Injure:!1,Info_InjurePerson:0,Info_Fatalities:!1,Info_FatalitiesPerson:0,Equip_Brand:"",Equip_Model:"",Equip_OtherID:"",Equip_Manufacture:null,FightingType_Water:!1,FightingType_Hose:!1,FightingType_FireBrigade:!1,FightingType_Halon:!1,FightingType_Powder:!1,FightingType_CO2:!1,FightingType_Other:!1,FightingType_None:!1,SupportDocument:[],CreatedAt:new Date,CreatedBy:"Admin",LastUpdatedAt:new Date,LastUpdatedBy:"Admin"},hm=(a(883),a(884),{properties:{Factory:{type:"any",messages:{conform:"Factory cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},ReportDate:{type:"any",messages:{conform:"Report date cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},Category:{type:"string",messages:{conform:"Category cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},EightDNumber:{type:"string",messages:{conform:"EightD Number cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},RefNumber:{type:"string",messages:{conform:"Ref Number cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},RevisionNo:{type:"number",messages:{conform:"Revision No cannot be empty."},conform:function(e){return!(""===e||void 0===e)}},IssueDate:{type:"any",messages:{conform:"Issue Date cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},ExpectedResponseDate:{type:"any",messages:{conform:"Expected Response Date cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}}}}),gm={properties:{Name:{type:"string",required:!0,messages:{required:"Name cannot be empty.",conform:"Name cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},Role:{type:["object","string"],required:!0,messages:{required:"Role cannot be empty.",conform:"Role cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},Department:{type:"string",required:!0,messages:{required:"Department cannot be empty.",conform:"Department cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}}}},ym={properties:{Action:{type:"string",required:!0,messages:{required:"Action cannot be empty.",conform:"Action cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},EffectiveDate:{type:"any",required:!0,messages:{required:"Effective Date cannot be empty.",conform:"Effective Date cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},Responsible:{type:"string",required:!0,messages:{required:"Responsible cannot be empty.",conform:"Responsible cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}}}},vm={properties:{Cause:{type:"string",messages:{conform:"Cause cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},Responsible:{type:"any",messages:{conform:"Responsible cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}}}},Cm=a(24),Dm={validateFields:function(e){return Cm.validate(e,hm,{cast:!0})},validateTeamFields:function(e){return Cm.validate(e,gm,{cast:!0})},validateActionFields:function(e){return Cm.validate(e,ym,{cast:!0})},validateRootCauseFields:function(e){return Cm.validate(e,vm,{cast:!0})},get:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="eightD/"+e,a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 2:case"end":return a.stop()}}))},getOne:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("eightD/").concat(e),a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 2:case"end":return a.stop()}}))},getFileBuffer:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("eightD/").concat(e),a.abrupt("return",Ye(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data?{code:!0,formValid:!0,message:"Succeed",data:e.data}:200===e.status&&null===e.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 2:case"end":return a.stop()}}))},getFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("eightD-filter/").concat(e),a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 2:case"end":return a.stop()}}))},update:function(e,t){return Qe("eightD/"+e,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Updated",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="eightD/"+e,n.abrupt("return",He(a,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Added",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,formValid:!0,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("eightD/"+e).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}}))}},Em=Dm,bm=a(23),Sm=(Object(n.forwardRef)((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),{Action:{valid:!0,message:""},EffectiveDate:{valid:!0,message:""},Responsible:{valid:!0,message:""}}),Om={Factory:{valid:!0,message:""},ReportDate:{valid:!0,message:""},Category:{valid:!0,message:""},ExtRef:{valid:!0,message:""},IssueDate:{valid:!0,message:""},ExpectedResponseDate:{valid:!0,message:""},Closed:{valid:!0,message:""},Issuer:{valid:!0,message:""},ReceivingParty:{valid:!0,message:""},CompletedDate:{valid:!0,message:""},ProblemDesc:{valid:!0,message:""},D1EightDTeam:{Name:{valid:!0,message:""},Role:{valid:!0,message:""},Department:{valid:!0,message:""}},D3ContainmentAction:Sm,D4RootCause:{Cause:{valid:!0,message:""},Responsible:{valid:!0,message:""}},D5VerifyCorrectiveAction:Sm,D6PermanentCorrectiveAction:Sm,D7PreventRecurrence:Sm,D8FollowUp:Sm,SupportDocument:{valid:!0,message:""}},km=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).closeForm=function(){a.setState({formControl:bm(Om)},(function(){return a.props.closeForm()}))},a.snackOpen=function(e,t,n){var r;return l.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(void 0===e||null===e||void 0===t||null===t){o.next=11;break}if(void 0!==n){o.next=7;break}return o.next=4,l.a.awrap(ka(e,t));case 4:r=o.sent,o.next=8;break;case 7:r=n;case 8:a.setState({snackOpen:!a.state.snackOpen,snackMessage:r,snackClass:e}),o.next=12;break;case 11:a.setState({snackOpen:!1});case 12:case"end":return o.stop()}}))},a.dialogOpen=function(e){var t;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(void 0===e||null===e){n.next=7;break}return n.next=3,l.a.awrap(ka("confirmation","delete"));case 3:t=n.sent,a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:e,dialogMessage:r.a.createElement("span",null,void 0!==t?t.replace("[Name]","this record"):"")}),n.next=8;break;case 7:a.setState({dialogOpen:!1});case 8:case"end":return n.stop()}}))},a.onSave=function(){var e=Object(me.a)({},a.state.formData),t=Object(me.a)({},a.state.formControl);"object"===typeof e.Factory&&(e.Factory=e.Factory._id),e.D1EightDTeam=a.state.d1EightDTeam,e.D3ContainmentAction=a.state.d3ContainmentAction,e.D4RootCause=a.state.d4RootCause,e.D5VerifyCorrectiveAction=a.state.d5VerifyCorrectiveAction,e.D6PermanentCorrectiveAction=a.state.d6PermanentCorrectiveAction,e.D7PreventRecurrence=a.state.d7PreventRecurrence,e.D8FollowUp=a.state.d8FollowUp;var n=Em.validateFields(e);if(n.valid){var r=a.getFormDataFromObject(e);"Add"===a.props.formAction?Em.add("",r).then((function(e){!0===e.code?a.props.onSuccess(e.data):null!==e.errors&&Array.isArray(e.errors)?(e.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t})):a.snackOpen("error","server")})):Em.update("",r).then((function(e){!0===e.code?a.props.onSuccess(e.data):null!==e.errors&&Array.isArray(e.errors)?(e.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t})):a.snackOpen("error","server")}))}else n.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t}),a.snackOpen("error","alertValidation")},a.updateSupportDoc=function(e,t){if(void 0!==t&&void 0!==e){var n=a.state.supportDoc;n[t]=e,a.setState({supportDoc:n}),a.handleChange(n,"SupportDocument")}},a.addSupportDoc=function(e){if(void 0!==e){var t=a.state.supportDoc;t.push(e),a.setState({supportDoc:t}),a.handleChange(t,"SupportDocument")}},a.deleteSupportDoc=function(e){void 0!==e&&null!==e&&(a.setState({supportDoc:e}),a.handleChange(e,"SupportDocument"))},a.state={formData:a.props.formData,formOpen:a.props.formOpen,formControl:bm(Om),d1EightDTeamColumns:[{title:"Name",field:"Name",editComponent:function(e){return r.a.createElement(ge.a,{margin:"dense",id:"Name",label:"Name",type:"text",error:""===e.value||!a.state.formControl.D1EightDTeam.Name.valid,helperText:""===e.value?"Name cannot empty":a.state.formControl.D1EightDTeam.Name.valid?"":a.state.formControl.D1EightDTeam.Name.message,defaultValue:e.rowData.Name,onChange:function(t){var n=Object(me.a)({},a.state.formControl);""===t.target.value?(n.D1EightDTeam.Name.valid=!1,n.D1EightDTeam.Name.message="Name cannot be empty"):(n.D1EightDTeam.Name.valid=!0,n.D1EightDTeam.Name.message=""),a.setState({formControl:n}),e.onChange(t.target.value)}})}},{title:"Role",field:"Role",render:function(e){return r.a.createElement("span",null,e.Role.Name)},editComponent:function(e){return r.a.createElement(Fa,{jsonFileName:"eightD",jsonPropertyName:"TeamRole",formControl:a.state.formControl.D1EightDTeam.Role,propertyName:"Role",required:!0,label:"Role",handleChange:function(t){var n=Object(me.a)({},a.state.formControl);""===t?(n.D1EightDTeam.Role.valid=!1,n.D1EightDTeam.Role.message="Role cannot be empty"):(n.D1EightDTeam.Role.valid=!0,n.D1EightDTeam.Role.message=""),a.setState({formControl:n}),e.onChange(t)},selectedValue:void 0===e.value?"":e.value.Value})}},{title:"Department",field:"Department",editComponent:function(e){return r.a.createElement(ge.a,{margin:"dense",id:"Department",label:"Department",type:"text",error:""===e.value||!a.state.formControl.D1EightDTeam.Department.valid,helperText:""===e.value?"Department cannot empty":a.state.formControl.D1EightDTeam.Department.valid?"":a.state.formControl.D1EightDTeam.Department.message,defaultValue:e.rowData.Department,onChange:function(t){var n=Object(me.a)({},a.state.formControl);""===t.target.value?(n.D1EightDTeam.Department.valid=!1,n.D1EightDTeam.Department.message="Department cannot be empty"):(n.D1EightDTeam.Department.valid=!0,n.D1EightDTeam.Department.message=""),a.setState({formControl:n}),e.onChange(t.target.value)}})}}],d3ContainmentActionColumns:[{title:"Action",field:"Action",editComponent:function(e){return r.a.createElement(ge.a,{margin:"dense",id:"Action",label:"Action",type:"text",error:""===e.value||!a.state.formControl.D3ContainmentAction.Action.valid,helperText:""===e.value?"Action cannot empty":a.state.formControl.D3ContainmentAction.Action.valid?"":a.state.formControl.D3ContainmentAction.Action.message,defaultValue:e.rowData.Action,onChange:function(t){var n=Object(me.a)({},a.state.formControl);""===t.target.value?(n.D3ContainmentAction.Action.valid=!1,n.D3ContainmentAction.Action.message="Action cannot be empty"):(n.D3ContainmentAction.Action.valid=!0,n.D3ContainmentAction.Action.message=""),a.setState({formControl:n}),e.onChange(t.target.value)}})}},{title:"Effective Date",field:"EffectiveDate",render:function(e){return r.a.createElement("span",null,new Date(e.EffectiveDate).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric"}))},editComponent:function(e){return r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Da.b,{style:{width:"100%"},id:"date-picker-dialog",label:"Effective Date",format:"dd-MMM-yyyy",value:e.rowData.EffectiveDate,onChange:function(t){return e.onChange(t)},disableFuture:!0}))}},{title:"Responsible",field:"Responsible",editComponent:function(e){return r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(Ea.a,{shrink:!0,required:!0,error:!a.state.formControl.D3ContainmentAction.Responsible.valid},"Responsible"),r.a.createElement(ba.a,{id:"ddlResponsible",value:void 0===e.value?"":e.value,error:!a.state.formControl.D3ContainmentAction.Responsible.valid,onChange:function(t){var n=Object(me.a)({},a.state.formControl);""===t.target.value?(n.D3ContainmentAction.Responsible.valid=!1,n.D3ContainmentAction.Responsible.message="Responsible cannot be empty"):(n.D3ContainmentAction.Responsible.valid=!0,n.D3ContainmentAction.Responsible.message=""),a.setState({formControl:n}),e.onChange(t.target.value)},displayEmpty:!0},r.a.createElement(et.a,{value:""},r.a.createElement("em",null,"Select ",a.props.label)),a.renderResponsibleOptions()),r.a.createElement(Sa.a,{error:!a.state.formControl.D3ContainmentAction.Responsible.valid,style:{display:a.state.formControl.D3ContainmentAction.Responsible.valid?"none":""}},a.state.formControl.D3ContainmentAction.Responsible.message))}}],d4RootCauseColumns:[{title:"Cause",field:"Cause",editComponent:function(e){return r.a.createElement(ge.a,{margin:"dense",id:"Cause",label:"Cause",type:"text",error:""===e.value||!a.state.formControl.D4RootCause.Cause.valid,helperText:""===e.value?"Cause cannot empty":a.state.formControl.D4RootCause.Cause.valid?"":a.state.formControl.D4RootCause.Cause.message,defaultValue:e.rowData.Cause,onChange:function(t){var n=Object(me.a)({},a.state.formControl);""===t.target.value?(n.D4RootCause.Cause.valid=!1,n.D4RootCause.Cause.message="Cause cannot be empty"):(n.D4RootCause.Cause.valid=!0,n.D4RootCause.Cause.message=""),a.setState({formControl:n}),e.onChange(t.target.value)}})}},{title:"Responsible",field:"Responsible",editComponent:function(e){return r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(Ea.a,{shrink:!0,required:!0,error:!a.state.formControl.D4RootCause.Responsible.valid},"Responsible"),r.a.createElement(ba.a,{id:"ddlResponsible",value:void 0===e.value?"":e.value,error:!a.state.formControl.D4RootCause.Responsible.valid,onChange:function(t){var n=Object(me.a)({},a.state.formControl);""===t.target.value?(n.D4RootCause.Responsible.valid=!1,n.D4RootCause.Responsible.message="Responsible cannot be empty"):(n.D4RootCause.Responsible.valid=!0,n.D4RootCause.Responsible.message=""),a.setState({formControl:n}),e.onChange(t.target.value)},displayEmpty:!0},r.a.createElement(et.a,{value:""},r.a.createElement("em",null,"Select ",a.props.label)),a.renderResponsibleOptions()),r.a.createElement(Sa.a,{error:!a.state.formControl.D4RootCause.Responsible.valid,style:{display:a.state.formControl.D4RootCause.Responsible.valid?"none":""}},a.state.formControl.D4RootCause.Responsible.message))}}],d5VerifyCorrectiveActionColumns:[{title:"Action",field:"Action",editComponent:function(e){return r.a.createElement(ge.a,{margin:"dense",id:"Action",label:"Action",type:"text",error:""===e.value||!a.state.formControl.D5VerifyCorrectiveAction.Action.valid,helperText:""===e.value?"Action cannot empty":a.state.formControl.D5VerifyCorrectiveAction.Action.valid?"":a.state.formControl.D5VerifyCorrectiveAction.Action.message,defaultValue:e.rowData.Action,onChange:function(t){var n=Object(me.a)({},a.state.formControl);""===t.target.value?(n.D5VerifyCorrectiveAction.Action.valid=!1,n.D5VerifyCorrectiveAction.Action.message="Action cannot be empty"):(n.D5VerifyCorrectiveAction.Action.valid=!0,n.D5VerifyCorrectiveAction.Action.message=""),a.setState({formControl:n}),e.onChange(t.target.value)}})}},{title:"Effective Date",field:"EffectiveDate",render:function(e){return r.a.createElement("span",null,new Date(e.EffectiveDate).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric"}))},editComponent:function(e){return r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Da.b,{style:{width:"100%"},id:"date-picker-dialog",label:"Effective Date",format:"dd-MMM-yyyy",value:e.rowData.EffectiveDate,onChange:function(t){return e.onChange(t)},disableFuture:!0}))}},{title:"Responsible",field:"Responsible",editComponent:function(e){return r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(Ea.a,{shrink:!0,required:!0,error:!a.state.formControl.D5VerifyCorrectiveAction.Responsible.valid},"Responsible"),r.a.createElement(ba.a,{id:"ddlResponsible",value:void 0===e.value?"":e.value,error:!a.state.formControl.D5VerifyCorrectiveAction.Responsible.valid,onChange:function(t){var n=Object(me.a)({},a.state.formControl);""===t.target.value?(n.D5VerifyCorrectiveAction.Responsible.valid=!1,n.D5VerifyCorrectiveAction.Responsible.message="Responsible cannot be empty"):(n.D5VerifyCorrectiveAction.Responsible.valid=!0,n.D5VerifyCorrectiveAction.Responsible.message=""),a.setState({formControl:n}),e.onChange(t.target.value)},displayEmpty:!0},r.a.createElement(et.a,{value:""},r.a.createElement("em",null,"Select ",a.props.label)),a.renderResponsibleOptions()),r.a.createElement(Sa.a,{error:!a.state.formControl.D5VerifyCorrectiveAction.Responsible.valid,style:{display:a.state.formControl.D5VerifyCorrectiveAction.Responsible.valid?"none":""}},a.state.formControl.D5VerifyCorrectiveAction.Responsible.message))}}],d6PermanentCorrectiveActionColumns:[{title:"Action",field:"Action",editComponent:function(e){return r.a.createElement(ge.a,{margin:"dense",id:"Action",label:"Action",type:"text",error:""===e.value||!a.state.formControl.D6PermanentCorrectiveAction.Action.valid,helperText:""===e.value?"Action cannot empty":a.state.formControl.D6PermanentCorrectiveAction.Action.valid?"":a.state.formControl.D6PermanentCorrectiveAction.Action.message,defaultValue:e.rowData.Action,onChange:function(t){var n=Object(me.a)({},a.state.formControl);""===t.target.value?(n.D6PermanentCorrectiveAction.Action.valid=!1,n.D6PermanentCorrectiveAction.Action.message="Action cannot be empty"):(n.D6PermanentCorrectiveAction.Action.valid=!0,n.D6PermanentCorrectiveAction.Action.message=""),a.setState({formControl:n}),e.onChange(t.target.value)}})}},{title:"Effective Date",field:"EffectiveDate",render:function(e){return r.a.createElement("span",null,new Date(e.EffectiveDate).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric"}))},editComponent:function(e){return r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Da.b,{style:{width:"100%"},id:"date-picker-dialog",label:"Effective Date",format:"dd-MMM-yyyy",value:e.rowData.EffectiveDate,onChange:function(t){return e.onChange(t)},disableFuture:!0}))}},{title:"Responsible",field:"Responsible",editComponent:function(e){return r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(Ea.a,{shrink:!0,required:!0,error:!a.state.formControl.D6PermanentCorrectiveAction.Responsible.valid},"Responsible"),r.a.createElement(ba.a,{id:"ddlResponsible",value:void 0===e.value?"":e.value,error:!a.state.formControl.D6PermanentCorrectiveAction.Responsible.valid,onChange:function(t){var n=Object(me.a)({},a.state.formControl);""===t.target.value?(n.D6PermanentCorrectiveAction.Responsible.valid=!1,n.D6PermanentCorrectiveAction.Responsible.message="Responsible cannot be empty"):(n.D6PermanentCorrectiveAction.Responsible.valid=!0,n.D6PermanentCorrectiveAction.Responsible.message=""),a.setState({formControl:n}),e.onChange(t.target.value)},displayEmpty:!0},r.a.createElement(et.a,{value:""},r.a.createElement("em",null,"Select ",a.props.label)),a.renderResponsibleOptions()),r.a.createElement(Sa.a,{error:!a.state.formControl.D6PermanentCorrectiveAction.Responsible.valid,style:{display:a.state.formControl.D6PermanentCorrectiveAction.Responsible.valid?"none":""}},a.state.formControl.D6PermanentCorrectiveAction.Responsible.message))}}],d7PreventRecurrenceColumns:[{title:"Action",field:"Action",editComponent:function(e){return r.a.createElement(ge.a,{margin:"dense",id:"Action",label:"Action",type:"text",error:""===e.value||!a.state.formControl.D7PreventRecurrence.Action.valid,helperText:""===e.value?"Action cannot empty":a.state.formControl.D7PreventRecurrence.Action.valid?"":a.state.formControl.D7PreventRecurrence.Action.message,defaultValue:e.rowData.Action,onChange:function(t){var n=Object(me.a)({},a.state.formControl);""===t.target.value?(n.D7PreventRecurrence.Action.valid=!1,n.D7PreventRecurrence.Action.message="Action cannot be empty"):(n.D7PreventRecurrence.Action.valid=!0,n.D7PreventRecurrence.Action.message=""),a.setState({formControl:n}),e.onChange(t.target.value)}})}},{title:"Effective Date",field:"EffectiveDate",render:function(e){return r.a.createElement("span",null,new Date(e.EffectiveDate).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric"}))},editComponent:function(e){return r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Da.b,{style:{width:"100%"},id:"date-picker-dialog",label:"Effective Date",format:"dd-MMM-yyyy",value:e.rowData.EffectiveDate,onChange:function(t){return e.onChange(t)},disableFuture:!0}))}},{title:"Responsible",field:"Responsible",editComponent:function(e){return r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(Ea.a,{shrink:!0,required:!0,error:!a.state.formControl.D7PreventRecurrence.Responsible.valid},"Responsible"),r.a.createElement(ba.a,{id:"ddlResponsible",value:void 0===e.value?"":e.value,error:!a.state.formControl.D7PreventRecurrence.Responsible.valid,onChange:function(t){var n=Object(me.a)({},a.state.formControl);""===t.target.value?(n.D7PreventRecurrence.Responsible.valid=!1,n.D7PreventRecurrence.Responsible.message="Responsible cannot be empty"):(n.D7PreventRecurrence.Responsible.valid=!0,n.D7PreventRecurrence.Responsible.message=""),a.setState({formControl:n}),e.onChange(t.target.value)},displayEmpty:!0},r.a.createElement(et.a,{value:""},r.a.createElement("em",null,"Select ",a.props.label)),a.renderResponsibleOptions()),r.a.createElement(Sa.a,{error:!a.state.formControl.D7PreventRecurrence.Responsible.valid,style:{display:a.state.formControl.D7PreventRecurrence.Responsible.valid?"none":""}},a.state.formControl.D7PreventRecurrence.Responsible.message))}}],d8FollowUpColumns:[{title:"Action",field:"Action",editComponent:function(e){return r.a.createElement(ge.a,{margin:"dense",id:"Action",label:"Action",type:"text",error:""===e.value||!a.state.formControl.D8FollowUp.Action.valid,helperText:""===e.value?"Action cannot empty":a.state.formControl.D8FollowUp.Action.valid?"":a.state.formControl.D8FollowUp.Action.message,defaultValue:e.rowData.Action,onChange:function(t){var n=Object(me.a)({},a.state.formControl);""===t.target.value?(n.D8FollowUp.Action.valid=!1,n.D8FollowUp.Action.message="Action cannot be empty"):(n.D8FollowUp.Action.valid=!0,n.D8FollowUp.Action.message=""),a.setState({formControl:n}),e.onChange(t.target.value)}})}},{title:"Effective Date",field:"EffectiveDate",render:function(e){return r.a.createElement("span",null,new Date(e.EffectiveDate).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric"}))},editComponent:function(e){return r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Da.b,{style:{width:"100%"},id:"date-picker-dialog",label:"Effective Date",format:"dd-MMM-yyyy",value:e.rowData.EffectiveDate,onChange:function(t){return e.onChange(t)},disableFuture:!0}))}},{title:"Responsible",field:"Responsible",editComponent:function(e){return r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(Ea.a,{shrink:!0,required:!0,error:!a.state.formControl.D8FollowUp.Responsible.valid},"Responsible"),r.a.createElement(ba.a,{id:"ddlResponsible",value:void 0===e.value?"":e.value,error:!a.state.formControl.D8FollowUp.Responsible.valid,onChange:function(t){var n=Object(me.a)({},a.state.formControl);""===t.target.value?(n.D8FollowUp.Responsible.valid=!1,n.D8FollowUp.Responsible.message="Responsible cannot be empty"):(n.D8FollowUp.Responsible.valid=!0,n.D8FollowUp.Responsible.message=""),a.setState({formControl:n}),e.onChange(t.target.value)},displayEmpty:!0},r.a.createElement(et.a,{value:""},r.a.createElement("em",null,"Select ",a.props.label)),a.renderResponsibleOptions()),r.a.createElement(Sa.a,{error:!a.state.formControl.D8FollowUp.Responsible.valid,style:{display:a.state.formControl.D8FollowUp.Responsible.valid?"none":""}},a.state.formControl.D8FollowUp.Responsible.message))}}],dialogOpen:!1,dialogMessage:"",disabled:!1,snackOpen:!1,snackMessage:{valid:!0,message:""},snackClass:"",supportDoc:a.props.formData.SupportDocument,d1EightDTeam:a.props.formData.D1EightDTeam,d3ContainmentAction:a.props.formData.D3ContainmentAction,d4RootCause:a.props.formData.D4RootCause,d5VerifyCorrectiveAction:a.props.formData.D5VerifyCorrectiveAction,d6PermanentCorrectiveAction:a.props.formData.D6PermanentCorrectiveAction,d7PreventRecurrence:a.props.formData.D7PreventRecurrence,d8FollowUp:a.props.formData.D8FollowUp},a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a.renderResponsibleOptions=a.renderResponsibleOptions.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"renderResponsibleOptions",value:function(){return this.state.d1EightDTeam.map((function(e,t){return r.a.createElement(et.a,{label:"Responsible",value:e.Name,key:e.Name,name:e.Name},e.Name)}))}},{key:"handleChange",value:function(e,t,a){var n=Object(me.a)({},this.state.formData),r=Object(me.a)({},this.state.formControl);!a&&"Factory"!==t||void 0!==e&&""!==e?(r[t].valid=!0,r[t].message=""):(r[t].valid=!1,r[t].message="".concat(t," cannot be empty.")),n[t]=e,this.setState({formData:n})}},{key:"getFormDataFromObject",value:function(e){var t=this,a=new FormData;return void 0!==e&&Object.keys(e).map((function(n,r){if("SupportDocument"===n){var o=new Array;if("Add"===t.state.actionStatus)e[n].map((function(e){o.push({Remarks:e.Remarks,DocumentName:e.Document.name}),a.append("file",e.Document)}));else{var s=(o=e[n]).filter((function(e){return void 0!==e.Document}));void 0!==s&&s.length>0&&s.map((function(e){var t=o.indexOf(e);o[t]={Remarks:e.Remarks,DocumentName:e.Document.name},a.append("file",e.Document)}))}a.set("SupportDocument",JSON.stringify(o))}else"D1EightDTeam"===n?a.append("D1EightDTeam",JSON.stringify(e[n])):"D3ContainmentAction"===n?a.append("D3ContainmentAction",JSON.stringify(e[n])):"D4RootCause"===n?a.append("D4RootCause",JSON.stringify(e[n])):"D5VerifyCorrectiveAction"===n?a.append("D5VerifyCorrectiveAction",JSON.stringify(e[n])):"D6PermanentCorrectiveAction"===n?a.append("D6PermanentCorrectiveAction",JSON.stringify(e[n])):"D7PreventRecurrence"===n?a.append("D7PreventRecurrence",JSON.stringify(e[n])):"D8FollowUp"===n?a.append("D8FollowUp",JSON.stringify(e[n])):a.append(n,e[n])})),a}},{key:"initFormControl",value:function(){this.setState({formControls:bm(Om)})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(Ae.a,{fullScreen:!0,open:this.state.formOpen,onClose:this.closeForm,TransitionComponent:this.Transition},r.a.createElement(w.a,{className:"appBar"},r.a.createElement(F.a,null,r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:this.closeForm,"aria-label":"close"},r.a.createElement(Vt.a,null)),r.a.createElement(x.a,{variant:"h6",className:"app-title"},"Eight D Report"),r.a.createElement(he.a,{color:"inherit",disabled:this.state.disabled,onClick:this.onSave},"save"))),r.a.createElement(_e.a,null,r.a.createElement("div",{className:"form-container"},r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-evenly",alignItems:"center",md:10,xs:12,sm:12,xl:10,lg:10},r.a.createElement(be.a,{container:!0,direction:"row",justify:"space-around",alignItems:"center",spacing:3},r.a.createElement(be.a,{item:!0,container:!0,md:6,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%"}},r.a.createElement(ge.a,{label:"Factory",defaultValue:this.state.formData.Factory.FctyName,inputProps:{readOnly:!0}}))),r.a.createElement(be.a,{item:!0,container:!0,md:6,xs:12,sm:12},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Da.b,{style:{width:"100%"},id:"date-picker-dialog",label:"Date Registered",format:"dd-MMM-yyyy",value:this.state.formData.ReportDate,onChange:function(t){return e.handleChange(t,"ReportDate")},disableFuture:!0}))),r.a.createElement(be.a,{item:!0,container:!0,md:6,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%"}},r.a.createElement(ge.a,{label:"Category",defaultValue:this.state.formData.Category,inputProps:{readOnly:!0}}))),r.a.createElement(be.a,{item:!0,container:!0,md:6,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%"}},r.a.createElement(ge.a,{id:"txtExtRef",label:"Ext. Ref #",defaultValue:this.state.formData.ExtRef,onChange:function(t){return e.handleChange(t.target.value,"ExtRef",!0)},required:!0,error:!this.state.formControl.ExtRef.valid,helperText:this.state.formControl.ExtRef.message}))),r.a.createElement(be.a,{item:!0,container:!0,md:5,xs:10},r.a.createElement(ya.a,{style:{width:"100%"}},r.a.createElement(ge.a,{label:"8D Number",defaultValue:this.state.formData.EightDNumber,inputProps:{readOnly:!0}}))),r.a.createElement(be.a,{item:!0,container:!0,md:1,xs:2},r.a.createElement(ya.a,{style:{width:"100%"}},r.a.createElement(ge.a,{label:"Rev",defaultValue:this.state.formData.RevisionNo,inputProps:{readOnly:!0}}))),r.a.createElement(be.a,{item:!0,container:!0,md:6,xs:12,sm:12},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Da.b,{style:{width:"100%"},id:"date-picker-dialog",label:"Date of Issue",format:"dd-MMM-yyyy",value:this.state.formData.IssueDate,onChange:function(t){return e.handleChange(t,"IssueDate")},disableFuture:!0}))),r.a.createElement(be.a,{item:!0,container:!0,md:6,xs:12},r.a.createElement(ya.a,{style:{width:"100%"}},r.a.createElement(ge.a,{label:"Ref. Number",defaultValue:this.state.formData.RefNumber,inputProps:{readOnly:!0}}))),r.a.createElement(be.a,{item:!0,container:!0,md:6,xs:12,sm:12},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Da.b,{style:{width:"100%"},id:"date-picker-dialog",label:"Expected Response Date",format:"dd-MMM-yyyy",value:this.state.formData.ExpectedResponseDate,onChange:function(t){return e.handleChange(t,"ExpectedResponseDate")},disableFuture:!0}))),r.a.createElement(be.a,{item:!0,container:!0,md:6,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%"}},r.a.createElement(ge.a,{id:"txtIssuer",label:"Name of Issuer",defaultValue:this.state.formData.Issuer,onChange:function(t){return e.handleChange(t.target.value,"Issuer",!1)},required:!1,error:!this.state.formControl.Issuer.valid,helperText:this.state.formControl.Issuer.message}))),r.a.createElement(be.a,{item:!0,container:!0,md:6,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%"}},r.a.createElement(Ea.a,{shrink:!0,htmlFor:"ddlClosed",required:!0},"8D Status"),r.a.createElement(ba.a,{id:"ddlClosed",value:this.state.formData.Closed,onChange:function(t){return e.handleChange(t.target.value,"Closed",!0)}},r.a.createElement(et.a,{value:!0},"Close"),r.a.createElement(et.a,{value:!1},"Open")))),r.a.createElement(be.a,{item:!0,container:!0,md:6,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%"}},r.a.createElement(ge.a,{id:"txtReceivingParty",label:"Receiving Party",defaultValue:this.state.formData.ReceivingParty,onChange:function(t){return e.handleChange(t.target.value,"ReceivingParty",!1)},required:!1,error:!this.state.formControl.ReceivingParty.valid,helperText:this.state.formControl.ReceivingParty.message}))),r.a.createElement(be.a,{item:!0,container:!0,md:6,xs:12,sm:12},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Da.b,{style:{width:"100%"},id:"date-picker-dialog",label:"8D Completion Date",format:"dd-MMM-yyyy",value:this.state.formData.CompletedDate,onChange:function(t){return e.handleChange(t,"CompletedDate")},disableFuture:!0})))),r.a.createElement(be.a,{item:!0,sm:12,style:{paddingTop:7}},r.a.createElement(Ve.a,{title:"D1- 8D TEAM MEMBER",columns:this.state.d1EightDTeamColumns,data:this.state.d1EightDTeam,editable:{onRowAdd:function(t){return new Promise((function(a,n){setTimeout((function(){var r=Object(je.a)(e.state.d1EightDTeam),o=Object(me.a)({},e.state.formControl),s=Em.validateTeamFields(t);if(s.valid){var i=Object(me.a)({},t);r.push(i),e.setState({d1EightDTeam:r},(function(){return a()}))}else n(),s.errors.map((function(e){o.D1EightDTeam[e.property].valid=!1,o.D1EightDTeam[e.property].message=e.message})),e.setState({formControl:o})}),1e3)}))},onRowUpdate:function(t,a){return new Promise((function(n,r){setTimeout((function(){var o=Object(je.a)(e.state.d1EightDTeam),s=Object(me.a)({},e.state.formControl),i=Em.validateTeamFields(t);if(i.valid){var l=o.indexOf(a);o[l]=t,e.setState({d1EightDTeam:o},(function(){return n()}))}else r(),i.errors.map((function(e){s.D1EightDTeam[e.property].valid=!1,s.D1EightDTeam[e.property].message=e.message})),e.setState({formControl:s})}),1e3)}))}},actions:[{icon:"delete",tooltip:"Delete",onClick:function(t,a){return e.dialogOpen(a)}}],icons:{Clear:function(t){return r.a.createElement(Nt.a,{onClick:function(){e.initFormControl()},style:{padding:0,margin:0}})}},options:{search:!1}})),r.a.createElement(be.a,{item:!0,sm:12,style:{paddingTop:7}},r.a.createElement(bn,{label:"D2 \u2013 PROBLEM DESCRIPTION",style:{width:"100%"}},r.a.createElement(be.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center"},r.a.createElement(ya.a,{style:{width:"100%"}},r.a.createElement(ge.a,{id:"txtProblemDesc",defaultValue:this.state.formData.ProblemDesc,onChange:function(t){return e.handleChange(t.target.value,"ProblemDesc")},multiline:!0,rows:4}))))),r.a.createElement(be.a,{item:!0,sm:12,style:{paddingTop:7}},r.a.createElement(Ve.a,{title:"D3 \u2013 IMMEDIATE CONTAINMENT ACTION",columns:this.state.d3ContainmentActionColumns,data:this.state.d3ContainmentAction,editable:{onRowAdd:function(t){return new Promise((function(a,n){setTimeout((function(){var r=Object(je.a)(e.state.d3ContainmentAction),o=Object(me.a)({},e.state.formControl),s=Em.validateActionFields(t);if(s.valid){var i=Object(me.a)({},t);i.EffectiveDate=void 0===t.EffectiveDate?new Date:t.EffectiveDate,r.push(i),e.setState({d3ContainmentAction:r},(function(){return a()}))}else n(),s.errors.map((function(e){o.D3ContainmentAction[e.property].valid=!1,o.D3ContainmentAction[e.property].message=e.message})),e.setState({formControl:o})}),1e3)}))},onRowUpdate:function(t,a){return new Promise((function(n,r){setTimeout((function(){var o=Object(je.a)(e.state.d3ContainmentAction),s=Object(me.a)({},e.state.formControl),i=Em.validateActionFields(t);if(i.valid){var l=o.indexOf(a);o[l]=t,e.setState({d3ContainmentAction:o},(function(){return n()}))}else r(),i.errors.map((function(e){s.D3ContainmentAction[e.property].valid=!1,s.D3ContainmentAction[e.property].message=e.message})),e.setState({formControl:s})}),1e3)}))}},actions:[{icon:"delete",tooltip:"Delete",onClick:function(t,a){return e.dialogOpen(a)}}],icons:{Clear:function(t){return r.a.createElement(Nt.a,{onClick:function(){e.initFormControl()},style:{padding:0,margin:0}})}},options:{search:!1}})),r.a.createElement(be.a,{item:!0,sm:12,style:{paddingTop:7}},r.a.createElement(Ve.a,{title:"D4 \u2013 DEFINE AND VERIFY ROOT CAUSE",columns:this.state.d4RootCauseColumns,data:this.state.d4RootCause,editable:{onRowAdd:function(t){return new Promise((function(a,n){setTimeout((function(){var r=Object(je.a)(e.state.d4RootCause),o=Object(me.a)({},e.state.formControl),s=Em.validateRootCauseFields(t);if(s.valid){var i=Object(me.a)({},t);i.EffectiveDate=void 0===t.EffectiveDate?new Date:t.EffectiveDate,r.push(i),e.setState({d4RootCause:r},(function(){return a()}))}else n(),s.errors.map((function(e){o.D4RootCause[e.property].valid=!1,o.D4RootCause[e.property].message=e.message})),e.setState({formControl:o})}),1e3)}))},onRowUpdate:function(t,a){return new Promise((function(n,r){setTimeout((function(){var o=Object(je.a)(e.state.d4RootCause),s=Object(me.a)({},e.state.formControl),i=Em.validateRootCauseFields(t);if(i.valid){var l=o.indexOf(a);o[l]=t,e.setState({d4RootCause:o},(function(){return n()}))}else r(),i.errors.map((function(e){s.D4RootCause[e.property].valid=!1,s.D4RootCause[e.property].message=e.message})),e.setState({formControl:s})}),1e3)}))}},actions:[{icon:"delete",tooltip:"Delete",onClick:function(t,a){return e.dialogOpen(a)}}],icons:{Clear:function(t){return r.a.createElement(Nt.a,{onClick:function(){e.initFormControl()},style:{padding:0,margin:0}})}},options:{search:!1}})),r.a.createElement(be.a,{item:!0,sm:12,style:{paddingTop:7}},r.a.createElement(Ve.a,{title:"D5 \u2013 VERIFY CORRECTIVE ACTION",columns:this.state.d5VerifyCorrectiveActionColumns,data:this.state.d5VerifyCorrectiveAction,editable:{onRowAdd:function(t){return new Promise((function(a,n){setTimeout((function(){var r=Object(je.a)(e.state.d5VerifyCorrectiveAction),o=Object(me.a)({},e.state.formControl),s=Em.validateActionFields(t);if(s.valid){var i=Object(me.a)({},t);i.EffectiveDate=void 0===t.EffectiveDate?new Date:t.EffectiveDate,r.push(i),e.setState({d5VerifyCorrectiveAction:r},(function(){return a()}))}else n(),s.errors.map((function(e){o.D5VerifyCorrectiveAction[e.property].valid=!1,o.D5VerifyCorrectiveAction[e.property].message=e.message})),e.setState({formControl:o})}),1e3)}))},onRowUpdate:function(t,a){return new Promise((function(n,r){setTimeout((function(){var o=Object(je.a)(e.state.d5VerifyCorrectiveAction),s=Object(me.a)({},e.state.formControl),i=Em.validateActionFields(t);if(i.valid){var l=o.indexOf(a);o[l]=t,e.setState({d5VerifyCorrectiveAction:o},(function(){return n()}))}else r(),i.errors.map((function(e){s.D5VerifyCorrectiveAction[e.property].valid=!1,s.D5VerifyCorrectiveAction[e.property].message=e.message})),e.setState({formControl:s})}),1e3)}))}},actions:[{icon:"delete",tooltip:"Delete",onClick:function(t,a){return e.dialogOpen(a)}}],icons:{Clear:function(t){return r.a.createElement(Nt.a,{onClick:function(){e.initFormControl()},style:{padding:0,margin:0}})}},options:{search:!1}})),r.a.createElement(be.a,{item:!0,sm:12,style:{paddingTop:7}},r.a.createElement(Ve.a,{title:"D6 \u2013 PERMANENT CORRECTIVE ACTION",columns:this.state.d6PermanentCorrectiveActionColumns,data:this.state.d6PermanentCorrectiveAction,editable:{onRowAdd:function(t){return new Promise((function(a,n){setTimeout((function(){var r=Object(je.a)(e.state.d6PermanentCorrectiveAction),o=Object(me.a)({},e.state.formControl),s=Em.validateActionFields(t);if(s.valid){var i=Object(me.a)({},t);i.EffectiveDate=void 0===t.EffectiveDate?new Date:t.EffectiveDate,r.push(i),e.setState({d6PermanentCorrectiveAction:r},(function(){return a()}))}else n(),s.errors.map((function(e){o.D6PermanentCorrectiveAction[e.property].valid=!1,o.D6PermanentCorrectiveAction[e.property].message=e.message})),e.setState({formControl:o})}),1e3)}))},onRowUpdate:function(t,a){return new Promise((function(n,r){setTimeout((function(){var o=Object(je.a)(e.state.d6PermanentCorrectiveAction),s=Object(me.a)({},e.state.formControl),i=Em.validateActionFields(t);if(i.valid){var l=o.indexOf(a);o[l]=t,e.setState({d6PermanentCorrectiveAction:o},(function(){return n()}))}else r(),i.errors.map((function(e){s.D6PermanentCorrectiveAction[e.property].valid=!1,s.D6PermanentCorrectiveAction[e.property].message=e.message})),e.setState({formControl:s})}),1e3)}))}},actions:[{icon:"delete",tooltip:"Delete",onClick:function(t,a){return e.dialogOpen(a)}}],icons:{Clear:function(t){return r.a.createElement(Nt.a,{onClick:function(){e.initFormControl()},style:{padding:0,margin:0}})}},options:{search:!1}})),r.a.createElement(be.a,{item:!0,sm:12,style:{paddingTop:7}},r.a.createElement(Ve.a,{title:"D7 \u2013 PREVENT RECURRENCE",columns:this.state.d7PreventRecurrenceColumns,data:this.state.d7PreventRecurrence,editable:{onRowAdd:function(t){return new Promise((function(a,n){setTimeout((function(){var r=Object(je.a)(e.state.d7PreventRecurrence),o=Object(me.a)({},e.state.formControl),s=Em.validateActionFields(t);if(s.valid){var i=Object(me.a)({},t);i.EffectiveDate=void 0===t.EffectiveDate?new Date:t.EffectiveDate,r.push(i),e.setState({d7PreventRecurrence:r},(function(){return a()}))}else n(),s.errors.map((function(e){o.D7PreventRecurrence[e.property].valid=!1,o.D7PreventRecurrence[e.property].message=e.message})),e.setState({formControl:o})}),1e3)}))},onRowUpdate:function(t,a){return new Promise((function(n,r){setTimeout((function(){var o=Object(je.a)(e.state.d7PreventRecurrence),s=Object(me.a)({},e.state.formControl),i=Em.validateActionFields(t);if(i.valid){var l=o.indexOf(a);o[l]=t,e.setState({d7PreventRecurrence:o},(function(){return n()}))}else r(),i.errors.map((function(e){s.D7PreventRecurrence[e.property].valid=!1,s.D7PreventRecurrence[e.property].message=e.message})),e.setState({formControl:s})}),1e3)}))}},actions:[{icon:"delete",tooltip:"Delete",onClick:function(t,a){return e.dialogOpen(a)}}],icons:{Clear:function(t){return r.a.createElement(Nt.a,{onClick:function(){e.initFormControl()},style:{padding:0,margin:0}})}},options:{search:!1}})),r.a.createElement(be.a,{item:!0,sm:12,style:{paddingTop:7}},r.a.createElement(Ve.a,{title:"D8 - EFFECTIVENESS REVIEW & CLOSING REPORT (INCLUDE DATE)",columns:this.state.d8FollowUpColumns,data:this.state.d8FollowUp,editable:{onRowAdd:function(t){return new Promise((function(a,n){setTimeout((function(){var r=Object(je.a)(e.state.d8FollowUp),o=Object(me.a)({},e.state.formControl),s=Em.validateActionFields(t);if(s.valid){var i=Object(me.a)({},t);i.EffectiveDate=void 0===t.EffectiveDate?new Date:t.EffectiveDate,r.push(i),e.setState({d8FollowUp:r},(function(){return a()}))}else n(),s.errors.map((function(e){o.D8FollowUp[e.property].valid=!1,o.D8FollowUp[e.property].message=e.message})),e.setState({formControl:o})}),1e3)}))},onRowUpdate:function(t,a){return new Promise((function(n,r){setTimeout((function(){var o=Object(je.a)(e.state.d8FollowUp),s=Object(me.a)({},e.state.formControl),i=Em.validateActionFields(t);if(i.valid){var l=o.indexOf(a);o[l]=t,e.setState({d8FollowUp:o},(function(){return n()}))}else r(),i.errors.map((function(e){s.D8FollowUp[e.property].valid=!1,s.D8FollowUp[e.property].message=e.message})),e.setState({formControl:s})}),1e3)}))}},actions:[{icon:"delete",tooltip:"Delete",onClick:function(t,a){return e.dialogOpen(a)}}],icons:{Clear:function(t){return r.a.createElement(Nt.a,{onClick:function(){e.initFormControl()},style:{padding:0,margin:0}})}},options:{search:!1}})),r.a.createElement(be.a,{item:!0,sm:12,style:{paddingTop:7}},r.a.createElement(tu,{parentName:"EightDReport",parentId:this.props.formData._id,formData:this.state.formData.SupportDocument,updateSupportDoc:this.updateSupportDoc,addSupportDoc:this.addSupportDoc,deleteSupportDoc:this.deleteSupportDoc})))))),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.snackClass,autoHideDuration:600,open:this.state.snackOpen,onClose:this.snackOpen,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.snackMessage)}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return{formOpen:e.formOpen}}}]),t}(r.a.Component),wm=km,Fm={Factory:"",ReportDate:new Date,Category:"",ExtRef:"",EightDNumber:"",RefNumber:"",RevisionNo:0,IssueDate:new Date,ExpectedResponseDate:new Date,Closed:!1,Issuer:"",ReceivingParty:"",CompletedDate:null,ProblemDesc:"",D1EightDTeam:[],D3ContainmentAction:[],D4RootCause:[],D5VerifyCorrectiveAction:[],D6PermanentCorrectiveAction:[],D7PreventRecurrence:[],D8FollowUp:[],SupportDocument:[],CreatedAt:new Date,CreatedBy:"Admin",LastUpdatedAt:new Date,LastUpdatedBy:"Admin"},xm=a(23),Tm=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).snackOpen=function(e,t,n){var r;return l.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(void 0===e||null===e||void 0===t||null===t){o.next=11;break}if(void 0!==n){o.next=7;break}return o.next=4,l.a.awrap(ka(e,t));case 4:r=o.sent,o.next=8;break;case 7:r=n;case 8:a.setState({snackOpen:!a.state.snackOpen,snackMessage:r,snackClass:e}),o.next=12;break;case 11:a.setState({snackOpen:!1});case 12:case"end":return o.stop()}}))},a.updateSupportDoc=function(e,t){if(void 0!==t&&void 0!==e){var n=a.state.supportDoc;n[t]=e,a.setState({supportDoc:n}),a.props.handleChange(n,"SupportDocument")}},a.addSupportDoc=function(e){if(void 0!==e){var t=a.state.supportDoc;t.push(e),a.setState({supportDoc:t}),a.props.handleChange(t,"SupportDocument")}},a.deleteSupportDoc=function(e){void 0!==e&&null!==e&&(a.setState({supportDoc:e}),a.props.handleChange(e,"SupportDocument"))},a.state={formControls:{Factory:{valid:!0,message:"",value:a.props.formData.Factory},ReportDate:{valid:!0,message:"",value:a.props.formData.ReportDate},CaseNo:{valid:!0,message:"",value:a.props.formData.CaseNo},RevisionNo:{valid:!0,message:"",value:a.props.formData.RevisionNo},CaseStatus:{valid:!0,message:"",value:a.props.formData.CaseStatus},IncidentCategory:{valid:!0,message:"",value:a.props.formData.IncidentCategory},IncidentType:{valid:!0,message:"",value:a.props.formData.IncidentType},Report_By:{valid:!0,message:"",value:a.props.formData.Report_By},Report_ID:{valid:!0,message:"",value:a.props.formData.Report_ID},Report_JobTitle:{valid:!0,message:"",value:a.props.formData.Report_JobTitle},Report_Witness:{valid:!0,message:"",value:a.props.formData.Report_Witness},Report_WitnessJobTitle:{valid:!0,message:"",value:a.props.formData.Report_WitnessJobTitle},Info_Desc:{valid:!0,message:"",value:a.props.formData.Info_Desc},Info_Location:{valid:!0,message:"",value:a.props.formData.Info_Location},Info_MachCode:{valid:!0,message:"",value:a.props.formData.Info_MachCode},Info_IncidentDate:{valid:!0,message:"",value:a.props.formData.Info_IncidentDate},Info_PossibleCause:{valid:!0,message:"",value:a.props.formData.Info_PossibleCause},Info_CauseOfFire:{valid:!0,message:"",value:a.props.formData.Info_CauseOfFire},Info_ContributingFactor:{valid:!0,message:"",value:a.props.formData.Info_ContributingFactor},Info_ExtDischarge:{valid:!0,message:"",value:a.props.formData.Info_ExtDischarge},Info_ExtUsed:{valid:!0,message:"",value:a.props.formData.Info_ExtUsed},Info_EstDmgValue:{valid:!0,message:"",value:a.props.formData.Info_EstDmgValue},Info_DmgDesc:{valid:!0,message:"",value:a.props.formData.Info_DmgDesc},Info_Evacuation:{valid:!0,message:"",value:a.props.formData.Info_Evacuation},Info_EvacuationPerson:{valid:!0,message:"",value:a.props.formData.Info_EvacuationPerson},Info_Injure:{valid:!0,message:"",value:a.props.formData.Info_Injure},Info_InjurePerson:{valid:!0,message:"",value:a.props.formData.Info_InjurePerson},Info_Fatalities:{valid:!0,message:"",value:a.props.formData.Info_Fatalities},Info_FatalitiesPerson:{valid:!0,message:"",value:a.props.formData.Info_FatalitiesPerson},Equip_Brand:{valid:!0,message:"",value:a.props.formData.Equip_Brand},Equip_Model:{valid:!0,message:"",value:a.props.formData.Equip_Model},Equip_OtherID:{valid:!0,message:"",value:a.props.formData.Equip_OtherID},Equip_Manufacture:{valid:!0,message:"",value:a.props.formData.Equip_Manufacture},FightingType_Water:{valid:!0,message:"",value:a.props.formData.FightingType_Water},FightingType_Hose:{valid:!0,message:"",value:a.props.formData.FightingType_Hose},FightingType_FireBrigade:{valid:!0,message:"",value:a.props.formData.FightingType_FireBrigade},FightingType_Halon:{valid:!0,message:"",value:a.props.formData.FightingType_Halon},FightingType_Powder:{valid:!0,message:"",value:a.props.formData.FightingType_Powder},FightingType_CO2:{valid:!0,message:"",value:a.props.formData.FightingType_CO2},FightingType_Other:{valid:!0,message:"",value:a.props.formData.FightingType_Other},FightingType_None:{valid:!0,message:"",value:a.props.formData.FightingType_None},SupportDocument:{valid:!0,message:"",value:a.props.formData.SupportDocument}},incidentCategory:[],incidentType:[],possibleCause:[],supportDoc:a.props.formData.SupportDocument,eightDFormOpen:!1,eightDFormAction:"",eightDFormData:"",snackOpen:!1,snackMessage:{valid:!0,message:""},snackClass:""},a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a.initFireIncidentOptions=a.initFireIncidentOptions.bind(Object(Pe.a)(a)),a.updateSupportDoc=a.updateSupportDoc.bind(Object(Pe.a)(a)),a.EightDModel=xm(Fm),a.closeEightDForm=a.closeEightDForm.bind(Object(Pe.a)(a)),a.onEightDSuccess=a.onEightDSuccess.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initFireIncidentOptions(),this.initEightReport()}},{key:"initEightReport",value:function(){var e=this;Em.getFilter("?RefNumber=".concat(this.state.formControls.CaseNo.value)).then((function(t){!0===t.code&&t.data.length>0&&e.setState({eightDFormData:t.data[0]})}))}},{key:"openEightDForm",value:function(){var e=Object(me.a)({},this.state.formData),t=Object(me.a)({},this.state.formControl),a=pm.validateFields(e);if(!a.valid)return a.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),this.setState({formControl:t}),void this.snackOpen("error","alertValidation");var n=Object(me.a)({},this.state.eightDFormData),r="";""===this.state.eightDFormData?((n=this.EightDModel).Factory=this.state.formControls.Factory.value,n.Category="Safety",n.RefNumber=this.state.formControls.CaseNo.value,n.EightDNumber="8D-"+this.state.formControls.CaseNo.value,r="Add"):r="update",this.setState({eightDFormData:n,eightDFormOpen:!0,eightDFormAction:r})}},{key:"closeEightDForm",value:function(){this.setState({eightDFormOpen:!1,eightDFormAction:""})}},{key:"onEightDSuccess",value:function(e){var t=this;void 0!==e&&null!==e?"Add"===this.state.eightDFormAction?this.setState({eightDFormData:e,eightDFormOpen:!1,eightDFormAction:""},(function(){return t.snackOpen("success","add")})):this.setState({eightDFormData:e,eightDFormOpen:!1,eightDFormAction:""},(function(){return t.snackOpen("success","update")})):this.snackOpen("error","server")}},{key:"initFireIncidentOptions",value:function(){var e=this;Oa("fireIncident.json").then((function(e){return e.data})).then((function(t){e.setState({incidentCategory:t.IncidentCategory}),e.setState({incidentType:t.IncidentType}),e.setState({possibleCause:t.PossibleCause})}))}},{key:"handleChange",value:function(e,t,a){var n=Object(me.a)({},this.state.formControls),r=Object(me.a)({},this.state.formState);!a||void 0!==e&&0!==e.length?(n[t].valid=!0,n[t].message=""):(n[t].valid=!1,n[t].message="".concat(t," cannot be empty.")),n[t].value=e,this.props.handleChange(e,t),r.dirty=!0,this.setState({formControls:n,formState:r})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"form-container"},r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-evenly",alignItems:"center",md:10,xs:12,sm:12,xl:10,lg:10},r.a.createElement(be.a,{container:!0,direction:"row",justify:"space-around",alignItems:"center",spacing:1},r.a.createElement(be.a,{item:!0,container:!0,md:5,xs:12,sm:12},r.a.createElement(Hr,{handleChange:this.handleChange,formControl:this.state.formControls.Factory,propertyName:"Factory",selectedValue:this.state.formControls.Factory.value,required:!0})),r.a.createElement(be.a,{item:!0,container:!0,md:5,xs:12,sm:12},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Da.b,{style:{width:"100%",margin:7},margin:"dense",id:"date-picker-dialog",label:"Report Date*",format:"dd-MMM-yyyy",value:this.state.formControls.ReportDate.value,onChange:function(t){return e.handleDateChange(t,"ReportDate")},disableFuture:!0})))),r.a.createElement(be.a,{container:!0,direction:"row",justify:"space-around",alignItems:"center",spacing:1},r.a.createElement(be.a,{item:!0,container:!0,md:5,xs:12,sm:12,justify:"space-between"},r.a.createElement(be.a,{item:!0,xs:9},r.a.createElement(ya.a,{style:{width:"100%",margin:7}},r.a.createElement(ge.a,{id:"txtCaseNumber",label:"Case Number",required:!0,defaultValue:this.state.formControls.CaseNo.value,error:!this.state.formControls.CaseNo.valid,helperText:this.state.formControls.CaseNo.message,onChange:function(t){return e.handleChange(t.target.value.trim(),"CaseNo",!0)},margin:"dense"}))),r.a.createElement(be.a,{item:!0,xs:2},r.a.createElement(ya.a,{style:{margin:7}},r.a.createElement(ge.a,{id:"txtRevNo",label:"Rev. ",defaultValue:this.state.formControls.RevisionNo.value,margin:"dense",InputProps:{readOnly:!0}})))),r.a.createElement(be.a,{item:!0,container:!0,md:5,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:7}},r.a.createElement(Ea.a,{shrink:!0,htmlFor:"ddlCaseStatus",required:!0},"Case Status"),r.a.createElement(ba.a,{id:"ddlCaseStatus",value:this.state.formControls.CaseStatus.value,onChange:function(t){return e.handleChange(t.target.value,"CaseStatus",!0)}},r.a.createElement(et.a,{value:!1},"Open"),r.a.createElement(et.a,{value:!0},"Closed"))))),r.a.createElement(be.a,{container:!0,direction:"row",justify:"space-around",alignItems:"center",spacing:1},r.a.createElement(be.a,{item:!0,container:!0,md:5,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(xa,{jsonFileName:"fireIncident",jsonPropertyName:"IncidentCategory",formControl:this.state.formControls.IncidentCategory,propertyName:"IncidentCategory",required:!0,label:"Incident Category",handleChange:function(t){return e.handleChange(t,"IncidentCategory")},selectedValue:void 0===this.state.formControls.IncidentCategory.value?"":this.state.formControls.IncidentCategory.value.Value}))),r.a.createElement(be.a,{item:!0,container:!0,md:5,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(xa,{jsonFileName:"fireIncident",jsonPropertyName:"IncidentType",formControl:this.state.formControls.IncidentType,propertyName:"IncidentType",required:!0,label:"Incident Category",handleChange:function(t){return e.handleChange(t,"IncidentType")},selectedValue:void 0===this.state.formControls.IncidentType.value?"":this.state.formControls.IncidentType.value.Value})))),r.a.createElement(be.a,{container:!0,item:!0,style:{marginTop:25},direction:"row",justify:"space-around",alignItems:"center",spacing:1,md:11,xs:12,sm:12},r.a.createElement(bn,{label:"Particulars of reporting person",style:{width:"100%"}},r.a.createElement(be.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center"},r.a.createElement(be.a,{item:!0,container:!0,md:5,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(ge.a,{id:"txtReportBy",label:"Reported By",defaultValue:this.state.formControls.Report_By.value,onChange:function(t){return e.handleChange(t.target.value,"Report_By")}}))),r.a.createElement(be.a,{item:!0,container:!0,md:5,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(ge.a,{id:"txtReportID",label:"Identification Number",defaultValue:this.state.formControls.Report_ID.value,onChange:function(t){return e.handleChange(t.target.value,"Report_ID")}})))),r.a.createElement(be.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center"},r.a.createElement(be.a,{item:!0,container:!0,md:5,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(ge.a,{id:"txtReportJobTitle",label:"Job Title",defaultValue:this.state.formControls.Report_JobTitle.value,onChange:function(t){return e.handleChange(t.target.value,"Report_JobTitle")}})))),r.a.createElement(be.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center"},r.a.createElement(be.a,{item:!0,container:!0,md:5,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(ge.a,{id:"txtReportWitness",label:"Name of witness (if applicable)",defaultValue:this.state.formControls.Report_Witness.value,onChange:function(t){return e.handleChange(t.target.value,"Report_Witness")}}))),r.a.createElement(be.a,{item:!0,container:!0,md:5,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(ge.a,{id:"txtReportWitnessJobTitle",label:"Witness Job Title",defaultValue:this.state.formControls.Report_WitnessJobTitle.value,onChange:function(t){return e.handleChange(t.target.value,"Report_WitnessJobTitle")}})))))),r.a.createElement(be.a,{item:!0,container:!0,style:{marginTop:25},direction:"row",justify:"space-around",alignItems:"center",spacing:1,md:11,xs:12,sm:12},r.a.createElement(bn,{label:"Fire Incident information",style:{width:"100%"}},r.a.createElement(be.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center"},r.a.createElement(be.a,{item:!0,container:!0,md:12,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(ge.a,{id:"txtInfoDesc",label:"Description (4W1H)",defaultValue:this.state.formControls.Info_Desc.value,onChange:function(t){return e.handleChange(t.target.value,"Info_Desc")},multiline:!0,rows:2})))),r.a.createElement(be.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center"},r.a.createElement(be.a,{item:!0,container:!0,md:5,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(ge.a,{id:"txtLocationOfFire",label:"Location of Fire",defaultValue:this.state.formControls.Info_Location.value,onChange:function(t){return e.handleChange(t.target.value,"Info_Location")}}))),r.a.createElement(be.a,{item:!0,container:!0,md:5,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(ge.a,{id:"txtMachCode",label:"Machine Code (if applicable)",defaultValue:this.state.formControls.Info_MachCode.value,onChange:function(t){return e.handleChange(t.target.value,"Info_MachCode")}})))),r.a.createElement(be.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center"},r.a.createElement(be.a,{item:!0,container:!0,md:5,xs:12,sm:12},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Ac.b,{required:!0,style:{width:"100%"},margin:"dense",id:"date-picker-dialog",label:"Fire Incident Date",format:"dd-MMM-yyyy hh:mm",value:this.state.formControls.Info_IncidentDate.value,onChange:function(t){return e.handleChange(t,"Info_IncidentDate")},disableFuture:!0}))),r.a.createElement(be.a,{item:!0,container:!0,md:5,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(xa,{jsonFileName:"fireIncident",jsonPropertyName:"PossibleCause",formControl:this.state.formControls.Info_PossibleCause,propertyName:"Info_PossibleCause",required:!0,label:"Possible Cause",handleChange:function(t){return e.handleChange(t,"Info_PossibleCause")},selectedValue:void 0===this.state.formControls.Info_PossibleCause.value?"":this.state.formControls.Info_PossibleCause.value.Value})))),r.a.createElement(be.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center"},r.a.createElement(be.a,{item:!0,container:!0,md:12,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(ge.a,{id:"txtInfoCauseOfFire",label:"Cause of Fire",defaultValue:this.state.formControls.Info_CauseOfFire.value,onChange:function(t){return e.handleChange(t.target.value,"Info_CauseOfFire")},multiline:!0,rows:2})))),r.a.createElement(be.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center"},r.a.createElement(be.a,{item:!0,container:!0,md:5,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(ge.a,{id:"txtInfoContributingFactor",label:"Factor Contributing to Fire",defaultValue:this.state.formControls.Info_ContributingFactor.value,onChange:function(t){return e.handleChange(t.target.value,"Info_ContributingFactor")}}))),r.a.createElement(be.a,{item:!0,container:!0,md:5,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(Xa.a,{id:"txtInfoEstDmgValue",label:"Estimated Value of Damage (USD)",customInput:ge.a,defaultValue:this.state.formControls.Info_EstDmgValue.value,onValueChange:function(t){return e.handleChange(t.floatValue,"Info_EstDmgValue")},onFocus:function(e){e.target.select()},decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0}))),r.a.createElement(be.a,{item:!0,container:!0,md:12,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(ge.a,{id:"txtInfoDmgDesc",label:"Description of extent of fire and damage",defaultValue:this.state.formControls.Info_DmgDesc.value,onChange:function(t){return e.handleChange(t.target.value,"Info_DmgDesc")},multiline:!0,rows:2}))),r.a.createElement(be.a,{item:!0,container:!0,md:5,xs:12,sm:12},r.a.createElement(be.a,{item:!0,xs:12,sm:6,md:6,lg:6},r.a.createElement(ye.a,{style:{width:"100%",paddingTop:24},margin:"dense",control:r.a.createElement(ve.a,{checked:this.state.formControls.Info_ExtDischarge.value,onChange:function(t){return e.handleChange(t.target.checked,"Info_ExtDischarge")},value:this.state.formControls.Info_ExtDischarge.value,color:"primary"}),label:"Fire Extinguisher Discharge"})),r.a.createElement(be.a,{item:!0,xs:12,sm:6,md:6,lg:6},r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(Xa.a,{id:"txtInfoExtUsed",label:"Fire extinguisher used (Pcs)",customInput:ge.a,defaultValue:this.state.formControls.Info_ExtUsed.value,onValueChange:function(t){return e.handleChange(t.floatValue,"Info_ExtUsed")},onFocus:function(e){e.target.select()},thousandSeparator:!0,fixedDecimalScale:!0})))),r.a.createElement(be.a,{item:!0,container:!0,md:5,xs:12,sm:12},r.a.createElement(be.a,{item:!0,xs:12,sm:6,md:6,lg:6},r.a.createElement(ye.a,{style:{width:"100%",paddingTop:24},margin:"dense",control:r.a.createElement(ve.a,{checked:this.state.formControls.Info_Evacuation.value,onChange:function(t){return e.handleChange(t.target.checked,"Info_Evacuation")},value:this.state.formControls.Info_Evacuation.value,color:"primary"}),label:"Evacuation"})),r.a.createElement(be.a,{item:!0,xs:12,sm:6,md:6,lg:6},r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(Xa.a,{id:"txtInfoEvacuationPerson",label:"Person",customInput:ge.a,defaultValue:this.state.formControls.Info_EvacuationPerson.value,onValueChange:function(t){return e.handleChange(t.floatValue,"Info_EvacuationPerson")},onFocus:function(e){e.target.select()},thousandSeparator:!0,fixedDecimalScale:!0})))),r.a.createElement(be.a,{item:!0,container:!0,md:5,xs:12,sm:12},r.a.createElement(be.a,{item:!0,xs:12,sm:6,md:6,lg:6},r.a.createElement(ye.a,{style:{width:"100%",paddingTop:24},margin:"dense",control:r.a.createElement(ve.a,{checked:this.state.formControls.Info_Injure.value,onChange:function(t){return e.handleChange(t.target.checked,"Info_Injure")},value:this.state.formControls.Info_Injure.value,color:"primary"}),label:"Injuries"})),r.a.createElement(be.a,{item:!0,xs:12,sm:6,md:6,lg:6},r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(Xa.a,{id:"txtInfoInjurePerson",label:"Person",customInput:ge.a,defaultValue:this.state.formControls.Info_InjurePerson.value,onValueChange:function(t){return e.handleChange(t.floatValue,"Info_InjurePerson")},onFocus:function(e){e.target.select()},thousandSeparator:!0,fixedDecimalScale:!0})))),r.a.createElement(be.a,{item:!0,container:!0,md:5,xs:12,sm:12},r.a.createElement(be.a,{item:!0,xs:12,sm:6,md:6,lg:6},r.a.createElement(ye.a,{style:{width:"100%",paddingTop:24},margin:"dense",control:r.a.createElement(ve.a,{checked:this.state.formControls.Info_Fatalities.value,onChange:function(t){return e.handleChange(t.target.checked,"Info_Fatalities")},value:this.state.formControls.Info_Fatalities.value,color:"primary"}),label:"Fatalities"})),r.a.createElement(be.a,{item:!0,xs:12,sm:6,md:6,lg:6},r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(Xa.a,{id:"txtInfoFatalitiesPerson",label:"Person",customInput:ge.a,defaultValue:this.state.formControls.Info_FatalitiesPerson.value,onValueChange:function(t){return e.handleChange(t.floatValue,"Info_FatalitiesPerson")},onFocus:function(e){e.target.select()},thousandSeparator:!0,fixedDecimalScale:!0}))))))),r.a.createElement(be.a,{item:!0,container:!0,style:{marginTop:25},direction:"row",justify:"space-around",alignItems:"center",spacing:1,md:11,xs:12,sm:12},r.a.createElement(bn,{label:"Equipment Involve in ignition (if applicable)",style:{width:"100%"}},r.a.createElement(be.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center"},r.a.createElement(be.a,{item:!0,container:!0,md:5,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(ge.a,{id:"txtEquipBrand",label:"Brand or Make",defaultValue:this.state.formControls.Equip_Brand.value,onChange:function(t){return e.handleChange(t.target.value,"Equip_Brand")}}))),r.a.createElement(be.a,{item:!0,container:!0,md:5,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(ge.a,{id:"txtEquipModel",label:"Model",defaultValue:this.state.formControls.Equip_Model.value,onChange:function(t){return e.handleChange(t.target.value,"Equip_Model")}})))),r.a.createElement(be.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center"},r.a.createElement(be.a,{item:!0,container:!0,md:5,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(ge.a,{id:"txtEquipOtherID",label:"Other Identification",defaultValue:this.state.formControls.Equip_OtherID.value,onChange:function(t){return e.handleChange(t.target.value,"Equip_OtherID")}}))),r.a.createElement(be.a,{item:!0,container:!0,md:5,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Da.b,{openTo:"year",format:"yyyy",label:"Year of Manufacture",views:["year"],value:this.state.formControls.Equip_Manufacture.value,onChange:function(t){return e.handleChange(t,"Equip_Manufacture")},KeyboardButtonProps:{"aria-label":"change year"}}))))))),r.a.createElement(be.a,{container:!0,style:{marginTop:25},direction:"row",justify:"space-around",alignItems:"center",spacing:1,md:11,xs:12,sm:12},r.a.createElement(bn,{label:"Type of fire fighting equipment used (Select where applicable)",style:{width:"100%"}},r.a.createElement(be.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center"},r.a.createElement(be.a,{item:!0,container:!0,md:3,xs:6,sm:3},r.a.createElement(ye.a,{style:{width:"100%"},margin:"dense",control:r.a.createElement(ve.a,{checked:this.state.formControls.FightingType_Water.value,onChange:function(t){return e.handleChange(t.target.checked,"FightingType_Water")},value:this.state.formControls.FightingType_Water.value,color:"primary"}),label:"Water"})),r.a.createElement(be.a,{item:!0,container:!0,md:3,xs:6,sm:3},r.a.createElement(ye.a,{style:{width:"100%"},margin:"dense",control:r.a.createElement(ve.a,{checked:this.state.formControls.FightingType_Hose.value,onChange:function(t){return e.handleChange(t.target.checked,"FightingType_Hose")},value:this.state.formControls.FightingType_Hose.value,color:"primary"}),label:"Hose"})),r.a.createElement(be.a,{item:!0,container:!0,md:3,xs:6,sm:3},r.a.createElement(ye.a,{style:{width:"100%"},margin:"dense",control:r.a.createElement(ve.a,{checked:this.state.formControls.FightingType_FireBrigade.value,onChange:function(t){return e.handleChange(t.target.checked,"FightingType_FireBrigade")},value:this.state.formControls.FightingType_FireBrigade.value,color:"primary"}),label:"Fire Brigade"})),r.a.createElement(be.a,{item:!0,container:!0,md:3,xs:6,sm:3},r.a.createElement(ye.a,{style:{width:"100%"},margin:"dense",control:r.a.createElement(ve.a,{checked:this.state.formControls.FightingType_Halon.value,onChange:function(t){return e.handleChange(t.target.checked,"FightingType_Halon")},value:this.state.formControls.FightingType_Halon.value,color:"primary"}),label:"Halon"})),r.a.createElement(be.a,{item:!0,container:!0,md:3,xs:6,sm:3},r.a.createElement(ye.a,{style:{width:"100%"},margin:"dense",control:r.a.createElement(ve.a,{checked:this.state.formControls.FightingType_Powder.value,onChange:function(t){return e.handleChange(t.target.checked,"FightingType_Powder")},value:this.state.formControls.FightingType_Powder.value,color:"primary"}),label:"Fire Extinguisher - Powder"})),r.a.createElement(be.a,{item:!0,container:!0,md:3,xs:6,sm:3},r.a.createElement(ye.a,{style:{width:"100%"},margin:"dense",control:r.a.createElement(ve.a,{checked:this.state.formControls.FightingType_CO2.value,onChange:function(t){return e.handleChange(t.target.checked,"FightingType_CO2")},value:this.state.formControls.FightingType_CO2.value,color:"primary"}),label:"Fire Extinguisher - CO2"})),r.a.createElement(be.a,{item:!0,container:!0,md:3,xs:6,sm:3},r.a.createElement(ye.a,{style:{width:"100%"},margin:"dense",control:r.a.createElement(ve.a,{checked:this.state.formControls.FightingType_Other.value,onChange:function(t){return e.handleChange(t.target.checked,"FightingType_Other")},value:this.state.formControls.FightingType_Other.value,color:"primary"}),label:"Other"})),r.a.createElement(be.a,{item:!0,container:!0,md:3,xs:6,sm:3},r.a.createElement(ye.a,{style:{width:"100%"},margin:"dense",control:r.a.createElement(ve.a,{checked:this.state.formControls.FightingType_None.value,onChange:function(t){return e.handleChange(t.target.checked,"FightingType_None")},value:this.state.formControls.FightingType_None.value,color:"primary"}),label:"None"}))))),r.a.createElement(be.a,{container:!0,item:!0,style:{marginTop:25},direction:"row",justify:"space-around",alignItems:"center",spacing:1,md:11,xs:12,sm:12},r.a.createElement(bn,{label:"QPR Analysis",style:{width:"100%"}},r.a.createElement(be.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center",spacing:3,style:{margin:10}},r.a.createElement(be.a,{item:!0,md:1,xs:1,sm:1},r.a.createElement(he.a,{onClick:function(){return e.openEightDForm()},variant:"contained"},"8D")),r.a.createElement(be.a,{item:!0,md:5,xs:5,sm:5},r.a.createElement(ya.a,{style:{width:"100%"}},r.a.createElement(ge.a,{label:"Report #",value:void 0===this.state.eightDFormData.EightDNumber?"":this.state.eightDFormData.EightDNumber,inputProps:{readOnly:!0}}))),r.a.createElement(be.a,{item:!0,md:3,xs:3,sm:3},r.a.createElement(ya.a,{style:{width:"100%"}},r.a.createElement(ge.a,{label:"Rev",value:void 0===this.state.eightDFormData.RevisionNo?"":this.state.eightDFormData.RevisionNo,inputProps:{readOnly:!0}}))),r.a.createElement(be.a,{item:!0,md:3,xs:3,sm:3},r.a.createElement(ye.a,{control:r.a.createElement(ve.a,{checked:!0===this.state.eightDFormData.Closed,value:!0===this.state.eightDFormData.Closed,disabled:!0,color:"primary"}),label:"Done"}))))),r.a.createElement(be.a,{container:!0,direction:"row",justify:"space-around",alignItems:"center",spacing:1,md:11,xs:12,sm:12},r.a.createElement(tu,{parentName:"FireIncident",parentId:this.props.formData._id,formData:this.state.formControls.SupportDocument.value,updateSupportDoc:this.updateSupportDoc,addSupportDoc:this.addSupportDoc,deleteSupportDoc:this.deleteSupportDoc}))),r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-evenly",alignItems:"center",md:10,xs:12,sm:12,xl:10,lg:10},this.state.eightDFormOpen?r.a.createElement(wm,{formData:this.state.eightDFormData,formAction:this.state.eightDFormAction,formOpen:this.state.eightDFormOpen,onSuccess:this.onEightDSuccess,closeForm:this.closeEightDForm}):""),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.snackClass,autoHideDuration:600,open:this.state.snackOpen,onClose:this.snackOpen,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.snackMessage)}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=t.formControls;return e.formState.valid||Array.isArray(e.formState.errors)&&e.formState.errors.map((function(e){a[e.property].valid=!1,a[e.property].message=e.message})),{formState:e.formState,formControls:a}}}]),t}(r.a.Component),Nm=Tm,jm=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).openDialog=function(e){a.setState({dialogOpen:!0,currentDeleteData:e,dialogMessage:r.a.createElement("span",null,"Are you sure to delete this record ",r.a.createElement("b",null,e.CaseNo)," ? This cannot be undone.")})},a.closeDialog=function(){a.setState({dialogOpen:!1,currentDeleteData:null,dialogMessage:""})},a.openForm=function(e){var t=Object(me.a)({},fm);void 0===e?a.setState({formOpen:!0,actionStatus:"Add",newData:Object(me.a)({},t)}):a.setState({formOpen:!0,actionStatus:"Update",newData:e})},a.closeForm=function(){a.setState({formOpen:!1,newData:{},actionStatus:"",formState:{valid:!0,dirty:!1,errors:[]}})},a.onSave=function(){var e=a.state.formState,t=Object(me.a)({},a.state.newData);"object"===typeof t.Factory&&(t.Factory=t.Factory._id);var n=pm.validateFields(t);if(n.valid){var r=Object(je.a)(a.state.data),o=a.getFormDataFromObject(t);if("Add"===a.state.actionStatus)pm.add("",o).then((function(t){!0===t.code?(e.valid=!0,r.push(t.data),a.setState({data:r}),a.closeForm(),a.snackOpen("Successfully added!","success")):(e.valid=!1,e.errors=t.errors,a.snackOpen("Please fix the error(s) highlighted to save the details!","error"))})).catch((function(e){a.snackOpen("Oops, something went wrong while processing your request!","error")}));else{var s=Object(je.a)(a.state.data),i=s.find((function(e){return e._id===t._id})),l=s.indexOf(i);pm.update("",o).then((function(t){!0===t.code?(e.valid=!0,s[l]=t.data,a.setState({data:s}),a.closeForm(),a.snackOpen("Successfully Updated!","success")):(e.valid=!1,e.errors=t.errors,a.snackOpen("Please fix the error(s) highlighted to save the details!","error"))})).catch((function(e){a.snackOpen("Oops, something went wrong while processing your request!","error")}))}}else{e.valid=!1;var c=n.errors.map((function(e){var t={};return t.property=e.property,t.message=e.message,t}));e.errors=c,a.snackOpen("Please fix the error(s) highlighted to save the details!","error")}a.setState({formState:e})},a.onDelete=function(){null!==a.state.currentDeleteData&&pm.delete("".concat(a.state.currentDeleteData._id)).then((function(e){if(!0===e.code){var t=Object(je.a)(a.state.data),n=t.find((function(e){return e._id===a.state.currentDeleteData._id})),r=t.indexOf(n);t.splice(r,1),a.closeDialog(),a.snackOpen("Successfully Deleted!","success"),a.setState({data:t})}else a.snackOpen("Oops, something went wrong while processing your request!","error")}))},a.onEdit=function(e){a.openForm(e)},a.state={columns:[{title:"Print Fire Log",field:"_id",render:function(e){return r.a.createElement(bt.a,{"aria-label":"Print",className:"",onClick:function(){return a.printFormData(e._id)}},r.a.createElement(ao.a,{fontSize:"inherit"}))}},{title:"Print 8D",field:"_id",render:function(e){return r.a.createElement(bt.a,{"aria-label":"Print",className:"",onClick:function(){return a.print8D(e.CaseNo)}},r.a.createElement(ao.a,{fontSize:"inherit"}))}},{title:"Factory",field:"Factory",render:function(e){return r.a.createElement("span",null,e.Factory.FctyCode)}},{title:"Date",field:"ReportDate",render:function(e){return r.a.createElement("span",null,new Date(e.ReportDate).toLocaleDateString("en-GB",{year:"numeric",month:"short",day:"numeric"}))}},{title:"Case No",field:"CaseNo"},{title:"Rev.",field:"RevisionNo"},{title:"Closed",field:"CaseStatus",render:function(e){return r.a.createElement("span",null," ",e.CaseStatus?"Yes":"No")}},{title:"Incident Category",field:"IncidentCategory",render:function(e){return r.a.createElement("span",null," ",e.IncidentCategory.Name)}},{title:"Incident Type",field:"IncidentType",render:function(e){return r.a.createElement("span",null," ",e.IncidentType.Name)}},{title:"Incident Description",field:"Info_Desc"},{title:"Location of Fire",field:"Info_Location"},{title:"Operator",field:"LastUpdatedBy"},{title:"Last Updated",field:"LastUpdatedAt",render:function(e){return r.a.createElement("span",null,void 0===e?"":new Date(e.LastUpdatedAt).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}))}}],data:[],currentDeleteData:null,newData:{},alertClass:"",alertOpen:!1,alertMessage:"",formOpen:!1,dialogOpen:!1,dialogMessage:"",disabled:!1,actionStatus:"",formState:{valid:!0,dirty:!1,errors:[]}},a.openDialog=a.openDialog.bind(Object(Pe.a)(a)),a.closeDialog=a.closeDialog.bind(Object(Pe.a)(a)),a.openForm=a.openForm.bind(Object(Pe.a)(a)),a.closeForm=a.closeForm.bind(Object(Pe.a)(a)),a.snackOpen=a.snackOpen.bind(Object(Pe.a)(a)),a.snackClose=a.snackClose.bind(Object(Pe.a)(a)),a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a.printFormData=a.printFormData.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initFireIncident()}},{key:"initFireIncident",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.awrap(pm.get("").then((function(t){!0===t.code&&e.setState({data:t.data})})));case 2:case"end":return t.stop()}}))}},{key:"handleChange",value:function(e,t){var a=this.state.newData;a[t]=e;var n=this.state.formState;n.valid=!0,n.errors.map((function(e){e.hasOwnProperty(t)&&(e[t].valid=!0)})),this.setState({newData:a,formState:n})}},{key:"snackOpen",value:function(e,t){this.setState({alertOpen:!0,alertMessage:e,alertClass:t})}},{key:"snackClose",value:function(){this.setState({alertOpen:!1,alertMessage:"",alertClass:"",currentDeleteData:null})}},{key:"printFormData",value:function(e){var t=this;pm.getOne("print/".concat(e)).then((function(e){return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:!0===e.code?Co(new Uint8Array(e.data.data),"FireIncident_".concat(new Date(Date.now()).toString("ddMMyyyy"),".pdf")):t.snackOpen("Oops. Something went wrong while processing your request!","error");case 1:case"end":return a.stop()}}))})).catch((function(e){t.snackOpen("Oops. Something went wrong while processing your request!","error")}))}},{key:"print8D",value:function(e){var t=this;Em.getOne("print/".concat(e)).then((function(e){return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:!0===e.code?Co(new Uint8Array(e.data.data),"8D_".concat(new Date(Date.now()).toString("ddMMyyyy"),".pdf")):t.snackOpen(e.message,"error");case 1:case"end":return a.stop()}}))})).catch((function(e){t.snackOpen("Oops. Something went wrong while processing your request!","error")}))}},{key:"getFormDataFromObject",value:function(e){var t=this,a=new FormData;return void 0!==e&&Object.keys(e).map((function(n,r){if("SupportDocument"===n){var o=new Array;if("Add"===t.state.actionStatus)e[n].map((function(e){o.push({Remarks:e.Remarks,DocumentName:e.Document.name}),a.append("file",e.Document)}));else{var s=(o=e[n]).filter((function(e){return void 0!==e.Document}));void 0!==s&&s.length>0&&s.map((function(e){var t=o.indexOf(e);o[t]={Remarks:e.Remarks,DocumentName:e.Document.name},a.append("file",e.Document)}))}a.set("SupportDocument",JSON.stringify(o))}else"IncidentCategory"===n?a.append("IncidentCategory",JSON.stringify(e[n])):"IncidentType"===n?a.append("IncidentType",JSON.stringify(e[n])):"Info_PossibleCause"===n?a.append("Info_PossibleCause",JSON.stringify(e[n])):a.append(n,e[n])})),a}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{style:{margin:"20px 20px 10px 0px"}},r.a.createElement(Ve.a,{title:"Fire Incident",columns:this.state.columns,data:this.state.data,components:{Toolbar:function(t){return r.a.createElement("div",null,r.a.createElement(Le.MTableToolbar,t),r.a.createElement("div",{style:{padding:"0px 15px"}},r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:function(){return e.openForm(t.rowData)},"aria-label":"add"},r.a.createElement(wt.a,null))))}},actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.data,columns:e.state.columns,fileName:"Fire Incident"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.initFireIncident()}},{icon:"edit",tooltip:"Edit",onClick:function(t,a){return e.openForm(a)}},{icon:"delete",tooltip:"Delete",onClick:function(t,a){return e.openDialog(a)}}],options:{}}),r.a.createElement(Ae.a,{fullScreen:!0,open:this.state.formOpen,onClose:this.closeForm,TransitionComponent:this.Transition},r.a.createElement(w.a,{className:"appBar"},r.a.createElement(F.a,null,r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:this.closeForm,"aria-label":"close"},r.a.createElement(Vt.a,null)),r.a.createElement(x.a,{variant:"h6",className:"app-title"},"Fire Incident"),r.a.createElement(he.a,{color:"inherit",disabled:this.state.disabled,onClick:this.onSave},"save"))),r.a.createElement(_e.a,null,r.a.createElement(Nm,{handleChange:this.handleChange,formData:this.state.newData,formState:this.state.formState}))),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:600,open:this.state.alertOpen,onClose:this.snackClose,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.closeDialog,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.closeDialog,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDelete,color:"primary"},"Delete"))))}}]),t}(r.a.Component),Pm=jm,Am={properties:{Factory:{type:"any",messages:{conform:"Factory cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},ReportDate:{type:"any",messages:{conform:"Report date cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},CaseNo:{type:"string",messages:{conform:"Case No cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},RevisionNo:{type:"number",messages:{conform:"Revision No cannot be empty."},conform:function(e){return!(""===e||void 0===e)}},CaseStatus:{type:"boolean",messages:{conform:"Case status cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},AccidentCategory:{type:"any",messages:{conform:"Accident category cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},Info_AccidentDate:{type:"any",messages:{conform:"Accident date cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},Info_AccidentType:{type:"any",messages:{conform:"Accident type cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},Info_WorkdayImpact:{type:"any",messages:{conform:"Workday impact cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}}}},Mm=a(24),_m={validateFields:function(e){return Mm.validate(e,Am,{cast:!0})},get:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="safetyIncident/"+e,a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 2:case"end":return a.stop()}}))},getOne:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("safetyIncident/").concat(e),a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 2:case"end":return a.stop()}}))},getFileBuffer:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("safetyIncident/").concat(e),a.abrupt("return",Ye(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data?{code:!0,formValid:!0,message:"Succeed",data:e.data}:200===e.status&&null===e.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 2:case"end":return a.stop()}}))},getFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("safetyIncident-filter/").concat(e),a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 2:case"end":return a.stop()}}))},update:function(e,t){return Qe("safetyIncident/"+e,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Updated",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="safetyIncident/"+e,n.abrupt("return",He(a,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Added",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,formValid:!0,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("safetyIncident/"+e).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))}},Im=_m,Rm={Factory:"",ReportDate:new Date,CaseNo:"",RevisionNo:0,CaseStatus:!1,AccidentCategory:"",Report_By:"",Report_ID:"",Report_JobTitle:"",Report_Witness:"",Report_WitnessJobTitle:"",Injure_Name:"",Injure_ID:"",Injure_Age:null,Injure_Gender:"Male",Injure_JobTitle:"",Injure_EHSStatus:!0,Injure_HiredDate:null,Injure_Department:"",Injure_Occupation:"",Info_Desc:"",Info_Location:"",Info_MachCode:"",Info_MedicalTreatment:!0,Info_WorkdayImpact:"",Info_WorkdayLoss:0,Info_AccidentDate:new Date,Info_AccidentType:"",Info_BodyPartInjured:"",Info_VectorDisease:"",Info_DisabilityCriteria:"",Info_LevelCriteria:"",Info_UnderAlcohol:"",SupportDocument:[],CreatedAt:new Date,CreatedBy:"Admin",LastUpdatedAt:new Date,LastUpdatedBy:"Admin"},Lm=(a(885),{get:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="siInjuredPart/"+e,a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 2:case"end":return a.stop()}}))},getOne:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("siInjuredPart/").concat(e),a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 2:case"end":return a.stop()}}))},getFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("siInjuredPart-filter/").concat(e),a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 2:case"end":return a.stop()}}))},update:function(e,t){return Qe("siInjuredPart/"+e,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Updated",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="siInjuredPart/"+e,n.abrupt("return",He(a,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Added",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,formValid:!0,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("siInjuredPart/"+e).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))}}),Vm=Lm,Bm=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={siInjuredPartData:[]},a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.fetchSIInjuredPartData()}},{key:"fetchSIInjuredPartData",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:Vm.get("").then((function(t){!0===t.code&&e.setState({siInjuredPartData:t.data})})).catch((function(e){throw e}));case 1:case"end":return t.stop()}}))}},{key:"renderOptions",value:function(){return this.state.siInjuredPartData.map((function(e,t){return r.a.createElement(et.a,{label:"Select Injured Part",value:e._id,key:e.Name,name:e.Name},e.Name)}))}},{key:"handleChange",value:function(e,t){var a=this.state.siInjuredPartData.find((function(t){return t._id===e}));void 0!==a&&this.props.handleChange(a,t)}},{key:"render",value:function(){var e=this;return r.a.createElement(ya.a,{style:{width:"100%"}},r.a.createElement(Ea.a,{shrink:!0,htmlFor:"siInjuredPart",error:!this.props.formControl.valid},"Injured Part"),r.a.createElement(ba.a,{id:this.props.propertyName,value:void 0===this.props.selectedValue._id?this.props.selectedValue:this.props.selectedValue._id,error:!this.props.formControl.valid,onChange:function(t){return e.handleChange(t.target.value,e.props.propertyName)},displayEmpty:!0},r.a.createElement(et.a,{value:""},r.a.createElement("em",null,"Select Injured Body Part")),this.renderOptions()),r.a.createElement(Sa.a,{error:!this.props.formControl.valid,style:{display:this.props.formControl.valid?"none":""}},this.props.formControl.valid?"":this.props.formControl.message))}}]),t}(n.Component),Um=Bm,qm=Um,Gm={get:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="siDisabilityCriteria/"+e,a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 2:case"end":return a.stop()}}))},getOne:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("siDisabilityCriteria/").concat(e),a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 2:case"end":return a.stop()}}))},getFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("siDisabilityCriteria-filter/").concat(e),a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 2:case"end":return a.stop()}}))},update:function(e,t){return Qe("siDisabilityCriteria/"+e,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Updated",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="siDisabilityCriteria/"+e,n.abrupt("return",He(a,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Added",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,formValid:!0,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("siDisabilityCriteria/"+e).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))}},Wm=Gm,Hm=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={siDisabilityCriteriaData:[]},a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){void 0!==this.props.injuredPart&&""!==this.props.injuredPart&&this.fetchSIDisabilityCriteriaData(this.props.injuredPart)}},{key:"componentDidUpdate",value:function(e){this.props.injuredPart!==e.injuredPart&&void 0!==this.props.injuredPart&&""!==this.props.injuredPart&&this.fetchSIDisabilityCriteriaData(this.props.injuredPart)}},{key:"fetchSIDisabilityCriteriaData",value:function(e){var t=this;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:Wm.getFilter("?InjuredPart=".concat(e)).then((function(e){!0===e.code&&t.setState({siDisabilityCriteriaData:e.data})})).catch((function(e){throw e}));case 1:case"end":return a.stop()}}))}},{key:"renderOptions",value:function(){return this.state.siDisabilityCriteriaData.map((function(e,t){return r.a.createElement(et.a,{label:"Residual Disability Criteria",value:e._id,key:e.Criteria,name:e.Criteria},e.Criteria)}))}},{key:"handleChange",value:function(e,t){var a=this.state.siDisabilityCriteriaData.find((function(t){return t._id===e}));void 0!==a&&this.props.handleChange(a,t)}},{key:"render",value:function(){var e=this;return r.a.createElement(ya.a,{style:{width:"100%"}},r.a.createElement(Ea.a,{shrink:!0,htmlFor:"siDisabilityCriteria",error:!this.props.formControl.valid},"Residual Disability Criteria"),r.a.createElement(ba.a,{id:this.props.propertyName,value:void 0===this.props.selectedValue._id?this.props.selectedValue:this.props.selectedValue._id,error:!this.props.formControl.valid,onChange:function(t){return e.handleChange(t.target.value,e.props.propertyName)},displayEmpty:!0},r.a.createElement(et.a,{value:""},r.a.createElement("em",null,"Select Disability Criteria")),this.renderOptions()),r.a.createElement(Sa.a,{error:!this.props.formControl.valid,style:{display:this.props.formControl.valid?"none":""}},this.props.formControl.valid?"":this.props.formControl.message))}}]),t}(n.Component),Qm=Hm,zm=Qm,Ym=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={data:void 0===a.props.data?[]:a.props.data},a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){void 0!==this.props.disabilityCriteria&&this.fetchSIAccidentLevelData(this.props.disabilityCriteria)}},{key:"componentDidUpdate",value:function(e){this.props.disabilityCriteria!==e.disabilityCriteria&&void 0!==this.props.disabilityCriteria&&this.fetchSIAccidentLevelData(this.props.disabilityCriteria)}},{key:"fetchSIAccidentLevelData",value:function(e){var t=this;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:Wm.getOne(e).then((function(e){!0===e.code&&t.setState({data:e.data.RelatedAccidentLevel})})).catch((function(e){throw e}));case 1:case"end":return a.stop()}}))}},{key:"renderOptions",value:function(){return this.state.data.map((function(e,t){return r.a.createElement(et.a,{label:"Accident Level Criteria",value:e._id,key:e.Criteria,name:e.Criteria},e.Criteria)}))}},{key:"handleChange",value:function(e,t){var a=this.state.data.find((function(t){return t._id===e}));void 0!==a&&this.props.handleChange(a,t)}},{key:"render",value:function(){var e=this;return r.a.createElement(ya.a,{style:{width:"100%"}},r.a.createElement(Ea.a,{shrink:!0,htmlFor:"siAccidentLevel",error:!this.props.formControl.valid},"Accident Level Criteria"),r.a.createElement(ba.a,{id:this.props.propertyName,value:void 0===this.props.selectedValue._id?this.props.selectedValue:this.props.selectedValue._id,error:!this.props.formControl.valid,onChange:function(t){return e.handleChange(t.target.value,e.props.propertyName)},displayEmpty:!0},r.a.createElement(et.a,{value:""},r.a.createElement("em",null,"Select Accident Level Criteria")),this.renderOptions()),r.a.createElement(Sa.a,{error:!this.props.formControl.valid,style:{display:this.props.formControl.valid?"none":""}},this.props.formControl.valid?"":this.props.formControl.message))}}]),t}(n.Component),Km=Ym,Jm=Km,Zm=a(23),Xm=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).snackOpen=function(e,t,n){var r;return l.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(void 0===e||null===e||void 0===t||null===t){o.next=11;break}if(void 0!==n){o.next=7;break}return o.next=4,l.a.awrap(ka(e,t));case 4:r=o.sent,o.next=8;break;case 7:r=n;case 8:a.setState({snackOpen:!a.state.snackOpen,snackMessage:r,snackClass:e}),o.next=12;break;case 11:a.setState({snackOpen:!1});case 12:case"end":return o.stop()}}))},a.updateSupportDoc=function(e,t){if(void 0!==t&&void 0!==e){var n=a.state.supportDoc;n[t]=e,a.setState({supportDoc:n}),a.props.handleChange(n,"SupportDocument")}},a.addSupportDoc=function(e){if(void 0!==e){var t=a.state.supportDoc;t.push(e),a.setState({supportDoc:t}),a.props.handleChange(t,"SupportDocument")}},a.deleteSupportDoc=function(e){void 0!==e&&null!==e&&(a.setState({supportDoc:e}),a.props.handleChange(e,"SupportDocument"))},a.state={formControls:{Factory:{valid:!0,message:"",value:a.props.formData.Factory},ReportDate:{valid:!0,message:"",value:a.props.formData.ReportDate},CaseNo:{valid:!0,message:"",value:a.props.formData.CaseNo},RevisionNo:{valid:!0,message:"",value:a.props.formData.RevisionNo},CaseStatus:{valid:!0,message:"",value:a.props.formData.CaseStatus},AccidentCategory:{valid:!0,message:"",value:a.props.formData.AccidentCategory},Report_By:{valid:!0,message:"",value:a.props.formData.Report_By},Report_ID:{valid:!0,message:"",value:a.props.formData.Report_ID},Report_JobTitle:{valid:!0,message:"",value:a.props.formData.Report_JobTitle},Report_Witness:{valid:!0,message:"",value:a.props.formData.Report_Witness},Report_WitnessJobTitle:{valid:!0,message:"",value:a.props.formData.Report_WitnessJobTitle},Injure_Name:{valid:!0,message:"",value:a.props.formData.Injure_Name},Injure_ID:{valid:!0,message:"",value:a.props.formData.Injure_ID},Injure_Age:{valid:!0,message:"",value:a.props.formData.Injure_Age},Injure_JobTitle:{valid:!0,message:"",value:a.props.formData.Injure_JobTitle},Injure_Gender:{valid:!0,message:"",value:a.props.formData.Injure_Gender},Injure_EHSStatus:{valid:!0,message:"",value:a.props.formData.Injure_EHSStatus},Injure_HiredDate:{valid:!0,message:"",value:a.props.formData.Injure_HiredDate},Injure_Department:{valid:!0,message:"",value:a.props.formData.Injure_Department},Injure_Occupation:{valid:!0,message:"",value:a.props.formData.Injure_Occupation},Info_Desc:{valid:!0,message:"",value:a.props.formData.Info_Desc},Info_Location:{valid:!0,message:"",value:a.props.formData.Info_Location},Info_MachCode:{valid:!0,message:"",value:a.props.formData.Info_MachCode},Info_MedicalTreatment:{valid:!0,message:"",value:a.props.formData.Info_MedicalTreatment},Info_WorkdayImpact:{valid:!0,message:"",value:a.props.formData.Info_WorkdayImpact},Info_WorkdayLoss:{valid:!0,message:"",value:a.props.formData.Info_WorkdayLoss},Info_AccidentDate:{valid:!0,message:"",value:a.props.formData.Info_AccidentDate},Info_AccidentType:{valid:!0,message:"",value:a.props.formData.Info_AccidentType},Info_BodyPartInjured:{valid:!0,message:"",value:null===a.props.formData.Info_BodyPartInjured?"":a.props.formData.Info_BodyPartInjured},Info_DisabilityCriteria:{valid:!0,message:"",value:null===a.props.formData.Info_DisabilityCriteria?"":a.props.formData.Info_DisabilityCriteria},Info_LevelCriteria:{valid:!0,message:"",value:null===a.props.formData.Info_LevelCriteria?"":a.props.formData.Info_LevelCriteria},Info_UnderAlcohol:{valid:!0,message:"",value:null===a.props.formData.Info_UnderAlcohol?"":a.props.formData.Info_UnderAlcohol},Info_VectorDisease:{valid:!0,message:"",value:null===a.props.formData.Info_VectorDisease?"":a.props.formData.Info_VectorDisease},SupportDocument:{valid:!0,message:"",value:a.props.formData.SupportDocument}},accidentCategory:[],accidentType:[],accidentImpact:[],supportDoc:a.props.formData.SupportDocument,eightDFormOpen:!1,eightDFormAction:"",eightDFormData:"",snackOpen:!1,snackMessage:{valid:!0,message:""},snackClass:""},a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a.updateSupportDoc=a.updateSupportDoc.bind(Object(Pe.a)(a)),a.addSupportDoc=a.addSupportDoc.bind(Object(Pe.a)(a)),a.deleteSupportDoc=a.deleteSupportDoc.bind(Object(Pe.a)(a)),a.EightDModel=Zm(Fm),a.closeEightDForm=a.closeEightDForm.bind(Object(Pe.a)(a)),a.onEightDSuccess=a.onEightDSuccess.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initEightReport()}},{key:"initEightReport",value:function(){var e=this;Em.getFilter("?RefNumber=".concat(this.state.formControls.CaseNo.value)).then((function(t){!0===t.code&&t.data.length>0&&e.setState({eightDFormData:t.data[0]})}))}},{key:"openEightDForm",value:function(){var e=Object(me.a)({},this.state.formData),t=Object(me.a)({},this.state.formControl),a=Im.validateFields(e);if(!a.valid)return a.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),this.setState({formControl:t}),void this.snackOpen("error","alertValidation");var n=Object(me.a)({},this.state.eightDFormData),r="";""===this.state.eightDFormData?((n=this.EightDModel).Factory=this.state.formControls.Factory.value,n.Category="Safety",n.RefNumber=this.state.formControls.CaseNo.value,n.EightDNumber="8D-"+this.state.formControls.CaseNo.value,r="Add"):r="update",this.setState({eightDFormData:n,eightDFormOpen:!0,eightDFormAction:r})}},{key:"closeEightDForm",value:function(){this.setState({eightDFormOpen:!1,eightDFormAction:""})}},{key:"onEightDSuccess",value:function(e){var t=this;void 0!==e&&null!==e?"Add"===this.state.eightDFormAction?this.setState({eightDFormData:e,eightDFormOpen:!1,eightDFormAction:""},(function(){return t.snackOpen("success","add")})):this.setState({eightDFormData:e,eightDFormOpen:!1,eightDFormAction:""},(function(){return t.snackOpen("success","update")})):this.snackOpen("error","server")}},{key:"handleChange",value:function(e,t,a){var n=Object(me.a)({},this.state.formControls),r=Object(me.a)({},this.state.formState);!a||void 0!==e&&0!==e.length?(n[t].valid=!0,n[t].message=""):(n[t].valid=!1,n[t].message="".concat(t," cannot be empty.")),n[t].value=e,this.props.handleChange(e,t),"Info_AccidentType"===t&&(n.Info_BodyPartInjured.value="",n.Info_VectorDisease.value="",n.Info_DisabilityCriteria.value="",n.Info_LevelCriteria.value="",n.Info_UnderAlcohol.value=""),"Info_BodyPartInjured"===t&&(n.Info_DisabilityCriteria.value="",n.Info_LevelCriteria.value=""),"Info_DisabilityCriteria"===t&&(n.Info_LevelCriteria.value=""),"Info_WorkdayImpact"===t&&(n.Info_WorkdayLoss.value=0),r.dirty=!0,this.setState({formControls:n,formState:r})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"form-container"},r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-evenly",alignItems:"center",md:10,xs:12,sm:12,xl:10,lg:10},r.a.createElement(be.a,{container:!0,direction:"row",justify:"space-around",alignItems:"center",spacing:1},r.a.createElement(be.a,{item:!0,container:!0,md:5,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:7}},r.a.createElement(Hr,{handleChange:this.handleChange,formControl:this.state.formControls.Factory,propertyName:"Factory",selectedValue:this.state.formControls.Factory.value,required:!0}))),r.a.createElement(be.a,{item:!0,container:!0,md:5,xs:12,sm:12},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Da.b,{style:{width:"100%",margin:7},margin:"dense",id:"date-picker-dialog",label:"Report Date*",format:"dd-MMM-yyyy",value:this.state.formControls.ReportDate.value,onChange:function(t){return e.handleChange(t,"ReportDate")},disableFuture:!0}))),r.a.createElement(be.a,{item:!0,container:!0,md:5,xs:12,sm:12,justify:"space-between"},r.a.createElement(be.a,{item:!0,xs:9},r.a.createElement(ya.a,{style:{width:"100%",margin:7}},r.a.createElement(ge.a,{id:"txtCaseNumber",label:"Case Number",required:!0,error:!this.state.formControls.CaseNo.valid,helperText:this.state.formControls.CaseNo.message,defaultValue:this.state.formControls.CaseNo.value,onChange:function(t){return e.handleChange(t.target.value.trim(),"CaseNo",!0)},margin:"dense"}))),r.a.createElement(be.a,{item:!0,xs:2},r.a.createElement(ya.a,{style:{margin:7}},r.a.createElement(ge.a,{id:"txtRevNo",label:"Rev. ",defaultValue:this.state.formControls.RevisionNo.value,margin:"dense",InputProps:{readOnly:!0}})))),r.a.createElement(be.a,{item:!0,container:!0,md:5,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:7}},r.a.createElement(Ea.a,{shrink:!0,htmlFor:"ddlCaseStatus",required:!0},"Case Status"),r.a.createElement(ba.a,{id:"ddlCaseStatus",value:this.state.formControls.CaseStatus.value,onChange:function(t){return e.handleChange(t.target.value,"CaseStatus",!0)}},r.a.createElement(et.a,{value:!1},"Open"),r.a.createElement(et.a,{value:!0},"Closed")))),r.a.createElement(be.a,{item:!0,container:!0,md:5,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:7}},r.a.createElement(xa,{jsonFileName:"safetyIncident",jsonPropertyName:"AccidentCategory",formControl:this.state.formControls.AccidentCategory,propertyName:"AccidentCategory",required:!0,label:"Accident Category",handleChange:function(t){return e.handleChange(t,"AccidentCategory")},selectedValue:void 0===this.state.formControls.AccidentCategory.value?"":this.state.formControls.AccidentCategory.value.Value}))),r.a.createElement(be.a,{item:!0,container:!0,md:5,xs:12,sm:12})),r.a.createElement(be.a,{container:!0,item:!0,style:{marginTop:25},direction:"row",justify:"space-around",alignItems:"center",spacing:1,md:11,xs:12,sm:12},r.a.createElement(bn,{label:"Particulars of reporting person",style:{width:"100%"}},r.a.createElement(be.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center"},r.a.createElement(be.a,{item:!0,container:!0,md:5,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(ge.a,{id:"txtReportBy",label:"Reported By",defaultValue:this.state.formControls.Report_By.value,onChange:function(t){return e.handleChange(t.target.value,"Report_By")}}))),r.a.createElement(be.a,{item:!0,container:!0,md:5,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(ge.a,{id:"txtReportID",label:"Identification Number",defaultValue:this.state.formControls.Report_ID.value,onChange:function(t){return e.handleChange(t.target.value,"Report_ID")}}))),r.a.createElement(be.a,{item:!0,container:!0,md:5,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(ge.a,{id:"txtReportJobTitle",label:"Job Title",defaultValue:this.state.formControls.Report_JobTitle.value,onChange:function(t){return e.handleChange(t.target.value,"Report_JobTitle")}}))),r.a.createElement(be.a,{item:!0,container:!0,md:5,xs:12,sm:12}),r.a.createElement(be.a,{item:!0,container:!0,md:5,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(ge.a,{id:"txtReportWitness",label:"Name of witness (if applicable)",defaultValue:this.state.formControls.Report_Witness.value,onChange:function(t){return e.handleChange(t.target.value,"Report_Witness")}}))),r.a.createElement(be.a,{item:!0,container:!0,md:5,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(ge.a,{id:"txtReportWitnessJobTitle",label:"Witness Job Title",defaultValue:this.state.formControls.Report_WitnessJobTitle.value,onChange:function(t){return e.handleChange(t.target.value,"Report_WitnessJobTitle")}})))))),r.a.createElement(be.a,{container:!0,item:!0,style:{marginTop:25},direction:"row",justify:"space-around",alignItems:"center",spacing:1,md:11,xs:12,sm:12},r.a.createElement(bn,{label:"Particulars of Injured person",style:{width:"100%"}},r.a.createElement(be.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center"},r.a.createElement(be.a,{item:!0,container:!0,md:5,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(ge.a,{id:"txtInjureName",label:"Name",defaultValue:this.state.formControls.Injure_Name.value,onChange:function(t){return e.handleChange(t.target.value,"Injure_Name")}}))),r.a.createElement(be.a,{item:!0,container:!0,md:5,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(ge.a,{id:"txtInjureID",label:"Identification Number",defaultValue:this.state.formControls.Injure_ID.value,onChange:function(t){return e.handleChange(t.target.value,"Injure_ID")}}))),r.a.createElement(be.a,{item:!0,container:!0,md:5,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(ge.a,{id:"txtInjureAge",label:"Age",defaultValue:this.state.formControls.Injure_Age.value,onChange:function(t){return e.handleChange(t.target.value,"Injure_Age")},type:"number"}))),r.a.createElement(be.a,{item:!0,container:!0,md:5,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%"}},r.a.createElement(Ea.a,{shrink:!0},"Gender"),r.a.createElement(ba.a,{id:"Injure_Gender",value:this.state.formControls.Injure_Gender.value,onChange:function(t){return e.handleChange(t.target.value,"Injure_Gender")},displayEmpty:!0},r.a.createElement(et.a,{value:"Male"},"Male"),r.a.createElement(et.a,{value:"Female"},"Female")))),r.a.createElement(be.a,{item:!0,container:!0,md:5,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(ge.a,{id:"txtInjureobTitle",label:"Job Title",defaultValue:this.state.formControls.Injure_JobTitle.value,onChange:function(t){return e.handleChange(t.target.value,"Injure_JobTitle")}}))),r.a.createElement(be.a,{item:!0,container:!0,md:5,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%"}},r.a.createElement(Ea.a,{shrink:!0,htmlFor:"ddlEHSStatus",required:!0},"EHS Training Status"),r.a.createElement(ba.a,{id:"ddlCaseStatus",value:this.state.formControls.Injure_EHSStatus.value,onChange:function(t){return e.handleChange(t.target.value,"Injure_EHSStatus",!0)}},r.a.createElement(et.a,{value:!0},"Completed"),r.a.createElement(et.a,{value:!1},"Not Completed")))),r.a.createElement(be.a,{item:!0,container:!0,md:5,xs:12,sm:12},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Da.b,{style:{width:"100%"},margin:"dense",id:"date-picker-dialog",label:"Date Employment",format:"dd-MMM-yyyy",value:this.state.formControls.Injure_HiredDate.value,onChange:function(t){return e.handleChange(t,"Injure_HiredDate")},disableFuture:!0}))),r.a.createElement(be.a,{item:!0,container:!0,md:5,xs:12,sm:12}),r.a.createElement(be.a,{item:!0,container:!0,md:5,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(ge.a,{id:"txtInjureDepartment",label:"Department",defaultValue:this.state.formControls.Injure_Department.value,onChange:function(t){return e.handleChange(t.target.value,"Injure_Department")}}))),r.a.createElement(be.a,{item:!0,container:!0,md:5,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(ge.a,{id:"txtInjureOccupation",label:"Occupation",defaultValue:this.state.formControls.Injure_Occupation.value,onChange:function(t){return e.handleChange(t.target.value,"Injure_Occupation")}})))))),r.a.createElement(be.a,{item:!0,container:!0,style:{marginTop:25},direction:"row",justify:"space-around",alignItems:"center",spacing:1,md:11,xs:12,sm:12},r.a.createElement(bn,{label:"Accident Information",style:{width:"100%"}},r.a.createElement(be.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center"},r.a.createElement(be.a,{item:!0,container:!0,md:12,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(ge.a,{id:"txtInfoDesc",label:"Accident Description (4W1H)",defaultValue:this.state.formControls.Info_Desc.value,onChange:function(t){return e.handleChange(t.target.value,"Info_Desc")},multiline:!0,rows:2}))),r.a.createElement(be.a,{item:!0,container:!0,md:5,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(ge.a,{id:"txtLocation",label:"Accident Location",defaultValue:this.state.formControls.Info_Location.value,onChange:function(t){return e.handleChange(t.target.value,"Info_Location")}}))),r.a.createElement(be.a,{item:!0,container:!0,md:5,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(ge.a,{id:"txtMachCode",label:"Closest Machine Code",defaultValue:this.state.formControls.Info_MachCode.value,onChange:function(t){return e.handleChange(t.target.value,"Info_MachCode")}}))),r.a.createElement(be.a,{item:!0,container:!0,md:5,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(Ea.a,{shrink:!0,htmlFor:"ddlEHSStatus",required:!0},"Medical Treatment"),r.a.createElement(ba.a,{id:"ddlMedicalTreatment",value:this.state.formControls.Info_MedicalTreatment.value,onChange:function(t){return e.handleChange(t.target.value,"Info_MedicalTreatment",!0)}},r.a.createElement(et.a,{value:!0},"Yes"),r.a.createElement(et.a,{value:!1},"No")))),r.a.createElement(be.a,{item:!0,container:!0,md:5,xs:12,justify:"space-between"},r.a.createElement(be.a,{item:!0,xs:12,sm:8},r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(xa,{jsonFileName:"safetyIncident",jsonPropertyName:"AccidentImpact",formControl:this.state.formControls.Info_WorkdayImpact,propertyName:"Info_WorkdayImpact",required:!0,label:"Accident Impact on Workday",handleChange:function(t){return e.handleChange(t,"Info_WorkdayImpact")},selectedValue:void 0===this.state.formControls.Info_WorkdayImpact.value?"":this.state.formControls.Info_WorkdayImpact.value.Value}))),r.a.createElement(be.a,{item:!0,xs:12,sm:3},void 0!==this.state.formControls.Info_WorkdayImpact.value&&2===this.state.formControls.Info_WorkdayImpact.value.Value?r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(ge.a,{id:"txtWorkdayLoss",label:"Lost workdays",defaultValue:this.state.formControls.Info_WorkdayLoss.value,onChange:function(t){return e.handleChange(t.target.value,"Info_WorkdayLoss")},type:"number"})):r.a.createElement("div",null)),r.a.createElement(be.a,{item:!0,xs:12,sm:6},void 0!==this.state.formControls.Info_WorkdayImpact.value&&3===this.state.formControls.Info_WorkdayImpact.value.Value||this.state.formControls.Info_WorkdayLoss.value>8?r.a.createElement("b",{style:{color:"red"}},"Please initiate 8D Report"):r.a.createElement("div",null))),r.a.createElement(be.a,{item:!0,container:!0,md:5,xs:12,sm:12},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Ac.b,{required:!0,style:{width:"100%"},margin:"dense",id:"date-picker-dialog",label:"Accident Date",format:"dd-MMM-yyyy hh:mm",value:this.state.formControls.Info_AccidentDate.value,onChange:function(t){return e.handleChange(t,"Info_AccidentDate")},disableFuture:!0}))),r.a.createElement(be.a,{item:!0,container:!0,md:5,xs:12,sm:12}),r.a.createElement(be.a,{item:!0,container:!0,md:5,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(xa,{jsonFileName:"safetyIncident",jsonPropertyName:"AccidentType",formControl:this.state.formControls.Info_AccidentType,propertyName:"Info_AccidentType",required:!0,label:"Accident Type",handleChange:function(t){return e.handleChange(t,"Info_AccidentType")},selectedValue:void 0===this.state.formControls.Info_AccidentType.value?"":this.state.formControls.Info_AccidentType.value.Value}))),r.a.createElement(be.a,{item:!0,container:!0,md:5,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",display:void 0!==this.state.formControls.Info_AccidentType.value&&2===this.state.formControls.Info_AccidentType.value.Value?"":"none"},margin:"dense"},r.a.createElement(Ea.a,{shrink:!0,htmlFor:"ddlUnderAlcohol"},"Under Alcohol Influence"),r.a.createElement(ba.a,{id:"ddlUnderAlcohol",value:this.state.formControls.Info_UnderAlcohol.value,onChange:function(t){return e.handleChange(t.target.value,"Info_UnderAlcohol")},displayEmpty:!0},r.a.createElement(et.a,{value:""},"N/A"),r.a.createElement(et.a,{value:!0},"Yes"),r.a.createElement(et.a,{value:!1},"No")))),r.a.createElement(be.a,{item:!0,container:!0,justify:"space-between",xs:12,style:{display:[1,2].includes(void 0!==this.state.formControls.Info_AccidentType.value&&this.state.formControls.Info_AccidentType.value.Value)?"":"none"}},r.a.createElement(be.a,{item:!0,container:!0,md:5,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(qm,{handleChange:this.handleChange,formControl:this.state.formControls.Info_BodyPartInjured,propertyName:"Info_BodyPartInjured",selectedValue:this.state.formControls.Info_BodyPartInjured.value}))),r.a.createElement(be.a,{item:!0,container:!0,md:5,xs:12,sm:12}),r.a.createElement(be.a,{item:!0,container:!0,md:5,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(zm,{handleChange:this.handleChange,formControl:this.state.formControls.Info_DisabilityCriteria,propertyName:"Info_DisabilityCriteria",selectedValue:this.state.formControls.Info_DisabilityCriteria.value,injuredPart:this.state.formControls.Info_BodyPartInjured.value._id}))),r.a.createElement(be.a,{item:!0,container:!0,md:5,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(ge.a,{label:"Residual Disability Grade",value:""===this.state.formControls.Info_DisabilityCriteria.value?0:this.state.formControls.Info_DisabilityCriteria.value.Grade,InputProps:{readOnly:!0}}))),r.a.createElement(be.a,{item:!0,container:!0,md:5,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(Jm,{handleChange:this.handleChange,formControl:this.state.formControls.Info_LevelCriteria,propertyName:"Info_LevelCriteria",selectedValue:this.state.formControls.Info_LevelCriteria.value,disabilityCriteria:this.state.formControls.Info_DisabilityCriteria.value._id}))),r.a.createElement(be.a,{item:!0,container:!0,md:5,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(ge.a,{label:"Accident Severity Level",value:null===this.state.formControls.Info_LevelCriteria.value||""===this.state.formControls.Info_LevelCriteria.value?"":this.state.formControls.Info_LevelCriteria.value.SeverityLevel,InputProps:{readOnly:!0}})))),r.a.createElement(be.a,{item:!0,container:!0,md:5,xs:12,sm:12,style:{display:3===this.state.formControls.Info_AccidentType.value?"":"none"}},r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(Ea.a,{shrink:!0,htmlFor:"ddlVectorDisease"},"Vector Bourne Disease (Malaria/Dengue)"),r.a.createElement(ba.a,{id:"ddlUnderAlcohol",value:this.state.formControls.Info_UnderAlcohol.value,onChange:function(t){return e.handleChange(t.target.value,"Info_UnderAlcohol")},displayEmpty:!0},r.a.createElement(et.a,{value:""},"N/A"),r.a.createElement(et.a,{value:!0},"Yes"),r.a.createElement(et.a,{value:!1},"No"))))))),r.a.createElement(be.a,{container:!0,item:!0,style:{marginTop:25},direction:"row",justify:"space-around",alignItems:"center",spacing:1,md:11,xs:12,sm:12},r.a.createElement(bn,{label:"QPR Analysis",style:{width:"100%"}},r.a.createElement(be.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center",spacing:3,style:{margin:10}},r.a.createElement(be.a,{item:!0,md:1,xs:1,sm:1},r.a.createElement(he.a,{onClick:function(){return e.openEightDForm()},variant:"contained"},"8D")),r.a.createElement(be.a,{item:!0,md:5,xs:5,sm:5},r.a.createElement(ya.a,{style:{width:"100%"}},r.a.createElement(ge.a,{label:"Report #",value:void 0===this.state.eightDFormData.EightDNumber?"":this.state.eightDFormData.EightDNumber,inputProps:{readOnly:!0}}))),r.a.createElement(be.a,{item:!0,md:3,xs:3,sm:3},r.a.createElement(ya.a,{style:{width:"100%"}},r.a.createElement(ge.a,{label:"Rev",value:void 0===this.state.eightDFormData.RevisionNo?"":this.state.eightDFormData.RevisionNo,inputProps:{readOnly:!0}}))),r.a.createElement(be.a,{item:!0,md:3,xs:3,sm:3},r.a.createElement(ye.a,{control:r.a.createElement(ve.a,{checked:!0===this.state.eightDFormData.Closed,value:!0===this.state.eightDFormData.Closed,disabled:!0,color:"primary"}),label:"Done"}))))),r.a.createElement(be.a,{container:!0,direction:"row",justify:"space-around",alignItems:"center",spacing:1,md:11,xs:12,sm:12},r.a.createElement(tu,{parentName:"SafetyIncident",parentId:this.props.formData._id,formData:this.state.formControls.SupportDocument.value,updateSupportDoc:this.updateSupportDoc,addSupportDoc:this.addSupportDoc,deleteSupportDoc:this.deleteSupportDoc}))),r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-evenly",alignItems:"center",md:10,xs:12,sm:12,xl:10,lg:10},this.state.eightDFormOpen?r.a.createElement(wm,{formData:this.state.eightDFormData,formAction:this.state.eightDFormAction,formOpen:this.state.eightDFormOpen,onSuccess:this.onEightDSuccess,closeForm:this.closeEightDForm}):""),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.snackClass,autoHideDuration:600,open:this.state.snackOpen,onClose:this.snackOpen,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.snackMessage)}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=t.formControls;return e.formState.valid||Array.isArray(e.formState.errors)&&e.formState.errors.map((function(e){a[e.property].valid=!1,a[e.property].message=e.message})),{formState:e.formState,formControls:a}}}]),t}(r.a.Component),$m=Xm,ep=$m,tp=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).openDialog=function(e){a.setState({dialogOpen:!0,currentDeleteData:e,dialogMessage:r.a.createElement("span",null,"Are you sure to delete this record ",r.a.createElement("b",null,e.CaseNo)," ? This cannot be undone.")})},a.closeDialog=function(){a.setState({dialogOpen:!1,currentDeleteData:null,dialogMessage:""})},a.openForm=function(e){var t=Object(me.a)({},Rm);void 0===e?a.setState({formOpen:!0,actionStatus:"Add",newData:Object(me.a)({},t)}):a.setState({formOpen:!0,actionStatus:"Update",newData:e})},a.closeForm=function(){a.setState({formOpen:!1,newData:{},actionStatus:"",formState:{valid:!0,dirty:!1,errors:[]}})},a.onSave=function(){var e=a.state.formState,t=Object(me.a)({},a.state.newData);"object"===typeof t.Factory&&(t.Factory=t.Factory._id),"object"===typeof t.Info_BodyPartInjured&&null!==t.Info_BodyPartInjured&&(t.Info_BodyPartInjured=t.Info_BodyPartInjured._id),"object"===typeof t.Info_DisabilityCriteria&&null!==t.Info_DisabilityCriteria&&(t.Info_DisabilityCriteria=t.Info_DisabilityCriteria._id),"object"===typeof t.Info_LevelCriteria&&null!==t.Info_LevelCriteria&&(t.Info_LevelCriteria=t.Info_LevelCriteria._id);var n=Im.validateFields(t);if(n.valid){var r=Object(je.a)(a.state.data),o=a.getFormDataFromObject(t);if("Add"===a.state.actionStatus)Im.add("",o).then((function(t){!0===t.code?(e.valid=!0,r.push(t.data),a.setState({data:r}),a.closeForm(),a.snackOpen("Successfully added!","success")):(e.valid=!1,e.errors=t.errors,a.snackOpen("Please fix the error(s) highlighted to save the details!","error"))})).catch((function(e){a.snackOpen("Oops, something went wrong while processing your request!","error")}));else{var s=Object(je.a)(a.state.data),i=s.find((function(e){return e._id===t._id})),l=s.indexOf(i);Im.update("",o).then((function(t){!0===t.code?(e.valid=!0,s[l]=t.data,a.setState({data:s}),a.closeForm(),a.snackOpen("Successfully Updated!","success")):(e.valid=!1,e.errors=t.errors,a.snackOpen("Please fix the error(s) highlighted to save the details!","error"))})).catch((function(e){a.snackOpen("Oops, something went wrong while processing your request!","error")}))}}else{e.valid=!1;var c=n.errors.map((function(e){var t={};return t.property=e.property,t.message=e.message,t}));e.errors=c,a.snackOpen("Please fix the error(s) highlighted to save the details!","error")}a.setState({formState:e})},a.onDelete=function(){null!==a.state.currentDeleteData&&Im.delete("".concat(a.state.currentDeleteData._id)).then((function(e){if(!0===e.code){var t=Object(je.a)(a.state.data),n=t.find((function(e){return e._id===a.state.currentDeleteData._id})),r=t.indexOf(n);t.splice(r,1),a.closeDialog(),a.snackOpen("Successfully Deleted!","success"),a.setState({data:t})}else a.snackOpen("Oops, something went wrong while processing your request!","error")}))},a.onEdit=function(e){a.openForm(e)},a.state={columns:[{title:"Print Safety Log",field:"_id",render:function(e){return r.a.createElement(bt.a,{"aria-label":"Print",className:"",onClick:function(){return a.printFormData(e._id)}},r.a.createElement(ao.a,{fontSize:"inherit"}))}},{title:"Print 8D",field:"_id",render:function(e){return r.a.createElement(bt.a,{"aria-label":"Print",className:"",onClick:function(){return a.print8D(e.CaseNo)}},r.a.createElement(ao.a,{fontSize:"inherit"}))}},{title:"Factory",field:"Factory",render:function(e){return r.a.createElement("span",null,e.Factory.FctyCode)}},{title:"Date",field:"ReportDate",render:function(e){return r.a.createElement("span",null,new Date(e.ReportDate).toLocaleDateString("en-GB",{year:"numeric",month:"short",day:"numeric"}))}},{title:"Case No",field:"CaseNo"},{title:"Rev.",field:"RevisionNo"},{title:"Closed",field:"CaseStatus",render:function(e){return r.a.createElement("span",null," ",e.CaseStatus?"Yes":"No")}},{title:"Accident Category",field:"AccidentCategory",render:function(e){return r.a.createElement("span",null," ",e.AccidentCategory.Name)}},{title:"Accident Description",field:"Info_Desc"},{title:"Accident Location",field:"Info_Location"},{title:"Operator",field:"LastUpdatedBy"},{title:"Last Updated",field:"LastUpdatedAt",render:function(e){return r.a.createElement("span",null,void 0===e?"":new Date(e.LastUpdatedAt).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}))}}],data:[],currentDeleteData:null,newData:{},alertClass:"",alertOpen:!1,alertMessage:"",formOpen:!1,dialogOpen:!1,dialogMessage:"",disabled:!1,actionStatus:"",formState:{valid:!0,dirty:!1,errors:[]}},a.openDialog=a.openDialog.bind(Object(Pe.a)(a)),a.closeDialog=a.closeDialog.bind(Object(Pe.a)(a)),a.openForm=a.openForm.bind(Object(Pe.a)(a)),a.closeForm=a.closeForm.bind(Object(Pe.a)(a)),a.snackOpen=a.snackOpen.bind(Object(Pe.a)(a)),a.snackClose=a.snackClose.bind(Object(Pe.a)(a)),a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a.printFormData=a.printFormData.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initSafetyIncident()}},{key:"initSafetyIncident",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.awrap(Im.get("").then((function(t){!0===t.code&&e.setState({data:t.data})})));case 2:case"end":return t.stop()}}))}},{key:"handleChange",value:function(e,t){var a=this.state.newData;a[t]=e;var n=this.state.formState;n.valid=!0,n.errors.map((function(e){e.hasOwnProperty(t)&&(e[t].valid=!0)})),"Info_AccidentType"===t&&(a.Info_BodyPartInjured="",a.Info_VectorDisease="",a.Info_DisabilityCriteria="",a.Info_LevelCriteria="",a.Info_UnderAlcohol=""),"Info_BodyPartInjured"===t&&(a.Info_DisabilityCriteria="",a.Info_LevelCriteria=""),"Info_DisabilityCriteria"===t&&(a.Info_LevelCriteria=""),this.setState({newData:a,formState:n})}},{key:"snackOpen",value:function(e,t){this.setState({alertOpen:!0,alertMessage:e,alertClass:t})}},{key:"snackClose",value:function(){this.setState({alertOpen:!1,alertMessage:"",alertClass:"",currentDeleteData:null})}},{key:"printFormData",value:function(e){var t=this;Im.getOne("print/".concat(e)).then((function(e){return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:!0===e.code?Co(new Uint8Array(e.data.data),"SafetyIncident_".concat(new Date(Date.now()).toString("ddMMyyyy"),".pdf")):t.snackOpen("Oops. Something went wrong while processing your request!","error");case 1:case"end":return a.stop()}}))})).catch((function(e){t.snackOpen("Oops. Something went wrong while processing your request!","error")}))}},{key:"print8D",value:function(e){var t=this;Em.getOne("print/".concat(e)).then((function(e){return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:!0===e.code?Co(new Uint8Array(e.data.data),"8D_".concat(new Date(Date.now()).toString("ddMMyyyy"),".pdf")):t.snackOpen(e.message,"error");case 1:case"end":return a.stop()}}))})).catch((function(e){t.snackOpen("Oops. Something went wrong while processing your request!","error")}))}},{key:"getFormDataFromObject",value:function(e){var t=this,a=new FormData;return void 0!==e&&Object.keys(e).map((function(n,r){if("SupportDocument"===n){var o=new Array;if("Add"===t.state.actionStatus)e[n].map((function(e){o.push({Remarks:e.Remarks,DocumentName:e.Document.name}),a.append("file",e.Document)}));else{var s=(o=e[n]).filter((function(e){return void 0!==e.Document}));void 0!==s&&s.length>0&&s.map((function(e){var t=o.indexOf(e);o[t]={Remarks:e.Remarks,DocumentName:e.Document.name},a.append("file",e.Document)}))}a.set("SupportDocument",JSON.stringify(o))}else"AccidentCategory"===n?a.append("AccidentCategory",JSON.stringify(e[n])):"Info_WorkdayImpact"===n?a.append("Info_WorkdayImpact",JSON.stringify(e[n])):"Info_AccidentType"===n?a.append("Info_AccidentType",JSON.stringify(e[n])):a.append(n,e[n])})),a}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{style:{margin:"20px 20px 10px 0px"}},r.a.createElement(Ve.a,{title:"Safety Incident",columns:this.state.columns,data:this.state.data,components:{Toolbar:function(t){return r.a.createElement("div",null,r.a.createElement(Le.MTableToolbar,t),r.a.createElement("div",{style:{padding:"0px 15px"}},r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:function(){return e.openForm(t.rowData)},"aria-label":"add"},r.a.createElement(wt.a,null))))}},actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.data,columns:e.state.columns,fileName:"Safety Incident"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.initSafetyIncident()}},{icon:"edit",tooltip:"Edit",onClick:function(t,a){return e.openForm(a)}},{icon:"delete",tooltip:"Delete",onClick:function(t,a){return e.openDialog(a)}}],options:{}}),r.a.createElement(Ae.a,{fullScreen:!0,open:this.state.formOpen,onClose:this.closeForm,TransitionComponent:this.Transition},r.a.createElement(w.a,{className:"appBar"},r.a.createElement(F.a,null,r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:this.closeForm,"aria-label":"close"},r.a.createElement(Vt.a,null)),r.a.createElement(x.a,{variant:"h6",className:"app-title"},"Safety Incident"),r.a.createElement(he.a,{color:"inherit",disabled:this.state.disabled,onClick:this.onSave},"save"))),r.a.createElement(_e.a,null,r.a.createElement(ep,{handleChange:this.handleChange,formData:this.state.newData,formState:this.state.formState}))),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:600,open:this.state.alertOpen,onClose:this.snackClose,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.closeDialog,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.closeDialog,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDelete,color:"primary"},"Delete"))))}}]),t}(r.a.Component),ap=tp,np=ap,rp=(a(886),{properties:{Factory:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Factory cannot be empty.",conform:"Factory cannot be empty.",required:"Factory cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},Name:{description:"",type:"string",required:!0,allowEmpty:!1,messages:{allowEmpty:"Name cannot be empty.",conform:"Name cannot be empty.",required:"Name cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},Description:{description:"",type:"string"},Inactive:{description:"",type:"boolean"},CreatedAt:{type:"any",default:Date.now()},CreatedBy:{type:"string",default:""},LastUpdatedAt:{type:"any",default:Date.now()},LastUpdatedBy:{type:"string",default:""}}}),op=a(24),sp={validateFields:function(e){return op.validate(e,rp,{cast:!0})},getprocessLine:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="processLine/"+e,a.abrupt("return",We(t).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},getprocessLineFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("processLine-filter/").concat(e),a.abrupt("return",We(t).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},getOneprocessLine:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("processLine/").concat(e),a.abrupt("return",We(t).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},update:function(e,t){return Qe("processLine/"+e,t).then((function(e){return console.log(e),200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Updated",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="processLine/"+e,n.abrupt("return",He(a,t).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Added",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,formValid:!0,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("processLine/"+e).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))}},ip=sp,lp=a(23),cp=(Object(n.forwardRef)((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),r.a.forwardRef((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),{Factory:{valid:!0,message:""},Name:{valid:!0,message:""}}),up=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).snackOpen=function(e,t){var n;return l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0===e||null===e||void 0===t||null===t){r.next=7;break}return r.next=3,l.a.awrap(ka(e,t));case 3:n=r.sent,a.setState({snackOpen:!a.state.snackOpen,alertMessage:n,alertClass:e}),r.next=8;break;case 7:a.setState({snackOpen:!1});case 8:case"end":return r.stop()}}))},a.dialogOpen=function(e){a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:e,dialogMessage:r.a.createElement("span",null,"Are you sure to delete this record ",r.a.createElement("b",null,e.Name)," ? This cannot be undone.")})},a.diaLogClose=function(){a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:null})},a.onDelete=function(){null!==a.state.currentDeleteData&&ip.delete("".concat(a.state.currentDeleteData._id)).then((function(e){if(!0===e.code){var t=Object(je.a)(a.state.data),n=t.indexOf(a.state.currentDeleteData);t.splice(n,1),a.setState({data:t,currentDeleteData:"",dialogOpen:!a.state.dialogOpen}),a.snackOpen("success","delete")}else a.snackOpen("error","server")}))},a.state={formControls:lp(cp),columns:[{title:"Factory",field:"Factory",render:function(e){return r.a.createElement("span",null,e.Factory.FctyName)},editComponent:function(e){return r.a.createElement(Hr,{selectedValue:e.value,formControl:a.state.formControls.Factory,propertyName:"Factory",required:!0,handleChange:function(t){e.onChange(t),a.resetFormControl(t,"Factory")}})}},{title:"Name",field:"Name",editComponent:function(e){return r.a.createElement(ge.a,{margin:"dense",required:!0,id:"Name",label:"Name",type:"text",error:!a.state.formControls.Name.valid,helperText:a.state.formControls.Name.message,defaultValue:e.rowData.Name,onChange:function(t){a.handleChange(t.target.value.trim(),"Name",e.rowData,!0)}})}},{title:"Description",field:"Description",type:"string",editComponent:function(e){return r.a.createElement(ge.a,{margin:"dense",id:"Description",label:"Description",type:"text",defaultValue:e.rowData.Remarks,onChange:function(t){return e.onChange(t.target.value)}})}},{title:"Inactive",field:"Inactive",lookup:{true:"Yes",false:"No"},editComponent:function(e){return r.a.createElement(Xe.a,{checked:e.rowData.Inactive,onChange:function(t){return e.onChange(t.target.checked)},value:e.value,inputProps:{"aria-label":"secondary checkbox"},color:"primary"})}},{title:"Operator",field:"LastUpdatedBy",editable:"never"},{title:"Last Updated",field:"LastUpdatedAt",render:function(e){return r.a.createElement("span",null,void 0===e?"":new Date(e.LastUpdatedAt).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}))},editable:"never"}],data:[],currentDeleteData:"",dialogOpen:!1,snackOpen:!1,alertMessage:"",dialogMessage:"",alertClass:""},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initprocessLine()}},{key:"initprocessLine",value:function(){var e=this;ip.getprocessLine("").then((function(t){if(!0===t.code){var a=Object(je.a)(e.state.data);a=t.data,e.setState({data:a})}}))}},{key:"initFormControl",value:function(){this.setState({formControls:lp(cp)})}},{key:"resetFormControl",value:function(e,t){var a=Object(me.a)({},this.state.formControls);void 0!==e&&null!==e&&""!==e&&(a[t].valid=!0,a[t].message=""),this.setState({formControls:a})}},{key:"handleChange",value:function(e,t,a,n){var r=Object(me.a)({},this.state.formControls);n&&(void 0===e||""===e||null===e?(r[t].valid=!1,r[t].message="".concat(t," cannot be empty.")):(r[t].valid=!0,r[t].message="")),this.setState({formControls:r},(function(){return a[t]=e}))}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{container:!0,direction:"column",justify:"center",wrap:"wrap",style:{margin:"20px 20px 10px 0px"}},r.a.createElement(be.a,{item:!0,xs:12},r.a.createElement(Ve.a,{title:"Process Line",columns:this.state.columns,data:this.state.data,editable:{onRowAdd:function(t){return new Promise((function(a,n){setTimeout((function(){var r=Object(je.a)(e.state.data),o=Object(me.a)({},e.state.formControls),s=ip.validateFields(t);s.valid?ip.add("",t).then((function(t){!0===t.code?(r.push(t.data),e.setState({data:r},(function(){return a()})),e.snackOpen("success","add")):(n(),t.errors.map((function(e){o[e.property].valid=!1,o[e.property].message=e.message})),e.setState({formControls:o},(function(){return e.snackOpen("error","alertValidation")})))})).catch((function(t){n(),e.snackOpen("error","server")})):(n(),s.errors.map((function(e){o[e.property].valid=!1,o[e.property].message=e.message})),e.setState({formControls:o}))}),1e3)}))},onRowUpdate:function(t,a){return new Promise((function(n,r){setTimeout((function(){var o=Object(je.a)(e.state.data),s=e.state.formControls,i=ip.validateFields(t);i.valid?ip.update("",t).then((function(t){if(!0===t.code){var i=o.indexOf(a);o[i]=t.data,e.setState({data:o},(function(){return n()})),e.snackOpen("success","update")}else r(),t.errors.map((function(e){return s[e.property].valid=!1,s[e.property].message=e.message,s})),e.setState({formControls:s},(function(){return e.snackOpen("error","alertValidation")}))})).catch((function(t){r(),e.snackOpen("error","server")})):(r(),i.errors.map((function(e){s[e.property].valid=!1,s[e.property].message=e.message})),e.setState({formControls:s}))}),1e3)}))}},actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.data,columns:e.state.columns,fileName:"Process Line"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.initprocessLine()}},{icon:"delete",tooltip:"Delete",onClick:function(t,a){return e.dialogOpen(a)}}],icons:{Clear:function(t){return r.a.createElement(Nt.a,{onClick:function(){e.initFormControl()},style:{padding:0,margin:0}})}},options:{}})),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:1e3,open:this.state.snackOpen,onClose:this.snackOpen,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.diaLogClose,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.diaLogClose,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDelete,color:"primary"},"Delete"))))}}]),t}(r.a.Component),dp=up,mp=(a(887),a(888),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={processLineData:[]},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){void 0!==this.props.selectedFactory&&null!==this.props.selectedFactory&&""!==this.props.selectedFactory&&this.initProcessLineDropDown()}},{key:"componentDidUpdate",value:function(e,t,a){e.selectedFactory!==this.props.selectedFactory&&this.initProcessLineDropDown()}},{key:"initProcessLineDropDown",value:function(){var e=this;void 0!==this.props.selectedFactory&&null!==this.props.selectedFactory&&""!==this.props.selectedFactory&&ip.getprocessLineFilter("?Factory=".concat(this.props.selectedFactory)).then((function(t){e.setState({processLineData:t.data})}))}},{key:"renderOptions",value:function(){return this.state.processLineData.map((function(e,t){return r.a.createElement(et.a,{label:"Select Process Line",value:e._id,key:e._id,name:e.Name},e.Name)}))}},{key:"handleChange",value:function(e){var t=this.state.processLineData.find((function(t){return t._id===e.target.value}));void 0!==t?this.props.handleChange(t,this.props.propertyName,this.props.required):this.props.handleChange("",this.props.propertyName,this.props.required)}},{key:"render",value:function(){var e=this;return r.a.createElement(ya.a,{style:{width:"100%",margin:4,paddingTop:7}},r.a.createElement(Ea.a,{shrink:!0,htmlFor:"Select Processing Line",required:!0,error:!this.props.formControl.valid},"Process Line"),r.a.createElement(ba.a,{id:this.props.propertyName,value:void 0===this.props.selectedValue||void 0===this.props.selectedValue._id?"":this.props.selectedValue._id,style:{minWidth:140},error:!this.props.formControl.valid,onChange:function(t){return e.handleChange(t,e.props.propertyName)},margin:"dense",displayEmpty:!0},r.a.createElement(et.a,{value:""},r.a.createElement("em",null,"Select Line")),this.renderOptions()),r.a.createElement(Sa.a,{error:!this.props.formControl.valid,style:{display:this.props.formControl.valid?"none":""}},this.props.formControl.valid?"":this.props.formControl.message))}}]),t}(r.a.Component)),pp=mp,fp=(a(889),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={processData:[]},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initStuffingDocument()}},{key:"initStuffingDocument",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.awrap(ln.get("").then((function(t){e.setState({processData:t.data})})));case 2:case"end":return t.stop()}}))}},{key:"renderOptions",value:function(){return this.state.processData.map((function(e,t){return r.a.createElement(et.a,{label:"Select Process",value:e._id,key:e._id,ProcName:e.ProcName},e.ProcName)}))}},{key:"handleChange",value:function(e){var t=this.state.processData.find((function(t){return t._id===e.target.value}));void 0!==t?this.props.handleChange(t,this.props.propertyName,this.props.required):this.props.handleChange("",this.props.propertyName,this.props.required)}},{key:"render",value:function(){var e=this;return r.a.createElement(ya.a,{style:{width:"100%",margin:4,paddingTop:7}},r.a.createElement(Ea.a,{shrink:!0,htmlFor:"Process",required:!0,error:!this.props.formControl.valid},"Process"),r.a.createElement(ba.a,{id:this.props.propertyName,value:void 0===this.props.selectedValue||void 0===this.props.selectedValue._id?"":this.props.selectedValue._id,style:{paddingBottom:0,paddingTop:0,minWidth:140},error:!this.props.formControl.valid,onChange:function(t){return e.handleChange(t,e.props.propertyName)},margin:"dense",displayEmpty:!0},r.a.createElement(et.a,{value:""},r.a.createElement("em",null,"Select Process")),this.renderOptions()),r.a.createElement(Sa.a,{error:!this.props.formControl.valid,style:{display:this.props.formControl.valid?"none":""}},this.props.formControl.valid?"":this.props.formControl.message))}}]),t}(r.a.Component)),hp=fp,gp=(a(890),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={processData:[]},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initsubProcess()}},{key:"initsubProcess",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.awrap(mn.getSubProcess("").then((function(t){e.setState({processData:t.data})})));case 2:case"end":return t.stop()}}))}},{key:"renderOptions",value:function(){return this.state.processData.map((function(e,t){return r.a.createElement(et.a,{label:"Select Sub Process",value:e._id,key:e._id,ProcName:e.SubProcName},e.SubProcName)}))}},{key:"handleChange",value:function(e){var t=this.state.processData.find((function(t){return t._id===e.target.value}));void 0!==t?this.props.handleChange(t,this.props.propertyName,this.props.required):this.props.handleChange("",this.props.propertyName,this.props.required)}},{key:"render",value:function(){var e=this;return r.a.createElement(ya.a,{style:{width:"100%",margin:4,paddingTop:7}},r.a.createElement(Ea.a,{shrink:!0,htmlFor:"Process",required:!0,error:!this.props.formControl.valid},"Sub Process"),r.a.createElement(ba.a,{id:this.props.propertyName,value:void 0===this.props.selectedValue||void 0===this.props.selectedValue._id?"":this.props.selectedValue._id,style:{paddingBottom:0,paddingTop:0,minWidth:140},error:!this.props.formControl.valid,onChange:function(t){return e.handleChange(t,e.props.propertyName)},margin:"dense",displayEmpty:!0},r.a.createElement(et.a,{value:""},r.a.createElement("em",null,"Select Sub Process")),this.renderOptions()),r.a.createElement(Sa.a,{error:!this.props.formControl.valid,style:{display:this.props.formControl.valid?"none":""}},this.props.formControl.valid?"":this.props.formControl.message))}}]),t}(r.a.Component)),yp=gp,vp=(a(891),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={processOutput:[]},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initProcessOutput()}},{key:"initProcessOutput",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.awrap(Oa("process-output.json").then((function(t){e.setState({processOutput:t.data.processOutput})})));case 2:case"end":return t.stop()}}))}},{key:"renderOptions",value:function(){return this.state.processOutput.map((function(e,t){return r.a.createElement(et.a,{label:"Select Process Output",value:e.value,key:e.value,name:e.name},e.name)}))}},{key:"handleChange",value:function(e){var t=this.state.processOutput.find((function(t){return t.value===e.target.value}));void 0!==t?this.props.handleChange(t,this.props.propertyName,this.props.required):this.props.handleChange("",this.props.propertyName,this.props.required)}},{key:"render",value:function(){var e=this;return r.a.createElement(ya.a,{style:{width:"100%",margin:4,paddingTop:7}},r.a.createElement(Ea.a,{shrink:!0,htmlFor:"ProcessOutput",required:!0,error:!this.props.formControl.valid},"Process Output"),r.a.createElement(ba.a,{id:this.props.propertyName,value:void 0===this.props.selectedValue?"":this.props.selectedValue.value,style:{minWidth:140},error:!this.props.formControl.valid,onChange:function(t){return e.handleChange(t,e.props.propertyName)},margin:"dense",displayEmpty:!0},r.a.createElement(et.a,{value:""},r.a.createElement("em",null,"Process Process Output")),this.renderOptions()),r.a.createElement(Sa.a,{error:!this.props.formControl.valid,style:{display:this.props.formControl.valid?"none":""}},this.props.formControl.valid?"":this.props.formControl.message))}}]),t}(r.a.Component)),Cp=vp,Dp={properties:{Factory:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Factory cannot be empty.",conform:"Factory cannot be empty.",required:"Factory cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},Line:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Line cannot be empty.",conform:"Line cannot be empty.",required:"Line cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},Process:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Process cannot be empty.",conform:"Process cannot be empty.",required:"Process cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},SubProcess:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Sub Process cannot be empty.",conform:"Sub Process cannot be empty.",required:"Sub Process cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},SubProcessNumber:{description:"",type:"string"},ProcessOutput:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Process OutPut cannot be empty.",conform:"Process OutPut cannot be empty.",required:"Process OutPut cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},MinSize:{description:"",type:"any"},MaxSize:{description:"",type:"any"},Remarks:{description:"",type:"string"},CreatedAt:{type:"any",default:Date.now()},CreatedBy:{type:"string",default:""},LastUpdatedAt:{type:"any",default:Date.now()},LastUpdatedBy:{type:"string",default:""}}},Ep=a(24),bp={validateFields:function(e){return Ep.validate(e,Dp,{cast:!0})},getsizeConfiguration:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="sizeConfiguration/"+e,a.abrupt("return",We(t).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},getsizeConfigurationFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("sizeConfiguration-filter/").concat(e),a.abrupt("return",We(t).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},getOnesizeConfiguration:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("sizeConfiguration/").concat(e),a.abrupt("return",We(t).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},update:function(e,t){return Qe("sizeConfiguration/"+e,t).then((function(e){return console.log(e),200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Updated",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="sizeConfiguration/"+e,n.abrupt("return",He(a,t).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Added",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,formValid:!0,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("sizeConfiguration/"+e).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))}},Sp=bp,Op=a(23),kp=(Object(n.forwardRef)((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),r.a.forwardRef((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),{Factory:{valid:!0,message:""},Line:{valid:!0,message:""},Process:{valid:!0,message:""},SubProcess:{valid:!0,message:""},ProcessOutput:{valid:!0,message:""}}),wp=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).snackOpen=function(e,t){a.setState({snackOpen:!a.state.snackOpen,alertMessage:e,alertClass:t})},a.dialogOpen=function(e){a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:e,dialogMessage:r.a.createElement("span",null,"Are you sure to delete this record"," ",r.a.createElement("b",null,e.SubProcessNumber)," ? This cannot be undone.")})},a.diaLogClose=function(){a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:null})},a.onDelete=function(){null!==a.state.currentDeleteData&&Sp.delete("".concat(a.state.currentDeleteData._id)).then((function(e){if(!0===e.code){var t=Object(je.a)(a.state.data),n=t.indexOf(a.state.currentDeleteData);t.splice(n,1),a.setState({data:t,currentDeleteData:"",dialogOpen:!a.state.dialogOpen}),a.snackOpen("Successfully Deleted!","success")}else a.snackOpen("Oops, something went wrong while processing your request!","error")}))},a.state={formControls:Op(kp),columns:[{title:"Factory",field:"Factory",render:function(e){return r.a.createElement("span",null,e.Factory.FctyName)},editComponent:function(e){return r.a.createElement(Hr,{selectedValue:e.value,formControl:a.state.formControls.Factory,propertyName:"Factory",required:!0,handleChange:function(t){e.onChange(t),a.resetFormControl(t,"Factory")}})}},{title:"Line",field:"Line",render:function(e){return r.a.createElement("span",null,e.Line.Name)},editComponent:function(e){return r.a.createElement(pp,{selectedFactory:void 0===e.rowData.Factory?"":e.rowData.Factory._id,selectedValue:e.value,formControl:a.state.formControls.Line,propertyName:"Line",required:!0,handleChange:function(t){e.onChange(t),a.resetFormControl(t,"Line")}})}},{title:"Process",field:"Process",render:function(e){return r.a.createElement("span",null,e.Process.ProcName)},editComponent:function(e){return r.a.createElement(hp,{selectedValue:e.value,formControl:a.state.formControls.Process,propertyName:"Process",required:!0,handleChange:function(t){e.onChange(t),a.resetFormControl(t,"Process")}})}},{title:"Sub Process",field:"SubProcess",render:function(e){return r.a.createElement("span",null,e.SubProcess.SubProcName)},editComponent:function(e){return r.a.createElement(yp,{selectedValue:e.value,formControl:a.state.formControls.SubProcess,propertyName:"SubProcess",required:!0,handleChange:function(t){e.onChange(t),a.resetFormControl(t,"SubProcess")}})}},{title:"Sub Process Number",field:"SubProcessNumber",editComponent:function(e){return r.a.createElement(ge.a,{margin:"dense",required:!1,id:"SubProcessNumber",label:"Sub Process No.",type:"text",defaultValue:void 0===e.rowData.SubProcessNumber?"":e.rowData.SubProcessNumber.split("- ")[1],onChange:function(t){return e.onChange(t.target.value)}})}},{title:"Process Output",field:"ProcessOutput",render:function(e){return r.a.createElement("span",null,e.ProcessOutput.name)},editComponent:function(e){return r.a.createElement(Cp,{selectedValue:e.value,formControl:a.state.formControls.ProcessOutput,propertyName:"ProcessOutput",required:!0,handleChange:function(t){e.onChange(t),a.resetFormControl(t,"ProcessOutput")}})}},{title:"Min. Size",field:"MinSize",render:function(e){return r.a.createElement("span",null,e.MinSize)},editComponent:function(e){return r.a.createElement(Xa.a,{customInput:ge.a,label:"Min. Size",defaultValue:void 0===e.value?0:e.value,thousandSeparator:!0,decimalScale:2,fixedDecimalScale:!0,onValueChange:function(t){e.onChange(void 0===t.floatValue?0:t.floatValue)}})}},{title:"Max. Size",field:"MaxSize",render:function(e){return r.a.createElement("span",null,e.MaxSize)},editComponent:function(e){return r.a.createElement(Xa.a,{customInput:ge.a,label:"Max. Size",defaultValue:void 0===e.value?0:e.value,thousandSeparator:!0,decimalScale:2,fixedDecimalScale:!0,onValueChange:function(t){e.onChange(void 0===t.floatValue?0:t.floatValue)}})}},{title:"Remarks",field:"Remarks",type:"string",editComponent:function(e){return r.a.createElement(ge.a,{margin:"dense",id:"Remarks",label:"Remarks",multiline:!0,line:2,type:"text",defaultValue:e.rowData.Remarks,onChange:function(t){return e.onChange(t.target.value)}})}},{title:"Operator",field:"LastUpdatedBy",editable:"never"},{title:"Last Updated",field:"LastUpdatedAt",render:function(e){return r.a.createElement("span",null,void 0===e?"":new Date(e.LastUpdatedAt).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}))},editable:"never"}],data:[],selectedFactory:"",currentDeleteData:"",dialogOpen:!1,snackOpen:!1,alertMessage:"",dialogMessage:"",alertClass:""},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initSizeConfiguration()}},{key:"resetFormControl",value:function(e,t){var a=Object(me.a)({},this.state.formControls);void 0!==e&&null!==e&&""!==e&&(a[t].valid=!0,a[t].message=""),this.setState({formControls:a})}},{key:"initSizeConfiguration",value:function(){var e=this;Sp.getsizeConfiguration("").then((function(t){if(!0===t.code){var a=Object(je.a)(e.state.data);a=t.data,e.setState({data:a})}}))}},{key:"initFormControl",value:function(){this.setState({formControls:Op(kp)})}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{container:!0,direction:"column",justify:"center",wrap:"wrap",style:{margin:"20px 20px 10px 0px"}},r.a.createElement(be.a,{item:!0,xs:12},r.a.createElement(Ve.a,{title:"Size Configuration",columns:this.state.columns,data:this.state.data,editable:{onRowAdd:function(t){return new Promise((function(a,n){setTimeout((function(){var r=Object(je.a)(e.state.data),o=Object(me.a)({},e.state.formControls),s=Sp.validateFields(t);if(s.valid){var i=Object(me.a)({},t),l=1===t.SubProcessNumber.split(" - ").length?t.SubProcessNumber:t.SubProcessNumber.split(" - ")[1];i.SubProcessNumber="".concat(t.SubProcess.SubProcName," - ").concat(l),Sp.add("",i).then((function(t){!0===t.code?(r.push(t.data),e.snackOpen("Successfully added!","success"),e.setState({data:r},(function(){return a()}))):(n(),t.errors.map((function(e){o[e.property].valid=!1,o[e.property].message=e.message})),e.setState({formControls:o}),e.snackOpen("Please fix the error(s) highlighted to save the details!","error"))})).catch((function(t){n(),e.snackOpen("Oops, something went wrong while processing your request!","error")}))}else n(),s.errors.map((function(e){o[e.property].valid=!1,o[e.property].message=e.message})),e.setState({formControls:o})}),1e3)}))},onRowUpdate:function(t,a){return new Promise((function(n,r){setTimeout((function(){var o=Object(je.a)(e.state.data),s=e.state.formControls,i=Sp.validateFields(t);if(i.valid){var l=Object(me.a)({},t),c=1===t.SubProcessNumber.split(" - ").length?t.SubProcessNumber:t.SubProcessNumber.split(" - ")[1];l.SubProcessNumber="".concat(t.SubProcess.SubProcName," - ").concat(c),Sp.update("",l).then((function(t){if(!0===t.code){var i=o.indexOf(a);o[i]=t.data,e.setState({data:o},(function(){return n()})),e.snackOpen("Successfully added!","success")}else r(),t.errors.map((function(e){return s[e.property].valid=!1,s[e.property].message=e.message,s})),e.setState({formControls:s}),e.snackOpen("Please fix the error(s) highlighted to save the details!","error")})).catch((function(t){r(),e.snackOpen("Oops, something went wrong while processing your request!","error")}))}else r(),i.errors.map((function(e){s[e.property].valid=!1,s[e.property].message=e.message})),e.setState({formControls:s})}),1e3)}))}},actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.data,columns:e.state.columns,fileName:"Size Configuration"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.initSizeConfiguration()}},{icon:"delete",tooltip:"Delete Contamination",onClick:function(t,a){return e.dialogOpen(a)}}],icons:{Clear:function(t){return r.a.createElement(Nt.a,{onClick:function(){e.initFormControl()},style:{padding:0,margin:0}})}},options:{}})),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:600,open:this.state.snackOpen,onClose:this.snackOpen,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.diaLogClose,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.diaLogClose,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDelete,color:"primary"},"Delete"))))}}]),t}(r.a.Component),Fp=wp,xp=(a(892),{properties:{Factory:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Factory cannot be empty.",conform:"Factory cannot be empty.",required:"Factory cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},Line:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Line cannot be empty.",conform:"Line cannot be empty.",required:"Line cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},Process:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Process cannot be empty.",conform:"Process cannot be empty.",required:"Process cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},SubProcess:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Sub Process cannot be empty.",conform:"Sub Process cannot be empty.",required:"Sub Process cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},SubProcessNumber:{description:"",type:"string"},Remarks:{description:"",type:"string"},ContaminationDetail:{description:"",type:"array"},CreatedAt:{type:"any",default:Date.now()},CreatedBy:{type:"string",default:""},LastUpdatedAt:{type:"any",default:Date.now()},LastUpdatedBy:{type:"string",default:""}}}),Tp={properties:{ContaminationType:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"ContaminationType cannot be empty.",conform:"ContaminationType cannot be empty.",required:"ContaminationType cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},StdContamination:{description:"",type:"any"}}},Np=a(24),jp={validateFields:function(e){return Np.validate(e,xp,{cast:!0})},validateContaminationDetailFields:function(e){return Np.validate(e,Tp,{cast:!0})},getContaminationConfiguration:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="ContaminationConfiguration/"+e,a.abrupt("return",We(t).then((function(e){if(200===e.status&&null!==e.data.data){var t=e.data.data.map((function(e){return e}));return{code:!0,formValid:!0,message:ka("success","get"),data:t}}if(200===e.status&&null===e.data.data)return{code:!1,message:e.data.message,data:null}})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},getContaminationConfigurationFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("ContaminationConfiguration-filter/").concat(e),a.abrupt("return",We(t).then((function(e){if(200===e.status&&null!==e.data.data){var t=e.data.data;return{code:!0,formValid:!0,message:ka("success","get"),data:t}}if(200===e.status&&null===e.data.data)return{code:!1,message:e.data.message,data:null}})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},getOneContaminationConfiguration:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("ContaminationConfiguration/").concat(e),a.abrupt("return",We(t).then((function(e){if(200===e.status&&null!==e.data.data){var t=e.data.data;return{code:!0,formValid:!0,message:ka("success","get"),data:t}}if(200===e.status&&null===e.data.data)return{code:!1,message:e.data.message,data:null}})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},update:function(e,t){return Qe("ContaminationConfiguration/"+e,t).then((function(e){if(console.log(e),200===e.status&&null!==e.data.data&&null===e.data.errors){var t=e.data.data;return{code:!0,formValid:!0,message:ka("success","update"),errors:null,data:t}}if(200===e.status&&null!==e.data.errors)return{code:!1,message:e.data.message,errors:e.data.errors,data:null}})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="ContaminationConfiguration/"+e,n.abrupt("return",He(a,t).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:ka("success","add"),errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,formValid:!0,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("ContaminationConfiguration/"+e).then((function(e){if(200===e.status&&null!==e.data.data){var t=e.data.data;return{code:!0,formValid:!0,message:ka("success","delete"),data:t}}if(200===e.status&&null===e.data.data)return{code:!1,message:e.data.message,data:null}})).catch((function(e){throw e}))}},Pp=jp,Ap={Factory:"",Line:"",Process:"",SubProcess:"",SubProcessNumber:"",Remarks:"",ContaminationDetail:[]},Mp=(a(893),a(894),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={contatminationTypeData:[]},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initContatminationTypeDropDown()}},{key:"initContatminationTypeDropDown",value:function(){var e=this;ht.getContatminationType("").then((function(t){e.setState({contatminationTypeData:t.data})}))}},{key:"renderOptions",value:function(){return this.state.contatminationTypeData.map((function(e,t){return r.a.createElement(et.a,{label:"Select Contatmination Type",value:e._id,key:e._id,name:e.ContatminationTypeName},r.a.createElement(E.a,{style:{width:"100%"}},r.a.createElement(b.a,{alignItems:"flex-start"},r.a.createElement(S.a,{primary:e.ContatminationTypeName,style:{width:"50%"}}),r.a.createElement(S.a,{primary:e.ContatminationTypeDesc,style:{width:"50%"}}))))}))}},{key:"handleChange",value:function(e){var t=this.state.contatminationTypeData.find((function(t){return t._id===e.target.value}));void 0!==t?this.props.handleChange(t,this.props.propertyName,this.props.required):this.props.handleChange("",this.props.propertyName,this.props.required)}},{key:"render",value:function(){var e=this;return r.a.createElement(ya.a,{style:{width:"100%",margin:0,paddingTop:7}},r.a.createElement(Ea.a,{shrink:!0,htmlFor:"Contatmination Type",required:!0,error:!this.props.formControl.valid},"Contamination Type"),r.a.createElement(ba.a,{id:this.props.propertyName,value:void 0===this.props.selectedValue||null===this.props.selectedValue||void 0===this.props.selectedValue._id?"":this.props.selectedValue._id,style:{minWidth:140},error:!this.props.formControl.valid,onChange:function(t){return e.handleChange(t,e.props.propertyName)},margin:"dense",displayEmpty:!0},r.a.createElement(et.a,{value:""},r.a.createElement("em",null,"Select Contamination Type")),this.renderOptions()),r.a.createElement(Sa.a,{error:!this.props.formControl.valid,style:{display:this.props.formControl.valid?"none":""}},this.props.formControl.valid?"":this.props.formControl.message))}}]),t}(r.a.Component)),_p=Mp,Ip=a(23),Rp=(Object(n.forwardRef)((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),{Factory:{valid:!0,message:""},Line:{valid:!0,message:""},Process:{valid:!0,message:""},SubProcess:{valid:!0,message:""},ContaminationType:{valid:!0,message:""}}),Lp=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).closeForm=function(){a.setState({formControl:Ip(Rp)},(function(){return a.props.closeForm()}))},a.snackOpen=function(e,t){var n;return l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0===e||null===e||void 0===t||null===t){r.next=7;break}return r.next=3,l.a.awrap(ka(e,t));case 3:n=r.sent,a.setState({snackOpen:!a.state.snackOpen,snackMessage:n,snackClass:e}),r.next=8;break;case 7:a.setState({snackOpen:!1});case 8:case"end":return r.stop()}}))},a.dialogOpen=function(e){var t;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(void 0===e||null===e){n.next=7;break}return n.next=3,l.a.awrap(ka("confirmation","delete"));case 3:t=n.sent,a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:e,dialogMessage:r.a.createElement("span",null,void 0!==t?t.replace("[Name]",e.ContaminationType.ContatminationTypeName):"")}),n.next=8;break;case 7:a.setState({dialogOpen:!1});case 8:case"end":return n.stop()}}))},a.diaLogClose=function(){a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:null})},a.onSave=function(){var e=Object(me.a)({},a.state.formData),t=Object(me.a)({},a.state.formControl),n=Pp.validateFields(e);if(n.valid){var r=1===e.SubProcessNumber.split(" - ").length?e.SubProcessNumber:e.SubProcessNumber.split(" - ")[1];e.SubProcessNumber="".concat(e.SubProcess.SubProcName," - ").concat(r),e.ContaminationDetail=a.state.detailContamination,"Add"===a.props.formAction?Pp.add("",e).then((function(e){!0===e.code?a.props.onSuccess(e.data):null!==e.errors&&Array.isArray(e.errors)?(e.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t})):a.snackOpen("error","server")})):Pp.update("",e).then((function(e){!0===e.code?a.props.onSuccess(e.data):null!==e.errors&&Array.isArray(e.errors)?(e.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t})):a.snackOpen("error","server")}))}else n.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t}),a.snackOpen("error","alertValidation")},a.onDelete=function(e,t){if(void 0!==a.state.currentDeleteData&&null!==a.state.currentDeleteData){var n=Object(je.a)(a.state.detailContamination),r=n.indexOf(a.state.currentDeleteData);n.splice(r,1),a.setState({detailContamination:n,dialogOpen:!1},(function(){return Object(Pe.a)(a)}),a.snackOpen("success","delete"))}},a.state={formData:a.props.formData,formOpen:a.props.formOpen,columns:[{title:"Contamination Type",field:"ContaminationType",render:function(e){return r.a.createElement("span",null,null===e.ContaminationType?"":e.ContaminationType.ContatminationTypeName)},editComponent:function(e){return r.a.createElement(_p,{propertyName:"ContaminationType",selectedValue:e.value,formControl:a.state.formControl.ContaminationType,handleChange:function(t){e.onChange(t),a.resetFormControl(t,"ContaminationType")}})}},{title:"Std. Contamination %",field:"StdContamination",render:function(e){return r.a.createElement("span",null,e.StdContamination)},editComponent:function(e){return r.a.createElement(Xa.a,{customInput:ge.a,label:"Std. Contamination %",defaultValue:void 0===e.value?0:e.value,decimalSeparator:".",decimalScale:2,fixedDecimalScale:!0,onValueChange:function(t){e.onChange(void 0===t.floatValue?0:t.floatValue)}})}}],detailContamination:a.props.formData.ContaminationDetail,formControl:Ip(Rp),selectedFactory:"",currentDeleteData:null,disabled:!1,dialogOpen:!1,dialogMessage:"",snackOpen:!1,snackMessage:"",snackClass:""},a.handelChange=a.handelChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"resetFormControl",value:function(e,t){var a=Object(me.a)({},this.state.formControl);void 0!==e&&null!==e&&""!==e&&(a[t].valid=!0,a[t].message=""),this.setState({formControl:a})}},{key:"handelChange",value:function(e,t,a){var n=Object(me.a)({},this.state.formData),r=Object(me.a)({},this.state.formControl);(a||"Factory"===t)&&(void 0===e||""===e?(r[t].valid=!1,r[t].message=t+ka("validation","empty")):(r[t].valid=!0,r[t].message="")),"Factory"===t&&(n.Line=""),n[t]=e,this.setState({formData:n})}},{key:"initFormControl",value:function(){this.setState({formControls:Ip(Rp)})}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{container:!0},r.a.createElement(Ae.a,{fullScreen:!0,open:this.state.formOpen,onClose:this.closeForm,TransitionComponent:this.Transition},r.a.createElement(w.a,{className:"appBar"},r.a.createElement(F.a,null,r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:this.closeForm,"aria-label":"close"},r.a.createElement(Vt.a,null)),r.a.createElement(x.a,{variant:"h6",className:"app-title"},"Contamination Configuration"),r.a.createElement(he.a,{color:"inherit",disabled:this.state.disabled,onClick:this.onSave},"save"))),r.a.createElement(_e.a,null,r.a.createElement("div",{className:"form-container"},r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-around",alignItems:"center",md:10,xs:12,sm:12,xl:10,lg:10},r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Hr,{selectedValue:this.state.formData.Factory,propertyName:"Factory",handleChange:this.handelChange,formControl:this.state.formControl.Factory}))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(pp,{selectedFactory:void 0===this.state.formData.Factory||""===this.state.formData.Factory?"":this.state.formData.Factory._id,selectedValue:this.state.formData.Line,formControl:this.state.formControl.Line,propertyName:"Line",required:!0,handleChange:function(t){e.handelChange(t,"Line",!0),e.resetFormControl(t,"Line")}})),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(hp,{selectedValue:this.state.formData.Process,formControl:this.state.formControl.Process,propertyName:"Process",required:!0,handleChange:function(t){e.handelChange(t,"Process",!0),e.resetFormControl(t,"Process")}})),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(yp,{selectedValue:this.state.formData.SubProcess,formControl:this.state.formControl.SubProcess,propertyName:"SubProcess",required:!0,handleChange:function(t){e.handelChange(t,"SubProcess",!0),e.resetFormControl(t,"SubProcess")}})),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"SubProcessNumber",label:"Sub Process Number",defaultValue:""===this.state.formData.SubProcessNumber?"":this.state.formData.SubProcessNumber.split("- ")[1],className:"",onChange:function(t){return e.handelChange(t.target.value,"SubProcessNumber",!1)},margin:"dense"}))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"Remarks",label:"Remarks",defaultValue:this.state.formData.Remarks,className:"",onChange:function(t){return e.handelChange(t.target.value,"Remarks",!1)},margin:"dense"}))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(Ve.a,{style:{width:"100%",margin:4},title:"Contamination Detail",columns:this.state.columns,data:this.state.detailContamination,editable:{onRowAdd:function(t){return new Promise((function(a,n){setTimeout((function(){var r=Object(je.a)(e.state.detailContamination),o=Object(me.a)({},e.state.formControl),s=Pp.validateContaminationDetailFields(t);s.valid?(r.push(t),e.setState({detailContamination:r},(function(){return a()}))):(n(),s.errors.map((function(e){o[e.property].valid=!1,o[e.property].message=e.message})),e.setState({formControl:o}))}),1e3)}))},onRowUpdate:function(t,a){return new Promise((function(n,r){setTimeout((function(){var o=Object(je.a)(e.state.detailContamination),s=o.indexOf(a),i=e.state.formControl,l=Pp.validateContaminationDetailFields(t);l.valid?(o[s]=t,e.setState({detailContamination:o},(function(){return n()}))):(r(),l.errors.map((function(e){i[e.property].valid=!1,i[e.property].message=e.message})),e.setState({formControl:i}))}),1e3)}))}},actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.data,columns:e.state.columns,fileName:"Contamination"})},isFreeAction:!0},{icon:"delete",tooltip:"Delete Contamination",onClick:function(t,a){return e.dialogOpen(a)}}],icons:{Clear:function(t){return r.a.createElement(Nt.a,{onClick:function(){e.initFormControl()},style:{padding:0,margin:0}})}},options:{search:!1}})))))),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.snackClass,autoHideDuration:600,open:this.state.snackOpen,onClose:this.snackOpen,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.snackMessage)}),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.dialogOpen,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.diaLogClose,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDelete,color:"primary"},"Delete"))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return{formOpen:e.formOpen}}}]),t}(r.a.Component),Vp=Lp,Bp=Vp,Up=a(23),qp=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).snackOpen=function(e,t){var n;return l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0===e||null===e||void 0===t||null===t){r.next=7;break}return r.next=3,l.a.awrap(ka(e,t));case 3:n=r.sent,a.setState({snackOpen:!a.state.snackOpen,alertMessage:n,alertClass:e}),r.next=8;break;case 7:a.setState({snackOpen:!1});case 8:case"end":return r.stop()}}))},a.dialogOpen=function(e){var t;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,l.a.awrap(ka("confirmation","delete"));case 2:t=n.sent,a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:e,dialogMessage:r.a.createElement("span",null,void 0!==t?t.replace("[Name]",e.SubProcessNumber):"")});case 4:case"end":return n.stop()}}))},a.diaLogClose=function(){a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:null})},a.onDelete=function(){null!==a.state.currentDeleteData&&Pp.delete("".concat(a.state.currentDeleteData._id)).then((function(e){if(!0===e.code){var t=Object(je.a)(a.state.data),n=t.indexOf(a.state.currentDeleteData);t.splice(n,1),a.setState({data:t,currentDeleteData:"",dialogOpen:!a.state.dialogOpen},(function(){return a.snackOpen("success","delete")}))}else a.snackOpen("error","server")}))},a.state={columns:[{title:"Factory",field:"Factory",render:function(e){return r.a.createElement("span",null,e.Factory.FctyName)}},{title:"Line",field:"Line",render:function(e){return r.a.createElement("span",null,e.Line.Name)}},{title:"Process",field:"Process",render:function(e){return r.a.createElement("span",null,e.Process.ProcName)}},{title:"Sub Process",field:"SubProcess",render:function(e){return r.a.createElement("span",null,e.SubProcess.SubProcName)}},{title:"Sub Process Number",field:"SubProcessNumber"},{title:"Remarks",field:"Remarks"},{title:"Operator",field:"LastUpdatedBy",editable:"never"},{title:"Last Updated",field:"LastUpdatedAt",render:function(e){return r.a.createElement("span",null,void 0===e?"":new Date(e.LastUpdatedAt).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}))},editable:"never"}],data:[],formData:null,currentDeleteData:null,formOpen:!1,formAction:"",dialogOpen:!1,snackOpen:!1,alertMessage:"",dialogMessage:"",alertClass:""},a.ContaminationConfigurationModel=Up(Ap),a.onSuccess=a.onSuccess.bind(Object(Pe.a)(a)),a.closeForm=a.closeForm.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initcontaminationConfiguration()}},{key:"initcontaminationConfiguration",value:function(){var e=this;Pp.getContaminationConfiguration("").then((function(t){!0===t.code&&e.setState({data:t.data})}))}},{key:"openForm",value:function(e){var t,a=e;void 0===a||null===a?(a=this.ContaminationConfigurationModel,t="Add"):t="update",this.setState({formData:a,formOpen:!this.state.formOpen,formAction:t})}},{key:"closeForm",value:function(){this.setState({formData:null,formOpen:!1,formAction:""})}},{key:"onSuccess",value:function(e){var t=this,a=Object(je.a)(this.state.data);if(void 0!==e&&null!==e)if("Add"===this.state.formAction)a.push(e),this.setState({data:a,formOpen:!this.state.formOpen,formAction:"",currentRowData:null},(function(){return t.snackOpen("success","add")}));else{var n=a.indexOf(this.state.formData);a[n]=e,this.setState({data:a,formOpen:!this.state.formOpen,formAction:"",currentRowData:null},(function(){return t.snackOpen("success","update")}))}else this.snackOpen("error","server")}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{container:!0,direction:"column",justify:"center",wrap:"wrap",style:{margin:"20px 20px 10px 0px"}},r.a.createElement(be.a,{item:!0,xs:12},r.a.createElement(Ve.a,{title:"Contamination Configuration",columns:this.state.columns,data:this.state.data,components:{Toolbar:function(t){return r.a.createElement("div",null,r.a.createElement(Le.MTableToolbar,t),r.a.createElement("div",{style:{padding:"0px 15px"}},r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:function(){return e.openForm(t.rowData)},"aria-label":"add"},r.a.createElement(wt.a,null))))}},actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.data,columns:e.state.columns,fileName:"Contamination Configuration"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.initcontaminationConfiguration()}},{icon:"edit",tooltip:"Edit User",onClick:function(t,a){return e.openForm(a)}},{icon:"delete",tooltip:"Delete User",onClick:function(t,a){return e.dialogOpen(a)}}],options:{}})),r.a.createElement(be.a,{item:!0,xs:12},this.state.formOpen?r.a.createElement(Bp,{formAction:this.state.formAction,formData:this.state.formData,formOpen:this.state.formOpen,onSuccess:this.onSuccess,closeForm:this.closeForm}):""),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:600,open:this.state.snackOpen,onClose:this.snackOpen,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.diaLogClose,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.diaLogClose,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDelete,color:"primary"},"Delete"))))}}]),t}(r.a.Component),Gp=qp,Wp=(a(895),{Factory:"",StorageNo:"",Capacity:0,NumberStartPeriod:new Date,LastNumbering:0,Remarks:"",Details:[],Inactive:!1,CreatedAt:new Date,CreatedBy:"Admin",LastUpdatedAt:new Date,LastUpdatedBy:"Admin"}),Hp=Wp,Qp=(a(896),a(23)),zp={Factory:{valid:!0,message:""},StorageNo:{valid:!0,message:""},Capacity:{valid:!0,message:""},NumberStartPeriod:{valid:!0,message:""},LastNumbering:{valid:!0,message:""},Remarks:{valid:!0,message:""},Inactive:{valid:!0,message:""}},Yp=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).closeForm=function(){a.setState({formControl:Qp(zp)},(function(){return a.props.openForm(null)}))},a.snackOpen=function(e,t,n){var r;return l.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(""!==t){o.next=4;break}a.setState({snackOpen:!a.state.snackOpen,alertMessage:n,alertClass:e}),o.next=8;break;case 4:return o.next=6,l.a.awrap(ka(e,t));case 6:r=o.sent,a.setState({snackOpen:!a.state.snackOpen,alertMessage:r,alertClass:e});case 8:case"end":return o.stop()}}))},a.onSave=function(){var e=Object(me.a)({},a.state.formData),t=Object(me.a)({},a.state.formControl),n=No.validateFields(e);n.valid?(e.Format="".concat(e.StorageNo.trim()," - {yy}{mm} - 000"),"Add"===a.props.formAction?No.add("",e).then((function(e){!0===e.code?a.props.onSuccess(e.data):null!==e.errors&&Array.isArray(e.errors)?(e.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t})):a.snackOpen("error","server")})):No.update("",e).then((function(e){!0===e.code?a.props.onSuccess(e.data):null!==e.errors&&Array.isArray(e.errors)?(e.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t})):a.snackOpen("error","server")}))):(n.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t}),a.snackOpen("error","alertValidation"))},a.state={formData:a.props.formData,formOpen:a.props.formOpen,formControl:Qp(zp),disabled:!1,snackOpen:!1,snackMessage:"",snackClass:""},a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"handleChange",value:function(e,t,a){var n=Object(me.a)({},this.state.formData),r=Object(me.a)({},this.state.formControl);!a||void 0!==e&&""!==e?(r[t].valid=!0,r[t].message=""):(r[t].valid=!1,r[t].message="".concat(t," cannot be empty.")),n[t]=e,this.setState({formData:n,formControl:r})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(Ae.a,{fullScreen:!0,open:this.state.formOpen,onClose:this.closeForm,TransitionComponent:this.Transition},r.a.createElement(w.a,{className:"appBar"},r.a.createElement(F.a,null,r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:this.closeForm,"aria-label":"close"},r.a.createElement(Vt.a,null)),r.a.createElement(x.a,{variant:"h6",className:"app-title"},"Storage Location"),r.a.createElement(he.a,{color:"inherit",disabled:this.state.disabled,onClick:this.onSave},"Save"))),r.a.createElement(_e.a,null,r.a.createElement("div",{className:"form-container"},r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-evenly",alignItems:"center",md:6,xs:12,sm:12,xl:8,lg:8},r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(Hr,{selectedValue:this.state.formData.Factory,propertyName:"Factory",handleChange:this.handleChange,formControl:this.state.formControl.Factory,required:!0})),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"StorageLocation",required:!0,label:"RM Storage No",error:!this.state.formControl.StorageNo.valid,helperText:this.state.formControl.StorageNo.message,defaultValue:this.state.formData.StorageNo,onChange:function(t){return e.handleChange(t.target.value.trim(),"StorageNo",!0)},margin:"dense"}))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{id:"Capacity",label:"Capacity (kg)",customInput:ge.a,value:this.state.formData.Capacity,onValueChange:function(t){return e.handleChange(t.floatValue,"Capacity",!0)},onFocus:function(e){e.target.select()},decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0,error:!this.state.formControl.Capacity.valid,helperText:this.state.formControl.Capacity.message}))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Da.b,{style:{width:"100%"},margin:"dense",id:"date-picker-dialog",label:"Date",format:"MMM-yyyy",views:["year","month"],openTo:"month",error:!this.state.formControl.NumberStartPeriod.valid,value:this.state.formData.NumberStartPeriod,onChange:function(t){return e.handleChange(new Date(t),"NumberStartPeriod",!0)},KeyboardButtonProps:{"aria-label":"Month"},disabled:this.props.formData.IsUsed})),r.a.createElement(Sa.a,{error:!this.state.formControl.NumberStartPeriod.valid,style:{display:this.state.formControl.NumberStartPeriod.valid?"none":""}},this.state.formControl.NumberStartPeriod.message))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"LastNumbering",label:"Start Number",value:this.state.formData.LastNumbering,onChange:function(t){return e.handleChange(Math.trunc(t.target.value),"LastNumbering",!1)},onFocus:function(e){e.target.select()},margin:"dense",type:"number",min:"0",step:"1",disabled:this.props.formData.IsUsed}))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"Remarks",label:"Remarks",multiline:!0,defaultValue:this.state.formData.Remarks,onChange:function(t){return e.handleChange(t.target.value,"Remarks",!1)},margin:"dense"}))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ga.a,{component:"label"},"Inactive"),r.a.createElement(Xe.a,{checked:this.state.formData.Inactive,color:"primary",inputProps:{"aria-label":"primary checkbox"},onChange:function(t){return e.handleChange(t.target.checked,"Inactive",!0)},margin:"dense"}))))))),this.state.snackOpen?r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:600,open:this.state.snackOpen,onClose:this.snackClose,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}):"")}}],[{key:"getDerivedStateFromProps",value:function(e,t){return{formOpen:e.formOpen}}}]),t}(r.a.Component),Kp=Yp,Jp=a(23),Zp=function(e){function t(e){var a;arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).snackOpen=function(e,t,n){var r;return l.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(""!==t){o.next=4;break}a.setState({snackOpen:!a.state.snackOpen,alertMessage:n,alertClass:e}),o.next=8;break;case 4:return o.next=6,l.a.awrap(ka(e,t));case 6:r=o.sent,a.setState({snackOpen:!a.state.snackOpen,alertMessage:r,alertClass:e});case 8:case"end":return o.stop()}}))},a.snackClose=function(){a.setState({snackOpen:!1})},a.dialogOpen=function(e){var t;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,l.a.awrap(ka("confirmation","delete"));case 2:t=n.sent,a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:e,dialogMessage:r.a.createElement("span",null,void 0!==t?t.replace("[Name]","".concat(e.Factory.FctyCode," - ").concat(e.StorageNo)):"")});case 4:case"end":return n.stop()}}))},a.closeDialog=function(){a.setState({dialogOpen:!1,currentDeleteData:null,dialogMessage:""})},a.onDelete=function(){var e=Object(je.a)(a.state.data),t=e.indexOf(a.state.currentDeleteData);void 0!==a.state.currentDeleteData&&null!==a.state.currentDeleteData&&(a.state.currentDeleteData.IsUsed?a.snackOpen("error","","This Storage can not be deleted because it's already in used."):No.delete(a.state.currentDeleteData._id).then((function(n){!0===n.code?(e.splice(t,1),a.setState({data:e,dialogOpen:!1},(function(){return a.snackOpen("success","delete")}))):a.setState({dialogOpen:!1},(function(){return a.snackOpen("error","server")}))}))),a.closeDialog()},a.state={columns:[{title:"Factory",field:"Factory",render:function(e){return r.a.createElement("span",null,e.Factory.FctyCode)}},{title:"RM Storage No",field:"StorageNo"},{title:"Capacity",field:"Capacity",render:function(e){return r.a.createElement(Xa.a,{value:e.Capacity,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"Number in Use",field:"NumberResult"},{title:"Description",field:"Remarks"},{title:"Status Full",field:"StatusFull",lookup:{0:"Empty",1:"Partial Fill",2:"Closed"}},{title:"Status Empty",field:"StatusEmpty",lookup:{0:"Empty",1:"Partial Out",2:"Closed"}},{title:"Inactive",field:"Inactive",type:"boolean",render:function(e){return r.a.createElement("span",null,e.Inactive?"Yes":"No")}},{title:"Operator",field:"LastUpdatedBy"},{title:"Last Updated",field:"LastUpdatedAt",render:function(e){return r.a.createElement("span",null,new Date(e.LastUpdatedAt).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}))}}],data:[],formData:null,currentDeleteData:null,formOpen:!1,formAction:"",snackOpen:!1,dialogOpen:!1,alertMessage:"",dialogMessage:"",alertClass:""},a.StorageLocationModel=Jp(Hp),a.openForm=a.openForm.bind(Object(Pe.a)(a)),a.onSuccess=a.onSuccess.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initStorageLocation()}},{key:"openForm",value:function(e){var t=e,a=this.state.formAction;void 0===t||null===t?(t=this.StorageLocationModel,a="Add"):a="update",this.setState({formData:t,formOpen:!this.state.formOpen,formAction:a})}},{key:"initStorageLocation",value:function(){var e=this;No.get("").then((function(t){!0===t.code?e.setState({data:t.data}):e.snackOpen("error","server")}))}},{key:"onSuccess",value:function(e){var t=this,a=Object(je.a)(this.state.data);if(void 0!==e&&null!==e)if("Add"===this.state.formAction)a.push(e),this.setState({data:a,formOpen:!this.state.formOpen,formAction:"",formData:null},(function(){return t.snackOpen("success","add")}));else{var n=a.indexOf(this.state.formData);a[n]=e,this.setState({data:a,formOpen:!this.state.formOpen,formAction:"",formData:null},(function(){return t.snackOpen("success","update")}))}else this.snackOpen("error","failed")}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{container:!0,direction:"column",justify:"center",wrap:"wrap",style:{margin:"20px 20px 10px 0px"}},r.a.createElement(be.a,{item:!0,xs:12},r.a.createElement(Ve.a,{title:"Storage Location",columns:this.state.columns,data:this.state.data,components:{Toolbar:function(t){return r.a.createElement("div",null,r.a.createElement(Le.MTableToolbar,t),r.a.createElement("div",{style:{padding:"0px 15px"}},r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:function(){return e.openForm(t.rowData)},"aria-label":"add"},r.a.createElement(wt.a,null))))}},actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.data,columns:e.state.columns,fileName:"StorageLocation"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.initStorageLocation()}},{icon:"edit",tooltip:"Edit User",onClick:function(t,a){return e.openForm(a)}},{icon:"delete",tooltip:"Delete User",onClick:function(t,a){return e.dialogOpen(a)}}]})),r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-evenly",alignItems:"center",md:10,xs:12,sm:12,xl:10,lg:10},this.state.formOpen?r.a.createElement(Kp,{formData:this.state.formData,openForm:this.openForm,formOpen:this.state.formOpen,onSuccess:this.onSuccess,formAction:this.state.formAction}):""),this.state.snackOpen?r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:600,open:this.state.snackOpen,onClose:this.snackClose,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}):"",this.state.dialogOpen?r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.closeDialog,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.closeDialog,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDelete,color:"primary"},"Delete"))):"")}}]),t}(r.a.Component),Xp=Zp,$p=(a(897),{properties:{Factory:{description:"",type:["string","object"],messages:{conform:"Factory cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},HSNo:{description:"",type:"any",required:!0,allowEmpty:!1,messages:{conform:"HS number cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},Capacity:{description:"",type:"number",exclusiveMinimum:0,messages:{conform:"Capacity cannot be empty.",exclusiveMinimum:"Capacity must be greater than 0."},conform:function(e){return""!==e&&void 0!==e}},NumberStartPeriod:{description:"",type:"any",messages:{conform:"Number start period cannot be empty."},conform:function(e){return""!==e&&void 0!==e}}}}),ef=a(24),tf={validateFields:function(e){return ef.validate(e,$p,{cast:!0})},get:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="hsMaster/"+e,a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?(console.log(e),{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}):200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 2:case"end":return a.stop()}}))},getFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("hsMaster-filter/").concat(e),a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 2:case"end":return a.stop()}}))},getOne:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("hsMaster/").concat(e),a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 2:case"end":return a.stop()}}))},update:function(e,t){return Qe("hsMaster/"+e,t).then((function(e){return console.log(e),200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Updated",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="hsMaster/"+e,n.abrupt("return",He(a,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Added",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,formValid:!0,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("hsMaster/"+e).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}}))}},af=tf,nf={Factory:"",HSNo:"",Capacity:0,NumberStartPeriod:new Date,LastNumbering:0,Remarks:"",Details:[],Inactive:!1,CreatedAt:new Date,CreatedBy:"Admin",LastUpdatedAt:new Date,LastUpdatedBy:"Admin"},rf=nf,of=(a(898),a(23)),sf={Factory:{valid:!0,message:""},HSNo:{valid:!0,message:""},Capacity:{valid:!0,message:""},NumberStartPeriod:{valid:!0,message:""},LastNumbering:{valid:!0,message:""},Remarks:{valid:!0,message:""},Inactive:{valid:!0,message:""}},lf=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).closeForm=function(){a.setState({formControl:of(sf)},(function(){return a.props.openForm(null)}))},a.snackOpen=function(e,t,n){var r;return l.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(""!==t){o.next=4;break}a.setState({snackOpen:!a.state.snackOpen,alertMessage:n,alertClass:e}),o.next=8;break;case 4:return o.next=6,l.a.awrap(ka(e,t));case 6:r=o.sent,a.setState({snackOpen:!a.state.snackOpen,alertMessage:r,alertClass:e});case 8:case"end":return o.stop()}}))},a.onSave=function(){var e=Object(me.a)({},a.state.formData),t=Object(me.a)({},a.state.formControl),n=af.validateFields(e);n.valid?(e.Format="".concat(e.HSNo.trim()," - {yy}{mm} - 000"),"Add"===a.props.formAction?af.add("",e).then((function(e){!0===e.code?a.props.onSuccess(e.data):null!==e.errors&&Array.isArray(e.errors)?(e.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t})):a.snackOpen("error","server")})):af.update("",e).then((function(e){!0===e.code?a.props.onSuccess(e.data):null!==e.errors&&Array.isArray(e.errors)?(e.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t})):a.snackOpen("error","server")}))):(n.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t}),a.snackOpen("error","alertValidation"))},a.state={formData:a.props.formData,formOpen:a.props.formOpen,formControl:of(sf),disabled:!1,snackOpen:!1,snackMessage:"",snackClass:""},a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"handleChange",value:function(e,t,a){var n=Object(me.a)({},this.state.formData),r=Object(me.a)({},this.state.formControl);!a||void 0!==e&&""!==e?(r[t].valid=!0,r[t].message=""):(r[t].valid=!1,r[t].message="".concat(t," cannot be empty.")),n[t]=e,this.setState({formData:n,formControl:r})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(Ae.a,{fullScreen:!0,open:this.state.formOpen,onClose:this.closeForm,TransitionComponent:this.Transition},r.a.createElement(w.a,{className:"appBar"},r.a.createElement(F.a,null,r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:this.closeForm,"aria-label":"close"},r.a.createElement(Vt.a,null)),r.a.createElement(x.a,{variant:"h6",className:"app-title"},"HS Master"),r.a.createElement(he.a,{color:"inherit",disabled:this.state.disabled,onClick:this.onSave},"Save"))),r.a.createElement(_e.a,null,r.a.createElement("div",{className:"form-container"},r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-evenly",alignItems:"center",md:6,xs:12,sm:12,xl:8,lg:8},r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(Hr,{selectedValue:this.state.formData.Factory,propertyName:"Factory",handleChange:this.handleChange,formControl:this.state.formControl.Factory,required:!0})),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"HSMaster",required:!0,label:"HS Number",error:!this.state.formControl.HSNo.valid,helperText:this.state.formControl.HSNo.message,defaultValue:this.state.formData.HSNo,onChange:function(t){return e.handleChange(t.target.value.trim(),"HSNo",!0)},margin:"dense"}))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{id:"Capacity",label:"Capacity (kg)",customInput:ge.a,value:this.state.formData.Capacity,onValueChange:function(t){return e.handleChange(t.floatValue,"Capacity",!0)},onFocus:function(e){e.target.select()},decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0,error:!this.state.formControl.Capacity.valid,helperText:this.state.formControl.Capacity.message}))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Da.b,{style:{width:"100%"},margin:"dense",id:"date-picker-dialog",label:"Date",format:"MMM-yyyy",views:["year","month"],openTo:"month",error:!this.state.formControl.NumberStartPeriod.valid,value:this.state.formData.NumberStartPeriod,onChange:function(t){return e.handleChange(new Date(t),"NumberStartPeriod",!0)},KeyboardButtonProps:{"aria-label":"Month"},disabled:this.props.formData.IsUsed})),r.a.createElement(Sa.a,{error:!this.state.formControl.NumberStartPeriod.valid,style:{display:this.state.formControl.NumberStartPeriod.valid?"none":""}},this.state.formControl.NumberStartPeriod.message))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"LastNumbering",label:"Start Number",value:this.state.formData.LastNumbering,onChange:function(t){return e.handleChange(Math.trunc(t.target.value),"LastNumbering",!1)},onFocus:function(e){e.target.select()},margin:"dense",type:"number",min:"0",step:"1",disabled:this.props.formData.IsUsed}))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"Remarks",label:"Remarks",multiline:!0,defaultValue:this.state.formData.Remarks,onChange:function(t){return e.handleChange(t.target.value,"Remarks",!1)},margin:"dense"}))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ga.a,{component:"label"},"Inactive"),r.a.createElement(Xe.a,{checked:this.state.formData.Inactive,color:"primary",inputProps:{"aria-label":"primary checkbox"},onChange:function(t){return e.handleChange(t.target.checked,"Inactive",!0)},margin:"dense"}))))))),this.state.snackOpen?r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:600,open:this.state.snackOpen,onClose:this.snackClose,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}):"")}}],[{key:"getDerivedStateFromProps",value:function(e,t){return{formOpen:e.formOpen}}}]),t}(r.a.Component),cf=lf,uf=a(23),df=function(e){function t(e){var a;arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).snackOpen=function(e,t,n){var r;return l.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(""!==t){o.next=4;break}a.setState({snackOpen:!a.state.snackOpen,alertMessage:n,alertClass:e}),o.next=8;break;case 4:return o.next=6,l.a.awrap(ka(e,t));case 6:r=o.sent,a.setState({snackOpen:!a.state.snackOpen,alertMessage:r,alertClass:e});case 8:case"end":return o.stop()}}))},a.snackClose=function(){a.setState({snackOpen:!1})},a.dialogOpen=function(e){var t;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,l.a.awrap(ka("confirmation","delete"));case 2:t=n.sent,a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:e,dialogMessage:r.a.createElement("span",null,void 0!==t?t.replace("[Name]","".concat(e.Factory.FctyCode," - ").concat(e.HSNo)):"")});case 4:case"end":return n.stop()}}))},a.closeDialog=function(){a.setState({dialogOpen:!1,currentDeleteData:null,dialogMessage:""})},a.onDelete=function(){var e=Object(je.a)(a.state.data),t=e.indexOf(a.state.currentDeleteData);void 0!==a.state.currentDeleteData&&null!==a.state.currentDeleteData&&(a.state.currentDeleteData.IsUsed?a.snackOpen("error","","This Storage can not be deleted because it's already in used."):af.delete(a.state.currentDeleteData._id).then((function(n){!0===n.code?(e.splice(t,1),a.setState({data:e,dialogOpen:!1},(function(){return a.snackOpen("success","delete")}))):a.setState({dialogOpen:!1},(function(){return a.snackOpen("error","server")}))}))),a.closeDialog()},a.state={columns:[{title:"Factory",field:"Factory",render:function(e){return r.a.createElement("span",null,e.Factory.FctyCode)}},{title:"HS Number",field:"HSNo"},{title:"Capacity",field:"Capacity",render:function(e){return r.a.createElement(Xa.a,{value:e.Capacity,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"Number in Use",field:"NumberResult"},{title:"Description",field:"Remarks"},{title:"Status Full",field:"StatusFull",lookup:{0:"Empty",1:"Partial Fill",2:"Closed"}},{title:"Status Empty",field:"StatusEmpty",lookup:{0:"Empty",1:"Partial Out",2:"Closed"}},{title:"Inactive",field:"Inactive",type:"boolean",render:function(e){return r.a.createElement("span",null,e.Inactive?"Yes":"No")}},{title:"Operator",field:"LastUpdatedBy"},{title:"Last Updated",field:"LastUpdatedAt",render:function(e){return r.a.createElement("span",null,new Date(e.LastUpdatedAt).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}))}}],data:[],formData:null,currentDeleteData:null,formOpen:!1,formAction:"",snackOpen:!1,dialogOpen:!1,alertMessage:"",dialogMessage:"",alertClass:""},a.HSMasterModel=uf(rf),a.openForm=a.openForm.bind(Object(Pe.a)(a)),a.onSuccess=a.onSuccess.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initHSMaster()}},{key:"openForm",value:function(e){var t=e,a=this.state.formAction;void 0===t||null===t?(t=this.HSMasterModel,a="Add"):a="update",this.setState({formData:t,formOpen:!this.state.formOpen,formAction:a})}},{key:"initHSMaster",value:function(){var e=this;af.get("").then((function(t){!0===t.code?e.setState({data:t.data}):e.snackOpen("error","server")}))}},{key:"onSuccess",value:function(e){var t=this,a=Object(je.a)(this.state.data);if(void 0!==e&&null!==e)if("Add"===this.state.formAction)a.push(e),this.setState({data:a,formOpen:!this.state.formOpen,formAction:"",formData:null},(function(){return t.snackOpen("success","add")}));else{var n=a.indexOf(this.state.formData);a[n]=e,this.setState({data:a,formOpen:!this.state.formOpen,formAction:"",formData:null},(function(){return t.snackOpen("success","update")}))}else this.snackOpen("error","failed")}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{container:!0,direction:"column",justify:"center",wrap:"wrap",style:{margin:"20px 20px 10px 0px"}},r.a.createElement(be.a,{item:!0,xs:12},r.a.createElement(Ve.a,{title:"HS Master",columns:this.state.columns,data:this.state.data,components:{Toolbar:function(t){return r.a.createElement("div",null,r.a.createElement(Le.MTableToolbar,t),r.a.createElement("div",{style:{padding:"0px 15px"}},r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:function(){return e.openForm(t.rowData)},"aria-label":"add"},r.a.createElement(wt.a,null))))}},actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.data,columns:e.state.columns,fileName:"HSMaster"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.initHSMaster()}},{icon:"edit",tooltip:"Edit User",onClick:function(t,a){return e.openForm(a)}},{icon:"delete",tooltip:"Delete User",onClick:function(t,a){return e.dialogOpen(a)}}]})),r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-evenly",alignItems:"center",md:10,xs:12,sm:12,xl:10,lg:10},this.state.formOpen?r.a.createElement(cf,{formData:this.state.formData,openForm:this.openForm,formOpen:this.state.formOpen,onSuccess:this.onSuccess,formAction:this.state.formAction}):""),this.state.snackOpen?r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:600,open:this.state.snackOpen,onClose:this.snackClose,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}):"",this.state.dialogOpen?r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.closeDialog,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.closeDialog,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDelete,color:"primary"},"Delete"))):"")}}]),t}(r.a.Component),mf=df,pf=(a(899),a(900),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={MachineListData:[]},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){void 0!==this.props.selectedFactory&&null!==this.props.selectedFactory&&""!==this.props.selectedFactory&&this.initMachineListDropDown()}},{key:"componentDidUpdate",value:function(e,t,a){e.selectedFactory!==this.props.selectedFactory&&this.initMachineListDropDown()}},{key:"initMachineListDropDown",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:void 0!==this.props.selectedFactory&&null!==this.props.selectedFactory&&""!==this.props.selectedFactory&&Do("getMachineListDropDownData/".concat(this.props.selectedFactory,"/").concat(this.props.abvrs)).then((function(t){void 0!==t&&null!==t&&e.setState({MachineListData:t.data})}));case 1:case"end":return t.stop()}}),null,this)}},{key:"renderOptions",value:function(){var e=this;return this.state.MachineListData.map((function(t,a){return r.a.createElement(et.a,{label:"Select ".concat(e.props.machineType," Number"),value:t._id,key:t._id,name:t.MachLstCode},r.a.createElement(E.a,{style:{width:"100%"}},r.a.createElement(b.a,{alignItems:"flex-start"},r.a.createElement(S.a,{primary:t.MachLstCode,style:{width:"20%"}}),r.a.createElement(S.a,{primary:t.MachLstRemarks,style:{width:"80%"}}))))}))}},{key:"handleChange",value:function(e){var t=this.state.MachineListData.find((function(t){return t._id===e.target.value}));void 0!==t?this.props.handleChange(t,this.props.propertyName,this.props.required):this.props.handleChange("",this.props.propertyName,this.props.required)}},{key:"render",value:function(){var e=this;return r.a.createElement(ya.a,{style:{width:"100%",paddingTop:7}},r.a.createElement(Ea.a,{shrink:!0,htmlFor:"MachineList",required:!0,error:!this.props.formControl.valid},this.props.machineType," - Description"),r.a.createElement(ba.a,{id:this.props.propertyName,value:void 0===this.props.selectedValue||void 0===this.props.selectedValue._id?"":this.props.selectedValue._id,style:{minWidth:190},error:!this.props.formControl.valid,onChange:function(t){return e.handleChange(t,e.props.propertyName)},margin:"dense",displayEmpty:!0},r.a.createElement(et.a,{value:""},r.a.createElement("em",null,"Select ",this.props.machineType)),this.renderOptions()),r.a.createElement(Sa.a,{error:!this.props.formControl.valid,style:{display:this.props.formControl.valid?"none":""}},this.props.formControl.valid?"":this.props.formControl.message))}}]),t}(r.a.Component)),ff=pf,hf={properties:{Factory:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Factory cannot be empty.",conform:"Factory cannot be empty.",required:"Factory cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},Line:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Line cannot be empty.",conform:"Line cannot be empty.",required:"Line cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},Process:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Process cannot be empty.",conform:"Process cannot be empty.",required:"Process cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},MachineList:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Tank Number cannot be empty.",conform:"Tank Number cannot be empty.",required:"Tank Number cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},MaxTDSValue:{description:"",type:"any"},Remarks:{description:"",type:"string"},CreatedAt:{type:"any",default:Date.now()},CreatedBy:{type:"string",default:""},LastUpdatedAt:{type:"any",default:Date.now()},LastUpdatedBy:{type:"string",default:""}}},gf=a(24),yf={validateFields:function(e){return gf.validate(e,hf,{cast:!0})},getwaterQualityConfiguration:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="waterQtyConfiguration/"+e,a.abrupt("return",We(t).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},getwaterQualityConfigurationFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("waterQtyConfiguration-filter/").concat(e),a.abrupt("return",We(t).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},getOnewaterQualityConfiguration:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("waterQtyConfiguration/").concat(e),a.abrupt("return",We(t).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},update:function(e,t){return Qe("waterQtyConfiguration/"+e,t).then((function(e){return console.log(e),200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Updated",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="waterQtyConfiguration/"+e,n.abrupt("return",He(a,t).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Added",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,formValid:!0,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("waterQtyConfiguration/"+e).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))}},vf=yf,Cf=a(23),Df=(Object(n.forwardRef)((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),r.a.forwardRef((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),{Factory:{valid:!0,message:""},Line:{valid:!0,message:""},Process:{valid:!0,message:""},MachineList:{valid:!0,message:""}}),Ef=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).snackOpen=function(e,t){a.setState({snackOpen:!a.state.snackOpen,alertMessage:e,alertClass:t})},a.dialogOpen=function(e){a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:e,dialogMessage:r.a.createElement("span",null,"Are you sure to delete this record"," ",r.a.createElement("b",null,e.Factory.FctyName)," ? This cannot be undone.")})},a.diaLogClose=function(){a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:null})},a.onDelete=function(){null!==a.state.currentDeleteData&&vf.delete("".concat(a.state.currentDeleteData._id)).then((function(e){if(!0===e.code){var t=Object(je.a)(a.state.data),n=t.indexOf(a.state.currentDeleteData);t.splice(n,1),a.setState({data:t,currentDeleteData:"",dialogOpen:!a.state.dialogOpen}),a.snackOpen("Successfully Deleted!","success")}else a.snackOpen("Oops, something went wrong while processing your request!","error")}))},a.state={formControls:Cf(Df),columns:[{title:"Factory",field:"Factory",render:function(e){return r.a.createElement("span",null,e.Factory.FctyName)},editComponent:function(e){return r.a.createElement(Hr,{selectedValue:e.value,formControl:a.state.formControls.Factory,propertyName:"Factory",required:!0,handleChange:function(t){e.onChange(t),a.resetFormControl(t,"Factory")}})}},{title:"Line",field:"Line",render:function(e){return r.a.createElement("span",null,e.Line.Name)},editComponent:function(e){return r.a.createElement(pp,{selectedFactory:void 0===e.rowData.Factory?"":e.rowData.Factory._id,selectedValue:e.value,formControl:a.state.formControls.Line,propertyName:"Line",required:!0,handleChange:function(t){e.onChange(t),a.resetFormControl(t,"Line")}})}},{title:"Process",field:"Process",render:function(e){return r.a.createElement("span",null,e.Process.ProcName)},editComponent:function(e){return r.a.createElement(hp,{selectedValue:e.value,formControl:a.state.formControls.Process,propertyName:"Process",required:!0,handleChange:function(t){e.onChange(t),a.resetFormControl(t,"Process")}})}},{title:"Tank Number",field:"MachineList",render:function(e){return r.a.createElement("span",null,e.MachineList.MachLstCode)},editComponent:function(e){return r.a.createElement(ff,{selectedFactory:void 0===e.rowData.Factory?"":e.rowData.Factory._id,selectedValue:e.value,formControl:a.state.formControls.MachineList,propertyName:"MachineList",required:!0,handleChange:function(t){e.onChange(t),a.resetFormControl(t,"MachineList")},machineType:"Tank",abvrs:"TC,TS"})}},{title:"Max. TDS Value",field:"MaxTDSValue",editComponent:function(e){return r.a.createElement(Xa.a,{customInput:ge.a,label:"Max. TDS Value",defaultValue:void 0===e.value?0:e.value,decimalSeparator:".",decimalScale:2,fixedDecimalScale:!0,onValueChange:function(t){e.onChange(void 0===t.floatValue?0:t.floatValue)}})}},{title:"Remarks",field:"Remarks",type:"string",editComponent:function(e){return r.a.createElement(ge.a,{margin:"dense",id:"Remarks",label:"Remarks",type:"text",defaultValue:e.rowData.Remarks,onChange:function(t){return e.onChange(t.target.value)}})}},{title:"Operator",field:"LastUpdatedBy",editable:"never"},{title:"Last Updated",field:"LastUpdatedAt",render:function(e){return r.a.createElement("span",null,void 0===e?"":new Date(e.LastUpdatedAt).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}))}}],data:[],currentDeleteData:"",dialogOpen:!1,snackOpen:!1,alertMessage:"",dialogMessage:"",alertClass:""},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initwaterQtyConfig()}},{key:"initwaterQtyConfig",value:function(){var e=this;vf.getwaterQualityConfiguration("").then((function(t){if(!0===t.code){var a=Object(je.a)(e.state.data);a=t.data,e.setState({data:a})}}))}},{key:"initFormControl",value:function(){this.setState({formControls:Cf(Df)})}},{key:"resetFormControl",value:function(e,t){var a=Object(me.a)({},this.state.formControls);void 0!==e&&null!==e&&""!==e&&(a[t].valid=!0,a[t].message=""),this.setState({formControls:a})}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{container:!0,direction:"column",justify:"center",wrap:"wrap",style:{margin:"20px 20px 10px 0px"}},r.a.createElement(be.a,{item:!0,xs:12},r.a.createElement(Ve.a,{title:"Water Quality Configuration",columns:this.state.columns,data:this.state.data,editable:{onRowAdd:function(t){return new Promise((function(a,n){setTimeout((function(){var r=Object(je.a)(e.state.data),o=Object(me.a)({},e.state.formControls),s=vf.validateFields(t);s.valid?vf.add("",t).then((function(t){!0===t.code?(r.push(t.data),e.snackOpen("Successfully added!","success"),e.setState({data:r},(function(){return a()}))):(n(),t.errors.map((function(e){o[e.property].valid=!1,o[e.property].message=e.message})),e.setState({formControls:o}),e.snackOpen("Please fix the error(s) highlighted to save the details!","error"))})).catch((function(t){n(),e.snackOpen("Oops, something went wrong while processing your request!","error")})):(n(),s.errors.map((function(e){o[e.property].valid=!1,o[e.property].message=e.message})),e.setState({formControls:o}))}),1e3)}))},onRowUpdate:function(t,a){return new Promise((function(n,r){setTimeout((function(){var o=Object(je.a)(e.state.data),s=e.state.formControls,i=vf.validateFields(t);i.valid?vf.update("",t).then((function(t){if(!0===t.code){var i=o.indexOf(a);o[i]=t.data,e.setState({data:o},(function(){return n()})),e.snackOpen("Successfully added!","success")}else r(),t.errors.map((function(e){return s[e.property].valid=!1,s[e.property].message=e.message,s})),e.setState({formControls:s}),e.snackOpen("Please fix the error(s) highlighted to save the details!","error")})).catch((function(t){r(),e.snackOpen("Oops, something went wrong while processing your request!","error")})):(r(),i.errors.map((function(e){s[e.property].valid=!1,s[e.property].message=e.message})),e.setState({formControls:s}))}),1e3)}))}},actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.data,columns:e.state.columns,fileName:"Water Qty Configuration"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.initwaterQtyConfig()}},{icon:"delete",tooltip:"Delete Contamination",onClick:function(t,a){return e.dialogOpen(a)}}],icons:{Clear:function(t){return r.a.createElement(Nt.a,{onClick:function(){e.initFormControl()},style:{padding:0,margin:0}})}},options:{}})),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:600,open:this.state.snackOpen,onClose:this.snackOpen,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.diaLogClose,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.diaLogClose,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDelete,color:"primary"},"Delete"))))}}]),t}(r.a.Component),bf=Ef,Sf=(a(901),{properties:{Factory:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Factory cannot be empty.",conform:"Factory cannot be empty.",required:"Factory cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},Line:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Line cannot be empty.",conform:"Line cannot be empty.",required:"Line cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},Process:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Process cannot be empty.",conform:"Process cannot be empty.",required:"Process cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},SubProcess:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Sub Process cannot be empty.",conform:"Sub Process cannot be empty.",required:"Sub Process cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},SubProcessNumber:{description:"",type:"string"},Remarks:{description:"",type:"string"},ToolDetail:{description:"",type:"array"},CreatedAt:{type:"any",default:Date.now()},CreatedBy:{type:"string",default:""},LastUpdatedAt:{type:"any",default:Date.now()},LastUpdatedBy:{type:"string",default:""}}}),Of={properties:{Tool:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Tool Type cannot be empty.",conform:"Tool Type cannot be empty.",required:"Tool Type cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},ToolQty:{description:"",type:"any"}}},kf=a(24),wf={validateFields:function(e){return kf.validate(e,Sf,{cast:!0})},validateToolDetailFields:function(e){return kf.validate(e,Of,{cast:!0})},getToolConfiguration:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="ToolConfiguration/"+e,a.abrupt("return",We(t).then((function(e){if(200===e.status&&null!==e.data.data){var t=e.data.data.map((function(e){return e}));return{code:!0,formValid:!0,message:ka("success","get"),data:t}}if(200===e.status&&null===e.data.data)return{code:!1,message:e.data.message,data:null}})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},getToolConfigurationFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("ToolConfiguration-filter/").concat(e),a.abrupt("return",We(t).then((function(e){if(200===e.status&&null!==e.data.data){var t=e.data.data;return{code:!0,formValid:!0,message:ka("success","get"),data:t}}if(200===e.status&&null===e.data.data)return{code:!1,message:e.data.message,data:null}})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},getOneToolConfiguration:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("ToolConfiguration/").concat(e),a.abrupt("return",We(t).then((function(e){if(200===e.status&&null!==e.data.data){var t=e.data.data;return{code:!0,formValid:!0,message:ka("success","get"),data:t}}if(200===e.status&&null===e.data.data)return{code:!1,message:e.data.message,data:null}})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},update:function(e,t){return Qe("ToolConfiguration/"+e,t).then((function(e){if(console.log(e),200===e.status&&null!==e.data.data&&null===e.data.errors){var t=e.data.data;return{code:!0,formValid:!0,message:ka("success","update"),errors:null,data:t}}if(200===e.status&&null!==e.data.errors)return{code:!1,message:e.data.message,errors:e.data.errors,data:null}})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="ToolConfiguration/"+e,n.abrupt("return",He(a,t).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:ka("success","add"),errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,formValid:!0,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("ToolConfiguration/"+e).then((function(e){if(200===e.status&&null!==e.data.data){var t=e.data.data;return{code:!0,formValid:!0,message:ka("success","delete"),data:t}}if(200===e.status&&null===e.data.data)return{code:!1,message:e.data.message,data:null}})).catch((function(e){throw e}))}},Ff=wf,xf={Factory:"",Line:"",Process:"",SubProcess:"",SubProcessNumber:"",Remarks:"",ToolDetail:[]},Tf=(a(902),a(903),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={toolData:[]},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initshippingInstruction()}},{key:"initshippingInstruction",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.awrap(Ze.getTool("").then((function(t){if(!0===t.code){var a=Object(je.a)(e.state.toolData);a=t.data,e.setState({toolData:a})}})));case 2:case"end":return t.stop()}}))}},{key:"renderOptions",value:function(){return this.state.toolData.map((function(e,t){return r.a.createElement(et.a,{label:"Select tool",value:e._id,key:e._id,name:e.Name},r.a.createElement(E.a,{style:{width:"100%"}},r.a.createElement(b.a,{alignItems:"flex-start"},r.a.createElement(S.a,{primary:e.Name,style:{width:"20%"}}),r.a.createElement(S.a,{primary:e.Criteria,style:{width:"80%"}}))))}))}},{key:"handleChange",value:function(e,t){var a=this.state.toolData.find((function(t){return t._id===e.target.value}));void 0!==a?this.props.handleChange(a,t,this.props.required):this.props.handleChange("",t,this.props.required)}},{key:"render",value:function(){var e=this;return r.a.createElement(ya.a,{style:{width:"100%",margin:4,paddingTop:7}},r.a.createElement(Ea.a,{shrink:!0,htmlFor:"tool",required:!0,error:!this.props.formControl.valid},"Code - Name"),r.a.createElement(ba.a,{id:this.props.propertyName,value:void 0===this.props.selectedValue||null===this.props.selectedValue||void 0===this.props.selectedValue._id?"":this.props.selectedValue._id,error:!this.props.formControl.valid,onChange:function(t){return e.handleChange(t,e.props.propertyName)},margin:"dense",displayEmpty:!0},r.a.createElement(et.a,{value:""},r.a.createElement("em",null,"Select Tool")),this.renderOptions()),r.a.createElement(Sa.a,{error:!this.props.formControl.valid,style:{display:this.props.formControl.valid?"none":""}},this.props.formControl.valid?"":this.props.formControl.message))}}]),t}(r.a.Component)),Nf=Tf,jf=a(23),Pf=(Object(n.forwardRef)((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),{Factory:{valid:!0,message:""},Line:{valid:!0,message:""},Process:{valid:!0,message:""},SubProcess:{valid:!0,message:""},Tool:{valid:!0,message:""}}),Af=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).closeForm=function(){a.setState({formControl:jf(Pf)},(function(){return a.props.closeForm()}))},a.snackOpen=function(e,t){var n;return l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0===e||null===e||void 0===t||null===t){r.next=7;break}return r.next=3,l.a.awrap(ka(e,t));case 3:n=r.sent,a.setState({snackOpen:!a.state.snackOpen,snackMessage:n,snackClass:e}),r.next=8;break;case 7:a.setState({snackOpen:!1});case 8:case"end":return r.stop()}}))},a.dialogOpen=function(e){var t;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(void 0===e||null===e){n.next=7;break}return n.next=3,l.a.awrap(ka("confirmation","delete"));case 3:t=n.sent,a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:e,dialogMessage:r.a.createElement("span",null,void 0!==t?t.replace("[Name]",e.Tool.Name):"")}),n.next=8;break;case 7:a.setState({dialogOpen:!1});case 8:case"end":return n.stop()}}))},a.onSave=function(){var e=Object(me.a)({},a.state.formData),t=Object(me.a)({},a.state.formControl),n=Ff.validateFields(e);if(n.valid){var r=1===e.SubProcessNumber.split(" - ").length?e.SubProcessNumber:e.SubProcessNumber.split(" - ")[1];e.SubProcessNumber="".concat(e.SubProcess.SubProcName," - ").concat(r),"Add"===a.props.formAction?Ff.add("",e).then((function(e){!0===e.code?a.props.onSuccess(e.data):null!==e.errors&&Array.isArray(e.errors)?(e.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t})):a.snackOpen("error","server")})):Ff.update("",e).then((function(e){!0===e.code?a.props.onSuccess(e.data):null!==e.errors&&Array.isArray(e.errors)?(e.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t})):a.snackOpen("error","server")}))}else n.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t}),a.snackOpen("error.","alertValidation")},a.onDelete=function(e,t){if(void 0!==a.state.currentDeleteData&&null!==a.state.currentDeleteData){var n=Object(je.a)(a.state.toolDetail),r=Object(me.a)({},a.state.formData),o=n.indexOf(a.state.currentDeleteData);n.splice(o,1),r.ToolDetail.splice(o,1),a.setState({toolDetail:n,formData:r,dialogOpen:!1},(function(){return Object(Pe.a)(a)}),a.snackOpen("success","delete"))}},a.state={formData:a.props.formData,formOpen:a.props.formOpen,columns:[{title:"Tools Type",field:"Tool",render:function(e){return r.a.createElement("span",null,null===e.Tool?"":e.Tool.Name)},editComponent:function(e){return r.a.createElement(Nf,{propertyName:"Tool",selectedValue:e.value,formControl:a.state.formControl.Tool,handleChange:function(t){e.onChange(t),a.resetFormControl(t,"Tool")}})}},{title:"Tools Qty",field:"ToolQty",render:function(e){return r.a.createElement("span",null,e.ToolQty)},editComponent:function(e){return r.a.createElement(Xa.a,{customInput:ge.a,label:"Tools Qty",defaultValue:void 0===e.value?0:e.value,onValueChange:function(t){e.onChange(void 0===t.floatValue?0:t.floatValue)}})}}],toolDetail:a.props.formData.ToolDetail,formControl:jf(Pf),selectedFactory:"",currentDeleteData:null,disabled:!1,dialogOpen:!1,dialogMessage:"",snackOpen:!1,snackMessage:"",snackClass:""},a.handelChange=a.handelChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"resetFormControl",value:function(e,t){var a=Object(me.a)({},this.state.formControl);void 0!==e&&null!==e&&""!==e&&(a[t].valid=!0,a[t].message=""),this.setState({formControl:a})}},{key:"initFormControl",value:function(){this.setState({formControl:jf(Pf)})}},{key:"handelChange",value:function(e,t,a){var n=Object(me.a)({},this.state.formData),r=Object(me.a)({},this.state.formControl);(a||"Factory"===t)&&(void 0===e||""===e?(r[t].valid=!1,r[t].message="".concat(t," cannot be empty.")):(r[t].valid=!0,r[t].message="")),n[t]=e,this.setState({formData:n})}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{container:!0},r.a.createElement(Ae.a,{fullScreen:!0,open:this.state.formOpen,onClose:this.closeForm,TransitionComponent:this.Transition},r.a.createElement(w.a,{className:"appBar"},r.a.createElement(F.a,null,r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:this.closeForm,"aria-label":"close"},r.a.createElement(Vt.a,null)),r.a.createElement(x.a,{variant:"h6",className:"app-title"},"Factory Tool Configuration"),r.a.createElement(he.a,{color:"inherit",disabled:this.state.disabled,onClick:this.onSave},"save"))),r.a.createElement(_e.a,null,r.a.createElement("div",{className:"form-container"},r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-around",alignItems:"center",md:10,xs:12,sm:12,xl:10,lg:10},r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Hr,{selectedValue:this.state.formData.Factory,propertyName:"Factory",handleChange:this.handelChange,formControl:this.state.formControl.Factory}))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(pp,{selectedFactory:void 0===this.state.formData.Factory||""===this.state.formData.Factory?"":this.state.formData.Factory._id,selectedValue:this.state.formData.Line,formControl:this.state.formControl.Line,propertyName:"Line",required:!0,handleChange:function(t){e.handelChange(t,"Line",!0),e.resetFormControl(t,"Line")}})),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(hp,{selectedValue:this.state.formData.Process,formControl:this.state.formControl.Process,propertyName:"Process",required:!0,handleChange:function(t){e.handelChange(t,"Process",!0),e.resetFormControl(t,"Process")}})),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(yp,{selectedValue:this.state.formData.SubProcess,formControl:this.state.formControl.SubProcess,propertyName:"SubProcess",required:!0,handleChange:function(t){e.handelChange(t,"SubProcess",!0),e.resetFormControl(t,"SubProcess")}})),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"SubProcessNumber",label:"Sub Process Number",defaultValue:""===this.state.formData.SubProcessNumber?"":this.state.formData.SubProcessNumber.split("- ")[1],className:"",onChange:function(t){return e.handelChange(t.target.value,"SubProcessNumber",!1)},margin:"dense"}))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"Remarks",label:"Remarks",defaultValue:this.state.formData.Remarks,className:"",onChange:function(t){return e.handelChange(t.target.value,"Remarks",!1)},margin:"dense"}))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(Ve.a,{style:{width:"100%",margin:4},title:"Tool Detail",columns:this.state.columns,data:this.state.toolDetail,editable:{onRowAdd:function(t){return new Promise((function(a,n){setTimeout((function(){var r=Object(me.a)({},e.state.formData),o=Object(je.a)(e.state.toolDetail),s=Object(me.a)({},e.state.formControl),i=Ff.validateToolDetailFields(t);i.valid?(o.push(t),r.ToolDetail.push({Tool:t.Tool._id,ToolQty:t.ToolQty}),e.setState({formData:r,toolDetail:o},(function(){return a()})),e.snackOpen("success","add")):(n(),console.log(i),i.errors.map((function(e){s[e.property].valid=!1,s[e.property].message=e.message})),e.setState({formControl:s}))}),1e3)}))},onRowUpdate:function(t,a){return new Promise((function(n,r){setTimeout((function(){var o=Object(me.a)({},e.state.formData),s=Object(je.a)(e.state.toolDetail),i=s.indexOf(a),l=e.state.formControl,c=Ff.validateToolDetailFields(t);c.valid?(s[i]=t,o.ToolDetail[i]={Tool:t.Tool._id,ToolQty:t.ToolQty},e.setState({formData:o,toolDetail:s},(function(){return n()})),e.snackOpen("success","update")):(r(),c.errors.map((function(e){l[e.property].valid=!1,l[e.property].message=e.message})),e.setState({formControl:l}))}),1e3)}))}},actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.data,columns:e.state.columns,fileName:"Broker"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.initToolDetail()}},{icon:"delete",tooltip:"Delete Contamination",onClick:function(t,a){return e.dialogOpen(a)}}],icons:{Clear:function(t){return r.a.createElement(Nt.a,{onClick:function(){e.initFormControl()},style:{padding:0,margin:0}})}},options:{}})))))),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.snackClass,autoHideDuration:600,open:this.state.snackOpen,onClose:this.snackOpen,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.snackMessage)}),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.dialogOpen,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.dialogOpen,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDelete,color:"primary"},"Delete"))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return{formOpen:e.formOpen}}}]),t}(r.a.Component),Mf=Af,_f=Mf,If=a(23),Rf=(Object(n.forwardRef)((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),r.a.forwardRef((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),{Factory:{valid:!0,message:""},Line:{valid:!0,message:""},Process:{valid:!0,message:""},SubProcess:{valid:!0,message:""},ProcessOutput:{valid:!0,message:""}}),Lf=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).snackOpen=function(e,t){var n;return l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0===e||null===e||void 0===t||null===t){r.next=7;break}return r.next=3,l.a.awrap(ka(e,t));case 3:n=r.sent,a.setState({snackOpen:!a.state.snackOpen,alertMessage:n,alertClass:e}),r.next=8;break;case 7:a.setState({snackOpen:!1});case 8:case"end":return r.stop()}}))},a.dialogOpen=function(e){var t;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,l.a.awrap(ka("confirmation","delete"));case 2:t=n.sent,a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:e,dialogMessage:r.a.createElement("span",null,void 0!==t?t.replace("[Name]",e.Factory.FctyName):"")});case 4:case"end":return n.stop()}}))},a.diaLogClose=function(){a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:null})},a.onDelete=function(){null!==a.state.currentDeleteData&&Ff.delete("".concat(a.state.currentDeleteData._id)).then((function(e){if(!0===e.code){var t=Object(je.a)(a.state.data),n=t.indexOf(a.state.currentDeleteData);t.splice(n,1),a.setState({data:t,currentDeleteData:"",dialogOpen:!a.state.dialogOpen},(function(){return a.snackOpen("success","delete")}))}else a.snackOpen("error","server")}))},a.state={formControls:If(Rf),columns:[{title:"Factory",field:"Factory",render:function(e){return r.a.createElement("span",null,e.Factory.FctyName)}},{title:"Line",field:"Line",render:function(e){return r.a.createElement("span",null,e.Line.Name)}},{title:"Process",field:"Process",render:function(e){return r.a.createElement("span",null,e.Process.ProcName)}},{title:"Sub Process",field:"SubProcess",render:function(e){return r.a.createElement("span",null,e.SubProcess.SubProcName)}},{title:"Sub Process Number",field:"SubProcessNumber"},{title:"Remarks",field:"Remarks"},{title:"Operator",field:"LastUpdatedBy",editable:"never"},{title:"Last Updated",field:"LastUpdatedAt",render:function(e){return r.a.createElement("span",null,void 0===e?"":new Date(e.LastUpdatedAt).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}))},editable:"never"}],data:[],formData:null,currentDeleteData:null,formOpen:!1,formAction:"",dialogOpen:!1,snackOpen:!1,alertMessage:"",dialogMessage:"",alertClass:""},a.toolConfigurationModel=If(xf),a.onSuccess=a.onSuccess.bind(Object(Pe.a)(a)),a.closeForm=a.closeForm.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initToolConfiguration()}},{key:"initToolConfiguration",value:function(){var e=this;Ff.getToolConfiguration("").then((function(t){!0===t.code&&e.setState({data:t.data})}))}},{key:"initFormControl",value:function(){this.setState({formControls:If(Rf)})}},{key:"openForm",value:function(e){var t,a=e;void 0===a||null===a?(a=If(xf),t="Add"):t="update",this.setState({formData:a,formOpen:!this.state.formOpen,formAction:t})}},{key:"closeForm",value:function(){this.setState({formData:null,formOpen:!1,formAction:""})}},{key:"onSuccess",value:function(e){var t=this,a=Object(je.a)(this.state.data);if(void 0!==e&&null!==e)if("Add"===this.state.formAction)a.push(e),this.setState({data:a,formOpen:!this.state.formOpen,formAction:"",currentRowData:null},(function(){return t.snackOpen("success","add")}));else{var n=a.indexOf(this.state.formData);a[n]=e,this.setState({data:a,formOpen:!this.state.formOpen,formAction:"",currentRowData:null},(function(){return t.snackOpen("success","update")}))}else this.snackOpen("error","server")}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{container:!0,direction:"column",justify:"center",wrap:"wrap",style:{margin:"20px 20px 10px 0px"}},r.a.createElement(be.a,{item:!0,xs:12},r.a.createElement(Ve.a,{title:"Tool Configuration",columns:this.state.columns,data:this.state.data,components:{Toolbar:function(t){return r.a.createElement("div",null,r.a.createElement(Le.MTableToolbar,t),r.a.createElement("div",{style:{padding:"0px 15px"}},r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:function(){return e.openForm(t.rowData)},"aria-label":"add"},r.a.createElement(wt.a,null))))}},actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.data,columns:e.state.columns,fileName:"Factory Tool Configuration"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.initToolConfiguration()}},{icon:"edit",tooltip:"Edit User",onClick:function(t,a){return e.openForm(a)}},{icon:"delete",tooltip:"Delete User",onClick:function(t,a){return e.dialogOpen(a)}}],icons:{Clear:function(t){return r.a.createElement(Nt.a,{onClick:function(){e.initFormControl()},style:{padding:0,margin:0}})}},options:{}})),r.a.createElement(be.a,{item:!0,xs:12},this.state.formOpen?r.a.createElement(_f,{formAction:this.state.formAction,formData:this.state.formData,formOpen:this.state.formOpen,onSuccess:this.onSuccess,closeForm:this.closeForm}):""),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:600,open:this.state.snackOpen,onClose:this.snackOpen,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.diaLogClose,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.diaLogClose,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDelete,color:"primary"},"Delete"))))}}]),t}(r.a.Component),Vf=Lf,Bf=Vf,Uf={properties:{Name:{description:"",type:"string",required:!0,allowEmpty:!1,messages:{allowEmpty:"Name cannot be empty.",conform:"Name cannot be empty.",required:"Name cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},Description:{description:"",type:"string"},CreatedAt:{type:"any",default:new Date},CreatedBy:{type:"string",default:""},LastUpdatedAt:{type:"any",default:new Date},LastUpdatedBy:{type:"string",default:""}}},qf=a(24),Gf={validateFields:function(e){return qf.validate(e,Uf,{cast:!0})},get:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="rmType/"+e,a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?(console.log(e),{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}):200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},getFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("rmType-filter/").concat(e),a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},getOne:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("rmType/").concat(e),a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},update:function(e,t){return Qe("rmType/"+e,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Updated",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="rmType/"+e,n.abrupt("return",He(a,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Added",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,formValid:!0,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("rmType/"+e).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))}},Wf=Gf,Hf=a(23),Qf={Name:{valid:!0,message:"",value:""},Description:{valid:!0,message:"",value:""},Inactive:{valid:!0,message:"",value:""}},zf=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).snackOpen=function(e,t){var n;return l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,l.a.awrap(ka(e,t));case 2:n=r.sent,a.setState({snackOpen:!a.state.snackOpen,alertMessage:n,alertClass:e});case 4:case"end":return r.stop()}}))},a.dialogOpen=function(e){a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:e,dialogMessage:r.a.createElement("span",null,"Are you sure to delete this record ",r.a.createElement("b",null,e.Name)," ? This cannot be undone.")})},a.onDelete=function(){null!==a.state.currentDeleteData&&Wf.delete("".concat(a.state.currentDeleteData._id)).then((function(e){if(!0===e.code){var t=Object(je.a)(a.state.data),n=t.indexOf(a.state.currentDeleteData);t.splice(n,1),a.setState({data:t,currentDeleteData:"",dialogOpen:!a.state.dialogOpen}),a.snackOpen("success","delete")}else a.snackOpen("error","server")}))},a.state={columns:[{title:"Name",field:"Name",editComponent:function(e){return r.a.createElement(ge.a,{required:!0,margin:"dense",id:"Name",label:"Name",type:"text",error:!a.state.formControls.Name.valid,helperText:a.state.formControls.Name.message,defaultValue:e.rowData.Name,onChange:function(t){a.handleChange(t.target.value.trim(),"Name",e.rowData,!0)}})}},{title:"Description",field:"Description",editComponent:function(e){return r.a.createElement(ge.a,{margin:"dense",id:"description",label:"Description",multiline:!0,rows:"2",type:"text",defaultValue:e.rowData.Description,onChange:function(t){a.handleChange(t.target.value,"Description",e.rowData,!1)}})}},{title:"Inactive",field:"Inactive",type:"boolean",render:function(e){return r.a.createElement("span",null,e.Inactive?"Yes":"No")},editComponent:function(e){return r.a.createElement(Xe.a,{checked:e.rowData.Inactive,onChange:function(t){a.handleChange(t.target.checked,"Inactive",e.rowData,!1)},value:e.value,inputProps:{"aria-label":"secondary checkbox"},color:"primary"})}},{title:"Operator",field:"LastUpdatedBy",editable:"never"},{title:"Last Updated",field:"LastUpdatedAt",render:function(e){return r.a.createElement("span",null,void 0===e?"":new Date(e.LastUpdatedAt).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}))},editable:"never"}],data:[],formControls:Hf(Qf),currentDeleteData:"",dialogOpen:!1,snackOpen:!1,alertMessage:"",dialogMessage:"",alertClass:""},a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initRMType()}},{key:"initRMType",value:function(){var e=this;Wf.get("").then((function(t){if(!0===t.code){var a=Object(je.a)(e.state.data);a=t.data,e.setState({data:a})}})).catch((function(e){}))}},{key:"initFormControl",value:function(){this.setState({formControls:Hf(Qf)})}},{key:"handleChange",value:function(e,t,a,n){var r=Object(me.a)({},this.state.formControls);n&&(void 0===e||""===e||null===e?(r[t].valid=!1,r[t].message="".concat(t," cannot be empty.")):(r[t].valid=!0,r[t].message="")),this.setState({formControls:r},(function(){return a[t]=e}))}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{container:!0,direction:"column",justify:"center",wrap:"wrap",style:{margin:"20px 20px 10px 0px"}},r.a.createElement(be.a,{item:!0,xs:12},r.a.createElement(Ve.a,{title:"RM Type",columns:this.state.columns,data:this.state.data,editable:{onRowAdd:function(t){return new Promise((function(a,n){setTimeout((function(){var r=Object(je.a)(e.state.data),o=Object(me.a)({},e.state.formControls),s=Wf.validateFields(t);s.valid?Wf.add("",t).then((function(t){!0===t.code?(r.push(t.data),e.snackOpen("success","add"),e.setState({data:r},(function(){return a()}))):(n(),t.errors.map((function(e){o[e.property].valid=!1,o[e.property].message=e.message})),e.setState({formControls:o}),e.snackOpen("error","alertValidation"))})).catch((function(t){n(),e.snackOpen("error","server")})):(n(),s.errors.map((function(e){o[e.property].valid=!1,o[e.property].message=e.message})),e.setState({formControls:o}))}),1e3)}))},onRowUpdate:function(t,a){return new Promise((function(n,r){setTimeout((function(){var o=Object(je.a)(e.state.data),s=e.state.formControls,i=Wf.validateFields(t);i.valid?Wf.update("",t).then((function(t){if(!0===t.code){var i=o.indexOf(a);o[i]=t.data,e.setState({data:o},(function(){return n()})),e.snackOpen("success","update")}else r(),t.errors.map((function(e){return s[e.property].valid=!1,s[e.property].message=e.message,s})),e.setState({formControls:s}),e.snackOpen("error","alertValidation")})).catch((function(t){r(),e.snackOpen("error","server")})):(r(),i.errors.map((function(e){s[e.property].valid=!1,s[e.property].message=e.message})),e.setState({formControls:s}))}),1e3)}))}},actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.data,columns:e.state.columns,fileName:"RMType"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.initRMType()}},{icon:"delete",tooltip:"Delete",onClick:function(t,a){return e.dialogOpen(a)}}],icons:{Clear:function(t){return r.a.createElement(Nt.a,{onClick:function(){e.initFormControl()},style:{padding:0,margin:0}})}}})),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:600,open:this.state.snackOpen,onClose:this.snackOpen,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.dialogOpen,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.dialogOpen,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDelete,color:"primary"},"Delete"))))}}]),t}(r.a.Component),Yf=zf,Kf=(a(904),{properties:{Factory:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Factory cannot be empty.",conform:"Factory cannot be empty.",required:"Factory cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},RMType:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"RM type cannot be empty.",conform:"RM type cannot be empty.",required:"RM type cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},Code:{description:"",type:"string",messages:{conform:"Code cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},Name:{description:"",type:"string",messages:{conform:"Name cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},Remarks:{description:"",type:"string"},ToolDetail:{description:"",type:"array"},Inactive:{description:"",type:"boolean"}}}),Jf={properties:{CriteriaName:{description:"",type:"string",required:!0,messages:{conform:"Criteria name cannot be empty.",required:"Criteria name cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},AcceptanceStd:{description:"",type:"string",required:!0,messages:{conform:"Acceptance standard cannot be empty.",required:"Acceptance standard cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},Description:{description:"",type:"string"},Inactive:{description:"",type:"boolean"}}},Zf=a(24),Xf={validateFields:function(e){return Zf.validate(e,Kf,{cast:!0})},validateDetailFields:function(e){return Zf.validate(e,Jf,{cast:!0})},get:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="rmGrade/"+e,a.abrupt("return",We(t).then((function(e){if(200===e.status&&null!==e.data.data){var t=e.data.data.map((function(e){return e}));return{code:!0,formValid:!0,message:ka("success","get"),data:t}}if(200===e.status&&null===e.data.data)return{code:!1,message:e.data.message,data:null}})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},getFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("rmGrade-filter/").concat(e),a.abrupt("return",We(t).then((function(e){if(200===e.status&&null!==e.data.data){var t=e.data.data;return{code:!0,formValid:!0,message:ka("success","get"),data:t}}if(200===e.status&&null===e.data.data)return{code:!1,message:e.data.message,data:null}})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},getOne:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("rmGrade/").concat(e),a.abrupt("return",We(t).then((function(e){if(200===e.status&&null!==e.data.data){var t=e.data.data;return{code:!0,formValid:!0,message:ka("success","get"),data:t}}if(200===e.status&&null===e.data.data)return{code:!1,message:e.data.message,data:null}})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},update:function(e,t){return Qe("rmGrade/"+e,t).then((function(e){if(console.log(e),200===e.status&&null!==e.data.data&&null===e.data.errors){var t=e.data.data;return{code:!0,formValid:!0,message:ka("success","update"),errors:null,data:t}}if(200===e.status&&null!==e.data.errors)return{code:!1,message:e.data.message,errors:e.data.errors,data:null}})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="rmGrade/"+e,n.abrupt("return",He(a,t).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:ka("success","add"),errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,formValid:!0,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("rmGrade/"+e).then((function(e){if(200===e.status&&null!==e.data.data){var t=e.data.data;return{code:!0,formValid:!0,message:ka("success","delete"),data:t}}if(200===e.status&&null===e.data.data)return{code:!1,message:e.data.message,data:null}})).catch((function(e){throw e}))}},$f=Xf,eh={Factory:"",RMType:"",Code:"",Name:"",Remarks:"",Inactive:!1,RMGradeDetail:[]},th=(a(905),a(906),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={rmTypeData:[]},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initRMTypeData(this.props.selectedFactory)}},{key:"initRMTypeData",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.awrap(Wf.getFilter("?Inactive=false").then((function(t){!0===t.code&&e.setState({rmTypeData:t.data})})));case 2:case"end":return t.stop()}}))}},{key:"renderOptions",value:function(){return this.state.rmTypeData.map((function(e,t){return r.a.createElement(et.a,{label:"Select rm type",value:e._id,key:e._id,name:e.Name},e.Name)}))}},{key:"handleChange",value:function(e,t){var a=this.state.rmTypeData.find((function(t){return t._id===e.target.value}));void 0!==a?this.props.handleChange(a,t,this.props.required):this.props.handleChange("",t,this.props.required)}},{key:"render",value:function(){var e=this,t=!this.props.formControl.valid;return r.a.createElement(ya.a,{style:{width:"100%"}},r.a.createElement(Ea.a,{shrink:!0,htmlFor:"rmType",required:!0,error:t},"Type of RM"),r.a.createElement(ba.a,{id:this.props.propertyName,value:void 0===this.props.selectedValue||void 0===this.props.selectedValue._id?"":this.props.selectedValue._id,error:t,onChange:function(t){return e.handleChange(t,e.props.propertyName)},margin:"dense",displayEmpty:!0},r.a.createElement(et.a,{value:""},r.a.createElement("em",null,"Select rm type")),this.renderOptions()),r.a.createElement(Sa.a,{error:t,style:{display:t?"":"none"}},this.props.required&&""===this.props.selectedValue?"RM type cannot be empty.":this.props.formControl.valid?"":this.props.formControl.message))}}]),t}(r.a.Component)),ah=th,nh=ah,rh=a(23),oh={Factory:{valid:!0,message:""},RMType:{valid:!0,message:""},Code:{valid:!0,message:""},Name:{valid:!0,message:""},Remarks:{valid:!0,message:""},Inactive:{valid:!0,message:""},CriteriaName:{valid:!0,message:""},AcceptanceStd:{valid:!0,message:""}},sh=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).closeForm=function(){a.setState({formControl:rh(oh)},(function(){return a.props.closeForm()}))},a.snackOpen=function(e,t){var n;return l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0===e||null===e||void 0===t||null===t){r.next=7;break}return r.next=3,l.a.awrap(ka(e,t));case 3:n=r.sent,a.setState({snackOpen:!a.state.snackOpen,snackMessage:n,snackClass:e}),r.next=8;break;case 7:a.setState({snackOpen:!1});case 8:case"end":return r.stop()}}))},a.dialogOpen=function(e){var t;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(void 0===e||null===e){n.next=7;break}return n.next=3,l.a.awrap(ka("confirmation","delete"));case 3:t=n.sent,a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:e,dialogMessage:r.a.createElement("span",null,void 0!==t?t.replace("[Name]",e.CriteriaName):"")}),n.next=8;break;case 7:a.setState({dialogOpen:!1});case 8:case"end":return n.stop()}}))},a.onSave=function(){var e=Object(me.a)({},a.state.formData),t=Object(me.a)({},a.state.formControl),n=$f.validateFields(e);n.valid?"Add"===a.props.formAction?$f.add("",e).then((function(e){!0===e.code?a.props.onSuccess(e.data):null!==e.errors&&Array.isArray(e.errors)?(e.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t})):a.snackOpen("error","server")})):$f.update("",e).then((function(e){!0===e.code?a.props.onSuccess(e.data):null!==e.errors&&Array.isArray(e.errors)?(e.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t})):a.snackOpen("error","server")})):(n.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t}),a.snackOpen("error","alertValidation"))},a.onDelete=function(e,t){if(void 0!==a.state.currentDeleteData&&null!==a.state.currentDeleteData){var n=Object(je.a)(a.state.RMGradeDetail),r=Object(me.a)({},a.state.formData),o=n.indexOf(a.state.currentDeleteData);n.splice(o,1),r.RMGradeDetail.splice(o,1),a.setState({RMGradeDetail:n,formData:r,dialogOpen:!1},(function(){return Object(Pe.a)(a)}),a.snackOpen("success","delete"))}},a.state={formData:a.props.formData,formOpen:a.props.formOpen,columns:[{title:"Criteria Name",field:"CriteriaName",editComponent:function(e){return r.a.createElement(ge.a,{required:!0,label:"Criteria Name",error:""===e.value||!a.state.formControl.CriteriaName.valid,helperText:""===e.value?"Criteria name cannot empty":a.state.formControl.CriteriaName.valid?"":a.state.formControl.CriteriaName.message,initialEditValue:"",defaultValue:e.rowData.CriteriaName,onChange:function(t){e.onChange(t.target.value)}})}},{title:"Acceptance Std",field:"AcceptanceStd",editComponent:function(e){return r.a.createElement(ge.a,{required:!0,label:"Acceptance Std",error:""===e.value||!a.state.formControl.AcceptanceStd.valid,helperText:""===e.value?"Acceptance standard cannot empty":a.state.formControl.AcceptanceStd.valid?"":a.state.formControl.AcceptanceStd.message,initialEditValue:"",defaultValue:e.rowData.AcceptanceStd,onChange:function(t){e.onChange(t.target.value)}})}},{title:"Description",field:"Description",editComponent:function(e){return r.a.createElement(ge.a,{label:"Description",initialEditValue:"",defaultValue:e.rowData.Description,onChange:function(t){e.onChange(t.target.value)}})}},{title:"Inactive",field:"Inactive",lookup:{true:"Yes",false:"No"},editComponent:function(e){return r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ga.a,{component:"label"},"Inactive"),r.a.createElement(Xe.a,{checked:e.rowData.Inactive,value:e.rowData.Inactive,color:"primary",inputProps:{"aria-label":"primary checkbox"},onChange:function(t){return e.onChange(t.target.checked)}}))}}],RMGradeDetail:a.props.formData.RMGradeDetail,formControl:rh(oh),selectedFactory:"",currentDeleteData:null,disabled:!1,dialogOpen:!1,dialogMessage:"",snackOpen:!1,snackMessage:"",snackClass:""},a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"initFormControl",value:function(){this.setState({formControls:rh(oh)})}},{key:"resetFormControl",value:function(e,t){var a=Object(me.a)({},this.state.formControl);void 0!==e&&null!==e&&""!==e&&(a[t].valid=!0,a[t].message=""),this.setState({formControl:a})}},{key:"handleChange",value:function(e,t,a){var n,r;return l.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(n=Object(me.a)({},this.state.formData),r=Object(me.a)({},this.state.formControl),!a&&"Factory"!==t){o.next=14;break}if(void 0!==e&&""!==e){o.next=12;break}return r[t].valid=!1,o.t0=t,o.next=8,l.a.awrap(ka("validation","empty"));case 8:o.t1=o.sent,r[t].message=o.t0+o.t1,o.next=14;break;case 12:r[t].valid=!0,r[t].message="";case 14:n[t]=e,this.setState({formData:n});case 16:case"end":return o.stop()}}),null,this)}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{container:!0},r.a.createElement(Ae.a,{fullScreen:!0,open:this.state.formOpen,onClose:this.closeForm,TransitionComponent:this.Transition},r.a.createElement(w.a,{className:"appBar"},r.a.createElement(F.a,null,r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:this.closeForm,"aria-label":"close"},r.a.createElement(Vt.a,null)),r.a.createElement(x.a,{variant:"h6",className:"app-title"},"RMGrade"),r.a.createElement(he.a,{color:"inherit",disabled:this.state.disabled,onClick:this.onSave},"save"))),r.a.createElement(_e.a,null,r.a.createElement("div",{className:"form-container"},r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-around",alignItems:"center",md:10,xs:12,sm:12,xl:10,lg:10},r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Hr,{selectedValue:this.state.formData.Factory,propertyName:"Factory",handleChange:this.handleChange,formControl:this.state.formControl.Factory}))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(nh,{selectedValue:this.state.formData.RMType,formControl:this.state.formControl.RMType,propertyName:"RMType",required:!0,handleChange:function(t){e.handleChange(t,"RMType",!0)}}))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"Code",label:"Code",required:!0,defaultValue:this.state.formData.Code,onChange:function(t){return e.handleChange(t.target.value.trim(),"Code",!0)},margin:"dense",error:!this.state.formControl.Code.valid,helperText:this.state.formControl.Code.valid?"":this.state.formControl.Code.message}))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{required:!0,id:"Name",label:"Name",defaultValue:this.state.formData.Name,onChange:function(t){return e.handleChange(t.target.value.trim(),"Name",!0)},margin:"dense",error:!this.state.formControl.Name.valid,helperText:this.state.formControl.Name.valid?"":this.state.formControl.Name.message}))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"Remarks",label:"Remarks",defaultValue:this.state.formData.Remarks,className:"",onChange:function(t){return e.handleChange(t.target.value,"Remarks",!1)},margin:"dense"}))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ga.a,{component:"label"},"Inactive"),r.a.createElement(Xe.a,{checked:this.state.formData.Inactive,value:this.state.formData.Inactive,color:"primary",inputProps:{"aria-label":"primary checkbox"},onChange:function(t){return e.handleChange(t.target.checked,"Inactive",!0)}}))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(Ve.a,{style:{width:"100%",margin:4},title:"RMGrade Detail",columns:this.state.columns,data:this.state.RMGradeDetail,editable:{onRowAdd:function(t){return new Promise((function(a,n){setTimeout((function(){var r=Object(me.a)({},e.state.formData),o=Object(je.a)(e.state.RMGradeDetail),s=Object(me.a)({},e.state.formControl),i=$f.validateDetailFields(t);i.valid?(o.push(t),r.RMGradeDetail.push({CriteriaName:t.CriteriaName,AcceptanceStd:t.AcceptanceStd,Description:t.Description,Inactive:t.Inactive}),e.setState({formData:r,RMGradeDetail:o},(function(){return a()}))):(n(),i.errors.map((function(e){s[e.property].valid=!1,s[e.property].message=e.message})),e.setState({formControl:s}))}),1e3)}))},onRowUpdate:function(t,a){return new Promise((function(n,r){setTimeout((function(){var o=Object(me.a)({},e.state.formData),s=Object(je.a)(e.state.RMGradeDetail),i=s.indexOf(a),l=e.state.formControl,c=$f.validateDetailFields(t);c.valid?(s[i]=t,o.RMGradeDetail[i]={CriteriaName:t.CriteriaName,AcceptanceStd:t.AcceptanceStd,Description:t.Description,Inactive:t.Inactive},e.setState({formData:o,RMGradeDetail:s},(function(){return n()}))):(r(),c.errors.map((function(e){l[e.property].valid=!1,l[e.property].message=e.message})),e.setState({formControl:l}))}),1e3)}))}},actions:[{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){}},{icon:"delete",tooltip:"Delete Contamination",onClick:function(t,a){return e.dialogOpen(a)}}],icons:{Clear:function(t){return r.a.createElement(Nt.a,{onClick:function(){e.initFormControl()},style:{padding:0,margin:0}})}},options:{search:!1}})))))),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.snackClass,autoHideDuration:600,open:this.state.snackOpen,onClose:this.snackOpen,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.snackMessage)}),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.dialogOpen,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.dialogOpen,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDelete,color:"primary"},"Delete"))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return{formOpen:e.formOpen}}}]),t}(r.a.Component),ih=sh,lh=ih,ch=a(23),uh=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).snackOpen=function(e,t){var n;return l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0===e||null===e||void 0===t||null===t){r.next=7;break}return r.next=3,l.a.awrap(ka(e,t));case 3:n=r.sent,a.setState({snackOpen:!a.state.snackOpen,alertMessage:n,alertClass:e}),r.next=8;break;case 7:a.setState({snackOpen:!1});case 8:case"end":return r.stop()}}))},a.dialogOpen=function(e){var t;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,l.a.awrap(ka("confirmation","delete"));case 2:t=n.sent,a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:e,dialogMessage:r.a.createElement("span",null,void 0!==t?t.replace("[Name]",e.Code):"")});case 4:case"end":return n.stop()}}))},a.diaLogClose=function(){a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:null})},a.onDelete=function(){null!==a.state.currentDeleteData&&$f.delete("".concat(a.state.currentDeleteData._id)).then((function(e){if(!0===e.code){var t=Object(je.a)(a.state.data),n=t.indexOf(a.state.currentDeleteData);t.splice(n,1),a.setState({data:t,currentDeleteData:"",dialogOpen:!a.state.dialogOpen},(function(){return a.snackOpen("success","delete")}))}else a.snackOpen("error","server")}))},a.state={columns:[{title:"Factory",field:"Factory",render:function(e){return r.a.createElement("span",null,e.Factory.FctyCode)}},{title:"Type",field:"RMType",render:function(e){return r.a.createElement("span",null,e.RMType.Name)}},{title:"Code",field:"Code"},{title:"Name",field:"Name"},{title:"Description",field:"Remarks"},{title:"Criteria Name",render:function(e){return r.a.createElement(E.a,null,e.RMGradeDetail.filter((function(e){return!1===e.Inactive})).map((function(e,t){return r.a.createElement(b.a,{divider:!0,key:e._id},r.a.createElement(S.a,{primary:e.CriteriaName}))})))}},{title:"Acceptance Std",render:function(e){return r.a.createElement(E.a,null,e.RMGradeDetail.filter((function(e){return!1===e.Inactive})).map((function(e,t){return r.a.createElement(b.a,{divider:!0,key:e._id},r.a.createElement(S.a,{primary:e.AcceptanceStd}))})))}},{title:"Criteria Status",render:function(e){return r.a.createElement("span",null,0===e.RMGradeDetail.length?"Criteria Pending":"Criteria Enter")}},{title:"Inactive",field:"Inactive",lookup:{true:"Yes",false:"No"}},{title:"Operator",field:"LastUpdatedBy"},{title:"Last Updated",field:"LastUpdatedAt",render:function(e){return r.a.createElement("span",null,new Date(e.LastUpdatedAt).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}))}}],data:[],formData:null,currentDeleteData:null,formOpen:!1,formAction:"",dialogOpen:!1,snackOpen:!1,alertMessage:"",dialogMessage:"",alertClass:""},a.rmGradeModel=ch(eh),a.onSuccess=a.onSuccess.bind(Object(Pe.a)(a)),a.closeForm=a.closeForm.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initrmGrade()}},{key:"initrmGrade",value:function(){var e=this;$f.get("").then((function(t){!0===t.code&&e.setState({data:t.data})}))}},{key:"openForm",value:function(e){var t,a=ch(e);void 0===e||null===e?(a=ch(this.rmGradeModel),t="Add"):t="update",this.setState({formData:a,formOpen:!this.state.formOpen,formAction:t})}},{key:"closeForm",value:function(){this.setState({formData:null,formOpen:!1,formAction:""})}},{key:"onSuccess",value:function(e){var t=this,a=Object(je.a)(this.state.data);if(void 0!==e&&null!==e)if("Add"===this.state.formAction)a.push(e),this.setState({data:a,formOpen:!this.state.formOpen,formAction:"",currentRowData:null},(function(){return t.snackOpen("success","add")}));else{var n=a.find((function(e){return e._id===t.state.formData._id})),r=a.indexOf(n);a[r]=e,this.setState({data:a,formOpen:!this.state.formOpen,formAction:"",currentRowData:null},(function(){return t.snackOpen("success","update")}))}else this.snackOpen("error","server")}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{container:!0,direction:"column",justify:"center",wrap:"wrap",style:{margin:"20px 20px 10px 0px"}},r.a.createElement(be.a,{item:!0,xs:12},r.a.createElement(Ve.a,{title:"RM Grade",columns:this.state.columns,data:this.state.data,components:{Toolbar:function(t){return r.a.createElement("div",null,r.a.createElement(Le.MTableToolbar,t),r.a.createElement("div",{style:{padding:"0px 15px"}},r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:function(){return e.openForm()},"aria-label":"add"},r.a.createElement(wt.a,null))))}},actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.data,columns:e.state.columns,fileName:"RM Grade"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.initrmGrade()}},{icon:"edit",tooltip:"Edit User",onClick:function(t,a){return e.openForm(a)}},{icon:"delete",tooltip:"Delete User",onClick:function(t,a){return e.dialogOpen(a)}}]})),r.a.createElement(be.a,{item:!0,xs:12},this.state.formOpen?r.a.createElement(lh,{formAction:this.state.formAction,formData:this.state.formData,formOpen:this.state.formOpen,onSuccess:this.onSuccess,closeForm:this.closeForm}):""),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:600,open:this.state.snackOpen,onClose:this.snackOpen,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.diaLogClose,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.diaLogClose,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDelete,color:"primary"},"Delete"))))}}]),t}(r.a.Component),dh=uh,mh=(a(907),{properties:{Factory:{type:["string","object"],required:!0,allowEmpty:!1,conform:function(e){return!(0===e||""===e||void 0===e)},messages:{conform:"Factory cannot be empty.",allowEmpty:"Factory cannot be empty."}},Name:{description:"",type:"string",required:!0,allowEmpty:!1,messages:{allowEmpty:"Name cannot be empty.",conform:"Name cannot be empty.",required:"Name cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},Description:{description:"",type:"string"},CreatedAt:{type:"any",default:new Date},CreatedBy:{type:"string",default:""},LastUpdatedAt:{type:"any",default:new Date},LastUpdatedBy:{type:"string",default:""}}}),ph=a(24),fh={validateFields:function(e){return ph.validate(e,mh,{cast:!0})},get:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="purchasingPersonnel/"+e,a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},getFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("purchasingPersonnel-filter/").concat(e),a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},getOne:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("purchasingPersonnel/").concat(e),a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},update:function(e,t){return Qe("purchasingPersonnel/"+e,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Updated",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="purchasingPersonnel/"+e,n.abrupt("return",He(a,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Added",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,formValid:!0,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("purchasingPersonnel/"+e).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))}},hh=fh,gh={Factory:"",Name:"",Description:"",Inactive:!1,CreatedAt:new Date,CreatedBy:"Admin",LastUpdatedAt:new Date,LastUpdatedBy:"Admin"},yh=(a(908),a(23)),vh={Factory:{valid:!0,message:""},Name:{valid:!0,message:""},Description:{valid:!0,message:""},Inactive:{valid:!0,message:""}},Ch=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).closeForm=function(){a.setState({formControl:yh(vh)},(function(){return a.props.closeForm()}))},a.snackOpen=function(e,t){var n;return l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0===e||null===e||void 0===t||null===t){r.next=7;break}return r.next=3,l.a.awrap(ka(e,t));case 3:n=r.sent,a.setState({snackOpen:!a.state.snackOpen,snackMessage:n,snackClass:e}),r.next=8;break;case 7:a.setState({snackOpen:!1});case 8:case"end":return r.stop()}}))},a.onSave=function(){var e=Object(me.a)({},a.state.formData),t=Object(me.a)({},a.state.formControl),n=hh.validateFields(e);n.valid?"Add"===a.props.formAction?hh.add("",e).then((function(e){!0===e.code?a.props.onSuccess(e.data):null!==e.errors&&Array.isArray(e.errors)?(e.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t},(function(){return a.snackOpen("error","alertValidation")}))):a.snackOpen("error","server")})):hh.update("",e).then((function(e){!0===e.code?a.props.onSuccess(e.data):null!==e.errors&&Array.isArray(e.errors)?(e.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t},(function(){return a.snackOpen("error","alertValidation")}))):a.snackOpen("error","server")})):(n.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t}),a.snackOpen("error","alertValidation"))},a.state={formData:a.props.formData,formOpen:a.props.formOpen,formControl:yh(vh),selectedFactory:"",currentDeleteData:null,disabled:!1,dialogMessage:"",snackOpen:!1,snackMessage:"",snackClass:""},a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"initFormControl",value:function(){this.setState({formControl:yh(vh)})}},{key:"resetFormControl",value:function(e,t){var a=Object(me.a)({},this.state.formControl);void 0!==e&&null!==e&&""!==e&&(a[t].valid=!0,a[t].message=""),this.setState({formControl:a})}},{key:"handleChange",value:function(e,t,a){var n,r;return l.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(n=Object(me.a)({},this.state.formData),r=Object(me.a)({},this.state.formControl),!a&&"Factory"!==t){o.next=14;break}if(void 0!==e&&""!==e){o.next=12;break}return r[t].valid=!1,o.t0=t,o.next=8,l.a.awrap(ka("validation","empty"));case 8:o.t1=o.sent,r[t].message=o.t0+o.t1,o.next=14;break;case 12:r[t].valid=!0,r[t].message="";case 14:n[t]=e,this.setState({formData:n});case 16:case"end":return o.stop()}}),null,this)}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{container:!0},r.a.createElement(Ae.a,{fullScreen:!0,open:this.state.formOpen,onClose:this.closeForm,TransitionComponent:this.Transition},r.a.createElement(w.a,{className:"appBar"},r.a.createElement(F.a,null,r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:this.closeForm,"aria-label":"close"},r.a.createElement(Vt.a,null)),r.a.createElement(x.a,{variant:"h6",className:"app-title"},"purchasingPersonnel"),r.a.createElement(he.a,{color:"inherit",disabled:this.state.disabled,onClick:this.onSave},"save"))),r.a.createElement(_e.a,null,r.a.createElement("div",{className:"form-container"},r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-around",alignItems:"center",md:10,xs:12,sm:12,xl:10,lg:10},r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Hr,{selectedValue:this.state.formData.Factory,propertyName:"Factory",handleChange:this.handleChange,formControl:this.state.formControl.Factory}))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{required:!0,id:"Name",label:"Name",defaultValue:this.state.formData.Name,onChange:function(t){return e.handleChange(t.target.value.trim(),"Name",!0)},margin:"dense",error:!this.state.formControl.Name.valid,helperText:this.state.formControl.Name.message}))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"Description",label:"Description",defaultValue:this.state.formData.Description,className:"",onChange:function(t){return e.handleChange(t.target.value,"Description",!1)},margin:"dense"}))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ga.a,{component:"label"},"Inactive"),r.a.createElement(Xe.a,{checked:this.state.formData.Inactive,value:this.state.formControl.Inactive.value,color:"primary",inputProps:{"aria-label":"primary checkbox"},onChange:function(t){return e.handleChange(t.target.checked,"Inactive",!0)}}))))))),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.snackClass,autoHideDuration:1e3,open:this.state.snackOpen,onClose:this.snackOpen,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.snackMessage)}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return{formOpen:e.formOpen}}}]),t}(r.a.Component),Dh=Ch,Eh=Dh,bh=a(23),Sh=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).snackOpen=function(e,t){var n;return l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0===e||null===e||void 0===t||null===t){r.next=7;break}return r.next=3,l.a.awrap(ka(e,t));case 3:n=r.sent,a.setState({snackOpen:!a.state.snackOpen,alertMessage:n,alertClass:e}),r.next=8;break;case 7:a.setState({snackOpen:!1});case 8:case"end":return r.stop()}}))},a.dialogOpen=function(e){var t;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,l.a.awrap(ka("confirmation","delete"));case 2:t=n.sent,a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:e,dialogMessage:r.a.createElement("span",null,void 0!==t?t.replace("[Name]",e.Name):"")});case 4:case"end":return n.stop()}}))},a.diaLogClose=function(){a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:null})},a.onDelete=function(){null!==a.state.currentDeleteData&&hh.delete("".concat(a.state.currentDeleteData._id)).then((function(e){if(!0===e.code){var t=Object(je.a)(a.state.data),n=t.indexOf(a.state.currentDeleteData);t.splice(n,1),a.setState({data:t,currentDeleteData:"",dialogOpen:!a.state.dialogOpen},(function(){return a.snackOpen("success","delete")}))}else a.snackOpen("error","server")}))},a.state={columns:[{title:"Factory",field:"Factory",render:function(e){return r.a.createElement("span",null,e.Factory.FctyCode)}},{title:"Name",field:"Name"},{title:"Description",field:"Description"},{title:"Inactive",field:"Inactive",lookup:{true:"Yes",false:"No"}},{title:"Operator",field:"LastUpdatedBy"},{title:"Last Updated",field:"LastUpdatedAt",render:function(e){return r.a.createElement("span",null,new Date(e.LastUpdatedAt).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}))}}],data:[],formData:null,currentDeleteData:null,formOpen:!1,formAction:"",dialogOpen:!1,snackOpen:!1,alertMessage:"",dialogMessage:"",alertClass:""},a.purchasingPersonnelModel=bh(gh),a.onSuccess=a.onSuccess.bind(Object(Pe.a)(a)),a.closeForm=a.closeForm.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initPurchasingPersonnel()}},{key:"initPurchasingPersonnel",value:function(){var e=this;hh.get("").then((function(t){!0===t.code&&e.setState({data:t.data})}))}},{key:"openForm",value:function(e){var t,a=e;void 0===a||null===a?(a=this.purchasingPersonnelModel,t="Add"):t="update",this.setState({formData:a,formOpen:!this.state.formOpen,formAction:t})}},{key:"closeForm",value:function(){this.setState({formData:null,formOpen:!1,formAction:""})}},{key:"onSuccess",value:function(e){var t=this,a=Object(je.a)(this.state.data);if(void 0!==e&&null!==e)if("Add"===this.state.formAction)a.push(e),this.setState({data:a,formOpen:!this.state.formOpen,formAction:"",currentRowData:null},(function(){return t.snackOpen("success","add")}));else{var n=a.indexOf(this.state.formData);a[n]=e,this.setState({data:a,formOpen:!this.state.formOpen,formAction:"",currentRowData:null},(function(){return t.snackOpen("success","update")}))}else this.snackOpen("error","server")}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{container:!0,direction:"column",justify:"center",wrap:"wrap",style:{margin:"20px 20px 10px 0px"}},r.a.createElement(be.a,{item:!0,xs:12},r.a.createElement(Ve.a,{title:"Purchasing Personnel",columns:this.state.columns,data:this.state.data,components:{Toolbar:function(t){return r.a.createElement("div",null,r.a.createElement(Le.MTableToolbar,t),r.a.createElement("div",{style:{padding:"0px 15px"}},r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:function(){return e.openForm(t.rowData)},"aria-label":"add"},r.a.createElement(wt.a,null))))}},actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.data,columns:e.state.columns,fileName:"Purchasing Personnel"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.initPurchasingPersonnel()}},{icon:"edit",tooltip:"Edit",onClick:function(t,a){return e.openForm(a)}},{icon:"delete",tooltip:"Delete",onClick:function(t,a){return e.dialogOpen(a)}}]})),r.a.createElement(be.a,{item:!0,xs:12},this.state.formOpen?r.a.createElement(Eh,{formAction:this.state.formAction,formData:this.state.formData,formOpen:this.state.formOpen,onSuccess:this.onSuccess,closeForm:this.closeForm}):""),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:600,open:this.state.snackOpen,onClose:this.snackOpen,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.diaLogClose,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.diaLogClose,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDelete,color:"primary"},"Delete"))))}}]),t}(r.a.Component),Oh=Sh,kh=Oh,wh=(a(909),{Factory:"",LotNumber:"",Date:new Date,RMGrade:"",Allocated:!1,CreatedAt:new Date,CreatedBy:"Admin",LastUpdatedAt:new Date,LastUpdatedBy:"Admin"}),Fh=(a(910),a(911),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={rmGradeData:[]},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){void 0!==this.props.selectedFactory&&""!==this.props.selectedFactory&&this.fetchRMGradeData(this.props.selectedFactory)}},{key:"componentDidUpdate",value:function(e){this.props.selectedFactory!==e.selectedFactory&&void 0!==this.props.selectedFactory&&""!==this.props.selectedFactory&&this.fetchRMGradeData(this.props.selectedFactory)}},{key:"fetchRMGradeData",value:function(e){var t=this;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,l.a.awrap($f.getFilter("?Factory=".concat(e,"&Inactive=false")).then((function(e){!0===e.code&&t.setState({rmGradeData:e.data})})));case 2:case"end":return a.stop()}}))}},{key:"renderOptions",value:function(){return this.state.rmGradeData.map((function(e,t){return r.a.createElement(et.a,{label:"Select RM grade",value:e._id,key:e._id,name:e.Name},e.Name)}))}},{key:"handleChange",value:function(e,t){var a=this.state.rmGradeData.find((function(t){return t._id===e.target.value}));void 0!==a?this.props.handleChange(a,t,this.props.required):this.props.handleChange("",t,this.props.required)}},{key:"render",value:function(){var e=this;return r.a.createElement(ya.a,{style:{width:"100%",margin:4,paddingTop:7}},r.a.createElement(Ea.a,{shrink:!0,htmlFor:"rmGrade",required:!0,error:!this.props.formControl.valid},"RM Grade"),r.a.createElement(ba.a,{id:this.props.propertyName,value:void 0===this.props.selectedValue?"":this.props.selectedValue,error:!this.props.formControl.valid,onChange:function(t){return e.handleChange(t,e.props.propertyName)},margin:"dense",displayEmpty:!0},r.a.createElement(et.a,{value:""},r.a.createElement("em",null,"Select RM grade")),this.renderOptions()),r.a.createElement(Sa.a,{error:!this.props.formControl.valid,style:{display:this.props.formControl.valid?"none":""}},this.props.formControl.valid?"":this.props.formControl.message))}}]),t}(r.a.Component)),xh=Fh,Th=xh,Nh=a(23),jh={Factory:{valid:!0,message:""},LotNumber:{valid:!0,message:""},Date:{valid:!0,message:""},RMGrade:{valid:!0,message:""}},Ph=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).closeForm=function(){a.setState({formControl:Nh(jh)},(function(){return a.props.closeForm()}))},a.snackOpen=function(e,t){var n;return l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0===e||null===e||void 0===t||null===t){r.next=7;break}return r.next=3,l.a.awrap(ka(e,t));case 3:n=r.sent,a.setState({snackOpen:!a.state.snackOpen,snackMessage:n,snackClass:e}),r.next=8;break;case 7:a.setState({snackOpen:!1});case 8:case"end":return r.stop()}}))},a.onSave=function(){var e=Object(me.a)({},a.state.formData),t=Object(me.a)({},a.state.formControl),n=jl.validateFields(e);n.valid?"Add"===a.props.formAction?jl.add("",e).then((function(e){!0===e.code?a.props.onSuccess(e.data):null!==e.errors&&Array.isArray(e.errors)?(e.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t})):a.snackOpen("error","server")})):jl.update("",e).then((function(e){!0===e.code?a.props.onSuccess(e.data):null!==e.errors&&Array.isArray(e.errors)?(e.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t})):a.snackOpen("error","server")})):(n.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t}),a.snackOpen("error","alertValidation"))},a.state={formData:a.props.formData,formOpen:a.props.formOpen,formControl:Nh(jh),selectedFactory:"",currentDeleteData:null,disabled:!1,dialogMessage:"",snackOpen:!1,snackMessage:"",snackClass:""},a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"initFormControl",value:function(){this.setState({formControl:Nh(jh)})}},{key:"resetFormControl",value:function(e,t){var a=Object(me.a)({},this.state.formControl);void 0!==e&&null!==e&&""!==e&&(a[t].valid=!0,a[t].message=""),this.setState({formControl:a})}},{key:"handleChange",value:function(e,t,a){var n,r;return l.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(n=Object(me.a)({},this.state.formData),r=Object(me.a)({},this.state.formControl),!a){o.next=18;break}if(void 0!==e&&""!==e){o.next=16;break}if(r[t].valid=!1,"LotNumber"!==t){o.next=9;break}r[t].message="Lot Number cannot be empty",o.next=14;break;case 9:return o.t0=t,o.next=12,l.a.awrap(ka("validation","empty"));case 12:o.t1=o.sent,r[t].message=o.t0+o.t1;case 14:o.next=18;break;case 16:r[t].valid=!0,r[t].message="";case 18:"Factory"===t&&(n.RMGrade=""),n[t]=e,this.setState({formData:n});case 21:case"end":return o.stop()}}),null,this)}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{container:!0},r.a.createElement(Ae.a,{fullScreen:!0,open:this.state.formOpen,onClose:this.closeForm,TransitionComponent:this.Transition},r.a.createElement(w.a,{className:"appBar"},r.a.createElement(F.a,null,r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:this.closeForm,"aria-label":"close"},r.a.createElement(Vt.a,null)),r.a.createElement(x.a,{variant:"h6",className:"app-title"},"R Lot"),r.a.createElement(he.a,{color:"inherit",disabled:this.state.disabled,onClick:this.onSave},"save"))),r.a.createElement(_e.a,null,r.a.createElement("div",{className:"form-container"},r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-around",alignItems:"center",md:10,xs:12,sm:12,xl:10,lg:10},r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Hr,{selectedValue:this.state.formData.Factory,propertyName:"Factory",handleChange:this.handleChange,formControl:this.state.formControl.Factory,required:!0}))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{required:!0,id:"LotNumber",label:"R-Lot #",defaultValue:this.state.formData.LotNumber,onChange:function(t){return e.handleChange(t.target.value.trim(),"LotNumber",!0)},margin:"dense",error:!this.state.formControl.LotNumber.valid,helperText:this.state.formControl.LotNumber.message}))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Da.a,{required:!0,format:"dd-MMM-yyyy",label:"Date",value:this.state.formData.Date,onChange:function(t){e.handleChange(t,"Date")},disableFuture:!0})),r.a.createElement(Sa.a,{error:!this.state.formControl.Date.valid,style:{display:this.state.formControl.Date.valid?"none":""}},this.state.formControl.Date.message))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Th,{selectedValue:"object"===typeof this.state.formData.RMGrade&&null!==this.state.formData.RMGrade?this.state.formData.RMGrade._id:"",propertyName:"RMGrade",handleChange:this.handleChange,formControl:this.state.formControl.RMGrade,selectedFactory:this.state.formData.Factory._id,required:!0}))))))),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.snackClass,autoHideDuration:600,open:this.state.snackOpen,onClose:this.snackOpen,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.snackMessage)}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return{formOpen:e.formOpen}}}]),t}(r.a.Component),Ah=Ph,Mh=Ah,_h=a(23),Ih=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).snackOpen=function(e,t){var n;return l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0===e||null===e||void 0===t||null===t){r.next=7;break}return r.next=3,l.a.awrap(ka(e,t));case 3:n=r.sent,a.setState({snackOpen:!a.state.snackOpen,alertMessage:n,alertClass:e}),r.next=8;break;case 7:a.setState({snackOpen:!1});case 8:case"end":return r.stop()}}))},a.dialogOpen=function(e){var t;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,l.a.awrap(ka("confirmation","delete"));case 2:t=n.sent,a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:e,dialogMessage:r.a.createElement("span",null,void 0!==t?t.replace("[Name]",e.LotNumber):"")});case 4:case"end":return n.stop()}}))},a.diaLogClose=function(){a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:null})},a.onDelete=function(){null!==a.state.currentDeleteData&&jl.delete("".concat(a.state.currentDeleteData._id)).then((function(e){if(!0===e.code){var t=Object(je.a)(a.state.data),n=t.indexOf(a.state.currentDeleteData);t.splice(n,1),a.setState({data:t,currentDeleteData:"",dialogOpen:!a.state.dialogOpen},(function(){return a.snackOpen("success","delete")}))}else a.snackOpen("error","server")}))},a.state={columns:[{title:"Factory",field:"Factory",render:function(e){return r.a.createElement("span",null,e.Factory.FctyCode)}},{title:"Lot #",field:"LotNumber"},{title:"Date",field:"Date",render:function(e){return r.a.createElement("span",null,new Date(e.Date).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric"}))}},{title:"Grade",field:"RMGrade",render:function(e){return r.a.createElement("span",null,e.RMGrade.Name)}},{title:"Operator",field:"LastUpdatedBy"},{title:"Last Updated",field:"LastUpdatedAt",render:function(e){return r.a.createElement("span",null,new Date(e.LastUpdatedAt).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}))}}],data:[],formData:null,currentDeleteData:null,formOpen:!1,formAction:"",dialogOpen:!1,snackOpen:!1,alertMessage:"",dialogMessage:"",alertClass:""},a.rLotModel=_h(wh),a.onSuccess=a.onSuccess.bind(Object(Pe.a)(a)),a.closeForm=a.closeForm.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initRLot()}},{key:"initRLot",value:function(){var e=this;jl.get("").then((function(t){!0===t.code&&e.setState({data:t.data})}))}},{key:"openForm",value:function(e){var t,a=e;void 0===a||null===a?(a=this.rLotModel,t="Add"):t="update",this.setState({formData:a,formOpen:!this.state.formOpen,formAction:t})}},{key:"closeForm",value:function(){this.setState({formData:null,formOpen:!1,formAction:""})}},{key:"onSuccess",value:function(e){var t=this,a=Object(je.a)(this.state.data);if(void 0!==e&&null!==e)if("Add"===this.state.formAction)a.push(e),this.setState({data:a,formOpen:!this.state.formOpen,formAction:"",currentRowData:null},(function(){return t.snackOpen("success","add")}));else{var n=a.indexOf(this.state.formData);a[n]=e,this.setState({data:a,formOpen:!this.state.formOpen,formAction:"",currentRowData:null},(function(){return t.snackOpen("success","update")}))}else this.snackOpen("error","server")}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{container:!0,direction:"column",justify:"center",wrap:"wrap",style:{margin:"20px 20px 10px 0px"}},r.a.createElement(be.a,{item:!0,xs:12},r.a.createElement(Ve.a,{title:"R Lot",columns:this.state.columns,data:this.state.data,components:{Toolbar:function(t){return r.a.createElement("div",null,r.a.createElement(Le.MTableToolbar,t),r.a.createElement("div",{style:{padding:"0px 15px"}},r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:function(){return e.openForm(t.rowData)},"aria-label":"add"},r.a.createElement(wt.a,null))))}},actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.data,columns:e.state.columns,fileName:"R Lot"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.initRLot()}},{icon:"edit",tooltip:"Edit",onClick:function(t,a){return e.openForm(a)}},{icon:"delete",tooltip:"Delete",onClick:function(t,a){return e.dialogOpen(a)}}]})),r.a.createElement(be.a,{item:!0,xs:12},this.state.formOpen?r.a.createElement(Mh,{formAction:this.state.formAction,formData:this.state.formData,formOpen:this.state.formOpen,onSuccess:this.onSuccess,closeForm:this.closeForm}):""),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:600,open:this.state.snackOpen,onClose:this.snackOpen,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.diaLogClose,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.diaLogClose,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDelete,color:"primary"},"Delete"))))}}]),t}(r.a.Component),Rh=Ih,Lh=Rh,Vh=(a(912),{properties:{Country:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Country cannot be empty.",conform:"Country cannot be empty.",required:"Country cannot be empty.",type:"Country cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},Province:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Province cannot be empty.",conform:"Province cannot be empty.",required:"Province cannot be empty.",type:"Province cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},District:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"District cannot be empty.",conform:"District cannot be empty.",required:"District cannot be empty.",type:"District cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},SubDistrict:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Sub District cannot be empty.",conform:"Sub District cannot be empty.",required:"Sub District cannot be empty.",type:"Sub District cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},AreaSize:{description:"",type:"any"},OfIsland:{description:"",type:"any"},OfVillage:{description:"",type:"any"},Latitute:{description:"",type:"any"},Longitude:{description:"",type:"any"},Changed:{description:"",type:"boolean"},Remarks:{description:"",type:"string"},CreatedAt:{type:"any",default:Date.now()},CreatedBy:{type:"string",default:""},LastUpdatedAt:{type:"any",default:Date.now()},LastUpdatedBy:{type:"string",default:""}}}),Bh=a(24),Uh={validateFields:function(e){return Bh.validate(e,Vh,{cast:!0})},getSourceArea:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="SourceArea/"+e,a.abrupt("return",We(t).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},getSourceAreaFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("SourceArea-filter/").concat(e),a.abrupt("return",We(t).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},getOneSourceArea:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("SourceArea/").concat(e),a.abrupt("return",We(t).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},update:function(e,t){return Qe("SourceArea/"+e,t).then((function(e){return console.log(e),200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Updated",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="SourceArea/"+e,n.abrupt("return",He(a,t).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Added",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,formValid:!0,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("SourceArea/"+e).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))}},qh=Uh,Gh={Country:"",Province:"",District:"",SubDistrict:"",AreaSize:0,OfIsland:0,OfVillage:0,Latitute:"",Longitude:"",Changed:!1,Remarks:""},Wh=(a(913),a(914),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={ProvinceData:[]},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){void 0!==this.props.selectedCountry&&""!==this.props.selectedCountry&&this.initProvince()}},{key:"componentDidUpdate",value:function(e){this.props.selectedCountry!==e.selectedCountry&&void 0!==this.props.selectedCountry&&""!==this.props.selectedCountry&&this.initProvince()}},{key:"initProvince",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.awrap(We("Common/Province/".concat(this.props.selectedCountry)).then((function(t){void 0!==t.data.data&&null!==t.data.data&&e.setState({ProvinceData:t.data.data})})));case 2:case"end":return t.stop()}}),null,this)}},{key:"renderOptions",value:function(){return this.state.ProvinceData.map((function(e,t){return r.a.createElement(et.a,{label:"Select Province",value:e._id,key:e._id,name:e.Name},e.Name)}))}},{key:"handleChange",value:function(e,t){var a=this.state.ProvinceData.find((function(t){return t._id===e.target.value}));void 0!==a?this.props.handleChange(a,t,this.props.required):this.props.handleChange("",t,this.props.required)}},{key:"render",value:function(){var e=this;return r.a.createElement(ya.a,{style:{width:"100%",margin:4,paddingTop:7}},r.a.createElement(Ea.a,{shrink:!0,htmlFor:"Province",required:this.props.required,error:!this.props.formControl.valid},"Province"),r.a.createElement(ba.a,{id:this.props.propertyName,value:void 0===this.props.selectedValue||null===this.props.selectedValue?"":"object"===typeof this.props.selectedValue?this.props.selectedValue._id:this.props.selectedValue,error:!this.props.formControl.valid,onChange:function(t){return e.handleChange(t,e.props.propertyName)},margin:"dense",displayEmpty:!0},r.a.createElement(et.a,{value:""},r.a.createElement("em",null,"Select Province")),void 0===this.state.ProvinceData||null===this.state.ProvinceData?"":this.renderOptions()),r.a.createElement(Sa.a,{error:!this.props.formControl.valid,style:{display:this.props.formControl.valid?"none":""}},this.props.formControl.valid?"":this.props.formControl.message))}}]),t}(r.a.Component)),Hh=Wh,Qh=(a(915),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={DistrictData:[]},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){void 0!==this.props.selectedProvince&&""!==this.props.selectedProvince&&this.initDistrict()}},{key:"componentDidUpdate",value:function(e){this.props.selectedProvince!==e.selectedProvince&&void 0!==this.props.selectedProvince&&""!==this.props.selectedProvince&&this.initDistrict()}},{key:"initDistrict",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.awrap(We("Common/District/".concat(this.props.selectedProvince)).then((function(t){void 0!==t.data.data&&null!==t.data.data&&e.setState({DistrictData:t.data.data})})));case 2:case"end":return t.stop()}}),null,this)}},{key:"renderOptions",value:function(){return this.state.DistrictData.map((function(e,t){return r.a.createElement(et.a,{label:"Select District",value:e._id,key:e._id,name:e.Name},e.Name)}))}},{key:"handleChange",value:function(e,t){var a=this.state.DistrictData.find((function(t){return t._id===e.target.value}));void 0!==a?this.props.handleChange(a,t,this.props.required):this.props.handleChange("",t,this.props.required)}},{key:"render",value:function(){var e=this;return r.a.createElement(ya.a,{style:{width:"100%",margin:4,paddingTop:7}},r.a.createElement(Ea.a,{shrink:!0,htmlFor:"District",required:this.props.required,error:!this.props.formControl.valid},"District"),r.a.createElement(ba.a,{id:this.props.propertyName,value:void 0===this.props.selectedValue||null===this.props.selectedValue?"":"object"===typeof this.props.selectedValue?this.props.selectedValue._id:this.props.selectedValue,error:!this.props.formControl.valid,onChange:function(t){return e.handleChange(t,e.props.propertyName)},margin:"dense",displayEmpty:!0},r.a.createElement(et.a,{value:""},r.a.createElement("em",null,"Select District")),void 0===this.state.DistrictData||null===this.state.DistrictData?"":this.renderOptions()),r.a.createElement(Sa.a,{error:!this.props.formControl.valid,style:{display:this.props.formControl.valid?"none":""}},this.props.formControl.valid?"":this.props.formControl.message))}}]),t}(r.a.Component)),zh=Qh,Yh=(a(916),a(1137)),Kh=(r.a.Component,a(23)),Jh=(Object(n.forwardRef)((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),{Country:{valid:!0,message:""},Province:{valid:!0,message:""},District:{valid:!0,message:""},SubDistrict:{valid:!0,message:""}}),Zh=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).closeForm=function(){a.setState({formControl:Kh(Jh)},(function(){return a.props.closeForm()}))},a.snackOpen=function(e,t){var n;return l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0===e||null===e||void 0===t||null===t){r.next=7;break}return r.next=3,l.a.awrap(ka(e,t));case 3:n=r.sent,a.setState({snackOpen:!a.state.snackOpen,snackMessage:n,snackClass:e}),r.next=8;break;case 7:a.setState({snackOpen:!1});case 8:case"end":return r.stop()}}))},a.dialogOpen=function(e){var t;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(void 0===e||null===e){n.next=7;break}return n.next=3,l.a.awrap(ka("confirmation","delete"));case 3:t=n.sent,a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:e,dialogMessage:r.a.createElement("span",null,void 0!==t?t.replace("[Name]",e.Tool.Name):"")}),n.next=8;break;case 7:a.setState({dialogOpen:!1});case 8:case"end":return n.stop()}}))},a.onSave=function(){var e=Object(me.a)({},a.state.formData),t=Object(me.a)({},a.state.formControl),n=qh.validateFields(e);n.valid?"Add"===a.props.formAction?qh.add("",e).then((function(e){console.log(e),!0===e.code?a.props.onSuccess(e.data):null!==e.errors&&Array.isArray(e.errors)?(e.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t},(function(){return a.snackOpen("error","failed")}))):a.snackOpen("error","server")})):qh.update("",e).then((function(e){!0===e.code?a.props.onSuccess(e.data):null!==e.errors&&Array.isArray(e.errors)?(e.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t},(function(){return a.snackOpen("error","failed")}))):a.snackOpen("error","server")})):(n.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t}),a.snackOpen("error.","alertValidation"))},a.onDelete=function(e,t){if(void 0!==a.state.currentDeleteData&&null!==a.state.currentDeleteData){var n=Object(je.a)(a.state.toolDetail),r=Object(me.a)({},a.state.formData),o=n.indexOf(a.state.currentDeleteData);n.splice(o,1),r.ToolDetail.splice(o,1),a.setState({toolDetail:n,formData:r,dialogOpen:!1},(function(){return Object(Pe.a)(a)}),a.snackOpen("success","delete"))}},a.state={formData:a.props.formData,formOpen:a.props.formOpen,formControl:Kh(Jh),selectedCountry:"",currentDeleteData:null,disabled:!1,dialogOpen:!1,dialogMessage:"",snackOpen:!1,snackMessage:"",snackClass:""},a.handelChange=a.handelChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"resetFormControl",value:function(e,t){var a=Object(me.a)({},this.state.formControl);void 0!==e&&null!==e&&""!==e&&(a[t].valid=!0,a[t].message=""),this.setState({formControl:a})}},{key:"handelChange",value:function(e,t,a){var n=this,r=Object(me.a)({},this.state.formData),o=Object(me.a)({},this.state.formControl);a&&(void 0===e||""===e?(o[t].valid=!1,o[t].message=t+ka("validation","empty")):(o[t].valid=!0,o[t].message="")),r[t]=e,this.setState({formData:r},(function(){return console.log(n.state)}))}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{container:!0},r.a.createElement(Ae.a,{fullScreen:!0,open:this.state.formOpen,onClose:this.closeForm,TransitionComponent:this.Transition},r.a.createElement(w.a,{className:"appBar"},r.a.createElement(F.a,null,r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:this.closeForm,"aria-label":"close"},r.a.createElement(Vt.a,null)),r.a.createElement(x.a,{variant:"h6",className:"app-title"},"Source Area"),r.a.createElement(he.a,{color:"inherit",disabled:this.state.disabled,onClick:this.onSave},"save"))),r.a.createElement(_e.a,null,r.a.createElement("div",{className:"form-container"},r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-around",alignItems:"center",md:10,xs:12,sm:12,xl:10,lg:10},r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(Ba,{selectedValue:null!==this.state.formData.Country&&"object"===typeof this.state.formData.Country?this.state.formData.Country._id:this.state.formData.Country,propertyName:"Country",handleChange:function(t){e.handelChange(t,"Country",!0)},formControl:this.state.formControl.Country,required:!0})),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"Province",label:"Province",defaultValue:null!==this.state.formData.Province&&"object"===typeof this.state.formData.Province?this.state.formData.Province.Name:this.state.formData.Province,className:"",onChange:function(t){return e.handelChange(t.target.value,"Province",!1)},margin:"dense",error:!this.state.formControl.Province.valid,helperText:this.state.formControl.Province.message}))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"District",label:"District",defaultValue:null!==this.state.formData.District&&"object"===typeof this.state.formData.District?this.state.formData.District.Name:this.state.formData.District,className:"",onChange:function(t){return e.handelChange(t.target.value,"District",!1)},margin:"dense",error:!this.state.formControl.District.valid,helperText:this.state.formControl.District.message}))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"subdistrict",label:"Sub District",defaultValue:this.state.formData.SubDistrict,className:"",onChange:function(t){return e.handelChange(t.target.value,"SubDistrict",!1)},margin:"dense",error:!this.state.formControl.SubDistrict.valid,helperText:this.state.formControl.SubDistrict.message}))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{id:"areasize",label:"Area Size",customInput:ge.a,defaultValue:this.state.formData.AreaSize,onValueChange:function(t){return e.handelChange(t.floatValue,"AreaSize",!1)},onFocus:function(e){e.target.select()},decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0}))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{id:"OfIsland",label:"# of Island",customInput:ge.a,defaultValue:this.state.formData.OfIsland,onValueChange:function(t){return e.handelChange(t.floatValue,"OfIsland",!1)},onFocus:function(e){e.target.select()},decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0}))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{id:"OfVillage",label:"# of Village",customInput:ge.a,defaultValue:this.state.formData.OfVillage,onValueChange:function(t){return e.handelChange(t.floatValue,"OfVillage",!1)},onFocus:function(e){e.target.select()},decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0}))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"Latitute",label:"Latitute",defaultValue:this.state.formData.Latitute,className:"",onChange:function(t){return e.handelChange(t.target.value,"Latitute",!1)},margin:"dense"}))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"Longitude",label:"Longitude",defaultValue:this.state.formData.Longitude,className:"",onChange:function(t){return e.handelChange(t.target.value,"Longitude",!1)},margin:"dense"}))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ga.a,null,"Changed"),r.a.createElement(ye.a,{control:r.a.createElement(Xe.a,{checked:this.state.formData.Changed,onChange:function(t){return e.handelChange(t.target.checked,"Changed")},value:this.state.formData.Changed,inputProps:{"aria-label":"Changed"},color:"primary"}),label:this.state.formData.Changed?"Close":"Open"}))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"Remarks",label:"Remarks",defaultValue:this.state.formData.Remarks,className:"",onChange:function(t){return e.handelChange(t.target.value,"Remarks",!1)},margin:"dense"}))))))),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.snackClass,autoHideDuration:1e3,open:this.state.snackOpen,onClose:this.snackOpen,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.snackMessage)}),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.dialogOpen,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.dialogOpen,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDelete,color:"primary"},"Delete"))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return{formOpen:e.formOpen}}}]),t}(r.a.Component),Xh=Zh,$h=Xh,eg=a(23),tg=(Object(n.forwardRef)((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),r.a.forwardRef((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).snackOpen=function(e,t){var n;return l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0===e||null===e||void 0===t||null===t){r.next=7;break}return r.next=3,l.a.awrap(ka(e,t));case 3:n=r.sent,a.setState({snackOpen:!a.state.snackOpen,alertMessage:n,alertClass:e}),r.next=8;break;case 7:a.setState({snackOpen:!1});case 8:case"end":return r.stop()}}))},a.dialogOpen=function(e){var t;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,l.a.awrap(ka("confirmation","delete"));case 2:t=n.sent,a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:e,dialogMessage:r.a.createElement("span",null,void 0!==t?t.replace("[Name]",e.Country.name):"")});case 4:case"end":return n.stop()}}))},a.diaLogClose=function(){a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:null})},a.onDelete=function(){null!==a.state.currentDeleteData&&qh.delete("".concat(a.state.currentDeleteData._id)).then((function(e){if(!0===e.code){var t=Object(je.a)(a.state.data),n=t.indexOf(a.state.currentDeleteData);t.splice(n,1),a.setState({data:t,currentDeleteData:"",dialogOpen:!a.state.dialogOpen},(function(){return a.snackOpen("success","delete")}))}else a.snackOpen("error","server")}))},a.state={columns:[{title:"Country",field:"Country",render:function(e){return r.a.createElement("span",null,e.Country.name)}},{title:"Province",field:"Province",render:function(e){return r.a.createElement("span",null,e.Province.Name)}},{title:"District",field:"District",render:function(e){return r.a.createElement("span",null,e.District.Name)}},{title:"Sub-District",field:"SubDistrict",render:function(e){return r.a.createElement("span",null,e.SubDistrict)}},{title:"Area Size",field:"AreaSize"},{title:"# Of Island",field:"OfIsland"},{title:"# of Village",field:"OfVillage"},{title:"Latitute",field:"Latitute"},{title:"Longitude",field:"Longitude"},{title:"Changed",field:"Changed",render:function(e){return r.a.createElement("span",null,e.Changed?"Yes":"No")}},{title:"Remarks",field:"Remarks"},{title:"Operator",field:"LastUpdatedBy",editable:"never"},{title:"Last Updated",field:"LastUpdatedAt",render:function(e){return r.a.createElement("span",null,void 0===e?"":new Date(e.LastUpdatedAt).toLocaleDateString())},editable:"never"}],data:[],formData:null,currentDeleteData:null,formOpen:!1,formAction:"",dialogOpen:!1,snackOpen:!1,alertMessage:"",dialogMessage:"",alertClass:""},a.sourceAreaModel=eg(Gh),a.onSuccess=a.onSuccess.bind(Object(Pe.a)(a)),a.closeForm=a.closeForm.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initsourceArea()}},{key:"initsourceArea",value:function(){var e=this;qh.getOneSourceArea("").then((function(t){!0===t.code&&e.setState({data:t.data})}))}},{key:"openForm",value:function(e){var t,a=e;void 0===a||null===a?(a=this.sourceAreaModel,t="Add"):t="update",this.setState({formData:a,formOpen:!this.state.formOpen,formAction:t})}},{key:"closeForm",value:function(){this.setState({formData:null,formOpen:!1,formAction:""})}},{key:"onSuccess",value:function(e){var t=this,a=Object(je.a)(this.state.data);if(void 0!==e&&null!==e)if("Add"===this.state.formAction)a.push(e),this.setState({data:a,formOpen:!this.state.formOpen,formAction:"",currentRowData:null},(function(){return t.snackOpen("success","add")}));else{var n=a.indexOf(this.state.formData);a[n]=e,this.setState({data:a,formOpen:!this.state.formOpen,formAction:"",currentRowData:null},(function(){return t.snackOpen("success","update")}))}else this.snackOpen("error","server")}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{container:!0,direction:"column",justify:"center",wrap:"wrap",style:{margin:"20px 20px 10px 0px"}},r.a.createElement(be.a,{item:!0,xs:12},r.a.createElement(Ve.a,{title:"Source Area",columns:this.state.columns,data:this.state.data,components:{Toolbar:function(t){return r.a.createElement("div",null,r.a.createElement(Le.MTableToolbar,t),r.a.createElement("div",{style:{padding:"0px 15px"}},r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:function(){return e.openForm(t.rowData)},"aria-label":"add"},r.a.createElement(wt.a,null))))}},actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.data,columns:e.state.columns,fileName:"SourceArea"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.initsourceArea()}},{icon:"edit",tooltip:"Edit User",onClick:function(t,a){return e.openForm(a)}},{icon:"delete",tooltip:"Delete User",onClick:function(t,a){return e.dialogOpen(a)}}],icons:{Clear:function(t){return r.a.createElement(Nt.a,{onClick:function(){e.initFormControl()},style:{padding:0,margin:0}})}},options:{}})),r.a.createElement(be.a,{item:!0,xs:12},this.state.formOpen?r.a.createElement($h,{formAction:this.state.formAction,formData:this.state.formData,formOpen:this.state.formOpen,onSuccess:this.onSuccess,closeForm:this.closeForm}):""),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:600,open:this.state.snackOpen,onClose:this.snackOpen,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.diaLogClose,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.diaLogClose,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDelete,color:"primary"},"Delete"))))}}]),t}(r.a.Component)),ag=tg,ng=(a(917),{properties:{Factory:{type:["string","object"],required:!0,allowEmpty:!1,conform:function(e){return!(0===e||""===e||void 0===e)},messages:{conform:"Factory cannot be empty.",allowEmpty:"Factory cannot be empty."}},Code:{description:"",type:"string",required:!0,allowEmpty:!1,messages:{allowEmpty:"Supplier code cannot be empty.",conform:"Supplier code cannot be empty.",required:"Supplier code cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},Name:{description:"",type:"string",required:!0,allowEmpty:!1,messages:{allowEmpty:"Supplier name cannot be empty.",conform:"Supplier name cannot be empty.",required:"Supplier name cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},StartSupplyDate:{description:"",type:"any",required:!0,allowEmpty:!1,messages:{allowEmpty:"Start supply date cannot be empty.",conform:"Start supply date cannot be empty.",required:"Start supply date cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},CreatedAt:{type:"any",default:new Date},CreatedBy:{type:"string",default:""},LastUpdatedAt:{type:"any",default:new Date},LastUpdatedBy:{type:"string",default:""}}}),rg=a(24),og={validateFields:function(e){return rg.validate(e,ng,{cast:!0})},get:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="supplier/"+e,a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},getFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("supplier-filter/").concat(e),a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},getOne:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("supplier/").concat(e),a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},update:function(e,t){return Qe("supplier/"+e,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Updated",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="supplier/"+e,n.abrupt("return",He(a,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Added",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,formValid:!0,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("supplier/"+e).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))}},sg=og,ig={Factory:"",Code:"",Name:"",ContactPerson:"",LicenseID:"",Address1:"",Address2:"",Address3:"",City:"",State:"",Country:"",Zip:"",Phone:"",Email:"",StartSupplyDate:new Date,Lat:0,Lng:0,Inactive:!1,CreatedAt:new Date,CreatedBy:"Admin",LastUpdatedAt:new Date,LastUpdatedBy:"Admin"},lg=(a(918),a(23)),cg={Factory:{valid:!0,message:""},Code:{valid:!0,message:""},Name:{valid:!0,message:""},ContactPerson:{valid:!0,message:""},LicenseID:{valid:!0,message:""},Address1:{valid:!0,message:""},Address2:{valid:!0,message:""},Address3:{valid:!0,message:""},City:{valid:!0,message:""},State:{valid:!0,message:""},Country:{valid:!0,message:""},Zip:{valid:!0,message:""},Phone:{valid:!0,message:""},Email:{valid:!0,message:""},StartSupplyDate:{valid:!0,message:""},Lat:{valid:!0,message:""},Lng:{valid:!0,message:""},Inactive:{valid:!0,message:""}},ug=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).closeForm=function(){a.setState({formControl:lg(cg)},(function(){return a.props.closeForm()}))},a.snackOpen=function(e,t){var n;return l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0===e||null===e||void 0===t||null===t){r.next=7;break}return r.next=3,l.a.awrap(ka(e,t));case 3:n=r.sent,a.setState({snackOpen:!a.state.snackOpen,snackMessage:n,snackClass:e}),r.next=8;break;case 7:a.setState({snackOpen:!1});case 8:case"end":return r.stop()}}))},a.onSave=function(){var e=Object(me.a)({},a.state.formData),t=Object(me.a)({},a.state.formControl),n=sg.validateFields(e);n.valid?"Add"===a.props.formAction?sg.add("",e).then((function(e){!0===e.code?a.props.onSuccess(e.data):null!==e.errors&&Array.isArray(e.errors)?(e.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t})):a.snackOpen("error","server")})):sg.update("",e).then((function(e){!0===e.code?a.props.onSuccess(e.data):null!==e.errors&&Array.isArray(e.errors)?(e.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t})):a.snackOpen("error","server")})):(n.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t}),a.snackOpen("error","alertValidation"))},a.state={formData:a.props.formData,formOpen:a.props.formOpen,formControl:lg(cg),selectedFactory:"",currentDeleteData:null,disabled:!1,dialogMessage:"",snackOpen:!1,snackMessage:"",snackClass:""},a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"initFormControl",value:function(){this.setState({formControl:lg(cg)})}},{key:"handleChange",value:function(e,t,a){var n,r;return l.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(n=Object(me.a)({},this.state.formData),r=Object(me.a)({},this.state.formControl),!a){o.next=22;break}if(void 0!==e&&""!==e){o.next=20;break}if(r[t].valid=!1,"Code"!==t&&"Name"!==t){o.next=13;break}return o.t0="Supplier "+t,o.next=9,l.a.awrap(ka("validation","empty"));case 9:o.t1=o.sent,r[t].message=o.t0+o.t1,o.next=18;break;case 13:return o.t2=t,o.next=16,l.a.awrap(ka("validation","empty"));case 16:o.t3=o.sent,r[t].message=o.t2+o.t3;case 18:o.next=22;break;case 20:r[t].valid=!0,r[t].message="";case 22:"Factory"===t&&(n.RMGrade=""),n[t]=e,this.setState({formData:n});case 25:case"end":return o.stop()}}),null,this)}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{container:!0},r.a.createElement(Ae.a,{fullScreen:!0,open:this.state.formOpen,onClose:this.closeForm,TransitionComponent:this.Transition},r.a.createElement(w.a,{className:"appBar"},r.a.createElement(F.a,null,r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:this.closeForm,"aria-label":"close"},r.a.createElement(Vt.a,null)),r.a.createElement(x.a,{variant:"h6",className:"app-title"},"Supplier"),r.a.createElement(he.a,{color:"inherit",disabled:this.state.disabled,onClick:this.onSave},"save"))),r.a.createElement(_e.a,null,r.a.createElement("div",{className:"form-container"},r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-around",alignItems:"center",md:10,xs:12,sm:12,xl:10,lg:10},r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Hr,{selectedValue:this.state.formData.Factory,propertyName:"Factory",handleChange:this.handleChange,formControl:this.state.formControl.Factory,required:!0}))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{required:!0,id:"Code",label:"Supplier ID",defaultValue:this.state.formData.Code,onChange:function(t){return e.handleChange(t.target.value.trim(),"Code",!0)},margin:"dense",error:!this.state.formControl.Code.valid,helperText:this.state.formControl.Code.message}))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{required:!0,id:"Code",label:"Supplier Name",defaultValue:this.state.formData.Name,onChange:function(t){return e.handleChange(t.target.value.trim(),"Name",!0)},margin:"dense",error:!this.state.formControl.Name.valid,helperText:this.state.formControl.Name.message}))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"ContactPerson",label:"Contact Person",defaultValue:this.state.formData.ContactPerson,onChange:function(t){return e.handleChange(t.target.value,"ContactPerson",!1)},margin:"dense"}))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"LicenseID",label:"License ID",defaultValue:this.state.formData.LicenseID,onChange:function(t){return e.handleChange(t.target.value,"LicenseID",!1)},margin:"dense"}))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"Address1",label:"Address 1",defaultValue:this.state.formData.Address1,onChange:function(t){return e.handleChange(t.target.value,"Address1",!1)},margin:"dense"}))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"Address2",label:"Address 2",defaultValue:this.state.formData.Address2,onChange:function(t){return e.handleChange(t.target.value,"Address2",!1)},margin:"dense"}))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"Address3",label:"Address 3",defaultValue:this.state.formData.Address3,onChange:function(t){return e.handleChange(t.target.value,"Address3",!1)},margin:"dense"}))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"City",label:"City",defaultValue:this.state.formData.City,onChange:function(t){return e.handleChange(t.target.value,"City",!1)},margin:"dense"}))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"State",label:"State",defaultValue:this.state.formData.State,onChange:function(t){return e.handleChange(t.target.value,"State",!1)},margin:"dense"}))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(xa,{jsonFileName:"worldCountry",jsonPropertyName:"WorldCountry",formControl:this.state.formControl.Country,propertyName:"Country",required:!1,label:"Country",handleChange:function(t){return e.handleChange(t.Value,"Country")},selectedValue:this.state.formData.Country}))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"Zip",label:"ZIP",defaultValue:this.state.formData.Zip,onChange:function(t){return e.handleChange(t.target.value,"Zip",!1)},margin:"dense"}))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"Phone",label:"Phone",defaultValue:this.state.formData.Phone,onChange:function(t){return e.handleChange(t.target.value,"Phone",!1)},margin:"dense"}))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"Email",label:"Email",defaultValue:this.state.formData.Email,onChange:function(t){return e.handleChange(t.target.value,"Email",!1)},margin:"dense"}))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{id:"Lat",label:"Lat",customInput:ge.a,defaultValue:this.state.formData.Lat,onValueChange:function(t){return e.handleChange(t.floatValue,"Lat")},onFocus:function(e){e.target.select()},decimalScale:6,thousandSeparator:!0,fixedDecimalScale:!0}))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{id:"Lng",label:"Lng",customInput:ge.a,defaultValue:this.state.formData.Lng,onValueChange:function(t){return e.handleChange(t.floatValue,"Lng")},onFocus:function(e){e.target.select()},decimalScale:6,thousandSeparator:!0,fixedDecimalScale:!0}))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Da.a,{required:!0,format:"dd-MMM-yyyy",label:"Start Supply",value:this.state.formData.StartSupplyDate,onChange:function(t){e.handleChange(t,"StartSupplyDate")},disableFuture:!0})),r.a.createElement(Sa.a,{error:!this.state.formControl.StartSupplyDate.valid,style:{display:this.state.formControl.StartSupplyDate.valid?"none":""}},this.state.formControl.StartSupplyDate.message))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ga.a,{component:"label"},"Inactive"),r.a.createElement(Xe.a,{checked:this.state.formData.Inactive,value:this.state.formData.Inactive,color:"primary",inputProps:{"aria-label":"primary checkbox"},onChange:function(t){return e.handleChange(t.target.checked,"Inactive",!0)}}))))))),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.snackClass,autoHideDuration:600,open:this.state.snackOpen,onClose:this.snackOpen,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.snackMessage)}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return{formOpen:e.formOpen}}}]),t}(r.a.Component),dg=ug,mg=dg,pg=a(23),fg=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).snackOpen=function(e,t){var n;return l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0===e||null===e||void 0===t||null===t){r.next=7;break}return r.next=3,l.a.awrap(ka(e,t));case 3:n=r.sent,a.setState({snackOpen:!a.state.snackOpen,alertMessage:n,alertClass:e}),r.next=8;break;case 7:a.setState({snackOpen:!1});case 8:case"end":return r.stop()}}))},a.dialogOpen=function(e){var t;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,l.a.awrap(ka("confirmation","delete"));case 2:t=n.sent,a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:e,dialogMessage:r.a.createElement("span",null,void 0!==t?t.replace("[Name]",e.Code):"")});case 4:case"end":return n.stop()}}))},a.diaLogClose=function(){a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:null})},a.onDelete=function(){null!==a.state.currentDeleteData&&sg.delete("".concat(a.state.currentDeleteData._id)).then((function(e){if(!0===e.code){var t=Object(je.a)(a.state.data),n=t.indexOf(a.state.currentDeleteData);t.splice(n,1),a.setState({data:t,currentDeleteData:"",dialogOpen:!a.state.dialogOpen},(function(){return a.snackOpen("success","delete")}))}else a.snackOpen("error","server")}))},a.state={columns:[{title:"Factory",field:"Factory",render:function(e){return r.a.createElement("span",null,e.Factory.FctyCode)}},{title:"Code",field:"Code"},{title:"Name",field:"Name"},{title:"Contact Person",field:"ContactPerson"},{title:"License ID",field:"LicenseID"},{title:"Phone",field:"Phone"},{title:"Email",field:"Email"},{title:"Address 1",field:"Address1"},{title:"Address 2",field:"Address2"},{title:"Address 3",field:"Address3"},{title:"City",field:"City"},{title:"State",field:"State"},{title:"Country",field:"Country",lookup:{}},{title:"ZIP",field:"Zip"},{title:"Lat",field:"Lat"},{title:"Lng",field:"Lng"},{title:"Start Supply",field:"StartSupplyDate",render:function(e){return r.a.createElement("span",null,new Date(e.StartSupplyDate).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric"}))}},{title:"Inactive",field:"Inactive",lookup:{true:"Yes",false:"No"}},{title:"Operator",field:"LastUpdatedBy"},{title:"Last Updated",field:"LastUpdatedAt",render:function(e){return r.a.createElement("span",null,new Date(e.LastUpdatedAt).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}))}}],data:[],formData:null,currentDeleteData:null,formOpen:!1,formAction:"",dialogOpen:!1,snackOpen:!1,alertMessage:"",dialogMessage:"",alertClass:""},a.supplierModel=pg(ig),a.onSuccess=a.onSuccess.bind(Object(Pe.a)(a)),a.closeForm=a.closeForm.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initSupplier(),this.initCountryData()}},{key:"initSupplier",value:function(){var e=this;sg.get("").then((function(t){!0===t.code&&e.setState({data:t.data})}))}},{key:"initCountryData",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:Oa("worldCountry.json").then((function(e){return e.data})).then((function(t){var a={};t.WorldCountry.forEach((function(e){return a[e.Value]=e.Name}));var n=Object(je.a)(e.state.columns);n[n.findIndex((function(e){return"Country"===e.field}))].lookup=a,e.setState({columns:n})}));case 1:case"end":return t.stop()}}))}},{key:"openForm",value:function(e){var t,a=e;void 0===a||null===a?(a=this.supplierModel,t="Add"):t="update",this.setState({formData:a,formOpen:!this.state.formOpen,formAction:t})}},{key:"closeForm",value:function(){this.setState({formData:null,formOpen:!1,formAction:""})}},{key:"onSuccess",value:function(e){var t=this,a=Object(je.a)(this.state.data);if(void 0!==e&&null!==e)if("Add"===this.state.formAction)a.push(e),this.setState({data:a,formOpen:!this.state.formOpen,formAction:"",currentRowData:null},(function(){return t.snackOpen("success","add")}));else{var n=a.indexOf(this.state.formData);a[n]=e,this.setState({data:a,formOpen:!this.state.formOpen,formAction:"",currentRowData:null},(function(){return t.snackOpen("success","update")}))}else this.snackOpen("error","server")}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{container:!0,direction:"column",justify:"center",wrap:"wrap",style:{margin:"20px 20px 10px 0px"}},r.a.createElement(be.a,{item:!0,xs:12},r.a.createElement(Ve.a,{title:"Supplier",columns:this.state.columns,data:this.state.data,components:{Toolbar:function(t){return r.a.createElement("div",null,r.a.createElement(Le.MTableToolbar,t),r.a.createElement("div",{style:{padding:"0px 15px"}},r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:function(){return e.openForm(t.rowData)},"aria-label":"add"},r.a.createElement(wt.a,null))))}},actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.data,columns:e.state.columns,fileName:"Supplier"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.initSupplier()}},{icon:"edit",tooltip:"Edit",onClick:function(t,a){return e.openForm(a)}},{icon:"delete",tooltip:"Delete",onClick:function(t,a){return e.dialogOpen(a)}}]})),r.a.createElement(be.a,{item:!0,xs:12},this.state.formOpen?r.a.createElement(mg,{formAction:this.state.formAction,formData:this.state.formData,formOpen:this.state.formOpen,onSuccess:this.onSuccess,closeForm:this.closeForm}):""),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:600,open:this.state.snackOpen,onClose:this.snackOpen,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.diaLogClose,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.diaLogClose,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDelete,color:"primary"},"Delete"))))}}]),t}(r.a.Component),hg=fg,gg=hg,yg=(a(919),{properties:{Country:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Country cannot be empty.",conform:"Country cannot be empty.",required:"Country cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},Province:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Province cannot be empty.",conform:"Province cannot be empty.",required:"Province cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},District:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"District cannot be empty.",conform:"District cannot be empty.",required:"District cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},SubDistrict:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Sub District cannot be empty.",conform:"Sub District cannot be empty.",required:"Sub District cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},Village:{description:"",type:"string",required:!0,allowEmpty:!1,messages:{allowEmpty:"Village cannot be empty.",conform:"Village cannot be empty.",required:"Village cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},Latitute:{description:"",type:"any"},Longitude:{description:"",type:"any"},Remarks:{description:"",type:"string"},Inactive:{description:"",type:"boolean"},Changed:{description:"",type:"boolean"},CreatedAt:{type:"any",default:Date.now()},CreatedBy:{type:"string",default:""},LastUpdatedAt:{type:"any",default:Date.now()},LastUpdatedBy:{type:"string",default:""}}}),vg=a(24),Cg={validateFields:function(e){return vg.validate(e,yg,{cast:!0})},getRMVillage:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="RMVillage/"+e,a.abrupt("return",We(t).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},getRMVillageFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("RMVillage-filter/").concat(e),a.abrupt("return",We(t).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},getOneRMVillage:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("RMVillage/").concat(e),a.abrupt("return",We(t).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},update:function(e,t){return Qe("RMVillage/"+e,t).then((function(e){return console.log(e),200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Updated",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="RMVillage/"+e,n.abrupt("return",He(a,t).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Added",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,formValid:!0,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("RMVillage/"+e).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))}},Dg=Cg,Eg={Country:"",Province:"",District:"",SubDistrict:"",Village:"",ZipCode:0,Latitute:"",Longitude:"",Remarks:"",InActive:!1,Changed:!1},bg=(a(920),a(921),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={sourceAreaData:[]},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){void 0!==this.props.selectedDistrict&&""!==this.props.selectedDistrict&&this.initSourceArea()}},{key:"componentDidUpdate",value:function(e){this.props.selectedDistrict!==e.selectedDistrict&&void 0!==this.props.selectedDistrict&&""!==this.props.selectedDistrict&&this.initSourceArea()}},{key:"initSourceArea",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.awrap(qh.getSourceAreaFilter("?District=".concat(this.props.selectedDistrict)).then((function(t){!0===t.code&&e.setState({sourceAreaData:t.data})})));case 2:case"end":return t.stop()}}),null,this)}},{key:"renderOptions",value:function(){return this.state.sourceAreaData.map((function(e,t){return r.a.createElement(et.a,{label:"Select SourceArea",value:e._id,key:e._id,name:e.SubDistrict},e.SubDistrict)}))}},{key:"handleChange",value:function(e,t){var a=this.state.sourceAreaData.find((function(t){return t._id===e.target.value}));void 0!==a?this.props.handleChange(a,t,this.props.required):this.props.handleChange("",t,this.props.required)}},{key:"render",value:function(){var e=this;return r.a.createElement(ya.a,{style:{width:"100%",margin:4,paddingTop:7}},r.a.createElement(Ea.a,{shrink:!0,htmlFor:"SubDistrict",required:this.props.required,error:!this.props.formControl.valid},"SubDistrict"),r.a.createElement(ba.a,{id:this.props.propertyName,value:void 0===this.props.selectedValue?"":this.props.selectedValue,error:!this.props.formControl.valid,onChange:function(t){return e.handleChange(t,e.props.propertyName)},margin:"dense",displayEmpty:!0},r.a.createElement(et.a,{value:""},r.a.createElement("em",null,"Select SourceArea")),void 0===this.state.sourceAreaData||null===this.state.sourceAreaData?"":this.renderOptions()),r.a.createElement(Sa.a,{error:!this.props.formControl.valid,style:{display:this.props.formControl.valid?"none":""}},this.props.formControl.valid?"":this.props.formControl.message))}}]),t}(r.a.Component)),Sg=bg,Og=a(23),kg=(Object(n.forwardRef)((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),{Country:{valid:!0,message:""},Province:{valid:!0,message:""},District:{valid:!0,message:""},SubDistrict:{valid:!0,message:""},Village:{valid:!0,message:""}}),wg=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).closeForm=function(){a.setState({formControl:Og(kg)},(function(){return a.props.closeForm()}))},a.snackOpen=function(e,t){var n;return l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0===e||null===e||void 0===t||null===t){r.next=7;break}return r.next=3,l.a.awrap(ka(e,t));case 3:n=r.sent,a.setState({snackOpen:!a.state.snackOpen,snackMessage:n,snackClass:e}),r.next=8;break;case 7:a.setState({snackOpen:!1});case 8:case"end":return r.stop()}}))},a.dialogOpen=function(e){var t;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(void 0===e||null===e){n.next=7;break}return n.next=3,l.a.awrap(ka("confirmation","delete"));case 3:t=n.sent,a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:e,dialogMessage:r.a.createElement("span",null,void 0!==t?t.replace("[Name]",e.Tool.Name):"")}),n.next=8;break;case 7:a.setState({dialogOpen:!1});case 8:case"end":return n.stop()}}))},a.onSave=function(){var e=Object(me.a)({},a.state.formData),t=Object(me.a)({},a.state.formControl),n=Dg.validateFields(e);n.valid?"Add"===a.props.formAction?Dg.add("",e).then((function(e){!0===e.code?a.props.onSuccess(e.data):null!==e.errors&&Array.isArray(e.errors)?(e.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t},(function(){return a.snackOpen("error","failed")}))):a.snackOpen("error","server")})):Dg.update("",e).then((function(e){!0===e.code?a.props.onSuccess(e.data):null!==e.errors&&Array.isArray(e.errors)?(e.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t},(function(){return a.snackOpen("error","failed")}))):a.snackOpen("error","server")})):(n.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t}),a.snackOpen("error","alertValidation"))},a.onDelete=function(e,t){if(void 0!==a.state.currentDeleteData&&null!==a.state.currentDeleteData){var n=Object(je.a)(a.state.toolDetail),r=Object(me.a)({},a.state.formData),o=n.indexOf(a.state.currentDeleteData);n.splice(o,1),r.ToolDetail.splice(o,1),a.setState({toolDetail:n,formData:r,dialogOpen:!1},(function(){return Object(Pe.a)(a)}),a.snackOpen("success","delete"))}},a.state={formData:a.props.formData,formOpen:a.props.formOpen,formControl:Og(kg),selectedCountry:"",currentDeleteData:null,disabled:!1,dialogOpen:!1,dialogMessage:"",snackOpen:!1,snackMessage:"",snackClass:""},a.handelChange=a.handelChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"resetFormControl",value:function(e,t){var a=Object(me.a)({},this.state.formControl);void 0!==e&&null!==e&&""!==e&&(a[t].valid=!0,a[t].message=""),this.setState({formControl:a})}},{key:"handelChange",value:function(e,t,a){var n=Object(me.a)({},this.state.formData),r=Object(me.a)({},this.state.formControl);a&&(void 0===e||""===e?(r[t].valid=!1,r[t].message="Village"===t?"Village cannot be empty.":t+ka("validation","empty")):(r[t].valid=!0,r[t].message="")),n[t]=e,this.setState({formData:n})}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{container:!0},r.a.createElement(Ae.a,{fullScreen:!0,open:this.state.formOpen,onClose:this.closeForm,TransitionComponent:this.Transition},r.a.createElement(w.a,{className:"appBar"},r.a.createElement(F.a,null,r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:this.closeForm,"aria-label":"close"},r.a.createElement(Vt.a,null)),r.a.createElement(x.a,{variant:"h6",className:"app-title"},"RM Village"),r.a.createElement(he.a,{color:"inherit",disabled:this.state.disabled,onClick:this.onSave},"save"))),r.a.createElement(_e.a,null,r.a.createElement("div",{className:"form-container"},r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-around",alignItems:"center",md:10,xs:12,sm:12,xl:10,lg:10},r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(Ba,{sselectedValue:null!==this.state.formData.Country&&"object"===typeof this.state.formData.Country?this.state.formData.Country._id:this.state.formData.Country,propertyName:"Country",handleChange:function(t){e.handelChange(t,"Country",!0)},formControl:this.state.formControl.Country,required:!0})),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(Hh,{selectedCountry:void 0===this.state.formData.Country||null===this.state.formData.Country||""===this.state.formData.Country?"":"object"==typeof this.state.formData.Country&&null!==this.state.formData.Country?this.state.formData.Country._id:this.state.formData.Country,selectedValue:"object"===typeof this.state.formData.Province?this.state.formData.Province._id:this.state.formData.Province,formControl:this.state.formControl.Province,propertyName:"Province",required:!0,handleChange:function(t){e.handelChange(t,"Province",!0)}})),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(zh,{selectedProvince:void 0===this.state.formData.Province||null===this.state.formData.Province||""===this.state.formData.Province?"":this.state.formData.Province._id,selectedValue:"object"===typeof this.state.formData.District&&null!==this.state.formData.District?this.state.formData.District._id:this.state.formData.District,formControl:this.state.formControl.District,propertyName:"District",required:!0,handleChange:function(t){e.handelChange(t,"District",!0)}})),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(Sg,{selectedDistrict:void 0===this.state.formData.District||null===this.state.formData.District||""===this.state.formData.District?"":this.state.formData.District._id,selectedValue:"object"===typeof this.state.formData.SubDistrict&&null!==this.state.formData.SubDistrict?this.state.formData.SubDistrict._id:this.state.formData.SubDistrict,formControl:this.state.formControl.SubDistrict,propertyName:"SubDistrict",required:!0,handleChange:function(t){e.handelChange(t,"SubDistrict",!0)}})),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"Village",label:"Village",error:!this.state.formControl.Village.valid,helperText:this.state.formControl.Village.message,defaultValue:this.state.formData.Village,className:"",onChange:function(t){return e.handelChange(t.target.value.trim(),"Village",!0)},margin:"dense"}))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{id:"zipcode",label:"Zip Code",customInput:ge.a,defaultValue:this.state.formData.ZipCode,onValueChange:function(t){return e.handelChange(t.floatValue,"ZipCode",!1)},onFocus:function(e){e.target.select()}}))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"Latitute",label:"Latitute",defaultValue:this.state.formData.Latitute,className:"",onChange:function(t){return e.handelChange(t.target.value,"Latitute",!1)},margin:"dense"}))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"Longitude",label:"Longitude",defaultValue:this.state.formData.Longitude,className:"",onChange:function(t){return e.handelChange(t.target.value,"Longitude",!1)},margin:"dense"}))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"Remarks",label:"Remarks",defaultValue:this.state.formData.Remarks,className:"",onChange:function(t){return e.handelChange(t.target.value,"Remarks",!1)},margin:"dense"}))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ga.a,null,"Changed"),r.a.createElement(ye.a,{control:r.a.createElement(Xe.a,{checked:this.state.formData.Changed,onChange:function(t){return e.handelChange(t.target.checked,"Changed")},value:this.state.formData.Changed,inputProps:{"aria-label":"Changed"},color:"primary"}),label:this.state.formData.Changed?"Close":"Open"}))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ga.a,null,"InActive"),r.a.createElement(ye.a,{control:r.a.createElement(Xe.a,{checked:this.state.formData.InActive,onChange:function(t){return e.handelChange(t.target.checked,"InActive")},value:this.state.formData.Changed,inputProps:{"aria-label":"InActive"},color:"primary"}),label:this.state.formData.InActive?"InActive":"Active"}))))))),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.snackClass,autoHideDuration:1e3,open:this.state.snackOpen,onClose:this.snackOpen,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.snackMessage)}),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.dialogOpen,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.dialogOpen,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDelete,color:"primary"},"Delete"))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return{formOpen:e.formOpen}}}]),t}(r.a.Component),Fg=wg,xg=Fg,Tg=a(23),Ng=(Object(n.forwardRef)((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),r.a.forwardRef((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).snackOpen=function(e,t){var n;return l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0===e||null===e||void 0===t||null===t){r.next=7;break}return r.next=3,l.a.awrap(ka(e,t));case 3:n=r.sent,a.setState({snackOpen:!a.state.snackOpen,alertMessage:n,alertClass:e}),r.next=8;break;case 7:a.setState({snackOpen:!1});case 8:case"end":return r.stop()}}))},a.dialogOpen=function(e){var t;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,l.a.awrap(ka("confirmation","delete"));case 2:t=n.sent,a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:e,dialogMessage:r.a.createElement("span",null,void 0!==t?t.replace("[Name]",e.Country.name):"")});case 4:case"end":return n.stop()}}))},a.diaLogClose=function(){a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:null})},a.onDelete=function(){null!==a.state.currentDeleteData&&Dg.delete("".concat(a.state.currentDeleteData._id)).then((function(e){if(!0===e.code){var t=Object(je.a)(a.state.data),n=t.indexOf(a.state.currentDeleteData);t.splice(n,1),a.setState({data:t,currentDeleteData:"",dialogOpen:!a.state.dialogOpen},(function(){return a.snackOpen("success","delete")}))}else a.snackOpen("error","server")}))},a.state={columns:[{title:"Country",field:"Country",render:function(e){return r.a.createElement("span",null,e.Country.name)}},{title:"Province",field:"Province",render:function(e){return r.a.createElement("span",null,e.Province.Name)}},{title:"District",field:"District",render:function(e){return r.a.createElement("span",null,e.District.Name)}},{title:"Sub-District",field:"SubDistrict",render:function(e){return r.a.createElement("span",null,e.SubDistrict.SubDistrict)}},{title:"Village",field:"Village",render:function(e){return r.a.createElement("span",null,e.Village)}},{title:"Latitute",field:"Latitute"},{title:"Longitude",field:"Longitude"},{title:"Remarks",field:"Remarks"},{title:"Inactive",field:"InActive",render:function(e){return r.a.createElement("span",null,e.InActive?"Yes":"No")}},{title:"Changed",field:"Changed",render:function(e){return r.a.createElement("span",null,e.Changed?"Yes":"No")}},{title:"Operator",field:"LastUpdatedBy",editable:"never"},{title:"Last Updated",field:"LastUpdatedAt",render:function(e){return r.a.createElement("span",null,void 0===e?"":new Date(e.LastUpdatedAt).toLocaleDateString())},editable:"never"}],data:[],formData:null,currentDeleteData:null,formOpen:!1,formAction:"",dialogOpen:!1,snackOpen:!1,alertMessage:"",dialogMessage:"",alertClass:""},a.VillageModel=Tg(Eg),a.onSuccess=a.onSuccess.bind(Object(Pe.a)(a)),a.closeForm=a.closeForm.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initsourceArea()}},{key:"initsourceArea",value:function(){var e=this;Dg.getRMVillage("").then((function(t){!0===t.code&&e.setState({data:t.data})}))}},{key:"openForm",value:function(e){var t,a=e;void 0===a||null===a?(a=this.VillageModel,t="Add"):t="update",this.setState({formData:a,formOpen:!this.state.formOpen,formAction:t})}},{key:"closeForm",value:function(){this.setState({formData:null,formOpen:!1,formAction:""})}},{key:"onSuccess",value:function(e){var t=this,a=Object(je.a)(this.state.data);if(void 0!==e&&null!==e)if("Add"===this.state.formAction)a.push(e),this.setState({data:a,formOpen:!this.state.formOpen,formAction:"",currentRowData:null},(function(){return t.snackOpen("success","add")}));else{var n=a.indexOf(this.state.formData);a[n]=e,this.setState({data:a,formOpen:!this.state.formOpen,formAction:"",currentRowData:null},(function(){return t.snackOpen("success","update")}))}else this.snackOpen("error","server")}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{container:!0,direction:"column",justify:"center",wrap:"wrap",style:{margin:"20px 20px 10px 0px"}},r.a.createElement(be.a,{item:!0,xs:12},r.a.createElement(Ve.a,{title:"RM Village",columns:this.state.columns,data:this.state.data,components:{Toolbar:function(t){return r.a.createElement("div",null,r.a.createElement(Le.MTableToolbar,t),r.a.createElement("div",{style:{padding:"0px 15px"}},r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:function(){return e.openForm(t.rowData)},"aria-label":"add"},r.a.createElement(wt.a,null))))}},actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.data,columns:e.state.columns,fileName:"SourceArea"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.initsourceArea()}},{icon:"edit",tooltip:"Edit User",onClick:function(t,a){return e.openForm(a)}},{icon:"delete",tooltip:"Delete User",onClick:function(t,a){return e.dialogOpen(a)}}],icons:{Clear:function(t){return r.a.createElement(Nt.a,{onClick:function(){e.initFormControl()},style:{padding:0,margin:0}})}},options:{}})),r.a.createElement(be.a,{item:!0,xs:12},this.state.formOpen?r.a.createElement(xg,{formAction:this.state.formAction,formData:this.state.formData,formOpen:this.state.formOpen,onSuccess:this.onSuccess,closeForm:this.closeForm}):""),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:600,open:this.state.snackOpen,onClose:this.snackOpen,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.diaLogClose,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.diaLogClose,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDelete,color:"primary"},"Delete"))))}}]),t}(r.a.Component)),jg=Ng,Pg=jg,Ag=(a(922),{properties:{Factory:{type:["string","object"],required:!0,allowEmpty:!1,conform:function(e){return!(0===e||""===e||void 0===e)},messages:{conform:"Factory cannot be empty.",allowEmpty:"Factory cannot be empty."}},RLot:{type:["string","object"],required:!0,allowEmpty:!1,conform:function(e){return!(0===e||""===e||void 0===e)},messages:{conform:"R Lot cannot be empty.",allowEmpty:"R Lot cannot be empty."}},Status:{type:"boolean",required:!0,allowEmpty:!1,conform:function(e){return!(0===e||""===e||void 0===e)},messages:{conform:"R Lot allocation status cannot be empty.",allowEmpty:"R Lot allocation status cannot be empty."}},StorageLocation_Detail:{type:"array",minItems:1,messages:{minItems:"Storage Location should be checked."}},CreatedAt:{type:"any",default:new Date},CreatedBy:{type:"string",default:""},LastUpdatedAt:{type:"any",default:new Date},LastUpdatedBy:{type:"string",default:""}}}),Mg=a(24),_g={validateFields:function(e){return Mg.validate(e,Ag,{cast:!0})},get:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="rLotAllocation/"+e,a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},getFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("rLotAllocation-filter/").concat(e),a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},getOne:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("rLotAllocation/").concat(e),a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},update:function(e,t){return Qe("rLotAllocation/"+e,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Updated",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="rLotAllocation/"+e,n.abrupt("return",He(a,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Added",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,formValid:!0,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("rLotAllocation/"+e).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))}},Ig=_g,Rg={Factory:"",RLot:"",Status:!1,RLotClosedDate:new Date,Remarks:"",EstimatedDRC:0,BlanketWeight:0,StorageLocation_Detail:[],CreatedAt:new Date,CreatedBy:"Admin",LastUpdatedAt:new Date,LastUpdatedBy:"Admin"},Lg=(a(923),a(23)),Vg={Factory:{valid:!0,message:""},RLot:{valid:!0,message:""},Status:{valid:!0,message:""},RLotClosedDate:{valid:!0,message:""},Remarks:{valid:!0,message:""},EstimatedDRC:{valid:!0,message:""},BlanketWeight:{valid:!0,message:""},StorageLocation_Detail:{valid:!0,message:""}},Bg=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).closeForm=function(){a.setState({formControl:Lg(Vg)},(function(){return a.props.closeForm()}))},a.snackOpen=function(e,t){var n;return l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0===e||null===e||void 0===t||null===t){r.next=7;break}return r.next=3,l.a.awrap(ka(e,t));case 3:n=r.sent,a.setState({snackOpen:!a.state.snackOpen,snackMessage:n,snackClass:e}),r.next=8;break;case 7:a.setState({snackOpen:!1});case 8:case"end":return r.stop()}}))},a.onSave=function(){var e=Object(me.a)({},a.state.formData),t=Object(me.a)({},a.state.formControl),n=Ig.validateFields(e);console.log(n),n.valid?"Add"===a.props.formAction?Ig.add("",e).then((function(e){!0===e.code?a.props.onSuccess(e.data):null!==e.errors&&Array.isArray(e.errors)?(e.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t})):a.snackOpen("error","server")})):Ig.update("",e).then((function(e){!0===e.code?a.props.onSuccess(e.data):null!==e.errors&&Array.isArray(e.errors)?(e.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t})):a.snackOpen("error","server")})):(n.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t}),a.snackOpen("error","alertValidation"))},a.state={formData:a.props.formData,formOpen:a.props.formOpen,formControl:Lg(Vg),columns:[{title:"Storage #",field:"NumberResult"},{title:"Gross Qty (kg)",field:"GrossQty"},{title:"Net Qty (kg)",field:"NetQty"},{title:"Storage Status",field:"Status"},{title:"Selected",render:function(e){return r.a.createElement(ve.a,{checked:e.selected,onChange:function(t){return a.selectStorageLocation(t.target.checked,e)},color:"primary"})}}],selectedFactory:"",disabled:!1,dialogMessage:"",snackOpen:!1,snackMessage:"",snackClass:"",storageLocationData:[]},a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a.selectStorageLocation=a.selectStorageLocation.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){""!==this.state.formData.Factory&&""!==this.state.formData.RLot&&this.fetchStorageLocationData(this.state.formData.Factory._id,this.state.formData.RLot.RMGrade._id,this.state.formData._id)}},{key:"initFormControl",value:function(){this.setState({formControl:Lg(Vg)})}},{key:"fetchStorageLocationData",value:function(e,t,a){var n=this;return l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,l.a.awrap(Do("getStorageLocationForAllocationData/?Factory=".concat(e,"&RMGrade=").concat(t).concat(void 0===a?"":"&AllocationId="+a)).then((function(e){if(!0===e.code){var t=e.data.map((function(e){var t=e;return t.selected=n.state.formData.StorageLocation_Detail.find((function(t){return t._id===e._id})),t}));n.setState({storageLocationData:t})}})));case 2:case"end":return r.stop()}}))}},{key:"handleChange",value:function(e,t,a){var n,r;return l.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(n=Object(me.a)({},this.state.formData),r=Object(me.a)({},this.state.formControl),!a){o.next=14;break}if(void 0!==e&&""!==e){o.next=12;break}return r[t].valid=!1,o.t0=t,o.next=8,l.a.awrap(ka("validation","empty"));case 8:o.t1=o.sent,r[t].message=o.t0+o.t1,o.next=14;break;case 12:r[t].valid=!0,r[t].message="";case 14:"Factory"===t&&(n.RLot=""),n[t]=e,"Factory"!==t&&"RLot"!==t||(""!==n.Factory&&""!==n.RLot?this.fetchStorageLocationData(n.Factory._id,n.RLot.RMGrade._id):(this.setState({storageLocationData:[]}),n.StorageLocation_Detail=[])),"Status"===t&&!1===e&&(n.EstimatedDRC=0,n.BlanketWeight=0),this.setState({formData:n});case 19:case"end":return o.stop()}}),null,this)}},{key:"selectStorageLocation",value:function(e,t){var a=Object(je.a)(this.state.formData.StorageLocation_Detail),n=Object(je.a)(this.state.storageLocationData);if(e)t.selected=!0,a.push(t._id);else{t.selected=!1;var r=a.indexOf(t._id);a.splice(r,1)}var o=n.findIndex((function(e){return e._id===t._id}));n[o]=t,this.setState({storageLocationData:n}),this.handleChange(a,"StorageLocation_Detail",!0)}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{container:!0},r.a.createElement(Ae.a,{fullScreen:!0,open:this.state.formOpen,onClose:this.closeForm,TransitionComponent:this.Transition},r.a.createElement(w.a,{className:"appBar"},r.a.createElement(F.a,null,r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:this.closeForm,"aria-label":"close"},r.a.createElement(Vt.a,null)),r.a.createElement(x.a,{variant:"h6",className:"app-title"},"R Lot Allocation"),r.a.createElement(he.a,{color:"inherit",disabled:this.state.disabled,onClick:this.onSave},"save"))),r.a.createElement(_e.a,null,r.a.createElement("div",{className:"form-container"},r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-around",alignItems:"center",md:10,xs:12,sm:12,xl:10,lg:10},r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Hr,{selectedValue:this.state.formData.Factory,propertyName:"Factory",handleChange:this.handleChange,formControl:this.state.formControl.Factory,required:!0}))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Ml,{selectedFactory:"object"===typeof this.state.formData.Factory&&null!==this.state.formData.Factory?this.state.formData.Factory._id:"",selectedValue:"object"===typeof this.state.formData.RLot&&null!==this.state.formData.RLot?this.state.formData.RLot._id:"",formControl:this.state.formControl.RLot,propertyName:"RLot",required:!0,handleChange:function(t){e.handleChange(t,"RLot",!0)},for:"Allocation",allocationId:this.state.formData._id})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Da.a,{required:!0,format:"dd-MMM-yyyy",label:"Date",value:this.state.formData.RLot.Date,readOnly:!0}))),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{label:"Grade",value:void 0===this.state.formData.RLot.RMGrade?"":this.state.formData.RLot.RMGrade.Name,inputProps:{readOnly:!0}}))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ga.a,{component:"label"},"R-Lot Status"),r.a.createElement(ye.a,{control:r.a.createElement(Xe.a,{checked:this.state.formData.Status,onChange:function(t){return e.handleChange(t.target.checked,"Status",!0)},disabled:void 0===this.state.formData._id,value:this.state.formData.Status}),label:this.state.formData.Status?"Closed":"Open"}))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12,style:{display:this.state.formData.Status?"":"none"}},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Da.a,{required:void 0===this.state.formData._id,format:"dd-MMM-yyyy",label:"R-Lot Closed Date",value:this.state.formData.RLotClosedDate,onChange:function(t){e.handleChange(t,"RLotClosedDate")},disableFuture:!0})),r.a.createElement(Sa.a,{error:!this.state.formControl.RLotClosedDate.valid,style:{display:this.state.formControl.RLotClosedDate.valid?"none":""}},this.state.formControl.RLotClosedDate.message)),r.a.createElement(bn,{label:"Closing Information",style:{width:"100%",margin:4}},r.a.createElement(ya.a,{style:{width:"100%",marginTop:15}},r.a.createElement(Xa.a,{id:"EstimatedDRC",label:"Estimated Blanket DRC",customInput:ge.a,value:this.state.formData.EstimatedDRC,onValueChange:function(t){e.handleChange(t.floatValue,"EstimatedDRC")},decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0,suffix:" %"})),r.a.createElement(ya.a,{style:{width:"100%",marginTop:8}},r.a.createElement(Xa.a,{id:"BlanketWeight",label:"Blanket Weight for DRC Sample",customInput:ge.a,value:this.state.formData.BlanketWeight,onValueChange:function(t){e.handleChange(t.floatValue,"BlanketWeight")},decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0,suffix:" kg"})))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"Remarks",label:"Remarks",defaultValue:this.state.formData.Remarks,onChange:function(t){return e.handleChange(t.target.value,"Remarks",!0)},margin:"dense"}))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(Ve.a,{style:{width:"100%",margin:4},title:"STORAGE LOCATION",columns:this.state.columns,data:this.state.storageLocationData,options:{search:!1}})))))),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.snackClass,autoHideDuration:600,open:this.state.snackOpen,onClose:this.snackOpen,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.snackMessage)}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return{formOpen:e.formOpen}}}]),t}(r.a.Component),Ug=Bg,qg=Ug,Gg=a(23),Wg=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).snackOpen=function(e,t){var n;return l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0===e||null===e||void 0===t||null===t){r.next=7;break}return r.next=3,l.a.awrap(ka(e,t));case 3:n=r.sent,a.setState({snackOpen:!a.state.snackOpen,alertMessage:n,alertClass:e}),r.next=8;break;case 7:a.setState({snackOpen:!1});case 8:case"end":return r.stop()}}))},a.dialogOpen=function(e){var t;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log(e),n.next=3,l.a.awrap(ka("confirmation","delete"));case 3:t=n.sent,a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:e,dialogMessage:r.a.createElement("span",null,void 0!==t?t.replace("[Name]",e.RLot.LotNumber):"")});case 5:case"end":return n.stop()}}))},a.diaLogClose=function(){a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:null})},a.onDelete=function(){null!==a.state.currentDeleteData&&Ig.delete("".concat(a.state.currentDeleteData._id)).then((function(e){if(!0===e.code){var t=Object(je.a)(a.state.data),n=t.indexOf(a.state.currentDeleteData);t.splice(n,1),a.setState({data:t,currentDeleteData:"",dialogOpen:!a.state.dialogOpen},(function(){return a.snackOpen("success","delete")}))}else a.snackOpen("error","server")}))},a.state={columns:[{title:"Factory",field:"Factory",render:function(e){return r.a.createElement("span",null,e.Factory.FctyCode)}},{title:"Lot #",field:"RLot",render:function(e){return r.a.createElement("span",null,e.RLot.LotNumber)}},{title:"Status",field:"Status",lookup:{false:"Open",true:"Close"}},{title:"Closed Date",field:"RLotClosedDate",render:function(e){return r.a.createElement("span",null,new Date(e.RLotClosedDate).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric"}))}},{title:"Storage Location",render:function(e){return r.a.createElement(E.a,null,e.StorageLocation_Detail.map((function(e,t){return r.a.createElement(b.a,{divider:!0,key:e._id},r.a.createElement(S.a,{primary:e.NumberResult}))})))}},{title:"Gross Qty (kg)",render:function(e){return r.a.createElement(E.a,null,e.StorageLocation_Detail.map((function(e,t){return r.a.createElement(b.a,{divider:!0,key:e._id},r.a.createElement(S.a,{primary:e.GrossQty}))})))}},{title:"Net Qty (kg)",render:function(e){return r.a.createElement(E.a,null,e.StorageLocation_Detail.map((function(e,t){return r.a.createElement(b.a,{divider:!0,key:e._id},r.a.createElement(S.a,{primary:e.NetQty}))})))}},{title:"Est. DRC",field:"EstimatedDRC",render:function(e){return r.a.createElement(Xa.a,{value:e.EstimatedDRC,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"Blanket Weight for Sample",field:"BlanketWeight",render:function(e){return r.a.createElement(Xa.a,{value:e.BlanketWeight,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"Operator",field:"LastUpdatedBy"},{title:"Last Updated",field:"LastUpdatedAt",render:function(e){return r.a.createElement("span",null,new Date(e.LastUpdatedAt).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}))}}],data:[],formData:null,currentDeleteData:null,formOpen:!1,formAction:"",dialogOpen:!1,snackOpen:!1,alertMessage:"",dialogMessage:"",alertClass:""},a.rLotAllocationModel=Gg(Rg),a.onSuccess=a.onSuccess.bind(Object(Pe.a)(a)),a.closeForm=a.closeForm.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initRLotAllocation()}},{key:"initRLotAllocation",value:function(){var e=this;Ig.get("").then((function(t){!0===t.code&&e.setState({data:t.data})}))}},{key:"openForm",value:function(e){var t,a=e;void 0===a||null===a?(a=this.rLotAllocationModel,t="Add"):t="update",this.setState({formData:a,formOpen:!this.state.formOpen,formAction:t})}},{key:"closeForm",value:function(){this.setState({formData:null,formOpen:!1,formAction:""})}},{key:"onSuccess",value:function(e){var t=this,a=Object(je.a)(this.state.data);if(void 0!==e&&null!==e){if("Add"===this.state.formAction)a.push(e),this.setState({data:a,formOpen:!this.state.formOpen,formAction:"",currentRowData:null},(function(){return t.snackOpen("success","add")}));else{var n=a.indexOf(this.state.formData);a[n]=e,this.setState({data:a,formOpen:!this.state.formOpen,formAction:"",currentRowData:null},(function(){return t.snackOpen("success","update")}))}this.initRLotAllocation()}else this.snackOpen("error","server")}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{container:!0,direction:"column",justify:"center",wrap:"wrap",style:{margin:"20px 20px 10px 0px"}},r.a.createElement(be.a,{item:!0,xs:12},r.a.createElement(Ve.a,{title:"R Lot Allocation",columns:this.state.columns,data:this.state.data,components:{Toolbar:function(t){return r.a.createElement("div",null,r.a.createElement(Le.MTableToolbar,t),r.a.createElement("div",{style:{padding:"0px 15px"}},r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:function(){return e.openForm(t.rowData)},"aria-label":"add"},r.a.createElement(wt.a,null))))}},actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.data,columns:e.state.columns,fileName:"R Lot Allocation"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.initRLotAllocation()}},{icon:"edit",tooltip:"Edit",onClick:function(t,a){return e.openForm(a)}},{icon:"delete",tooltip:"Delete",onClick:function(t,a){return e.dialogOpen(a)}}]})),r.a.createElement(be.a,{item:!0,xs:12},this.state.formOpen?r.a.createElement(qg,{formAction:this.state.formAction,formData:this.state.formData,formOpen:this.state.formOpen,onSuccess:this.onSuccess,closeForm:this.closeForm}):""),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:600,open:this.state.snackOpen,onClose:this.snackOpen,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.diaLogClose,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.diaLogClose,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDelete,color:"primary"},"Delete"))))}}]),t}(r.a.Component),Hg=Wg,Qg=Hg,zg=(a(924),{properties:{Country:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Country cannot be empty.",conform:"Country cannot be empty.",required:"Country cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},Date:{description:"",type:"any",required:!0,allowEmpty:!1,messages:{allowEmpty:"Date cannot be empty.",conform:"Date cannot be empty.",required:"Date cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},Province:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Province cannot be empty.",conform:"Province cannot be empty.",required:"Province cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},District:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"District cannot be empty.",conform:"District cannot be empty.",required:"District cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},SubDistrict:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Sub District cannot be empty.",conform:"Sub District cannot be empty.",required:"Sub District cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},Village:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Village cannot be empty.",conform:"Village cannot be empty.",required:"Village cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},GrossWeight:{description:"",type:"any"},DRC:{description:"",type:"any"},NetWeight:{description:"",type:"any"},Supplier:{description:"",type:["string","object"]},PurchasingPersonnel:{description:"",type:["string","object"]},RMGrade:{description:"",type:["string","object"]},StorageLocation:{description:"",type:["string","object"]},BatchNo:{description:"",type:"any"},Remarks:{description:"",type:"string"},CreatedAt:{type:"any",default:Date.now()},CreatedBy:{type:"string",default:""},LastUpdatedAt:{type:"any",default:Date.now()},LastUpdatedBy:{type:"string",default:""}}}),Yg=a(24),Kg={validateFields:function(e){return Yg.validate(e,zg,{cast:!0})},getProcurement:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="Procurement/"+e,a.abrupt("return",We(t).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},getProcurementFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("Procurement-filter/").concat(e),a.abrupt("return",We(t).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},getOneProcurement:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("Procurement/").concat(e),a.abrupt("return",We(t).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},update:function(e,t){return Qe("Procurement/"+e,t).then((function(e){return console.log(e),200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Updated",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="Procurement/"+e,n.abrupt("return",He(a,t).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Added",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,formValid:!0,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("Procurement/"+e).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))}},Jg=Kg,Zg={Country:"",Province:"",District:"",SubDistrict:"",Village:"",GrossWeight:0,DRC:0,NetWeight:0,Supplier:"",PurchasingPersonnel:"",RMGrade:"",StorageLocation:"",BatchNo:"",Remarks:""},Xg=(a(925),a(926),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={supplierData:[]},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){void 0!==this.props.selectedFactory&&""!==this.props.selectedFactory&&this.fetchSupplierData(this.props.selectedFactory)}},{key:"componentDidUpdate",value:function(e){this.props.selectedFactory!==e.selectedFactory&&void 0!==this.props.selectedFactory&&""!==this.props.selectedFactory&&this.fetchSupplierData(this.props.selectedFactory)}},{key:"fetchSupplierData",value:function(e){var t=this;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,l.a.awrap(sg.getFilter("?Factory=".concat(e,"&Inactive=false")).then((function(e){!0===e.code&&t.setState({supplierData:e.data})})));case 2:case"end":return a.stop()}}))}},{key:"renderOptions",value:function(){return this.state.supplierData.map((function(e,t){return r.a.createElement(et.a,{label:"Select supplier",value:e._id,key:e._id,name:e.Name},e.Name)}))}},{key:"handleChange",value:function(e,t){var a=this.state.supplierData.find((function(t){return t._id===e.target.value}));void 0!==a?this.props.handleChange(a,t,this.props.required):this.props.handleChange("",t,this.props.required)}},{key:"render",value:function(){var e=this,t=!this.props.formControl.valid;return r.a.createElement(ya.a,{style:{width:"100%",margin:4,paddingTop:7}},r.a.createElement(Ea.a,{shrink:!0,htmlFor:"supplier",required:!0,error:t},"R Lot"),r.a.createElement(ba.a,{id:this.props.propertyName,value:void 0===this.props.selectedValue?"":this.props.selectedValue,error:t,onChange:function(t){return e.handleChange(t,e.props.propertyName)},margin:"dense",displayEmpty:!0},r.a.createElement(et.a,{value:""},r.a.createElement("em",null,"Select supplier")),this.renderOptions()),r.a.createElement(Sa.a,{error:t,style:{display:t?"":"none"}},this.props.required&&""===this.props.selectedValue?"Supplier cannot be empty.":this.props.formControl.valid?"":this.props.formControl.message))}}]),t}(r.a.Component)),$g=Xg,ey=(a(927),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={purchasingPersonnelData:[]},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){void 0!==this.props.selectedFactory&&""!==this.props.selectedFactory&&this.initPurchasingPersonnelData()}},{key:"componentDidUpdate",value:function(e,t,a){this.props.selectedFactory!==e.selectedFactory&&void 0!==this.props.selectedFactory&&""!==this.props.selectedFactory&&this.initPurchasingPersonnelData(this.props.selectedFactory)}},{key:"initPurchasingPersonnelData",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.awrap(hh.getFilter("?Factory=".concat(this.props.selectedFactory,"&Inactive=false")).then((function(t){!0===t.code&&e.setState({purchasingPersonnelData:t.data})})));case 2:case"end":return t.stop()}}),null,this)}},{key:"renderOptions",value:function(){return this.state.purchasingPersonnelData.map((function(e,t){return r.a.createElement(et.a,{label:"Select purchasing personnel",value:e._id,key:e._id,name:e.Name},e.Name)}))}},{key:"handleChange",value:function(e,t){var a=this.state.purchasingPersonnelData.find((function(t){return t._id===e.target.value}));void 0!==a?this.props.handleChange(a,t,this.props.required):this.props.handleChange("",t,this.props.required)}},{key:"render",value:function(){var e=this;return r.a.createElement(ya.a,{style:{width:"100%",margin:4,paddingTop:7}},r.a.createElement(Ea.a,{shrink:!0,htmlFor:"purchasingPersonnel",required:this.props.required,error:!this.props.formControl.valid},"Purchasing Personnel"),r.a.createElement(ba.a,{id:this.props.propertyName,value:void 0===this.props.selectedValue?"":this.props.selectedValue,error:!this.props.formControl.valid,onChange:function(t){return e.handleChange(t,e.props.propertyName)},margin:"dense",displayEmpty:!0},r.a.createElement(et.a,{value:""},r.a.createElement("em",null,"Select Purchasing Personnel")),this.renderOptions()),r.a.createElement(Sa.a,{error:!this.props.formControl.valid,style:{display:this.props.formControl.valid?"none":""}},this.props.formControl.valid?"":"Purchasing Personnel cannot be empty."))}}]),t}(r.a.Component)),ty=ey,ay=(a(928),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={storageLocationData:[]},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){void 0!==this.props.selectedFactory&&""!==this.props.selectedFactory&&this.initstorageLocation()}},{key:"componentDidUpdate",value:function(e){this.props.selectedFactory!==e.selectedFactory&&void 0!==this.props.selectedFactory&&""!==this.props.selectedFactory&&this.initstorageLocation()}},{key:"initstorageLocation",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.awrap(We("Common/StorageLocationDetail/".concat(this.props.selectedFactory)).then((function(t){void 0!==t.data&&null!==t.data&&"Succeed"===t.data.message&&e.setState({storageLocationData:t.data.data})})));case 2:case"end":return t.stop()}}),null,this)}},{key:"renderOptions",value:function(){var e=this;return this.state.storageLocationData.map((function(t,a){return r.a.createElement(et.a,{label:"Select StorageLocation",value:t._id,key:t._id,name:t.NumberResult},r.a.createElement(E.a,{style:{width:"100%"}},r.a.createElement(b.a,{alignItems:"flex-start"},e.props.columns.map((function(e){return r.a.createElement(S.a,{primary:t[e],style:{minWidth:"30%"}})})))))}))}},{key:"handleChange",value:function(e,t){var a=this.state.storageLocationData.find((function(t){return t._id===e.target.value}));void 0!==a?this.props.handleChange(a,t,this.props.required):this.props.handleChange("",t,this.props.required)}},{key:"render",value:function(){var e=this;return r.a.createElement(ya.a,{style:{width:"100%",margin:4,paddingTop:7}},r.a.createElement(Ea.a,{shrink:!0,htmlFor:"SI",required:this.props.required,error:!this.props.formControl.valid},this.props.columns.join(" - ")),r.a.createElement(ba.a,{id:this.props.propertyName,value:void 0===this.props.selectedValue?"":this.props.selectedValue,error:!this.props.formControl.valid,onChange:function(t){return e.handleChange(t,e.props.propertyName)},margin:"dense",displayEmpty:!0},r.a.createElement(et.a,{value:""},r.a.createElement("em",null,"Select Storage Location")),void 0===this.state.storageLocationData||null===this.state.storageLocationData?"":this.renderOptions()),r.a.createElement(Sa.a,{error:!this.props.formControl.valid,style:{display:this.props.formControl.valid?"none":""}},this.props.formControl.valid?"":this.props.formControl.message))}}]),t}(r.a.Component)),ny=ay,ry=(a(929),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={RMVillageData:[]},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){void 0!==this.props.selectedSubDistrict&&""!==this.props.selectedSubDistrict&&this.initRMVillage()}},{key:"componentDidUpdate",value:function(e){this.props.selectedSubDistrict!==e.selectedSubDistrict&&void 0!==this.props.selectedSubDistrict&&""!==this.props.selectedSubDistrict&&this.initRMVillage()}},{key:"initRMVillage",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.awrap(Dg.getRMVillageFilter("?SubDistrict=".concat(this.props.selectedSubDistrict)).then((function(t){!0===t.code&&e.setState({RMVillageData:t.data})})));case 2:case"end":return t.stop()}}),null,this)}},{key:"renderOptions",value:function(){return this.state.RMVillageData.map((function(e,t){return r.a.createElement(et.a,{label:"Select RMVillage",value:e._id,key:e._id,name:e.Village},e.Village)}))}},{key:"handleChange",value:function(e){var t=this.state.RMVillageData.find((function(t){return t._id===e.target.value}));void 0!==t?this.props.handleChange(t,this.props.propertyName,this.props.required):this.props.handleChange("",this.props.propertyName,this.props.required)}},{key:"render",value:function(){var e=this;return r.a.createElement(ya.a,{style:{width:"100%",margin:4,paddingTop:7}},r.a.createElement(Ea.a,{shrink:!0,htmlFor:"Village",required:this.props.required,error:!this.props.formControl.valid},"RM Village"),r.a.createElement(ba.a,{id:this.props.propertyName,value:void 0===this.props.selectedValue?"":this.props.selectedValue,error:!this.props.formControl.valid,onChange:function(t){return e.handleChange(t,e.props.propertyName)},margin:"dense",displayEmpty:!0},r.a.createElement(et.a,{value:""},r.a.createElement("em",null,"Select RM Village")),void 0===this.state.RMVillageData||null===this.state.RMVillageData?"":this.renderOptions()),r.a.createElement(Sa.a,{error:!this.props.formControl.valid,style:{display:this.props.formControl.valid?"none":""}},this.props.formControl.valid?"":this.props.formControl.message))}}]),t}(r.a.Component)),oy=ry,sy=a(23),iy=(Object(n.forwardRef)((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),{Factory:{valid:!0,message:""},Country:{valid:!0,message:""},Province:{valid:!0,message:""},District:{valid:!0,message:""},SubDistrict:{valid:!0,message:""},Village:{valid:!0,message:""},Supplier:{valid:!0,message:""},RMGrade:{valid:!0,message:""},PurchasingPersonnel:{valid:!0,message:""},StorageLocation:{valid:!0,message:""}}),ly=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).closeForm=function(){a.setState({formControl:sy(iy)},(function(){return a.props.closeForm()}))},a.snackOpen=function(e,t){var n;return l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0===e||null===e||void 0===t||null===t){r.next=7;break}return r.next=3,l.a.awrap(ka(e,t));case 3:n=r.sent,a.setState({snackOpen:!a.state.snackOpen,snackMessage:n,snackClass:e}),r.next=8;break;case 7:a.setState({snackOpen:!1});case 8:case"end":return r.stop()}}))},a.dialogOpen=function(e){var t;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(void 0===e||null===e){n.next=7;break}return n.next=3,l.a.awrap(ka("confirmation","delete"));case 3:t=n.sent,a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:e,dialogMessage:r.a.createElement("span",null,void 0!==t?t.replace("[Name]",e.Tool.Name):"")}),n.next=8;break;case 7:a.setState({dialogOpen:!1});case 8:case"end":return n.stop()}}))},a.onSave=function(){var e=Object(me.a)({},a.state.formData),t=Object(me.a)({},a.state.formControl),n=Jg.validateFields(e);n.valid?"Add"===a.props.formAction?Jg.add("",e).then((function(e){!0===e.code?a.props.onSuccess(e.data):null!==e.errors&&Array.isArray(e.errors)?(e.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t})):a.snackOpen("error","server")})):Jg.update("",e).then((function(e){!0===e.code?a.props.onSuccess(e.data):null!==e.errors&&Array.isArray(e.errors)?(e.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t})):a.snackOpen("error","server")})):(n.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t}),a.snackOpen("error.","alertValidation"))},a.onDelete=function(e,t){if(void 0!==a.state.currentDeleteData&&null!==a.state.currentDeleteData){var n=Object(je.a)(a.state.toolDetail),r=Object(me.a)({},a.state.formData),o=n.indexOf(a.state.currentDeleteData);n.splice(o,1),r.ToolDetail.splice(o,1),a.setState({toolDetail:n,formData:r,dialogOpen:!1},(function(){return Object(Pe.a)(a)}),a.snackOpen("success","delete"))}},a.state={formData:a.props.formData,formOpen:a.props.formOpen,formControl:sy(iy),selectedCountry:"",currentDeleteData:null,disabled:!1,dialogOpen:!1,dialogMessage:"",snackOpen:!1,snackMessage:"",snackClass:""},a.handelChange=a.handelChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"resetFormControl",value:function(e,t){var a=Object(me.a)({},this.state.formControl);void 0!==e&&null!==e&&""!==e&&(a[t].valid=!0,a[t].message=""),this.setState({formControl:a})}},{key:"handelChange",value:function(e,t,a){var n=Object(me.a)({},this.state.formData),r=Object(me.a)({},this.state.formControl);a&&(void 0===e||""===e?(r[t].valid=!1,r[t].message=t+ka("validation","empty")):(r[t].valid=!0,r[t].message="")),n[t]=e,this.setState({formData:n})}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{container:!0},r.a.createElement(Ae.a,{fullScreen:!0,open:this.state.formOpen,onClose:this.closeForm,TransitionComponent:this.Transition},r.a.createElement(w.a,{className:"appBar"},r.a.createElement(F.a,null,r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:this.closeForm,"aria-label":"close"},r.a.createElement(Vt.a,null)),r.a.createElement(x.a,{variant:"h6",className:"app-title"},"Procurement"),r.a.createElement(he.a,{color:"inherit",disabled:this.state.disabled,onClick:this.onSave},"save"))),r.a.createElement(_e.a,null,r.a.createElement("div",{className:"form-container"},r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-around",alignItems:"center",md:10,xs:12,sm:12,xl:10,lg:10},r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(Hr,{selectedValue:this.state.formData.Factory,formControl:this.state.formControl.Factory,propertyName:"Factory",required:!0,handleChange:function(t){e.handelChange(t,"Factory",!0)}})),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Da.b,{style:{width:"100%"},margin:"dense",id:"date-picker-dialog",label:"Date",format:"dd-MMM-yyyy",value:void 0===this.state.formData.Date?Date.now():this.state.formData.Date,onChange:function(t){return e.handelChange(new Date(t),"Date",!1)},KeyboardButtonProps:{"aria-label":"Date"}})))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(Ba,{selectedValue:"object"===typeof this.state.formData.Country&&null!==this.state.formData.Country?this.state.formData.Country._id:this.state.formData.Country,propertyName:"Country",handleChange:function(t){e.handelChange(t,"Country",!0)},formControl:this.state.formControl.Country})),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(Hh,{selectedCountry:void 0===this.state.formData.Country||null===this.state.formData.Country||""===this.state.formData.Country?"":"object"==typeof this.state.formData.Country&&null!==this.state.formData.Country?this.state.formData.Country._id:this.state.formData.Country,selectedValue:"object"===typeof this.state.formData.Province&&null!==this.state.formData.Province?this.state.formData.Province._id:this.state.formData.Province,formControl:this.state.formControl.Province,propertyName:"Province",required:!0,handleChange:function(t){e.handelChange(t,"Province",!0)}})),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(zh,{selectedProvince:void 0===this.state.formData.Province||""===this.state.formData.Province||null===this.state.formData.Province?"":this.state.formData.Province._id,selectedValue:"object"===typeof this.state.formData.District&&null!==this.state.formData.District?this.state.formData.District._id:this.state.formData.District,formControl:this.state.formControl.District,propertyName:"District",required:!0,handleChange:function(t){e.handelChange(t,"District",!0)}})),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(Sg,{selectedDistrict:void 0===this.state.formData.District||null===this.state.formData.District||""===this.state.formData.District?"":this.state.formData.District._id,selectedValue:"object"===typeof this.state.formData.SubDistrict&&null!==this.state.formData.SubDistrict?this.state.formData.SubDistrict._id:this.state.formData.SubDistrict,formControl:this.state.formControl.SubDistrict,propertyName:"SubDistrict",required:!0,handleChange:function(t){e.handelChange(t,"SubDistrict",!0)}})),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(oy,{selectedSubDistrict:void 0===this.state.formData.SubDistrict||null===this.state.formData.SubDistrict||""===this.state.formData.SubDistrict?"":this.state.formData.SubDistrict._id,selectedValue:"object"===typeof this.state.formData.Village&&null!==this.state.formData.Village?this.state.formData.Village._id:this.state.formData.Village,formControl:this.state.formControl.Village,propertyName:"Village",required:!0,handleChange:function(t){e.handelChange(t,"Village",!0)}})),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{id:"GrossWeight",label:"Gross Weight",customInput:ge.a,defaultValue:this.state.formData.GrossWeight,onValueChange:function(t){return e.handelChange(t.floatValue,"GrossWeight",!1)},onFocus:function(e){e.target.select()},decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0}))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{id:"DRC",label:"DRC",customInput:ge.a,defaultValue:this.state.formData.DRC,onValueChange:function(t){return e.handelChange(t.floatValue,"DRC",!1)},onFocus:function(e){e.target.select()},decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0}))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Sa.a,null,"Net Weight"),r.a.createElement("label",{style:{marginTop:4}},this.state.formData.GrossWeight*this.state.formData.DRC/100))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement($g,{selectedFactory:void 0===this.state.formData.Factory||""===this.state.formData.Factory?"":this.state.formData.Factory._id,selectedValue:"object"===typeof this.state.formData.Supplier?this.state.formData.Supplier._id:this.state.formData.Supplier,formControl:this.state.formControl.Supplier,handleChange:function(t){e.handelChange(t,"Supplier",!0)},required:!0,propertyName:"Supplier"})),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ty,{selectedFactory:void 0===this.state.formData.Factory||""===this.state.formData.Factory?"":this.state.formData.Factory._id,selectedValue:"object"===typeof this.state.formData.PurchasingPersonnel?this.state.formData.PurchasingPersonnel._id:this.state.formData.PurchasingPersonnel,handleChange:function(t){e.handelChange(t,"PurchasingPersonnel",!0)},formControl:this.state.formControl.PurchasingPersonnel,required:!0,propertyName:"PurchasingPersonnel"})),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(xh,{selectedFactory:void 0===this.state.formData.Factory||""===this.state.formData.Factory?"":this.state.formData.Factory._id,selectedValue:"object"===typeof this.state.formData.RMGrade?this.state.formData.RMGrade._id:this.state.formData.RMGrade,handleChange:function(t){e.handelChange(t,"RMGrade",!0)},formControl:this.state.formControl.RMGrade,required:!0,propertyName:"RMGrade"})),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ny,{selectedFactory:void 0===this.state.formData.Factory||""===this.state.formData.Factory?"":this.state.formData.Factory._id,selectedValue:"object"===typeof this.state.formData.StorageLocation&&null!==this.state.formData.StorageLocation?this.state.formData.StorageLocation._id:this.state.formData.StorageLocation,handleChange:function(t){e.handelChange(t,"StorageLocation",!0)},formControl:this.state.formControl.StorageLocation,columns:["NumberResult","CurrentCapacity"],required:!0,propertyName:"StorageLocation"})),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"BatchNo",label:"BatchNo",defaultValue:this.state.formData.BatchNo,className:"",onChange:function(t){return e.handelChange(t.target.value,"BatchNo",!1)},margin:"dense"}))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"Remarks",label:"Remarks",defaultValue:this.state.formData.Remarks,className:"",onChange:function(t){return e.handelChange(t.target.value,"Remarks",!1)},margin:"dense"}))))))),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.snackClass,autoHideDuration:600,open:this.state.snackOpen,onClose:this.snackOpen,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.snackMessage)}),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.dialogOpen,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.dialogOpen,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDelete,color:"primary"},"Delete"))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return{formOpen:e.formOpen}}}]),t}(r.a.Component),cy=ly,uy=cy,dy=a(23),my=(Object(n.forwardRef)((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),r.a.forwardRef((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).snackOpen=function(e,t){var n;return l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0===e||null===e||void 0===t||null===t){r.next=7;break}return r.next=3,l.a.awrap(ka(e,t));case 3:n=r.sent,a.setState({snackOpen:!a.state.snackOpen,alertMessage:n,alertClass:e}),r.next=8;break;case 7:a.setState({snackOpen:!1});case 8:case"end":return r.stop()}}))},a.dialogOpen=function(e){var t;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,l.a.awrap(ka("confirmation","delete"));case 2:t=n.sent,a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:e,dialogMessage:r.a.createElement("span",null,void 0!==t?t.replace("[Name]",e.Factory.FctyName):"")});case 4:case"end":return n.stop()}}))},a.diaLogClose=function(){a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:null})},a.onDelete=function(){null!==a.state.currentDeleteData&&Jg.delete("".concat(a.state.currentDeleteData._id)).then((function(e){if(!0===e.code){var t=Object(je.a)(a.state.data),n=t.indexOf(a.state.currentDeleteData);t.splice(n,1),a.setState({data:t,currentDeleteData:"",dialogOpen:!a.state.dialogOpen},(function(){return a.snackOpen("success","delete")}))}else a.snackOpen("error","server")}))},a.state={columns:[{title:"Factory",field:"Factory",render:function(e){return r.a.createElement("span",null,e.Factory.FctyName)}},{title:"Date",field:"Date",render:function(e){return r.a.createElement("span",null,new Date(e.Date).toLocaleDateString())}},{title:"Country",field:"Country",render:function(e){return r.a.createElement("span",null,e.Country.name)}},{title:"Origin",field:"SubDistrict",render:function(e){return r.a.createElement("span",null,e.SubDistrict.SubDistrict)}},{title:"Province",field:"Province",render:function(e){return r.a.createElement("span",null,e.Province.Name)}},{title:"Supply Origin",field:"District",render:function(e){return r.a.createElement("span",null,e.District.Name)}},{title:"Village",field:"Village",render:function(e){return r.a.createElement("span",null,e.Village.Village)}},{title:"Gross Weight",field:"GrossWeight"},{title:"DRC",field:"DRC"},{title:"Net Weight",render:function(e){return r.a.createElement("span",null,void 0!==e.GrossWeight&&void 0!==e.DRC?e.GrossWeight*e.DRC/100:0)}},{title:"Supplier",field:"Supplier",render:function(e){return r.a.createElement("span",null,e.Supplier.Name)}},{title:"Drc Personnel",field:"PurchasingPersonnel",render:function(e){return r.a.createElement("span",null,e.PurchasingPersonnel.Name)}},{title:"Grade",field:"RMGrade",render:function(e){return r.a.createElement("span",null,e.RMGrade.Name)}},{title:"Storage Location",field:"StorageLocation",render:function(e){return r.a.createElement("span",null,null===e.StorageLocation?"":e.StorageLocation.NumberResult)}},{title:"Batch No",field:"BatchNo"},{title:"Remarks",field:"Remarks"},{title:"Operator",field:"LastUpdatedBy",editable:"never"},{title:"Last Updated",field:"LastUpdatedAt",render:function(e){return r.a.createElement("span",null,void 0===e?"":new Date(e.LastUpdatedAt).toLocaleDateString())},editable:"never"}],data:[],formData:null,currentDeleteData:null,formOpen:!1,formAction:"",dialogOpen:!1,snackOpen:!1,alertMessage:"",dialogMessage:"",alertClass:""},a.procurementModel=dy(Zg),a.onSuccess=a.onSuccess.bind(Object(Pe.a)(a)),a.closeForm=a.closeForm.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initcontaminationConfiguration()}},{key:"initcontaminationConfiguration",value:function(){var e=this;Jg.getProcurement("").then((function(t){!0===t.code&&e.setState({data:t.data})}))}},{key:"openForm",value:function(e){var t,a=e;void 0===a||null===a?(a=this.procurementModel,t="Add"):t="update",this.setState({formData:a,formOpen:!this.state.formOpen,formAction:t})}},{key:"closeForm",value:function(){this.setState({formData:null,formOpen:!1,formAction:""})}},{key:"onSuccess",value:function(e){var t=this,a=Object(je.a)(this.state.data);if(void 0!==e&&null!==e)if("Add"===this.state.formAction)a.push(e),this.setState({data:a,formOpen:!this.state.formOpen,formAction:"",currentRowData:null},(function(){return t.snackOpen("success","add")}));else{var n=a.indexOf(this.state.formData);a[n]=e,this.setState({data:a,formOpen:!this.state.formOpen,formAction:"",currentRowData:null},(function(){return t.snackOpen("success","update")}))}else this.snackOpen("error","server")}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{container:!0,direction:"column",justify:"center",wrap:"wrap",style:{margin:"20px 20px 10px 0px"}},r.a.createElement(be.a,{item:!0,xs:12},r.a.createElement(Ve.a,{title:"Procurement",columns:this.state.columns,data:this.state.data,components:{Toolbar:function(t){return r.a.createElement("div",null,r.a.createElement(Le.MTableToolbar,t),r.a.createElement("div",{style:{padding:"0px 15px"}},r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:function(){return e.openForm(t.rowData)},"aria-label":"add"},r.a.createElement(wt.a,null))))}},actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.data,columns:e.state.columns,fileName:"Contract"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.initcontaminationConfiguration()}},{icon:"edit",tooltip:"Edit User",onClick:function(t,a){return e.openForm(a)}},{icon:"delete",tooltip:"Delete User",onClick:function(t,a){return e.dialogOpen(a)}}],icons:{Clear:function(t){return r.a.createElement(Nt.a,{onClick:function(){e.initFormControl()},style:{padding:0,margin:0}})}},options:{}})),r.a.createElement(be.a,{item:!0,xs:12},this.state.formOpen?r.a.createElement(uy,{formAction:this.state.formAction,formData:this.state.formData,formOpen:this.state.formOpen,onSuccess:this.onSuccess,closeForm:this.closeForm}):""),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:600,open:this.state.snackOpen,onClose:this.snackOpen,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.diaLogClose,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.diaLogClose,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDelete,color:"primary"},"Delete"))))}}]),t}(r.a.Component)),py=my,fy=(a(930),{properties:{Factory:{type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Factory cannot be empty."}},Datetime:{type:["date","string"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Datetime cannot be empty."}},Shift:{type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Shift cannot be empty."}},RMWetProcess:{type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Wet process cannot be empty."}},BlanketQty:{type:["number"],required:!0,allowEmpty:!1,exclusiveMinimum:0,messages:{allowEmpty:"Blanket quantity cannot be empty.",exclusiveMinimum:"Blanket quantity must be greater than 0."}}}}),hy=a(24),gy={validateFields:function(e){return hy.validate(e,fy,{cast:!0})},get:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="hangingShed/"+e,a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 2:case"end":return a.stop()}}))},getByUid:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="hangingShed/"+e,a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 2:case"end":return a.stop()}}))},getFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("hangingShed-filter/").concat(e),a.next=3,l.a.awrap(We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 3:return a.abrupt("return",a.sent);case 4:case"end":return a.stop()}}))},update:function(e,t){return Qe("hangingShed/"+e,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Updated successfully.",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,errors:e.data.errors,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="hangingShed/"+e,n.abrupt("return",He(a,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,message:"Added successfully.",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("hangingShed/"+e).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))}},yy=gy,vy={Factory:"",Datetime:new Date(Date.now()),Shift:"",RMWetProcess:"",Balance:0,BlanketQty:0,HSMaster_Detail:"",Remarks:"",CreatedAt:new Date(Date.now()).toLocaleString(),CreatedBy:"Admin",LastUpdatedAt:new Date(Date.now()).toLocaleString(),LastUpdatedBy:"Admin"},Cy=vy,Dy=(a(931),a(932),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={hsMasterData:[],existingSelection:""},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){void 0!==this.props.selectedFactory&&""!==this.props.selectedFactory&&this.fetchHSMasterData(),""!==this.props.selectedValue&&null!==this.props.selectedValue&&void 0!==this.props.selectedValue&&this.setState({existingSelection:this.props.selectedValue})}},{key:"componentDidUpdate",value:function(e){this.props.selectedFactory!==e.selectedFactory&&void 0!==this.props.selectedFactory&&""!==this.props.selectedFactory&&this.fetchHSMasterData()}},{key:"fetchHSMasterData",value:function(){var e,t=this;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:e=[],a.t0=this.props.for,a.next="BlanketQuality"===a.t0?4:7;break;case 4:return a.next=6,l.a.awrap(Do("HSMasterDetail/getHSMasterDetailForBlanketQualityDropDown/".concat(this.props.selectedFactory)).then((function(t){!0===t.code&&(e=t.data)})));case 6:return a.abrupt("break",9);case 7:return a.next=9,l.a.awrap(Do("HSMasterDetail/getForDropDown/".concat(this.props.selectedFactory)).then((function(t){!0===t.code&&(e=t.data)})));case 9:""!==this.props.existingSelection&&void 0!==this.props.existingSelection&&null!==this.props.existingSelection&&0===e.filter((function(e){return e._id===t.props.existingSelection._id})).length&&e.push(this.props.existingSelection),this.setState({hsMasterData:e});case 11:case"end":return a.stop()}}),null,this)}},{key:"renderOptions",value:function(){var e=this;return this.state.hsMasterData.map((function(t,a){return r.a.createElement(et.a,{label:"Select HSMaster",value:t._id,key:t._id,name:t.NumberResult},r.a.createElement(E.a,{style:{width:"100%"}},r.a.createElement(b.a,{alignItems:"flex-start"},e.props.columns.map((function(e){return r.a.createElement(S.a,{primary:t[e],style:{minWidth:"30%"}})})))))}))}},{key:"handleChange",value:function(e,t){var a=this.state.hsMasterData.find((function(t){return t._id===e.target.value}));void 0!==a?this.props.handleChange(a,t,this.props.required):this.props.handleChange("",t,this.props.required)}},{key:"render",value:function(){var e=this;return r.a.createElement(ya.a,{style:{width:"100%"}},r.a.createElement(Ea.a,{shrink:!0,htmlFor:"SI",required:this.props.required,error:!this.props.formControl.valid},this.props.columns.join(" - ")),r.a.createElement(ba.a,{id:this.props.propertyName,value:void 0===this.props.selectedValue||""===this.props.selectedValue?"":this.props.selectedValue._id,error:!this.props.formControl.valid,onChange:function(t){return e.handleChange(t,e.props.propertyName)},margin:"dense",displayEmpty:!0},r.a.createElement(et.a,{value:""},r.a.createElement("em",null,"Select HS")),void 0===this.state.hsMasterData||null===this.state.hsMasterData?"":this.renderOptions()),r.a.createElement(Sa.a,{error:!this.props.formControl.valid,style:{display:this.props.formControl.valid?"none":""}},this.props.formControl.valid?"":this.props.formControl.message))}}]),t}(r.a.Component)),Ey=Dy,by=Ey,Sy=yi,Oy=a(23),ky={Factory:{valid:!0,message:""},Datetime:{valid:!0,message:""},Shift:{valid:!0,message:""},RMWetProcess:{valid:!0,message:""},BlanketQty:{valid:!0,message:""},HSMaster_Detail:{valid:!0,message:""},Remarks:{valid:!0,message:""}},wy=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).closeForm=function(){a.setState({formControl:Oy(ky)},(function(){return a.props.closeForm()}))},a.snackOpen=function(e,t){var n;return l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0===e||null===e||void 0===t||null===t){r.next=7;break}return r.next=3,l.a.awrap(ka(e,t));case 3:n=r.sent,a.setState({snackOpen:!a.state.snackOpen,snackMessage:n,snackClass:e}),r.next=8;break;case 7:a.setState({snackOpen:!1});case 8:case"end":return r.stop()}}))},a.onSave=function(){var e=Object(me.a)({},a.state.formData),t=Object(me.a)({},a.state.formControl),n=yy.validateFields(e);n.valid?"Add"===a.props.formAction?yy.add("",e).then((function(e){!0===e.code?a.props.onSuccess(e.data):null!==e.errors&&Array.isArray(e.errors)?(e.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t})):a.snackOpen("error","server")})):yy.update("",e).then((function(e){!0===e.code?a.props.onSuccess(e.data):null!==e.errors&&Array.isArray(e.errors)?(e.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t})):a.snackOpen("error","server")})):(n.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t}),a.snackOpen("error","alertValidation"))},a.state={formData:a.props.formData,formOpen:a.props.formOpen,formControl:Oy(ky),selectedFactory:"",currentDeleteData:null,disabled:!1,snackOpen:!1,snackMessage:"",snackClass:"",genericDropDownData:[],genericDropDownColumns:["WBNo","Balance"],Balance:0},a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){""!==this.state.formData.Factory&&"object"===typeof this.state.formData.Factory&&this.loadDataForWBDropDown()}},{key:"resetFormControl",value:function(e,t){var a=Object(me.a)({},this.state.formControl);void 0!==e&&null!==e&&""!==e&&(a[t].valid=!0,a[t].message=""),this.setState({formControl:a})}},{key:"loadDataForWBDropDown",value:function(){var e,t=this;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return e=[],a.next=3,l.a.awrap(Do("WetProcess/getForDropDown/".concat(this.state.formData.Factory._id,"/2")).then((function(a){if(!0===a.code&&(e=a.data.filter((function(e){return!1===e.Closed||e._id===t.state.formData.RMWetProcess._id})),t.setState({genericDropDownData:e}),""!==t.state.formData.RMWetProcess)){var n=Object(me.a)({},t.state.formData),r=e.filter((function(e){return e._id===t.state.formData.RMWetProcess._id}));r.length>0&&(n.Balance=r[0].Balance,t.setState({formData:n}))}})));case 3:case"end":return a.stop()}}),null,this)}},{key:"handleChange",value:function(e,t,a){var n,r,o=this;return l.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:n=Object(me.a)({},this.state.formData),r=Object(me.a)({},this.state.formControl),a&&(void 0===e||""===e?(r[t].valid=!1,r[t].message=t+ka("validation","empty")):(r[t].valid=!0,r[t].message="")),"RMWetProcess"===t?n.Balance=e.Balance-this.state.formData.BlanketQty:"BlanketQty"===t&&(null===this.state.formData.Balance&&(this.state.formData.Balance=0),n.Balance=this.state.formData.Balance+this.state.formData.BlanketQty-e,n.Balance<0?(r[t].valid=!1,r[t].message="Blanket Quantity cannot be greater than balance."):(r[t].valid=!0,r[t].message="")),n[t]=e,"Factory"!==t||void 0!==e&&""!==e?(r[t].valid=!0,r[t].message="",this.setState({formData:n,formControl:r})):(r[t].valid=!1,r.RMWetProcess.valid=!0,r.RMWetProcess.message="",n.RMWetProcess="",this.setState({formData:n,formControl:r},(function(){return o.loadDataForWBDropDown()})));case 6:case"end":return s.stop()}}),null,this)}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{container:!0},r.a.createElement(Ae.a,{fullScreen:!0,open:this.state.formOpen,onClose:this.closeForm,TransitionComponent:this.Transition},r.a.createElement(w.a,{className:"appBar"},r.a.createElement(F.a,null,r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:this.closeForm,"aria-label":"close"},r.a.createElement(Vt.a,null)),r.a.createElement(x.a,{variant:"h6",className:"app-title"},"TS To HS"),r.a.createElement(he.a,{color:"inherit",disabled:this.state.disabled,onClick:this.onSave},"save"))),r.a.createElement(_e.a,null,r.a.createElement("div",{className:"form-container"},r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-around",alignItems:"center",md:10,xs:12,sm:12,xl:10,lg:10},r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Hr,{selectedValue:this.state.formData.Factory,propertyName:"Factory",handleChange:this.handleChange,formControl:this.state.formControl.Factory,disabled:void 0!==this.state.formData._id})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ns,{handleChange:function(t){return e.handleChange(t,"Shift",!0)},selectedValue:this.state.formData.Shift,formControl:this.state.formControl.Shift,propertyName:"Shift",factoryId:void 0===this.state.formData.Factory||""===this.state.formData.Factory?"":this.state.formData.Factory._id,autoSelect:void 0===this.props.formData._id})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Ac.a,{required:!0,format:"dd-MMM-yyyy hh:mm",label:"Datetime",value:this.state.formData.Datetime,onChange:function(t){e.handleChange(t,"Datetime")},disableFuture:!0}))),r.a.createElement(Sy,{data:this.state.genericDropDownData,columns:this.state.genericDropDownColumns,selectedValue:this.state.formData.RMWetProcess,propertyName:"RMWetProcess",required:!0,formControl:this.state.formControl.RMWetProcess,handleChange:function(t){return e.handleChange(t,"RMWetProcess",!0)}}),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{id:"WBBalance",label:"WB Balance",customInput:ge.a,value:this.state.formData.Balance,decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0,inputProps:{readOnly:!0}})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{id:"Fresh",label:"Blanket Qty (kg)",customInput:ge.a,defaultValue:this.state.formData.BlanketQty,onValueChange:function(t){return e.handleChange(void 0===t.floatValue?0:t.floatValue,"BlanketQty")},onFocus:function(e){e.target.select()},decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0,error:!this.state.formControl.BlanketQty.valid,helperText:this.state.formControl.BlanketQty.message})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(by,{handleChange:function(t){return e.handleChange(t,"HSMaster_Detail",!0)},selectedValue:this.state.formData.HSMaster_Detail,formControl:this.state.formControl.HSMaster_Detail,propertyName:"HSMaster_Detail",selectedFactory:void 0===this.state.formData.Factory||""===this.state.formData.Factory?"":this.state.formData.Factory._id,columns:["NumberResult","CurrentCapacity"],required:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"Remarks",label:"Remarks",defaultValue:this.state.formData.Remarks,className:"",onChange:function(t){return e.handleChange(t.target.value,"Remarks",!1)},margin:"dense"}))))))),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.snackClass,autoHideDuration:600,open:this.state.snackOpen,onClose:this.snackOpen,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.snackMessage)}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return{formOpen:e.formOpen}}}]),t}(r.a.Component),Fy=wy,xy=Fy,Ty=a(23),Ny=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).snackOpen=function(e,t){var n;return l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0===e||null===e||void 0===t||null===t){r.next=7;break}return r.next=3,l.a.awrap(ka(e,t));case 3:n=r.sent,a.setState({snackOpen:!a.state.snackOpen,alertMessage:n,alertClass:e}),r.next=8;break;case 7:a.setState({snackOpen:!1});case 8:case"end":return r.stop()}}))},a.dialogOpen=function(e){var t;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,l.a.awrap(ka("confirmation","delete"));case 2:t=n.sent,a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:e,dialogMessage:r.a.createElement("span",null,void 0!==t?t.replace("[Name]",e.Factory.FctyCode):"")});case 4:case"end":return n.stop()}}))},a.diaLogClose=function(){a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:null})},a.onDelete=function(){null!==a.state.currentDeleteData&&yy.delete("".concat(a.state.currentDeleteData._id)).then((function(e){if(!0===e.code){var t=Object(je.a)(a.state.data),n=t.indexOf(a.state.currentDeleteData);t.splice(n,1),a.setState({data:t,currentDeleteData:"",dialogOpen:!a.state.dialogOpen},(function(){return a.snackOpen("success","delete")}))}else a.snackOpen("error","server")}))},a.state={columns:[{title:"Factory",field:"Factory",render:function(e){return r.a.createElement("span",null,e.Factory.FctyCode)}},{title:"Date",render:function(e){return r.a.createElement("span",null,new Date(e.Datetime).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric"}))}},{title:"Time",render:function(e){return r.a.createElement("span",null,new Date(e.Datetime).toLocaleString("en-GB",{hour:"numeric",minute:"numeric",second:"numeric"}))}},{title:"Shift",field:"Shift",render:function(e){return r.a.createElement("span",null,void 0===e.Shift?"":e.Shift.Name)}},{title:"WB Number",field:"WetProcess",render:function(e){return r.a.createElement("span",null,void 0===e.RMWetProcess?"":e.RMWetProcess.WBNo)}},{title:"Blanket Qty(kg)",field:"BlanketQty",render:function(e){return r.a.createElement(Xa.a,{value:e.BlanketQty,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"HS Number",field:"HSMaster_Detail",render:function(e){return r.a.createElement("span",null,void 0===e.HSMaster_Detail?"":e.HSMaster_Detail.NumberResult)}},{title:"Operator",field:"LastUpdatedBy",editable:"never"},{title:"Last Updated",field:"LastUpdatedAt",render:function(e){return r.a.createElement("span",null,new Date(e.LastUpdatedAt).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}))}}],data:[],formData:null,currentDeleteData:null,formOpen:!1,formAction:"",dialogOpen:!1,snackOpen:!1,alertMessage:"",dialogMessage:"",alertClass:""},a.hangingShedModel=Ty(Cy),a.onSuccess=a.onSuccess.bind(Object(Pe.a)(a)),a.closeForm=a.closeForm.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initHangingShed()}},{key:"initHangingShed",value:function(){var e=this;yy.get("").then((function(t){!0===t.code&&e.setState({data:t.data})}))}},{key:"openForm",value:function(e){var t,a=e;void 0===a||null===a?(a=this.hangingShedModel,t="Add"):t="update",this.setState({formData:a,formOpen:!this.state.formOpen,formAction:t})}},{key:"closeForm",value:function(){this.setState({formData:null,formOpen:!1,formAction:""})}},{key:"onSuccess",value:function(e){var t=this,a=Object(je.a)(this.state.data);if(void 0!==e&&null!==e)if("Add"===this.state.formAction)a.push(e),this.setState({data:a,formOpen:!this.state.formOpen,formAction:"",currentRowData:null},(function(){return t.snackOpen("success","add")}));else{var n=a.indexOf(this.state.formData);a[n]=e,this.setState({data:a,formOpen:!this.state.formOpen,formAction:"",currentRowData:null},(function(){return t.snackOpen("success","update")}))}else this.snackOpen("error","server")}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{container:!0,direction:"column",justify:"center",wrap:"wrap",style:{margin:"20px 20px 10px 0px"}},r.a.createElement(be.a,{item:!0,xs:12},r.a.createElement(Ve.a,{title:"TS To HS",columns:this.state.columns,data:this.state.data,components:{Toolbar:function(t){return r.a.createElement("div",null,r.a.createElement(Le.MTableToolbar,t),r.a.createElement("div",{style:{padding:"0px 15px"}},r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:function(){return e.openForm(t.rowData)},"aria-label":"add"},r.a.createElement(wt.a,null))))}},actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.data,columns:e.state.columns,fileName:"Contract"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.initHangingShed()}},{icon:"edit",tooltip:"Edit User",onClick:function(t,a){return e.openForm(a)}},{icon:"delete",tooltip:"Delete User",onClick:function(t,a){return e.dialogOpen(a)}}],icons:{Clear:function(t){return r.a.createElement(Nt.a,{onClick:function(){e.initFormControl()},style:{padding:0,margin:0}})}},options:{}})),r.a.createElement(be.a,{item:!0,xs:12},this.state.formOpen?r.a.createElement(xy,{formAction:this.state.formAction,formData:this.state.formData,formOpen:this.state.formOpen,onSuccess:this.onSuccess,closeForm:this.closeForm}):""),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:600,open:this.state.snackOpen,onClose:this.snackOpen,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.diaLogClose,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.diaLogClose,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDelete,color:"primary"},"Delete"))))}}]),t}(r.a.Component),jy=Ny,Py=jy,Ay=(a(933),{properties:{Factory:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Factory cannot be empty.",conform:"Factory cannot be empty.",required:"Factory cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},WBNo:{description:"",type:"any"},Date:{description:"",type:"any",required:!0,allowEmpty:!1,messages:{allowEmpty:"Date cannot be empty.",conform:"Date cannot be empty.",required:"Date cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},Time:{description:"",type:"any",required:!0,allowEmpty:!1,messages:{allowEmpty:"Time cannot be empty.",conform:"Time cannot be empty.",required:"Time cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},Shift:{description:"",type:["object","array"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Shift cannot be empty.",conform:"Shift cannot be empty.",required:"Shift cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},RLot:{description:"",type:["object","array"],required:!0,allowEmpty:!1,messages:{allowEmpty:"R-Lot cannot be empty.",conform:"R-Lot cannot be empty.",required:"R-Lot cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},SendTo:{description:"",type:"any"},StorageLocationDetail_WP:{description:"",type:["object","array"]},Closed:{description:"",type:"boolean"},ClosedRemarks:{description:"",type:"string"},CreatedAt:{type:"any",default:Date.now()},CreatedBy:{type:"string",default:""},LastUpdatedAt:{type:"any",default:Date.now()},LastUpdatedBy:{type:"string",default:""}}}),My={properties:{StorageLocation:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Factory cannot be empty.",conform:"Factory cannot be empty.",required:"Factory cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},GrossQty:{description:"",type:"any",required:!0,allowEmpty:!1,messages:{allowEmpty:"Gross Qty cannot be empty.",conform:"Gross Qty cannot be empty.",required:"Gross Qty cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},Balance:{description:"",type:"any"}}},_y=a(24),Iy={validateFields:function(e){return _y.validate(e,Ay,{cast:!0})},validateStorageLocationFields:function(e){return _y.validate(e,My,{cast:!0})},getWetProcess:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="WetProcess/"+e,a.abrupt("return",We(t).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},getWetProcessFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("WetProcess-filter/").concat(e),a.abrupt("return",We(t).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},getOneWetProcess:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("WetProcess/").concat(e),a.abrupt("return",We(t).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},update:function(e,t){return Qe("WetProcess/"+e,t).then((function(e){return console.log(e),200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Updated",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="WetProcess/"+e,n.abrupt("return",He(a,t).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Added",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,formValid:!0,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("WetProcess/"+e).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))}},Ry=Iy,Ly={Factory:"",WBNo:"",Date:Date.now(),ProcessTime:Date.now(),Shift:"",RLot:"",DRC:0,SendTo:"",Supplier:"",StorageLocationDetail_WP:[],Closed:!1,ClosedRemarks:""},Vy=Ly,By=(a(934),a(24)),Uy={validateStorageLocationFields:function(e){return By.validate(e,My,{cast:!0})},getStorageLocationWP:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="StorageLocationWP/"+e,a.abrupt("return",We(t).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},getStorageLocationWPFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("StorageLocationWP-filter/").concat(e),a.abrupt("return",We(t).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},getOneStorageLocationWP:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("StorageLocationWP/").concat(e),a.abrupt("return",We(t).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},update:function(e,t){return Qe("StorageLocationWP/"+e,t).then((function(e){return console.log(e),200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Updated",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="StorageLocationWP/"+e,n.abrupt("return",He(a,t).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Added",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,formValid:!0,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("StorageLocationWP/"+e).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))}},qy=Uy,Gy=a(23),Wy=(Object(n.forwardRef)((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),{Factory:{valid:!0,message:""},Date:{valid:!0,message:""},ProcessTime:{valid:!0,message:""},Shift:{valid:!0,message:""},RLot:{valid:!0,message:""},StorageLocationDetail_WP:{IDNumber:{valid:!0,message:""},GrossQty:{valid:!0,message:""}}}),Hy=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).closeForm=function(){a.setState({formControl:Gy(Wy)},(function(){return a.props.closeForm()}))},a.snackOpen=function(e,t){var n;return l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0===e||null===e||void 0===t||null===t){r.next=7;break}return r.next=3,l.a.awrap(ka(e,t));case 3:n=r.sent,a.setState({snackOpen:!a.state.snackOpen,snackMessage:n,snackClass:e}),r.next=8;break;case 7:a.setState({snackOpen:!1});case 8:case"end":return r.stop()}}))},a.dialogOpen=function(e){var t;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(void 0===e||null===e){n.next=7;break}return n.next=3,l.a.awrap(ka("confirmation","delete"));case 3:t=n.sent,a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:e,dialogMessage:r.a.createElement("span",null,void 0!==t?t.replace("[Name]",e.Tool.Name):"")}),n.next=8;break;case 7:a.setState({dialogOpen:!1});case 8:case"end":return n.stop()}}))},a.onSave=function(){var e=Object(me.a)({},a.state.formData),t=Object(me.a)({},a.state.formControl),n=Ry.validateFields(e);n.valid?"Add"===a.props.formAction?Ry.add("",e).then((function(e){!0===e.code?a.props.onSuccess(e.data):null!==e.errors&&Array.isArray(e.errors)?(e.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t})):a.snackOpen("error","server")})):Ry.update("",e).then((function(e){!0===e.code?a.props.onSuccess(e.data):null!==e.errors&&Array.isArray(e.errors)?(e.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t})):a.snackOpen("error","server")})):(n.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t}),a.snackOpen("error.","alertValidation"))},a.onDelete=function(e,t){if(void 0!==a.state.currentDeleteData&&null!==a.state.currentDeleteData){var n=Object(je.a)(a.state.StorageLocationDetail_WP),r=Object(me.a)({},a.state.formData),o=n.indexOf(a.state.currentDeleteData);n.splice(o,1),r.StorageLocationDetail_WP.splice(o,1),a.setState({StorageLocationDetail_WP:n,formData:r,dialogOpen:!1},(function(){return Object(Pe.a)(a)}),a.snackOpen("success","delete"))}},a.state={formData:a.props.formData,formOpen:a.props.formOpen,StorageLocationDetail_WP:[],formControl:Gy(Wy),columns:[{title:"ID Number",field:"StorageLocation",render:function(e){return r.a.createElement("span",null,null===e.StorageLocation?"":e.StorageLocation.NumberResult)},editComponent:function(e){return r.a.createElement(ny,{selectedFactory:"object"===typeof a.state.formData.Factory&&null!==a.state.formData.Factory?a.state.formData.Factory._id:"",propertyName:"StorageLocation",selectedValue:"object"===typeof e.value&&null!==e.value?e.value._id:e.value,formControl:a.state.formControl.StorageLocationDetail_WP.IDNumber,handleChange:function(t){e.onChange(t),a.resetFormControl(t,"IDNumber")},columns:["NumberResult","CurrentCapacity"],required:!0})}},{title:"Gross Qty",field:"GrossQty",render:function(e){return r.a.createElement("span",null,e.GrossQty)},editComponent:function(e){return r.a.createElement(Xa.a,{customInput:ge.a,label:"Gross Qty",error:"object"===typeof e.rowData.StorageLocationDetail_WP&&null!==e.rowData.StorageLocationDetail_WP&&e.rowData.StorageLocationDetail_WP.CurrentCapacity<e.value,defaultValue:void 0===e.value?0:e.value,onValueChange:function(t){t.formattedValue;var a=t.value;e.onChange(a)},helperText:"object"===typeof e.rowData.StorageLocationDetail_WP&&null!==e.rowData.StorageLocationDetail_WP&&e.rowData.StorageLocationDetail_WP.CurrentCapacity<e.value?"Gross Quantity cannot be exceed the balance.":""})}},{title:"Balance (kg)",field:"Balance",render:function(e){return r.a.createElement("span",null,e.Balance)},editComponent:function(e){return console.log(e),r.a.createElement("span",null,"object"===typeof e.rowData.StorageLocation&&null!==e.rowData.StorageLocation?e.rowData.StorageLocation.CurrentCapacity:0)}}],currentDeleteData:null,disabled:!1,dialogOpen:!1,dialogMessage:"",snackOpen:!1,snackMessage:"",snackClass:""},a.handelChange=a.handelChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;void 0!==this.state.formData._id&&""!==this.state.formData._id&&qy.getStorageLocationWPFilter("?RMWetProcess=".concat(this.state.formData._id)).then((function(t){!0===t.code&&e.setState({StorageLocationDetail_WP:t.data})})),""!==this.state.formData.Factory&&"object"===typeof this.state.formData.Factory&&this.getFactoryProcessType()}},{key:"resetFormControl",value:function(e,t){var a=Object(me.a)({},this.state.formControl);void 0!==e&&null!==e&&""!==e?(a.StorageLocationDetail_WP[t].valid=!0,a.StorageLocationDetail_WP[t].message=""):a.StorageLocationDetail_WP=Gy(Wy.StorageLocationDetail_WP),this.setState({formControl:a})}},{key:"getFactoryProcessType",value:function(){var e,t,a,n=this;return l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(e=Object(me.a)({},this.state.formData),void 0===this.state.formData.Factory||null===this.state.formData.Factory||"object"!=typeof this.state.formData.Factory){r.next=6;break}return r.next=4,l.a.awrap(bo("factory.json","ProcessType"));case 4:void 0!==(t=r.sent)&&null!==t&&Array.isArray(t)&&(a=t.find((function(e){return e.Value===n.state.formData.Factory.FctyProcessType})),e.SendTo=a);case 6:this.setState({formData:e});case 7:case"end":return r.stop()}}),null,this)}},{key:"handelChange",value:function(e,t,a){var n=this,r=Object(me.a)({},this.state.formData),o=Object(me.a)({},this.state.formControl);a&&(void 0===e||""===e?(o[t].valid=!1,o[t].message=t+ka("validation","empty")):(o[t].valid=!0,o[t].message="")),r[t]=e,"Factory"===t?this.setState({formData:r},(function(){return n.getFactoryProcessType()})):this.setState({formData:r})}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{container:!0},r.a.createElement(Ae.a,{fullScreen:!0,open:this.state.formOpen,onClose:this.closeForm,TransitionComponent:this.Transition},r.a.createElement(w.a,{className:"appBar"},r.a.createElement(F.a,null,r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:this.closeForm,"aria-label":"close"},r.a.createElement(Vt.a,null)),r.a.createElement(x.a,{variant:"h6",className:"app-title"},"Wet Process"),r.a.createElement(he.a,{color:"inherit",disabled:this.state.disabled,onClick:this.onSave},"save"))),r.a.createElement(_e.a,null,r.a.createElement("div",{className:"form-container"},r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-around",alignItems:"center",md:10,xs:12,sm:12,xl:10,lg:10},r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(Hr,{selectedValue:this.state.formData.Factory,formControl:this.state.formControl.Factory,propertyName:"Factory",required:!0,handleChange:function(t){e.handelChange(t,"Factory",!0)}})),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"WBNo",label:"WBNo",disabled:!0,value:this.state.formData.WBNo,className:"",onChange:function(t){return e.handelChange(t.target.value,"WBNo",!1)},margin:"dense"}))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Da.b,{style:{width:"100%"},margin:"dense",id:"date-picker-dialog",label:"Date",format:"dd-MMM-yyyy",value:void 0===this.state.formData.Date?Date.now():this.state.formData.Date,onChange:function(t){return e.handelChange(new Date(t),"Date",!1)},KeyboardButtonProps:{"aria-label":"Date"}})))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(hl.a,{style:{width:"100%"},margin:"dense",id:"date-picker-dialog",label:"Process Time",value:void 0===this.state.formData.ProcessTime?Date.now():this.state.formData.ProcessTime,onChange:function(t){return e.handelChange(new Date(t),"ProcessTime",!0)},KeyboardButtonProps:{"aria-label":"ProcessTime"}})))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ns,{factoryId:"object"===typeof this.state.formData.Factory&&null!==this.state.formData.Factory?this.state.formData.Factory._id:"",selectedValue:"object"===typeof this.state.formData.Shift?this.state.formData.Shift._id:"",propertyName:"Shift",formControl:this.state.formControl.Shift,handleChange:function(t){return e.handelChange(t,"Shift",!0)},required:!0}))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(Al,{selectedFactory:"object"===typeof this.state.formData.Factory&&null!==this.state.formData.Factory?this.state.formData.Factory._id:"",selectedValue:"object"===typeof this.state.formData.RLot&&null!==this.state.formData.RLot?this.state.formData.RLot._id:"",propertyName:"RLot",formControl:this.state.formControl.RLot,handleChange:function(t){return e.handelChange(t,"RLot",!0)},required:!0})),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"SendTo",label:"Send To",disabled:!0,value:"object"===typeof this.state.formData.SendTo?this.state.formData.SendTo.Name:"",className:"",margin:"dense"}))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(Ve.a,{style:{width:"100%",margin:4},title:"Storage Location Detail",columns:this.state.columns,data:this.state.StorageLocationDetail_WP,editable:{onRowAdd:function(t){return new Promise((function(a,n){setTimeout((function(){var r=Object(me.a)({},e.state.formData),o=Object(je.a)(e.state.StorageLocationDetail_WP),s=Object(me.a)({},e.state.formControl);void 0!==t&&0!==Object.keys(t).length&&(t.Balance=t.StorageLocation.CurrentCapacity);var i=qy.validateStorageLocationFields(t);i.valid?(o.push(t),console.log(o),r.StorageLocationDetail_WP=[],r.StorageLocationDetail_WP=o,e.setState({formData:r,StorageLocationDetail_WP:o},(function(){return a()})),e.snackOpen("success","add")):(n(),i.errors.map((function(e){s.StorageLocationDetail_WP[e.property].valid=!1,s.StorageLocationDetail_WP[e.property].message=e.message})),e.setState({formControl:s}))}),1e3)}))},onRowUpdate:function(t,a){return new Promise((function(n,r){setTimeout((function(){var o=Object(me.a)({},e.state.formData),s=Object(je.a)(e.state.StorageLocationDetail_WP),i=s.indexOf(a),l=e.state.formControl,c=qy.validateStorageLocationFields(t);c.valid?(s[i]=t,o.StorageLocationDetail_WP[i]={Tool:t.Tool.id,ToolQty:t.ToolQty},e.setState({formData:o,StorageLocationDetail_WP:s},(function(){return n()})),e.snackOpen("success","update")):(r(),c.errors.map((function(e){l[e.property].valid=!1,l[e.property].message=e.message})),e.setState({formControl:l}))}),1e3)}))}},actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.data,columns:e.state.columns,fileName:"Broker"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.initStorageLocationDetail_WP()}},{icon:"delete",tooltip:"Delete Contamination",onClick:function(t,a){return e.dialogOpen(a)}}],icons:{Clear:function(t){return r.a.createElement(Nt.a,{onClick:function(){e.resetFormControl()},style:{padding:0,margin:0}})}},options:{}})))))),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.snackClass,autoHideDuration:600,open:this.state.snackOpen,onClose:this.snackOpen,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.snackMessage)}),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.dialogOpen,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.dialogOpen,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDelete,color:"primary"},"Delete"))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return{formOpen:e.formOpen}}}]),t}(r.a.Component),Qy=Hy,zy=Qy,Yy=a(23),Ky=(Object(n.forwardRef)((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),r.a.forwardRef((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).snackOpen=function(e,t){var n;return l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0===e||null===e||void 0===t||null===t){r.next=8;break}return r.next=3,l.a.awrap(ka(e,t));case 3:void 0!==(n=r.sent)&&null!==n&&"runningno"===t&&(n=n.replace("[Name]","WB No")),a.setState({snackOpen:!a.state.snackOpen,alertMessage:n,alertClass:e}),r.next=9;break;case 8:a.setState({snackOpen:!1});case 9:case"end":return r.stop()}}))},a.dialogOpen=function(e){var t;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,l.a.awrap(ka("confirmation","delete"));case 2:t=n.sent,a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:e,dialogMessage:r.a.createElement("span",null,void 0!==t?t.replace("[Name]",e.Factory.FctyName):"")});case 4:case"end":return n.stop()}}))},a.diaLogClose=function(){a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:null})},a.onDelete=function(){null!==a.state.currentDeleteData&&Ry.delete("".concat(a.state.currentDeleteData._id)).then((function(e){if(!0===e.code){var t=Object(je.a)(a.state.data),n=t.indexOf(a.state.currentDeleteData);t.splice(n,1),a.setState({data:t,currentDeleteData:"",dialogOpen:!a.state.dialogOpen},(function(){return a.snackOpen("success","delete")}))}else a.snackOpen("error","server")}))},a.state={columns:[{title:"Factory",field:"Factory",render:function(e){return r.a.createElement("span",null,e.Factory.FctyName)}},{title:"WB No",field:"WBNo"},{title:"Date",field:"Date",render:function(e){return r.a.createElement("span",null,new Date(e.Date).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric"}))}},{title:"Time",field:"ProcessTime",render:function(e){return r.a.createElement("span",null,new Date(e.ProcessTime).toLocaleString("en-GB",{hour:"numeric",minute:"numeric",second:"numeric"}))}},{title:"Shift ",field:"Shift ",render:function(e){return r.a.createElement("span",null,e.Shift.Name)}},{title:"Send to",field:"SendTo",render:function(e){return r.a.createElement("span",null,e.SendTo.Name)}},{title:"Closed",field:"Closed",render:function(e){return r.a.createElement("span",null,e.Closed?"Yes":"No")}},{title:"Operator",field:"LastUpdatedBy",editable:"never"},{title:"Last Updated",field:"LastUpdatedAt",render:function(e){return r.a.createElement("span",null,void 0===e?"":new Date(e.LastUpdatedAt).toLocaleDateString())},editable:"never"}],data:[],formData:null,currentDeleteData:null,formOpen:!1,formAction:"",dialogOpen:!1,snackOpen:!1,alertMessage:"",dialogMessage:"",alertClass:""},a.WetProcessModel=Yy(Vy),a.onSuccess=a.onSuccess.bind(Object(Pe.a)(a)),a.closeForm=a.closeForm.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initcontaminationConfiguration()}},{key:"initcontaminationConfiguration",value:function(){var e=this;Ry.getWetProcess("").then((function(t){!0===t.code&&e.setState({data:t.data})}))}},{key:"openForm",value:function(e){var t,a,n,r;return l.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(t=e,n=!this.state.formOpen,void 0!==t&&null!==t){o.next=11;break}return t=this.WetProcessModel,o.next=6,l.a.awrap(Do("RunningNo/RMWetProcess/".concat(new Date(Date.now()).getFullYear(),"/").concat(new Date(Date.now()).getMonth()+1)).then((function(e){return!0===e.code?e.data:null})));case 6:void 0!==(r=o.sent)&&null!==r?t.WBNo=r:(n=!1,this.snackOpen("error","runningno")),a="Add",o.next=12;break;case 11:a="update";case 12:this.setState({formData:t,formOpen:n,formAction:a});case 13:case"end":return o.stop()}}),null,this)}},{key:"closeForm",value:function(){this.setState({formData:null,formOpen:!1,formAction:""})}},{key:"onSuccess",value:function(e){var t=this,a=Object(je.a)(this.state.data);if(void 0!==e&&null!==e)if("Add"===this.state.formAction)a.push(e),this.setState({data:a,formOpen:!this.state.formOpen,formAction:"",currentRowData:null},(function(){return t.snackOpen("success","add")}));else{var n=a.indexOf(this.state.formData);a[n]=e,this.setState({data:a,formOpen:!this.state.formOpen,formAction:"",currentRowData:null},(function(){return t.snackOpen("success","update")}))}else this.snackOpen("error","server")}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{container:!0,direction:"column",justify:"center",wrap:"wrap",style:{margin:"20px 20px 10px 0px"}},r.a.createElement(be.a,{item:!0,xs:12},r.a.createElement(Ve.a,{title:"Wet Process",columns:this.state.columns,data:this.state.data,components:{Toolbar:function(t){return r.a.createElement("div",null,r.a.createElement(Le.MTableToolbar,t),r.a.createElement("div",{style:{padding:"0px 15px"}},r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:function(){return e.openForm(t.rowData)},"aria-label":"add"},r.a.createElement(wt.a,null))))}},actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.data,columns:e.state.columns,fileName:"WetProcess"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.initcontaminationConfiguration()}},{icon:"edit",tooltip:"Edit User",onClick:function(t,a){return e.openForm(a)}},{icon:"delete",tooltip:"Delete User",onClick:function(t,a){return e.dialogOpen(a)}}],icons:{Clear:function(t){return r.a.createElement(Nt.a,{onClick:function(){e.initFormControl()},style:{padding:0,margin:0}})}},options:{}})),r.a.createElement(be.a,{item:!0,xs:12},this.state.formOpen?r.a.createElement(zy,{formAction:this.state.formAction,formData:this.state.formData,formOpen:this.state.formOpen,onSuccess:this.onSuccess,closeForm:this.closeForm}):""),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:600,open:this.state.snackOpen,onClose:this.snackOpen,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.diaLogClose,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.diaLogClose,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDelete,color:"primary"},"Delete"))))}}]),t}(r.a.Component)),Jy=Ky,Zy=(a(935),{properties:{Factory:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Factory cannot be empty.",conform:"Factory cannot be empty.",required:"Factory cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},Date:{description:"",type:"any",required:!0,allowEmpty:!1,messages:{allowEmpty:"Date cannot be empty.",conform:"Date cannot be empty.",required:"Date cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},Shift:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Shift cannot be empty.",conform:"Shift cannot be empty.",required:"Shift cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},HSMaster_Detail:{description:"",type:"any"},RMWetProcess:{description:"",type:"any"},Balance:{description:"",type:"any"},BlanketQty:{description:"",type:"any",conform:function(e){return!(e.Balance<e)}},Remarks:{description:"",type:"string"},CreatedAt:{type:"any",default:Date.now()},CreatedBy:{type:"string",default:""},LastUpdatedAt:{type:"any",default:Date.now()},LastUpdatedBy:{type:"string",default:""}}}),Xy=a(24),$y={validateFields:function(e){return Xy.validate(e,Zy,{cast:!0})},getDryProcess:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="DryProcess/"+e,a.abrupt("return",We(t).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},getDryProcessFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("DryProcess-filter/").concat(e),a.abrupt("return",We(t).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},getOneDryProcess:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("DryProcess/").concat(e),a.abrupt("return",We(t).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},update:function(e,t){return Qe("DryProcess/"+e,t).then((function(e){return console.log(e),200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Updated",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="DryProcess/"+e,n.abrupt("return",He(a,t).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Added",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,formValid:!0,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("DryProcess/"+e).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))}},ev=$y,tv={Factory:"",Date:Date.now(),Shift:"",HSMaster_Detail:null,RMWetProcess:null,Balance:"",BlanketQty:0,Remarks:""},av=tv,nv=(a(936),a(23)),rv=(Object(n.forwardRef)((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),{Factory:{valid:!0,message:""},Shift:{valid:!0,message:""},HSMaster_Detail:{valid:!0,message:""},RMWetProcess:{valid:!0,message:""},BlanketQty:{valid:!0,message:""}}),ov=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).closeForm=function(){a.setState({formControl:nv(rv)},(function(){return a.props.closeForm()}))},a.snackOpen=function(e,t){var n;return l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0===e||null===e||void 0===t||null===t){r.next=7;break}return r.next=3,l.a.awrap(ka(e,t));case 3:n=r.sent,a.setState({snackOpen:!a.state.snackOpen,snackMessage:n,snackClass:e}),r.next=8;break;case 7:a.setState({snackOpen:!1});case 8:case"end":return r.stop()}}))},a.dialogOpen=function(e){var t;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(void 0===e||null===e){n.next=7;break}return n.next=3,l.a.awrap(ka("confirmation","delete"));case 3:t=n.sent,a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:e,dialogMessage:r.a.createElement("span",null,void 0!==t?t.replace("[Name]",e.Tool.Name):"")}),n.next=8;break;case 7:a.setState({dialogOpen:!1});case 8:case"end":return n.stop()}}))},a.onSave=function(){var e=Object(me.a)({},a.state.formData),t=Object(me.a)({},a.state.formControl),n=ev.validateFields(e);n.valid?"Add"===a.props.formAction?ev.add("",e).then((function(e){!0===e.code?a.props.onSuccess(e.data):null!==e.errors&&Array.isArray(e.errors)?(e.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t})):a.snackOpen("error","server")})):ev.update("",e).then((function(e){!0===e.code?a.props.onSuccess(e.data):null!==e.errors&&Array.isArray(e.errors)?(e.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t})):a.snackOpen("error","server")})):(n.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t}),a.snackOpen("error.","alertValidation"))},a.onDelete=function(e,t){if(void 0!==a.state.currentDeleteData&&null!==a.state.currentDeleteData){var n=Object(je.a)(a.state.toolDetail),r=Object(me.a)({},a.state.formData),o=n.indexOf(a.state.currentDeleteData);n.splice(o,1),r.ToolDetail.splice(o,1),a.setState({toolDetail:n,formData:r,dialogOpen:!1},(function(){return Object(Pe.a)(a)}),a.snackOpen("success","delete"))}},a.state={formData:a.props.formData,formOpen:a.props.formOpen,formControl:nv(rv),genericDropDownData:[],genericDropDownColumns:[],genericDropDownSelectedValue:null,genericDropDownPropertyName:"",selectedCountry:"",currentDeleteData:null,disabled:!1,dialogOpen:!1,dialogMessage:"",snackOpen:!1,snackMessage:"",snackClass:""},a.handelChange=a.handelChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){""!==this.state.formData.Factory&&"object"===typeof this.state.formData.Factory&&this.getFactoryProcessType()}},{key:"resetFormControl",value:function(e,t){var a=Object(me.a)({},this.state.formControl);void 0!==e&&null!==e&&""!==e&&(a[t].valid=!0,a[t].message=""),this.setState({formControl:a})}},{key:"getFactoryProcessType",value:function(){var e,t,a=this;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(void 0===this.state.formData.Factory||null===this.state.formData.Factory||"object"!=typeof this.state.formData.Factory){n.next=15;break}return n.next=3,l.a.awrap(bo("factory.json","ProcessType"));case 3:if(void 0===(e=n.sent)||null===e||!Array.isArray(e)){n.next=15;break}if(t=e.find((function(e){return e.Value===a.state.formData.Factory.FctyProcessType})),null,void 0===t||null===t){n.next=15;break}if("Direct Process"!==t.Name&&"DP"!==t.Name){n.next=13;break}return n.next=11,l.a.awrap(Do("WetProcess/getForDropDown/".concat(this.state.formData.Factory._id,"/").concat(this.state.formData.Factory.FctyProcessType)).then((function(e){if(!0===e.code){var t=e.data.filter((function(e){return!1===e.Closed||null!==a.state.formData.RMWetProcess&&e._id===a.state.formData.RMWetProcess._id}));a.setState({genericDropdownData:t,genericDropDownColumns:["WBNo","Balance"],genericDropDownPropertyName:"RMWetProcess",genericDropDownSelectedValue:a.state.formData.RMWetProcess})}})));case 11:n.next=15;break;case 13:return n.next=15,l.a.awrap(Do("HSMasterDetail/getForDropDown/".concat(this.state.formData.Factory._id)).then((function(e){if(!0===e.code){a.setState({genericDropdownData:e.data,genericDropDownColumns:["NumberResult","CurrentCapacity"],genericDropDownPropertyName:"HSMaster_Detail",genericDropDownSelectedValue:a.state.formData.HSMaster_Detail})}})));case 15:case"end":return n.stop()}}),null,this)}},{key:"handelChange",value:function(e,t,a){var n=this,r=Object(me.a)({},this.state.formData),o=Object(me.a)({},this.state.formControl);void 0!==t&&null!==t&&""!==t&&(a&&(void 0===e||""===e?(o[t].valid=!1,o[t].message=t+ka("validation","empty")):(o[t].valid=!0,o[t].message="")),"RMWetProcess"===t||"HSMaster_Detail"===t?(r.Balance="RMWetProcess"===t?e.Balance:e.CurrentCapacity,this.setState({genericDropDownSelectedValue:e})):"BlanketQty"===t&&(("object"===typeof r.RMWetProcess&&null!==r.RMWetProcess?this.state.formData.RMWetProcess.Balance<e:this.state.formData.HSMaster_Detail.CurrentCapacity<e)?(o[t].valid=!1,o[t].message="Blanket Quantity cannot be greater than balance."):(o[t].valid=!0,o[t].message="")),r[t]=e,"Factory"===t?(o.HSMaster_Detail.valid=!0,o.HSMaster_Detail.message="",o.RMWetProcess.valid=!0,o.RMWetProcess.message="",this.setState({formData:r,formControl:o},(function(){return n.getFactoryProcessType()}))):this.setState({formData:r,formControl:o}))}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{container:!0},r.a.createElement(Ae.a,{fullScreen:!0,open:this.state.formOpen,onClose:this.closeForm,TransitionComponent:this.Transition},r.a.createElement(w.a,{className:"appBar"},r.a.createElement(F.a,null,r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:this.closeForm,"aria-label":"close"},r.a.createElement(Vt.a,null)),r.a.createElement(x.a,{variant:"h6",className:"app-title"},"Dry Process"),r.a.createElement(he.a,{color:"inherit",disabled:this.state.disabled,onClick:this.onSave},"save"))),r.a.createElement(_e.a,null,r.a.createElement("div",{className:"form-container"},r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-around",alignItems:"center",md:10,xs:12,sm:12,xl:10,lg:10},r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(Hr,{selectedValue:this.state.formData.Factory,formControl:this.state.formControl.Factory,propertyName:"Factory",required:!0,handleChange:function(t){e.handelChange(t,"Factory",!0)}})),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Da.b,{style:{width:"100%"},margin:"dense",id:"date-picker-dialog",label:"Date",format:"dd-MMM-yyyy",value:void 0===this.state.formData.Date?Date.now():this.state.formData.Date,onChange:function(t){return e.handelChange(new Date(t),"Date",!1)},KeyboardButtonProps:{"aria-label":"Date"}})))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ns,{factoryId:"object"===typeof this.state.formData.Factory&&null!==this.state.formData.Factory?this.state.formData.Factory._id:"",selectedValue:"object"===typeof this.state.formData.Shift?this.state.formData.Shift._id:"",propertyName:"Shift",formControl:this.state.formControl.Shift,handleChange:function(t){return e.handelChange(t,"Shift",!0)},required:!0}))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(yi,{data:this.state.genericDropdownData,columns:this.state.genericDropDownColumns,selectedValue:this.state.genericDropDownSelectedValue,propertyName:this.state.genericDropDownPropertyName,required:!0,formControl:this.state.formControl[this.state.genericDropDownPropertyName],handleChange:function(t){return e.handelChange(t,e.state.genericDropDownPropertyName,!0)}})),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"Balance",label:"Balance",disabled:!0,value:"RMWetProcess"===this.state.genericDropDownPropertyName&&null!==this.state.formData.RMWetProcess?this.state.formData.RMWetProcess.Balance:"HSMaster_Detail"===this.state.genericDropDownPropertyName&&null!==this.state.formData.HSMaster_Detail?this.state.formData.HSMaster_Detail.CurrentCapacity:0,className:"",onChange:function(t){return e.handelChange(t.target.value,"Balance",!1)},margin:"dense"}))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{id:"BlanketQty",label:"Blanket Qty",customInput:ge.a,defaultValue:this.state.formData.BlanketQty,onValueChange:function(t){return e.handelChange(t.floatValue,"BlanketQty",!1)},onFocus:function(e){e.target.select()},decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0}),r.a.createElement(Sa.a,{error:!this.state.formControl.BlanketQty.valid},this.state.formControl.BlanketQty.valid?"":this.state.formControl.BlanketQty.message))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"Remarks",label:"Remarks",multiline:!0,rows:"4",defaultValue:this.state.formData.Remarks,className:"",onChange:function(t){return e.handelChange(t.target.value,"Remarks",!1)},margin:"dense"}))))))),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.snackClass,autoHideDuration:600,open:this.state.snackOpen,onClose:this.snackOpen,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.snackMessage)}),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.dialogOpen,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.dialogOpen,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDelete,color:"primary"},"Delete"))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return{formOpen:e.formOpen}}}]),t}(r.a.Component),sv=ov,iv=sv,lv=a(23),cv=(Object(n.forwardRef)((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),r.a.forwardRef((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).snackOpen=function(e,t){var n;return l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0===e||null===e||void 0===t||null===t){r.next=7;break}return r.next=3,l.a.awrap(ka(e,t));case 3:n=r.sent,a.setState({snackOpen:!a.state.snackOpen,alertMessage:n,alertClass:e}),r.next=8;break;case 7:a.setState({snackOpen:!1});case 8:case"end":return r.stop()}}))},a.dialogOpen=function(e){var t;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,l.a.awrap(ka("confirmation","delete"));case 2:t=n.sent,a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:e,dialogMessage:r.a.createElement("span",null,void 0!==t?t.replace("[Name]",e.Factory.FctyName):"")});case 4:case"end":return n.stop()}}))},a.diaLogClose=function(){a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:null})},a.onDelete=function(){null!==a.state.currentDeleteData&&ev.delete("".concat(a.state.currentDeleteData._id)).then((function(e){if(!0===e.code){var t=Object(je.a)(a.state.data),n=t.indexOf(a.state.currentDeleteData);t.splice(n,1),a.setState({data:t,currentDeleteData:"",dialogOpen:!a.state.dialogOpen},(function(){return a.snackOpen("success","delete")}))}else a.snackOpen("error","server")}))},a.state={columns:[{title:"Factory",field:"Factory",render:function(e){return r.a.createElement("span",null,e.Factory.FctyName)}},{title:"Date",field:"Date",render:function(e){return r.a.createElement("span",null,new Date(e.Date).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric"}))}},{title:"Shift ",field:"Shift ",render:function(e){return r.a.createElement("span",null,e.Shift.Name)}},{title:"WB Number/HS No",field:"HSMaster_Detail",emptyValue:"",render:function(e){return r.a.createElement("span",null,void 0===e.HSMaster_Detail?"":e.HSMaster_Detail.NumberResult)}},{title:"WP Number",field:"RMWetProcess",emptyValue:"",render:function(e){return r.a.createElement("span",null,void 0===e.RMWetProcess?"":e.RMWetProcess.WBNo)}},{title:"Balance",field:"Balance"},{title:"BlanketQty",field:"BlanketQty"},{title:"Remarks",field:"Remarks"},{title:"Operator",field:"LastUpdatedBy",editable:"never"},{title:"Last Updated",field:"LastUpdatedAt",render:function(e){return r.a.createElement("span",null,void 0===e?"":new Date(e.LastUpdatedAt).toLocaleDateString())},editable:"never"}],data:[],formData:null,currentDeleteData:null,formOpen:!1,formAction:"",dialogOpen:!1,snackOpen:!1,alertMessage:"",dialogMessage:"",alertClass:""},a.dryProcessModel=lv(av),a.onSuccess=a.onSuccess.bind(Object(Pe.a)(a)),a.closeForm=a.closeForm.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initcDryProcess()}},{key:"initcDryProcess",value:function(){var e=this;ev.getDryProcess("").then((function(t){!0===t.code&&e.setState({data:t.data})}))}},{key:"openForm",value:function(e){var t,a=e;void 0===a||null===a?(a=this.dryProcessModel,t="Add"):t="update",this.setState({formData:a,formOpen:!this.state.formOpen,formAction:t})}},{key:"closeForm",value:function(){this.setState({formData:null,formOpen:!1,formAction:""})}},{key:"onSuccess",value:function(e){var t=this,a=Object(je.a)(this.state.data);if(void 0!==e&&null!==e)if("Add"===this.state.formAction)a.push(e),this.setState({data:a,formOpen:!this.state.formOpen,formAction:"",currentRowData:null},(function(){return t.snackOpen("success","add")}));else{var n=a.indexOf(this.state.formData);a[n]=e,this.setState({data:a,formOpen:!this.state.formOpen,formAction:"",currentRowData:null},(function(){return t.snackOpen("success","update")}))}else this.snackOpen("error","server")}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{container:!0,direction:"column",justify:"center",wrap:"wrap",style:{margin:"20px 20px 10px 0px"}},r.a.createElement(be.a,{item:!0,xs:12},r.a.createElement(Ve.a,{title:"Dry Process",columns:this.state.columns,data:this.state.data,components:{Toolbar:function(t){return r.a.createElement("div",null,r.a.createElement(Le.MTableToolbar,t),r.a.createElement("div",{style:{padding:"0px 15px"}},r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:function(){return e.openForm(t.rowData)},"aria-label":"add"},r.a.createElement(wt.a,null))))}},actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.data,columns:e.state.columns,fileName:"dryProcess"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.initcDryProcess()}},{icon:"edit",tooltip:"Edit User",onClick:function(t,a){return e.openForm(a)}},{icon:"delete",tooltip:"Delete User",onClick:function(t,a){return e.dialogOpen(a)}}],icons:{Clear:function(t){return r.a.createElement(Nt.a,{onClick:function(){e.initFormControl()},style:{padding:0,margin:0}})}},options:{}})),r.a.createElement(be.a,{item:!0,xs:12},this.state.formOpen?r.a.createElement(iv,{formAction:this.state.formAction,formData:this.state.formData,formOpen:this.state.formOpen,onSuccess:this.onSuccess,closeForm:this.closeForm}):""),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:600,open:this.state.snackOpen,onClose:this.snackOpen,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.diaLogClose,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.diaLogClose,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDelete,color:"primary"},"Delete"))))}}]),t}(r.a.Component)),uv=cv,dv={properties:{StorageLocation:{description:"",type:["string","object"],messages:{conform:"Storage Location cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},Period:{description:"",type:"string",required:!0,allowEmpty:!1,messages:{conform:"Period number cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},CurrentCapacity:{description:"",type:"number",messages:{conform:"Current capacity cannot be empty."},conform:function(e){return""!==e&&void 0!==e}},StatusFull:{description:"",type:"number",messages:{conform:"Status full cannot be empty."},conform:function(e){return""!==e&&void 0!==e}},StatusEmpty:{description:"",type:"number",messages:{conform:"Status empty cannot be empty."},conform:function(e){return""!==e&&void 0!==e}}}},mv=a(24),pv={validateFields:function(e){return mv.validate(e,dv,{cast:!0})},get:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="storageLocationDetail/"+e,a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?(console.log(e),{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}):200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},getFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("storageLocationDetail-filter/").concat(e),a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},getOne:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("storageLocationDetail/").concat(e),a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},update:function(e,t){return Qe("storageLocationDetail/"+e,t).then((function(e){return console.log(e),200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Updated",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="storageLocationDetail/"+e,n.abrupt("return",He(a,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Added",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,formValid:!0,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("storageLocationDetail/"+e).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))}},fv=pv,hv=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).snackOpen=function(e,t){var n;return l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0===e||null===e||void 0===t||null===t){r.next=7;break}return r.next=3,l.a.awrap(ka(e,t));case 3:n=r.sent,a.setState({snackOpen:!a.state.snackOpen,snackMessage:n,snackClass:e}),r.next=8;break;case 7:a.setState({snackOpen:!1});case 8:case"end":return r.stop()}}))},a.state={filterFormControls:{Factory:{valid:!0,message:"",value:""},Option:{valid:!0,message:"",value:2}},columns:[{title:"Storage Seq#",field:"NumberResult",editable:"never"},{title:"Balance",field:"CurrentCapacity",render:function(e){return r.a.createElement(Xa.a,{value:e.CurrentCapacity,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})},editable:"never"},{title:"Closed Full",field:"StatusFull",render:function(e){return r.a.createElement("span",null,2===e.StatusFull?"Yes":"No")},editComponent:function(e){return r.a.createElement(ve.a,{checked:2===e.value,onChange:function(t){t.target.checked?e.onChange(2):e.onChange(1)},disabled:2===e.rowData.StatusEmpty,color:"primary"})}},{title:"Closed Empty",field:"StatusEmpty",render:function(e){return r.a.createElement("span",null,2===e.StatusEmpty?"Yes":"No")},editComponent:function(e){return r.a.createElement(ve.a,{checked:2===e.value,onChange:function(t){t.target.checked?e.onChange(2):e.onChange(1)},color:"primary",disabled:2!==e.rowData.StatusFull})}},{title:"Remarks",field:"ClosedRemarks",editComponent:function(e){return r.a.createElement(ge.a,{margin:"dense",id:"ClosedRemarks",label:"Remarks",type:"text",defaultValue:e.value,onChange:function(t){return e.onChange(t.target.value)}})}}],data:[]},a.snackOpen=a.snackOpen.bind(Object(Pe.a)(a)),a.handleFilterChange=a.handleFilterChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"handleFilterChange",value:function(e,t){var a,n=this;return l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if((a=this.state.filterFormControls)[t].value=e,this.setState({filterFormControls:a}),""===this.state.filterFormControls.Factory.value){r.next=6;break}return r.next=6,l.a.awrap(Do("StorageLocationDetail/".concat(this.state.filterFormControls.Factory.value._id,"/").concat(this.state.filterFormControls.Option.value)).then((function(e){!0===e.code&&n.setState({data:e.data})})));case 6:case"end":return r.stop()}}),null,this)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"form-container"},r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-evenly",alignItems:"center",md:6,xs:12,sm:12,xl:8,lg:8},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Hr,{handleChange:this.handleFilterChange,selectedValue:this.state.filterFormControls.Factory.value,formControl:this.state.filterFormControls.Factory,propertyName:"Factory"})),r.a.createElement(ya.a,{style:{width:"100%",margin:4},margin:"dense"},r.a.createElement(Ea.a,{shrink:!0},"StorageLocation Status"),r.a.createElement(ba.a,{required:!0,id:"machClass",value:this.state.filterFormControls.Option.value,onChange:function(t){return e.handleFilterChange(t.target.value,"Option")},displayEmpty:!0},r.a.createElement(et.a,{value:0}," All "),r.a.createElement(et.a,{value:1}," Close "),r.a.createElement(et.a,{value:2}," Open ")))),r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-evenly",alignItems:"center",md:10,xs:12,sm:12,xl:10,lg:10},r.a.createElement("div",{style:{overflowX:"scroll",width:"100%"}},r.a.createElement(Ve.a,{title:"Storage Location",columns:this.state.columns,data:this.state.data,editable:{onRowUpdate:function(t,a){return new Promise((function(n,r){setTimeout((function(){var o=Object(je.a)(e.state.data);fv.update("",t).then((function(t){if(!0===t.code){var s=o.indexOf(a);o[s]=t.data,e.snackOpen("success","update"),e.setState({data:o},(function(){return n()}))}else r(),e.snackOpen("error","server")})).catch((function(t){r(),e.snackOpen("error","server")}))}),500)}))}},options:{search:!1}}),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.snackClass,autoHideDuration:600,open:this.state.snackOpen,onClose:this.snackOpen,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.snackMessage)}))))}}]),t}(r.a.Component),gv=hv,yv=gv,vv={properties:{HSMaster:{description:"",type:["string","object"],messages:{conform:"Storage Location cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},Period:{description:"",type:"string",required:!0,allowEmpty:!1,messages:{conform:"Period number cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},CurrentCapacity:{description:"",type:"number",messages:{conform:"Current capacity cannot be empty."},conform:function(e){return""!==e&&void 0!==e}},StatusFull:{description:"",type:"number",messages:{conform:"Status full cannot be empty."},conform:function(e){return""!==e&&void 0!==e}},StatusEmpty:{description:"",type:"number",messages:{conform:"Status empty cannot be empty."},conform:function(e){return""!==e&&void 0!==e}}}},Cv=a(24),Dv={validateFields:function(e){return Cv.validate(e,vv,{cast:!0})},get:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="hsMasterDetail/"+e,a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?(console.log(e),{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}):200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},getFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("hsMasterDetail-filter/").concat(e),a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},getOne:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("hsMasterDetail/").concat(e),a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},update:function(e,t){return Qe("hsMasterDetail/"+e,t).then((function(e){return console.log(e),200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Updated",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="hsMasterDetail/"+e,n.abrupt("return",He(a,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Added",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,formValid:!0,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("hsMasterDetail/"+e).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))}},Ev=Dv,bv=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).snackOpen=function(e,t){var n;return l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0===e||null===e||void 0===t||null===t){r.next=7;break}return r.next=3,l.a.awrap(ka(e,t));case 3:n=r.sent,a.setState({snackOpen:!a.state.snackOpen,snackMessage:n,snackClass:e}),r.next=8;break;case 7:a.setState({snackOpen:!1});case 8:case"end":return r.stop()}}))},a.state={filterFormControls:{Factory:{valid:!0,message:"",value:""},Option:{valid:!0,message:"",value:2}},columns:[{title:"HS Seq#",field:"NumberResult",editable:"never"},{title:"Balance",field:"CurrentCapacity",render:function(e){return r.a.createElement(Xa.a,{value:e.CurrentCapacity,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})},editable:"never"},{title:"Closed Full",field:"StatusFull",render:function(e){return r.a.createElement("span",null,2===e.StatusFull?"Yes":"No")},editComponent:function(e){return r.a.createElement(ve.a,{checked:2===e.value,onChange:function(t){t.target.checked?e.onChange(2):e.onChange(1)},disabled:2===e.rowData.StatusEmpty,color:"primary"})}},{title:"Closed Empty",field:"StatusEmpty",render:function(e){return r.a.createElement("span",null,2===e.StatusEmpty?"Yes":"No")},editComponent:function(e){return r.a.createElement(ve.a,{checked:2===e.value,onChange:function(t){t.target.checked?e.onChange(2):e.onChange(1)},color:"primary",disabled:2!==e.rowData.StatusFull})}},{title:"Remarks",field:"ClosedRemarks",editComponent:function(e){return r.a.createElement(ge.a,{margin:"dense",id:"ClosedRemarks",label:"Remarks",type:"text",defaultValue:e.value,onChange:function(t){return e.onChange(t.target.value)}})}}],data:[]},a.snackOpen=a.snackOpen.bind(Object(Pe.a)(a)),a.handleFilterChange=a.handleFilterChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"handleFilterChange",value:function(e,t){var a,n=this;return l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if((a=this.state.filterFormControls)[t].value=e,this.setState({filterFormControls:a}),""===this.state.filterFormControls.Factory.value){r.next=6;break}return r.next=6,l.a.awrap(Do("HSMasterDetail/".concat(this.state.filterFormControls.Factory.value._id,"/").concat(this.state.filterFormControls.Option.value)).then((function(e){!0===e.code&&n.setState({data:e.data})})));case 6:case"end":return r.stop()}}),null,this)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"form-container"},r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-evenly",alignItems:"center",md:6,xs:12,sm:12,xl:8,lg:8},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Hr,{handleChange:this.handleFilterChange,selectedValue:this.state.filterFormControls.Factory.value,formControl:this.state.filterFormControls.Factory,propertyName:"Factory"})),r.a.createElement(ya.a,{style:{width:"100%",margin:4},margin:"dense"},r.a.createElement(Ea.a,{shrink:!0},"HSMaster Status"),r.a.createElement(ba.a,{required:!0,id:"machClass",value:this.state.filterFormControls.Option.value,onChange:function(t){return e.handleFilterChange(t.target.value,"Option")},displayEmpty:!0},r.a.createElement(et.a,{value:0}," All "),r.a.createElement(et.a,{value:1}," Close "),r.a.createElement(et.a,{value:2}," Open ")))),r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-evenly",alignItems:"center",md:10,xs:12,sm:12,xl:10,lg:10},r.a.createElement("div",{style:{overflowX:"scroll",width:"100%"}},r.a.createElement(Ve.a,{title:"HS",columns:this.state.columns,data:this.state.data,editable:{onRowUpdate:function(t,a){return new Promise((function(n,r){setTimeout((function(){var o=Object(je.a)(e.state.data);Ev.update("",t).then((function(t){if(!0===t.code){var s=o.indexOf(a);o[s]=t.data,e.snackOpen("success","update"),e.setState({data:o},(function(){return n()}))}else r(),e.snackOpen("error","server")})).catch((function(t){r(),e.snackOpen("error","server")}))}),500)}))}},options:{search:!1}}),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.snackClass,autoHideDuration:600,open:this.state.snackOpen,onClose:this.snackOpen,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.snackMessage)}))))}}]),t}(r.a.Component),Sv=bv,Ov=Sv,kv=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).snackOpen=function(e,t){var n;return l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0===e||null===e||void 0===t||null===t){r.next=7;break}return r.next=3,l.a.awrap(ka(e,t));case 3:n=r.sent,a.setState({snackOpen:!a.state.snackOpen,snackMessage:n,snackClass:e}),r.next=8;break;case 7:a.setState({snackOpen:!1});case 8:case"end":return r.stop()}}))},a.state={filterFormControls:{Factory:{valid:!0,message:"",value:""},Option:{valid:!0,message:"",value:2}},columns:[{title:"WB #",field:"WBNo",editable:"never"},{title:"Closed",field:"Closed",render:function(e){return r.a.createElement("span",null,e.Closed?"Yes":"No")},editComponent:function(e){return r.a.createElement(ve.a,{checked:e.value,onChange:function(t){e.onChange(t.target.checked)},color:"primary"})}},{title:"Remarks",field:"ClosedRemarks",editComponent:function(e){return r.a.createElement(ge.a,{margin:"dense",id:"ClosedRemarks",label:"Remarks",type:"text",defaultValue:e.value,onChange:function(t){return e.onChange(t.target.value)}})}}],data:[]},a.snackOpen=a.snackOpen.bind(Object(Pe.a)(a)),a.handleFilterChange=a.handleFilterChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"handleFilterChange",value:function(e,t){var a,n,r=this;return l.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:(a=this.state.filterFormControls)[t].value=e,this.setState({filterFormControls:a}),""!==this.state.filterFormControls.Factory.value&&(n="?Factory=".concat(this.state.filterFormControls.Factory.value._id),0!==this.state.filterFormControls.Option.value&&(n+="&Closed=".concat(1===this.state.filterFormControls.Option.value)),Ry.getWetProcessFilter(n).then((function(e){!0===e.code&&r.setState({data:e.data})})));case 4:case"end":return o.stop()}}),null,this)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"form-container"},r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-evenly",alignItems:"center",md:6,xs:12,sm:12,xl:8,lg:8},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Hr,{handleChange:this.handleFilterChange,selectedValue:this.state.filterFormControls.Factory.value,formControl:this.state.filterFormControls.Factory,propertyName:"Factory"})),r.a.createElement(ya.a,{style:{width:"100%",margin:4},margin:"dense"},r.a.createElement(Ea.a,{shrink:!0},"WBLocation Status"),r.a.createElement(ba.a,{required:!0,id:"machClass",value:this.state.filterFormControls.Option.value,onChange:function(t){return e.handleFilterChange(t.target.value,"Option")},displayEmpty:!0},r.a.createElement(et.a,{value:0}," All "),r.a.createElement(et.a,{value:1}," Close "),r.a.createElement(et.a,{value:2}," Open ")))),r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-evenly",alignItems:"center",md:10,xs:12,sm:12,xl:10,lg:10},r.a.createElement("div",{style:{overflowX:"scroll",width:"100%"}},r.a.createElement(Ve.a,{title:"WB Location",columns:this.state.columns,data:this.state.data,editable:{onRowUpdate:function(t,a){return new Promise((function(n,r){setTimeout((function(){var o=Object(je.a)(e.state.data);Ry.update("",t).then((function(t){if(!0===t.code){var s=o.indexOf(a);o[s]=t.data,e.snackOpen("success","update"),e.setState({data:o},(function(){return n()}))}else r(),e.snackOpen("error","server")})).catch((function(t){r(),e.snackOpen("error","server")}))}),500)}))}},options:{search:!1}}),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.snackClass,autoHideDuration:600,open:this.state.snackOpen,onClose:this.snackOpen,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.snackMessage)}))))}}]),t}(r.a.Component),wv=kv,Fv=wv,xv=(a(937),a(127)),Tv=a(306),Nv=a.n(Tv),jv=a(456),Pv=a.n(jv),Av=a(457),Mv=a.n(Av),_v=(a(950),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).handleChange=function(e,t){var n,r,o,s,i,c,u,d,m;return l.a.async((function(p){for(;;)switch(p.prev=p.next){case 0:if("Factory"!==t){p.next=55;break}if(void 0===e||null===e||""===e||"object"!==typeof e){p.next=52;break}return p.next=4,l.a.awrap(Do("FactoryLocation/".concat(e._id)));case 4:if(void 0===(n=p.sent)||null===n.data){p.next=50;break}if(r=a.state.selectedFactoryPosition,0!==n.data.Lat&&0!==n.data.Lng){p.next=13;break}return p.next=10,l.a.awrap(a.getFromZipCode(a.state.marker.ZipCode));case 10:r=p.sent,p.next=14;break;case 13:r={lat:n.data.Lat,lng:n.data.Lng};case 14:if(!(Array.isArray(n.data.Village)&&n.data.Village.length>0)){p.next=48;break}r.Village=[],o=!0,s=!1,i=void 0,p.prev=19,c=n.data.Village[Symbol.iterator]();case 21:if(o=(u=c.next()).done){p.next=34;break}if(0!==(d=u.value).Lat&&0!==d.Lng&&""!==d.Lat&&""!==d.Lng){p.next=30;break}return p.next=26,l.a.awrap(a.getFromZipCode(d.ZipCode));case 26:m=p.sent,r.Village.push(m),p.next=31;break;case 30:r.Village.push({lat:d.Lat,lng:d.Lng});case 31:o=!0,p.next=21;break;case 34:p.next=40;break;case 36:p.prev=36,p.t0=p.catch(19),s=!0,i=p.t0;case 40:p.prev=40,p.prev=41,o||null==c.return||c.return();case 43:if(p.prev=43,!s){p.next=46;break}throw i;case 46:return p.finish(43);case 47:return p.finish(40);case 48:r.SubDistrict=n.data.SubDistrict,a.setState({selectedFactory:e,marker:r,selectedFactoryPosition:r,zoomIdx:10});case 50:p.next=53;break;case 52:a.setState({selectedFactory:e});case 53:p.next=56;break;case 55:a.setState({Date:e});case 56:case"end":return p.stop()}}),null,null,[[19,36,40,48],[41,,43,47]])},a.state={selectedFactory:"",Date:Date.now(),selectedFactoryPosition:null,zoomIndx:7,marker:null,formControl:{valid:!0,message:""}},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){}},{key:"getFromZipCode",value:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(0===e||void 0===e||null===e){a.next=5;break}return a.next=3,l.a.awrap((n="https://maps.googleapis.com/maps/api/geocode/json?address=".concat(e,"&sensor=false&key=AIzaSyA51NyhrMMScawCx7WnC1Kbn3LWTYQYYcA"),qe.a.get(n)).then((function(e){if("OK"===e.data.status){var t=e.data.results[0].geometry.location;return{lat:t.lat,lng:t.lng}}return null})));case 3:return t=a.sent,a.abrupt("return",t);case 5:case"end":return a.stop()}var n}))}},{key:"displayMarkers",value:function(){var e=[];return void 0!==this.state.marker&&null!==this.state.marker&&(e.push(r.a.createElement(xv.Marker,{key:1,id:1,position:{lat:this.state.marker.lat,lng:this.state.marker.lng},icon:{url:Nv.a},onClick:function(){return console.log("You clicked me!")}})),Array.isArray(this.state.marker.SubDistrict)&&this.state.marker.SubDistrict.length>0&&this.state.marker.SubDistrict.map((function(t,a){e.push(r.a.createElement(xv.Marker,{key:a,id:a,position:{lat:t.Lat,lng:t.Lng},icon:{url:Pv.a},onClick:function(){return console.log("You clicked me!")}}))})),Array.isArray(this.state.marker.Village)&&this.state.marker.Village.length>0&&this.state.marker.Village.map((function(t,a){e.push(r.a.createElement(xv.Marker,{key:a,id:a,position:{lat:t.lat,lng:t.lng},icon:{url:Mv.a},onClick:function(){return console.log("You clicked me!")}}))}))),e}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{container:!0,direction:"column",justify:"center",wrap:"wrap",style:{margin:"20px 20px 10px 0px"}},r.a.createElement(be.a,{item:!0,md:6,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Hr,{selectedValue:this.state.selectedFactory,propertyName:"Factory",handleChange:this.handleChange,formControl:this.state.formControl}))),r.a.createElement(be.a,{item:!0,md:6,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Da.b,{style:{width:"100%"},margin:"dense",id:"date-picker-dialog",label:"Date",format:"dd-MMM-yyyy",value:void 0===this.state.Date?Date.now():this.state.Date,onChange:function(t){return e.handelChange(new Date(t),"Date",!1)},KeyboardButtonProps:{"aria-label":"Date"}})))),r.a.createElement(be.a,{item:!0,xs:12}),r.a.createElement(be.a,{item:!0,xs:12},r.a.createElement(xv.Map,{google:this.props.google,zoom:this.state.zoomIndx,style:{width:"98%",height:"75%"},initialCenter:null===this.state.selectedFactoryPosition?{lat:0,lng:0}:this.state.selectedFactoryPosition,center:this.state.selectedFactoryPosition},this.displayMarkers())))}}]),t}(r.a.Component)),Iv=Object(xv.GoogleApiWrapper)({apiKey:"AIzaSyA51NyhrMMScawCx7WnC1Kbn3LWTYQYYcA"})(_v),Rv=(a(951),{Factory:"none",ProductionDate:new Date(Date.now()).toLocaleDateString(),ProductGrade:"",SeqPallet:" ",ExportPallet:" ",PackingType:"",PalletWeight:0,TestDate:Date.now(),ShippingInstruction:"",Lot:"",PrintLabelStatus:!0,PrintQRCodeStatus:!1,PalletStatus:"In Progress",AllocationStatus:"OPEN",DefaultTestResult:0,Inactive:!1}),Lv=Rv,Vv={properties:{Factory:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Factory cannot be empty.",conform:"Factory cannot be empty.",required:"Factory cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},ProductionDate:{description:"",type:"any",required:!0,allowEmpty:!1,messages:{allowEmpty:"Production Date cannot be empty.",conform:"Production Date cannot be empty.",required:"Production Date cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},Grade:{description:"",type:"any",required:!0,allowEmpty:!1,messages:{allowEmpty:"Grade cannot be empty.",conform:"Grade cannot be empty.",required:"Grade cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},SeqPallet:{description:"",type:"any",required:!0,allowEmpty:!1,messages:{allowEmpty:"Production/Seq. Pallet cannot be empty.",conform:"Production/Seq. Pallet cannot be empty.",required:"Production/Seq. Pallet cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},ExportPallet:{description:"",type:"string"},PackingType:{description:"",type:["object","array"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Packing Type cannot be empty.",conform:"Packing Type cannot be empty.",required:"Packing Type cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},PalletWeight:{description:"",type:"any",required:!0,allowEmpty:!1,messages:{allowEmpty:"Pallet Weight cannot be empty.",conform:"Pallet Weight cannot be empty.",required:"Pallet Weight cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},PrintLabelStatus:{description:"",type:"boolean"},PrintQRCodeStatus:{description:"",type:"boolean"},PalletStatus:{description:"",type:"string"},AllocationStatus:{description:"",type:"string"},DefaultTestResult:{description:"",type:"string",required:!0,allowEmpty:!1,messages:{allowEmpty:"Default Test Result cannot be empty.",conform:"Default Test Result cannot be empty.",required:"Default Test Result cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},Inactive:{description:"",type:"boolean"},CreatedAt:{type:"any",default:Date.now()},CreatedBy:{type:"string",default:""},LastUpdatedAt:{type:"any",default:Date.now()},LastUpdatedBy:{type:"string",default:""}}},Bv=a(24),Uv={validateFields:function(e){return Bv.validate(e,Vv,{cast:!0})},getCreatePallet:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="Pallet/"+e,a.abrupt("return",We(t).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},getCreatePalletFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("Pallet-filter/").concat(e),a.abrupt("return",We(t).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},getCreatePalletCondition:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("Pallet-condition/").concat(e),a.abrupt("return",We(t).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},getOneCreatePallet:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("Pallet/").concat(e),a.abrupt("return",We(t).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},update:function(e,t){return Qe("Pallet/"+e,t).then((function(e){return console.log(e),200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Updated",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="Pallet/"+e,n.abrupt("return",He(a,t).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Added",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,formValid:!0,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("Pallet/"+e).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))}},qv=Uv,Gv=a(23),Wv=(Object(n.forwardRef)((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),r.a.forwardRef((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).snackOpen=function(e,t){var n;return l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0===e||null===e||void 0===t||null===t){r.next=7;break}return r.next=3,l.a.awrap(ka(e,t));case 3:n=r.sent,a.setState({snackOpen:!a.state.snackOpen,alertMessage:n,alertClass:e}),r.next=8;break;case 7:a.setState({snackOpen:!1});case 8:case"end":return r.stop()}}))},a.handleChange=function(e,t,n){var r=Object(me.a)({},a.state.formData);r[t]=e,a.setState({formData:r,formDirty:!0,formErrors:[]})},a.onSave=function(){var e=Object(me.a)({},a.state.formData);void 0!==e&&null!==e?qv.add("",e).then((function(e){!0===e.code?a.setState({formData:e.data,formErrors:[]},(function(){return a.snackOpen("success","add")}),a.printBarCode(e.data._id)):a.setState({formErrors:e.errors})})):a.snackOpen("error","server")},a.printBarCode=function(e){void 0!==e&&null!==e&&Do("getBarCode/Pallet/".concat(e)).then((function(e){!0===e.code&&Co(new Uint8Array(e.data.data),"barcode_pallet_".concat(Date.now().toLocaleString(),".pdf"))}))},a.state={formData:Gv(Lv),formErrors:[],formDirty:!1,factoryData:[],productGradeData:[],packingTypeData:[],dialogOpen:!1,snackOpen:!1,alertMessage:"",dialogMessage:"",alertClass:""},a.CreatePalletModel=Gv(Lv),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initFactory(),this.initProductionGrade(),this.initPackingType()}},{key:"initFactory",value:function(){var e=this;Qa.get("").then((function(t){!0===t.code&&e.setState({factoryData:t.data})}))}},{key:"initProductionGrade",value:function(){var e=this;Gn.getProductGrade("").then((function(t){!0===t.code&&e.setState({productGradeData:t.data})}))}},{key:"initPackingType",value:function(){var e=this;pt.getPackingType("").then((function(t){!0===t.code&&e.setState({packingTypeData:t.data})}))}},{key:"renderErrors",value:function(){if(this.state.formErrors.length>0)return this.state.formErrors.map((function(e){return r.a.createElement(x.a,{color:"secondary",variant:"subtitle2",gutterBottom:!0},e.message)}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"form-container"},r.a.createElement(be.a,{container:!0,direction:"column",justify:"flex-start",alignItems:"stretch",wrap:"wrap",style:{margin:"4px 10px 30px 0px",height:"100%"},md:8,xs:12},r.a.createElement(x.a,{variant:"overline",display:"block",gutterBottom:!0},"Create Pallet"),r.a.createElement(be.a,{item:!0,style:{marginTop:2}},r.a.createElement(Hr,{selectedValue:this.state.formData.Factory,propertyName:"Factory",required:!1,handleChange:this.handleChange,formControl:So(this.state.formData.Factory,"empty",this.state.formDirty)?{valid:!0,message:""}:{valid:!1,message:"Factory cannot be Empty"}})),r.a.createElement(be.a,{item:!0,style:{marginTop:2}},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Da.b,{style:{width:"100%"},margin:"dense",id:"date-picker-dialog",label:"Production Date *",format:"dd-MMM-yyyy",maxDate:new Date,value:void 0===this.state.formData.ProductionDate?Date.now():this.state.formData.ProductionDate,onChange:function(t){return e.handleChange(new Date(t),"ProductionDate",!0)},KeyboardButtonProps:{"aria-label":"Production Date"}})))),r.a.createElement(be.a,{item:!0},r.a.createElement(Fl,{selectedValue:this.state.formData.ProductGrade,countryId:void 0===this.state.formData.Factory.FctyCountry?"":this.state.formData.Factory.FctyCountry._id,propertyName:"ProductGrade",formControl:So(this.state.formData.Factory,"empty")?{valid:!0,message:""}:{valid:!1,message:"Product Grade cannot be Empty"},handleChange:this.handleChange})),r.a.createElement(be.a,{item:!0},r.a.createElement(ya.a,{style:{width:"100%",margin:4},margin:"dense"},r.a.createElement(ge.a,{id:"SeqPallet",label:"Production/Seq. Pallet # *",defaultValue:this.state.formData.SeqPallet,error:!So(this.state.formData.SeqPallet,"empty",this.state.formDirty),helperText:So(this.state.formData.SeqPallet,"empty",this.state.formDirty)?"":"Production/Seq. Pallet cannot be empty.",onChange:function(t){return e.handleChange(t.target.value.trim(),"SeqPallet",!0)}}))),r.a.createElement(be.a,{item:!0},r.a.createElement(ya.a,{style:{width:"100%",margin:4},margin:"dense"},r.a.createElement(ge.a,{id:"ExportPallet",label:"Export Pallet #",defaultValue:this.state.formData.ExportPallet,onChange:function(t){return e.handleChange(t.target.value,"ExportPallet",!0)}}))),r.a.createElement(be.a,{item:!0},r.a.createElement(mu,{selectedValue:this.state.formData.PackingType,formControl:{valid:So(this.state.formData.PackingType,"empty",this.state.formDirty)},propertyName:"PackingType",handleChange:function(t){return e.handleChange(t,"PackingType",!0)}})),r.a.createElement(be.a,{item:!0},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{id:"PalletWeight",label:"Pallet Weight(kg) *",customInput:ge.a,value:this.state.formData.PalletWeight,onValueChange:function(t){return e.handleChange(t.floatValue,"PalletWeight",!0)},onFocus:function(e){e.target.select()},decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0,error:!So(this.state.formData.PalletWeight,"empty",this.state.formDirty),helperText:So(this.state.formData.PalletWeight,"empty",this.state.formDirty)?"":"Pallet Weight(kg) cannot be empty."}))),r.a.createElement(be.a,{item:!0},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(x.a,{variant:"caption",display:"block",gutterBottom:!0},r.a.createElement("span",null,"Print Label Status :"," ",this.state.formData.PrintLabelStatus?"Yes":"No"),r.a.createElement("span",{style:{marginLeft:25}},"Print QR Code Status :"," ",this.state.formData.PrintQRCodeStatus?"Yes":"No")))),r.a.createElement(be.a,{item:!0},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(x.a,{variant:"caption",display:"block",gutterBottom:!0},"Pallet Status :"," ",r.a.createElement("span",{style:{color:"red"}},this.state.formData.PalletStatus)))),r.a.createElement(be.a,{item:!0},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(x.a,{variant:"caption",display:"block",gutterBottom:!0},"Allocation Status :"," ",r.a.createElement("span",{style:{color:"red"}},this.state.formData.AllocationStatus)))),r.a.createElement(be.a,{item:!0},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{id:"DefaultTestResult",label:"Default Test Result *",customInput:ge.a,value:this.state.formData.DefaultTestResult,onValueChange:function(t){return e.handleChange(t.floatValue,"DefaultTestResult",!0)},onFocus:function(e){e.target.select()},error:!So(this.state.formData.DefaultTestResult,"empty",this.state.formDirty),helperText:So(this.state.formData.DefaultTestResult,"empty",this.state.formDirty)?"":"Default Test Result cannot be empty."}))),r.a.createElement(be.a,{item:!0,style:{margin:5}},this.state.formErrors.length>0?this.renderErrors():"",r.a.createElement(he.a,{onClick:this.onSave,variant:"outlined",color:"primary",style:{marginRight:5}},"Save"),r.a.createElement(he.a,{variant:"outlined",style:{marginRight:5},color:"secondary",href:"PalletReview"},"Cancel")),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:600,open:this.state.snackOpen,onClose:this.snackOpen,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)})))}}]),t}(r.a.Component)),Hv=Wv,Qv=(a(952),a(953),a(458)),zv=a.n(Qv),Yv={getTestResult:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="TestResult/"+e,a.abrupt("return",We(t).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},getFilterTestResult:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("TestResult-filter/").concat(e),a.abrupt("return",We(t).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},getOneTestResult:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("TestResult/").concat(e),a.abrupt("return",We(t).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},update:function(e,t){return Qe("TestResult/"+e,t).then((function(e){return console.log(e),200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Updated",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="TestResult/"+e,n.abrupt("return",He(a,t).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Added",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,formValid:!0,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("TestResult/"+e).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))}},Kv=Yv,Jv={Pallet:"",Sample:"",Dirt:0,Ash:0,VM:0,Nitrogen:0,PO:0,P30:0,PRI:0,Mooney:0,Gel:0,SVI:0,Asht:0,Offspec:!1},Zv=a(23),Xv=(Object(n.forwardRef)((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),r.a.forwardRef((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),{ProductionDate:{valid:!0,message:""},ProductGrade:{valid:!0,message:""},SeqPallet:{valid:!0,message:""},PackingType:{valid:!0,message:""},PalletWeight:{valid:!0,message:""}}),$v=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).snackOpen=function(e,t){var n;return l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0===e||null===e||void 0===t||null===t){r.next=7;break}return r.next=3,l.a.awrap(ka(e,t));case 3:n=r.sent,a.setState({snackOpen:!a.state.snackOpen,alertMessage:n,alertClass:e}),r.next=8;break;case 7:a.setState({snackOpen:!1});case 8:case"end":return r.stop()}}))},a.closeForm=function(){a.setState({formControl:Zv(Xv)},(function(){return a.props.closeForm()}))},a.handleChange=function(e,t,n){var r=Object(me.a)({},a.state.formData);r[t]=e,"DefaultTestResult"===t&&a.initTestResultSample(e),a.setState({formData:r,formDirty:!0,formErrors:[]})},a.onSave=function(){var e={},t=Object(me.a)({},a.state.formData),n=Object(je.a)(a.state.testResultSampleData);e.PalletData=t,e.TestResult=n,"Add"===a.state.formAction?qv.add("PalletReview",e).then((function(e){!0===e.code?(a.setState({formData:e.data,formErrors:[]},(function(){return a.snackOpen("success","add")})),a.props.onSuccess(e.data)):a.setState({formErrors:e.errors})})):qv.update("PalletReview",e).then((function(e){!0===e.code?(a.setState({formData:e.data,formErrors:[]},(function(){return a.snackOpen("success","add")})),a.props.onSuccess(e.data)):a.setState({formErrors:e.errors})}))},a.state={formData:a.props.formData,formAction:a.props.formAction,formOpen:a.props.formOpen,formControl:Zv(Xv),testResultSampleCol:[{title:"Dirt",field:"Dirt",render:function(e){return r.a.createElement("span",null,void 0===e.Dirt?"0.00":e.Dirt)},editComponent:function(e){return r.a.createElement(Xa.a,{customInput:ge.a,label:"Dirt",defaultValue:void 0===e.value?0:e.value,decimalSeparator:".",decimalScale:2,fixedDecimalScale:!0,onValueChange:function(t){t.formattedValue;var a=t.value;e.onChange(a)}})}},{title:"Ash",field:"Ash",render:function(e){return r.a.createElement("span",null,void 0===e.Ash?"0.00":e.Ash)},editComponent:function(e){return r.a.createElement(Xa.a,{customInput:ge.a,label:"Dirt",defaultValue:void 0===e.value?0:e.value,decimalSeparator:".",decimalScale:2,fixedDecimalScale:!0,onValueChange:function(t){t.formattedValue;var a=t.value;e.onChange(a)}})}},{title:"VM",field:"VM",render:function(e){return r.a.createElement("span",null,void 0===e.VM?"0.00":e.VM)},editComponent:function(e){return r.a.createElement(Xa.a,{customInput:ge.a,label:"VM",defaultValue:void 0===e.value?0:e.value,decimalSeparator:".",decimalScale:2,fixedDecimalScale:!0,onValueChange:function(t){t.formattedValue;var a=t.value;e.onChange(a)}})}},{title:"Nitrogen",field:"Nitrogen",render:function(e){return r.a.createElement("span",null,void 0===e.Nitrogen?"0.00":e.Nitrogen)},editComponent:function(e){return r.a.createElement(Xa.a,{customInput:ge.a,label:"Nitrogen",defaultValue:void 0===e.value?0:e.value,decimalSeparator:".",decimalScale:2,fixedDecimalScale:!0,onValueChange:function(t){t.formattedValue;var a=t.value;e.onChange(a)}})}},{title:"PO",field:"PO",render:function(e){return r.a.createElement("span",null,void 0===e.PO?"0.00":e.PO)},editComponent:function(e){return r.a.createElement(Xa.a,{customInput:ge.a,label:"PO",defaultValue:void 0===e.value?0:e.value,decimalSeparator:".",decimalScale:2,fixedDecimalScale:!0,onValueChange:function(t){t.formattedValue;var a=t.value;e.onChange(a)}})}},{title:"P30",field:"P30",render:function(e){return r.a.createElement("span",null,void 0===e.P30?"0.00":e.P30)},editComponent:function(e){return r.a.createElement(Xa.a,{customInput:ge.a,label:"P30",defaultValue:void 0===e.value?0:e.value,decimalSeparator:".",decimalScale:2,fixedDecimalScale:!0,onValueChange:function(t){t.formattedValue;var a=t.value;e.onChange(a)}})}},{title:"PRI",field:"PRI",render:function(e){return r.a.createElement("span",null,void 0===e.PRI?"0.00":e.PRI)},editComponent:function(e){return r.a.createElement(Xa.a,{customInput:ge.a,label:"PRI",defaultValue:void 0===e.value?0:e.value,decimalSeparator:".",decimalScale:2,fixedDecimalScale:!0,onValueChange:function(t){t.formattedValue;var a=t.value;e.onChange(a)}})}},{title:"Mooney",field:"Mooney",render:function(e){return r.a.createElement("span",null,void 0===e.Mooney?"0.00":e.Mooney)},editComponent:function(e){return r.a.createElement(Xa.a,{customInput:ge.a,label:"Mooney",defaultValue:void 0===e.value?0:e.value,decimalSeparator:".",decimalScale:2,fixedDecimalScale:!0,onValueChange:function(t){t.formattedValue;var a=t.value;e.onChange(a)}})}},{title:"Gel",field:"Gel",render:function(e){return r.a.createElement("span",null,void 0===e.Gel?"0.00":e.Gel)},editComponent:function(e){return r.a.createElement(Xa.a,{customInput:ge.a,label:"Gel",defaultValue:void 0===e.value?0:e.value,decimalSeparator:".",decimalScale:2,fixedDecimalScale:!0,onValueChange:function(t){t.formattedValue;var a=t.value;e.onChange(a)}})}},{title:"SVI",field:"SVI",render:function(e){return r.a.createElement("span",null,void 0===e.SVI?"0.00":e.SVI)},editComponent:function(e){return r.a.createElement(Xa.a,{customInput:ge.a,label:"SVI",defaultValue:void 0===e.value?0:e.value,decimalSeparator:".",decimalScale:2,fixedDecimalScale:!0,onValueChange:function(t){t.formattedValue;var a=t.value;e.onChange(a)}})}},{title:"Asht",field:"Asht",render:function(e){return r.a.createElement("span",null,void 0===e.Asht?"0.00":e.Asht)},editComponent:function(e){return r.a.createElement(Xa.a,{customInput:ge.a,label:"Asht",defaultValue:void 0===e.value?0:e.value,decimalSeparator:".",decimalScale:2,fixedDecimalScale:!0,onValueChange:function(t){t.formattedValue;var a=t.value;e.onChange(a)}})}},{title:"Offspec",field:"Offspec",render:function(e){return r.a.createElement("span",null,!0===e.Offspec?"Yes":"No")},editComponent:function(e){return r.a.createElement(Xe.a,{checked:e.value,onChange:function(t){return e.onChange(t.target.checked)},value:e.value,inputProps:{"aria-label":"secondary checkbox"},color:"primary"})}}],testResultSampleData:[],formErrors:[],formDirty:!1,factoryData:[],productGradeData:[],packingTypeData:[],dialogOpen:!1,snackOpen:!1,alertMessage:"",dialogMessage:"",alertClass:""},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){console.log(this.state.formData),this.initFactory(),this.initProductionGrade(),this.initPackingType(),this.initTestResult()}},{key:"initTestResult",value:function(){var e=this;"Update"===this.state.formAction&&"object"===typeof this.state.formData&&void 0!==this.state.formData._id&&Kv.getFilterTestResult("?Pallet=".concat(this.state.formData._id)).then((function(t){if(!0===t.code)e.setState({testResultSampleData:t.data});else{var a=Object(je.a)(e.state.formErrors);a.message="Error occurred while retrieving Test Result data.",e.setState({formErrors:a})}}))}},{key:"initFactory",value:function(){var e=this;Qa.get("").then((function(t){!0===t.code&&e.setState({factoryData:t.data})}))}},{key:"initProductionGrade",value:function(){var e=this;Gn.getProductGrade("").then((function(t){!0===t.code&&e.setState({productGradeData:t.data})}))}},{key:"initPackingType",value:function(){var e=this;pt.getPackingType("").then((function(t){!0===t.code&&e.setState({packingTypeData:t.data})}))}},{key:"renderErrors",value:function(){if(this.state.formErrors.length>0)return this.state.formErrors.map((function(e){return r.a.createElement(x.a,{color:"secondary",variant:"subtitle2",gutterBottom:!0},r.a.createElement(zv.a,{fontSize:"medium",style:{paddingRight:5,marginTop:6}}),r.a.createElement("span",null,e.message))}))}},{key:"initTestResultSample",value:function(e){var t=Object(je.a)(this.state.testResultSampleData),a=e-this.state.testResultSampleData.length;if(e>0)for(var n=0;n<a;n++)Jv.SampleNo=n+1,t.push(Zv(Jv));this.setState({testResultSampleData:t})}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{container:!0},r.a.createElement(Ae.a,{fullScreen:!0,open:this.state.formOpen,onClose:this.closeForm,TransitionComponent:this.Transition},r.a.createElement(w.a,{className:"appBar"},r.a.createElement(F.a,null,r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:this.closeForm,"aria-label":"close"},r.a.createElement(Vt.a,null)),r.a.createElement(x.a,{variant:"h6",className:"app-title"},"Pallet Review"),r.a.createElement(he.a,{color:"inherit",disabled:this.state.disabled,onClick:this.onSave},"save"))),r.a.createElement(_e.a,null,r.a.createElement("div",{className:"form-container"},r.a.createElement(be.a,{container:!0,direction:"column",justify:"flex-start",alignItems:"stretch",wrap:"wrap",style:{margin:"4px 10px 30px 0px",height:"100%"},md:8,xs:12},r.a.createElement(be.a,{item:!0,style:{marginTop:2}},r.a.createElement(Hr,{selectedValue:this.state.formData.Factory,propertyName:"Factory",required:!1,handleChange:this.handleChange,formControl:So(this.state.formData.Factory,"empty",this.state.formDirty)?{valid:!0,message:""}:{valid:!1,message:"Factory cannot be Empty"}})),r.a.createElement(be.a,{item:!0,style:{marginTop:2}},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Da.b,{style:{width:"100%"},margin:"dense",id:"date-picker-dialog",label:"Production Date *",format:"dd-MMM-yyyy",maxDate:new Date,value:void 0===this.state.formData.ProductionDate?Date.now():this.state.formData.ProductionDate,onChange:function(t){return e.handleChange(new Date(t),"ProductionDate",!0)},KeyboardButtonProps:{"aria-label":"Production Date"}})))),r.a.createElement(be.a,{item:!0},r.a.createElement(Fl,{selectedValue:this.state.formData.ProductGrade,countryId:void 0===this.state.formData.Factory.FctyCountry?"":"object"===typeof this.state.formData.Factory.FctyCountry?this.state.formData.Factory.FctyCountry._id:this.state.formData.Factory.FctyCountry,propertyName:"ProductGrade",formControl:So(this.state.formData.ProductGrade,"empty")?{valid:!0,message:""}:{valid:!1,message:"Product Grade cannot be Empty"},handleChange:this.handleChange})),r.a.createElement(be.a,{item:!0},r.a.createElement(ya.a,{style:{width:"100%",margin:4},margin:"dense"},r.a.createElement(ge.a,{id:"SeqPallet",label:"Production/Seq. Pallet # *",defaultValue:this.state.formData.SeqPallet,error:!So(this.state.formData.SeqPallet,"empty",this.state.formDirty),helperText:So(this.state.formData.SeqPallet,"empty",this.state.formDirty)?"":"Production/Seq. Pallet cannot be empty.",onChange:function(t){return e.handleChange(t.target.value,"SeqPallet",!0)}}))),r.a.createElement(be.a,{item:!0},r.a.createElement(ya.a,{style:{width:"100%",margin:4},margin:"dense"},r.a.createElement(ge.a,{id:"ExportPallet",label:"Export Pallet #",defaultValue:this.state.formData.ExportPallet,onChange:function(t){return e.handleChange(t.target.value,"ExportPallet",!0)}}))),r.a.createElement(be.a,{item:!0},r.a.createElement(mu,{selectedValue:this.state.formData.PackingType,formControl:{valid:So(this.state.formData.PackingType,"empty",this.state.formDirty)},propertyName:"PackingType",handleChange:function(t){return e.handleChange(t,"PackingType",!0)}})),r.a.createElement(be.a,{item:!0},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{id:"PalletWeight",label:"Pallet Weight(kg) *",customInput:ge.a,value:this.state.formData.PalletWeight,onValueChange:function(t){return e.handleChange(t.floatValue,"PalletWeight",!0)},onFocus:function(e){e.target.select()},decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0,error:!So(this.state.formData.PalletWeight,"empty",this.state.formDirty),helperText:So(this.state.formData.PalletWeight,"empty",this.state.formDirty)?"":"Pallet Weight(kg) cannot be empty."}))),r.a.createElement(be.a,{item:!0,style:{marginTop:2}},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Da.b,{style:{width:"100%"},margin:"dense",id:"date-picker-dialog",label:"Test Date",format:"dd-MMM-yyyy",maxDate:new Date,value:void 0===this.state.formData.TestDate?Date.now():this.state.formData.TestDate,onChange:function(t){return e.handleChange(new Date(t),"TestDate",!0)},KeyboardButtonProps:{"aria-label":"Test Date"}})))),r.a.createElement(be.a,{item:!0},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(x.a,{variant:"caption",display:"block",gutterBottom:!0},"SI :"," ",r.a.createElement("span",{style:{color:"red"}},void 0===this.state.formData.ShippingInstruction||null===this.state.formData.ShippingInstruction?"":this.state.formData.ShippingInstruction.SINo)))),r.a.createElement(be.a,{item:!0},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(x.a,{variant:"caption",display:"block",gutterBottom:!0},"Contract # :"," ",r.a.createElement("span",{style:{color:"red"}},void 0===this.state.formData.ShippingInstruction||null===this.state.formData.ShippingInstruction?"":this.state.formData.ShippingInstruction.Contract)))),r.a.createElement(be.a,{item:!0},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(x.a,{variant:"caption",display:"block",gutterBottom:!0},"Lot # :"," ",r.a.createElement("span",{style:{color:"red"}},void 0===this.state.formData.Lot||null===this.state.formData.Lot?"":this.state.formData.Lot.LotNumber)))),r.a.createElement(be.a,{item:!0},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(x.a,{variant:"caption",display:"block",gutterBottom:!0},r.a.createElement("span",null,"Print Label Status :"," ",this.state.formData.PrintLabelStatus?"Yes":"No"),r.a.createElement("span",{style:{marginLeft:25}},"Print QR Code Status :"," ",this.state.formData.PrintQRCodeStatus?"Yes":"No")))),r.a.createElement(be.a,{item:!0},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(x.a,{variant:"caption",display:"block",gutterBottom:!0},"Pallet Status :"," ",r.a.createElement("span",{style:{color:"red"}},this.state.formData.PalletStatus)))),r.a.createElement(be.a,{item:!0},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(x.a,{variant:"caption",display:"block",gutterBottom:!0},"Allocation Status :"," ",r.a.createElement("span",{style:{color:"red"}},this.state.formData.AllocationStatus)))),r.a.createElement(be.a,{item:!0},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{id:"DefaultTestResult",label:"Default Test Result *",customInput:ge.a,value:this.state.formData.DefaultTestResult,onValueChange:function(t){return e.handleChange(t.floatValue,"DefaultTestResult",!0)},onFocus:function(e){e.target.select()},error:!So(this.state.formData.DefaultTestResult,"empty",this.state.formDirty),helperText:So(this.state.formData.DefaultTestResult,"empty",this.state.formDirty)?"":"Default Test Result cannot be empty."}))),r.a.createElement(be.a,{item:!0},this.state.formErrors.length>0?this.renderErrors():""),r.a.createElement(be.a,{item:!0,md:12},r.a.createElement(Ve.a,{title:"Test Result",columns:this.state.testResultSampleCol,data:this.state.testResultSampleData,style:{marginTop:5,width:"100%"},editable:{onRowAdd:function(t){return new Promise((function(a,n){setTimeout((function(){try{var r=Object(je.a)(e.state.testResultSampleData);void 0===t.Offspec&&(t.Offspec=!1),r.push(t),e.setState({testResultSampleData:r},(function(){return a()}))}catch(o){n()}}),1e3)}))},onRowUpdate:function(t,a){return new Promise((function(n,r){setTimeout((function(){try{var o=Object(je.a)(e.state.testResultSampleData),s=o.indexOf(a);void 0===t.Offspec&&(t.Offspec=!1),o[s]=t,e.setState({testResultSampleData:o},(function(){return n()}))}catch(i){r()}}),1e3)}))}},actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.data,columns:e.state.columns,fileName:"Broker"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.initTestResultSample()}},{icon:"delete",tooltip:"Delete Contamination",onClick:function(t,a){return e.dialogOpen(a)}}],options:{}})),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:600,open:this.state.snackOpen,onClose:this.snackOpen,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}))))))}}]),t}(r.a.Component),eC=$v,tC=a(459),aC=a.n(tC),nC=a(23),rC=(Object(n.forwardRef)((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),r.a.forwardRef((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).printBarCode=function(e){void 0!==e&&null!==e&&Do("getBarCode/Pallet/".concat(e._id)).then((function(e){!0===e.code?Co(new Uint8Array(e.data.data),"barcode_pallet_".concat(Date.now().toLocaleString(),".pdf")):a.snackOpen("error","server")}))},a.onPrintQR=function(e){void 0!==e&&null!==e&&Do("getQRCode/SinglePallet/".concat(e._id)).then((function(e){!0===e.code?Co(new Uint8Array(e.data.data),"qrcode_pallet_".concat(Date.now().toLocaleString(),".pdf")):a.snackOpen("error","server")}))},a.snackOpen=function(e,t){var n;return l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0===e||null===e||void 0===t||null===t){r.next=7;break}return r.next=3,l.a.awrap(ka(e,t));case 3:n=r.sent,a.setState({snackOpen:!a.state.snackOpen,alertMessage:n,alertClass:e}),r.next=8;break;case 7:a.setState({snackOpen:!1});case 8:case"end":return r.stop()}}))},a.dialogOpen=function(e){var t;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,l.a.awrap(ka("confirmation","delete"));case 2:t=n.sent,a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:e,dialogMessage:r.a.createElement("span",null,void 0!==t?t.replace("[Name]",e.Factory.FctyName):"")});case 4:case"end":return n.stop()}}))},a.diaLogClose=function(){a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:null})},a.onDelete=function(){null!==a.state.currentDeleteData&&qv.delete("".concat(a.state.currentDeleteData._id)).then((function(e){if(!0===e.code){var t=Object(je.a)(a.state.data),n=t.indexOf(a.state.currentDeleteData);t.splice(n,1),a.setState({data:t,currentDeleteData:"",dialogOpen:!a.state.dialogOpen},(function(){return a.snackOpen("success","delete")}))}else a.snackOpen("error","server")}))},a.state={columns:[{title:"Print Barcode",render:function(e){return r.a.createElement(bt.a,{"aria-label":"Print Barcode",style:{margin:1},size:"small",onClick:function(t){return a.printBarCode(e)}},r.a.createElement("img",{src:aC.a}))}},{title:"Print QR Code",render:function(e){return r.a.createElement(bt.a,{"aria-label":"Print QR Code",style:{margin:1},size:"small",onClick:function(t){return a.onPrintQR(e)}},r.a.createElement("img",{src:wu.a}))}},{title:"Factory",field:"Factory",render:function(e){return r.a.createElement("span",null,e.Factory.FctyName)}},{title:"Grade",field:"ProductGrade",render:function(e){return r.a.createElement("span",null,e.ProductGrade.GradeName)}},{title:"Production Date",field:"ProductionDate",render:function(e){return r.a.createElement("span",null,new Date(e.ProductionDate).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric"}))}},{title:"Production/Seq. Pallet #",field:"SeqPallet"},{title:"Export Pallet",field:"ExportPallet"},{title:"SI #",field:"ShippingInstruction",render:function(e){return r.a.createElement("span",null,void 0===e.ShippingInstruction||null===e.ShippingInstruction?"":e.ShippingInstruction.SINo)}},{title:"Contract #",field:"Contract",render:function(e){return r.a.createElement("span",null,void 0===e.ShippingInstruction||null===e.ShippingInstruction?"":e.ShippingInstruction.Contract)}},{title:"Lot #",field:"Lot",render:function(e){return r.a.createElement("span",null,void 0===e.Lot||null===e.Lot?"":e.Lot.Contract)}},{title:"Buyer",field:"Buyer"},{title:"Packing Type",field:"PackingType",render:function(e){return r.a.createElement("span",null,e.PackingType.PckTypeName)}},{title:"Test Date",field:"TestDate",render:function(e){return r.a.createElement("span",null," ",new Date(e.TestDate).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric"}))}},{title:"Pallet Weight",field:"PalletWeight"},{title:"Remarks",field:"Remarks"},{title:"Pallet Status",field:"PalletStatus"},{title:"Lotting",field:"AllocationStatus"},{title:"Test Result Status",field:"TestResultStatus"},{title:"InActive",field:"InActive",render:function(e){return r.a.createElement("span",null,e.InActive?"Yes":"No")}},{title:"Operator",field:"LastUpdatedBy",editable:"never"},{title:"Last Updated",field:"LastUpdatedAt",render:function(e){return r.a.createElement("span",null,new Date(e.LastUpdatedAt).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}))}}],data:[],formData:null,currentDeleteData:null,formOpen:!1,formAction:"",dialogOpen:!1,snackOpen:!1,alertMessage:"",dialogMessage:"",alertClass:""},a.CreatePalletModel=nC(Lv),a.onSuccess=a.onSuccess.bind(Object(Pe.a)(a)),a.closeForm=a.closeForm.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initcDryProcess()}},{key:"initcDryProcess",value:function(){var e=this;qv.getCreatePallet("").then((function(t){!0===t.code&&e.setState({data:t.data})}))}},{key:"openForm",value:function(e){var t,a=e;void 0===a||null===a?(a=this.CreatePalletModel,t="Add"):t="Update",this.setState({formData:a,formOpen:!this.state.formOpen,formAction:t})}},{key:"closeForm",value:function(){this.setState({formData:null,formOpen:!1,formAction:""})}},{key:"onSuccess",value:function(e){var t=this,a=Object(je.a)(this.state.data);if(void 0!==e&&null!==e)if("Add"===this.state.formAction)a.push(e),this.setState({data:a,formOpen:!this.state.formOpen,formAction:"",currentRowData:null},(function(){return t.snackOpen("success","add")}));else{var n=a.indexOf(this.state.formData);a[n]=e,this.setState({data:a,formOpen:!this.state.formOpen,formAction:"",currentRowData:null},(function(){return t.snackOpen("success","update")}))}else this.snackOpen("error","server")}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{container:!0,direction:"column",justify:"center",wrap:"wrap",style:{margin:"20px 20px 10px 0px"}},r.a.createElement(be.a,{item:!0,xs:12},r.a.createElement(Ve.a,{title:"Pallet Review",columns:this.state.columns,data:this.state.data,components:{Toolbar:function(t){return r.a.createElement("div",null,r.a.createElement(Le.MTableToolbar,t),r.a.createElement("div",{style:{padding:"0px 15px"}},r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:function(){return e.openForm(t.rowData)},"aria-label":"add"},r.a.createElement(wt.a,null))))}},actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.data,columns:e.state.columns,fileName:"dryProcess"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.initcDryProcess()}},{icon:"edit",tooltip:"Edit User",onClick:function(t,a){return e.openForm(a)}},{icon:"delete",tooltip:"Delete User",onClick:function(t,a){return e.dialogOpen(a)}}],icons:{Clear:function(t){return r.a.createElement(Nt.a,{onClick:function(){e.initFormControl()},style:{padding:0,margin:0}})}},options:{}})),r.a.createElement(be.a,{item:!0,xs:12},this.state.formOpen?r.a.createElement(eC,{formAction:this.state.formAction,formData:this.state.formData,formOpen:this.state.formOpen,onSuccess:this.onSuccess,closeForm:this.closeForm}):""),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:600,open:this.state.snackOpen,onClose:this.snackOpen,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.diaLogClose,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.diaLogClose,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDelete,color:"primary"},"Delete"))))}}]),t}(r.a.Component)),oC=rC,sC=(a(954),{properties:{Factory:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Factory cannot be empty.",conform:"Factory cannot be empty.",required:"Factory cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},ProductionDate:{description:"",type:"any",required:!0,allowEmpty:!1,messages:{allowEmpty:"Production Date cannot be empty.",conform:"Production Date cannot be empty.",required:"Production Date cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},Grade:{description:"",type:"any",required:!0,allowEmpty:!1,messages:{allowEmpty:"Grade cannot be empty.",conform:"Grade cannot be empty.",required:"Grade cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},SeqPallet:{description:"",type:"any",required:!0,allowEmpty:!1,messages:{allowEmpty:"Production/Seq. Pallet cannot be empty.",conform:"Production/Seq. Pallet cannot be empty.",required:"Production/Seq. Pallet cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},ExportPallet:{description:"",type:"string"},PackingType:{description:"",type:["object","string"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Packing Type cannot be empty.",conform:"Packing Type cannot be empty.",required:"Packing Type cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},PalletWeight:{description:"",type:"any",required:!0,allowEmpty:!1,messages:{allowEmpty:"Pallet Weight cannot be empty.",conform:"Pallet Weight cannot be empty.",required:"Pallet Weight cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},DefaultTestResult:{description:"",type:"number",required:!0,allowEmpty:!1,messages:{allowEmpty:"Default Test Result cannot be empty.",conform:"Only number is allowed.",required:"Default Test Result cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},StartPallet:{description:"",type:"number",required:!0,allowEmpty:!1,messages:{allowEmpty:"Start Pallet cannot be empty.",conform:"Only number is allowed for StartPallet.",required:"Start Pallet cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},LastPallet:{description:"",type:"number",required:!0,allowEmpty:!1,messages:{allowEmpty:"Last Pallet cannot be empty.",conform:"Only number is allowed.",required:"Last Pallet cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},Inactive:{description:"",type:"boolean"},CreatedAt:{type:"any",default:Date.now()},CreatedBy:{type:"string",default:""},LastUpdatedAt:{type:"any",default:Date.now()},LastUpdatedBy:{type:"string",default:""}}}),iC=a(24),lC={validateFields:function(e){return iC.validate(e,sC,{cast:!0})}},cC=lC,uC=a(23),dC=(Object(n.forwardRef)((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),r.a.forwardRef((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).snackOpen=function(e,t){var n;return l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0===e||null===e||void 0===t||null===t){r.next=7;break}return r.next=3,l.a.awrap(ka(e,t));case 3:n=r.sent,a.setState({snackOpen:!a.state.snackOpen,alertMessage:n,alertClass:e}),r.next=8;break;case 7:a.setState({snackOpen:!1});case 8:case"end":return r.stop()}}))},a.handleChange=function(e,t,n){var r=Object(me.a)({},a.state.formData);r[t]=e,a.setState({formData:r,formDirty:!0,formErrors:[],formMessage:[]})},a.onGenerate=function(){var e=cC.validateFields(a.state.formData);if(e.valid&&a.state.formData.LastPallet>a.state.formData.StartPallet){var t=a.state.formData.SeqPallet.match(/0/g);if(null!==t){t=t.join("");var n=[];Array(a.state.formData.LastPallet).fill(a.state.formData.StartPallet).map((function(e,r){var o=t.slice(0,t.length-1);o+=e+r;var s=a.state.formData.SeqPallet.replace(t,o),i={};i.Factory=a.state.formData.Factory,i.DefaultTestResult=a.state.formData.DefaultTestResult,i.SeqPallet=s,i.ExportPallet=a.state.formData.ExportPallet,i.ProductionDate=new Date(a.state.formData.ProductionDate).toLocaleDateString(),i.ProductGrade=a.state.formData.ProductGrade,i.PackingType=a.state.formData.PackingType,i.PalletWeight=a.state.formData.PalletWeight,i.PalletStatus=a.state.formData.PalletStatus,i.PrintLabelStatus=a.state.formData.PrintLabelStatus,i.PrintQRCodeStatus=a.state.formData.PrintQRCodeStatus,n.push(i)})),a.setState({batchColumns:[{DisplayName:"Production",Key:"SeqPallet"},{DisplayName:"Export Pallet",Key:"ExportPallet"},{DisplayName:"Production Date",Key:"ProductionDate"},{DisplayName:"Grade",Key:"ProductGrade",ObjectKey:"GradeCode"},{DisplayName:"Packing Type",Key:"PackingType",ObjectKey:"PckTypeName"},{DisplayName:"Qty (kg)",Key:"PalletWeight"},{DisplayName:"Pallet Status",Key:"PalletStatus"},{DisplayName:"Pallet Label",Key:"PrintLabelStatus"},{DisplayName:"QR Code",Key:"PrintQRCodeStatus"}],batchData:n,formErrors:[]})}else{var r=Object(je.a)(a.state.formErrors);r.push({message:"Production/Seq. Pallet format is not correct."}),a.setState({batchColumns:[],batchData:[],formErrors:r})}}else{var o=Object(je.a)(a.state.formErrors);Array.isArray(e.errors)&&e.errors.length>0&&e.errors.forEach((function(e){return o.push({message:e.message})})),a.state.formData.LastPallet<a.state.formData.StartPallet&&o.push({message:"Last Pallet must be grater than Start Pallet."}),a.setState({formErrors:o,batchColumns:[],batchData:[]})}},a.onSave=function(){var e=Object(je.a)(a.state.batchData);Object(je.a)(a.state.formErrors);Array.isArray(e)&&e.length>0&&e.forEach((function(e,t){qv.add("",e).then((function(t){if(!0===t.code){var n=Object(je.a)(a.state.formMessage);n.push("Successfully Added ".concat(e.SeqPallet)),a.setState({formErrors:[],formMessage:n})}else a.setState({formErrors:t.errors})}))}))},a.state={formData:uC(Lv),formErrors:[],formMessage:[],formDirty:!1,factoryData:[],productGradeData:[],packingTypeData:[],batchColumns:[],batchData:[],snackOpen:!1,alertMessage:"",alertClass:""},a.CreatePalletModel=uC(Lv),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initFactory(),this.initProductionGrade(),this.initPackingType()}},{key:"initFactory",value:function(){var e=this;Qa.get("").then((function(t){!0===t.code&&e.setState({factoryData:t.data})}))}},{key:"initProductionGrade",value:function(){var e=this;Gn.getProductGrade("").then((function(t){!0===t.code&&e.setState({productGradeData:t.data})}))}},{key:"initPackingType",value:function(){var e=this;pt.getPackingType("").then((function(t){!0===t.code&&e.setState({packingTypeData:t.data})}))}},{key:"renderErrors",value:function(){if(this.state.formErrors.length>0)return this.state.formErrors.map((function(e){return r.a.createElement(x.a,{color:"secondary",variant:"subtitle2",gutterBottom:!0},e.message)}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"form-container"},r.a.createElement(be.a,{container:!0,direction:"column",justify:"flex-start",alignItems:"stretch",wrap:"wrap",style:{margin:"4px 10px 30px 0px",height:"100%"},md:8,xs:12},r.a.createElement(x.a,{variant:"overline",display:"block",gutterBottom:!0},"Create Batch Pallet"),r.a.createElement(be.a,{item:!0,style:{marginTop:2}},r.a.createElement(Hr,{selectedValue:this.state.formData.Factory,propertyName:"Factory",required:!1,handleChange:this.handleChange,formControl:So(this.state.formData.Factory,"empty",this.state.formDirty)?{valid:!0,message:""}:{valid:!1,message:"Factory cannot be Empty"}})),r.a.createElement(be.a,{item:!0,style:{marginTop:2}},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Da.b,{style:{width:"100%"},margin:"dense",id:"date-picker-dialog",label:"Production Date *",format:"dd-MMM-yyyy",maxDate:new Date,value:void 0===this.state.formData.ProductionDate?Date.now():this.state.formData.ProductionDate,onChange:function(t){return e.handleChange(new Date(t),"ProductionDate",!0)},KeyboardButtonProps:{"aria-label":"Production Date"}})))),r.a.createElement(be.a,{item:!0},r.a.createElement(Fl,{selectedValue:this.state.formData.ProductGrade,countryId:void 0===this.state.formData.Factory.FctyCountry?"":this.state.formData.Factory.FctyCountry._id,propertyName:"ProductGrade",formControl:So(this.state.formData.Factory,"empty")?{valid:!0,message:""}:{valid:!1,message:"Product Grade cannot be Empty"},handleChange:this.handleChange})),r.a.createElement(be.a,{item:!0},r.a.createElement(ya.a,{style:{width:"100%",margin:4},margin:"dense"},r.a.createElement(ge.a,{id:"SeqPallet",label:"Production/Seq. Pallet # *",defaultValue:this.state.formData.SeqPallet,error:!So(this.state.formData.SeqPallet,"empty",this.state.formDirty),helperText:So(this.state.formData.SeqPallet,"empty",this.state.formDirty)?"":"Production/Seq. Pallet cannot be empty.",onChange:function(t){return e.handleChange(t.target.value.trim(),"SeqPallet",!0)}}))),r.a.createElement(be.a,{item:!0},r.a.createElement(ya.a,{style:{width:"100%",margin:4},margin:"dense"},r.a.createElement(ge.a,{id:"ExportPallet",label:"Export Pallet #",defaultValue:this.state.formData.ExportPallet,onChange:function(t){return e.handleChange(t.target.value,"ExportPallet",!0)}}))),r.a.createElement(be.a,{item:!0},r.a.createElement(mu,{selectedValue:this.state.formData.PackingType,formControl:{valid:So(this.state.formData.PackingType,"empty",this.state.formDirty)},propertyName:"PackingType",handleChange:function(t){return e.handleChange(t,"PackingType",!0)}})),r.a.createElement(be.a,{item:!0},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{id:"PalletWeight",label:"Pallet Weight(kg) *",customInput:ge.a,value:this.state.formData.PalletWeight,onValueChange:function(t){return e.handleChange(t.floatValue,"PalletWeight",!0)},onFocus:function(e){e.target.select()},decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0,error:!So(this.state.formData.PalletWeight,"empty",this.state.formDirty),helperText:So(this.state.formData.PalletWeight,"empty",this.state.formDirty)?"":"Pallet Weight(kg) cannot be empty."}))),r.a.createElement(be.a,{item:!0},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{id:"DefaultTestResult",label:"Default Test Result *",customInput:ge.a,value:this.state.formData.DefaultTestResult,onValueChange:function(t){return e.handleChange(t.floatValue,"DefaultTestResult",!0)},onFocus:function(e){e.target.select()},error:!So(this.state.formData.DefaultTestResult,"empty",this.state.formDirty),helperText:So(this.state.formData.DefaultTestResult,"empty",this.state.formDirty)?"":"Default Test Result cannot be empty."}))),r.a.createElement(be.a,{item:!0}),r.a.createElement(be.a,{item:!0},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{id:"StartPallet",label:"Start Pallet *",customInput:ge.a,value:this.state.formData.StartPallet,onValueChange:function(t){return e.handleChange(t.floatValue,"StartPallet",!0)},onFocus:function(e){e.target.select()},error:!So(this.state.formData.StartPallet,"empty",this.state.formDirty),helperText:So(this.state.formData.StartPallet,"empty",this.state.formDirty)?"":"Start Pallet cannot be empty."}))),r.a.createElement(be.a,{item:!0},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{id:"LastPallet",label:"Last Pallet *",customInput:ge.a,value:this.state.formData.LastPallet,onValueChange:function(t){return e.handleChange(t.floatValue,"LastPallet",!0)},onFocus:function(e){e.target.select()},error:!So(this.state.formData.LastPallet,"empty",this.state.formDirty),helperText:So(this.state.formData.LastPallet,"empty",this.state.formDirty)?"":"Last Pallet cannot be empty."}))),r.a.createElement(be.a,{item:!0},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(x.a,{variant:"caption",display:"block",gutterBottom:!0},"Allocation Status :"," ",r.a.createElement("span",{style:{color:"red"}},this.state.formData.AllocationStatus)))),r.a.createElement(be.a,{item:!0,style:{margin:5}},r.a.createElement(he.a,{onClick:this.onGenerate,variant:"outlined",color:"primary",style:{marginRight:5}},"Generate")),r.a.createElement(be.a,{item:!0},r.a.createElement(Ls,{columns:this.state.batchColumns,row:this.state.batchData})),r.a.createElement(be.a,{item:!0,style:{margin:5}},this.state.formErrors.length>0?this.renderErrors():"",this.state.formMessage.length>0?this.renderErrors():"",r.a.createElement(he.a,{onClick:this.onSave,variant:"outlined",color:"primary",style:{marginRight:5}},"Save"),r.a.createElement(he.a,{variant:"outlined",style:{marginRight:5},color:"secondary",href:"PalletReview"},"Cancel")),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:6e3,open:this.state.snackOpen,onClose:this.snackOpen,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)})))}}]),t}(r.a.Component)),mC=dC,pC=(a(955),a(1132)),fC={properties:{Factory:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Factory cannot be empty.",conform:"Factory cannot be empty.",required:"Factory cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},SelectedPallets:{minItems:1,messages:{minItems:"Please select pallets."}}}},hC=a(24),gC={validateFields:function(e){return hC.validate(e,fC,{cast:!0})},update:function(e,t){return Qe("tsToWarehouse/"+e,t).then((function(e){return console.log(e),200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Updated",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e}))}},yC=gC,vC={Factory:"none",SelectedPallets:[]},CC=(a(956),a(99)),DC=a.n(CC),EC=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={barcodeValue:null,processFinish:!1},a.onScan=a.onScan.bind(Object(Pe.a)(a)),a.onBarCodeDetected=a.onBarCodeDetected.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.props.startScan&&(this.onScan(),DC.a.onProcessed((function(e){var t=DC.a.canvas.ctx.overlay,a=DC.a.canvas.dom.overlay;e&&(e.boxes&&(t.clearRect(0,0,parseInt(a.getAttribute("width")),parseInt(a.getAttribute("height"))),e.boxes.filter((function(t){return t!==e.box})).forEach((function(e){DC.a.ImageDebug.drawPath(e,{x:0,y:1},t,{color:"green",lineWidth:2})}))),e.box&&DC.a.ImageDebug.drawPath(e.box,{x:0,y:1},t,{color:"#00F",lineWidth:2}),e.codeResult&&e.codeResult.code&&DC.a.ImageDebug.drawPath(e.line,{x:"x",y:"y"},t,{color:"red",lineWidth:3}))})),DC.a.onDetected(this.onBarCodeDetected))}},{key:"componentWillUnmount",value:function(){DC.a.offDetected(this.onBarCodeDetected)}},{key:"componentDidUpdate",value:function(e,t,a){e.startScan!==this.props.startScan&&(this.props.startScan?this.onScan():DC.a.stop())}},{key:"onScan",value:function(){DC.a.init({inputStream:{name:"Live",type:"LiveStream",target:document.querySelector("#barcode-scanner"),constraints:{width:{min:1280},height:{min:720},aspectRatio:{min:1,max:100},facingMode:"environment"}},locator:{patchSize:"medium",halfSample:!0},numOfWorkers:2,decoder:{readers:["code_93_reader"]}},(function(e){e?console.log(e):DC.a.start()}))}},{key:"onBarCodeDetected",value:function(e){this.props.OnDetect(e)}},{key:"render",value:function(){return r.a.createElement(be.a,{item:!0,container:!0,xs:12},this.props.startScan?r.a.createElement("div",{id:"barcode-scanner",style:{minWidth:"120px",minHeight:"720px"}}):"")}}]),t}(r.a.Component),bC=EC,SC=bC,OC=a(23),kC=(Object(n.forwardRef)((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),r.a.forwardRef((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).snackOpen=function(e,t){var n;return l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0===e||null===e||void 0===t||null===t){r.next=7;break}return r.next=3,l.a.awrap(ka(e,t));case 3:n=r.sent,a.setState({snackOpen:!a.state.snackOpen,alertMessage:n,alertClass:e}),r.next=8;break;case 7:a.setState({snackOpen:!1});case 8:case"end":return r.stop()}}))},a.handleChange=function(e,t,n){var r,o;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=Object(me.a)({},a.state.formData),"Factory"!==t){n.next=5;break}return r[t]=e,n.next=5,l.a.awrap(a.fetchPallets(e._id));case 5:"SelectedPallets"===t&&(-1===(o=r.SelectedPallets.indexOf(e))?r.SelectedPallets.push(e):r.SelectedPallets.splice(o,1)),a.setState({formData:r,formDirty:!0,formErrors:[]});case 7:case"end":return n.stop()}}))},a.onDetect=function(e){var t=e.codeResult.code;qv.getOneCreatePallet("".concat(t)).then((function(e){!0===e.code&&(a.setState({scannedPallet:e.data.SeqPallet,startScan:!1}),yC.update("",[t]).then((function(e){!0===e.code?a.snackOpen("success","update"):a.snackOpen("error","server"),a.setState({startScan:!0})})))})).catch((function(e){a.snackOpen("error","server")}))},a.onSave=function(){var e=Object(me.a)({},a.state.formData),t=yC.validateFields(e);if(t.valid){var n=e.SelectedPallets.map((function(e){return e._id}));yC.update("",n).then((function(t){!0===t.code?(e.SelectedPallets=[],a.setState({formData:e,formErrors:[]},(function(){a.snackOpen("success","update"),a.fetchPallets(a.state.formData.Factory._id)}))):a.snackOpen("error","server")}))}else{var r=t.errors.map((function(e){return Object(y.a)({},"message",e.message)}));a.setState({formErrors:r})}},a.state={formData:OC(vC),pallets:[],mode:"Barcode",formErrors:[],formDirty:!1,snackOpen:!1,alertMessage:"",dialogMessage:"",alertClass:"",startScan:!0,scannedPallet:""},a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"fetchPallets",value:function(e){var t=this;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:void 0!==e&&""!==e&&qv.getCreatePalletFilter("?Factory=".concat(e,"&PalletStatus=In Progress&InActive=false")).then((function(e){var a=Object(me.a)({},t.state.formData);a.SelectedPallets=[],!0===e.code?t.setState({pallets:e.data,formData:a}):t.setState({pallets:[],formData:a})}));case 1:case"end":return a.stop()}}))}},{key:"renderErrors",value:function(){if(this.state.formErrors.length>0)return this.state.formErrors.map((function(e){return r.a.createElement(x.a,{color:"secondary",variant:"subtitle2",gutterBottom:!0},e.message)}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"form-container"},r.a.createElement(be.a,{container:!0,direction:"column",justify:"flex-start",alignItems:"stretch",wrap:"wrap",style:{margin:"4px 10px 30px 0px",height:"100%"},md:8,xs:12},r.a.createElement(x.a,{variant:"overline",display:"block",gutterBottom:!0},"TS to Warehouse"),r.a.createElement(io.a,{"aria-label":"position",name:"position",value:this.state.mode,onChange:function(t){e.setState({mode:t.target.value,startScan:"Barcode"===t.target.value})},row:!0},r.a.createElement(ye.a,{value:"Barcode",control:r.a.createElement(lo.a,{color:"primary"}),label:"Barcode",labelPlacement:"end"}),r.a.createElement(ye.a,{value:"Manual",control:r.a.createElement(lo.a,{color:"primary"}),label:"Manual",labelPlacement:"end"})),r.a.createElement(be.a,{item:!0,style:{marginTop:2,display:"Manual"===this.state.mode?"none":""}},r.a.createElement(x.a,null,"Pallet Number: ",this.state.scannedPallet),r.a.createElement(SC,{startScan:this.state.startScan,OnDetect:this.onDetect})),r.a.createElement(be.a,{item:!0,style:{marginTop:2,display:"Manual"===this.state.mode?"":"none"}},r.a.createElement(be.a,null,r.a.createElement(Hr,{selectedValue:this.state.formData.Factory,propertyName:"Factory",required:!0,handleChange:this.handleChange,formControl:So(this.state.formData.Factory,"empty",this.state.formDirty)?{valid:!0,message:""}:{valid:!1,message:"Factory cannot be Empty"}})),r.a.createElement(E.a,null,this.state.pallets.map((function(t){var a="checkbox-list-label-".concat(t._id);return r.a.createElement(b.a,{key:t._id,value:t,dense:!0,button:!0,onClick:function(){e.handleChange(t,"SelectedPallets")}},r.a.createElement(pC.a,null,r.a.createElement(ve.a,{edge:"start",checked:-1!==e.state.formData.SelectedPallets.indexOf(t),tabIndex:-1,disableRipple:!0,inputProps:{"aria-labelledby":a},color:"primary"})),r.a.createElement(S.a,{id:t._id,primary:"".concat(t.SeqPallet)}))}))),r.a.createElement(be.a,{item:!0,style:{margin:5}},this.state.formErrors.length>0?this.renderErrors():"",r.a.createElement(he.a,{onClick:this.onSave,variant:"outlined",color:"primary",style:{marginRight:5}},"Save"),r.a.createElement(he.a,{variant:"outlined",style:{marginRight:5},color:"secondary",href:"PalletReview"},"Cancel"))),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:600,open:this.state.snackOpen,onClose:this.snackOpen,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)})))}}]),t}(r.a.Component)),wC=kC,FC=wC,xC=(a(957),{Factory:"",Buyer:"",StartBuyingYear:new Date,Remarks:"",Inactive:!1,VKStatus:!1,POStatus:!1,PRIStatus:!1,BuyerApprovedGrade:[],CreatedAt:new Date,CreatedBy:"Admin",LastUpdatedAt:new Date,LastUpdatedBy:"Admin"}),TC=xC,NC=(a(958),{POLSL:0,POCenter:0,POUSL:0,POLCL:0,POUCL:0,PRILSL:0,PRICenter:0,PRIUSL:0,PRILCL:0,PRIUCL:0,DirtLSL:0,DirtCenter:0,DirtUSL:0,VMLSL:0,VMCenter:0,VMUSL:0,AshLSL:0,AshCenter:0,AshUSL:0,NitrogenLSL:0,NitrogenCenter:0,NitrogenUSL:0,MooneyLSL:0,MooneyCenter:0,MooneyUSL:0,MooneyLCL:0,MooneyUCL:0,AshtLSL:0,AshtCenter:0,AshtUSL:0,Remarks:""}),jC=a(23),PC={Factory:{valid:!0,message:""},Buyer:{valid:!0,message:""},StartBuyingYear:{valid:!0,message:""},Remarks:{valid:!0,message:""},Inactive:{valid:!0,message:""},VKStatus:{valid:!0,message:""},POStatus:{valid:!0,message:""},PRIStatus:{valid:!0,message:""},BuyerApprovedGrade:{valid:!0,message:""},Grade:{valid:!0,message:""},StatusDate:{valid:!0,message:""},ApprovalStatus:{valid:!0,message:""}},AC=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).closeForm=function(){a.setState({formControl:jC(PC)},(function(){return a.props.closeForm()}))},a.snackOpen=function(e,t,n){var r;return l.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(void 0===e||null===e||void 0===t||null===t){o.next=11;break}if(void 0!==n){o.next=7;break}return o.next=4,l.a.awrap(ka(e,t));case 4:r=o.sent,o.next=8;break;case 7:r=n;case 8:a.setState({snackOpen:!a.state.snackOpen,snackMessage:r,snackClass:e}),o.next=12;break;case 11:a.setState({snackOpen:!1});case 12:case"end":return o.stop()}}))},a.dialogOpen=function(e){var t;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(void 0===e||null===e){n.next=7;break}return n.next=3,l.a.awrap(ka("confirmation","delete"));case 3:t=n.sent,a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:e,dialogMessage:r.a.createElement("span",null,void 0!==t?t.replace("[Name]",e.Grade.GradeName):"")}),n.next=8;break;case 7:a.setState({dialogOpen:!1});case 8:case"end":return n.stop()}}))},a.onSave=function(){var e=Object(me.a)({},a.state.formData),t=Object(me.a)({},a.state.formControl),n=ol.validateFields(e);n.valid?"Add"===a.props.formAction?ol.add("",e).then((function(e){!0===e.code?a.props.onSuccess(e.data):null!==e.errors&&Array.isArray(e.errors)?(e.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t})):a.snackOpen("error","server")})):ol.update("",e).then((function(e){!0===e.code?a.props.onSuccess(e.data):null!==e.errors&&Array.isArray(e.errors)?(e.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t})):a.snackOpen("error","server")})):(n.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t}),void 0!==n.errors.find((function(e){return"BuyerApprovedGrade"===e.property}))?a.snackOpen("error","",n.errors.find((function(e){return"BuyerApprovedGrade"===e.property})).message):a.snackOpen("error","alertValidation"))},a.onDelete=function(e,t){if(void 0!==a.state.currentDeleteData&&null!==a.state.currentDeleteData){var n=Object(je.a)(a.state.BuyerApprovedGrade),r=Object(me.a)({},a.state.formData),o=n.indexOf(a.state.currentDeleteData);n.splice(o,1),r.BuyerApprovedGrade.splice(o,1),a.setState({BuyerApprovedGrade:n,formData:r,dialogOpen:!1},(function(){return Object(Pe.a)(a)}),a.snackOpen("success","delete"))}},a.state={formData:a.props.formData,formOpen:a.props.formOpen,columns:[{title:"Grade",field:"Grade",render:function(e){return r.a.createElement("span",null,void 0===e.Grade?"":e.Grade.GradeCode)},editComponent:function(e){return r.a.createElement(Fl,{handleChange:function(t){a.resetFormControl(t,"Grade"),e.onChange(t)},formControl:a.state.formControl.Grade,propertyName:"Grade",selectedValue:void 0===e.value?"":e.value,countryId:""===a.state.formData.Factory?"":void 0===a.state.formData.Factory.FctyCountry._id?a.state.formData.Factory.FctyCountry:a.state.formData.Factory.FctyCountry._id,buyerId:""===a.state.formData.Buyer?"":a.state.formData.Buyer._id})}},{title:"Grade Name",field:"Grade",render:function(e){return r.a.createElement("span",null,void 0===e.Grade?"":e.Grade.GradeName)},editComponent:function(e){return r.a.createElement(ge.a,{label:"Grade",value:void 0===e.rowData.Grade?"":e.rowData.Grade.GradeName,inputProps:{readOnly:!0}})}},{title:"Status Date",field:"StatusDate",render:function(e){return r.a.createElement("span",null,new Date(e.StatusDate).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric"}))},editComponent:function(e){return r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Da.a,{required:!0,format:"dd-MMM-yyyy",label:"Status Date",value:e.value,onChange:function(t){a.resetFormControl(t,"StatusDate"),e.onChange(t)},disableFuture:!0}))}},{title:"Approval Status",field:"ApprovalStatus",render:function(e){return r.a.createElement("span",null,e.ApprovalStatus.Name)},editComponent:function(e){return r.a.createElement(xa,{jsonFileName:"buyerApprovalStatus",jsonPropertyName:"BuyerApprovalStatus",formControl:a.state.formControl.ApprovalStatus,propertyName:"ApprovalStatus",required:!0,label:"Approval Status",handleChange:function(t){a.resetFormControl(t,"ApprovalStatus"),e.onChange(t)},selectedValue:void 0===e.value?"":e.value.Value})}},{title:"Remarks",field:"Remarks",editComponent:function(e){return r.a.createElement(ge.a,{label:"Remarks",initialEditValue:"",defaultValue:e.value,onChange:function(t){a.resetFormControl(t.target.value,"Remarks"),e.onChange(t.target.value)}})}},{title:"Inactive",field:"Inactive",lookup:{true:"Yes",false:"No"},editComponent:function(e){return r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ga.a,{component:"label"},"Inactive"),r.a.createElement(Xe.a,{checked:e.rowData.Inactive,value:e.rowData.Inactive,color:"primary",inputProps:{"aria-label":"primary checkbox"},onChange:function(t){e.onChange(t.target.checked)}}))}}],BuyerApprovedGrade_Detail:jC(NC),formControl:jC(PC),selectedFactory:"",currentDeleteData:null,selectedRecord:null,disabled:!1,dialogOpen:!1,dialogMessage:"",snackOpen:!1,snackMessage:"",snackClass:""},a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a.onBuyerApprovedGradeSelect=a.onBuyerApprovedGradeSelect.bind(Object(Pe.a)(a)),a.addBuyerApprovedGradeDetail=a.addBuyerApprovedGradeDetail.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"initFormControl",value:function(){this.setState({formControl:jC(PC)})}},{key:"resetFormControl",value:function(e,t){var a=Object(me.a)({},this.state.formControl);void 0!==e&&null!==e&&""!==e&&(a[t].valid=!0,a[t].message=""),this.setState({formControl:a})}},{key:"handleChange",value:function(e,t,a){var n,r;return l.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(n=Object(me.a)({},this.state.formData),r=Object(me.a)({},this.state.formControl),!a&&"Factory"!==t){o.next=14;break}if(void 0!==e&&""!==e){o.next=12;break}return r[t].valid=!1,o.t0=t,o.next=8,l.a.awrap(ka("validation","empty"));case 8:o.t1=o.sent,r[t].message=o.t0+o.t1,o.next=14;break;case 12:r[t].valid=!0,r[t].message="";case 14:n[t]=e,this.setState({formData:n});case 16:case"end":return o.stop()}}),null,this)}},{key:"handleBuyerApprovalGradeDetailChange",value:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:(a=Object(me.a)({},this.state.BuyerApprovedGrade_Detail))[t]=e,this.setState({BuyerApprovedGrade_Detail:a});case 3:case"end":return n.stop()}}),null,this)}},{key:"addBuyerApprovedGradeDetail",value:function(){var e=this;if(null!==this.state.selectedRecord){var t=Object(me.a)({},this.state.formData);t.BuyerApprovedGrade=this.state.formData.BuyerApprovedGrade.map((function(t){return t.tableData.id===e.state.selectedRecord.tableData.id&&(t.BuyerApprovedGrade_Detail=e.state.BuyerApprovedGrade_Detail),t})),this.setState({formData:t,BuyerApprovedGrade_Detail:jC(NC),selectedRecord:null}),this.snackOpen("success","","Product specification add/update successfully.")}else this.snackOpen("error","","Please select a grade before click on Add/Update button!")}},{key:"onBuyerApprovedGradeSelect",value:function(e,t){var a=this;this.setState({selectedRecord:t}),"object"===typeof t.BuyerApprovedGrade_Detail&&void 0!==t.BuyerApprovedGrade_Detail&&null!==t.BuyerApprovedGrade_Detail?this.setState({BuyerApprovedGrade_Detail:t.BuyerApprovedGrade_Detail}):Cn.getByUid(void 0===t.Grade.GradeCountryGrd._id?t.Grade.GradeCountryGrd:t.Grade.GradeCountryGrd._id).then((function(e){if(!0===e.code){var t=e.data,n={};t.PO_Limit?n.POUSL=t.PO_Param:n.POLSL=t.PO_Param,t.PRI_Limit?n.PRIUSL=t.PRI_Param:n.PRILSL=t.PRI_Param,t.Dirt_Limit?n.DirtUSL=t.Dirt_Param:n.DirtLSL=t.Dirt_Param,t.Volatile_Limit,n.VMUSL=t.Volatile_Param,t.Ash_Limit?n.AshUSL=t.Ash_Param:n.AshLSL=t.Ash_Param,t.Nitrogen_Limit?n.NitrogenUSL=t.Nitrogen_Param:n.NitrogenLSL=t.Nitrogen_Param,a.setState({BuyerApprovedGrade_Detail:n})}}))}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{container:!0},r.a.createElement(Ae.a,{fullScreen:!0,open:this.state.formOpen,onClose:this.closeForm,TransitionComponent:this.Transition},r.a.createElement(w.a,{className:"appBar"},r.a.createElement(F.a,null,r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:this.closeForm,"aria-label":"close"},r.a.createElement(Vt.a,null)),r.a.createElement(x.a,{variant:"h6",className:"app-title"},"Buyer Approval"),r.a.createElement(he.a,{color:"inherit",disabled:this.state.disabled,onClick:this.onSave},"save"))),r.a.createElement(_e.a,null,r.a.createElement("div",{className:"form-container"},r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-around",alignItems:"center",md:10,xs:12,sm:12,xl:10,lg:10},r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Hr,{selectedValue:this.state.formData.Factory,propertyName:"Factory",handleChange:this.handleChange,formControl:this.state.formControl.Factory,disabled:void 0!==this.state.formData._id})),r.a.createElement(Qn,{selectedValue:this.state.formData.Buyer,propertyName:"Buyer",handleChange:function(t){return e.handleChange(t,"Buyer",!0)},formState:this.state.formControl.Buyer,disabled:void 0!==this.state.formData._id}),r.a.createElement(ya.a,{style:{width:"100%",margin:4},margin:"dense"},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Da.a,{required:!0,openTo:"year",format:"yyyy",label:"Start Buying Year",views:["year"],value:this.state.formData.StartBuyingYear,onChange:function(t){return e.handleChange(t,"StartBuyingYear",!0)},disableFuture:!0}))),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"Remarks",label:"Remarks",defaultValue:this.state.formData.Remarks,className:"",onChange:function(t){return e.handleChange(t.target.value,"Remarks",!1)},margin:"dense"})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ga.a,{component:"label"},"Inactive"),r.a.createElement(Xe.a,{checked:this.state.formData.Inactive,value:this.state.formData.Inactive,color:"primary",inputProps:{"aria-label":"primary checkbox"},onChange:function(t){return e.handleChange(t.target.checked,"Inactive",!0)}}))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12,container:!0},r.a.createElement(be.a,{item:!0,md:4,xs:4,sm:4},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ga.a,{component:"label"},"VK Status"),r.a.createElement(Xe.a,{checked:this.state.formData.VKStatus,value:this.state.formData.VKStatus,color:"primary",inputProps:{"aria-label":"primary checkbox"},onChange:function(t){return e.handleChange(t.target.checked,"VKStatus",!0)}}))),r.a.createElement(be.a,{item:!0,md:4,xs:4,sm:4},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ga.a,{component:"label"},"PO Status"),r.a.createElement(Xe.a,{checked:this.state.formData.POStatus,value:this.state.formData.POStatus,color:"primary",inputProps:{"aria-label":"primary checkbox"},onChange:function(t){return e.handleChange(t.target.checked,"POStatus",!0)}}))),r.a.createElement(be.a,{item:!0,md:4,xs:4,sm:4},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ga.a,{component:"label"},"PRI Status"),r.a.createElement(Xe.a,{checked:this.state.formData.PRIStatus,value:this.state.formData.PRIStatus,color:"primary",inputProps:{"aria-label":"primary checkbox"},onChange:function(t){return e.handleChange(t.target.checked,"PRIStatus",!0)}})))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(Ve.a,{style:{width:"100%",margin:4},title:"Buyer Approved Grade",columns:this.state.columns,data:this.state.formData.BuyerApprovedGrade,editable:{onRowAdd:function(t){return new Promise((function(a,n){setTimeout((function(){var r=Object(me.a)({},e.state.formData),o=Object(me.a)({},e.state.formControl),s=ol.validateGradeFields(t);s.valid?(r.BuyerApprovedGrade.push(t),e.setState({formData:r},(function(){return a()}))):(n(),s.errors.map((function(e){o[e.property].valid=!1,o[e.property].message=e.message})),e.setState({formControl:o})),e.setState({selectedRecord:null})}),1e3)}))},onRowUpdate:function(t,a){return new Promise((function(n,r){setTimeout((function(){var o=Object(me.a)({},e.state.formData),s=o.BuyerApprovedGrade.indexOf(a),i=e.state.formControl,l=ol.validateGradeFields(t);l.valid?(o.BuyerApprovedGrade[s]=t,e.setState({formData:o},(function(){return n()}))):(r(),l.errors.map((function(e){i[e.property].valid=!1,i[e.property].message=e.message})),e.setState({formControl:i})),e.setState({selectedRecord:null})}),1e3)}))}},actions:[{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){}},{icon:"delete",tooltip:"Delete",onClick:function(t,a){return e.dialogOpen(a)}}],icons:{Clear:function(t){return r.a.createElement(Nt.a,{onClick:function(){e.initFormControl()},style:{padding:0,margin:0}})}},options:{search:!1,rowStyle:function(t){return{backgroundColor:null!==e.state.selectedRecord&&t.tableData.id===e.state.selectedRecord.tableData.id?"#00000060":"#fff"}}},onRowClick:function(t,a){return e.onBuyerApprovedGradeSelect(t,a)}})),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(bn,{label:"PRODUCT SPECIFICATION",style:{width:"100%"}},r.a.createElement(be.a,{container:!0,style:{marginTop:10}},r.a.createElement(bn,{label:"PO",style:{width:"100%"}},r.a.createElement(be.a,{container:!0,spacing:3},r.a.createElement(be.a,{item:!0,xs:4},r.a.createElement(ya.a,{style:{width:"100%"}},r.a.createElement(Xa.a,{id:"POLSL",label:"LSL",customInput:ge.a,value:this.state.BuyerApprovedGrade_Detail.POLSL,onValueChange:function(t){return e.handleBuyerApprovalGradeDetailChange(t.floatValue,"POLSL")},onFocus:function(e){e.target.select()},decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0,margin:"dense"}))),r.a.createElement(be.a,{item:!0,xs:4},r.a.createElement(ya.a,{style:{width:"100%"}},r.a.createElement(Xa.a,{id:"POCenter",label:"Center",customInput:ge.a,value:this.state.BuyerApprovedGrade_Detail.POCenter,onValueChange:function(t){return e.handleBuyerApprovalGradeDetailChange(t.floatValue,"POCenter")},onFocus:function(e){e.target.select()},decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0,margin:"dense"}))),r.a.createElement(be.a,{item:!0,xs:4},r.a.createElement(ya.a,{style:{width:"100%"}},r.a.createElement(Xa.a,{id:"POUSL",label:"USL",customInput:ge.a,value:this.state.BuyerApprovedGrade_Detail.POUSL,onValueChange:function(t){return e.handleBuyerApprovalGradeDetailChange(t.floatValue,"POUSL")},onFocus:function(e){e.target.select()},decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0,margin:"dense"}))),r.a.createElement(be.a,{item:!0,xs:4,style:{display:this.state.formData.POStatus?"":"none"}},r.a.createElement(ya.a,{style:{width:"100%"}},r.a.createElement(Xa.a,{id:"POLCL",label:"LCL",customInput:ge.a,value:this.state.BuyerApprovedGrade_Detail.POLCL,onValueChange:function(t){return e.handleBuyerApprovalGradeDetailChange(t.floatValue,"POLCL")},onFocus:function(e){e.target.select()},decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0,margin:"dense"}))),r.a.createElement(be.a,{item:!0,xs:4,style:{display:this.state.formData.POStatus?"":"none"}},r.a.createElement(ya.a,{style:{width:"100%"}},r.a.createElement(Xa.a,{id:"POUCL",label:"UCL",customInput:ge.a,value:this.state.BuyerApprovedGrade_Detail.POUCL,onValueChange:function(t){return e.handleBuyerApprovalGradeDetailChange(t.floatValue,"POUCL")},onFocus:function(e){e.target.select()},decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0,margin:"dense"})))))),r.a.createElement(be.a,{container:!0,style:{marginTop:10}},r.a.createElement(bn,{label:"PRI",style:{width:"100%"}},r.a.createElement(be.a,{container:!0,spacing:3},r.a.createElement(be.a,{item:!0,xs:4},r.a.createElement(ya.a,{style:{width:"100%"}},r.a.createElement(Xa.a,{id:"PRILSL",label:"LSL",customInput:ge.a,value:this.state.BuyerApprovedGrade_Detail.PRILSL,onValueChange:function(t){return e.handleBuyerApprovalGradeDetailChange(t.floatValue,"PRILSL")},onFocus:function(e){e.target.select()},decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0,margin:"dense"}))),r.a.createElement(be.a,{item:!0,xs:4},r.a.createElement(ya.a,{style:{width:"100%"}},r.a.createElement(Xa.a,{id:"PRICenter",label:"Center",customInput:ge.a,value:this.state.BuyerApprovedGrade_Detail.PRICenter,onValueChange:function(t){return e.handleBuyerApprovalGradeDetailChange(t.floatValue,"PRICenter")},onFocus:function(e){e.target.select()},decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0,margin:"dense"}))),r.a.createElement(be.a,{item:!0,xs:4},r.a.createElement(ya.a,{style:{width:"100%"}},r.a.createElement(Xa.a,{id:"PRIUSL",label:"USL",customInput:ge.a,value:this.state.BuyerApprovedGrade_Detail.PRIUSL,onValueChange:function(t){return e.handleBuyerApprovalGradeDetailChange(t.floatValue,"PRIUSL")},onFocus:function(e){e.target.select()},decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0,margin:"dense"}))),r.a.createElement(be.a,{item:!0,xs:4,style:{display:this.state.formData.PRIStatus?"":"none"}},r.a.createElement(ya.a,{style:{width:"100%"}},r.a.createElement(Xa.a,{id:"PRILCL",label:"LCL",customInput:ge.a,value:this.state.BuyerApprovedGrade_Detail.PRILCL,onValueChange:function(t){return e.handleBuyerApprovalGradeDetailChange(t.floatValue,"PRILCL")},onFocus:function(e){e.target.select()},decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0,margin:"dense"}))),r.a.createElement(be.a,{item:!0,xs:4,style:{display:this.state.formData.PRIStatus?"":"none"}},r.a.createElement(ya.a,{style:{width:"100%"}},r.a.createElement(Xa.a,{id:"PRIUCL",label:"UCL",customInput:ge.a,value:this.state.BuyerApprovedGrade_Detail.PRIUCL,onValueChange:function(t){return e.handleBuyerApprovalGradeDetailChange(t.floatValue,"PRIUCL")},onFocus:function(e){e.target.select()},decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0,margin:"dense"})))))),r.a.createElement(be.a,{container:!0,style:{marginTop:10}},r.a.createElement(bn,{label:"Dirt",style:{width:"100%"}},r.a.createElement(be.a,{container:!0,spacing:3},r.a.createElement(be.a,{item:!0,xs:4},r.a.createElement(ya.a,{style:{width:"100%"}},r.a.createElement(Xa.a,{id:"DirtLSL",label:"LSL",customInput:ge.a,value:this.state.BuyerApprovedGrade_Detail.DirtLSL,onValueChange:function(t){return e.handleBuyerApprovalGradeDetailChange(t.floatValue,"DirtLSL")},onFocus:function(e){e.target.select()},decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0,margin:"dense"}))),r.a.createElement(be.a,{item:!0,xs:4},r.a.createElement(ya.a,{style:{width:"100%"}},r.a.createElement(Xa.a,{id:"DirtCenter",label:"Center",customInput:ge.a,value:this.state.BuyerApprovedGrade_Detail.DirtCenter,onValueChange:function(t){return e.handleBuyerApprovalGradeDetailChange(t.floatValue,"DirtCenter")},onFocus:function(e){e.target.select()},decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0,margin:"dense"}))),r.a.createElement(be.a,{item:!0,xs:4},r.a.createElement(ya.a,{style:{width:"100%"}},r.a.createElement(Xa.a,{id:"DirtUSL",label:"USL",customInput:ge.a,value:this.state.BuyerApprovedGrade_Detail.DirtUSL,onValueChange:function(t){return e.handleBuyerApprovalGradeDetailChange(t.floatValue,"DirtUSL")},onFocus:function(e){e.target.select()},decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0,margin:"dense"})))))),r.a.createElement(be.a,{container:!0,style:{marginTop:10}},r.a.createElement(bn,{label:"VM",style:{width:"100%"}},r.a.createElement(be.a,{container:!0,spacing:3},r.a.createElement(be.a,{item:!0,xs:4},r.a.createElement(ya.a,{style:{width:"100%"}},r.a.createElement(Xa.a,{id:"VMLSL",label:"LSL",customInput:ge.a,value:this.state.BuyerApprovedGrade_Detail.VMLSL,onValueChange:function(t){return e.handleBuyerApprovalGradeDetailChange(t.floatValue,"VMLSL")},onFocus:function(e){e.target.select()},decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0,margin:"dense"}))),r.a.createElement(be.a,{item:!0,xs:4},r.a.createElement(ya.a,{style:{width:"100%"}},r.a.createElement(Xa.a,{id:"VMCenter",label:"Center",customInput:ge.a,value:this.state.BuyerApprovedGrade_Detail.VMCenter,onValueChange:function(t){return e.handleBuyerApprovalGradeDetailChange(t.floatValue,"VMCenter")},onFocus:function(e){e.target.select()},decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0,margin:"dense"}))),r.a.createElement(be.a,{item:!0,xs:4},r.a.createElement(ya.a,{style:{width:"100%"}},r.a.createElement(Xa.a,{id:"VMUSL",label:"USL",customInput:ge.a,value:this.state.BuyerApprovedGrade_Detail.VMUSL,onValueChange:function(t){return e.handleBuyerApprovalGradeDetailChange(t.floatValue,"VMUSL")},onFocus:function(e){e.target.select()},decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0,margin:"dense"})))))),r.a.createElement(be.a,{container:!0,style:{marginTop:10}},r.a.createElement(bn,{label:"Ash",style:{width:"100%"}},r.a.createElement(be.a,{container:!0,spacing:3},r.a.createElement(be.a,{item:!0,xs:4},r.a.createElement(ya.a,{style:{width:"100%"}},r.a.createElement(Xa.a,{id:"AshLSL",label:"LSL",customInput:ge.a,value:this.state.BuyerApprovedGrade_Detail.AshLSL,onValueChange:function(t){return e.handleBuyerApprovalGradeDetailChange(t.floatValue,"AshLSL")},onFocus:function(e){e.target.select()},decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0,margin:"dense"}))),r.a.createElement(be.a,{item:!0,xs:4},r.a.createElement(ya.a,{style:{width:"100%"}},r.a.createElement(Xa.a,{id:"AshCenter",label:"Center",customInput:ge.a,value:this.state.BuyerApprovedGrade_Detail.AshCenter,onValueChange:function(t){return e.handleBuyerApprovalGradeDetailChange(t.floatValue,"AshCenter")},onFocus:function(e){e.target.select()},decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0,margin:"dense"}))),r.a.createElement(be.a,{item:!0,xs:4},r.a.createElement(ya.a,{style:{width:"100%"}},r.a.createElement(Xa.a,{id:"AshUSL",label:"USL",customInput:ge.a,value:this.state.BuyerApprovedGrade_Detail.AshUSL,onValueChange:function(t){return e.handleBuyerApprovalGradeDetailChange(t.floatValue,"AshUSL")},onFocus:function(e){e.target.select()},decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0,margin:"dense"})))))),r.a.createElement(be.a,{container:!0,style:{marginTop:10,display:this.state.formData.VKStatus?"":"none"}},r.a.createElement(bn,{label:"Mooney",style:{width:"100%"}},r.a.createElement(be.a,{container:!0,spacing:3},r.a.createElement(be.a,{item:!0,xs:4},r.a.createElement(ya.a,{style:{width:"100%"}},r.a.createElement(Xa.a,{id:"MooneyLSL",label:"LSL",customInput:ge.a,value:this.state.BuyerApprovedGrade_Detail.MooneyLSL,onValueChange:function(t){return e.handleBuyerApprovalGradeDetailChange(t.floatValue,"MooneyLSL")},onFocus:function(e){e.target.select()},decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0,margin:"dense"}))),r.a.createElement(be.a,{item:!0,xs:4},r.a.createElement(ya.a,{style:{width:"100%"}},r.a.createElement(Xa.a,{id:"MooneyCenter",label:"Center",customInput:ge.a,value:this.state.BuyerApprovedGrade_Detail.MooneyCenter,onValueChange:function(t){return e.handleBuyerApprovalGradeDetailChange(t.floatValue,"MooneyCenter")},onFocus:function(e){e.target.select()},decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0,margin:"dense"}))),r.a.createElement(be.a,{item:!0,xs:4},r.a.createElement(ya.a,{style:{width:"100%"}},r.a.createElement(Xa.a,{id:"MooneyUSL",label:"USL",customInput:ge.a,value:this.state.BuyerApprovedGrade_Detail.MooneyUSL,onValueChange:function(t){return e.handleBuyerApprovalGradeDetailChange(t.floatValue,"MooneyUSL")},onFocus:function(e){e.target.select()},decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0,margin:"dense"}))),r.a.createElement(be.a,{item:!0,xs:4},r.a.createElement(ya.a,{style:{width:"100%"}},r.a.createElement(Xa.a,{id:"MooneyLCL",label:"LCL",customInput:ge.a,value:this.state.BuyerApprovedGrade_Detail.MooneyLCL,onValueChange:function(t){return e.handleBuyerApprovalGradeDetailChange(t.floatValue,"MooneyLCL")},onFocus:function(e){e.target.select()},decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0,margin:"dense"}))),r.a.createElement(be.a,{item:!0,xs:4},r.a.createElement(ya.a,{style:{width:"100%"}},r.a.createElement(Xa.a,{id:"MooneyUCL",label:"UCL",customInput:ge.a,value:this.state.BuyerApprovedGrade_Detail.MooneyUCL,onValueChange:function(t){return e.handleBuyerApprovalGradeDetailChange(t.floatValue,"MooneyUCL")},onFocus:function(e){e.target.select()},decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0,margin:"dense"})))))),r.a.createElement(be.a,{container:!0,style:{marginTop:10}},r.a.createElement(bn,{label:"Nitrogen",style:{width:"100%"}},r.a.createElement(be.a,{container:!0,spacing:3},r.a.createElement(be.a,{item:!0,xs:4},r.a.createElement(ya.a,{style:{width:"100%"}},r.a.createElement(Xa.a,{id:"NitrogenLSL",label:"LSL",customInput:ge.a,value:this.state.BuyerApprovedGrade_Detail.NitrogenLSL,onValueChange:function(t){return e.handleBuyerApprovalGradeDetailChange(t.floatValue,"NitrogenLSL")},onFocus:function(e){e.target.select()},decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0,margin:"dense"}))),r.a.createElement(be.a,{item:!0,xs:4},r.a.createElement(ya.a,{style:{width:"100%"}},r.a.createElement(Xa.a,{id:"NitrogenCenter",label:"Center",customInput:ge.a,value:this.state.BuyerApprovedGrade_Detail.NitrogenCenter,onValueChange:function(t){return e.handleBuyerApprovalGradeDetailChange(t.floatValue,"NitrogenCenter")},onFocus:function(e){e.target.select()},decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0,margin:"dense"}))),r.a.createElement(be.a,{item:!0,xs:4},r.a.createElement(ya.a,{style:{width:"100%"}},r.a.createElement(Xa.a,{id:"NitrogenUSL",label:"USL",customInput:ge.a,value:this.state.BuyerApprovedGrade_Detail.NitrogenUSL,onValueChange:function(t){return e.handleBuyerApprovalGradeDetailChange(t.floatValue,"NitrogenUSL")},onFocus:function(e){e.target.select()},decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0,margin:"dense"})))))),r.a.createElement(be.a,{container:!0,style:{marginTop:10}},r.a.createElement(bn,{label:"Asht",style:{width:"100%"}},r.a.createElement(be.a,{container:!0,spacing:3},r.a.createElement(be.a,{item:!0,xs:4},r.a.createElement(ya.a,{style:{width:"100%"}},r.a.createElement(Xa.a,{id:"AshtLSL",label:"LSL",customInput:ge.a,value:this.state.BuyerApprovedGrade_Detail.AshtLSL,onValueChange:function(t){return e.handleBuyerApprovalGradeDetailChange(t.floatValue,"AshtLSL")},onFocus:function(e){e.target.select()},decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0,margin:"dense"}))),r.a.createElement(be.a,{item:!0,xs:4},r.a.createElement(ya.a,{style:{width:"100%"}},r.a.createElement(Xa.a,{id:"AshtCenter",label:"Center",customInput:ge.a,value:this.state.BuyerApprovedGrade_Detail.AshtCenter,onValueChange:function(t){return e.handleBuyerApprovalGradeDetailChange(t.floatValue,"AshtCenter")},onFocus:function(e){e.target.select()},decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0,margin:"dense"}))),r.a.createElement(be.a,{item:!0,xs:4},r.a.createElement(ya.a,{style:{width:"100%"}},r.a.createElement(Xa.a,{id:"AshtUSL",label:"USL",customInput:ge.a,value:this.state.BuyerApprovedGrade_Detail.AshtUSL,onValueChange:function(t){return e.handleBuyerApprovalGradeDetailChange(t.floatValue,"AshtUSL")},onFocus:function(e){e.target.select()},decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0,margin:"dense"})))))),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"Remarks",label:"Remarks",value:this.state.BuyerApprovedGrade_Detail.Remarks,className:"",onChange:function(t){return e.handleBuyerApprovalGradeDetailChange(t.target.value,"Remarks",!1)},margin:"dense"})),r.a.createElement(he.a,{variant:"contained",color:"primary",onClick:this.addBuyerApprovedGradeDetail},"Add/Update"))))))),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.snackClass,autoHideDuration:600,open:this.state.snackOpen,onClose:this.snackOpen,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.snackMessage)}),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.dialogOpen,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.dialogOpen,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDelete,color:"primary"},"Delete"))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return{formOpen:e.formOpen}}}]),t}(r.a.Component),MC=AC,_C=MC,IC=a(23),RC=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).snackOpen=function(e,t){var n;return l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0===e||null===e||void 0===t||null===t){r.next=7;break}return r.next=3,l.a.awrap(ka(e,t));case 3:n=r.sent,a.setState({snackOpen:!a.state.snackOpen,alertMessage:n,alertClass:e}),r.next=8;break;case 7:a.setState({snackOpen:!1});case 8:case"end":return r.stop()}}))},a.dialogOpen=function(e){var t;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log(e),n.next=3,l.a.awrap(ka("confirmation","delete"));case 3:t=n.sent,a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:e,dialogMessage:r.a.createElement("span",null,void 0!==t?t.replace("[Name]",e.Factory.FctyName):"")});case 5:case"end":return n.stop()}}))},a.diaLogClose=function(){a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:null})},a.onDelete=function(){null!==a.state.currentDeleteData&&ol.delete("".concat(a.state.currentDeleteData._id)).then((function(e){if(!0===e.code){var t=Object(je.a)(a.state.data),n=t.indexOf(a.state.currentDeleteData);t.splice(n,1),a.setState({data:t,currentDeleteData:"",dialogOpen:!a.state.dialogOpen},(function(){return a.snackOpen("success","delete")}))}else a.snackOpen("error","server")}))},a.state={columns:[{title:"Factory",field:"Factory",render:function(e){return r.a.createElement("span",null,e.Factory.FctyCode)}},{title:"Buyer",render:function(e){return r.a.createElement("span",null,e.Buyer.name)}},{title:"Start Buy Year",render:function(e){return r.a.createElement("span",null,new Date(e.StartBuyingYear).getFullYear())}},{title:"Grade",render:function(e){return r.a.createElement(E.a,null,e.BuyerApprovedGrade.map((function(e,t){return r.a.createElement(b.a,{divider:!0,key:e._id},r.a.createElement(S.a,{primary:e.Grade.GradeCode}))})))}},{title:"Grade Name",render:function(e){return r.a.createElement(E.a,null,e.BuyerApprovedGrade.map((function(e,t){return r.a.createElement(b.a,{divider:!0,key:e._id},r.a.createElement(S.a,{primary:e.Grade.GradeName}))})))}},{title:"Approval Status",render:function(e){return r.a.createElement(E.a,null,e.BuyerApprovedGrade.map((function(e,t){return r.a.createElement(b.a,{divider:!0,key:e._id},r.a.createElement(S.a,{primary:e.ApprovalStatus.Name}))})))}},{title:"Inactive",field:"Inactive",lookup:{true:"Yes",false:"No"}},{title:"Remarks",field:"Remarks"},{title:"Operator",field:"LastUpdatedBy"},{title:"Last Updated",field:"LastUpdatedAt",render:function(e){return r.a.createElement("span",null,new Date(e.LastUpdatedAt).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}))}}],data:[],formData:null,currentDeleteData:null,formOpen:!1,formAction:"",dialogOpen:!1,snackOpen:!1,alertMessage:"",dialogMessage:"",alertClass:""},a.buyerApprovalGradeModel=IC(TC),a.onSuccess=a.onSuccess.bind(Object(Pe.a)(a)),a.closeForm=a.closeForm.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initbuyerApprovalGrade()}},{key:"initbuyerApprovalGrade",value:function(){var e=this;ol.get("").then((function(t){!0===t.code&&e.setState({data:t.data})}))}},{key:"openForm",value:function(e){var t,a=IC(e);void 0===e||null===e?(a=IC(this.buyerApprovalGradeModel),t="Add"):t="update",this.setState({formData:a,formOpen:!this.state.formOpen,formAction:t})}},{key:"closeForm",value:function(){this.setState({formData:null,formOpen:!1,formAction:""})}},{key:"onSuccess",value:function(e){var t=this,a=Object(je.a)(this.state.data);if(void 0!==e&&null!==e)if("Add"===this.state.formAction)a.push(e),this.setState({data:a,formOpen:!this.state.formOpen,formAction:"",currentRowData:null},(function(){return t.snackOpen("success","add")}));else{var n=a.find((function(e){return e._id===t.state.formData._id})),r=a.indexOf(n);a[r]=e,this.setState({data:a,formOpen:!this.state.formOpen,formAction:"",currentRowData:null},(function(){return t.snackOpen("success","update")}))}else this.snackOpen("error","server")}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{container:!0,direction:"column",justify:"center",wrap:"wrap",style:{margin:"20px 20px 10px 0px"}},r.a.createElement(be.a,{item:!0,xs:12},r.a.createElement(Ve.a,{title:"FG Buyer Approval",columns:this.state.columns,data:this.state.data,components:{Toolbar:function(t){return r.a.createElement("div",null,r.a.createElement(Le.MTableToolbar,t),r.a.createElement("div",{style:{padding:"0px 15px"}},r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:function(){return e.openForm()},"aria-label":"add"},r.a.createElement(wt.a,null))))}},actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.data,columns:e.state.columns,fileName:"RM Grade"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.initbuyerApprovalGrade()}},{icon:"edit",tooltip:"Edit User",onClick:function(t,a){return e.openForm(a)}},{icon:"delete",tooltip:"Delete User",onClick:function(t,a){return e.dialogOpen(a)}}]})),r.a.createElement(be.a,{item:!0,xs:12},this.state.formOpen?r.a.createElement(_C,{formAction:this.state.formAction,formData:this.state.formData,formOpen:this.state.formOpen,onSuccess:this.onSuccess,closeForm:this.closeForm}):""),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:600,open:this.state.snackOpen,onClose:this.snackOpen,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.diaLogClose,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.diaLogClose,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDelete,color:"primary"},"Delete"))))}}]),t}(r.a.Component),LC=RC,VC=LC,BC=(a(959),a(1143)),UC=a(1133),qC=a(1134),GC=a(1135),WC={TestDate:Date.now(),BuyerLotNo:"",Remarks:""},HC=WC,QC=a(23),zC=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).snackOpen=function(e,t){var n;return l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0===e||null===e||void 0===t||null===t){r.next=7;break}return r.next=3,l.a.awrap(ka(e,t));case 3:n=r.sent,a.setState({snackOpen:!a.state.snackOpen,alertMessage:n,alertClass:e}),r.next=8;break;case 7:a.setState({snackOpen:!1});case 8:case"end":return r.stop()}}))},a.dialogOpen=function(e){a.setState({currentDeleteData:e,dialogOpen:!a.state.dialogOpen,dialogMessage:r.a.createElement("span",null,"Are you sure to delete this record? This cannot be undone.")})},a.diaLogClose=function(){a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:null})},a.onPalletSeqChange=function(e){var t;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=Object(me.a)({},a.state.disabled),void 0===e||""===e){n.next=4;break}return n.next=4,l.a.awrap(Uv.getOneCreatePallet(e._id).then((function(e){!0===e.code&&(t="Allocated"===e.data.PalletStatus||"Close"===e.data.AllocationStatus,a.setState({palletData:e.data,disabled:t},(function(){return a.initTestResultSample()})))})));case 4:case"end":return n.stop()}}))},a.onDetect=function(e){var t=e.codeResult.code;qv.getOneCreatePallet("".concat(t)).then((function(e){!0===e.code&&(a.setState({startScan:!1}),a.onPalletSeqChange(e.data))})).catch((function(e){a.snackOpen("error","server")}))},a.onSave=function(){var e=Object(je.a)(a.state.testResultSampleData);Kv.add("",e).then((function(e){!0===e.code?a.setState({testResultSampleData:e.data,startScan:"Barcode"===a.state.mode}):a.snackOpen("error","server")}))},a.onDelete=function(){null!==a.state.currentDeleteData&&Kv.delete("".concat(a.state.currentDeleteData._id)).then((function(e){if(!0===e.code){var t=Object(je.a)(a.state.testResultSampleData),n=t.indexOf(a.state.currentDeleteData);t.splice(n,1),a.setState({testResultSampleData:t},(function(){return a.diaLogClose()}))}else a.snackOpen("error","server")}))},a.state={palletData:QC(Lv),testResultData:QC(HC),testResultSampleCol:[{title:"Dirt",field:"Dirt",render:function(e){return r.a.createElement("span",null,void 0===e.Dirt?"0.00":e.Dirt)},editComponent:function(e){return r.a.createElement(Xa.a,{customInput:ge.a,label:"Dirt",defaultValue:void 0===e.value?0:e.value,decimalSeparator:".",decimalScale:2,fixedDecimalScale:!0,onValueChange:function(t){t.formattedValue;var a=t.value;e.onChange(a)}})}},{title:"Ash",field:"Ash",render:function(e){return r.a.createElement("span",null,void 0===e.Ash?"0.00":e.Ash)},editComponent:function(e){return r.a.createElement(Xa.a,{customInput:ge.a,label:"Dirt",defaultValue:void 0===e.value?0:e.value,decimalSeparator:".",decimalScale:2,fixedDecimalScale:!0,onValueChange:function(t){t.formattedValue;var a=t.value;e.onChange(a)}})}},{title:"VM",field:"VM",render:function(e){return r.a.createElement("span",null,void 0===e.VM?"0.00":e.VM)},editComponent:function(e){return r.a.createElement(Xa.a,{customInput:ge.a,label:"VM",defaultValue:void 0===e.value?0:e.value,decimalSeparator:".",decimalScale:2,fixedDecimalScale:!0,onValueChange:function(t){t.formattedValue;var a=t.value;e.onChange(a)}})}},{title:"Nitrogen",field:"Nitrogen",render:function(e){return r.a.createElement("span",null,void 0===e.Nitrogen?"0.00":e.Nitrogen)},editComponent:function(e){return r.a.createElement(Xa.a,{customInput:ge.a,label:"Nitrogen",defaultValue:void 0===e.value?0:e.value,decimalSeparator:".",decimalScale:2,fixedDecimalScale:!0,onValueChange:function(t){t.formattedValue;var a=t.value;e.onChange(a)}})}},{title:"PO",field:"PO",render:function(e){return r.a.createElement("span",null,void 0===e.PO?"0.00":e.PO)},editComponent:function(e){return r.a.createElement(Xa.a,{customInput:ge.a,label:"PO",defaultValue:void 0===e.value?0:e.value,decimalSeparator:".",decimalScale:2,fixedDecimalScale:!0,onValueChange:function(t){t.formattedValue;var a=t.value;e.onChange(a)}})}},{title:"P30",field:"P30",render:function(e){return r.a.createElement("span",null,void 0===e.P30?"0.00":e.P30)},editComponent:function(e){return r.a.createElement(Xa.a,{customInput:ge.a,label:"P30",defaultValue:void 0===e.value?0:e.value,decimalSeparator:".",decimalScale:2,fixedDecimalScale:!0,onValueChange:function(t){t.formattedValue;var a=t.value;e.onChange(a)}})}},{title:"PRI",field:"PRI",render:function(e){return r.a.createElement("span",null,void 0===e.PRI?"0.00":e.PRI)},editComponent:function(e){return r.a.createElement(Xa.a,{customInput:ge.a,label:"PRI",defaultValue:void 0===e.value?0:e.value,decimalSeparator:".",decimalScale:2,fixedDecimalScale:!0,onValueChange:function(t){t.formattedValue;var a=t.value;e.onChange(a)}})}},{title:"Mooney",field:"Mooney",render:function(e){return r.a.createElement("span",null,void 0===e.Mooney?"0.00":e.Mooney)},editComponent:function(e){return r.a.createElement(Xa.a,{customInput:ge.a,label:"Mooney",defaultValue:void 0===e.value?0:e.value,decimalSeparator:".",decimalScale:2,fixedDecimalScale:!0,onValueChange:function(t){t.formattedValue;var a=t.value;e.onChange(a)}})}},{title:"Gel",field:"Gel",render:function(e){return r.a.createElement("span",null,void 0===e.Gel?"0.00":e.Gel)},editComponent:function(e){return r.a.createElement(Xa.a,{customInput:ge.a,label:"Gel",defaultValue:void 0===e.value?0:e.value,decimalSeparator:".",decimalScale:2,fixedDecimalScale:!0,onValueChange:function(t){t.formattedValue;var a=t.value;e.onChange(a)}})}},{title:"SVI",field:"SVI",render:function(e){return r.a.createElement("span",null,void 0===e.SVI?"0.00":e.SVI)},editComponent:function(e){return r.a.createElement(Xa.a,{customInput:ge.a,label:"SVI",defaultValue:void 0===e.value?0:e.value,decimalSeparator:".",decimalScale:2,fixedDecimalScale:!0,onValueChange:function(t){t.formattedValue;var a=t.value;e.onChange(a)}})}},{title:"Asht",field:"Asht",render:function(e){return r.a.createElement("span",null,void 0===e.Asht?"0.00":e.Asht)},editComponent:function(e){return r.a.createElement(Xa.a,{customInput:ge.a,label:"Asht",defaultValue:void 0===e.value?0:e.value,decimalSeparator:".",decimalScale:2,fixedDecimalScale:!0,onValueChange:function(t){t.formattedValue;var a=t.value;e.onChange(a)}})}},{title:"Offspec",field:"Offspec",render:function(e){return r.a.createElement("span",null,!0===e.Offspec?"Yes":"No")},editComponent:function(e){return r.a.createElement(Xe.a,{checked:e.value,onChange:function(t){return e.onChange(t.target.checked)},value:e.value,inputProps:{"aria-label":"secondary checkbox"},color:"primary"})}}],testResultSampleData:[],disabled:!0,currentDeleteData:null,seqPalletData:null,startScan:!0,mode:"Barcode"},a.handelChangePallet=a.handelChangePallet.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"handelChangePallet",value:function(e,t){var a,n=this;return l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:(a=Object(me.a)({},this.state.palletData))[t]=e,this.setState({palletData:a},(function(){return n.getPalletProductionByFactory()}));case 3:case"end":return r.stop()}}),null,this)}},{key:"getPalletProductionByFactory",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if("object"!==typeof this.state.palletData.Factory||void 0===this.state.palletData.ProductionDate){t.next=3;break}return t.next=3,l.a.awrap(Uv.getCreatePallet("filter-fy/".concat(this.state.palletData.Factory._id,"/").concat(new Date(this.state.palletData.ProductionDate).getFullYear())).then((function(t){!0===t.code&&e.setState({seqPalletData:t.data})})));case 3:case"end":return t.stop()}}),null,this)}},{key:"initTestResultSample",value:function(){var e=this,t=[];Kv.getFilterTestResult("?Pallet=".concat(this.state.palletData.id)).then((function(a){if(!0===a.code){if(Array.isArray(a.data)&&a.data.length>0)t=a.data;else{var n=e.state.palletData.DefaultTestResult;if(n>0)for(var r=0;r<n;r++)Jv.SampleNo=r+1,Jv.Pallet=e.state.palletData.id,t.push(QC(Jv))}e.setState({testResultSampleData:t})}}))}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{container:!0,direction:"row",justify:"center",alignItems:"stretch"},r.a.createElement(be.a,{item:!0,container:!0,xs:12},r.a.createElement(x.a,{variant:"overline",display:"block",gutterBottom:!0},"Test Result")),r.a.createElement(be.a,{item:!0,xs:12},r.a.createElement(io.a,{"aria-label":"position",name:"position",value:this.state.mode,onChange:function(t){e.setState({mode:t.target.value,startScan:"Barcode"===t.target.value})},row:!0},r.a.createElement(ye.a,{value:"Barcode",control:r.a.createElement(lo.a,{color:"primary"}),label:"Barcode",labelPlacement:"end"}),r.a.createElement(ye.a,{value:"Manual",control:r.a.createElement(lo.a,{color:"primary"}),label:"Manual",labelPlacement:"end"}))),r.a.createElement(be.a,{item:!0,xs:12,style:{display:"Manual"===this.state.mode?"none":""}},r.a.createElement(x.a,null,"Pallet Number:"," ",null===this.state.palletData?"":this.state.palletData.SeqPallet),r.a.createElement(SC,{startScan:this.state.startScan,OnDetect:this.onDetect})),r.a.createElement(be.a,{item:!0,container:!0,xs:12,style:{display:"Manual"===this.state.mode?"":"none"}},r.a.createElement(be.a,{container:!0,direction:"row",justify:"space-evenly",alignItems:"flex-start",wrap:"wrap",spacing:3},r.a.createElement(be.a,{item:!0,xs:12,sm:4,md:4,lg:4},r.a.createElement(Hr,{selectedValue:this.state.palletData.Factory,propertyName:"Factory",handleChange:function(t){return e.handelChangePallet(t,"Factory")},required:!1})),r.a.createElement(be.a,{item:!0,xs:12,sm:4,md:4,lg:4},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Da.a,{style:{width:"100%",margin:4},margin:"dense",id:"date-picker-dialog",label:"Production Date *",views:["year"],value:void 0===this.state.palletData.ProductionDate?Date.now():this.state.palletData.ProductionDate,onChange:function(t){return e.handelChangePallet(t,"ProductionDate")},KeyboardButtonProps:{"aria-label":"Production Date"}}))),r.a.createElement(be.a,{item:!0,xs:12,sm:4,md:4,lg:4},r.a.createElement(yi,{selectedValue:this.state.palletData,columns:["SeqPallet"],data:this.state.seqPalletData,handleChange:this.onPalletSeqChange})))),r.a.createElement(be.a,{item:!0,xs:12,style:{marginTop:10}},r.a.createElement(BC.a,{defaultExpanded:!0},r.a.createElement(UC.a,{expandIcon:r.a.createElement(A.a,null),"aria-controls":"Pallet Details",id:"palletdetail-header"},r.a.createElement("div",null,r.a.createElement(x.a,{variant:"subtitle1",gutterBottom:!0},"Pallet Detail"))),r.a.createElement(qC.a,null,r.a.createElement(be.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",wrap:"wrap",spacing:3},r.a.createElement(be.a,{item:!0,container:!0,xs:12,md:4},r.a.createElement(x.a,{variant:"subtitle1",gutterBottom:!0,style:{marginTop:4}},"Production Date:"," ",new Date(this.state.palletData.ProductionDate).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric"}))),r.a.createElement(be.a,{item:!0,container:!0,xs:12,md:4},r.a.createElement(x.a,{variant:"subtitle1",gutterBottom:!0,style:{marginTop:4}},"Grade: ",this.state.palletData.ProductGrade.GradeCode)),r.a.createElement(be.a,{item:!0,container:!0,xs:12,md:4},r.a.createElement(x.a,{variant:"subtitle1",gutterBottom:!0,style:{marginTop:4}},"Export Pallet #: ",this.state.palletData.ExportPallet)),r.a.createElement(be.a,{item:!0,container:!0,xs:12,md:4},r.a.createElement(x.a,{variant:"subtitle1",gutterBottom:!0,style:{marginTop:4}},"Packing Type:"," ",this.state.palletData.PackingType.PckTypeName)),r.a.createElement(be.a,{item:!0,container:!0,xs:12,md:4},r.a.createElement(x.a,{variant:"subtitle1",gutterBottom:!0,style:{marginTop:4}},"Pallet Weight: ",this.state.palletData.PalletWeight)),r.a.createElement(be.a,{item:!0,container:!0,xs:12,md:4},r.a.createElement(x.a,{variant:"subtitle1",gutterBottom:!0,style:{marginTop:4}},"Print Label Status:"," ",!0===this.state.palletData.PrintLabelStatus?"Enabled":"Disabled")),r.a.createElement(be.a,{item:!0,container:!0,xs:12,md:4},r.a.createElement(x.a,{variant:"subtitle1",gutterBottom:!0,style:{marginTop:4}},"Print QR Code:"," ",!0===this.state.palletData.PrintQRCode?"Enabled":"Disabled")),r.a.createElement(be.a,{item:!0,container:!0,xs:12,md:4},r.a.createElement(x.a,{variant:"subtitle1",gutterBottom:!0,style:{marginTop:4}},"Pallet Status: ",this.state.palletData.PalletStatus)),r.a.createElement(be.a,{item:!0,container:!0,xs:12,md:4},r.a.createElement(x.a,{variant:"subtitle1",gutterBottom:!0,style:{marginTop:4}},"Allocation Status: ",this.state.palletData.AllocationStatus)),r.a.createElement(be.a,{item:!0,container:!0,xs:12,md:4},r.a.createElement(x.a,{variant:"subtitle1",gutterBottom:!0,style:{marginTop:4}},"Inactive:"," ",!0===this.state.palletData.Inactive?"Yes":"No")),r.a.createElement(be.a,{item:!0,container:!0,xs:12,md:4},r.a.createElement(x.a,{variant:"subtitle1",gutterBottom:!0,style:{marginTop:4}},"Total Sample: ",this.state.palletData.DefaultTestResult)))))),r.a.createElement(be.a,{item:!0,style:{marginTop:10},xs:12},r.a.createElement(BC.a,{defaultExpanded:!0},r.a.createElement(UC.a,{expandIcon:r.a.createElement(A.a,null),"aria-controls":"Test Result Details",id:"TestResult-header"},r.a.createElement("div",null,r.a.createElement(x.a,{variant:"subtitle1",gutterBottom:!0},"Test Result Sample"))),r.a.createElement(qC.a,null,r.a.createElement(be.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",wrap:"wrap",spacing:3},r.a.createElement(be.a,{item:!0,xs:12,md:4},r.a.createElement(ya.a,{style:{width:"100%"}},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Da.a,{style:{width:"100%"},margin:"dense",id:"date-picker-dialog",label:"Test Date",format:"dd-MM-yyyy",disableFuture:!0,animateYearScrolling:!0,value:void 0===this.state.testResultData.TestDate?Date.now():this.state.testResultData.TestDate,onChange:function(t){return e.handelChangePallet(new Date(t),"TestDate")},KeyboardButtonProps:{"aria-label":"Test Date"}})))),r.a.createElement(be.a,{item:!0,xs:12,md:4},r.a.createElement(ya.a,{style:{width:"100%"}},r.a.createElement(ge.a,{id:"BuyerLotNo",label:"Buyer Lot No.",defaultValue:this.state.testResultData.BuyerLotNo,className:"",onChange:function(t){return e.handelChange(t.target.value,"BuyerLotNo")},margin:"dense"}))),r.a.createElement(be.a,{item:!0,xs:12,md:4},r.a.createElement(ya.a,{style:{width:"100%"}},r.a.createElement(ge.a,{id:"Remarks",label:"Remarks",multiline:!0,defaultValue:this.state.testResultData.Remarks,className:"",onChange:function(t){return e.handelChange(t.target.value,"Remarks")},margin:"dense"}))),r.a.createElement(be.a,{item:!0,md:12},r.a.createElement(Ve.a,{title:"Test Result Sample",columns:this.state.testResultSampleCol,data:this.state.testResultSampleData,editable:{onRowAdd:function(t){return new Promise((function(a,n){setTimeout((function(){try{var r=Object(je.a)(e.state.testResultSampleData),o=e.state.palletData._id;void 0===t.Offspec&&(t.Offspec=!1),t.Pallet=o,r.push(t),e.setState({testResultSampleData:r},(function(){return a()}))}catch(s){n()}}),1e3)}))}},actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.data,columns:e.state.columns,fileName:"Broker"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.initTestResultSample()}},{icon:"delete",tooltip:"Delete Contamination",onClick:function(t,a){return e.dialogOpen(a)}}],options:{}})))),r.a.createElement(k.a,null),r.a.createElement(GC.a,null,r.a.createElement(he.a,{size:"small"},"Cancel"),r.a.createElement(he.a,{size:"small",color:"primary",onClick:this.onSave},"Save")))),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:600,open:this.state.snackOpen,onClose:this.snackOpen,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.diaLogClose,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.diaLogClose,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDelete,color:"primary"},"Delete"))))}}]),t}(r.a.Component),YC=zC,KC=(a(960),{properties:{Factory:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Factory cannot be empty.",conform:"Factory cannot be empty.",required:"Factory cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},LotDate:{description:"",type:"any",required:!0,allowEmpty:!1,messages:{allowEmpty:"Production Date cannot be empty.",conform:"Production Date cannot be empty.",required:"Production Date cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},ProductGrade:{description:"",type:"any",required:!0,allowEmpty:!1,messages:{allowEmpty:"Product Grade cannot be empty.",conform:"Product Grade cannot be empty.",required:"Product Grade cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},LotNumber:{description:"",type:"any",required:!0,allowEmpty:!1,messages:{allowEmpty:"Lot # cannot be empty.",conform:"Lot # cannot be empty.",required:"Lot # cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},PackingType:{description:"",type:"any",required:!0,allowEmpty:!1,messages:{allowEmpty:"Packing Type cannot be empty.",conform:"Packing Type cannot be empty.",required:"Packing Type cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},LotWeight:{description:"",type:"any",required:!0,allowEmpty:!1,messages:{allowEmpty:"Lot Weight cannot be empty.",exclusiveMinimum:"Lot Weight must greater than 0.",required:"Lot Weight cannot be empty."},exclusiveMinimum:0},Remarks:{description:"",type:"string"},LotStatus:{description:"",type:"string"}}}),JC=a(24),ZC={validateFields:function(e){return JC.validate(e,KC,{cast:!0})},get:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="lot/"+e,a.abrupt("return",We(t).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},getFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("lot-filter/").concat(e),a.abrupt("return",We(t).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},getOne:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("lot/").concat(e),a.abrupt("return",We(t).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},update:function(e,t){return Qe("lot/"+e,t).then((function(e){return console.log(e),200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Updated",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="lot/"+e,n.abrupt("return",He(a,t).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Added",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,formValid:!0,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("lot/"+e).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))}},XC=ZC,$C={ShippingInstruction:"",Factory:"",LotDate:new Date(Date.now()).toLocaleDateString(),ProductGrade:"",PackingType:"",LotNumber:"",LotWeight:0,LotStatus:"OPEN",Remarks:"",SelectedPallets:[]},eD=$C,tD=(a(961),a(23)),aD={Factory:{valid:!0,message:""},ShippingInstruction:{valid:!0,message:""},LotDate:{valid:!0,message:""},ProductGrade:{valid:!0,message:""},PackingType:{valid:!0,message:""},LotNumber:{valid:!0,message:""},LotWeight:{valid:!0,message:""},LotStatus:{valid:!0,message:""},Remarks:{valid:!0,message:""},SelectedPallets:{value:!0,message:""}},nD=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).closeForm=function(){a.setState({formControl:tD(aD)},(function(){return a.props.closeForm()}))},a.snackOpen=function(e,t,n){var r;return l.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(void 0===e||null===e||void 0===t||null===t){o.next=11;break}if(void 0!==n){o.next=7;break}return o.next=4,l.a.awrap(ka(e,t));case 4:r=o.sent,o.next=8;break;case 7:r=n;case 8:a.setState({snackOpen:!a.state.snackOpen,snackMessage:r,snackClass:e}),o.next=12;break;case 11:a.setState({snackOpen:!1});case 12:case"end":return o.stop()}}))},a.dialogOpen=function(e){var t;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(void 0===e||null===e){n.next=7;break}return n.next=3,l.a.awrap(ka("confirmation","delete"));case 3:t=n.sent,a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:e,dialogMessage:r.a.createElement("span",null,void 0!==t?t.replace("[Name]",e.Grade.GradeName):"")}),n.next=8;break;case 7:a.setState({dialogOpen:!1});case 8:case"end":return n.stop()}}))},a.onSave=function(){var e=Object(me.a)({},a.state.formData),t=Object(me.a)({},a.state.formControl),n=XC.validateFields(e);if(!n.valid)return n.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t}),void a.snackOpen("error","alertValidation");""===a.state.formData.ShippingInstruction||void 0===a.state.formData.ShippingInstruction?a.state.AllocatedWeight>e.LotWeight?a.snackOpen("error","","You load over the Expected Qty!"):(e.LotStatus=a.state.AllocatedWeight===e.LotWeight?"CLOSE":"OPEN",e.SelectedPallets=a.state.SelectedPallets,"Add"===a.props.formAction?XC.add("",e).then((function(n){if(!0===n.code){var r=n.data;r.SelectedPallets=e.SelectedPallets,a.props.onSuccess(r)}else null!==n.errors&&Array.isArray(n.errors)?(n.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t})):a.snackOpen("error","server")})):XC.update("",e).then((function(n){if(!0===n.code){var r=n.data;r.SelectedPallets=e.SelectedPallets,a.props.onSuccess(r)}else null!==n.errors&&Array.isArray(n.errors)?(n.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t})):a.snackOpen("error","server")}))):a.snackOpen("error","","This Lot has been loaded to Shipping Instruction.")},a.state={formData:a.props.formData,formOpen:a.props.formOpen,columns:[{title:"Production No.",field:"SeqPallet"},{title:"Export Pallet No.",field:"ExportPallet"},{title:"Date",field:"ProductionDate",render:function(e){return r.a.createElement("span",null,new Date(e.ProductionDate).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric"}))}},{title:"Pallet Weight (kg)",field:"PalletWeight"},{title:"Pallet Status",field:"PalletStatus"},{title:"Selected",render:function(e){return r.a.createElement(ve.a,{checked:e.selected,onChange:function(t){return a.selectPallet(t.target.checked,e)},color:"primary"})}}],formControl:tD(aD),SelectedPallets:a.props.formData.SelectedPallets,AllocatedWeight:a.props.formData.SelectedPallets.reduce((function(e,t){return e+t.PalletWeight}),0),currentDeleteData:null,selectedRecord:null,disabled:!1,dialogOpen:!1,dialogMessage:"",snackOpen:!1,snackMessage:"",snackClass:"",palletData:[]},a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a.fetchPalletData=a.fetchPalletData.bind(Object(Pe.a)(a)),a.selectPallet=a.selectPallet.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){""!==this.state.formData.Factory&&""!==this.state.formData.ProductGrade&&""!==this.state.formData.PackingType&&this.fetchPalletData(this.state.formData.Factory._id,this.state.formData.ProductGrade._id,this.state.formData.PackingType._id)}},{key:"initFormControl",value:function(){this.setState({formControl:tD(aD)})}},{key:"fetchPalletData",value:function(e,t,a){var n,r=this;return l.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return n=Object(me.a)({},this.state.formData),o.next=3,l.a.awrap(Do("getPalletForAllocationData/?Factory=".concat(e,"&ProductGrade=").concat(t,"&PackingType=").concat(a)).then((function(e){if(!0===e.code){var t=e.data;t=t.concat(n.SelectedPallets.map((function(e){return e.selected=!0,e}))),r.setState({palletData:t,SelectedPallets:n.SelectedPallets})}})));case 3:case"end":return o.stop()}}),null,this)}},{key:"resetFormControl",value:function(e,t){var a=Object(me.a)({},this.state.formControl);void 0!==e&&null!==e&&""!==e&&(a[t].valid=!0,a[t].message=""),this.setState({formControl:a})}},{key:"handleChange",value:function(e,t,a){var n,r;return l.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(n=Object(me.a)({},this.state.formData),r=Object(me.a)({},this.state.formControl),!a){o.next=14;break}if(void 0!==e&&""!==e){o.next=12;break}return r[t].valid=!1,o.t0=t,o.next=8,l.a.awrap(ka("validation","empty"));case 8:o.t1=o.sent,r[t].message=o.t0+o.t1,o.next=14;break;case 12:r[t].valid=!0,r[t].message="";case 14:"Factory"===t&&(n.ProductGrade=""),n[t]=e,"Factory"!==t&&"ProductGrade"!==t&&"PackingType"!==t||(""!==n.Factory&&""!==n.ProductGrade&&""!==n.PackingType?this.fetchPalletData(n.Factory._id,n.ProductGrade._id,n.PackingType._id):this.setState({palletData:[]})),this.setState({formData:n});case 18:case"end":return o.stop()}}),null,this)}},{key:"selectPallet",value:function(e,t){var a=Object(je.a)(this.state.SelectedPallets),n=Object(je.a)(this.state.palletData),r=this.state.AllocatedWeight;if(e)t.selected=!0,a.push(t),r+=t.PalletWeight;else{t.selected=!1;var o=a.indexOf(t);a.splice(o,1),r-=t.PalletWeight}var s=n.findIndex((function(e){return e._id===t._id}));n[s]=t,this.setState({AllocatedWeight:r,SelectedPallets:a,palletData:n})}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{container:!0},r.a.createElement(Ae.a,{fullScreen:!0,open:this.state.formOpen,onClose:this.closeForm,TransitionComponent:this.Transition},r.a.createElement(w.a,{className:"appBar"},r.a.createElement(F.a,null,r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:this.closeForm,"aria-label":"close"},r.a.createElement(Vt.a,null)),r.a.createElement(x.a,{variant:"h6",className:"app-title"},"Allocation to Lot"),r.a.createElement(he.a,{color:"inherit",disabled:this.state.disabled,onClick:this.onSave},"save"))),r.a.createElement(_e.a,null,r.a.createElement("div",{className:"form-container"},r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-around",alignItems:"center",md:10,xs:12,sm:12,xl:10,lg:10},r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Hr,{selectedValue:this.state.formData.Factory,propertyName:"Factory",handleChange:this.handleChange,formControl:this.state.formControl.Factory,disabled:void 0!==this.state.formData._id,required:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"SINo",label:"SI #",defaultValue:null===this.state.formData.ShippingInstruction?"":this.state.formData.ShippingInstruction.SINo,margin:"dense",disabled:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:4},margin:"dense"},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Da.a,{required:!0,format:"dd-MMM-yyyy",label:"Date",value:this.state.formData.LotDate,onChange:function(t){return e.handleChange(t,"LotDate",!0)},disableFuture:!0}))),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"LotNumber",label:"Lot Number",defaultValue:this.state.formData.LotNumber,required:!0,onChange:function(t){return e.handleChange(t.target.value,"LotNumber",!0)},margin:"dense",error:!this.state.formControl.LotNumber.valid,helperText:this.state.formControl.LotNumber.message})),r.a.createElement(ya.a,{style:{width:"100%"}},r.a.createElement(Fl,{selectedValue:this.state.formData.ProductGrade,countryId:""===this.state.formData.Factory?"":void 0===this.state.formData.Factory.FctyCountry._id?this.state.formData.Factory.FctyCountry:this.state.formData.Factory.FctyCountry._id,formControl:this.state.formControl.ProductGrade,handleChange:function(t){return e.handleChange(t,"ProductGrade",!0)}})),r.a.createElement(ya.a,{style:{width:"100%"}},r.a.createElement(mu,{selectedValue:this.state.formData.PackingType,formControl:this.state.formControl.PackingType,propertyName:"PackingType",handleChange:function(t){return e.handleChange(t,"PackingType",!0)}})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{id:"LotWeight",label:"Lot Weight (kg)",customInput:ge.a,value:this.state.formData.LotWeight,onValueChange:function(t){return e.handleChange(void 0===t.floatValue?0:t.floatValue,"LotWeight",!0)},onFocus:function(e){e.target.select()},decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0,margin:"dense",error:!this.state.formControl.LotWeight.valid,helperText:this.state.formControl.LotWeight.message})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{id:"AllocatedWeight",label:"Allocated (kg)",customInput:ge.a,value:this.state.AllocatedWeight,decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0,margin:"dense",disabled:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{id:"Balance",label:"Balance (kg)",customInput:ge.a,value:this.state.formData.LotWeight-this.state.AllocatedWeight,decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0,margin:"dense",disabled:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"Remarks",label:"Remarks",defaultValue:this.state.formData.Remarks,className:"",onChange:function(t){return e.handleChange(t.target.value,"Remarks",!1)},margin:"dense"})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(x.a,{variant:"caption",display:"block",gutterBottom:!0},"SI Allocation",r.a.createElement("span",{style:{color:"red"}},null===this.state.formData.ShippingInstruction||""===this.state.formData.ShippingInstruction?"OPEN":"CLOSE"))),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(x.a,{variant:"caption",display:"block",gutterBottom:!0},"Lot Status :",r.a.createElement("span",{style:{color:"red"}},0===this.state.AllocatedWeight?"Open":this.state.formData.LotWeight===this.state.AllocatedWeight?"Close":"Partial")))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(Ve.a,{style:{width:"100%",margin:4},title:"PALLET ASSIGNMENT",columns:this.state.columns,data:this.state.palletData,options:{search:!1}})))))),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.snackClass,autoHideDuration:600,open:this.state.snackOpen,onClose:this.snackOpen,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.snackMessage)}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return{formOpen:e.formOpen}}}]),t}(r.a.Component),rD=nD,oD=rD,sD=a(23),iD=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).snackOpen=function(e,t){var n;return l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0===e||null===e||void 0===t||null===t){r.next=7;break}return r.next=3,l.a.awrap(ka(e,t));case 3:n=r.sent,a.setState({snackOpen:!a.state.snackOpen,alertMessage:n,alertClass:e}),r.next=8;break;case 7:a.setState({snackOpen:!1});case 8:case"end":return r.stop()}}))},a.dialogOpen=function(e){var t;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,l.a.awrap(ka("confirmation","delete"));case 2:t=n.sent,a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:e,dialogMessage:r.a.createElement("span",null,void 0!==t?t.replace("[Name]",e.LotNumber):"")});case 4:case"end":return n.stop()}}))},a.diaLogClose=function(){a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:null})},a.onDelete=function(){null!==a.state.currentDeleteData&&XC.delete("".concat(a.state.currentDeleteData._id)).then((function(e){if(!0===e.code){var t=Object(je.a)(a.state.data),n=t.indexOf(a.state.currentDeleteData);t.splice(n,1),a.setState({data:t,currentDeleteData:"",dialogOpen:!a.state.dialogOpen},(function(){return a.snackOpen("success","delete")}))}else a.snackOpen("error","server")}))},a.state={columns:[{title:"Factory",field:"Factory",render:function(e){return r.a.createElement("span",null,e.Factory.FctyCode)}},{title:"SI #",render:function(e){return r.a.createElement("span",null,e.ShippingInstruction.SINo)}},{title:"LotDate",render:function(e){return r.a.createElement("span",null,new Date(e.LotDate).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric"}))}},{title:"Lot #",field:"LotNumber"},{title:"Grade",render:function(e){return r.a.createElement("span",null,e.ProductGrade.GradeName)}},{title:"Packing Type",render:function(e){return r.a.createElement("span",null,e.PackingType.PckTypeName)}},{title:"Qty (Kg)",field:"LotWeight",render:function(e){return r.a.createElement(Xa.a,{value:e.LotWeight,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"Balance (Kg)",render:function(e){return r.a.createElement(Xa.a,{value:e.LotWeight-e.SelectedPallets.reduce((function(e,t){return null==t.PalletWeight?e:e+t.PalletWeight}),0),displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"Production #",render:function(e){return r.a.createElement(E.a,null,e.SelectedPallets.map((function(e,t){return r.a.createElement(b.a,{divider:!0,key:e._id},r.a.createElement(S.a,{primary:e.SeqPallet}))})))}},{title:"Export #",render:function(e){return r.a.createElement(E.a,null,e.SelectedPallets.map((function(e,t){return r.a.createElement(b.a,{divider:!0,key:e._id},r.a.createElement(S.a,{primary:e.ExportPallet}))})))}},{title:"Remarks",field:"Remarks"},{title:"Allocated",field:"LotStatus"},{title:"Operator",field:"LastUpdatedBy"},{title:"Last Updated",field:"LastUpdatedAt",render:function(e){return r.a.createElement("span",null,new Date(e.LastUpdatedAt).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}))}}],data:[],formData:null,currentDeleteData:null,formOpen:!1,formAction:"",dialogOpen:!1,snackOpen:!1,alertMessage:"",dialogMessage:"",alertClass:""},a.lotModel=sD(eD),a.onSuccess=a.onSuccess.bind(Object(Pe.a)(a)),a.closeForm=a.closeForm.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initLot()}},{key:"initLot",value:function(){var e=this;XC.get("").then((function(t){!0===t.code&&e.setState({data:t.data})}))}},{key:"openForm",value:function(e){var t,a=sD(e);void 0===e||null===e?(a=sD(this.lotModel),t="Add"):t="update",this.setState({formData:a,formOpen:!this.state.formOpen,formAction:t})}},{key:"closeForm",value:function(){this.setState({formData:null,formOpen:!1,formAction:""})}},{key:"onSuccess",value:function(e){var t=this,a=Object(je.a)(this.state.data);if(void 0!==e&&null!==e)if("Add"===this.state.formAction)a.push(e),this.setState({data:a,formOpen:!this.state.formOpen,formAction:"",currentRowData:null},(function(){return t.snackOpen("success","add")}));else{var n=a.find((function(e){return e._id===t.state.formData._id})),r=a.indexOf(n);a[r]=e,this.setState({data:a,formOpen:!this.state.formOpen,formAction:"",currentRowData:null},(function(){return t.snackOpen("success","update")}))}else this.snackOpen("error","server")}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{container:!0,direction:"column",justify:"center",wrap:"wrap",style:{margin:"20px 20px 10px 0px"}},r.a.createElement(be.a,{item:!0,xs:12},r.a.createElement(Ve.a,{title:"Allocation to Lot",columns:this.state.columns,data:this.state.data,components:{Toolbar:function(t){return r.a.createElement("div",null,r.a.createElement(Le.MTableToolbar,t),r.a.createElement("div",{style:{padding:"0px 15px"}},r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:function(){return e.openForm()},"aria-label":"add"},r.a.createElement(wt.a,null))))}},actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.data,columns:e.state.columns,fileName:"Allocation To Lot"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.initLot()}},{icon:"edit",tooltip:"Edit",onClick:function(t,a){return e.openForm(a)}},{icon:"delete",tooltip:"Delete",onClick:function(t,a){return e.dialogOpen(a)}}]})),r.a.createElement(be.a,{item:!0,xs:12},this.state.formOpen?r.a.createElement(oD,{formAction:this.state.formAction,formData:this.state.formData,formOpen:this.state.formOpen,onSuccess:this.onSuccess,closeForm:this.closeForm}):""),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:600,open:this.state.snackOpen,onClose:this.snackOpen,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.diaLogClose,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.diaLogClose,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDelete,color:"primary"},"Delete"))))}}]),t}(r.a.Component),lD=iD,cD=lD,uD=(a(962),a(963),a(23)),dD={SIStatus:{valid:!0,message:""},AllocationStatus:{valid:!0,message:""},ShipStatus:{valid:!0,message:""},SIDate:{valid:!0,message:""},LoadType:{valid:!0,message:""},Assignments:{value:!0,message:""}},mD=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).closeForm=function(){a.setState({formControl:uD(dD)},(function(){return a.props.closeForm()}))},a.snackOpen=function(e,t,n){var r;return l.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(void 0===e||null===e||void 0===t||null===t){o.next=11;break}if(void 0!==n){o.next=7;break}return o.next=4,l.a.awrap(ka(e,t));case 4:r=o.sent,o.next=8;break;case 7:r=n;case 8:a.setState({snackOpen:!a.state.snackOpen,snackMessage:r,snackClass:e}),o.next=12;break;case 11:a.setState({snackOpen:!1});case 12:case"end":return o.stop()}}))},a.dialogOpen=function(e){var t;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(void 0===e||null===e){n.next=7;break}return n.next=3,l.a.awrap(ka("confirmation","delete"));case 3:t=n.sent,a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:e,dialogMessage:r.a.createElement("span",null,void 0!==t?t.replace("[Name]",e.Grade.GradeName):"")}),n.next=8;break;case 7:a.setState({dialogOpen:!1});case 8:case"end":return n.stop()}}))},a.onSave=function(){var e=Object(me.a)({},a.state.formData),t=Object(me.a)({},a.state.formControl);a.state.AllocatedWeight>e.Weight?a.snackOpen("error","","You load over the Expected Qty!"):0!==a.state.AllocatedWeight?(e.SIStatus=a.state.AllocatedWeight===e.Weight?"CLOSE":"OPEN",e.Assignments=a.state.Assignments,ci.updateForAllocation("",e).then((function(n){if(!0===n.code){var r=n.data;r.Assignments=e.Assignments,a.props.onSuccess(r)}else null!==n.errors&&Array.isArray(n.errors)?(n.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t})):a.snackOpen("error","server")}))):a.snackOpen("error","","Ship Status can't be closed when there is nothing loaded!")},a.state={formData:a.props.formData,formOpen:a.props.formOpen,formControl:uD(dD),Assignments:a.props.formData.Assignments,AllocatedWeight:"Lot"===a.props.formData.LoadType?a.props.formData.Assignments.reduce((function(e,t){return e+t.LotWeight}),0):a.props.formData.Assignments.reduce((function(e,t){return e+t.PalletWeight}),0),currentDeleteData:null,selectedRecord:null,disabled:!1,dialogOpen:!1,dialogMessage:"",snackOpen:!1,snackMessage:"",snackClass:"",assignmentData:[]},a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a.fetchAssignmentData=a.fetchAssignmentData.bind(Object(Pe.a)(a)),a.selectAssignment=a.selectAssignment.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){""!==this.props.formData.Factory&&""!==this.props.formData.ProductGrade&&""!==this.props.formData.PackingType&&this.fetchAssignmentData(this.props.formData.LoadType,this.props.formData.Factory._id,this.props.formData.ProductGrade._id,this.props.formData.PackingType._id)}},{key:"initFormControl",value:function(){this.setState({formControl:uD(dD)})}},{key:"fetchAssignmentData",value:function(e,t,a,n){var r,o,s=this;return l.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return r=Object(me.a)({},this.state.formData),o="Lot"===e?"getLotForAllocationData/?Factory=".concat(t,"&ProductGrade=").concat(a,"&PackingType=").concat(n,"&SI=").concat(r._id):"getPalletForAllocationData/?Factory=".concat(t,"&ProductGrade=").concat(a,"&PackingType=").concat(n,"&SI=").concat(r._id),i.next=4,l.a.awrap(Do(o).then((function(e){if(!0===e.code){var t=e.data,a=t.filter((function(e){return!0===e.selected}));s.setState({assignmentData:t,Assignments:a})}})));case 4:case"end":return i.stop()}}),null,this)}},{key:"handleChange",value:function(e,t,a){var n,r;return l.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(n=Object(me.a)({},this.state.formData),r=Object(me.a)({},this.state.formControl),!a){o.next=14;break}if(void 0!==e&&""!==e){o.next=12;break}return r[t].valid=!1,o.t0=t,o.next=8,l.a.awrap(ka("validation","empty"));case 8:o.t1=o.sent,r[t].message=o.t0+o.t1,o.next=14;break;case 12:r[t].valid=!0,r[t].message="";case 14:if(n[t]=e,this.setState({formData:n}),"LoadType"!==t){o.next=23;break}if(""===n.Factory||""===n.ProductGrade||""===n.PackingType){o.next=22;break}return o.next=20,l.a.awrap(this.fetchAssignmentData(e,n.Factory._id,n.ProductGrade._id,n.PackingType._id));case 20:o.next=23;break;case 22:this.setState({assignmentData:[]});case 23:case"end":return o.stop()}}),null,this)}},{key:"selectAssignment",value:function(e,t){var a=Object(je.a)(this.state.Assignments),n=Object(je.a)(this.state.assignmentData),r=this.state.AllocatedWeight;if(e)t.selected=!0,a.push(t),r+="Lot"===this.state.formData.LoadType?t.LotWeight:t.PalletWeight;else{t.selected=!1;var o=a.indexOf(t);a.splice(o,1),r-="Lot"===this.state.formData.LoadType?t.LotWeight:t.PalletWeight}var s=n.findIndex((function(e){return e._id===t._id}));n[s]=t,this.setState({AllocatedWeight:r,Assignments:a,assignmentData:n})}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{container:!0},r.a.createElement(Ae.a,{fullScreen:!0,open:this.state.formOpen,onClose:this.closeForm,TransitionComponent:this.Transition},r.a.createElement(w.a,{className:"appBar"},r.a.createElement(F.a,null,r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:this.closeForm,"aria-label":"close"},r.a.createElement(Vt.a,null)),r.a.createElement(x.a,{variant:"h6",className:"app-title"},"Allocation to SI"),r.a.createElement(he.a,{color:"inherit",disabled:this.state.disabled,onClick:this.onSave},"save"))),r.a.createElement(_e.a,null,r.a.createElement("div",{className:"form-container"},r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-around",alignItems:"center",md:10,xs:12,sm:12,xl:10,lg:10},r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"Factory",label:"Factory",defaultValue:null===this.state.formData.Factory?"":this.state.formData.Factory.FctyCode,margin:"dense",inputProps:{readonly:!0}})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"SINo",label:"SI #",defaultValue:null===this.state.formData?"":this.state.formData.SINo,margin:"dense",disabled:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:4},margin:"dense"},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Da.a,{required:!0,format:"dd-MMM-yyyy",label:"Date",value:this.state.formData.Date,readOnly:!0}))),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"Contract",label:"LotNumber",defaultValue:this.state.formData.Contract,margin:"dense",disabled:!0})),r.a.createElement(ya.a,{style:{width:"100%"}},r.a.createElement(ge.a,{id:"PackingType",label:"Packing Type",defaultValue:this.state.formData.PackingType.PckTypeName,margin:"dense",disabled:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{id:"Weight",label:"SI Qty (kg)",customInput:ge.a,value:this.state.formData.Weight,decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0,margin:"dense",disabled:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{id:"AllocatedWeight",label:"Allocated (kg)",customInput:ge.a,value:this.state.AllocatedWeight,decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0,margin:"dense",disabled:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{id:"Balance",label:"Balance (kg)",customInput:ge.a,value:this.state.formData.Weight-this.state.AllocatedWeight,decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0,margin:"dense",disabled:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ga.a,{component:"label"},"SI Status :",r.a.createElement("b",{style:{color:"red"}},this.state.formData.AllocationStatus))),r.a.createElement(ya.a,{style:{width:"100%",margin:4},margin:"dense"},r.a.createElement(ga.a,{component:"label"},"SI Allocation :",r.a.createElement("b",{style:{color:"red"}},this.state.formData.Weight<=this.state.AllocatedWeight?"CLOSE":"OPEN"))),r.a.createElement(ya.a,{style:{width:"100%",margin:4},margin:"dense"},r.a.createElement(ga.a,{component:"label"},"Ship Status"),r.a.createElement(Xe.a,{checked:this.state.formData.ShipStatus,value:this.state.formData.ShipStatus,color:"primary",inputProps:{"aria-label":"primary checkbox"},onChange:function(t){return e.handleChange(t.target.checked,"ShipStatus")},disabled:this.state.formData.Weight>this.state.AllocatedWeight})),r.a.createElement(ya.a,{style:{width:"100%",margin:4},margin:"dense"},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Da.a,{format:"dd-MMM-yyyy",label:"Ship Date",value:this.state.formData.ShipDate,onChange:function(t){return e.handleChange(t,"ShipDate")},disabled:this.state.formData.Weight>this.state.AllocatedWeight}))),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ga.a,{component:"legend"},"Production Group"),r.a.createElement(io.a,{"aria-label":"position",name:"position",value:this.state.formData.LoadType,onChange:function(t){return e.handleChange(t.target.value,"LoadType")},row:!0},r.a.createElement(ye.a,{value:"Lot",control:r.a.createElement(lo.a,{color:"primary"}),label:"Lot",labelPlacement:"end"}),r.a.createElement(ye.a,{value:"Pallet",control:r.a.createElement(lo.a,{color:"primary"}),label:"Pallet",labelPlacement:"end"})))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(Ve.a,{style:{width:"100%",margin:4},title:"LOT/PALLET ASSIGNMENT",columns:[{title:"Production No.",field:"SeqPallet",hidden:"Lot"===this.state.formData.LoadType},{title:"Export Pallet No.",field:"ExportPallet",hidden:"Lot"===this.state.formData.LoadType},{title:"Date",field:"ProductionDate",render:function(e){return r.a.createElement("span",null,new Date(e.ProductionDate).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric"}))},hidden:"Lot"===this.state.formData.LoadType},{title:"Qty (kg)",field:"PalletWeight",hidden:"Lot"===this.state.formData.LoadType},{title:"Pallet Status",field:"PalletStatus",hidden:"Lot"===this.state.formData.LoadType},{title:"Lot #",field:"LotNumber",hidden:"Lot"!==this.state.formData.LoadType},{title:"Date",field:"LotDate",render:function(e){return r.a.createElement("span",null,new Date(e.LotDate).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric"}))},hidden:"Lot"!==this.state.formData.LoadType},{title:"Qty (kg)",field:"LotWeight",hidden:"Lot"!==this.state.formData.LoadType},{title:"Selected",render:function(t){return r.a.createElement(ve.a,{checked:void 0!==t.selected&&t.selected,onChange:function(a){return e.selectAssignment(a.target.checked,t)},color:"primary"})}}],data:this.state.assignmentData,options:{search:!1}})))))),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.snackClass,autoHideDuration:600,open:this.state.snackOpen,onClose:this.snackOpen,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.snackMessage)}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return{formOpen:e.formOpen}}}]),t}(r.a.Component),pD=mD,fD=pD,hD=a(23),gD=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).snackOpen=function(e,t){var n;return l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0===e||null===e||void 0===t||null===t){r.next=7;break}return r.next=3,l.a.awrap(ka(e,t));case 3:n=r.sent,a.setState({snackOpen:!a.state.snackOpen,alertMessage:n,alertClass:e}),r.next=8;break;case 7:a.setState({snackOpen:!1});case 8:case"end":return r.stop()}}))},a.state={columns:[{title:"Factory",field:"Factory",render:function(e){return r.a.createElement("span",null,e.Factory.FctyCode)}},{title:"SI Date",render:function(e){return r.a.createElement("span",null,new Date(e.Date).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric"}))}},{title:"Contract #",render:function(e){return r.a.createElement("span",null,e.Contract)}},{title:"SI #",render:function(e){return r.a.createElement("span",null,e.SINo)}},{title:"Packing Type #",field:"PackingType",render:function(e){return r.a.createElement("span",null,e.PackingType.PckTypeName)}},{title:"SI Qty(Kg)",render:function(e){return r.a.createElement(Xa.a,{value:e.Weight,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"Qty Balance(Kg)",render:function(e){return r.a.createElement(Xa.a,{value:e.Weight-("Lot"===e.LoadType?e.Assignments.reduce((function(e,t){return e+t.LotWeight}),0):e.Assignments.reduce((function(e,t){return e+t.PalletWeight}),0)),displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"SI Status",field:"SIStatus"},{title:"Shipped",field:"ShipStatus",render:function(e){return r.a.createElement("span",null,e.ShipStatus?"Yes":"No")}},{title:"Operator",field:"LastUpdatedBy"},{title:"Last Updated",field:"LastUpdatedAt",render:function(e){return r.a.createElement("span",null,new Date(e.LastUpdatedAt).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}))}}],data:[],formData:null,formOpen:!1,formAction:"",dialogOpen:!1,snackOpen:!1,alertMessage:"",dialogMessage:"",alertClass:""},a.lotModel=hD(eD),a.onSuccess=a.onSuccess.bind(Object(Pe.a)(a)),a.closeForm=a.closeForm.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initSIAllocation()}},{key:"initSIAllocation",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.awrap(ci.getForAllocation("").then((function(t){!0===t.code&&e.setState({data:t.data})})));case 2:case"end":return t.stop()}}))}},{key:"openForm",value:function(e){var t,a=hD(e);void 0===e||null===e?(a=hD(this.lotModel),t="Add"):t="update",this.setState({formData:a,formOpen:!this.state.formOpen,formAction:t})}},{key:"closeForm",value:function(){this.setState({formData:null,formOpen:!1,formAction:""})}},{key:"onSuccess",value:function(e){var t=this,a=Object(je.a)(this.state.data);if(void 0!==e&&null!==e)if("Add"===this.state.formAction)a.push(e),this.setState({data:a,formOpen:!this.state.formOpen,formAction:"",currentRowData:null},(function(){return t.snackOpen("success","add")}));else{var n=a.find((function(e){return e._id===t.state.formData._id})),r=a.indexOf(n);a[r]=e,this.setState({data:a,formOpen:!this.state.formOpen,formAction:"",currentRowData:null},(function(){return t.snackOpen("success","update")}))}else this.snackOpen("error","server")}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{container:!0,direction:"column",justify:"center",wrap:"wrap",style:{margin:"20px 20px 10px 0px"}},r.a.createElement(be.a,{item:!0,xs:12},r.a.createElement(Ve.a,{title:"Allocation to SI",columns:this.state.columns,data:this.state.data,components:{Toolbar:function(e){return r.a.createElement("div",null,r.a.createElement(Le.MTableToolbar,e))}},actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.data,columns:e.state.columns,fileName:"Allocation To SI"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.initSIAllocation()}},{icon:"edit",tooltip:"Edit",onClick:function(t,a){return e.openForm(a)}}]})),r.a.createElement(be.a,{item:!0,xs:12},this.state.formOpen?r.a.createElement(fD,{formAction:this.state.formAction,formData:this.state.formData,formOpen:this.state.formOpen,onSuccess:this.onSuccess,closeForm:this.closeForm}):""),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:600,open:this.state.snackOpen,onClose:this.snackOpen,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}))}}]),t}(r.a.Component),yD=gD,vD=yD,CD=(a(964),{add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="TestResultUpload/"+e,n.abrupt("return",He(a,t).then((function(e){return 200===e.status&&"Succeed"===e.data.message&&0===e.data.failedData.length?{code:!0,formValid:!0,message:"Successfully Import",errors:null,data:e.data.data,failedData:e.data.failedData}:{code:!1,formValid:!0,message:e.data.message,failedData:e.data.failedData,errors:e.data.errors,data:null}})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))}}),DD=CD,ED=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).snackOpen=function(e,t){var n;return l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0===e||null===e||void 0===t||null===t){r.next=7;break}return r.next=3,l.a.awrap(ka(e,t));case 3:n=r.sent,a.setState({snackOpen:!a.state.snackOpen,alertMessage:n,alertClass:e}),r.next=8;break;case 7:a.setState({snackOpen:!1});case 8:case"end":return r.stop()}}))},a.onCancel=function(){a.setState({uploadExcelData:[],uploadExcelColumn:[],file:{}})},a.onImport=function(){if(Array.isArray(a.state.uploadExcelData)&&a.state.uploadExcelData.length>0){var e=Object(je.a)(a.state.uploadExcelData);e.forEach((function(e){return delete e.FailedReason})),DD.add("",{factory:a.state.selectedFactory,importData:e}).then((function(e){if(!0===e.code)a.setState({uploadExcelData:[],uploadExcelColumn:[],file:{}},(function(){return a.snackOpen("success","add")}));else if(void 0!==e.failedData&&Array.isArray(e.failedData)&&e.failedData.length>0){var t=a.state.uploadExcelColumn;0===t.filter((function(e){return"FailedReason"===e.Key})).length&&t.push({DisplayName:"FailedReason",Key:"FailedReason"}),a.setState({uploadExcelData:e.failedData,uploadExcelColumn:t},(function(){return console.log(a.state)}))}else a.snackOpen("error","server")}))}},a.state={selectedFactory:"",remarks:"",disabledUpload:!0,disabledImport:!0,uploadExcelColumn:[],uploadExcelData:[],file:{}},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"handelChange",value:function(e,t){"Factory"!==t||void 0!==e&&""!==e?"Factory"===t&&void 0!==e&&""!==e&&this.setState({selectedFactory:e,disabledUpload:!1,disabledImport:!1}):this.setState({selectedFactory:e,disabledUpload:!0,disabledImport:!0})}},{key:"onDownloadTemplate",value:function(){var e=this;Eo("TestResult.xlsx").then((function(t){!0===t.code?Co(t.data,"TestResult.xlsx"):e.snackOpen("error","server")}))}},{key:"postFile",value:function(e){var t=this,a=new FormData;a.append("file",e),Ke("Common/XlSToJson/",a).then((function(e){if(200===e.status&&null===e.data.errors){var a=[],n=[],r=e.data.data;if(Array.isArray(r)&&r.length>0){Object.keys(r[0]).map((function(e){var t=e.trim();if(""!==t&&-1===t.indexOf("_EMPTY")){var n={};n.DisplayName=t.replace("_"," "),n.Key=t,a.push(n)}}));var o=!0,s=!1,i=void 0;try{for(var l,c=function(){var e=l.value,t={};Object.keys(r[0]).map((function(a){var n=a.trim();""!==n&&-1===n.indexOf("_EMPTY")&&(-1===a.indexOf("Date")||Number.isNaN(e[a])?t[a]=e[a]:t[a]=new Date(0,0,e[a]).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric"}))})),n.push(t)},u=r[Symbol.iterator]();!(o=(l=u.next()).done);o=!0)c()}catch(d){s=!0,i=d}finally{try{o||null==u.return||u.return()}finally{if(s)throw i}}}t.setState({uploadExcelColumn:a,uploadExcelData:n})}}))}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",wrap:"wrap",spacing:3,style:{marginTop:3}},r.a.createElement(be.a,{item:!0,xs:12},r.a.createElement(x.a,{variant:"overline",display:"block",gutterBottom:!0},"Test Result Upload")),r.a.createElement(be.a,{item:!0,xs:12,sm:12,md:8,lg:8},r.a.createElement(Hr,{selectedValue:this.state.selectedFactory,propertyName:"Factory",handleChange:function(t){return e.handelChange(t,"Factory")},required:!1})),r.a.createElement(be.a,{item:!0,xs:6,sm:6,md:2,lg:2},r.a.createElement(he.a,{variant:"outlined",color:"secondary",onClick:this.onDownloadTemplate},"Download Template")),r.a.createElement(be.a,{item:!0,xs:6,sm:6,md:2,lg:2}),r.a.createElement(be.a,{item:!0,xs:6,sm:6,md:2,lg:2},r.a.createElement("div",null,r.a.createElement("input",{accept:"pdf",className:"",id:"excelupload",color:"primary",type:"file",style:{display:"none"},onChange:function(t){e.postFile(t.target.files[0]),t.target.value=null},disabled:this.state.disabledUpload}),r.a.createElement("label",{htmlFor:"excelupload"},r.a.createElement(fo.a,{size:"small",color:"primary",component:"span","aria-label":"add",disabled:this.state.disabledUpload,className:""},r.a.createElement(wt.a,null))),r.a.createElement("label",null,this.state.file.name))),r.a.createElement(be.a,{item:!0,xs:12},r.a.createElement(bn,{label:"Uploaded Data",style:{maxWidth:"90%"}},r.a.createElement(Ls,{columns:this.state.uploadExcelColumn,row:this.state.uploadExcelData,order:"asc",orderBy:"Date",rowsPerPage:25}))),r.a.createElement(be.a,{item:!0,xs:4,md:1},r.a.createElement(he.a,{htmlFor:"upload_excel",variant:"contained",color:"primary",disabled:this.state.disabledImport,onClick:this.onImport},"Import")),r.a.createElement(be.a,{item:!0,xs:4,md:1},r.a.createElement(he.a,{variant:"contained",color:"secondary",onClick:this.onCancel},"Cancel")),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:600,open:this.state.snackOpen,onClose:this.snackOpen,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}))}}]),t}(r.a.Component),bD=ED,SD=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={formControls:{Code:{valid:!0,message:"",value:a.props.formData.Code},Name:{valid:!0,message:"",value:a.props.formData.Name},Description:{valid:!0,message:"",value:a.props.formData.Description},Inactive:{valid:!0,message:"",value:a.props.formData.Inactive}},formState:{valid:!0,dirty:!1,errors:[]},Details:[]},a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"handleChange",value:function(e,t){var a=this.state.formControls,n=this.state.formState;void 0===e||0===e.length?(a[t].valid=!1,"Name"===t&&(a[t].message="Activities name cannot be empty."),"Code"===t&&(a[t].message="Activities code cannot be empty.")):(a[t].valid=!0,a[t].message=""),this.props.handleChange(e,t),a[t].value=e,n.dirty=!0,this.setState({formControls:a,formState:n})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"form-container"},r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-evenly",alignItems:"center",md:6,xs:12,sm:12,xl:8,lg:8},r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(ge.a,{id:"Code",label:"Activities Code",required:!0,error:!this.state.formControls.Code.valid,helperText:this.state.formControls.Code.message,defaultValue:this.state.formControls.Code.value,onChange:function(t){return e.handleChange(t.target.value.trim(),"Code")},multiline:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(ge.a,{id:"Activities",label:"Activities",required:!0,error:!this.state.formControls.Name.valid,helperText:this.state.formControls.Name.message,defaultValue:this.state.formControls.Name.value,onChange:function(t){return e.handleChange(t.target.value.trim(),"Name")},multiline:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(ge.a,{id:"Description",label:"Description",defaultValue:this.state.formControls.Description.value,onChange:function(t){return e.handleChange(t.target.value,"Description")},multiline:!0})),r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(ga.a,{component:"label"},"Inactive"),r.a.createElement(Xe.a,{checked:this.state.formControls.Inactive.value,value:this.state.formControls.Inactive.value,color:"primary",inputProps:{"aria-label":"primary checkbox"},onChange:function(t){return e.handleChange(t.target.checked,"Inactive")}}))),r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-evenly",alignItems:"center",sm:12}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=t.formControls;return e.formState.valid||Array.isArray(e.formState.errors)&&e.formState.errors.map((function(e){a[e.property].valid=!1,a[e.property].message=e.message})),{formState:e.formState,formControls:a}}}]),t}(r.a.Component),OD=SD,kD={Code:"",Name:"",Description:"",Inactive:!1,CreatedAt:new Date,CreatedBy:"Admin",LastUpdatedAt:new Date,LastUpdatedBy:"Admin"},wD=(Object(n.forwardRef)((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),r.a.forwardRef((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).openDialog=function(e){a.setState({dialogOpen:!0,currentDeleteData:e,dialogMessage:r.a.createElement("span",null,"Are you sure to delete ",r.a.createElement("b",null,e.Code," "),"? This cannot be undone.")})},a.closeDialog=function(){a.setState({dialogOpen:!1,currentDeleteData:null,dialogMessage:""})},a.openForm=function(e){void 0===e?a.setState({actionStatus:"Add",newData:Object(me.a)({},kD)}):a.setState({actionStatus:"Update",newData:Object(me.a)({},e)}),a.setState({formOpen:!0,formState:{valid:!0,dirty:!1,errors:[]}})},a.closeForm=function(){a.setState({formOpen:!1,newData:{},actionStatus:""})},a.onSave=function(){var e=a.state.formState,t=Object(me.a)({},a.state.newData),n=Sr.validateFields(t);if(n.valid){var r=Object(je.a)(a.state.data);"Add"===a.state.actionStatus?(t.LastUpdatedBy=a.state.operator,t.CreatedBy=a.state.operator,Sr.add("",t).then((function(t){!0===t.code?(e.valid=!0,r.push(t.data),a.setState({data:r}),a.closeForm(),a.snackOpen("Maintenance Activity data created successfully!","success")):(e.valid=!1,e.errors=t.errors,a.snackOpen("Please fix the error(s) highlighted to save the details!","error"))})).catch((function(e){a.snackOpen("Oops, something went wrong while processing your request!","error")}))):(t.LastUpdatedBy=a.state.operator,Sr.update("",t).then((function(n){if(!0===n.code){e.valid=!0;var o=r.find((function(e){return e._id===t._id})),s=r.indexOf(o);r[s]=n.data,a.setState({data:r}),a.closeForm(),a.snackOpen("Maintenance Activity data updated successfully!","success")}else e.valid=!1,e.errors=n.errors,a.snackOpen("Please fix the error(s) highlighted to save the details!","error")})).catch((function(e){a.snackOpen("Oops, something went wrong while processing your request!","error")})))}else{e.valid=!1;var o=n.errors.map((function(e){var t={};return t.property=e.property,t.message=e.message,t}));console.log(o),e.errors=o,void 0!==o.find((function(e){return"Details"===e.property}))?a.snackOpen(o.find((function(e){return"Details"===e.property})).message,"error"):a.snackOpen("Please fix the error(s) highlighted to save the details!","error")}a.setState({formState:e})},a.onDelete=function(){null!==a.state.currentDeleteData&&Sr.delete("".concat(a.state.currentDeleteData._id)).then((function(e){if(!0===e.code){var t=Object(je.a)(a.state.data),n=t.indexOf(a.state.currentDeleteData);t.splice(n,1),a.snackOpen("Successfully Deleted!","success"),a.closeDialog(),a.setState({data:t})}else a.snackOpen("Oops, something went wrong while processing your request!","error")}))},a.onEdit=function(e){a.openForm(e)},a.state={columns:[{title:"Activitiy Code",field:"Code"},{title:"Activitiy",field:"Name"},{title:"Description",field:"Description"},{title:"Inactive",field:"Inactive",render:function(e){return r.a.createElement("span",null,e.Inactive?"Yes":"No")}},{title:"Last Updated",field:"LastUpdatedAt",render:function(e){return r.a.createElement("span",null,void 0===e?"":new Date(e.LastUpdatedAt).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}))}}],data:[],currentDeleteData:null,newData:kD,formOpen:!1,dialogOpen:!1,dialogMessage:"",disabled:!1,actionStatus:"",formState:{valid:!0,dirty:!1,errors:[]},operator:"Admin"},a.openDialog=a.openDialog.bind(Object(Pe.a)(a)),a.closeDialog=a.closeDialog.bind(Object(Pe.a)(a)),a.openForm=a.openForm.bind(Object(Pe.a)(a)),a.closeForm=a.closeForm.bind(Object(Pe.a)(a)),a.snackOpen=a.snackOpen.bind(Object(Pe.a)(a)),a.snackClose=a.snackClose.bind(Object(Pe.a)(a)),a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initMaintenanceActivity()}},{key:"initMaintenanceActivity",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.awrap(Sr.get("").then((function(t){!0===t.code&&e.setState({data:t.data})})));case 2:case"end":return t.stop()}}))}},{key:"handleChange",value:function(e,t){var a=this.state.newData;a[t]=e;var n=this.state.formState;n.valid=!0,this.setState({newData:a,formState:n})}},{key:"snackOpen",value:function(e,t){this.setState({alertOpen:!0,alertMessage:e,alertClass:t})}},{key:"snackClose",value:function(){this.setState({alertOpen:!1,alertMessage:"",alertClass:"",currentDeleteData:null})}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{style:{margin:"20px 20px 10px 0px"}},r.a.createElement(Ve.a,{title:"Maintenance Activity ",columns:this.state.columns,data:this.state.data,components:{Toolbar:function(t){return r.a.createElement("div",null,r.a.createElement(Le.MTableToolbar,t),r.a.createElement("div",{style:{padding:"0px 15px"}},r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:function(){return e.openForm()},"aria-label":"add"},r.a.createElement(wt.a,null))))}},actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.data,columns:e.state.columns,fileName:"Maintenance Activity"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.initMaintenanceActivity()}},{icon:"edit",tooltip:"Edit",onClick:function(t,a){return e.openForm(a)}},{icon:"delete",tooltip:"Delete",onClick:function(t,a){return e.openDialog(a)}}]}),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:6e3,open:this.state.alertOpen,onClose:this.snackClose,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}),r.a.createElement(Ae.a,{fullScreen:!0,open:this.state.formOpen,onClose:this.closeForm,TransitionComponent:this.Transition},r.a.createElement(w.a,{className:"appBar"},r.a.createElement(F.a,null,r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:this.closeForm,"aria-label":"close"},r.a.createElement(Vt.a,null)),r.a.createElement(x.a,{variant:"h6",className:"app-title"},"Maintenance Activity Details"),r.a.createElement(he.a,{color:"inherit",disabled:this.state.disabled,onClick:this.onSave},"save"))),r.a.createElement(_e.a,null,r.a.createElement(OD,{handleChange:this.handleChange,formData:this.state.newData,formState:this.state.formState}))),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.closeDialog,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.closeDialog,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDelete,color:"primary"},"Delete"))))}}]),t}(r.a.Component)),FD=wD,xD={properties:{Factory:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Factory cannot be empty."}},ID:{type:"string",required:!0,allowEmpty:!1,messages:{allowEmpty:"ID cannot be empty."}},Name:{description:"",type:"string",required:!0,allowEmpty:!1,messages:{allowEmpty:"Name cannot be empty.",conform:"Name cannot be empty.",required:"Name cannot be empty."}},TargetTimeWork:{type:["number"]},Job:{type:"string",description:""},CreatedAt:{type:"any",default:new Date},CreatedBy:{type:"string",default:""},LastUpdatedAt:{type:"any",default:new Date},LastUpdatedBy:{type:"string",default:""}}},TD=a(24),ND={validateFields:function(e){return TD.validate(e,xD,{cast:!0})},get:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="maintenancePersonnel/"+e,a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},getFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("maintenancePersonnel-filter/").concat(e),a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},getOne:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("maintenancePersonnel/").concat(e),a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},update:function(e,t){return Qe("maintenancePersonnel/"+e,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Updated",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="maintenancePersonnel/"+e,n.abrupt("return",He(a,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Added",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,formValid:!0,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("maintenancePersonnel/"+e).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))}},jD=ND,PD=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={formControls:{Factory:{valid:!0,message:"",value:void 0===a.props.formData.Factory||""===a.props.formData.Factory?"":a.props.formData.Factory},ID:{valid:!0,message:"",value:a.props.formData.ID},Name:{valid:!0,message:"",value:a.props.formData.Name},Job:{valid:!0,message:"",value:a.props.formData.Job},TargetTimeWork:{valid:!0,message:"",value:a.props.formData.TargetTimeWork},Inactive:{valid:!0,message:"",value:a.props.formData.Inactive}},formState:{valid:!0,dirty:!1,errors:[]},Details:[]},a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"handleChange",value:function(e,t){var a=this.state.formControls,n=this.state.formState;void 0===e||0===e.length?(a[t].valid=!1,a[t].message="".concat(t," cannot be empty.")):(a[t].valid=!0,a[t].message=""),this.props.handleChange(e,t),a[t].value=e,n.dirty=!0,this.setState({formControls:a,formState:n})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"form-container"},r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-evenly",alignItems:"center",md:6,xs:12,sm:12,xl:8,lg:8},r.a.createElement(ya.a,{style:{width:"100%",margin:4},margin:"dense"},r.a.createElement(Hr,{handleChange:this.handleChange,selectedValue:this.state.formControls.Factory.value,formControl:this.state.formControls.Factory,propertyName:"Factory"})),r.a.createElement(ya.a,{style:{width:"100%",margin:4},margin:"dense"},r.a.createElement(ge.a,{id:"ID",label:"ID",required:!0,error:!this.state.formControls.ID.valid,helperText:this.state.formControls.ID.message,defaultValue:this.state.formControls.ID.value,onChange:function(t){return e.handleChange(t.target.value,"ID")},multiline:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:4},margin:"dense"},r.a.createElement(ge.a,{id:"Name",label:"Name",required:!0,error:!this.state.formControls.Name.valid,helperText:this.state.formControls.Name.message,defaultValue:this.state.formControls.Name.value,onChange:function(t){return e.handleChange(t.target.value,"Name")},multiline:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:4},margin:"dense"},r.a.createElement(Xa.a,{customInput:ge.a,label:"Target Time Work (Hour)",defaultValue:this.state.formControls.TargetTimeWork.value,thousandSeparator:!0,decimalScale:2,fixedDecimalScale:!0,onValueChange:function(t){e.handleChange(void 0===t.floatValue?0:t.floatValue,"TargetTimeWork",!0)}})),r.a.createElement(ya.a,{style:{width:"100%",margin:4},margin:"dense"},r.a.createElement(ge.a,{id:"Job",label:"Job",defaultValue:this.state.formControls.Job.value,onChange:function(t){return e.handleChange(t.target.value,"Job")},multiline:!0})),r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(ga.a,{component:"label"},"Inactive"),r.a.createElement(Xe.a,{checked:this.state.formControls.Inactive.value,value:this.state.formControls.Inactive.value,color:"primary",inputProps:{"aria-label":"primary checkbox"},onChange:function(t){return e.handleChange(t.target.checked,"Inactive")}}))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=t.formControls;return e.formState.valid||Array.isArray(e.formState.errors)&&e.formState.errors.map((function(e){a[e.property].valid=!1,a[e.property].message=e.message})),{formState:e.formState,formControls:a}}}]),t}(r.a.Component),AD=PD,MD={Factory:"",ID:"",Name:"",TargetTimeWork:new Date("1990-01-01 00:00"),Job:"",Inactive:!1,CreatedAt:new Date,CreatedBy:"Admin",LastUpdatedAt:new Date,LastUpdatedBy:"Admin"},_D=(Object(n.forwardRef)((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),r.a.forwardRef((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).openDialog=function(e){a.setState({dialogOpen:!0,currentDeleteData:e,dialogMessage:r.a.createElement("span",null,"Are you sure to delete ",r.a.createElement("b",null,e.Name," "),"? This cannot be undone.")})},a.closeDialog=function(){a.setState({dialogOpen:!1,currentDeleteData:null,dialogMessage:""})},a.openForm=function(e){void 0===e?(console.log(e),a.setState({actionStatus:"Add",newData:Object(me.a)({},MD)})):a.setState({actionStatus:"Update",newData:Object(me.a)({},e)}),a.setState({formOpen:!0,formState:{valid:!0,dirty:!1,errors:[]}})},a.closeForm=function(){a.setState({formOpen:!1,newData:{},actionStatus:""})},a.onSave=function(){var e=a.state.formState,t=Object(me.a)({},a.state.newData),n=jD.validateFields(t);if(n.valid){var r=Object(je.a)(a.state.data);"Add"===a.state.actionStatus?(t.LastUpdatedBy=a.state.operator,t.CreatedBy=a.state.operator,jD.add("",t).then((function(t){!0===t.code?(e.valid=!0,r.push(t.data),a.setState({data:r}),a.closeForm(),a.snackOpen("Maintenance Personnel data created successfully!","success")):(e.valid=!1,e.errors=t.errors,a.snackOpen("Please fix the error(s) highlighted to save the details!","error"))})).catch((function(e){a.snackOpen("Oops, something went wrong while processing your request!","error")}))):(t.LastUpdatedBy=a.state.operator,jD.update("",t).then((function(n){if(!0===n.code){e.valid=!0;var o=r.find((function(e){return e._id===t._id})),s=r.indexOf(o);r[s]=n.data,a.setState({data:r}),a.closeForm(),a.snackOpen("Maintenance Personnel data updated successfully!","success")}else e.valid=!1,e.errors=n.errors,console.log(e.errors),a.snackOpen("Please fix the error(s) highlighted to save the details!","error")})).catch((function(e){a.snackOpen("Oops, something went wrong while processing your request!","error")})))}else{e.valid=!1;var o=n.errors.map((function(e){var t={};return t.property=e.property,t.message=e.message,t}));e.errors=o,void 0!==o.find((function(e){return"Details"===e.property}))?a.snackOpen(o.find((function(e){return"Details"===e.property})).message,"error"):a.snackOpen("Please fix the error(s) highlighted to save the details!","error")}a.setState({formState:e})},a.onDelete=function(){null!==a.state.currentDeleteData&&jD.delete("".concat(a.state.currentDeleteData._id)).then((function(e){if(!0===e.code){var t=Object(je.a)(a.state.data),n=t.indexOf(a.state.currentDeleteData);t.splice(n,1),a.snackOpen("Successfully Deleted!","success"),a.closeDialog(),a.setState({data:t})}else a.snackOpen("Oops, something went wrong while processing your request!","error")}))},a.onEdit=function(e){a.openForm(e)},a.state={columns:[{title:"Factory",field:"Factory",render:function(e){return r.a.createElement("span",null,void 0===e.Factory?"":e.Factory.FctyCode)}},{title:"ID",field:"ID"},{title:"Name",field:"Name"},{title:"Target Time Work (Hour)",field:"TargetTimeWork",render:function(e){return r.a.createElement(Xa.a,{value:e.TargetTimeWork,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"Job",field:"Job"},{title:"Inactive",field:"Inactive",render:function(e){return r.a.createElement("span",null,e.Inactive?"Yes":"No")}},{title:"Last Updated",field:"UpdatedAt",render:function(e){return r.a.createElement("span",null,void 0===e?"":new Date(e.UpdatedAt).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}))}}],data:[],currentDeleteData:null,newData:MD,formOpen:!1,dialogOpen:!1,dialogMessage:"",disabled:!1,actionStatus:"",formState:{valid:!0,dirty:!1,errors:[]},operator:"Admin"},a.openDialog=a.openDialog.bind(Object(Pe.a)(a)),a.closeDialog=a.closeDialog.bind(Object(Pe.a)(a)),a.openForm=a.openForm.bind(Object(Pe.a)(a)),a.closeForm=a.closeForm.bind(Object(Pe.a)(a)),a.snackOpen=a.snackOpen.bind(Object(Pe.a)(a)),a.snackClose=a.snackClose.bind(Object(Pe.a)(a)),a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initMaintenancePersonnel()}},{key:"initMaintenancePersonnel",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.awrap(jD.get("").then((function(t){!0===t.code&&e.setState({data:t.data})})));case 2:case"end":return t.stop()}}))}},{key:"handleChange",value:function(e,t){var a=this.state.newData;a[t]=e;var n=this.state.formState;n.valid=!0,this.setState({newData:a,formState:n})}},{key:"snackOpen",value:function(e,t){this.setState({alertOpen:!0,alertMessage:e,alertClass:t})}},{key:"snackClose",value:function(){this.setState({alertOpen:!1,alertMessage:"",alertClass:"",currentDeleteData:null})}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{style:{margin:"20px 20px 10px 0px"}},r.a.createElement(Ve.a,{title:"Maintenance Personnel ",columns:this.state.columns,data:this.state.data,components:{Toolbar:function(t){return r.a.createElement("div",null,r.a.createElement(Le.MTableToolbar,t),r.a.createElement("div",{style:{padding:"0px 15px"}},r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:function(){return e.openForm(t.rowData)},"aria-label":"add"},r.a.createElement(wt.a,null))))}},actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.data,columns:e.state.columns,fileName:"Maintenance Personnel"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.initMaintenancePersonnel()}},{icon:"edit",tooltip:"Edit",onClick:function(t,a){return e.openForm(a)}},{icon:"delete",tooltip:"Delete",onClick:function(t,a){return e.openDialog(a)}}]}),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:6e3,open:this.state.alertOpen,onClose:this.snackClose,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}),r.a.createElement(Ae.a,{fullScreen:!0,open:this.state.formOpen,onClose:this.closeForm,TransitionComponent:this.Transition},r.a.createElement(w.a,{className:"appBar"},r.a.createElement(F.a,null,r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:this.closeForm,"aria-label":"close"},r.a.createElement(Vt.a,null)),r.a.createElement(x.a,{variant:"h6",className:"app-title"},"Maintenance Personnel Details"),r.a.createElement(he.a,{color:"inherit",disabled:this.state.disabled,onClick:this.onSave},"save"))),r.a.createElement(_e.a,null,r.a.createElement(AD,{handleChange:this.handleChange,formData:this.state.newData,formState:this.state.formState}))),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.closeDialog,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.closeDialog,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDelete,color:"primary"},"Delete"))))}}]),t}(r.a.Component)),ID=_D,RD={properties:{Factory:{description:"",type:["string","object"],messages:{conform:"Factory cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},SubFactory:{description:"",type:"boolean"},Supplier:{description:"",type:"boolean"},DRCPersonnel:{description:"",type:"boolean"},DRCPersonnelName:{description:"",type:"String"},DRC:{description:"",type:"boolean"},NetQty:{description:"",type:"boolean"},RLot:{description:"",type:"boolean"},BlanketQty:{description:"",type:"string"},CreatedAt:{type:"any",default:new Date},CreatedBy:{type:"string",default:""},LastUpdatedAt:{type:"any",default:new Date},LastUpdatedBy:{type:"string",default:""}}},LD=a(24),VD={validateFields:function(e){return LD.validate(e,RD,{cast:!0})},get:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="displayConfiguration/"+e,a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},getFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("displayConfiguration-filter/").concat(e),a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},getOne:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("displayConfiguration/").concat(e),a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},update:function(e,t){return Qe("displayConfiguration/"+e,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Updated",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="displayConfiguration/"+e,n.abrupt("return",He(a,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Added",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,formValid:!0,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("displayConfiguration/"+e).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))}},BD=VD,UD=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={formControls:{Factory:{valid:!0,message:"",value:a.props.formData.Factory},SubFactory:{valid:!0,message:"",value:a.props.formData.SubFactory},Supplier:{valid:!0,message:"",value:a.props.formData.Supplier},DRCPersonnel:{valid:!0,message:"",value:a.props.formData.DRCPersonnel},DRCPersonnelName:{valid:!0,message:"",value:a.props.formData.DRCPersonnelName},DRC:{valid:!0,message:"",value:a.props.formData.DRC},NetQty:{valid:!0,message:"",value:a.props.formData.NetQty},RLot:{valid:!0,message:"",value:a.props.formData.RLot},BlanketQty:{valid:!0,message:""}},formState:{valid:!0,dirty:!1,errors:[]},Details:[]},a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"handleChange",value:function(e,t){var a=this.state.formControls,n=this.state.formState;void 0===e||0===e.length?(a[t].valid=!1,a[t].message="".concat(t," cannot be empty.")):(a[t].valid=!0,a[t].message=""),this.props.handleChange(e,t),a[t].value=e,n.dirty=!0,this.setState({formControls:a,formState:n})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"form-container"},r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-evenly",alignItems:"center",md:6,xs:12,sm:12,xl:8,lg:8},r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(Hr,{handleChange:this.handleChange,selectedValue:this.state.formControls.Factory.value,formControl:this.state.formControls.Factory,propertyName:"Factory"})),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",height:"20%"},margin:"dense"},r.a.createElement(ga.a,{component:"label"},"Factory Line"))),r.a.createElement(be.a,{container:!0,direction:"row",justify:"flex-start",wrap:"wrap",md:12,xs:12,sm:12},r.a.createElement(be.a,{item:!0,md:2,xs:2,sm:2}),r.a.createElement(be.a,{item:!0,md:10,xs:10,sm:10},r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(ga.a,{component:"label"},"SubFactory"),r.a.createElement(Xe.a,{checked:this.state.formControls.SubFactory.value,value:this.state.formControls.SubFactory.value,color:"primary",inputProps:{"aria-label":"primary checkbox"},onChange:function(t){return e.handleChange(t.target.checked,"SubFactory")}})))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(ga.a,{component:"label"},"Raw Material"))),r.a.createElement(be.a,{container:!0,direction:"row",justify:"flex-start",wrap:"wrap",md:12,xs:12,sm:12},r.a.createElement(be.a,{item:!0,md:2,xs:2,sm:2}),r.a.createElement(be.a,{item:!0,md:10,xs:10,sm:10},r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(ga.a,{component:"label"},"Supplier"),r.a.createElement(Xe.a,{checked:this.state.formControls.Supplier.value,value:this.state.formControls.Supplier.value,color:"primary",inputProps:{"aria-label":"primary checkbox"},onChange:function(t){return e.handleChange(t.target.checked,"Supplier")}})))),r.a.createElement(be.a,{container:!0,direction:"row",justify:"flex-start",wrap:"wrap",md:12,xs:12,sm:12},r.a.createElement(be.a,{item:!0,xs:2,sm:2,md:2,lg:2}),r.a.createElement(be.a,{item:!0,xs:4,sm:4,md:4,lg:4},r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(ga.a,{component:"label"},"DRC Personnel"),r.a.createElement(Xe.a,{checked:this.state.formControls.DRCPersonnel.value,value:this.state.formControls.DRCPersonnel.value,color:"primary",inputProps:{"aria-label":"primary checkbox"},onChange:function(t){return e.handleChange(t.target.checked,"DRCPersonnel")}}))),r.a.createElement(be.a,{item:!0,xs:6,sm:6,md:6,lg:6},r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(ge.a,{id:"DRCPersonnelName",label:"DRC Personnel",defaultValue:this.state.formControls.DRCPersonnelName.value,onChange:function(t){return e.handleChange(t.target.value,"DRCPersonnelName",!1)},margin:"dense"})))),r.a.createElement(be.a,{container:!0,direction:"row",justify:"flex-start",wrap:"wrap",md:12,xs:12,sm:12},r.a.createElement(be.a,{item:!0,md:2,xs:2,sm:2}),r.a.createElement(be.a,{item:!0,md:10,xs:10,sm:10},r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(ga.a,{component:"label"},"DRC"),r.a.createElement(Xe.a,{checked:this.state.formControls.DRC.value,value:this.state.formControls.DRC.value,color:"primary",inputProps:{"aria-label":"primary checkbox"},onChange:function(t){return e.handleChange(t.target.checked,"DRC")}})))),r.a.createElement(be.a,{container:!0,direction:"row",justify:"flex-start",wrap:"wrap",md:12,xs:12,sm:12},r.a.createElement(be.a,{item:!0,md:2,xs:2,sm:2}),r.a.createElement(be.a,{item:!0,md:10,xs:10,sm:10},r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(ga.a,{component:"label"},"Net Qty"),r.a.createElement(Xe.a,{checked:this.state.formControls.NetQty.value,value:this.state.formControls.NetQty.value,color:"primary",inputProps:{"aria-label":"primary checkbox"},onChange:function(t){return e.handleChange(t.target.checked,"NetQty")}})))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(ga.a,{component:"label"},"Production"))),r.a.createElement(be.a,{container:!0,direction:"row",justify:"flex-start",wrap:"wrap",md:12,xs:12,sm:12},r.a.createElement(be.a,{item:!0,md:2,xs:2,sm:2}),r.a.createElement(be.a,{item:!0,md:10,xs:10,sm:10},r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(ga.a,{component:"label"},"R.Lot"),r.a.createElement(Xe.a,{checked:this.state.formControls.RLot.value,value:this.state.formControls.RLot.value,color:"primary",inputProps:{"aria-label":"primary checkbox"},onChange:function(t){return e.handleChange(t.target.checked,"RLot")}})))),r.a.createElement(be.a,{item:!0,md:12,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",height:"20%"},margin:"dense"},r.a.createElement(ga.a,{component:"label"},"TS To Dry Process"))),r.a.createElement(be.a,{container:!0,direction:"row",justify:"flex-start",wrap:"wrap",md:12,xs:12,sm:12},r.a.createElement(be.a,{item:!0,md:2,xs:2,sm:2}),r.a.createElement(be.a,{item:!0,md:10,xs:10,sm:10},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"BlanketQty",label:"Blanket Qty",multiline:!0,defaultValue:this.state.formControls.BlanketQty.value,onChange:function(t){return e.handleChange(t.target.value,"BlanketQty",!1)},margin:"dense"}))))),r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-evenly",alignItems:"center",sm:12}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=t.formControls;return e.formState.valid||Array.isArray(e.formState.errors)&&e.formState.errors.map((function(e){a[e.property].valid=!1,a[e.property].message=e.message})),{formState:e.formState,formControls:a}}}]),t}(r.a.Component),qD=UD,GD={Factory:"",SubFactory:!1,Supplier:!1,DRCPersonnel:!1,DRCPersonnelName:"",DRC:!1,NetQty:!1,RLot:!1,BlanketQty:"",CreatedAt:new Date,CreatedBy:"Admin",LastUpdatedAt:new Date,LastUpdatedBy:"Admin"},WD=(Object(n.forwardRef)((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),r.a.forwardRef((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).openDialog=function(e){var t;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,l.a.awrap(ka("confirmation","delete"));case 2:t=n.sent,a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:e,dialogMessage:r.a.createElement("span",null,void 0!==t?t.replace("[Name]","".concat(e.Factory.FctyCode)):"")});case 4:case"end":return n.stop()}}))},a.closeDialog=function(){a.setState({dialogOpen:!1,currentDeleteData:null,dialogMessage:""})},a.openForm=function(e){void 0===e?a.setState({actionStatus:"Add",newData:Object(me.a)({},GD)}):a.setState({actionStatus:"Update",newData:Object(me.a)({},e)}),a.setState({formOpen:!0,formState:{valid:!0,dirty:!1,errors:[]}})},a.closeForm=function(){a.setState({formOpen:!1,newData:{},actionStatus:""})},a.onSave=function(){var e=a.state.formState,t=Object(me.a)({},a.state.newData);console.log(t);var n=BD.validateFields(t);if(n.valid){var r=Object(je.a)(a.state.data);"Add"===a.state.actionStatus?(t.LastUpdatedBy=a.state.operator,t.CreatedBy=a.state.operator,BD.add("",t).then((function(t){!0===t.code?(e.valid=!0,r.push(t.data),a.setState({data:r}),a.closeForm(),a.snackOpen("Display Configuration created successfully!","success")):(e.valid=!1,e.errors=t.errors,a.snackOpen("Please fix the error(s) highlighted to save the details!","error"))})).catch((function(e){a.snackOpen("Oops, something went wrong while processing your request!","error")}))):(t.LastUpdatedBy=a.state.operator,BD.update("",t).then((function(n){if(!0===n.code){e.valid=!0;var o=r.find((function(e){return e._id===t._id})),s=r.indexOf(o);r[s]=n.data,a.setState({data:r}),a.closeForm(),a.snackOpen("Display Configuration updated successfully!","success")}else e.valid=!1,e.errors=n.errors,a.snackOpen("Please fix the error(s) highlighted to save the details!","error")})).catch((function(e){a.snackOpen("Oops, something went wrong while processing your request!","error")})))}else{e.valid=!1;var o=n.errors.map((function(e){var t={};return t.property=e.property,t.message=e.message,t}));console.log(o),e.errors=o,void 0!==o.find((function(e){return"Details"===e.property}))?a.snackOpen(o.find((function(e){return"Details"===e.property})).message,"error"):a.snackOpen("Please fix the error(s) highlighted to save the details!","error")}a.setState({formState:e})},a.onDelete=function(){null!==a.state.currentDeleteData&&BD.delete("".concat(a.state.currentDeleteData._id)).then((function(e){if(!0===e.code){var t=Object(je.a)(a.state.data),n=t.indexOf(a.state.currentDeleteData);t.splice(n,1),a.snackOpen("Successfully Deleted!","success"),a.closeDialog(),a.setState({data:t})}else a.snackOpen("Oops, something went wrong while processing your request!","error")}))},a.onEdit=function(e){a.openForm(e)},a.state={columns:[{title:"Factory",field:"Factory",render:function(e){return r.a.createElement("span",null,e.Factory.FctyCode)}},{title:"SubFactory",field:"SubFactory",render:function(e){return r.a.createElement("span",null,e.SubFactory?"Yes":"No")}},{title:"Supplier",field:"Supplier",render:function(e){return r.a.createElement("span",null,e.Supplier?"Yes":"No")}},{title:"DRC Personnel",field:"DRCPersonnel",render:function(e){return r.a.createElement("span",null,e.DRCPersonnel?"Yes":"No")}},{title:"DRC Personnel Label",field:"DRCPersonnelName"},{title:"DRC",field:"DRC",render:function(e){return r.a.createElement("span",null,e.DRC?"Yes":"No")}},{title:"Net Qty",field:"NetQty",render:function(e){return r.a.createElement("span",null,e.NetQty?"Yes":"No")}},{title:"R.Lot",field:"RLot",render:function(e){return r.a.createElement("span",null,e.RLot?"Yes":"No")}},{title:"Blanket Qty",field:"BlanketQty"},{title:"Last Updated",field:"LastUpdatedAt",render:function(e){return r.a.createElement("span",null,new Date(e.LastUpdatedAt).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}))}}],data:[],currentDeleteData:null,newData:GD,formOpen:!1,dialogOpen:!1,dialogMessage:"",disabled:!1,actionStatus:"",formState:{valid:!0,dirty:!1,errors:[]},operator:"Admin"},a.openDialog=a.openDialog.bind(Object(Pe.a)(a)),a.closeDialog=a.closeDialog.bind(Object(Pe.a)(a)),a.openForm=a.openForm.bind(Object(Pe.a)(a)),a.closeForm=a.closeForm.bind(Object(Pe.a)(a)),a.snackOpen=a.snackOpen.bind(Object(Pe.a)(a)),a.snackClose=a.snackClose.bind(Object(Pe.a)(a)),a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initDisplayConfiguration()}},{key:"initDisplayConfiguration",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.awrap(BD.get("").then((function(t){!0===t.code&&e.setState({data:t.data})})));case 2:case"end":return t.stop()}}))}},{key:"handleChange",value:function(e,t){var a=this.state.newData;a[t]=e;var n=this.state.formState;n.valid=!0,this.setState({newData:a,formState:n})}},{key:"snackOpen",value:function(e,t){this.setState({alertOpen:!0,alertMessage:e,alertClass:t})}},{key:"snackClose",value:function(){this.setState({alertOpen:!1,alertMessage:"",alertClass:"",currentDeleteData:null})}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{style:{margin:"20px 20px 10px 0px"}},r.a.createElement(Ve.a,{title:"Display Configuration",columns:this.state.columns,data:this.state.data,components:{Toolbar:function(t){return r.a.createElement("div",null,r.a.createElement(Le.MTableToolbar,t),r.a.createElement("div",{style:{padding:"0px 15px"}},r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:function(){return e.openForm()},"aria-label":"add"},r.a.createElement(wt.a,null))))}},actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.data,columns:e.state.columns,fileName:"Display Configuration"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.initDisplayConfiguration()}},{icon:"edit",tooltip:"Edit",onClick:function(t,a){return e.openForm(a)}},{icon:"delete",tooltip:"Delete",onClick:function(t,a){return e.openDialog(a)}}],options:{}}),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:6e3,open:this.state.alertOpen,onClose:this.snackClose,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}),r.a.createElement(Ae.a,{fullScreen:!0,open:this.state.formOpen,onClose:this.closeForm,TransitionComponent:this.Transition},r.a.createElement(w.a,{className:"appBar"},r.a.createElement(F.a,null,r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:this.closeForm,"aria-label":"close"},r.a.createElement(Vt.a,null)),r.a.createElement(x.a,{variant:"h6",className:"app-title"},"Display Configuration Details"),r.a.createElement(he.a,{color:"inherit",disabled:this.state.disabled,onClick:this.onSave},"save"))),r.a.createElement(_e.a,null,r.a.createElement(qD,{handleChange:this.handleChange,formData:this.state.newData,formState:this.state.formState}))),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.closeDialog,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.closeDialog,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDelete,color:"primary"},"Delete"))))}}]),t}(r.a.Component)),HD=WD,QD={properties:{Email:{description:"",type:"string",required:!0,allowEmpty:!1,messages:{allowEmpty:"Email cannot be empty.",conform:"Email cannot be empty.",required:"Email cannot be empty."}},Alias:{description:"",type:"string"},OutgoingMailServer:{description:"",type:"string"},OutgoingServerPort:{description:"",type:"any",required:!0,allowEmpty:!1,messages:{allowEmpty:"Outgoing server port cannot be empty.",conform:"Outgoing server port cannot be empty.",required:"Outgoing server port cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},EncryptionType:{description:"",type:"string"},UserName:{description:"",type:"string"},Password:{description:"",type:"string"},CreatedAt:{type:"any",default:new Date},CreatedBy:{type:"string",default:""},LastUpdatedAt:{type:"any",default:new Date},LastUpdatedBy:{type:"string",default:""}}},zD=a(24),YD={validateFields:function(e){return zD.validate(e,QD,{cast:!0})},get:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="emailProtocol/"+e,a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},getFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("emailProtocol-filter/").concat(e),a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},getOne:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("emailProtocol/").concat(e),a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},update:function(e,t){var a="emailProtocol/"+e;return console.log(a),Qe(a,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Updated",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="emailProtocol/"+e,n.abrupt("return",He(a,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Added",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,formValid:!0,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("emailProtocol/"+e).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))}},KD=YD,JD={Email:"",Alilas:"",OutgoingMailServer:"",OutgoingServerPort:new Date,EncryptionType:"",UserName:"",Password:"",CreatedAt:new Date,CreatedBy:"Admin",LastUpdatedAt:new Date,LastUpdatedBy:"Admin"},ZD=a(23),XD={Email:{valid:!0,message:""},Alias:{valid:!0,message:""},OutgoingMailServer:{valid:!0,message:""},OutgoingServerPort:{valid:!0,message:""},EncryptionType:{valid:!0,message:""},UserName:{valid:!0,message:""},Password:{valid:!0,message:""}},$D=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).closeForm=function(){a.setState({formControl:ZD(XD)},(function(){return a.props.closeForm()}))},a.snackOpen=function(e,t){var n;return l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0===e||null===e||void 0===t||null===t){r.next=7;break}return r.next=3,l.a.awrap(ka(e,t));case 3:n=r.sent,a.setState({snackOpen:!a.state.snackOpen,snackMessage:n,snackClass:e}),r.next=8;break;case 7:a.setState({snackOpen:!1});case 8:case"end":return r.stop()}}))},a.onSave=function(){var e=Object(me.a)({},a.state.formData),t=Object(me.a)({},a.state.formControl),n=KD.validateFields(e);n.valid?"Add"===a.props.formAction?KD.add("",e).then((function(e){!0===e.code?a.props.onSuccess(e.data):null!==e.errors&&Array.isArray(e.errors)?(e.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t})):a.snackOpen("error","server")})):KD.update("",e).then((function(e){!0===e.code?a.props.onSuccess(e.data):null!==e.errors&&Array.isArray(e.errors)?(e.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t})):a.snackOpen("error","server")})):(n.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t}),a.snackOpen("error","alertValidation"))},a.state={formData:a.props.formData,formOpen:a.props.formOpen,formControl:ZD(XD),selectedFactory:"",currentDeleteData:null,disabled:!1,dialogMessage:"",snackOpen:!1,snackMessage:"",snackClass:""},a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"initFormControl",value:function(){this.setState({formControl:ZD(XD)})}},{key:"handleChange",value:function(e,t,a){var n;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:n=Object(me.a)({},this.state.formData),Object(me.a)({},this.state.formControl),n[t]=e,this.setState({formData:n});case 4:case"end":return a.stop()}}),null,this)}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{container:!0},r.a.createElement(Ae.a,{fullScreen:!0,open:this.state.formOpen,onClose:this.closeForm,TransitionComponent:this.Transition},r.a.createElement(w.a,{className:"appBar"},r.a.createElement(F.a,null,r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:this.closeForm,"aria-label":"close"},r.a.createElement(Vt.a,null)),r.a.createElement(x.a,{variant:"h6",className:"app-title"},"Email Protocol"),r.a.createElement(he.a,{color:"inherit",disabled:this.state.disabled,onClick:this.onSave},"save"))),r.a.createElement(_e.a,null,r.a.createElement("div",{className:"form-container"},r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-around",alignItems:"center",md:10,xs:12,sm:12,xl:10,lg:10},r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{required:!0,id:"Email",label:"From (Email)",defaultValue:this.state.formData.Email,onChange:function(t){return e.handleChange(t.target.value.trim(),"Email",!0)},margin:"dense",error:!this.state.formControl.Email.valid,helperText:this.state.formControl.Email.message}))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"Alias",label:"From (Alias)",defaultValue:this.state.formData.Alias,onChange:function(t){return e.handleChange(t.target.value,"Alias",!1)},margin:"dense"}))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"OutgoingMailServer",label:"Outgoing Mail Server",defaultValue:this.state.formData.OutgoingMailServer,onChange:function(t){return e.handleChange(t.target.value,"OutgoingMailServer",!1)},margin:"dense"}))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Da.a,{required:!0,format:"dd-MMM-yyyy",label:"Outgoing Server Port",value:this.state.formData.OutgoingServerPort,onChange:function(t){e.handleChange(t,"OutgoingServerPort")},disableFuture:!0})),r.a.createElement(Sa.a,{error:!this.state.formControl.OutgoingServerPort.valid,style:{display:this.state.formControl.OutgoingServerPort.valid?"none":""}},this.state.formControl.OutgoingServerPort.message))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"EncryptionType",label:"Encryption Type",multiline:!0,defaultValue:this.state.formData.EncryptionType,onChange:function(t){return e.handleChange(t.target.value,"EncryptionType",!1)},margin:"dense"}))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"UserName",label:"User Name",defaultValue:this.state.formData.UserName,onChange:function(t){return e.handleChange(t.target.value,"UserName",!1)},margin:"dense"}))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"Password",label:"Password",defaultValue:this.state.formData.Password,onChange:function(t){return e.handleChange(t.target.value,"Password",!1)},margin:"dense"}))))))),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.snackClass,autoHideDuration:600,open:this.state.snackOpen,onClose:this.snackOpen,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.snackMessage)}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return{formOpen:e.formOpen}}}]),t}(r.a.Component),eE=$D,tE=a(23),aE=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).snackOpen=function(e,t){var n;return l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0===e||null===e||void 0===t||null===t){r.next=7;break}return r.next=3,l.a.awrap(ka(e,t));case 3:n=r.sent,a.setState({snackOpen:!a.state.snackOpen,alertMessage:n,alertClass:e}),r.next=8;break;case 7:a.setState({snackOpen:!1});case 8:case"end":return r.stop()}}))},a.dialogOpen=function(e){var t;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,l.a.awrap(ka("confirmation","delete"));case 2:t=n.sent,a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:e,dialogMessage:r.a.createElement("span",null,void 0!==t?t.replace("[Name]",e.Email):"")});case 4:case"end":return n.stop()}}))},a.diaLogClose=function(){a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:null})},a.onDelete=function(){null!==a.state.currentDeleteData&&KD.delete("".concat(a.state.currentDeleteData._id)).then((function(e){if(!0===e.code){var t=Object(je.a)(a.state.data),n=t.indexOf(a.state.currentDeleteData);t.splice(n,1),a.setState({data:t,currentDeleteData:"",dialogOpen:!a.state.dialogOpen},(function(){return a.snackOpen("success","delete")}))}else a.snackOpen("error","server")}))},a.state={columns:[{title:"From (Email)",field:"Email"},{title:"From (Alias)",field:"Alias"},{title:"Outgoing Server Mail (SMTP)",field:"OutgoingServerMail"},{title:"Outgoing Server Port",field:"OutgoingServerPort",render:function(e){return r.a.createElement("span",null,new Date(e.OutgoingServerPort).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric"}))}},{title:"Encryption Type",field:"EncryptionType"},{title:"User Name",field:"UserName"},{title:"Password",field:"Password"},{title:"Operator",field:"LastUpdatedBy"},{title:"Last Updated",field:"LastUpdatedAt",render:function(e){return r.a.createElement("span",null,new Date(e.LastUpdatedAt).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}))}}],data:[],formData:null,currentDeleteData:null,formOpen:!1,formAction:"",dialogOpen:!1,snackOpen:!1,alertMessage:"",dialogMessage:"",alertClass:""},a.emailProtocolModel=tE(JD),a.onSuccess=a.onSuccess.bind(Object(Pe.a)(a)),a.closeForm=a.closeForm.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initEmailProtocol()}},{key:"initEmailProtocol",value:function(){var e=this;KD.get("").then((function(t){!0===t.code&&e.setState({data:t.data})}))}},{key:"openForm",value:function(e){var t,a=e;void 0===a||null===a?(a=this.emailProtocolModel,t="Add"):t="update",this.setState({formData:a,formOpen:!this.state.formOpen,formAction:t})}},{key:"closeForm",value:function(){this.setState({formData:null,formOpen:!1,formAction:""})}},{key:"onSuccess",value:function(e){var t=this,a=Object(je.a)(this.state.data);if(void 0!==e&&null!==e)if("Add"===this.state.formAction)a.push(e),this.setState({data:a,formOpen:!this.state.formOpen,formAction:"",currentRowData:null},(function(){return t.snackOpen("success","add")}));else{var n=a.indexOf(this.state.formData);a[n]=e,this.setState({data:a,formOpen:!this.state.formOpen,formAction:"",currentRowData:null},(function(){return t.snackOpen("success","update")}))}else this.snackOpen("error","server")}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{container:!0,direction:"column",justify:"center",wrap:"wrap",style:{margin:"20px 20px 10px 0px"}},r.a.createElement(be.a,{item:!0,xs:12},r.a.createElement(Ve.a,{title:"Email Protocol",columns:this.state.columns,data:this.state.data,components:{Toolbar:function(t){return r.a.createElement("div",null,r.a.createElement(Le.MTableToolbar,t),r.a.createElement("div",{style:{padding:"0px 15px"}},r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:function(){return e.openForm(t.rowData)},"aria-label":"add"},r.a.createElement(wt.a,null))))}},actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.data,columns:e.state.columns,fileName:"EmailProtocol"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.initEmailProtocol()}},{icon:"edit",tooltip:"Edit",onClick:function(t,a){return e.openForm(a)}},{icon:"delete",tooltip:"Delete",onClick:function(t,a){return e.dialogOpen(a)}}]})),r.a.createElement(be.a,{item:!0,xs:12},this.state.formOpen?r.a.createElement(eE,{formAction:this.state.formAction,formData:this.state.formData,formOpen:this.state.formOpen,onSuccess:this.onSuccess,closeForm:this.closeForm}):""),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:600,open:this.state.snackOpen,onClose:this.snackOpen,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.diaLogClose,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.diaLogClose,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDelete,color:"primary"},"Delete"))))}}]),t}(r.a.Component),nE=aE,rE=(a(965),{properties:{Factory:{type:["string","object"],required:!0,allowEmpty:!1,conform:function(e){return!(0===e||""===e||void 0===e)},messages:{conform:"Factory cannot be empty.",allowEmpty:"Factory cannot be empty."}},StdWeightNo:{description:"",type:"string",required:!0,allowEmpty:!1,messages:{allowEmpty:"Std Weight No cannot be empty.",conform:"Std Weight No cannot be empty.",required:"Std Weight Nor cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},StdWeight:{type:"number",default:0},Tolerance:{type:"number",description:""},Remark:{type:"any",default:""}}}),oE=a(24),sE={validateFields:function(e){return oE.validate(e,rE,{cast:!0})},get:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="stdWeightConfiguration/"+e,console.log(t),a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 3:case"end":return a.stop()}}))},getFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("stdWeightConfiguration-filter/").concat(e),a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},getOne:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("stdWeightConfiguration/").concat(e),a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},update:function(e,t){return Qe("stdWeightConfiguration/"+e,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Updated",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="stdWeightConfiguration/"+e,console.log(a),n.abrupt("return",He(a,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Added",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,formValid:!0,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 3:case"end":return n.stop()}}))},delete:function(e){return ze("stdWeightConfiguration/"+e).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))}},iE=sE,lE={Factory:"",StdWeightNo:"",StdWeight:0,Tolerance:0,Remark:"",CreatedAt:new Date,CreatedBy:"Admin",LastUpdatedAt:new Date,LastUpdatedBy:"Admin"},cE=(a(966),a(23)),uE={Factory:{valid:!0,message:""},StdWeightNo:{valid:!0,message:""},StdWeight:{valid:!0,message:""},Tolerance:{valid:!0,message:""},Remark:{valid:!0,message:""}},dE=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).closeForm=function(){a.setState({formControl:cE(uE)},(function(){return a.props.closeForm()}))},a.onSave=function(){var e=Object(me.a)({},a.state.formData),t=Object(me.a)({},a.state.formControl),n=iE.validateFields(e);n.valid?"Add"===a.props.formAction?iE.add("",e).then((function(e){!0===e.code?a.props.onSuccess(e.data):null!==e.errors&&Array.isArray(e.errors)?(e.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t})):a.snackOpen("error","server")})):iE.update("",e).then((function(e){!0===e.code?a.props.onSuccess(e.data):null!==e.errors&&Array.isArray(e.errors)?(e.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t})):a.snackOpen("error","server")})):(n.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t}),a.snackOpen("error.","alertValidation"))},a.state={formData:a.props.formData,formOpen:a.props.formOpen,formControl:cE(uE),selectedFactory:"",currentDeleteData:null,disabled:!1,dialogMessage:"",snackOpen:!1,snackMessage:"",snackClass:""},a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"initFormControl",value:function(){this.setState({formControl:cE(uE)})}},{key:"resetFormControl",value:function(e,t){var a=Object(me.a)({},this.state.formControl);void 0!==e&&null!==e&&""!==e&&(a[t].valid=!0,a[t].message=""),this.setState({formControl:a})}},{key:"handleChange",value:function(e,t,a){var n,r;return l.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:n=Object(me.a)({},this.state.formData),r=Object(me.a)({},this.state.formControl),a&&(void 0===e||""===e?r[t].valid=!1:(r[t].valid=!0,r[t].message="")),console.log(t),"Factory"===t&&(n.RMGrade=""),n[t]=e,console.log(n),this.setState({formData:n});case 8:case"end":return o.stop()}}),null,this)}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{container:!0},r.a.createElement(Ae.a,{fullScreen:!0,open:this.state.formOpen,onClose:this.closeForm,TransitionComponent:this.Transition},r.a.createElement(w.a,{className:"appBar"},r.a.createElement(F.a,null,r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:this.closeForm,"aria-label":"close"},r.a.createElement(Vt.a,null)),r.a.createElement(x.a,{variant:"h6",className:"app-title"},"Std Weight Configuration"),r.a.createElement(he.a,{color:"inherit",disabled:this.state.disabled,onClick:this.onSave},"save"))),r.a.createElement(_e.a,null,r.a.createElement("div",{className:"form-container"},r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-around",alignItems:"center",md:10,xs:12,sm:12,xl:10,lg:10},r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Hr,{selectedValue:this.state.formData.Factory,propertyName:"Factory",handleChange:this.handleChange,formControl:this.state.formControl.Factory,required:!0}))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{required:!0,id:"StdWeightNo",label:"Std Weight No.",defaultValue:this.state.formData.StdWeightNo,onChange:function(t){return e.handleChange(t.target.value.trim(),"StdWeightNo",!0)},margin:"dense",error:!this.state.formControl.StdWeightNo.valid,helperText:this.state.formControl.StdWeightNo.message}))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{id:"StdWeight",label:"Std Weight (kg)",customInput:ge.a,value:this.state.formData.StdWeight,onValueChange:function(t){return e.handleChange(t.floatValue,"StdWeight",!0)},onFocus:function(e){e.target.select()},decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0,error:!this.state.formControl.StdWeight.valid,helperText:this.state.formControl.StdWeight.message}))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{id:"Tolerance",label:"Tolerance (%)",customInput:ge.a,value:this.state.formData.Tolerance,onValueChange:function(t){return e.handleChange(t.floatValue,"Tolerance",!0)},onFocus:function(e){e.target.select()},decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0,error:!this.state.formControl.Tolerance.valid,helperText:this.state.formControl.Tolerance.message}))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"Remark",label:"Remark",defaultValue:this.state.formData.Remark,onChange:function(t){return e.handleChange(t.target.value,"Remark")},margin:"dense",error:!this.state.formControl.Remark.valid,helperText:this.state.formControl.Remark.message}))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12}))))),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.snackClass,autoHideDuration:600,open:this.state.snackOpen,onClose:this.snackOpen,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.snackMessage)}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return{formOpen:e.formOpen}}}]),t}(r.a.Component),mE=dE,pE=mE,fE=a(23),hE=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).snackOpen=function(e,t){var n;return l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0===e||null===e||void 0===t||null===t){r.next=7;break}return r.next=3,l.a.awrap(ka(e,t));case 3:n=r.sent,a.setState({snackOpen:!a.state.snackOpen,alertMessage:n,alertClass:e}),r.next=8;break;case 7:a.setState({snackOpen:!1});case 8:case"end":return r.stop()}}))},a.dialogOpen=function(e){var t;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,l.a.awrap(ka("confirmation","delete"));case 2:t=n.sent,console.log(e),a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:e,dialogMessage:r.a.createElement("span",null,void 0!==t?t.replace("[Name]",e.LotNumber):"")});case 5:case"end":return n.stop()}}))},a.diaLogClose=function(){a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:null})},a.onDelete=function(){null!==a.state.currentDeleteData&&iE.delete("".concat(a.state.currentDeleteData._id)).then((function(e){if(!0===e.code){var t=Object(je.a)(a.state.data),n=t.indexOf(a.state.currentDeleteData);t.splice(n,1),a.setState({data:t,currentDeleteData:"",dialogOpen:!a.state.dialogOpen},(function(){return a.snackOpen("success","delete")}))}else a.snackOpen("error","server")}))},a.state={columns:[{title:"Factory",field:"Factory",render:function(e){return r.a.createElement("span",null,e.Factory.FctyCode)}},{title:"Std. Weight No*",field:"StdWeightNo",render:function(e){return r.a.createElement("span",null,e.StdWeightNo)}},{title:"Std Weight",field:"StdWeight",render:function(e){return r.a.createElement("span",null,e.StdWeight)}},{title:"Tolerance",field:"Tolerance",render:function(e){return r.a.createElement(Xa.a,{value:e.Tolerance,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"Remark",field:"Remark",render:function(e){return r.a.createElement("span",null,e.Remark)}},{title:"Operator",field:"LastUpdatedBy",editable:"never"},{title:"Last Updated",field:"LastUpdatedAt",render:function(e){return r.a.createElement("span",null,void 0===e?"":new Date(e.LastUpdatedAt).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}))},editable:"never"}],data:[],formData:null,currentDeleteData:null,formOpen:!1,formAction:"",dialogOpen:!1,snackOpen:!1,alertMessage:"",dialogMessage:"",alertClass:""},a.rLotModel=fE(lE),a.onSuccess=a.onSuccess.bind(Object(Pe.a)(a)),a.closeForm=a.closeForm.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initRLot()}},{key:"initRLot",value:function(){var e=this;console.log("List"),iE.get("").then((function(t){!0===t.code&&e.setState({data:t.data})}))}},{key:"openForm",value:function(e){var t,a=e;console.log(e),void 0===a||null===a?(a=this.rLotModel,t="Add"):t="update",this.setState({formData:a,formOpen:!this.state.formOpen,formAction:t})}},{key:"closeForm",value:function(){this.setState({formData:null,formOpen:!1,formAction:""})}},{key:"onSuccess",value:function(e){var t=this,a=Object(je.a)(this.state.data);if(void 0!==e&&null!==e)if("Add"===this.state.formAction)a.push(e),this.setState({data:a,formOpen:!this.state.formOpen,formAction:"",currentRowData:null},(function(){return t.snackOpen("success","add")}));else{var n=a.indexOf(this.state.formData);a[n]=e,this.setState({data:a,formOpen:!this.state.formOpen,formAction:"",currentRowData:null},(function(){return t.snackOpen("success","update")}))}else this.snackOpen("error","server")}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{container:!0,direction:"column",justify:"center",wrap:"wrap",style:{margin:"20px 20px 10px 0px"}},r.a.createElement(be.a,{item:!0,xs:12},r.a.createElement(Ve.a,{title:"Std Weight Configuration",columns:this.state.columns,data:this.state.data,components:{Toolbar:function(t){return r.a.createElement("div",null,r.a.createElement(Le.MTableToolbar,t),r.a.createElement("div",{style:{padding:"0px 15px"}},r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:function(){return e.openForm(t.rowData)},"aria-label":"add"},r.a.createElement(wt.a,null))))}},actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.data,columns:e.state.columns,fileName:"Std Weight Configuration"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.initRLot()}},{icon:"edit",tooltip:"Edit",onClick:function(t,a){return e.openForm(a)}},{icon:"delete",tooltip:"Delete",onClick:function(t,a){return e.dialogOpen(a)}}]})),r.a.createElement(be.a,{item:!0,xs:12},this.state.formOpen?r.a.createElement(pE,{formAction:this.state.formAction,formData:this.state.formData,formOpen:this.state.formOpen,onSuccess:this.onSuccess,closeForm:this.closeForm}):""),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:600,open:this.state.snackOpen,onClose:this.snackOpen,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.diaLogClose,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.diaLogClose,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDelete,color:"primary"},"Delete"))))}}]),t}(r.a.Component),gE=hE,yE=(a(967),{properties:{Factory:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Factory cannot be empty.",conform:"Factory cannot be empty.",required:"Factory cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},Datetime:{description:"",type:"any",required:!0,allowEmpty:!1,messages:{allowEmpty:"Datetime cannot be empty.",conform:"Datetime cannot be empty.",required:"Datetime cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},Shift:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Shift cannot be empty.",conform:"Shift cannot be empty.",required:"Shift cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},SizeConfiguration:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Size Configuration cannot be empty.",conform:"Size Configuration cannot be empty.",required:"Size Configuration cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},Size:{description:"",type:"number"},Checker:{description:"",type:"string",required:!0,allowEmpty:!1,messages:{allowEmpty:"Checker cannot be empty.",conform:"Checker cannot be empty.",required:"Checker cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},Remarks:{description:"",type:"string"},CreatedAt:{type:"any",default:Date.now()},CreatedBy:{type:"string",default:""},LastUpdatedAt:{type:"any",default:Date.now()},LastUpdatedBy:{type:"string",default:""}}}),vE=a(24),CE={validateFields:function(e){return vE.validate(e,yE,{cast:!0})},get:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="sizeCheck/"+e,a.abrupt("return",We(t).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},getFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("sizeCheck-filter/").concat(e),a.abrupt("return",We(t).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},getOne:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("sizeCheck/").concat(e),a.abrupt("return",We(t).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},update:function(e,t){return Qe("sizeCheck/"+e,t).then((function(e){return console.log(e),200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Updated",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="sizeCheck/"+e,n.abrupt("return",He(a,t).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Added",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,formValid:!0,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("sizeCheck/"+e).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))}},DE=CE,EE={Factory:"",Datetime:new Date,Shift:"",SizeConfiguration:"",Size:0,Checker:"",Remarks:""},bE=EE,SE=(a(968),a(969),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={sizeConfigurationData:[]},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){void 0!==this.props.selectedFactory&&""!==this.props.selectedFactory&&this.fetchSizeConfigurationData(this.props.selectedFactory)}},{key:"componentDidUpdate",value:function(e){this.props.selectedFactory!==e.selectedFactory&&void 0!==this.props.selectedFactory&&""!==this.props.selectedFactory&&this.fetchSizeConfigurationData(this.props.selectedFactory)}},{key:"fetchSizeConfigurationData",value:function(e){var t=this;switch(this.props.OutputType){case"Crumb":Sp.getsizeConfigurationFilter("?Factory=".concat(e,"&ProcessOutput.name=Crumb")).then((function(e){t.setState({sizeConfigurationData:e.data})}));break;case"Blanket":Sp.getsizeConfigurationFilter("?Factory=".concat(e,"&ProcessOutput.name=Blanket")).then((function(e){t.setState({sizeConfigurationData:e.data})}))}}},{key:"renderOptions",value:function(){return this.state.sizeConfigurationData.map((function(e,t){return r.a.createElement(et.a,{label:"Select Sub Process",value:e.id,key:e.id,name:e.SubProcessNumber},e.SubProcessNumber)}))}},{key:"handleChange",value:function(e){var t=this.state.sizeConfigurationData.find((function(t){return t.id===e.target.value}));void 0!==t?this.props.handleChange(t,this.props.propertyName,this.props.required):this.props.handleChange("",this.props.propertyName,this.props.required)}},{key:"render",value:function(){var e=this;return r.a.createElement(ya.a,{style:{width:"100%"}},r.a.createElement(Ea.a,{shrink:!0,htmlFor:"SubProcess",required:!0,error:!this.props.formControl.valid},"Sub Process"),r.a.createElement(ba.a,{id:this.props.propertyName,value:void 0===this.props.selectedValue||void 0===this.props.selectedValue.id?"":this.props.selectedValue.id,style:{minWidth:140},error:!this.props.formControl.valid,onChange:function(t){return e.handleChange(t,e.props.propertyName)},margin:"dense",displayEmpty:!0},r.a.createElement(et.a,{value:""},r.a.createElement("em",null,"Select Sub Process")),this.renderOptions()),r.a.createElement(Sa.a,{error:!this.props.formControl.valid,style:{display:this.props.formControl.valid?"none":""}},this.props.formControl.valid?"":this.props.formControl.message))}}]),t}(r.a.Component)),OE=SE,kE=OE,wE=a(23),FE=(Object(n.forwardRef)((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),{Factory:{valid:!0,message:""},Datetime:{valid:!0,message:""},Shift:{valid:!0,message:""},SizeConfiguration:{valid:!0,message:""},Size:{valid:!0,message:""},Checker:{valid:!0,message:""},Remarks:{valid:!0,message:""}}),xE=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).closeForm=function(){a.setState({formControl:wE(FE)},(function(){return a.props.closeForm()}))},a.snackOpen=function(e,t,n){var r;return l.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(void 0===e||null===e||void 0===t||null===t){o.next=11;break}if(void 0!==n){o.next=7;break}return o.next=4,l.a.awrap(ka(e,t));case 4:r=o.sent,o.next=8;break;case 7:r=n;case 8:a.setState({snackOpen:!a.state.snackOpen,snackMessage:r,snackClass:e}),o.next=12;break;case 11:a.setState({snackOpen:!1});case 12:case"end":return o.stop()}}))},a.onSave=function(){var e=Object(me.a)({},a.state.formData),t=Object(me.a)({},a.state.formControl),n=DE.validateFields(e);return n.valid?(e.Size<e.SizeConfiguration.MinSize||e.Size>e.SizeConfiguration.MaxSize)&&""===e.Remarks?(t.Remarks.valid=!1,t.Remarks.message="Remarks cannot be empty.",void a.snackOpen("error","alertValidation")):(e.ProcessOutput="Crumb",void("Add"===a.props.formAction?DE.add("",e).then((function(e){!0===e.code?a.props.onSuccess(e.data):null!==e.errors&&Array.isArray(e.errors)?(e.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t})):a.snackOpen("error","server")})):DE.update("",e).then((function(e){!0===e.code?a.props.onSuccess(e.data):null!==e.errors&&Array.isArray(e.errors)?(e.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t})):a.snackOpen("error","server")})))):(n.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t}),void a.snackOpen("error","alertValidation"))},a.state={formData:a.props.formData,formOpen:a.props.formOpen,formControl:wE(FE),disabled:!1,snackOpen:!1,snackMessage:"",snackClass:""},a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"handleChange",value:function(e,t,a){var n=Object(me.a)({},this.state.formData),r=Object(me.a)({},this.state.formControl);!a&&"Factory"!==t||void 0!==e&&""!==e?(r[t].valid=!0,r[t].message=""):(r[t].valid=!1,r[t].message="".concat(t," cannot be empty.")),n[t]=e,this.setState({formData:n})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(Ae.a,{fullScreen:!0,open:this.state.formOpen,onClose:this.closeForm,TransitionComponent:this.Transition},r.a.createElement(w.a,{className:"appBar"},r.a.createElement(F.a,null,r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:this.closeForm,"aria-label":"close"},r.a.createElement(Vt.a,null)),r.a.createElement(x.a,{variant:"h6",className:"app-title"},"Crumb Size Check"),r.a.createElement(he.a,{color:"inherit",disabled:this.state.disabled,onClick:this.onSave},"save"))),r.a.createElement(_e.a,null,r.a.createElement("div",{className:"form-container"},r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-evenly",alignItems:"center",md:6,xs:12,sm:12,xl:8,lg:8},r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Hr,{selectedValue:this.state.formData.Factory,propertyName:"Factory",handleChange:this.handleChange,formControl:this.state.formControl.Factory})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Ac.a,{required:!0,format:"dd-MMM-yyyy hh:mm",label:"Datetime",value:this.state.formData.Datetime,onChange:function(t){e.handleChange(t,"Datetime")}})),r.a.createElement(Sa.a,{error:!this.state.formControl.Datetime.valid,style:{display:this.state.formControl.Datetime.valid?"none":""}},this.state.formControl.Datetime.message)),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ns,{handleChange:this.handleChange,selectedValue:this.state.formData.Shift,formControl:this.state.formControl.Shift,propertyName:"Shift",factoryId:void 0===this.state.formData.Factory._id?this.state.formData.Factory:this.state.formData.Factory._id})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(kE,{handleChange:this.handleChange,selectedValue:this.state.formData.SizeConfiguration,formControl:this.state.formControl.SizeConfiguration,propertyName:"SizeConfiguration",selectedFactory:void 0===this.state.formData.Factory._id?this.state.formData.Factory:this.state.formData.Factory._id,OutputType:"Crumb"})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"Line",label:"Line",value:""===this.state.formData.SizeConfiguration?"":this.state.formData.SizeConfiguration.Line.Name,margin:"dense",disabled:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"Process",label:"Process",value:""===this.state.formData.SizeConfiguration?"":this.state.formData.SizeConfiguration.Process.ProcName,margin:"dense",disabled:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Size (mm)",defaultValue:this.state.formData.Size,thousandSeparator:!0,decimalScale:2,fixedDecimalScale:!0,onValueChange:function(t){e.handleChange(void 0===t.floatValue?0:t.floatValue,"Size",!1)},onFocus:function(e){e.target.select()}})),r.a.createElement(ya.a,{style:{width:"45%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Min Size (mm)",value:this.state.formData.SizeConfiguration.MinSize,thousandSeparator:!0,decimalScale:2,fixedDecimalScale:!0,disabled:!0})),r.a.createElement(ya.a,{style:{width:"45%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Max Size (mm)",value:this.state.formData.SizeConfiguration.MaxSize,thousandSeparator:!0,decimalScale:2,fixedDecimalScale:!0,disabled:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{required:!0,id:"Checker",label:"Checker",defaultValue:this.state.formData.Checker,onChange:function(t){return e.handleChange(t.target.value.trim(),"Checker",!0)},margin:"dense",error:!this.state.formControl.Checker.valid,helperText:this.state.formControl.Checker.message})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"Status",label:"Status",value:""===this.state.formData.SizeConfiguration?"In Spec":this.state.formData.Size>=this.state.formData.SizeConfiguration.MinSize&&this.state.formData.Size<=this.state.formData.SizeConfiguration.MaxSize?"In Spec":"Out of Standard",margin:"dense",disabled:!0,error:this.state.formData.Size<this.state.formData.SizeConfiguration.MinSize||this.state.formData.Size>this.state.formData.SizeConfiguration.MaxSize})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"Remarks",label:"Remarks",multiline:!0,rows:"4",defaultValue:this.state.formData.Remarks,className:"",onChange:function(t){return e.handleChange(t.target.value,"Remarks",e.state.formData.Size<e.state.formData.SizeConfiguration.MinSize||e.state.formData.Size>e.state.formData.SizeConfiguration.MaxSize)},error:!this.state.formControl.Remarks.valid,helperText:this.state.formControl.Remarks.message,margin:"dense"}))))))),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.snackClass,autoHideDuration:600,open:this.state.snackOpen,onClose:this.snackOpen,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.snackMessage)}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return{formOpen:e.formOpen}}}]),t}(r.a.Component),TE=xE,NE=a(23),jE=(Object(n.forwardRef)((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),r.a.forwardRef((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).snackOpen=function(e,t){var n;return l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0===e||null===e||void 0===t||null===t){r.next=7;break}return r.next=3,l.a.awrap(ka(e,t));case 3:n=r.sent,a.setState({snackOpen:!a.state.snackOpen,alertMessage:n,alertClass:e}),r.next=8;break;case 7:a.setState({snackOpen:!1});case 8:case"end":return r.stop()}}))},a.dialogOpen=function(e){var t;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,l.a.awrap(ka("confirmation","delete"));case 2:t=n.sent,a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:e,dialogMessage:r.a.createElement("span",null,void 0!==t?t.replace("[Name]",e.Factory.FctyName):"")});case 4:case"end":return n.stop()}}))},a.diaLogClose=function(){a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:null})},a.onDelete=function(){var e=Object(je.a)(a.state.data),t=e.indexOf(a.state.currentDeleteData);void 0!==a.state.currentDeleteData&&null!==a.state.currentDeleteData&&DE.delete(a.state.currentDeleteData._id).then((function(n){!0===n.code?(e.splice(t,1),a.setState({data:e,dialogOpen:!1},(function(){return a.snackOpen("success","delete")}))):a.setState({dialogOpen:!1},(function(){return a.snackOpen("error","server")}))}))},a.state={columns:[{title:"Factory",field:"Factory",render:function(e){return r.a.createElement("span",null,e.Factory.FctyName)}},{title:"Date",field:"Datetime",render:function(e){return r.a.createElement("span",null,void 0===e?"":new Date(e.Datetime).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric"}))}},{title:"Time",field:"Datetime",render:function(e){return r.a.createElement("span",null,void 0===e?"":new Date(e.Datetime).toLocaleString("en-GB",{hour:"numeric",minute:"numeric"}))}},{title:"Shift",field:"Shift",render:function(e){return r.a.createElement("span",null,e.Shift.Name)}},{title:"Line",field:"SizeConfiguration",render:function(e){return r.a.createElement("span",null,e.SizeConfiguration.Line.Name)}},{title:"Process",field:"SizeConfiguration",render:function(e){return r.a.createElement("span",null,e.SizeConfiguration.Process.ProcName)}},{title:"Sub Process",field:"SizeConfiguration",render:function(e){return r.a.createElement("span",null,e.SizeConfiguration.SubProcessNumber)}},{title:"Size (mm)",field:"Size"},{title:"Status",field:"Size",render:function(e){return r.a.createElement("span",null,e.Size>=e.SizeConfiguration.MinSize&&e.Size<=e.SizeConfiguration.MaxSize?"In Spec":"Out of Standard")}},{title:"Checker",field:"Checker"},{title:"Remark",field:"Remarks"},{title:"Operator",field:"LastUpdatedBy"},{title:"Last Updated",field:"LastUpdatedAt",render:function(e){return r.a.createElement("span",null,void 0===e?"":new Date(e.LastUpdatedAt).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}))},editable:"never"}],data:[],formData:null,currentDeleteData:null,formOpen:!1,formAction:"",snackOpen:!1,dialogOpen:!1,alertMessage:"",dialogMessage:"",alertClass:""},a.SizeCheckModel=NE(bE),a.openForm=a.openForm.bind(Object(Pe.a)(a)),a.closeForm=a.closeForm.bind(Object(Pe.a)(a)),a.onSuccess=a.onSuccess.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initSizeCheck()}},{key:"openForm",value:function(e){var t=e,a=this.state.formAction;void 0===t||null===t?(t=this.SizeCheckModel,a="Add"):a="update",this.setState({formData:t,formOpen:!this.state.formOpen,formAction:a})}},{key:"closeForm",value:function(){this.setState({formData:null,formOpen:!1,formAction:""})}},{key:"initSizeCheck",value:function(){var e=this;DE.getFilter("?ProcessOutput=Crumb").then((function(t){!0===t.code?e.setState({data:t.data}):e.snackOpen("error","server")}))}},{key:"onSuccess",value:function(e){var t=this,a=Object(je.a)(this.state.data);if(void 0!==e&&null!==e)if("Add"===this.state.formAction)a.push(e),this.setState({data:a,formOpen:!this.state.formOpen,formAction:"",formData:null},(function(){return t.snackOpen("success","add")}));else{var n=a.indexOf(this.state.formData);a[n]=e,this.setState({data:a,formOpen:!this.state.formOpen,formAction:"",formData:null},(function(){return t.snackOpen("success","update")}))}else this.snackOpen("error","server")}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{container:!0,direction:"column",justify:"center",wrap:"wrap",style:{margin:"20px 20px 10px 0px"}},r.a.createElement(be.a,{item:!0,xs:12},r.a.createElement(Ve.a,{title:"Crumb Size Check",columns:this.state.columns,data:this.state.data,components:{Toolbar:function(t){return r.a.createElement("div",null,r.a.createElement(Le.MTableToolbar,t),r.a.createElement("div",{style:{padding:"0px 15px"}},r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:function(){return e.openForm(t.rowData)},"aria-label":"add"},r.a.createElement(wt.a,null))))}},actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.data,columns:e.state.columns,fileName:"CrumbSizeCheck"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.initSizeCheck()}},{icon:"edit",tooltip:"Edit User",onClick:function(t,a){return e.openForm(a)}},{icon:"delete",tooltip:"Delete User",onClick:function(t,a){return e.dialogOpen(a)}}],options:{}})),r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-evenly",alignItems:"center",md:10,xs:12,sm:12,xl:10,lg:10},this.state.formOpen?r.a.createElement(TE,{formData:this.state.formData,formAction:this.state.formAction,formOpen:this.state.formOpen,onSuccess:this.onSuccess,closeForm:this.closeForm}):""),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:600,open:this.state.snackOpen,onClose:this.snackOpen,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.diaLogClose,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.diaLogClose,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDelete,color:"primary"},"Delete"))))}}]),t}(r.a.Component)),PE=jE,AE=(a(970),a(971),a(23)),ME=(Object(n.forwardRef)((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),{Factory:{valid:!0,message:""},Datetime:{valid:!0,message:""},Shift:{valid:!0,message:""},SizeConfiguration:{valid:!0,message:""},Size:{valid:!0,message:""},Checker:{valid:!0,message:""},Remarks:{valid:!0,message:""}}),_E=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).closeForm=function(){a.setState({formControl:AE(ME)},(function(){return a.props.closeForm()}))},a.snackOpen=function(e,t,n){var r;return l.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(void 0===e||null===e||void 0===t||null===t){o.next=11;break}if(void 0!==n){o.next=7;break}return o.next=4,l.a.awrap(ka(e,t));case 4:r=o.sent,o.next=8;break;case 7:r=n;case 8:a.setState({snackOpen:!a.state.snackOpen,snackMessage:r,snackClass:e}),o.next=12;break;case 11:a.setState({snackOpen:!1});case 12:case"end":return o.stop()}}))},a.onSave=function(){var e=Object(me.a)({},a.state.formData),t=Object(me.a)({},a.state.formControl),n=DE.validateFields(e);return n.valid?(e.Size<e.SizeConfiguration.MinSize||e.Size>e.SizeConfiguration.MaxSize)&&""===e.Remarks?(t.Remarks.valid=!1,t.Remarks.message="Remarks cannot be empty.",void a.snackOpen("error","alertValidation")):(e.ProcessOutput="Blanket",void("Add"===a.props.formAction?DE.add("",e).then((function(e){!0===e.code?a.props.onSuccess(e.data):null!==e.errors&&Array.isArray(e.errors)?(e.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t})):a.snackOpen("error","server")})):DE.update("",e).then((function(e){!0===e.code?a.props.onSuccess(e.data):null!==e.errors&&Array.isArray(e.errors)?(e.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t})):a.snackOpen("error","server")})))):(n.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t}),void a.snackOpen("error","alertValidation"))},a.state={formData:a.props.formData,formOpen:a.props.formOpen,formControl:AE(ME),disabled:!1,snackOpen:!1,snackMessage:"",snackClass:""},a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"handleChange",value:function(e,t,a){var n=Object(me.a)({},this.state.formData),r=Object(me.a)({},this.state.formControl);!a&&"Factory"!==t||void 0!==e&&""!==e?(r[t].valid=!0,r[t].message=""):(r[t].valid=!1,r[t].message="".concat(t," cannot be empty.")),n[t]=e,this.setState({formData:n})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(Ae.a,{fullScreen:!0,open:this.state.formOpen,onClose:this.closeForm,TransitionComponent:this.Transition},r.a.createElement(w.a,{className:"appBar"},r.a.createElement(F.a,null,r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:this.closeForm,"aria-label":"close"},r.a.createElement(Vt.a,null)),r.a.createElement(x.a,{variant:"h6",className:"app-title"},"Blanket Thickness Check"),r.a.createElement(he.a,{color:"inherit",disabled:this.state.disabled,onClick:this.onSave},"save"))),r.a.createElement(_e.a,null,r.a.createElement("div",{className:"form-container"},r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-evenly",alignItems:"center",md:6,xs:12,sm:12,xl:8,lg:8},r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Hr,{selectedValue:this.state.formData.Factory,propertyName:"Factory",handleChange:this.handleChange,formControl:this.state.formControl.Factory})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Ac.a,{required:!0,format:"dd-MMM-yyyy hh:mm",label:"Datetime",value:this.state.formData.Datetime,onChange:function(t){e.handleChange(t,"Datetime")}})),r.a.createElement(Sa.a,{error:!this.state.formControl.Datetime.valid,style:{display:this.state.formControl.Datetime.valid?"none":""}},this.state.formControl.Datetime.message)),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ns,{handleChange:this.handleChange,selectedValue:this.state.formData.Shift,formControl:this.state.formControl.Shift,propertyName:"Shift",factoryId:void 0===this.state.formData.Factory._id?this.state.formData.Factory:this.state.formData.Factory._id})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(kE,{handleChange:this.handleChange,selectedValue:this.state.formData.SizeConfiguration,formControl:this.state.formControl.SizeConfiguration,propertyName:"SizeConfiguration",selectedFactory:void 0===this.state.formData.Factory._id?this.state.formData.Factory:this.state.formData.Factory._id,OutputType:"Blanket"})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"Line",label:"Line",value:""===this.state.formData.SizeConfiguration?"":this.state.formData.SizeConfiguration.Line.Name,margin:"dense",disabled:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"Process",label:"Process",value:""===this.state.formData.SizeConfiguration?"":this.state.formData.SizeConfiguration.Process.ProcName,margin:"dense",disabled:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Thickness (mm)",defaultValue:this.state.formData.Size,thousandSeparator:!0,decimalScale:2,fixedDecimalScale:!0,onValueChange:function(t){e.handleChange(void 0===t.floatValue?0:t.floatValue,"Size",!1)},onFocus:function(e){e.target.select()}})),r.a.createElement(ya.a,{style:{width:"45%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Min Thickness (mm)",value:this.state.formData.SizeConfiguration.MinSize,thousandSeparator:!0,decimalScale:2,fixedDecimalScale:!0,disabled:!0})),r.a.createElement(ya.a,{style:{width:"45%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Max Thickness (mm)",value:this.state.formData.SizeConfiguration.MaxSize,thousandSeparator:!0,decimalScale:2,fixedDecimalScale:!0,disabled:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{required:!0,id:"Checker",label:"Checker",defaultValue:this.state.formData.Checker,onChange:function(t){return e.handleChange(t.target.value.trim(),"Checker",!0)},margin:"dense",error:!this.state.formControl.Checker.valid,helperText:this.state.formControl.Checker.message})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"Status",label:"Status",value:""===this.state.formData.SizeConfiguration?"In Spec":this.state.formData.Size>=this.state.formData.SizeConfiguration.MinSize&&this.state.formData.Size<=this.state.formData.SizeConfiguration.MaxSize?"In Spec":"Out of Standard",margin:"dense",disabled:!0,error:this.state.formData.Size<this.state.formData.SizeConfiguration.MinSize||this.state.formData.Size>this.state.formData.SizeConfiguration.MaxSize})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"Remarks",label:"Remarks",multiline:!0,rows:"4",defaultValue:this.state.formData.Remarks,className:"",onChange:function(t){return e.handleChange(t.target.value,"Remarks",e.state.formData.Size<e.state.formData.SizeConfiguration.MinSize||e.state.formData.Size>e.state.formData.SizeConfiguration.MaxSize)},error:!this.state.formControl.Remarks.valid,helperText:this.state.formControl.Remarks.message,margin:"dense"}))))))),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.snackClass,autoHideDuration:600,open:this.state.snackOpen,onClose:this.snackOpen,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.snackMessage)}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return{formOpen:e.formOpen}}}]),t}(r.a.Component),IE=_E,RE=(a(972),{properties:{Factory:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Factory cannot be empty.",conform:"Factory cannot be empty.",required:"Factory cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},Datetime:{description:"",type:"any",required:!0,allowEmpty:!1,messages:{allowEmpty:"Datetime cannot be empty.",conform:"Datetime cannot be empty.",required:"Datetime cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},Shift:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Shift cannot be empty.",conform:"Shift cannot be empty.",required:"Shift cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},ContaminationConfiguration:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Contamination Configuration cannot be empty.",conform:"Contamination Configuration cannot be empty.",required:"Contamination Configuration cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},Checker:{description:"",type:"string",required:!0,allowEmpty:!1,messages:{allowEmpty:"Checker cannot be empty.",conform:"Checker cannot be empty.",required:"Checker cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},Remarks:{description:"",type:"string"},ContaminationCheckDetail:{description:"",type:"array"},CreatedAt:{type:"any",default:Date.now()},CreatedBy:{type:"string",default:""},LastUpdatedAt:{type:"any",default:Date.now()},LastUpdatedBy:{type:"string",default:""}}}),LE={properties:{ContaminationType:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"ContaminationType cannot be empty.",conform:"ContaminationType cannot be empty.",required:"ContaminationType cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},Weight:{description:"",type:"any"}}},VE=a(24),BE={validateFields:function(e){return VE.validate(e,RE,{cast:!0})},validateContaminationCheckDetailFields:function(e){return VE.validate(e,LE,{cast:!0})},get:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="contaminationCheck/"+e,a.abrupt("return",We(t).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},getFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("contaminationCheck-filter/").concat(e),a.abrupt("return",We(t).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},getOne:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("contaminationCheck/").concat(e),a.abrupt("return",We(t).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},update:function(e,t){return Qe("contaminationCheck/"+e,t).then((function(e){return console.log(e),200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Updated",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="contaminationCheck/"+e,n.abrupt("return",He(a,t).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Added",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,formValid:!0,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("contaminationCheck/"+e).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))}},UE=BE,qE=(a(973),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={contaminationConfigurationData:[]},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){void 0!==this.props.selectedFactory&&""!==this.props.selectedFactory&&this.fetchcontaminationConfigurationData(this.props.selectedFactory)}},{key:"componentDidUpdate",value:function(e){this.props.selectedFactory!==e.selectedFactory&&void 0!==this.props.selectedFactory&&""!==this.props.selectedFactory&&this.fetchcontaminationConfigurationData(this.props.selectedFactory)}},{key:"fetchcontaminationConfigurationData",value:function(e){var t=this;Pp.getContaminationConfigurationFilter("?Factory=".concat(e)).then((function(e){t.setState({contaminationConfigurationData:e.data})}))}},{key:"renderOptions",value:function(){return this.state.contaminationConfigurationData.map((function(e,t){return r.a.createElement(et.a,{label:"Select Sub Process",value:e.id,key:e.id,name:e.SubProcessNumber},e.SubProcessNumber)}))}},{key:"handleChange",value:function(e){var t=this.state.contaminationConfigurationData.find((function(t){return t.id===e.target.value}));void 0!==t?this.props.handleChange(t,this.props.propertyName,this.props.required):this.props.handleChange("",this.props.propertyName,this.props.required)}},{key:"render",value:function(){var e=this;return r.a.createElement(ya.a,{style:{width:"100%"}},r.a.createElement(Ea.a,{shrink:!0,htmlFor:"SubProcess",required:!0,error:!this.props.formControl.valid},"Sub Process"),r.a.createElement(ba.a,{id:this.props.propertyName,value:void 0===this.props.selectedValue||void 0===this.props.selectedValue.id?"":this.props.selectedValue.id,style:{minWidth:140},error:!this.props.formControl.valid,onChange:function(t){return e.handleChange(t,e.props.propertyName)},margin:"dense",displayEmpty:!0},r.a.createElement(et.a,{value:""},r.a.createElement("em",null,"Select Sub Process")),this.renderOptions()),r.a.createElement(Sa.a,{error:!this.props.formControl.valid,style:{display:this.props.formControl.valid?"none":""}},this.props.formControl.valid?"":this.props.formControl.message))}}]),t}(r.a.Component)),GE=qE,WE=GE,HE=a(23),QE=(Object(n.forwardRef)((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),{Factory:{valid:!0,message:""},Datetime:{valid:!0,message:""},Shift:{valid:!0,message:""},ContaminationConfiguration:{valid:!0,message:""},Checker:{valid:!0,message:""},Remarks:{valid:!0,message:""},ContaminationType:{valid:!0,message:""}}),zE=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).closeForm=function(){a.setState({formControl:HE(QE)},(function(){return a.props.closeForm()}))},a.snackOpen=function(e,t){var n;return l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0===e||null===e||void 0===t||null===t){r.next=7;break}return r.next=3,l.a.awrap(ka(e,t));case 3:n=r.sent,a.setState({snackOpen:!a.state.snackOpen,snackMessage:n,snackClass:e}),r.next=8;break;case 7:a.setState({snackOpen:!1});case 8:case"end":return r.stop()}}))},a.onSave=function(){var e=Object(me.a)({},a.state.formData),t=Object(me.a)({},a.state.formControl),n=UE.validateFields(e);return n.valid?a.state.contaminationDetail.filter((function(e){return e.Weight/a.state.productionCapacity*100>e.StdContamination})).length>0&&""===e.Remarks?(t.Remarks.valid=!1,t.Remarks.message="Remarks cannot be empty.",void a.snackOpen("error","alertValidation")):void("Add"===a.props.formAction?UE.add("",e).then((function(e){!0===e.code?a.props.onSuccess(e.data):null!==e.errors&&Array.isArray(e.errors)?(e.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t})):a.snackOpen("error","server")})):UE.update("",e).then((function(e){!0===e.code?a.props.onSuccess(e.data):null!==e.errors&&Array.isArray(e.errors)?(e.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t})):a.snackOpen("error","server")}))):(n.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t}),void a.snackOpen("error","alertValidation"))},a.state={formData:a.props.formData,formOpen:a.props.formOpen,columns:[{title:"Contamination Type",field:"ContaminationType",render:function(e){return r.a.createElement("span",null,e.ContaminationType.ContatminationTypeName)},editable:"never"},{title:"Act. Weight (gr)",field:"Weight",render:function(e){return r.a.createElement(Xa.a,{value:e.Weight,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})},editComponent:function(e){return r.a.createElement(Xa.a,{customInput:ge.a,label:"Act. Weight (gr)",defaultValue:void 0===e.value?0:e.value,thousandSeparator:!0,decimalScale:2,fixedDecimalScale:!0,onValueChange:function(t){e.onChange(void 0===t.floatValue?0:t.floatValue)}})}},{title:"Act. (%)",render:function(e){return r.a.createElement(Xa.a,{value:0===a.state.productionCapacity?0:e.Weight/a.state.productionCapacity*100,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"Std (%)",field:"StdContamination",render:function(e){return r.a.createElement(Xa.a,{value:e.StdContamination,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})},editable:"never"},{title:"Status",render:function(e){return r.a.createElement("span",null,0===a.state.productionCapacity?"In Spec":e.Weight/a.state.productionCapacity*100<=e.StdContamination?"In Spec":"Out of Standard")},editable:"never"}],contaminationDetail:a.props.formData.ContaminationCheckDetail,formControl:HE(QE),productionCapacity:0,disabled:!1,dialogOpen:!1,dialogMessage:"",snackOpen:!1,snackMessage:"",snackClass:""},a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;if("Add"!==this.props.formAction){Do("getFactoryBasicDataDetail/".concat(this.props.formData.Factory._id,"/").concat(new Date(this.props.formData.Datetime).toDateString())).then((function(t){!0===t.code&&void 0!==t.data.DryerCapacity&&e.setState({productionCapacity:t.data.DryerCapacity})}));var t=this.props.formData.ContaminationConfiguration.ContaminationDetail.map((function(t){return{ContaminationType:t.ContaminationType,StdContamination:t.StdContamination,Weight:e.props.formData.ContaminationCheckDetail.filter((function(e){return null!==t.ContaminationType&&e.ContaminationType===t.ContaminationType._id})).length>0?e.props.formData.ContaminationCheckDetail.filter((function(e){return e.ContaminationType===t.ContaminationType._id}))[0].Weight:0}}));this.setState({contaminationDetail:t})}}},{key:"resetFormControl",value:function(e,t){var a=Object(me.a)({},this.state.formControl);void 0!==e&&null!==e&&""!==e&&(a[t].valid=!0,a[t].message=""),this.setState({formControl:a})}},{key:"handleChange",value:function(e,t,a){var n,r,o,s=this;return l.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:n=Object(me.a)({},this.state.formData),r=Object(me.a)({},this.state.formControl),!a&&"Factory"!==t||void 0!==e&&""!==e?(r[t].valid=!0,r[t].message=""):(r[t].valid=!1,r[t].message="".concat(t," cannot be empty.")),n[t]=e,"Factory"!==t&&"Datetime"!==t||Do("getFactoryBasicDataDetail/".concat(n.Factory._id,"/").concat(new Date(n.Datetime).toDateString())).then((function(e){!0===e.code&&void 0!==e.data.DryerCapacity&&s.setState({productionCapacity:e.data.DryerCapacity})})),"ContaminationConfiguration"===t&&(o=e.ContaminationDetail.map((function(e){return{ContaminationType:e.ContaminationType,StdContamination:e.StdContamination,Weight:0}})),n.ContaminationCheckDetail=o,this.setState({contaminationDetail:o})),this.setState({formData:n});case 7:case"end":return i.stop()}}),null,this)}},{key:"initFormControl",value:function(){this.setState({formControls:HE(QE)})}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{container:!0},r.a.createElement(Ae.a,{fullScreen:!0,open:this.state.formOpen,onClose:this.closeForm,TransitionComponent:this.Transition},r.a.createElement(w.a,{className:"appBar"},r.a.createElement(F.a,null,r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:this.closeForm,"aria-label":"close"},r.a.createElement(Vt.a,null)),r.a.createElement(x.a,{variant:"h6",className:"app-title"},"Contamination Check"),r.a.createElement(he.a,{color:"inherit",disabled:this.state.disabled,onClick:this.onSave},"save"))),r.a.createElement(_e.a,null,r.a.createElement("div",{className:"form-container"},r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-around",alignItems:"center",md:10,xs:12,sm:12,xl:10,lg:10},r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Hr,{selectedValue:this.state.formData.Factory,propertyName:"Factory",handleChange:this.handleChange,formControl:this.state.formControl.Factory})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Ac.a,{required:!0,format:"dd-MMM-yyyy hh:mm",label:"Datetime",value:this.state.formData.Datetime,onChange:function(t){e.handleChange(t,"Datetime")}})),r.a.createElement(Sa.a,{error:!this.state.formControl.Datetime.valid,style:{display:this.state.formControl.Datetime.valid?"none":""}},this.state.formControl.Datetime.message)),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ns,{handleChange:function(t){return e.handleChange(t,"Shift",!0)},selectedValue:this.state.formData.Shift,formControl:this.state.formControl.Shift,propertyName:"Shift",factoryId:void 0===this.state.formData.Factory._id?this.state.formData.Factory:this.state.formData.Factory._id})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(WE,{handleChange:this.handleChange,selectedValue:this.state.formData.ContaminationConfiguration,formControl:this.state.formControl.ContaminationConfiguration,propertyName:"ContaminationConfiguration",selectedFactory:void 0===this.state.formData.Factory._id?this.state.formData.Factory:this.state.formData.Factory._id,required:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"Line",label:"Line",value:""===this.state.formData.ContaminationConfiguration?"":this.state.formData.ContaminationConfiguration.Line.Name,margin:"dense",disabled:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"Process",label:"Process",value:""===this.state.formData.ContaminationConfiguration?"":this.state.formData.ContaminationConfiguration.Process.ProcName,margin:"dense",disabled:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{required:!0,id:"Checker",label:"Checker",defaultValue:this.state.formData.Checker,onChange:function(t){return e.handleChange(t.target.value.trim(),"Checker",!0)},margin:"dense",error:!this.state.formControl.Checker.valid,helperText:this.state.formControl.Checker.message})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"Remarks",label:"Remarks",multiline:!0,rows:"4",defaultValue:this.state.formData.Remarks,onChange:function(t){return e.handleChange(t.target.value,"Remarks",e.state.contaminationDetail.filter((function(t){return t.Weight/e.state.productionCapacity*100>t.StdContamination})).length>0)},error:!this.state.formControl.Remarks.valid,helperText:this.state.formControl.Remarks.message,margin:"dense"}))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(Ve.a,{style:{width:"100%",margin:4},title:"Contamination Detail",columns:this.state.columns,data:this.state.contaminationDetail,editable:{onRowUpdate:function(t,a){return new Promise((function(n,r){setTimeout((function(){var o=Object(me.a)({},e.state.formData),s=Object(je.a)(e.state.contaminationDetail),i=s.indexOf(a),l=e.state.formControl,c=UE.validateContaminationCheckDetailFields(t);c.valid?(s[i]=t,o.ContaminationCheckDetail[i]={ContaminationType:t.ContaminationType._id,Weight:t.Weight},e.setState({formData:o,contaminationDetail:s},(function(){return n()}))):(r(),c.errors.map((function(e){l[e.property].valid=!1,l[e.property].message=e.message})),e.setState({formControl:l}))}),1e3)}))}},icons:{Clear:function(t){return r.a.createElement(Nt.a,{onClick:function(){e.initFormControl()},style:{padding:0,margin:0}})}},options:{pageSize:10,search:!1}})))))),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.snackClass,autoHideDuration:600,open:this.state.snackOpen,onClose:this.snackOpen,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.snackMessage)}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return{formOpen:e.formOpen}}}]),t}(r.a.Component),YE=zE,KE=a(23),JE=(Object(n.forwardRef)((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),r.a.forwardRef((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).snackOpen=function(e,t){var n;return l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0===e||null===e||void 0===t||null===t){r.next=7;break}return r.next=3,l.a.awrap(ka(e,t));case 3:n=r.sent,a.setState({snackOpen:!a.state.snackOpen,alertMessage:n,alertClass:e}),r.next=8;break;case 7:a.setState({snackOpen:!1});case 8:case"end":return r.stop()}}))},a.dialogOpen=function(e){var t;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,l.a.awrap(ka("confirmation","delete"));case 2:t=n.sent,a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:e,dialogMessage:r.a.createElement("span",null,void 0!==t?t.replace("[Name]",e.Factory.FctyName):"")});case 4:case"end":return n.stop()}}))},a.diaLogClose=function(){a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:null})},a.onDelete=function(){var e=Object(je.a)(a.state.data),t=e.indexOf(a.state.currentDeleteData);void 0!==a.state.currentDeleteData&&null!==a.state.currentDeleteData&&DE.delete(a.state.currentDeleteData._id).then((function(n){!0===n.code?(e.splice(t,1),a.setState({data:e,dialogOpen:!1},(function(){return a.snackOpen("success","delete")}))):a.setState({dialogOpen:!1},(function(){return a.snackOpen("error","server")}))}))},a.state={columns:[{title:"Factory",field:"Factory",render:function(e){return r.a.createElement("span",null,e.Factory.FctyName)}},{title:"Date",field:"Datetime",render:function(e){return r.a.createElement("span",null,void 0===e?"":new Date(e.Datetime).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric"}))}},{title:"Time",field:"Datetime",render:function(e){return r.a.createElement("span",null,void 0===e?"":new Date(e.Datetime).toLocaleString("en-GB",{hour:"numeric",minute:"numeric"}))}},{title:"Shift",field:"Shift",render:function(e){return r.a.createElement("span",null,e.Shift.Name)}},{title:"Line",field:"SizeConfiguration",render:function(e){return r.a.createElement("span",null,e.SizeConfiguration.Line.Name)}},{title:"Process",field:"SizeConfiguration",render:function(e){return r.a.createElement("span",null,e.SizeConfiguration.Process.ProcName)}},{title:"Sub Process",field:"SizeConfiguration",render:function(e){return r.a.createElement("span",null,e.SizeConfiguration.SubProcessNumber)}},{title:"Size (mm)",field:"Size"},{title:"Status",field:"Size",render:function(e){return r.a.createElement("span",null,e.Size>=e.SizeConfiguration.MinSize&&e.Size<=e.SizeConfiguration.MaxSize?"In Spec":"Out of Standard")}},{title:"Checker",field:"Checker"},{title:"Remark",field:"Remarks"},{title:"Operator",field:"LastUpdatedBy"},{title:"Last Updated",field:"LastUpdatedAt",render:function(e){return r.a.createElement("span",null,void 0===e?"":new Date(e.LastUpdatedAt).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}))},editable:"never"}],data:[],formData:null,currentDeleteData:null,formOpen:!1,formAction:"",snackOpen:!1,dialogOpen:!1,alertMessage:"",dialogMessage:"",alertClass:""},a.SizeCheckModel=KE(bE),a.openForm=a.openForm.bind(Object(Pe.a)(a)),a.closeForm=a.closeForm.bind(Object(Pe.a)(a)),a.onSuccess=a.onSuccess.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initSizeCheck()}},{key:"openForm",value:function(e){var t=e,a=this.state.formAction;void 0===t||null===t?(t=this.SizeCheckModel,a="Add"):a="update",this.setState({formData:t,formOpen:!this.state.formOpen,formAction:a})}},{key:"closeForm",value:function(){this.setState({formData:null,formOpen:!1,formAction:""})}},{key:"initSizeCheck",value:function(){var e=this;DE.getFilter("?ProcessOutput=Blanket").then((function(t){!0===t.code?e.setState({data:t.data}):e.snackOpen("error","server")}))}},{key:"onSuccess",value:function(e){var t=this,a=Object(je.a)(this.state.data);if(void 0!==e&&null!==e)if("Add"===this.state.formAction)a.push(e),this.setState({data:a,formOpen:!this.state.formOpen,formAction:"",formData:null},(function(){return t.snackOpen("success","add")}));else{var n=a.indexOf(this.state.formData);a[n]=e,this.setState({data:a,formOpen:!this.state.formOpen,formAction:"",formData:null},(function(){return t.snackOpen("success","update")}))}else this.snackOpen("error","server")}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{container:!0,direction:"column",justify:"center",wrap:"wrap",style:{margin:"20px 20px 10px 0px"}},r.a.createElement(be.a,{item:!0,xs:12},r.a.createElement(Ve.a,{title:"Blanket Thickness Check",columns:this.state.columns,data:this.state.data,components:{Toolbar:function(t){return r.a.createElement("div",null,r.a.createElement(Le.MTableToolbar,t),r.a.createElement("div",{style:{padding:"0px 15px"}},r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:function(){return e.openForm(t.rowData)},"aria-label":"add"},r.a.createElement(wt.a,null))))}},actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.data,columns:e.state.columns,fileName:"BlanketThicknessCheck"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.initSizeCheck()}},{icon:"edit",tooltip:"Edit User",onClick:function(t,a){return e.openForm(a)}},{icon:"delete",tooltip:"Delete User",onClick:function(t,a){return e.dialogOpen(a)}}],options:{}})),r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-evenly",alignItems:"center",md:10,xs:12,sm:12,xl:10,lg:10},this.state.formOpen?r.a.createElement(IE,{formData:this.state.formData,formAction:this.state.formAction,formOpen:this.state.formOpen,onSuccess:this.onSuccess,closeForm:this.closeForm}):""),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:600,open:this.state.snackOpen,onClose:this.snackOpen,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.diaLogClose,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.diaLogClose,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDelete,color:"primary"},"Delete"))))}}]),t}(r.a.Component)),ZE=JE,XE=(a(974),{Factory:"",Datetime:new Date,Shift:"",ContaminationConfiguration:"",Checker:"",Remarks:"",ContaminationCheckDetail:[]}),$E=XE,eb=a(23),tb=(Object(n.forwardRef)((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),r.a.forwardRef((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).snackOpen=function(e,t){var n;return l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0===e||null===e||void 0===t||null===t){r.next=7;break}return r.next=3,l.a.awrap(ka(e,t));case 3:n=r.sent,a.setState({snackOpen:!a.state.snackOpen,alertMessage:n,alertClass:e}),r.next=8;break;case 7:a.setState({snackOpen:!1});case 8:case"end":return r.stop()}}))},a.dialogOpen=function(e){var t;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,l.a.awrap(ka("confirmation","delete"));case 2:t=n.sent,a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:e,dialogMessage:r.a.createElement("span",null,void 0!==t?t.replace("[Name]",e.Factory.FctyName):"")});case 4:case"end":return n.stop()}}))},a.diaLogClose=function(){a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:null})},a.onDelete=function(){var e=Object(je.a)(a.state.data),t=e.indexOf(a.state.currentDeleteData);void 0!==a.state.currentDeleteData&&null!==a.state.currentDeleteData&&UE.delete(a.state.currentDeleteData._id).then((function(n){!0===n.code?(e.splice(t,1),a.setState({data:e,dialogOpen:!1},(function(){return a.snackOpen("success","delete")}))):a.setState({dialogOpen:!1},(function(){return a.snackOpen("error","server")}))}))},a.state={columns:[{title:"Factory",field:"Factory",render:function(e){return r.a.createElement("span",null,e.Factory.FctyName)}},{title:"Date",field:"Datetime",render:function(e){return r.a.createElement("span",null,void 0===e?"":new Date(e.Datetime).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric"}))}},{title:"Time",field:"Datetime",render:function(e){return r.a.createElement("span",null,void 0===e?"":new Date(e.Datetime).toLocaleString("en-GB",{hour:"numeric",minute:"numeric"}))}},{title:"Shift",field:"Shift",render:function(e){return r.a.createElement("span",null,e.Shift.Name)}},{title:"Line",field:"ContaminationConfiguration",render:function(e){return r.a.createElement("span",null,e.ContaminationConfiguration.Line.Name)}},{title:"Process",field:"ContaminationConfiguration",render:function(e){return r.a.createElement("span",null,e.ContaminationConfiguration.Process.ProcName)}},{title:"Sub Process",field:"ContaminationConfiguration",render:function(e){return r.a.createElement("span",null,e.ContaminationConfiguration.SubProcessNumber)}},{title:"Total Weight",render:function(e){return r.a.createElement(Xa.a,{value:e.ContaminationCheckDetail.reduce((function(e,t){return null==t.Weight?e:e+t.Weight}),0),displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"Checker",field:"Checker"},{title:"Remark",field:"Remarks"},{title:"Operator",field:"LastUpdatedBy"},{title:"Last Updated",field:"LastUpdatedAt",render:function(e){return r.a.createElement("span",null,void 0===e?"":new Date(e.LastUpdatedAt).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}))},editable:"never"}],data:[],formData:null,currentDeleteData:null,formOpen:!1,formAction:"",snackOpen:!1,dialogOpen:!1,alertMessage:"",dialogMessage:"",alertClass:""},a.ContaminationCheckModel=eb($E),a.openForm=a.openForm.bind(Object(Pe.a)(a)),a.closeForm=a.closeForm.bind(Object(Pe.a)(a)),a.onSuccess=a.onSuccess.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initContaminationCheck()}},{key:"openForm",value:function(e){var t=e,a=this.state.formAction;void 0===t||null===t?(t=this.ContaminationCheckModel,a="Add"):a="update",this.setState({formData:t,formOpen:!this.state.formOpen,formAction:a})}},{key:"closeForm",value:function(){this.setState({formData:null,formOpen:!1,formAction:""})}},{key:"initContaminationCheck",value:function(){var e=this;UE.get("").then((function(t){!0===t.code?e.setState({data:t.data}):e.snackOpen("error","server")}))}},{key:"onSuccess",value:function(e){var t=this,a=Object(je.a)(this.state.data);if(void 0!==e&&null!==e)if("Add"===this.state.formAction)a.push(e),this.setState({data:a,formOpen:!this.state.formOpen,formAction:"",formData:null},(function(){return t.snackOpen("success","add")}));else{var n=a.indexOf(this.state.formData);a[n]=e,this.setState({data:a,formOpen:!this.state.formOpen,formAction:"",formData:null},(function(){return t.snackOpen("success","update")}))}else this.snackOpen("error","server")}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{container:!0,direction:"column",justify:"center",wrap:"wrap",style:{margin:"20px 20px 10px 0px"}},r.a.createElement(be.a,{item:!0,xs:12},r.a.createElement(Ve.a,{title:"ContaminationCheck",columns:this.state.columns,data:this.state.data,components:{Toolbar:function(t){return r.a.createElement("div",null,r.a.createElement(Le.MTableToolbar,t),r.a.createElement("div",{style:{padding:"0px 15px"}},r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:function(){return e.openForm(t.rowData)},"aria-label":"add"},r.a.createElement(wt.a,null))))}},actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.data,columns:e.state.columns,fileName:"ContaminationCheck"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.initContaminationCheck()}},{icon:"edit",tooltip:"Edit User",onClick:function(t,a){return e.openForm(a)}},{icon:"delete",tooltip:"Delete User",onClick:function(t,a){return e.dialogOpen(a)}}],options:{}})),r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-evenly",alignItems:"center",md:10,xs:12,sm:12,xl:10,lg:10},this.state.formOpen?r.a.createElement(YE,{formData:this.state.formData,formAction:this.state.formAction,formOpen:this.state.formOpen,onSuccess:this.onSuccess,closeForm:this.closeForm}):""),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:600,open:this.state.snackOpen,onClose:this.snackOpen,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.diaLogClose,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.diaLogClose,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDelete,color:"primary"},"Delete"))))}}]),t}(r.a.Component)),ab=tb,nb=(a(975),{properties:{Factory:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Factory cannot be empty.",conform:"Factory cannot be empty.",required:"Factory cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},Datetime:{description:"",type:"any",required:!0,allowEmpty:!1,messages:{allowEmpty:"Datetime cannot be empty.",conform:"Datetime cannot be empty.",required:"Datetime cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},Shift:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Shift cannot be empty.",conform:"Shift cannot be empty.",required:"Shift cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},ToolConfiguration:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Factory Tool Configuration cannot be empty.",conform:"Factory Tool Configuration cannot be empty.",required:"Factory Tool Configuration cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},Remarks:{description:"",type:"string"},ToolCheckDetail:{description:"",type:"array"},CreatedAt:{type:"any",default:Date.now()},CreatedBy:{type:"string",default:""},LastUpdatedAt:{type:"any",default:Date.now()},LastUpdatedBy:{type:"string",default:""}}}),rb={properties:{Tool:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Tool cannot be empty.",conform:"Tool cannot be empty.",required:"Tool cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},IssuedQty:{description:"",type:"any"},ReturnedQty:{description:"",type:"any"}}},ob=a(24),sb={validateFields:function(e){return ob.validate(e,nb,{cast:!0})},validateFactoryToolCheckDetailFields:function(e){return ob.validate(e,rb,{cast:!0})},get:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="factoryToolCheck/"+e,a.abrupt("return",We(t).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},getFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("factoryToolCheck-filter/").concat(e),a.abrupt("return",We(t).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},getOne:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("factoryToolCheck/").concat(e),a.abrupt("return",We(t).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},update:function(e,t){return Qe("factoryToolCheck/"+e,t).then((function(e){return console.log(e),200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Updated",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="factoryToolCheck/"+e,n.abrupt("return",He(a,t).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Added",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,formValid:!0,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("factoryToolCheck/"+e).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))}},ib=sb,lb={Factory:"",Datetime:new Date,Shift:"",ToolConfiguration:"",Remarks:"",ToolCheckDetail:[]},cb=lb,ub=(a(976),a(977),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={factoryToolConfigurationData:[]},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){void 0!==this.props.selectedFactory&&""!==this.props.selectedFactory&&this.fetchFactoryToolConfigurationData(this.props.selectedFactory)}},{key:"componentDidUpdate",value:function(e){this.props.selectedFactory!==e.selectedFactory&&void 0!==this.props.selectedFactory&&""!==this.props.selectedFactory&&this.fetchFactoryToolConfigurationData(this.props.selectedFactory)}},{key:"fetchFactoryToolConfigurationData",value:function(e){var t=this;Ff.getToolConfigurationFilter("?Factory=".concat(e)).then((function(e){t.setState({factoryToolConfigurationData:e.data})}))}},{key:"renderOptions",value:function(){return this.state.factoryToolConfigurationData.map((function(e,t){return r.a.createElement(et.a,{label:"Select Sub Process",value:e.id,key:e.id,name:e.SubProcessNumber},e.SubProcessNumber)}))}},{key:"handleChange",value:function(e){var t=this.state.factoryToolConfigurationData.find((function(t){return t.id===e.target.value}));void 0!==t?this.props.handleChange(t,this.props.propertyName,this.props.required):this.props.handleChange("",this.props.propertyName,this.props.required)}},{key:"render",value:function(){var e=this;return r.a.createElement(ya.a,{style:{width:"100%"}},r.a.createElement(Ea.a,{shrink:!0,htmlFor:"SubProcess",required:!0,error:!this.props.formControl.valid},"Sub Process"),r.a.createElement(ba.a,{id:this.props.propertyName,value:void 0===this.props.selectedValue||void 0===this.props.selectedValue.id?"":this.props.selectedValue.id,style:{minWidth:140},error:!this.props.formControl.valid,onChange:function(t){return e.handleChange(t,e.props.propertyName)},margin:"dense",displayEmpty:!0},r.a.createElement(et.a,{value:""},r.a.createElement("em",null,"Select Sub Process")),this.renderOptions()),r.a.createElement(Sa.a,{error:!this.props.formControl.valid,style:{display:this.props.formControl.valid?"none":""}},this.props.formControl.valid?"":this.props.formControl.message))}}]),t}(r.a.Component)),db=ub,mb=db,pb=a(23),fb=(Object(n.forwardRef)((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),{Factory:{valid:!0,message:""},Datetime:{valid:!0,message:""},Shift:{valid:!0,message:""},ToolConfiguration:{valid:!0,message:""},Remarks:{valid:!0,message:""},FactoryToolType:{valid:!0,message:""}}),hb=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).closeForm=function(){a.setState({formControl:pb(fb)},(function(){return a.props.closeForm()}))},a.snackOpen=function(e,t){var n;return l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0===e||null===e||void 0===t||null===t){r.next=7;break}return r.next=3,l.a.awrap(ka(e,t));case 3:n=r.sent,a.setState({snackOpen:!a.state.snackOpen,snackMessage:n,snackClass:e}),r.next=8;break;case 7:a.setState({snackOpen:!1});case 8:case"end":return r.stop()}}))},a.onSave=function(){var e=Object(me.a)({},a.state.formData),t=Object(me.a)({},a.state.formControl),n=ib.validateFields(e);n.valid?"Add"===a.props.formAction?ib.add("",e).then((function(e){!0===e.code?a.props.onSuccess(e.data):null!==e.errors&&Array.isArray(e.errors)?(e.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t})):a.snackOpen("error","server")})):ib.update("",e).then((function(e){!0===e.code?a.props.onSuccess(e.data):null!==e.errors&&Array.isArray(e.errors)?(e.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t})):a.snackOpen("error","server")})):(n.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t}),a.snackOpen("error","alertValidation"))},a.state={formData:a.props.formData,formOpen:a.props.formOpen,columns:[{title:"Tools",field:"Tool",render:function(e){return r.a.createElement("span",null,null===e.Tool?"":e.Tool.Name)},editable:"never"},{title:"Qty Issued",field:"IssuedQty",render:function(e){return r.a.createElement(Xa.a,{value:e.IssuedQty,displayType:"text",decimalScale:2,thousandSeparator:!0})},editComponent:function(e){return r.a.createElement(Xa.a,{customInput:ge.a,label:"Qty Issued",defaultValue:void 0===e.value?0:e.value,thousandSeparator:!0,onValueChange:function(t){e.onChange(void 0===t.floatValue?0:t.floatValue)},onFocus:function(e){e.target.select()}})}},{title:"Qty Returned",field:"ReturnedQty",render:function(e){return r.a.createElement(Xa.a,{value:e.ReturnedQty,displayType:"text",decimalScale:2,thousandSeparator:!0})},editComponent:function(e){return r.a.createElement(Xa.a,{customInput:ge.a,label:"Qty Returned",defaultValue:void 0===e.value?0:e.value,thousandSeparator:!0,onValueChange:function(t){e.onChange(void 0===t.floatValue?0:t.floatValue)},onFocus:function(e){e.target.select()}})}}],factoryToolDetail:a.props.formData.ToolCheckDetail,formControl:pb(fb),productionCapacity:0,disabled:!1,dialogOpen:!1,dialogMessage:"",snackOpen:!1,snackMessage:"",snackClass:""},a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;if("Add"!==this.props.formAction){var t=this.props.formData.ToolConfiguration.ToolDetail.map((function(t){return{Tool:t.Tool,IssuedQty:e.props.formData.ToolCheckDetail.filter((function(e){return null!==t.Tool&&e.Tool===t.Tool._id})).length>0?e.props.formData.ToolCheckDetail.filter((function(e){return e.Tool===t.Tool._id}))[0].IssuedQty:0,ReturnedQty:e.props.formData.ToolCheckDetail.filter((function(e){return null!==t.Tool&&e.Tool===t.Tool._id})).length>0?e.props.formData.ToolCheckDetail.filter((function(e){return e.Tool===t.Tool._id}))[0].ReturnedQty:0}}));this.setState({factoryToolDetail:t})}}},{key:"resetFormControl",value:function(e,t){var a=Object(me.a)({},this.state.formControl);void 0!==e&&null!==e&&""!==e&&(a[t].valid=!0,a[t].message=""),this.setState({formControl:a})}},{key:"handleChange",value:function(e,t,a){var n,r,o;return l.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:n=Object(me.a)({},this.state.formData),r=Object(me.a)({},this.state.formControl),!a&&"Factory"!==t||void 0!==e&&""!==e?(r[t].valid=!0,r[t].message=""):(r[t].valid=!1,r[t].message="".concat(t," cannot be empty.")),n[t]=e,"ToolConfiguration"===t&&(o=e.ToolDetail.map((function(e){return{Tool:e.Tool,IssuedQty:e.ToolQty,ReturnedQty:0}})),n.ToolCheckDetail=o,this.setState({factoryToolDetail:o})),this.setState({formData:n});case 6:case"end":return s.stop()}}),null,this)}},{key:"initFormControl",value:function(){this.setState({formControls:pb(fb)})}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{container:!0},r.a.createElement(Ae.a,{fullScreen:!0,open:this.state.formOpen,onClose:this.closeForm,TransitionComponent:this.Transition},r.a.createElement(w.a,{className:"appBar"},r.a.createElement(F.a,null,r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:this.closeForm,"aria-label":"close"},r.a.createElement(Vt.a,null)),r.a.createElement(x.a,{variant:"h6",className:"app-title"},"Factory Tool Check"),r.a.createElement(he.a,{color:"inherit",disabled:this.state.disabled,onClick:this.onSave},"save"))),r.a.createElement(_e.a,null,r.a.createElement("div",{className:"form-container"},r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-around",alignItems:"center",md:10,xs:12,sm:12,xl:10,lg:10},r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Hr,{selectedValue:this.state.formData.Factory,propertyName:"Factory",handleChange:this.handleChange,formControl:this.state.formControl.Factory})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Da.a,{required:!0,format:"dd-MMM-yyyy hh:mm",label:"Datetime",value:this.state.formData.Datetime,onChange:function(t){e.handleChange(t,"Datetime")}})),r.a.createElement(Sa.a,{error:!this.state.formControl.Datetime.valid,style:{display:this.state.formControl.Datetime.valid?"none":""}},this.state.formControl.Datetime.message)),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ns,{handleChange:function(t){return e.handleChange(t,"Shift",!0)},selectedValue:this.state.formData.Shift,formControl:this.state.formControl.Shift,propertyName:"Shift",factoryId:void 0===this.state.formData.Factory._id?this.state.formData.Factory:this.state.formData.Factory._id})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(mb,{handleChange:this.handleChange,selectedValue:this.state.formData.ToolConfiguration,formControl:this.state.formControl.ToolConfiguration,propertyName:"ToolConfiguration",selectedFactory:void 0===this.state.formData.Factory._id?this.state.formData.Factory:this.state.formData.Factory._id,required:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"Line",label:"Line",value:""===this.state.formData.ToolConfiguration?"":this.state.formData.ToolConfiguration.Line.Name,margin:"dense",disabled:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"Process",label:"Process",value:""===this.state.formData.ToolConfiguration?"":this.state.formData.ToolConfiguration.Process.ProcName,margin:"dense",disabled:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"Remarks",label:"Remarks",multiline:!0,rows:"4",defaultValue:this.state.formData.Remarks,className:"",onChange:function(t){return e.handleChange(t.target.value,"Remarks",!1)},margin:"dense"}))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(Ve.a,{style:{width:"100%",margin:4},title:"FactoryTool Detail",columns:this.state.columns,data:this.state.factoryToolDetail,editable:{onRowUpdate:function(t,a){return new Promise((function(n,r){setTimeout((function(){var o=Object(me.a)({},e.state.formData),s=Object(je.a)(e.state.factoryToolDetail),i=s.indexOf(a),l=e.state.formControl,c=ib.validateFactoryToolCheckDetailFields(t);c.valid?(s[i]=t,o.ToolCheckDetail[i]={Tool:t.Tool._id,IssuedQty:t.IssuedQty,ReturnedQty:t.ReturnedQty},e.setState({formData:o,factoryToolDetail:s},(function(){return n()}))):(r(),c.errors.map((function(e){l[e.property].valid=!1,l[e.property].message=e.message})),e.setState({formControl:l}))}),1e3)}))}},icons:{Clear:function(t){return r.a.createElement(Nt.a,{onClick:function(){e.initFormControl()},style:{padding:0,margin:0}})}}})))))),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.snackClass,autoHideDuration:600,open:this.state.snackOpen,onClose:this.snackOpen,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.snackMessage)}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return{formOpen:e.formOpen}}}]),t}(r.a.Component),gb=hb,yb=a(23),vb=(Object(n.forwardRef)((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),r.a.forwardRef((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).snackOpen=function(e,t){var n;return l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0===e||null===e||void 0===t||null===t){r.next=7;break}return r.next=3,l.a.awrap(ka(e,t));case 3:n=r.sent,a.setState({snackOpen:!a.state.snackOpen,alertMessage:n,alertClass:e}),r.next=8;break;case 7:a.setState({snackOpen:!1});case 8:case"end":return r.stop()}}))},a.dialogOpen=function(e){var t;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,l.a.awrap(ka("confirmation","delete"));case 2:t=n.sent,a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:e,dialogMessage:r.a.createElement("span",null,void 0!==t?t.replace("[Name]",e.Factory.FctyName):"")});case 4:case"end":return n.stop()}}))},a.diaLogClose=function(){a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:null})},a.onDelete=function(){var e=Object(je.a)(a.state.data),t=e.indexOf(a.state.currentDeleteData);void 0!==a.state.currentDeleteData&&null!==a.state.currentDeleteData&&ib.delete(a.state.currentDeleteData._id).then((function(n){!0===n.code?(e.splice(t,1),a.setState({data:e,dialogOpen:!1},(function(){return a.snackOpen("success","delete")}))):a.setState({dialogOpen:!1},(function(){return a.snackOpen("error","server")}))}))},a.state={columns:[{title:"Factory",field:"Factory",render:function(e){return r.a.createElement("span",null,e.Factory.FctyName)}},{title:"Date",field:"Datetime",render:function(e){return r.a.createElement("span",null,void 0===e?"":new Date(e.Datetime).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric"}))}},{title:"Shift",field:"Shift",render:function(e){return r.a.createElement("span",null,e.Shift.Name)}},{title:"Line",field:"FactoryToolConfiguration",render:function(e){return r.a.createElement("span",null,e.ToolConfiguration.Line.Name)}},{title:"Process",field:"FactoryToolConfiguration",render:function(e){return r.a.createElement("span",null,e.ToolConfiguration.Process.ProcName)}},{title:"Sub Process",field:"ToolConfiguration",render:function(e){return r.a.createElement("span",null,e.ToolConfiguration.SubProcessNumber)}},{title:"Total Qty Issued",render:function(e){return r.a.createElement(Xa.a,{value:e.ToolCheckDetail.reduce((function(e,t){return null==t.IssuedQty?e:e+t.IssuedQty}),0),displayType:"text",thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"Total Qty Returned",render:function(e){return r.a.createElement(Xa.a,{value:e.ToolCheckDetail.reduce((function(e,t){return null==t.ReturnedQty?e:e+t.ReturnedQty}),0),displayType:"text",thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"Remarks",field:"Remarks"},{title:"Operator",field:"LastUpdatedBy"},{title:"Last Updated",field:"LastUpdatedAt",render:function(e){return r.a.createElement("span",null,void 0===e?"":new Date(e.LastUpdatedAt).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}))},editable:"never"}],data:[],formData:null,currentDeleteData:null,formOpen:!1,formAction:"",snackOpen:!1,dialogOpen:!1,alertMessage:"",dialogMessage:"",alertClass:""},a.FactoryToolCheckModel=yb(cb),a.openForm=a.openForm.bind(Object(Pe.a)(a)),a.closeForm=a.closeForm.bind(Object(Pe.a)(a)),a.onSuccess=a.onSuccess.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initFactoryToolCheck()}},{key:"openForm",value:function(e){var t=e,a=this.state.formAction;void 0===t||null===t?(t=this.FactoryToolCheckModel,a="Add"):a="update",this.setState({formData:t,formOpen:!this.state.formOpen,formAction:a})}},{key:"closeForm",value:function(){this.setState({formData:null,formOpen:!1,formAction:""})}},{key:"initFactoryToolCheck",value:function(){var e=this;ib.get("").then((function(t){!0===t.code?e.setState({data:t.data}):e.snackOpen("error","server")}))}},{key:"onSuccess",value:function(e){var t=this,a=Object(je.a)(this.state.data);if(void 0!==e&&null!==e)if("Add"===this.state.formAction)a.push(e),this.setState({data:a,formOpen:!this.state.formOpen,formAction:"",formData:null},(function(){return t.snackOpen("success","add")}));else{var n=a.indexOf(this.state.formData);a[n]=e,this.setState({data:a,formOpen:!this.state.formOpen,formAction:"",formData:null},(function(){return t.snackOpen("success","update")}))}else this.snackOpen("error","server")}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{container:!0,direction:"column",justify:"center",wrap:"wrap",style:{margin:"20px 20px 10px 0px"}},r.a.createElement(be.a,{item:!0,xs:12},r.a.createElement(Ve.a,{title:"Factory Tool Check",columns:this.state.columns,data:this.state.data,components:{Toolbar:function(t){return r.a.createElement("div",null,r.a.createElement(Le.MTableToolbar,t),r.a.createElement("div",{style:{padding:"0px 15px"}},r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:function(){return e.openForm(t.rowData)},"aria-label":"add"},r.a.createElement(wt.a,null))))}},actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.data,columns:e.state.columns,fileName:"FactoryToolCheck"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.initFactoryToolCheck()}},{icon:"edit",tooltip:"Edit User",onClick:function(t,a){return e.openForm(a)}},{icon:"delete",tooltip:"Delete User",onClick:function(t,a){return e.dialogOpen(a)}}],options:{}})),r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-evenly",alignItems:"center",md:10,xs:12,sm:12,xl:10,lg:10},this.state.formOpen?r.a.createElement(gb,{formData:this.state.formData,formAction:this.state.formAction,formOpen:this.state.formOpen,onSuccess:this.onSuccess,closeForm:this.closeForm}):""),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:600,open:this.state.snackOpen,onClose:this.snackOpen,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.diaLogClose,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.diaLogClose,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDelete,color:"primary"},"Delete"))))}}]),t}(r.a.Component)),Cb=vb,Db=(a(978),{properties:{Factory:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Factory cannot be empty.",conform:"Factory cannot be empty.",required:"Factory cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},Date:{description:"",type:"any",required:!0,allowEmpty:!1,messages:{allowEmpty:"Date cannot be empty.",conform:"Date cannot be empty.",required:"Date cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},Shift:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Shift cannot be empty.",conform:"Shift cannot be empty.",required:"Shift cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},MachineList:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Dryer cannot be empty.",conform:"Dryer cannot be empty.",required:"Dryer cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},FactoryTrolley:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Trolley cannot be empty.",conform:"Trolley cannot be empty.",required:"Trolley cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},TimeFill:{description:"",type:"any",required:!0,allowEmpty:!1,messages:{allowEmpty:"Time Fill cannot be empty.",conform:"Time Fill cannot be empty.",required:"Time Fill cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},TimeIn:{description:"",type:"any",required:!0,allowEmpty:!1,messages:{allowEmpty:"Time In cannot be empty.",conform:"Time In cannot be empty.",required:"Time In cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},TimeOut:{description:"",type:"any"},Checker:{description:"",type:"string"},Remarks:{description:"",type:"string"},CreatedAt:{type:"any",default:Date.now()},CreatedBy:{type:"string",default:""},LastUpdatedAt:{type:"any",default:Date.now()},LastUpdatedBy:{type:"string",default:""}}}),Eb=a(24),bb={validateFields:function(e){return Eb.validate(e,Db,{cast:!0})},get:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="trolley/"+e,a.abrupt("return",We(t).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},getFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("trolley-filter/").concat(e),a.abrupt("return",We(t).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},getOne:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("trolley/").concat(e),a.abrupt("return",We(t).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},update:function(e,t){return Qe("trolley/"+e,t).then((function(e){return console.log(e),200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Updated",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="trolley/"+e,n.abrupt("return",He(a,t).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Added",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,formValid:!0,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("trolley/"+e).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))}},Sb=bb,Ob={Factory:"",Date:new Date,Shift:"",MachineList:"",FactoryTrolley:"",TimeFill:new Date,TimeIn:new Date,TimeOut:null,Checker:"",Remarks:""},kb=Ob,wb=(a(979),ff),Fb=(a(980),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={trolleyData:[]},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){void 0!==this.props.selectedFactory&&""!==this.props.selectedFactory&&this.fetchTrolleyData(this.props.selectedFactory)}},{key:"componentDidUpdate",value:function(e){this.props.selectedFactory!==e.selectedFactory&&void 0!==this.props.selectedFactory&&""!==this.props.selectedFactory&&this.fetchTrolleyData(this.props.selectedFactory)}},{key:"fetchTrolleyData",value:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:t=[],a.t0=this.props.for,a.next="Filling"===a.t0?4:"Cleaning"===a.t0?7:10;break;case 4:return a.next=6,l.a.awrap(Do("trolley/getNotUsedTrolleyDropDownData/".concat(e)).then((function(e){!0===e.code&&(t=e.data)})));case 6:return a.abrupt("break",12);case 7:return a.next=9,l.a.awrap(Do("trolley/getNotCleanTrolleyDropDownData/".concat(e)).then((function(e){!0===e.code&&(t=e.data)})));case 9:return a.abrupt("break",12);case 10:return a.next=12,l.a.awrap(Sb.get("").then((function(e){!0===e.code&&(t=e.data)})));case 12:this.setState({trolleyData:t});case 13:case"end":return a.stop()}}),null,this)}},{key:"renderOptions",value:function(){return this.state.trolleyData.map((function(e,t){return r.a.createElement(et.a,{label:"Select Trolley",value:e.id,key:e.id,name:e.TrolleyNumber},e.TrolleyNumber)}))}},{key:"handleChange",value:function(e){var t=this.state.trolleyData.find((function(t){return t.id===e.target.value}));void 0!==t?this.props.handleChange(t,this.props.propertyName,this.props.required):this.props.handleChange("",this.props.propertyName,this.props.required)}},{key:"render",value:function(){var e=this;return r.a.createElement(ya.a,{style:{width:"100%"}},r.a.createElement(Ea.a,{shrink:!0,htmlFor:"TrolleyNumber",required:!0,error:!this.props.formControl.valid},"Trolley No"),r.a.createElement(ba.a,{id:this.props.propertyName,value:void 0===this.props.selectedValue||void 0===this.props.selectedValue.id?"":this.props.selectedValue.id,style:{minWidth:140},error:!this.props.formControl.valid,onChange:function(t){return e.handleChange(t,e.props.propertyName)},margin:"dense",displayEmpty:!0},r.a.createElement(et.a,{value:""},r.a.createElement("em",null,"Select Trolley")),this.renderOptions()),r.a.createElement(Sa.a,{error:!this.props.formControl.valid,style:{display:this.props.formControl.valid?"none":""}},this.props.formControl.valid?"":this.props.formControl.message))}}]),t}(r.a.Component)),xb=Fb,Tb=xb,Nb=a(23),jb=(Object(n.forwardRef)((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),{Factory:{valid:!0,message:""},Date:{valid:!0,message:""},Shift:{valid:!0,message:""},MachineList:{valid:!0,message:""},FactoryTrolley:{valid:!0,message:""},TimeFill:{valid:!0,message:""},TimeIn:{valid:!0,message:""},Checker:{valid:!0,message:""},Remarks:{valid:!0,message:""}}),Pb=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).closeForm=function(){a.setState({formControl:Nb(jb)},(function(){return a.props.closeForm()}))},a.snackOpen=function(e,t,n){var r;return l.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(void 0===e||null===e||void 0===t||null===t){o.next=11;break}if(void 0!==n){o.next=7;break}return o.next=4,l.a.awrap(ka(e,t));case 4:r=o.sent,o.next=8;break;case 7:r=n;case 8:a.setState({snackOpen:!a.state.snackOpen,snackMessage:r,snackClass:e}),o.next=12;break;case 11:a.setState({snackOpen:!1});case 12:case"end":return o.stop()}}))},a.onSave=function(){var e=Object(me.a)({},a.state.formData),t=Object(me.a)({},a.state.formControl),n=Sb.validateFields(e);if(!n.valid)return n.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t}),void a.snackOpen("error","alertValidation");null===e.TimeOut||void 0===e.TimeOut?(e.TimeFill=new Date(e.Date).setHours(new Date(e.TimeFill).getHours(),new Date(e.TimeFill).getMinutes(),0),e.TimeIn=new Date(e.Date).setHours(new Date(e.TimeIn).getHours(),new Date(e.TimeIn).getMinutes(),0),"Add"===a.props.formAction?Sb.add("",e).then((function(e){!0===e.code?a.props.onSuccess(e.data):null!==e.errors&&Array.isArray(e.errors)?(e.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t})):a.snackOpen("error","server")})):Sb.update("",e).then((function(e){!0===e.code?a.props.onSuccess(e.data):null!==e.errors&&Array.isArray(e.errors)?(e.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t})):a.snackOpen("error","server")}))):a.snackOpen("error","","You are not allowed to update data. This Trolley already out.")},a.state={formData:a.props.formData,formOpen:a.props.formOpen,formControl:Nb(jb),disabled:!1,snackOpen:!1,snackMessage:"",snackClass:""},a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"handleChange",value:function(e,t,a){var n=Object(me.a)({},this.state.formData),r=Object(me.a)({},this.state.formControl);a&&(void 0===e||""===e?(r[t].valid=!1,"MachineList"===t&&(r[t].message="Dryer cannot be empty"),r[t].message="FactoryTrolley"===t?"Trolley cannot be empty":"".concat(t," cannot be empty")):(r[t].valid=!0,r[t].message="")),"Factory"===t&&(r.Shift.valid=!0,r.Shift.message="",r.MachineList.valid=!0,r.MachineList.message="",n.Shift="",n.MachineList=""),n[t]=e,this.setState({formData:n})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(Ae.a,{fullScreen:!0,open:this.state.formOpen,onClose:this.closeForm,TransitionComponent:this.Transition},r.a.createElement(w.a,{className:"appBar"},r.a.createElement(F.a,null,r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:this.closeForm,"aria-label":"close"},r.a.createElement(Vt.a,null)),r.a.createElement(x.a,{variant:"h6",className:"app-title"},"Trolley Filling"),r.a.createElement(he.a,{color:"inherit",disabled:this.state.disabled,onClick:this.onSave},"save"))),r.a.createElement(_e.a,null,r.a.createElement("div",{className:"form-container"},r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-evenly",alignItems:"center",md:6,xs:12,sm:12,xl:8,lg:8},r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Hr,{selectedValue:this.state.formData.Factory,propertyName:"Factory",handleChange:this.handleChange,formControl:this.state.formControl.Factory})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Da.a,{required:!0,format:"dd-MMM-yyyy",label:"Date",value:this.state.formData.Date,onChange:function(t){e.handleChange(t,"Date")},disableFuture:!0})),r.a.createElement(Sa.a,{error:!this.state.formControl.Date.valid,style:{display:this.state.formControl.Date.valid?"none":""}},this.state.formControl.Date.message)),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ns,{handleChange:this.handleChange,selectedValue:this.state.formData.Shift,formControl:this.state.formControl.Shift,propertyName:"Shift",factoryId:void 0===this.state.formData.Factory._id?this.state.formData.Factory:this.state.formData.Factory._id})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(wb,{selectedFactory:void 0===this.state.formData.Factory?"":this.state.formData.Factory._id,selectedValue:this.state.formData.MachineList,formControl:this.state.formControl.MachineList,propertyName:"MachineList",required:!0,handleChange:function(t){e.handleChange(t,"MachineList",!0)},machineType:"Dryer",abvrs:"DT,DA"})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(hl.b,{required:!0,label:"Time Fill",value:this.state.formData.TimeFill,onChange:function(t){return e.handleChange(t,"TimeFill",!0)},margin:"dense"}),r.a.createElement(Sa.a,{error:!this.state.formControl.TimeFill.valid,style:{display:this.state.formControl.TimeFill.valid?"none":""}},this.state.formControl.TimeFill.message))),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(hl.b,{required:!0,label:"Time In",value:this.state.formData.TimeIn,onChange:function(t){return e.handleChange(t,"TimeIn",!0)},margin:"dense"}),r.a.createElement(Sa.a,{error:!this.state.formControl.TimeIn.valid,style:{display:this.state.formControl.TimeIn.valid?"none":""}},this.state.formControl.TimeIn.message))),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Tb,{selectedFactory:void 0===this.state.formData.Factory?"":this.state.formData.Factory._id,selectedValue:this.state.formData.FactoryTrolley,formControl:this.state.formControl.FactoryTrolley,propertyName:"FactoryTrolley",required:!0,handleChange:function(t){e.handleChange(t,"FactoryTrolley",!0)},for:"Filling"})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{required:!0,id:"Checker",label:"Checker",defaultValue:this.state.formData.Checker,onChange:function(t){return e.handleChange(t.target.value.trim(),"Checker",!1)},margin:"dense"})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"Remarks",label:"Remarks",multiline:!0,rows:"4",defaultValue:this.state.formData.Remarks,className:"",onChange:function(t){return e.handleChange(t.target.value,"Remarks",!1)},margin:"dense"}))))))),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.snackClass,autoHideDuration:600,open:this.state.snackOpen,onClose:this.snackOpen,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.snackMessage)}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return{formOpen:e.formOpen}}}]),t}(r.a.Component),Ab=Pb,Mb=a(23),_b=(Object(n.forwardRef)((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),r.a.forwardRef((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).snackOpen=function(e,t,n){var r;return l.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(void 0===e||null===e||void 0===t||null===t){o.next=11;break}if(void 0!==n){o.next=7;break}return o.next=4,l.a.awrap(ka(e,t));case 4:r=o.sent,o.next=8;break;case 7:r=n;case 8:a.setState({snackOpen:!a.state.snackOpen,snackMessage:r,snackClass:e}),o.next=12;break;case 11:a.setState({snackOpen:!1});case 12:case"end":return o.stop()}}))},a.dialogOpen=function(e){var t;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,l.a.awrap(ka("confirmation","delete"));case 2:t=n.sent,a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:e,dialogMessage:r.a.createElement("span",null,void 0!==t?t.replace("[Name]","this record"):"")});case 4:case"end":return n.stop()}}))},a.diaLogClose=function(){a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:null})},a.onDelete=function(){var e=Object(je.a)(a.state.data),t=e.indexOf(a.state.currentDeleteData);null===a.state.currentDeleteData.TimeOut||void 0===a.state.currentDeleteData.TimeOut?void 0!==a.state.currentDeleteData&&null!==a.state.currentDeleteData&&Sb.delete(a.state.currentDeleteData._id).then((function(n){!0===n.code?(e.splice(t,1),a.setState({data:e,dialogOpen:!1},(function(){return a.snackOpen("success","delete")}))):a.setState({dialogOpen:!1},(function(){return a.snackOpen("error","server")}))})):a.setState({data:e,dialogOpen:!1},(function(){return a.snackOpen("error","","You are not allowed to update data. This Trolley already out.")}))},a.state={columns:[{title:"Factory",field:"Factory",render:function(e){return r.a.createElement("span",null,e.Factory.FctyName)}},{title:"Date",field:"Date",render:function(e){return r.a.createElement("span",null,void 0===e?"":new Date(e.Date).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric"}))}},{title:"Shift",field:"Shift",render:function(e){return r.a.createElement("span",null,e.Shift.Name)}},{title:"Dryer No",field:"MachineList",render:function(e){return r.a.createElement("span",null,e.MachineList.MachLstCode)}},{title:"Trolley No",field:"FactoryTrolley",render:function(e){return r.a.createElement("span",null,e.FactoryTrolley.TrolleyNumber)}},{title:"Time Fill",field:"TimeFill",render:function(e){return r.a.createElement("span",null,void 0===e?"":new Date(e.TimeFill).toLocaleString("en-GB",{hour:"numeric",minute:"numeric"}))}},{title:"Time In",field:"TimeIn",render:function(e){return r.a.createElement("span",null,void 0===e?"":new Date(e.TimeIn).toLocaleString("en-GB",{hour:"numeric",minute:"numeric"}))}},{title:"Checker",field:"Checker"},{title:"Remark",field:"Remarks"},{title:"Operator",field:"LastUpdatedBy"},{title:"Last Updated",field:"LastUpdatedAt",render:function(e){return r.a.createElement("span",null,void 0===e?"":new Date(e.LastUpdatedAt).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}))},editable:"never"}],data:[],formData:null,currentDeleteData:null,formOpen:!1,formAction:"",snackOpen:!1,dialogOpen:!1,alertMessage:"",dialogMessage:"",alertClass:""},a.SizeCheckModel=Mb(kb),a.openForm=a.openForm.bind(Object(Pe.a)(a)),a.closeForm=a.closeForm.bind(Object(Pe.a)(a)),a.onSuccess=a.onSuccess.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initTrolleyFilling()}},{key:"openForm",value:function(e){var t=e,a=this.state.formAction;void 0===t||null===t?(t=this.SizeCheckModel,a="Add"):a="update",this.setState({formData:t,formOpen:!this.state.formOpen,formAction:a})}},{key:"closeForm",value:function(){this.setState({formData:null,formOpen:!1,formAction:""})}},{key:"initTrolleyFilling",value:function(){var e=this;Sb.get("").then((function(t){!0===t.code?e.setState({data:t.data}):e.snackOpen("error","server")}))}},{key:"onSuccess",value:function(e){var t=this,a=Object(je.a)(this.state.data);if(void 0!==e&&null!==e)if("Add"===this.state.formAction)a.push(e),this.setState({data:a,formOpen:!this.state.formOpen,formAction:"",formData:null},(function(){return t.snackOpen("success","add")}));else{var n=a.indexOf(this.state.formData);a[n]=e,this.setState({data:a,formOpen:!this.state.formOpen,formAction:"",formData:null},(function(){return t.snackOpen("success","update")}))}else this.snackOpen("error","server")}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{container:!0,direction:"column",justify:"center",wrap:"wrap",style:{margin:"20px 20px 10px 0px"}},r.a.createElement(be.a,{item:!0,xs:12},r.a.createElement(Ve.a,{title:"Trolley Filling",columns:this.state.columns,data:this.state.data,components:{Toolbar:function(t){return r.a.createElement("div",null,r.a.createElement(Le.MTableToolbar,t),r.a.createElement("div",{style:{padding:"0px 15px"}},r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:function(){return e.openForm(t.rowData)},"aria-label":"add"},r.a.createElement(wt.a,null))))}},actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.data,columns:e.state.columns,fileName:"Trolley Filling"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.initTrolleyFilling()}},{icon:"edit",tooltip:"Edit User",onClick:function(t,a){return e.openForm(a)}},{icon:"delete",tooltip:"Delete User",onClick:function(t,a){return e.dialogOpen(a)}}],options:{}})),r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-evenly",alignItems:"center",md:10,xs:12,sm:12,xl:10,lg:10},this.state.formOpen?r.a.createElement(Ab,{formData:this.state.formData,formAction:this.state.formAction,formOpen:this.state.formOpen,onSuccess:this.onSuccess,closeForm:this.closeForm}):""),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.snackClass,autoHideDuration:600,open:this.state.snackOpen,onClose:this.snackOpen,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.snackMessage)}),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.diaLogClose,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.diaLogClose,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDelete,color:"primary"},"Delete"))))}}]),t}(r.a.Component)),Ib=_b,Rb=(a(981),a(982),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={country:[]},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initCountry()}},{key:"initCountry",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.awrap(Oa("worldCountry.json").then((function(t){e.setState({country:t.data.WorldCountry})})));case 2:case"end":return t.stop()}}))}},{key:"renderOptions",value:function(){return this.state.country.map((function(e,t){return r.a.createElement(et.a,{label:"Select Country",value:e.Name,key:e.Value,name:e.Name},e.Name)}))}},{key:"handleChange",value:function(e,t){void 0===this.props.rowData?this.props.handleChange(e.target.value,t):this.props.handleChange(e.target.value,this.props.rowData,t)}},{key:"render",value:function(){var e=this;return r.a.createElement(ya.a,{style:{width:"100%",margin:4,paddingTop:7}},r.a.createElement(Ea.a,{shrink:!0,htmlFor:"country",required:!0,error:!this.props.formControl.valid},"Country"),r.a.createElement(ba.a,{id:this.props.propertyName,value:this.props.selectedValue,error:!1===this.props.formControl.valid,displayEmpty:!0,className:"",onChange:function(t){return e.handleChange(t,e.props.propertyName)}},r.a.createElement(et.a,{value:""},r.a.createElement("em",null,"Select country")),this.renderOptions()),r.a.createElement(Sa.a,{error:!this.props.formControl.valid,style:{display:this.props.formControl.valid?"none":""}},this.props.formControl.valid?"":this.props.formControl.message))}}]),t}(r.a.Component)),Lb=Rb,Vb=a(23),Bb=(Object(n.forwardRef)((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),r.a.forwardRef((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),{Destination:{valid:!0,message:""},Country:{valid:!0,message:""},Latitude:{valid:!0,message:""},Longitude:{valid:!0,message:""},Inactive:{valid:!0,message:""}}),Ub=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).snackOpen=function(e,t){a.setState({snackOpen:!a.state.snackOpen,alertMessage:e,alertClass:t})},a.dialogOpen=function(e){a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:e,dialogMessage:r.a.createElement("span",null,"Are you sure to delete this record"," ",r.a.createElement("b",null,e.Destination)," ? This cannot be undone.")})},a.diaLogClose=function(){a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:null})},a.onDelete=function(){null!==a.state.currentDeleteData&&vu.delete("".concat(a.state.currentDeleteData._id)).then((function(e){if(!0===e.code){var t=Object(je.a)(a.state.data),n=t.indexOf(a.state.currentDeleteData);t.splice(n,1),a.setState({data:t,currentDeleteData:"",dialogOpen:!a.state.dialogOpen}),a.snackOpen("Successfully Deleted!","success")}else a.snackOpen("Oops, something went wrong while processing your request!","error")}))},a.state={formControls:Vb(Bb),columns:[{title:"Destination",field:"Destination",editComponent:function(e){return r.a.createElement(ge.a,{margin:"dense",id:"Destination",required:!0,label:"Destination",type:"text",defaultValue:e.rowData.Destination,onChange:function(t){return e.onChange(t.target.value.trim())},error:!1===a.state.formControls.Destination.valid,helperText:a.state.formControls.Destination.message})}},{title:"Country",field:"Country",render:function(e){return r.a.createElement("span",null,e.Country)},editComponent:function(e){return r.a.createElement(Lb,{selectedValue:e.value,formControl:a.state.formControls.Country,propertyName:"Country",required:!0,handleChange:function(t){e.onChange(t),a.resetFormControl(t,"Country")}})}},{title:"Latitude",field:"Latitude",editComponent:function(e){return r.a.createElement(ge.a,{margin:"dense",id:"Latitude",label:"Latitude",type:"text",defaultValue:e.rowData.Latitude,onChange:function(t){return e.onChange(t.target.value)}})}},{title:"Longitude",field:"Longitude",editComponent:function(e){return r.a.createElement(ge.a,{margin:"dense",id:"Longitude",label:"Longitude",type:"text",defaultValue:e.rowData.Longitude,onChange:function(t){return e.onChange(t.target.value)}})}},{title:"Inactive",field:"Inactive",initialEditValue:!1,lookup:{true:"Yes",false:"No"},editComponent:function(e){return r.a.createElement(Xe.a,{checked:e.value,onChange:function(t){return e.onChange(t.target.checked)},id:"input-inactive",value:e.value,color:"primary",inputProps:{"aria-label":"primary checkbox"}})}},{title:"Operator",field:"LastUpdatedBy",editable:"never"},{title:"Last Updated",field:"LastUpdatedAt",render:function(e){return r.a.createElement("span",null,void 0===e?"":new Date(e.LastUpdatedAt).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}))},editable:"never"}],data:[],currentDeleteData:"",dialogOpen:!1,snackOpen:!1,alertMessage:"",dialogMessage:"",alertClass:""},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initDestinationConfig()}},{key:"initDestinationConfig",value:function(){var e=this;vu.get("").then((function(t){if(!0===t.code){var a=Object(je.a)(e.state.data);a=t.data,e.setState({data:a})}}))}},{key:"initFormControl",value:function(){this.setState({formControls:Vb(Bb)})}},{key:"resetFormControl",value:function(e,t){var a=Object(me.a)({},this.state.formControls);void 0!==e&&null!==e&&""!==e&&(a[t].valid=!0,a[t].message=""),this.setState({formControls:a})}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{container:!0,direction:"column",justify:"center",wrap:"wrap",style:{margin:"20px 20px 10px 0px"}},r.a.createElement(be.a,{item:!0,xs:12},r.a.createElement(Ve.a,{title:"Destination",columns:this.state.columns,data:this.state.data,editable:{onRowAdd:function(t){return new Promise((function(a,n){setTimeout((function(){var r=Object(je.a)(e.state.data),o=Object(me.a)({},e.state.formControls),s=vu.validateFields(t);s.valid?vu.add("",t).then((function(t){!0===t.code?(r.push(t.data),e.snackOpen("Successfully added!","success"),e.setState({data:r},(function(){return a()}))):(n(),t.errors.map((function(e){o[e.property].valid=!1,o[e.property].message=e.message})),e.setState({formControls:o}),e.snackOpen("Please fix the error(s) highlighted to save the details!","error"))})).catch((function(t){n(),e.snackOpen("Oops, something went wrong while processing your request!","error")})):(n(),s.errors.map((function(e){o[e.property].valid=!1,o[e.property].message=e.message})),e.setState({formControls:o}))}),1e3)}))},onRowUpdate:function(t,a){return new Promise((function(n,r){setTimeout((function(){var o=Object(je.a)(e.state.data),s=e.state.formControls,i=vu.validateFields(t);i.valid?vu.update("",t).then((function(t){if(!0===t.code){var i=o.indexOf(a);o[i]=t.data,e.setState({data:o},(function(){return n()})),e.snackOpen("Successfully added!","success")}else r(),t.errors.map((function(e){return s[e.property].valid=!1,s[e.property].message=e.message,s})),e.setState({formControls:s}),e.snackOpen("Please fix the error(s) highlighted to save the details!","error")})).catch((function(t){r(),e.snackOpen("Oops, something went wrong while processing your request!","error")})):(r(),i.errors.map((function(e){s[e.property].valid=!1,s[e.property].message=e.message})),e.setState({formControls:s}))}),1e3)}))}},actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.data,columns:e.state.columns,fileName:"Broker"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.initDestinationConfig()}},{icon:"delete",tooltip:"Delete Contamination",onClick:function(t,a){return e.dialogOpen(a)}}],icons:{Clear:function(t){return r.a.createElement(Nt.a,{onClick:function(){e.initFormControl()},style:{padding:0,margin:0}})}},options:{}})),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:600,open:this.state.snackOpen,onClose:this.snackOpen,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.diaLogClose,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.diaLogClose,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDelete,color:"primary"},"Delete"))))}}]),t}(r.a.Component),qb=Ub,Gb=(a(983),{Factory:"",ShippingInstruction:"",Date:new Date(Date.now()).toLocaleDateString(),ContainerDetail:"",Weather:"",StuffingLocation:"",ShippingMethod:"",Remarks:"",Pallet:[],SequenceNumber:1,OnCheckSheet:!1}),Wb=Gb,Hb=(a(984),di),Qb=(a(985),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={containerData:[]},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){void 0!==this.props.selectedSI&&""!==this.props.selectedSI&&this.fetchContainerData()}},{key:"componentDidUpdate",value:function(e){void 0!==this.props.selectedSI&&""!==this.props.selectedSI&&this.props.selectedSI!==e.selectedSI&&this.fetchContainerData()}},{key:"fetchContainerData",value:function(){var e,t=this;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:e=[],a.t0=this.props.for,a.next="Shipping"===a.t0?4:"Stuffing"===a.t0?7:8;break;case 4:return a.next=6,l.a.awrap(Do("ContainerList/getForDropDownForShipping/".concat(this.props.selectedSI)).then((function(t){!0===t.code&&(e=t.data)})));case 6:case 7:return a.abrupt("break",10);case 8:return a.next=10,l.a.awrap(el.get("").then((function(t){!0===t.code&&(e=t.data)})));case 10:""!==this.props.existingSelection&&void 0!==this.props.existingSelection&&null!==this.props.existingSelection&&0===e.filter((function(e){return e._id===t.props.existingSelection._id})).length&&e.push(this.props.existingSelection),this.setState({containerData:e});case 12:case"end":return a.stop()}}),null,this)}},{key:"renderOptions",value:function(){return this.state.containerData.map((function(e,t){return r.a.createElement(et.a,{label:"Select Container",value:e._id,key:e._id,name:e.Container},e.Container)}))}},{key:"handleChange",value:function(e,t){var a=this.state.containerData.find((function(t){return t._id===e.target.value}));void 0!==a?this.props.handleChange(a,t,this.props.required):this.props.handleChange("",t,this.props.required)}},{key:"render",value:function(){var e=this;return r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(Ea.a,{shrink:!0,htmlFor:"Container",required:!0,error:!this.props.formControl.valid},"Container"),r.a.createElement(ba.a,{id:this.props.propertyName,value:void 0===this.props.selectedValue._id?"":this.props.selectedValue._id,error:!this.props.formControl.valid,onChange:function(t){return e.handleChange(t,e.props.propertyName)},margin:"dense",displayEmpty:!0},r.a.createElement(et.a,{value:""},r.a.createElement("em",null,"Select Container")),this.renderOptions()),r.a.createElement(Sa.a,{error:!this.props.formControl.valid,style:{display:this.props.formControl.valid?"none":""}},this.props.formControl.valid?"":this.props.formControl.message))}}]),t}(r.a.Component)),zb=Qb,Yb=zb,Kb=(a(986),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={palletData:[]},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){"Shipping"===this.props.for&&void 0!==this.props.selectedSI&&""!==this.props.selectedSI&&this.fetchSIData()}},{key:"componentDidUpdate",value:function(e){"Shipping"===this.props.for&&this.props.selectedSI!==e.selectedSI&&void 0!==this.props.selectedSI&&""!==this.props.selectedSI&&this.fetchSIData()}},{key:"fetchSIData",value:function(){var e;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:e=[],t.t0=this.props.for,t.next="Shipping"===t.t0?4:7;break;case 4:return t.next=6,l.a.awrap(Do("Pallet/getForDropDownForShipping/".concat(this.props.selectedSI)).then((function(t){!0===t.code&&(e=t.data)})));case 6:return t.abrupt("break",9);case 7:return t.next=9,l.a.awrap(qv.get("").then((function(t){!0===t.code&&(e=t.data)})));case 9:this.setState({palletData:e});case 10:case"end":return t.stop()}}),null,this)}},{key:"renderOptions",value:function(){return this.state.palletData.map((function(e,t){return r.a.createElement(et.a,{label:"Select Pallet",value:e._id,key:e._id,name:e.SeqPallet},e.SeqPallet)}))}},{key:"handleChange",value:function(e,t){var a=this.state.palletData.find((function(t){return t._id===e.target.value}));void 0!==a?this.props.handleChange(a,t,this.props.required):this.props.handleChange("",t,this.props.required)}},{key:"render",value:function(){var e=this;return r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(Ea.a,{shrink:!0,htmlFor:"SI"},"Pallet #"),r.a.createElement(ba.a,{id:this.props.propertyName,value:void 0===this.props.selectedValue._id?"":this.props.selectedValue._id,onChange:function(t){return e.handleChange(t,e.props.propertyName)},margin:"dense",displayEmpty:!0},r.a.createElement(et.a,{value:""},r.a.createElement("em",null,"Select Pallet")),this.renderOptions()))}}]),t}(r.a.Component)),Jb=Kb,Zb=Jb,Xb=a(23),$b={Factory:{valid:!0,message:""},ShippingInstruction:{valid:!0,message:""},Date:{valid:!0,message:""},ContainerDetail:{valid:!0,message:""},Cleanliness:{valid:!0,message:""},Weather:{valid:!0,message:""},StuffingLocation:{valid:!0,message:""},ShippingMethod:{valid:!0,message:""},Pallet:{value:!0,message:""}},eS=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).closeForm=function(){a.setState({formControl:Xb($b)},(function(){return a.props.closeForm()}))},a.snackOpen=function(e,t,n){var r;return l.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(void 0===e||null===e||void 0===t||null===t){o.next=11;break}if(void 0!==n){o.next=7;break}return o.next=4,l.a.awrap(ka(e,t));case 4:r=o.sent,o.next=8;break;case 7:r=n;case 8:a.setState({snackOpen:!a.state.snackOpen,snackMessage:r,snackClass:e}),o.next=12;break;case 11:a.setState({snackOpen:!1});case 12:case"end":return o.stop()}}))},a.dialogOpen=function(e){var t;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(void 0===e||null===e){n.next=7;break}return n.next=3,l.a.awrap(ka("confirmation","delete"));case 3:t=n.sent,a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:e,dialogMessage:r.a.createElement("span",null,void 0!==t?t.replace("[Name]",e.Grade.GradeName):"")}),n.next=8;break;case 7:a.setState({dialogOpen:!1});case 8:case"end":return n.stop()}}))},a.onDetect=function(e){var t=Object(je.a)(a.state.SelectedPallets),n=e.codeResult.code;qv.getOneCreatePallet("".concat(n)).then((function(e){if(!0===e.code)if(0===t.filter((function(t){return t._id===e.data._id})).length){if(["Container","Loosebale"].includes(a.state.formData.ShippingMethod.Name)&&a.state.formData.ContainerDetail.Qty===t.length)return void a.snackOpen("error","","Container maximum pallet reach, please choose another container and continue again!");t.push(e.data),a.snackOpen("success","add"),a.setState({SelectedPallets:t})}else a.snackOpen("error","","You already scanned this pallet!");else a.snackOpen("error","server")})).catch((function(e){a.snackOpen("error","server")}))},a.onSave=function(){var e=Object(me.a)({},a.state.formData),t=Object(me.a)({},a.state.formControl);e.Pallet=a.state.SelectedPallets;var n=hi.validateFields(e);return n.valid?["Container","Loosebale"].includes(a.state.formData.ShippingMethod.Name)&&""===a.state.formData.ContainerDetail?(t.ContainerDetail.valid=!1,t.ContainerDetail.message="Container cannot be empty",a.setState({formControl:t}),void a.snackOpen("error","alertValidation")):void("Add"===a.props.formAction?hi.add("",e).then((function(n){if(!0===n.code){var r=n.data;r.SelectedPallets=e.SelectedPallets,a.props.onSuccess(r)}else null!==n.errors&&Array.isArray(n.errors)?(n.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t})):a.snackOpen("error","server")})):hi.update("",e).then((function(n){if(!0===n.code){var r=n.data;r.SelectedPallets=e.SelectedPallets,a.props.onSuccess(r)}else null!==n.errors&&Array.isArray(n.errors)?(n.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t})):a.snackOpen("error","server")}))):(n.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t}),void a.snackOpen("error","alertValidation"))},a.state={formData:a.props.formData,formOpen:a.props.formOpen,columns:[{title:"Production No.",field:"SeqPallet"},{title:"Export Pallet No.",field:"ExportPallet"},{title:"Date",field:"ProductionDate",render:function(e){return r.a.createElement("span",null,new Date(e.ProductionDate).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric"}))}},{title:"Pallet Weight (kg)",field:"PalletWeight"},{title:"Pallet Status",field:"PalletStatus"}],formControl:Xb($b),SelectedPallets:a.props.formData.Pallet,StuffedWeight:a.props.formData.Pallet.reduce((function(e,t){return e+t.PalletWeight}),0),StuffedQty:a.props.formData.Pallet.length,currentDeleteData:null,disabled:!1,dialogOpen:!1,dialogMessage:"",snackOpen:!1,snackMessage:"",snackClass:"",palletData:[],mode:"Barcode",startScan:!0},a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a.handlePalletChange=a.handlePalletChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"initFormControl",value:function(){this.setState({formControl:Xb($b)})}},{key:"resetFormControl",value:function(e,t){var a=Object(me.a)({},this.state.formControl);void 0!==e&&null!==e&&""!==e&&(a[t].valid=!0,a[t].message=""),this.setState({formControl:a})}},{key:"handleChange",value:function(e,t,a){var n,r;return l.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(n=Object(me.a)({},this.state.formData),r=Object(me.a)({},this.state.formControl),!a){o.next=14;break}if(void 0!==e&&""!==e){o.next=12;break}return r[t].valid=!1,o.t0=t,o.next=8,l.a.awrap(ka("validation","empty"));case 8:o.t1=o.sent,r[t].message=o.t0+o.t1,o.next=14;break;case 12:r[t].valid=!0,r[t].message="";case 14:if("Factory"===t&&(n.ShippingInstruction=""),"ShippingInstruction"!==t){o.next=18;break}return o.next=18,l.a.awrap(hi.getFilter("?ShippingInstruction=".concat(e._id)).then((function(e){var t=e.data;n.SequenceNumber=t.length+1})));case 18:n[t]=e,this.setState({formData:n});case 20:case"end":return o.stop()}}),null,this)}},{key:"handlePalletChange",value:function(e,t){var a,n;return l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(a=Object(je.a)(this.state.SelectedPallets),!t){r.next=12;break}if(-1!==a.indexOf(e)){r.next=9;break}if(!["Container","Loosebale"].includes(this.state.formData.ShippingMethod.Name)||this.state.formData.ContainerDetail.Qty!==a.length){r.next=6;break}return this.snackOpen("error","","Container maximum pallet reach, please choose another container and continue again!"),r.abrupt("return");case 6:a.push(e),r.next=10;break;case 9:this.snackOpen("error","","You already choose this pallet!");case 10:r.next=14;break;case 12:n=a.indexOf(e),a.splice(n,1);case 14:this.setState({SelectedPallets:a});case 15:case"end":return r.stop()}}),null,this)}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{container:!0},r.a.createElement(Ae.a,{fullScreen:!0,open:this.state.formOpen,onClose:this.closeForm,TransitionComponent:this.Transition},r.a.createElement(w.a,{className:"appBar"},r.a.createElement(F.a,null,r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:this.closeForm,"aria-label":"close"},r.a.createElement(Vt.a,null)),r.a.createElement(x.a,{variant:"h6",className:"app-title"},"Shipping Review"),r.a.createElement(he.a,{color:"inherit",disabled:this.state.disabled,onClick:this.onSave},"save"))),r.a.createElement(_e.a,null,r.a.createElement("div",{className:"form-container"},r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-around",alignItems:"center",md:10,xs:12,sm:12,xl:10,lg:10},r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Hr,{selectedValue:this.state.formData.Factory,propertyName:"Factory",handleChange:this.handleChange,formControl:this.state.formControl.Factory,disabled:void 0!==this.state.formData._id,required:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:4},margin:"dense"},r.a.createElement(xa,{jsonFileName:"shipping",jsonPropertyName:"ShippingMethod",formControl:this.state.formControl.ShippingMethod,propertyName:"ShippingMethod",required:!0,label:"Shipping Method",handleChange:this.handleChange,selectedValue:this.state.formData.ShippingMethod.Value})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Hb,{selectedValue:this.state.formData.ShippingInstruction,propertyName:"ShippingInstruction",handleChange:this.handleChange,formControl:this.state.formControl.ShippingInstruction,required:!0,for:"Shipping",selectedFactory:this.state.formData.Factory._id,existingSelection:this.props.formData.ShippingInstruction})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"Sequence",label:"Sequence Number",value:this.state.formData.SequenceNumber,margin:"dense",disabled:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:4,display:["Container","Loosebale"].includes(this.state.formData.ShippingMethod.Name)?"":"none"}},r.a.createElement(Yb,{selectedValue:this.state.formData.ContainerDetail,propertyName:"ContainerDetail",handleChange:this.handleChange,formControl:this.state.formControl.ContainerDetail,required:!0,for:"Shipping",selectedSI:this.state.formData.ShippingInstruction._id,existingSelection:this.props.formData.ContainerDetail})),r.a.createElement(ya.a,{style:{width:"100%",margin:4},margin:"dense"},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Da.a,{required:!0,format:"dd-MMM-yyyy",label:"Date",value:this.state.formData.Date,onChange:function(t){return e.handleChange(t,"Date",!0)},disableFuture:!0}))),r.a.createElement(ya.a,{style:{width:"100%",margin:4},margin:"dense"},r.a.createElement(xa,{jsonFileName:"shipping",jsonPropertyName:"Weather",formControl:this.state.formControl.Weather,propertyName:"Weather",required:!0,label:"Weather",handleChange:this.handleChange,selectedValue:this.state.formData.Weather.Value})),r.a.createElement(ya.a,{style:{width:"100%",margin:4},margin:"dense"},r.a.createElement(xa,{jsonFileName:"shipping",jsonPropertyName:"StuffingLocation",formControl:this.state.formControl.StuffingLocation,propertyName:"StuffingLocation",required:!0,label:"Stuffing Location",handleChange:this.handleChange,selectedValue:this.state.formData.StuffingLocation.Value})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"Grade",label:"Grade",value:void 0===this.state.formData.ShippingInstruction.ProductGrade?"":this.state.formData.ShippingInstruction.ProductGrade.GradeCode,margin:"dense",disabled:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"PckType",label:"Packing Type",value:void 0===this.state.formData.ShippingInstruction.PackingType?"":this.state.formData.ShippingInstruction.PackingType.PckTypeName,margin:"dense",disabled:!0})),r.a.createElement(be.a,{style:{display:["Container","Loosebale"].includes(this.state.formData.ShippingMethod.Name)?"":"none"}},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{id:"ContainerWeight",label:"Container Qty (pallet)",customInput:ge.a,value:this.state.formData.ContainerDetail.Qty,margin:"dense",disabled:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{id:"ContainerStuffedQty",label:"Container Stuffed (pallet)",customInput:ge.a,value:this.state.SelectedPallets.length,margin:"dense",disabled:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{id:"ContainerBalance",label:"Container Balance (pallet)",customInput:ge.a,value:this.state.formData.ContainerDetail.Qty-this.state.SelectedPallets.length,margin:"dense",disabled:!0}))),r.a.createElement(be.a,{style:{display:["Container","Loosebale"].includes(this.state.formData.ShippingMethod.Name)?"none":""}},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{id:"SIWeight",label:"SI Qty (kg)",customInput:ge.a,value:this.state.formData.ShippingInstruction.Weight,decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0,margin:"dense",disabled:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{id:"SIStuffedWeight",label:"SI Stuffed (kg)",customInput:ge.a,value:this.state.SelectedPallets.reduce((function(e,t){return e+t.PalletWeight}),0),decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0,margin:"dense",disabled:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{id:"SIBalance",label:"SI Balance (kg)",customInput:ge.a,value:this.state.formData.ShippingInstruction.Weight-this.state.SelectedPallets.reduce((function(e,t){return e+t.PalletWeight}),0),decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0,margin:"dense",disabled:!0}))),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"Remarks",label:"Remarks",defaultValue:this.state.formData.Remarks,className:"",onChange:function(t){return e.handleChange(t.target.value,"Remarks",!1)},margin:"dense"})),r.a.createElement(ya.a,{style:{width:"100%",margin:4,display:["Container","Loosebale"].includes(this.state.formData.ShippingMethod.Name)?"":"none"}},r.a.createElement(x.a,{variant:"caption",display:"block",gutterBottom:!0},"Container Status :",r.a.createElement("span",{style:{color:"red"}},0===this.state.SelectedPallets.length?"Open":this.state.formData.ContainerDetail.Qty===this.state.SelectedPallets.length?"Close":"Partial")))),r.a.createElement(be.a,{alignItems:"stretch",wrap:"wrap",style:{height:"100%"},md:11,xs:12,sm:12},r.a.createElement(io.a,{"aria-label":"position",name:"position",value:this.state.mode,onChange:function(t){e.setState({mode:t.target.value,startScan:"Barcode"===t.target.value})},row:!0},r.a.createElement(ye.a,{value:"Barcode",control:r.a.createElement(lo.a,{color:"primary"}),label:"Barcode",labelPlacement:"end"}),r.a.createElement(ye.a,{value:"Manual",control:r.a.createElement(lo.a,{color:"primary"}),label:"Manual",labelPlacement:"end"}))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(be.a,{style:{display:"Manual"===this.state.mode?"none":""}},r.a.createElement(SC,{startScan:this.state.startScan,OnDetect:this.onDetect})),r.a.createElement(be.a,{style:{display:"Manual"===this.state.mode?"":"none"}},r.a.createElement(Zb,{selectedValue:"",propertyName:"Pallet",handleChange:function(t){return e.handlePalletChange(t,!0)},required:!0,for:"Shipping",selectedSI:this.state.formData.ShippingInstruction._id})),r.a.createElement(Ve.a,{style:{width:"100%",margin:4},title:"PALLET ASSIGNMENT",columns:this.state.columns,data:this.state.SelectedPallets,options:{search:!1},actions:[{icon:"delete",tooltip:"Delete",onClick:function(t,a){return e.handlePalletChange(a,!1)}}]})))))),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.snackClass,autoHideDuration:600,open:this.state.snackOpen,onClose:this.snackOpen,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.snackMessage)}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return{formOpen:e.formOpen}}}]),t}(r.a.Component),tS=eS,aS=tS,nS=a(23),rS=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).snackOpen=function(e,t){var n;return l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0===e||null===e||void 0===t||null===t){r.next=7;break}return r.next=3,l.a.awrap(ka(e,t));case 3:n=r.sent,a.setState({snackOpen:!a.state.snackOpen,alertMessage:n,alertClass:e}),r.next=8;break;case 7:a.setState({snackOpen:!1});case 8:case"end":return r.stop()}}))},a.dialogOpen=function(e){var t;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,l.a.awrap(ka("confirmation","delete"));case 2:t=n.sent,a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:e,dialogMessage:r.a.createElement("span",null,void 0!==t?t.replace("[Name]",e.Factory.FctyName):"")});case 4:case"end":return n.stop()}}))},a.diaLogClose=function(){a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:null})},a.onDelete=function(){null!==a.state.currentDeleteData&&hi.delete("".concat(a.state.currentDeleteData._id)).then((function(e){if(!0===e.code){var t=Object(je.a)(a.state.data),n=t.indexOf(a.state.currentDeleteData);t.splice(n,1),a.setState({data:t,currentDeleteData:"",dialogOpen:!a.state.dialogOpen},(function(){return a.snackOpen("success","delete")}))}else a.snackOpen("error","server")}))},a.state={columns:[{title:"Factory",field:"Factory",render:function(e){return r.a.createElement("span",null,e.Factory.FctyCode)}},{title:"SI #",render:function(e){return r.a.createElement("span",null,e.ShippingInstruction.SINo)}},{title:"Date",render:function(e){return r.a.createElement("span",null,new Date(e.Date).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric"}))}},{title:"Grade",render:function(e){return r.a.createElement("span",null,e.ShippingInstruction.ProductGrade.GradeName)}},{title:"Packing Type",render:function(e){return r.a.createElement("span",null,e.ShippingInstruction.PackingType.PckTypeName)}},{title:"Total Pallet",render:function(e){return r.a.createElement("span",null,e.Pallet.length)}},{title:"Stuffing Location",field:"StuffingLocation",render:function(e){return r.a.createElement("span",null,e.StuffingLocation.Name)}},{title:"Operator",field:"LastUpdatedBy"},{title:"Last Updated",field:"LastUpdatedAt",render:function(e){return r.a.createElement("span",null,new Date(e.LastUpdatedAt).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}))}}],data:[],formData:null,currentDeleteData:null,formOpen:!1,formAction:"",dialogOpen:!1,snackOpen:!1,alertMessage:"",dialogMessage:"",alertClass:""},a.shippingModel=nS(Wb),a.onSuccess=a.onSuccess.bind(Object(Pe.a)(a)),a.closeForm=a.closeForm.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initShipping()}},{key:"initShipping",value:function(){var e=this;hi.get("").then((function(t){!0===t.code&&e.setState({data:t.data})}))}},{key:"openForm",value:function(e){var t,a=nS(e);void 0===e||null===e?(a=nS(this.shippingModel),t="Add"):t="update",this.setState({formData:a,formOpen:!this.state.formOpen,formAction:t})}},{key:"closeForm",value:function(){this.setState({formData:null,formOpen:!1,formAction:""})}},{key:"onSuccess",value:function(e){var t=this,a=Object(je.a)(this.state.data);if(void 0!==e&&null!==e)if("Add"===this.state.formAction)a.push(e),this.setState({data:a,formOpen:!this.state.formOpen,formAction:"",currentRowData:null},(function(){return t.snackOpen("success","add")}));else{var n=a.find((function(e){return e._id===t.state.formData._id})),r=a.indexOf(n);a[r]=e,this.setState({data:a,formOpen:!this.state.formOpen,formAction:"",currentRowData:null},(function(){return t.snackOpen("success","update")}))}else this.snackOpen("error","server")}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{container:!0,direction:"column",justify:"center",wrap:"wrap",style:{margin:"20px 20px 10px 0px"}},r.a.createElement(be.a,{item:!0,xs:12},r.a.createElement(Ve.a,{title:"Shipping",columns:this.state.columns,data:this.state.data,components:{Toolbar:function(t){return r.a.createElement("div",null,r.a.createElement(Le.MTableToolbar,t),r.a.createElement("div",{style:{padding:"0px 15px"}},r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:function(){return e.openForm()},"aria-label":"add"},r.a.createElement(wt.a,null))))}},actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.data,columns:e.state.columns,fileName:"Allocation To Shipping"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.initShipping()}},{icon:"edit",tooltip:"Edit",onClick:function(t,a){return e.openForm(a)}},{icon:"delete",tooltip:"Delete",onClick:function(t,a){return e.dialogOpen(a)}}]})),r.a.createElement(be.a,{item:!0,xs:12},this.state.formOpen?r.a.createElement(aS,{formAction:this.state.formAction,formData:this.state.formData,formOpen:this.state.formOpen,onSuccess:this.onSuccess,closeForm:this.closeForm}):""),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:600,open:this.state.snackOpen,onClose:this.snackOpen,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.diaLogClose,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.diaLogClose,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDelete,color:"primary"},"Delete"))))}}]),t}(r.a.Component),oS=rS,sS=(a(987),Ls),iS=a(23),lS=(Object(n.forwardRef)((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),r.a.forwardRef((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),{Factory:"",Year:new Date,Option:"SI",Picking:""}),cS=[{DisplayName:"Pallet Number",Key:"SeqPallet"},{DisplayName:"Pallet Date",Key:"ProductionDate"},{DisplayName:"Test Date",Key:"TestDate"},{DisplayName:"Packing Type",Key:"PackingType"},{DisplayName:"Pallet Weight",Key:"PalletWeight"},{DisplayName:"Dirt",Key:"Dirt"},{DisplayName:"Ash",Key:"Ash"},{DisplayName:"VM",Key:"VM"},{DisplayName:"Nitrogen",Key:"Nitrogen"},{DisplayName:"PO",Key:"PO"},{DisplayName:"P30",Key:"P30"},{DisplayName:"PRI",Key:"PRI"},{DisplayName:"Mooney",Key:"Mooney"},{DisplayName:"Gel",Key:"Gel"},{DisplayName:"SVI",Key:"SVI"},{DisplayName:"Asht",Key:"Asht"},{DisplayName:"Offspec",Key:"Offspec"}],uS=[{DisplayName:"Lot Number",Key:"LotNumber"},{DisplayName:"Lot Date",Key:"LotDate"},{DisplayName:"Pallet Number",Key:"SeqPallet"},{DisplayName:"Test Date",Key:"TestDate"},{DisplayName:"Packing Type",Key:"PackingType"},{DisplayName:"Lot Weight",Key:"LotWeight"}],dS=[{DisplayName:"SI Number",Key:"SINo"},{DisplayName:"Contract No.",Key:"Contract"},{DisplayName:"Destination",Key:"Destination"},{DisplayName:"Port of Shipment",Key:"PortOfShipment"},{DisplayName:"Buyer",Key:"Buyer"},{DisplayName:"Grade",Key:"Grade"},{DisplayName:"SI Date",Key:"SIDate"},{DisplayName:"SI Weight",Key:"SIWeight"},{DisplayName:"Lot Number",Key:"LotNumber"},{DisplayName:"Lot Date",Key:"LotDate"},{DisplayName:"Packing Type",Key:"PackingType"},{DisplayName:"Lot Weight",Key:"LotWeight"}],mS=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).snackOpen=function(e,t,n){var r;return l.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(void 0===e||null===e||void 0===t||null===t){o.next=11;break}if(void 0!==n){o.next=7;break}return o.next=4,l.a.awrap(ka(e,t));case 4:r=o.sent,o.next=8;break;case 7:r=n;case 8:a.setState({snackOpen:!a.state.snackOpen,snackMessage:r,snackClass:e}),o.next=12;break;case 11:a.setState({snackOpen:!1});case 12:case"end":return o.stop()}}))},a.handleChange=function(e,t,n){var r=Object(me.a)({},a.state.formData);r[t]=e,a.setState({formData:r,formDirty:!0}),"Picking"!==t?""!==r.Factory&&a.fetchSILotPalletForDeleteDropDownData(r.Factory._id,r.Year.getFullYear(),r.Option):Do("getSILotPalletDetailForDelete/".concat(e,"/").concat(r.Option)).then((function(e){if(!0===e.code){var t=[];switch(a.state.formData.Option){case"SI":t=e.data.map((function(e){var t=e;return t.SINo=e.ShippingInstruction.SINo,t.Contract=e.ShippingInstruction.Contract,t.Destination=e.ShippingInstruction.Destination.Destination,t.PortOfShipment=e.ShippingInstruction.PortOfShipment,t.Buyer=e.ShippingInstruction.Buyer.name,t.SIDate=new Date(e.ShippingInstruction.Date).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric"}),t.SIWeight=e.ShippingInstruction.Weight,t.PackingType=e.PackingType.PckTypeName,t.Grade=e.ProductGrade.GradeCode,t.LotDate=new Date(e.LotDate).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric"}),t})),a.setState({pickingDetails:e.data,pickingDetailColumns:iS(dS)});break;case"Lot":t=e.data.map((function(e){var t=e;return t.LotNumber=e.Lot.LotNumber,t.LotDate=new Date(e.Lot.LotDate).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric"}),t.TestDate=new Date(e.TestDate).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric"}),t.PackingType=e.PackingType.PckTypeName,t.LotWeight=e.Lot.LotWeight,t})),a.setState({pickingDetails:e.data,pickingDetailColumns:iS(uS)});break;case"Pallet":t=e.data.map((function(e){var t=e;return t.SeqPallet=e.Pallet.SeqPallet,t.ProductionDate=new Date(e.Pallet.ProductionDate).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric"}),t.TestDate=new Date(e.Pallet.TestDate).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric"}),t.PackingType=e.Pallet.PackingType.PckTypeName,t.PalletWeight=e.Pallet.PalletWeight,t.Offspec=e.Offspec?"Yes":"No",t})),a.setState({pickingDetails:t,pickingDetailColumns:iS(cS)})}}}))},a.onSave=function(){var e=Object(me.a)({},a.state.formData);void 0!==e&&null!==e?Qe("Common/deletePicking",{Option:e.Option,PickingId:e.Picking}).then((function(e){200===e.status&&null!==e.data.data&&null===e.data.errors?(a.snackOpen("success","delete"),a.fetchSILotPalletForDeleteDropDownData(a.state.formData.Factory._id,a.state.formData.Year.getFullYear(),a.state.formData.Option)):200===e.status&&null!==e.data.errors&&a.snackOpen("error","",e.data.errors[0].error)})).catch((function(e){a.snackOpen("error","server")})):a.snackOpen("error","server")},a.state={formData:iS(lS),pickings:[],pickingDetails:[],pickingDetailColumns:[],formDirty:!1,factoryData:[],productGradeData:[],packingTypeData:[],dialogOpen:!1,snackOpen:!1,alertMessage:"",dialogMessage:"",alertClass:""},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"fetchSILotPalletForDeleteDropDownData",value:function(e,t,a){var n=this;return l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:Do("getSILotPalletForDeleteDropDownData/".concat(e,"/").concat(t,"/").concat(a)).then((function(e){if(!0===e.code){var t=Object(me.a)({},n.state.formData);t.Picking="",n.setState({pickings:e.data,formData:t,pickingDetails:[],pickingDetailColumns:[]})}}));case 1:case"end":return r.stop()}}))}},{key:"renderOptions",value:function(){return this.state.pickings.map((function(e,t){return r.a.createElement(et.a,{label:"SI/Lot/Pallet",value:e._id,key:e.Number,name:e.Number},e.Number)}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"form-container"},r.a.createElement(be.a,{container:!0,direction:"column",justify:"flex-start",alignItems:"stretch",wrap:"wrap",style:{margin:"4px 10px 30px 0px",height:"100%"},md:8,xs:12},r.a.createElement(x.a,{variant:"overline",display:"block",gutterBottom:!0},"Delete Picking"),r.a.createElement(be.a,{item:!0,style:{marginTop:2}},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Hr,{selectedValue:this.state.formData.Factory,propertyName:"Factory",required:!1,handleChange:this.handleChange,formControl:So(this.state.formData.Factory,"empty",this.state.formDirty)?{valid:!0,message:""}:{valid:!1,message:"Factory cannot be Empty"}}))),r.a.createElement(be.a,{item:!0,style:{marginTop:2}},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Da.a,{style:{width:"100%"},margin:"dense",id:"date-picker-dialog",label:"Year",views:["year"],disablefuture:!0,value:this.state.formData.Year,onChange:function(t){return e.handleChange(new Date(t),"Year",!0)}})))),r.a.createElement(be.a,{item:!0},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Ea.a,{shrink:!0,htmlFor:"dllOption",required:!0,margin:"dense"},"Option"),r.a.createElement(ba.a,{id:"dllOption",value:this.state.formData.Option,onChange:function(t){return e.handleChange(t.target.value,"Option",!0)}},r.a.createElement(et.a,{label:"SI #",value:"SI",key:"SI",name:"SI"},"SI"),r.a.createElement(et.a,{label:"Lot #",value:"Lot",key:"Lot",name:"Lot"},"Lot"),r.a.createElement(et.a,{label:"Pallet #",value:"Pallet",key:"Pallet",name:"Pallet"},"Pallet")))),r.a.createElement(be.a,{item:!0},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Ea.a,{shrink:!0,htmlFor:"dllPicking",required:!0,margin:"dense"},"SI/Lot/Pallet"),r.a.createElement(ba.a,{id:"dllPicking",value:this.state.formData.Picking,onChange:function(t){return e.handleChange(t.target.value,"Picking",!0)},displayEmpty:!0},r.a.createElement(et.a,{value:""},r.a.createElement("em",null,"Select SI/Lot/Pallet")),this.renderOptions()))),r.a.createElement(be.a,{item:!0},r.a.createElement(sS,{columns:this.state.pickingDetailColumns,row:this.state.pickingDetails,order:"asc",orderBy:"LastUpdatedAt",rowsPerPage:25})),r.a.createElement(be.a,{item:!0,style:{margin:5}},r.a.createElement(he.a,{onClick:this.onSave,variant:"outlined",color:"primary",style:{marginRight:5}},"Delete"),r.a.createElement(he.a,{variant:"outlined",style:{marginRight:5},color:"secondary",href:"DeletePicking"},"Cancel")),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.snackClass,autoHideDuration:600,open:this.state.snackOpen,onClose:this.snackOpen,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.snackMessage)})))}}]),t}(r.a.Component),pS=mS,fS={properties:{Factory:{description:"",type:["string","object"],conform:function(e){return 0!==e&&void 0!==e||(console.log(e),!1)}},Multiple:{description:"",type:"boolean",default:!1},NumberingFor:{description:"",type:["number"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Numbering For cannot be empty.",conform:"Numbering For cannot be empty.",required:"Numbering For cannot be empty."}},RepeatEach:{description:"",type:"string",default:""},Period:{description:"",type:"any",conform:function(e){return!(0===e||""===e||void 0===e)}},JobFormat:{description:"",type:"string",default:""},SampleResult:{description:"",type:"string",default:""},StartWithNumber:{type:"number",default:""},CreatedAt:{type:"any",default:new Date},CreatedBy:{type:"string",default:""},LastUpdatedAt:{type:"any",default:new Date},LastUpdatedBy:{type:"string",default:""}}},hS=a(24),gS={validateFields:function(e){var t=hS.validate(e,fS,{cast:!0});return console.log(t),t},get:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="numbering/"+e,a.abrupt("return",We(t).then((function(e){return e})).then((function(e){if(200===e.status&&null!==e.data.data){var t=e.data.data.map((function(e){return e}));return console.log(t),{code:!0,formValid:!0,message:"Succeed",data:t}}if(200===e.status&&null===e.data.data)return{code:!1,message:e.data.message,data:null}})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},getFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("numbering-filter/").concat(e),a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},getOne:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("numbering/").concat(e),a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},update:function(e,t){return console.log(t),Qe("numbering/"+e,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Updated",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="numbering/"+e,console.log(t),n.abrupt("return",He(a,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Added",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,formValid:!0,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 3:case"end":return n.stop()}}))},delete:function(e){return ze("numbering/"+e).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))}},yS=gS,vS={Country:"",Factory:"",NumberingFor:"",Multiple:!1,RepeatEach:"",Period:new Date,JobFormat:"",StartWithNumber:"",SampleResult:""},CS=vS,DS=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={factoryData:[]},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initFactory()}},{key:"initFactory",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.awrap(Qa.get("").then((function(t){!0===t.code&&e.setState({factoryData:t.data})})));case 2:case"end":return t.stop()}}))}},{key:"renderOptions",value:function(){return this.state.factoryData.map((function(e,t){return r.a.createElement(et.a,{label:"Select factory",value:e._id,key:e._id,name:e.FctyCode},r.a.createElement(E.a,{style:{width:"100%"}},r.a.createElement(b.a,{alignItems:"flex-start"},r.a.createElement(S.a,{primary:e.FctyName,style:{width:"50%"}}),r.a.createElement(S.a,{primary:e.FctyCode,style:{width:"50%"}}))))}))}},{key:"handleChange",value:function(e){var t=this.state.factoryData.find((function(t){return t._id===e.target.value}));void 0!==t?this.props.handleChange(t,this.props.propertyName,!1):this.props.handleChange("",this.props.propertyName,!1)}},{key:"render",value:function(){var e=this;return r.a.createElement(ya.a,{style:{width:"100%",margin:4,paddingTop:7},margin:"dense",disabled:this.props.disabled},r.a.createElement(Ea.a,{shrink:!0,htmlFor:"factory"},"Factory - Code"),r.a.createElement(ba.a,{id:this.props.propertyName,value:void 0===this.props.selectedValue||void 0===this.props.selectedValue._id?"":this.props.selectedValue._id,style:{minWidth:190},error:!this.props.formControl.valid,onChange:function(t){return e.handleChange(t)},displayEmpty:!0},r.a.createElement(et.a,{value:""},r.a.createElement("em",null,"Select factory")),this.renderOptions()),r.a.createElement(Sa.a,{error:!this.props.formControl.valid,style:{display:this.props.formControl.valid?"none":""}},this.props.formControl.valid?"":this.props.formControl.message))}}]),t}(n.Component),ES=DS,bS=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={formControls:{Factory:{valid:!0,message:"",value:a.props.formData.Factory},NumberingFor:{valid:!0,message:"",value:a.props.formData.NumberingFor},Multiple:{valid:!0,message:"",value:a.props.formData.Multiple},RepeatEach:{valid:!0,message:"",value:a.props.formData.RepeatEach},Period:{valid:!0,message:""},JobFormat:{valid:!0,message:"",value:a.props.formData.JobFormat},StartWithNumber:{valid:!0,message:"",value:a.props.formData.StartWithNumber},SampleResult:{valid:!0,message:"",value:a.props.formData.SampleResult}},formState:{valid:!0,dirty:!1,errors:[]}},a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"handleChange",value:function(e,t){var a=this.state.formControls,n=this.state.formState;void 0===e||0===e.length?(a[t].valid=!1,a[t].message="".concat(t," cannot be empty.")):(a[t].valid=!0,a[t].message=""),this.props.handleChange(e,t),a[t].value=e,n.dirty=!0,this.setState({formControls:a,formState:n})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"form-container"},r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-evenly",alignItems:"center",md:6,xs:12,sm:12,xl:8,lg:8},r.a.createElement(be.a,{item:!0,md:12,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(xa,{jsonFileName:"numbering",jsonPropertyName:"Numbering",formControl:this.state.formControls.NumberingFor,propertyName:"NumberingFor",required:!0,label:"Numbering for",handleChange:this.handleChange,onChange:function(t){return e.handleChange(t.target.value,"NumberingFor",!0)},selectedValue:this.state.formControls.NumberingFor.value,error:!this.state.formControls.NumberingFor.valid,helperText:this.state.formControls.NumberingFor.message}))),r.a.createElement(be.a,{container:!0,direction:"row",justify:"flex-start",wrap:"wrap",md:12,xs:12,sm:12},r.a.createElement(be.a,{item:!0,md:2,xs:2,sm:2},r.a.createElement(ya.a,{margin:"dense",style:{width:"100%",margin:10}},r.a.createElement(ga.a,{component:"label"},"Multiple"),r.a.createElement(Xe.a,{checked:this.state.formControls.Multiple.value,value:this.state.formControls.Multiple.value,color:"primary",inputProps:{"aria-label":"primary checkbox"},onChange:function(t){return e.handleChange(t.target.checked,"Multiple")}}))),this.state.formControls.Multiple.value?r.a.createElement(be.a,{item:!0,md:10,xs:10,sm:10},r.a.createElement(ES,{handleChange:this.handleChange,selectedValue:this.state.formControls.Factory.value,formControl:this.state.formControls.Factory,propertyName:"Factory"})):r.a.createElement("div",null)),r.a.createElement(be.a,{item:!0,md:12,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:10},margin:"dense"},r.a.createElement(xa,{jsonFileName:"repeatEach",jsonPropertyName:"RepeatEach",formControl:this.state.formControls.RepeatEach,propertyName:"RepeatEach",label:"Repeat Each",handleChange:this.handleChange,selectedValue:this.state.formControls.RepeatEach.value}))),r.a.createElement(be.a,{item:!0,md:12,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Da.a,{format:"dd-MMM-yyyy",label:"Period",value:this.state.formControls.Period.value,onChange:function(t){e.handleChange(t,"Period")},disableFuture:!0})),r.a.createElement(Sa.a,{error:!this.state.formControls.Period.valid,style:{display:this.state.formControls.Period.valid?"none":""}},this.state.formControls.Period.message))),r.a.createElement(be.a,{item:!0,md:12,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"JobFormat",label:"Job Format",multiline:!0,defaultValue:this.state.formControls.JobFormat.value,onChange:function(t){return e.handleChange(t.target.value,"JobFormat",!1)},margin:"dense"}))),r.a.createElement(be.a,{item:!0,md:12,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"StartWithNumber",label:"Start With Number",multiline:!0,defaultValue:this.state.formControls.StartWithNumber.value,onChange:function(t){return e.handleChange(t.target.value,"StartWithNumber",!1)},margin:"dense"}))),r.a.createElement(be.a,{item:!0,md:12,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"SampleResult",label:"Sample Result",disabled:!0,defaultValue:this.state.formControls.SampleResult.value,onChange:function(t){return e.handleChange(t.target.value,"SampleResult",!1)},margin:"dense"})))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=t.formControls;return e.formState.valid||Array.isArray(e.formState.errors)&&e.formState.errors.map((function(e){a[e.property].valid=!1,a[e.property].message=e.message})),{formState:e.formState,formControls:a}}}]),t}(r.a.Component),SS=bS,OS=(Object(n.forwardRef)((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),r.a.forwardRef((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).openDialog=function(e){console.log(e),a.setState({dialogOpen:!0,currentDeleteData:e,dialogMessage:r.a.createElement("span",null,"Are you sure to delete this record ",r.a.createElement("b",null,e.Factory.FctyName)," ? This cannot be undone.")})},a.closeDialog=function(){a.setState({dialogOpen:!1,currentDeleteData:null,dialogMessage:""})},a.openForm=function(e){void 0===e?a.setState({actionStatus:"Add",newData:Object(me.a)({},CS)}):(console.log(e),a.setState({actionStatus:"Update",newData:Object(me.a)({},e)})),a.setState({formOpen:!0,formState:{valid:!0,dirty:!1,errors:[]}})},a.closeForm=function(){a.setState({formOpen:!1,newData:{},actionStatus:""})},a.onSave=function(){var e=a.state.formState,t=Object(me.a)({},a.state.newData);"object"===typeof t.numbering&&(t.numbering=t.numbering.Value),console.log(t);var n=yS.validateFields(t);if(n.valid){var r=Object(je.a)(a.state.data);console.log(r),"Add"===a.state.actionStatus?yS.add("",t).then((function(t){!0===t.code?(e.valid=!0,r.push(t.data),a.setState({data:r}),a.closeForm(),a.snackOpen("Number created successfully!","success")):(e.valid=!1,e.errors=t.errors,a.snackOpen("Please fix the error(s) highlighted to save the details!","error"))})).catch((function(e){a.snackOpen("Oops, something went wrong while processing your request!","error")})):yS.update("",t).then((function(n){if(!0===n.code){e.valid=!0;var o=r.find((function(e){return e._id===t._id})),s=r.indexOf(o);r[s]=n.data,a.setState({data:r}),a.closeForm(),a.snackOpen("Numbering updated successfully!","success")}else e.valid=!1,e.errors=n.errors,a.snackOpen("Please fix the error(s) highlighted to save the details!","error")})).catch((function(e){a.snackOpen("Oops, something went wrong while processing your request!","error")}))}else{e.valid=!1;var o=n.errors.map((function(e){var t={};return t.property=e.property,t.message=e.message,console.log(t),t}));e.errors=o,a.snackOpen("Please fix the error(s) highlighted to save the details!","error")}a.setState({formState:e})},a.onDelete=function(){null!==a.state.currentDeleteData&&yS.delete("".concat(a.state.currentDeleteData._id)).then((function(e){if(!0===e.code){var t=Object(je.a)(a.state.data),n=t.find((function(e){return e._id===a.state.currentDeleteData._id})),r=t.indexOf(n);t.splice(r,1),a.setState({data:t}),a.closeDialog(),a.snackOpen("Successfully Deleted!","success")}else a.snackOpen("Oops, something went wrong while processing your request!","error")}))},a.onEdit=function(e){a.openForm(e)},a.state={columns:[{field:"_id",hidden:!0},{title:"Numbering For",field:"NumberingFor",lookup:{}},{title:"Factory",field:"Factory",render:function(e){return r.a.createElement("span",null,e.Factory.FctyCode)}},{title:"Multiple",field:"Multiple",render:function(e){return r.a.createElement("span",null,e.Multiple?"Yes":"No")}},{title:"Period",field:"Period"},{title:"Job Format",field:"JobFormat"},{title:"Repeat Each",field:"RepeatEach"},{title:"Start With Number",field:"StartWithNumber"},{title:"Sample Result",field:"SampleResult"},{title:"Operator",field:"lastUpdatedBy"},{title:"Last Updated",field:"LastUpdatedAt",render:function(e){return r.a.createElement("span",null,void 0===e?"":new Date(e.LastUpdatedAt).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}))},editable:"never"}],data:[],currentDeleteData:null,newData:CS,formOpen:!1,dialogOpen:!1,dialogMessage:"",disabled:!1,actionStatus:"",formState:{valid:!0,dirty:!1,errors:[]}},a.openDialog=a.openDialog.bind(Object(Pe.a)(a)),a.closeDialog=a.closeDialog.bind(Object(Pe.a)(a)),a.openForm=a.openForm.bind(Object(Pe.a)(a)),a.closeForm=a.closeForm.bind(Object(Pe.a)(a)),a.snackOpen=a.snackOpen.bind(Object(Pe.a)(a)),a.snackClose=a.snackClose.bind(Object(Pe.a)(a)),a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initNumbering(),this.initNumberingData(),this.initRepeatEachData()}},{key:"initNumbering",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.awrap(yS.get("").then((function(t){console.log(t),!0===t.code&&e.setState({data:t.data})})));case 2:case"end":return t.stop()}}))}},{key:"initNumberingData",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:Oa("numbering.json").then((function(e){return e.data})).then((function(t){var a={};t.Numbering.forEach((function(e){return a[e.Value]=e.Name}));var n=Object(je.a)(e.state.columns);n[n.findIndex((function(e){return"NumberingFor"===e.field}))].lookup=a,e.setState({columns:n})}));case 1:case"end":return t.stop()}}))}},{key:"initRepeatEachData",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:Oa("repeatEach.json").then((function(e){return e.data})).then((function(t){var a={};t.RepeatEach.forEach((function(e){return a[e.Value]=e.Name}));var n=Object(je.a)(e.state.columns);n[n.findIndex((function(e){return"RepeatEach"===e.field}))].lookup=a,e.setState({columns:n})}));case 1:case"end":return t.stop()}}))}},{key:"handleChange",value:function(e,t){var a=this.state.newData;a[t]=e;var n=this.state.formState;n.valid=!0,a.Multiple,this.setState({newData:a,formState:n})}},{key:"snackOpen",value:function(e,t){this.setState({alertOpen:!0,alertMessage:e,alertClass:t})}},{key:"snackClose",value:function(){this.setState({alertOpen:!1,alertMessage:"",alertClass:"",currentDeleteData:null})}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{style:{margin:"20px 20px 10px 0px"}},r.a.createElement(Ve.a,{title:"Numbering",columns:this.state.columns,data:this.state.data,components:{Toolbar:function(t){return r.a.createElement("div",null,r.a.createElement(Le.MTableToolbar,t),r.a.createElement("div",{style:{padding:"0px 15px"}},r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:function(){return e.openForm()},"aria-label":"add"},r.a.createElement(wt.a,null))))}},actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.data,columns:e.state.columns,fileName:"Numbering"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.initNumbering()}},{icon:"edit",tooltip:"Edit Numbering",onClick:function(t,a){return e.openForm(a)}},{icon:"delete",tooltip:"Delete Numbering",onClick:function(t,a){return e.openDialog(a)}}],options:{}}),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:6e3,open:this.state.alertOpen,onClose:this.snackClose,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}),r.a.createElement(Ae.a,{fullScreen:!0,open:this.state.formOpen,onClose:this.closeForm,TransitionComponent:this.Transition},r.a.createElement(w.a,{className:"appBar"},r.a.createElement(F.a,null,r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:this.closeForm,"aria-label":"close"},r.a.createElement(Vt.a,null)),r.a.createElement(x.a,{variant:"h6",className:"app-title"},"Numbering Details"),r.a.createElement(he.a,{color:"inherit",disabled:this.state.disabled,onClick:this.onSave},"save"))),r.a.createElement(_e.a,null,r.a.createElement(SS,{handleChange:this.handleChange,formData:this.state.newData,formState:this.state.formState}))),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.openDialog,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.closeDialog,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDelete,color:"primary"},"Delete"))))}}]),t}(r.a.Component)),kS=OS,wS=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).snackOpen=function(e,t){var n;return l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0===e||null===e||void 0===t||null===t){r.next=7;break}return r.next=3,l.a.awrap(ka(e,t));case 3:n=r.sent,a.setState({snackOpen:!a.state.snackOpen,snackMessage:n,snackClass:e}),r.next=8;break;case 7:a.setState({snackOpen:!1});case 8:case"end":return r.stop()}}))},a.state={filterFormControl:{Factory:{valid:!0,message:"",value:""},Option:{valid:!0,message:"",value:"NoTimeOut"}},columns:[{title:"Date",field:"Date",render:function(e){return r.a.createElement("span",null,void 0===e?"":new Date(e.Date).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric"}))},editable:"never"},{title:"Shift",field:"Shift",render:function(e){return r.a.createElement("span",null,e.Shift.Name)},editable:"never"},{title:"Trolley No",field:"FactoryTrolley",render:function(e){return r.a.createElement("span",null,e.FactoryTrolley.TrolleyNumber)},editable:"never"},{title:"Time Fill",field:"TimeFill",render:function(e){return r.a.createElement("span",null,void 0===e?"":new Date(e.TimeFill).toLocaleString("en-GB",{hour:"numeric",minute:"numeric"}))},editable:"never"},{title:"Time In",field:"TimeIn",render:function(e){return r.a.createElement("span",null,void 0===e?"":new Date(e.TimeIn).toLocaleString("en-GB",{hour:"numeric",minute:"numeric"}))},editable:"never"},{title:"Trolley Out?",field:"IsTrolleyOut",render:function(e){return r.a.createElement("span",null,e.IsTrolleyOut?"Yes":"No")},editComponent:function(e){return r.a.createElement(ve.a,{checked:e.value,onChange:function(t){e.onChange(t.target.checked)},color:"primary"})}},{title:"Time Out",field:"TimeOut",render:function(e){return r.a.createElement("span",null,void 0===e.TimeOut||null===e.TimeOut?null:new Date(e.TimeOut).toLocaleString("en-GB",{hour:"numeric",minute:"numeric"}))},editComponent:function(e){return r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(hl.b,{value:e.rowData.IsTrolleyOut?void 0===e.value||null===e.value?new Date:new Date(e.value):null,onChange:function(t){return e.onChange(t)},margin:"dense",disabled:!e.rowData.IsTrolleyOut}))}}],allData:[],data:[]},a.snackOpen=a.snackOpen.bind(Object(Pe.a)(a)),a.handleFilterChange=a.handleFilterChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"handleFilterChange",value:function(e,t){var a,n=this;return l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:(a=this.state.filterFormControl)[t].value=e,this.setState({filterFormControl:a}),a.TimeOut=new Date(a.Date).setHours(new Date(a.TimeOut).getHours(),new Date(a.TimeOut).getMinutes(),0),Sb.getFilter("?Factory=".concat(this.state.filterFormControl.Factory.value._id)).then((function(e){!0===e.code&&(n.setState({allData:e.data}),n.loadData())}));case 5:case"end":return r.stop()}}),null,this)}},{key:"loadData",value:function(){var e=[];switch(this.state.filterFormControl.Option.value){case"TimeOut":e=this.state.allData.filter((function(e){return null!==e.TimeOut&&void 0!==e.TimeOut}));break;case"NoTimeOut":e=this.state.allData.filter((function(e){return null===e.TimeOut||void 0===e.TimeOut}));break;case"All":e=this.state.allData}var t=!0,a=!1,n=void 0;try{for(var r,o=e[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var s=r.value;s.IsTrolleyOut=null!==s.TimeOut&&void 0!==s.TimeOut}}catch(i){a=!0,n=i}finally{try{t||null==o.return||o.return()}finally{if(a)throw n}}this.setState({data:e})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"form-container"},r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-evenly",alignItems:"center",md:6,xs:12,sm:12,xl:8,lg:8},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Hr,{handleChange:this.handleFilterChange,selectedValue:this.state.filterFormControl.Factory.value,formControl:this.state.filterFormControl.Factory,propertyName:"Factory"})),r.a.createElement(ya.a,{style:{width:"100%",margin:4},margin:"dense"},r.a.createElement(Ea.a,{shrink:!0},"Option"),r.a.createElement(ba.a,{required:!0,id:"machClass",value:this.state.filterFormControl.Option.value,onChange:function(t){return e.handleFilterChange(t.target.value,"Option")},displayEmpty:!0},r.a.createElement(et.a,{value:"All"}," All "),r.a.createElement(et.a,{value:"NoTimeOut"}," No Time Out "),r.a.createElement(et.a,{value:"TimeOut"}," Time Out ")))),r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-evenly",alignItems:"center",md:10,xs:12,sm:12,xl:10,lg:10},r.a.createElement("div",{style:{overflowX:"scroll",width:"100%"}},r.a.createElement(Ve.a,{title:"Trolley",columns:this.state.columns,data:this.state.data,editable:{onRowUpdate:function(t,a){return new Promise((function(n,r){setTimeout((function(){var o=Object(je.a)(e.state.allData);t.IsTrolleyOut?t.TimeOut=null===t.TimeOut?new Date:t.TimeOut:t.TimeOut=null,Sb.update("",t).then((function(t){if(!0===t.code){var s=o.indexOf(a);o[s]=t.data,e.snackOpen("success","update"),e.setState({allData:o},(function(){return n()})),e.loadData()}else r(),e.snackOpen("error","server")})).catch((function(t){r(),e.snackOpen("error","server")}))}),500)}))}},options:{search:!1}}),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.snackClass,autoHideDuration:600,open:this.state.snackOpen,onClose:this.snackOpen,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.snackMessage)}))))}}]),t}(r.a.Component),FS=wS,xS=(a(988),{properties:{Factory:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Factory cannot be empty.",conform:"Factory cannot be empty.",required:"Factory cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},Datetime:{description:"",type:"any",required:!0,allowEmpty:!1,messages:{allowEmpty:"Datetime cannot be empty.",conform:"Datetime cannot be empty.",required:"Datetime cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},Shift:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Shift cannot be empty.",conform:"Shift cannot be empty.",required:"Shift cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},MachineList:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Metal Detector cannot be empty.",conform:"Metal Detector cannot be empty.",required:"Metal Detector cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},SampleFerous:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Sample Ferous cannot be empty.",conform:"Sample Ferous cannot be empty.",required:"Sample Ferous cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},SampleNonFerous:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Sample Non Ferous cannot be empty.",conform:"Sample Non Ferous cannot be empty.",required:"Sample Non Ferous cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},SampleStainless:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Sample Stainless cannot be empty.",conform:"Sample Stainless cannot be empty.",required:"Sample Stainless cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},Checker:{description:"",type:"string",required:!0,allowEmpty:!1,messages:{allowEmpty:"Checker cannot be empty.",conform:"Checker cannot be empty.",required:"Checker cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},Remarks:{description:"",type:"string"},CreatedAt:{type:"any",default:Date.now()},CreatedBy:{type:"string",default:""},LastUpdatedAt:{type:"any",default:Date.now()},LastUpdatedBy:{type:"string",default:""}}}),TS=a(24),NS={validateFields:function(e){return TS.validate(e,xS,{cast:!0})},get:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="metalDetector/"+e,a.abrupt("return",We(t).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},getFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("metalDetector-filter/").concat(e),a.abrupt("return",We(t).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},getOne:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("metalDetector/").concat(e),a.abrupt("return",We(t).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},update:function(e,t){return Qe("metalDetector/"+e,t).then((function(e){return console.log(e),200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Updated",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="metalDetector/"+e,n.abrupt("return",He(a,t).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Added",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,formValid:!0,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("metalDetector/"+e).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))}},jS=NS,PS={Factory:"",Datetime:new Date,Shift:"",MachineList:"",SampleFerous:"",SampleNonFerous:"",SampleStainless:"",Checker:"",Remarks:""},AS=PS,MS=(a(989),a(23)),_S=(Object(n.forwardRef)((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),{Factory:{valid:!0,message:""},Datetime:{valid:!0,message:""},Shift:{valid:!0,message:""},MachineList:{valid:!0,message:""},SampleFerous:{valid:!0,message:""},SampleNonFerous:{valid:!0,message:""},SampleStainless:{valid:!0,message:""},Checker:{valid:!0,message:""},Remarks:{valid:!0,message:""}}),IS=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).closeForm=function(){a.setState({formControl:MS(_S)},(function(){return a.props.closeForm()}))},a.snackOpen=function(e,t,n){var r;return l.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(void 0===e||null===e||void 0===t||null===t){o.next=11;break}if(void 0!==n){o.next=7;break}return o.next=4,l.a.awrap(ka(e,t));case 4:r=o.sent,o.next=8;break;case 7:r=n;case 8:a.setState({snackOpen:!a.state.snackOpen,snackMessage:r,snackClass:e}),o.next=12;break;case 11:a.setState({snackOpen:!1});case 12:case"end":return o.stop()}}))},a.onSave=function(){var e=Object(me.a)({},a.state.formData),t=Object(me.a)({},a.state.formControl),n=jS.validateFields(e);n.valid?"Add"===a.props.formAction?jS.add("",e).then((function(e){!0===e.code?a.props.onSuccess(e.data):null!==e.errors&&Array.isArray(e.errors)?(e.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t})):a.snackOpen("error","server")})):jS.update("",e).then((function(e){!0===e.code?a.props.onSuccess(e.data):null!==e.errors&&Array.isArray(e.errors)?(e.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t})):a.snackOpen("error","server")})):(n.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t}),a.snackOpen("error","alertValidation"))},a.state={formData:a.props.formData,formOpen:a.props.formOpen,formControl:MS(_S),disabled:!1,snackOpen:!1,snackMessage:"",snackClass:""},a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"handleChange",value:function(e,t,a){var n=Object(me.a)({},this.state.formData),r=Object(me.a)({},this.state.formControl);!a&&"Factory"!==t||void 0!==e&&""!==e?(r[t].valid=!0,r[t].message=""):(r[t].valid=!1,r[t].message="".concat(t," cannot be empty.")),n[t]=e,this.setState({formData:n})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(Ae.a,{fullScreen:!0,open:this.state.formOpen,onClose:this.closeForm,TransitionComponent:this.Transition},r.a.createElement(w.a,{className:"appBar"},r.a.createElement(F.a,null,r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:this.closeForm,"aria-label":"close"},r.a.createElement(Vt.a,null)),r.a.createElement(x.a,{variant:"h6",className:"app-title"},"Metal Detector Verification"),r.a.createElement(he.a,{color:"inherit",disabled:this.state.disabled,onClick:this.onSave},"save"))),r.a.createElement(_e.a,null,r.a.createElement("div",{className:"form-container"},r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-evenly",alignItems:"center",md:6,xs:12,sm:12,xl:8,lg:8},r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Hr,{selectedValue:this.state.formData.Factory,propertyName:"Factory",handleChange:this.handleChange,formControl:this.state.formControl.Factory})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Ac.a,{required:!0,format:"dd-MMM-yyyy hh:mm",label:"Datetime",value:this.state.formData.Datetime,onChange:function(t){e.handleChange(t,"Datetime")}})),r.a.createElement(Sa.a,{error:!this.state.formControl.Datetime.valid,style:{display:this.state.formControl.Datetime.valid?"none":""}},this.state.formControl.Datetime.message)),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ns,{handleChange:this.handleChange,selectedValue:this.state.formData.Shift,formControl:this.state.formControl.Shift,propertyName:"Shift",factoryId:void 0===this.state.formData.Factory._id?this.state.formData.Factory:this.state.formData.Factory._id})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(wb,{selectedFactory:void 0===this.state.formData.Factory?"":this.state.formData.Factory._id,selectedValue:this.state.formData.MachineList,formControl:this.state.formControl.MachineList,propertyName:"MachineList",required:!0,handleChange:function(t){e.handleChange(t,"MachineList",!0)},machineType:"Metal Detector",abvrs:"ID"})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(xa,{jsonFileName:"checksheet",jsonPropertyName:"MetalDetectorSample",formControl:this.state.formControl.SampleFerous,propertyName:"SampleFerous",required:!0,label:"Sample Ferous",handleChange:function(t){e.handleChange(t,"SampleFerous",!0)},selectedValue:this.state.formData.SampleFerous.Value})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(xa,{jsonFileName:"checksheet",jsonPropertyName:"MetalDetectorSample",formControl:this.state.formControl.SampleNonFerous,propertyName:"SampleNonFerous",required:!0,label:"Sample -Non Ferous 1",handleChange:function(t){e.handleChange(t,"SampleNonFerous",!0)},selectedValue:this.state.formData.SampleNonFerous.Value})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(xa,{jsonFileName:"checksheet",jsonPropertyName:"MetalDetectorSample",formControl:this.state.formControl.SampleStainless,propertyName:"SampleStainless",required:!0,label:"Sample -Non Ferous 2",handleChange:function(t){e.handleChange(t,"SampleStainless",!0)},selectedValue:this.state.formData.SampleStainless.Value})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{required:!0,id:"Checker",label:"Checker",defaultValue:this.state.formData.Checker,onChange:function(t){return e.handleChange(t.target.value.trim(),"Checker",!0)},margin:"dense",error:!this.state.formControl.Checker.valid,helperText:this.state.formControl.Checker.message})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"Remarks",label:"Remarks",multiline:!0,rows:"4",defaultValue:this.state.formData.Remarks,className:"",onChange:function(t){return e.handleChange(t.target.value,"Remarks",!1)},margin:"dense"}))))))),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.snackClass,autoHideDuration:600,open:this.state.snackOpen,onClose:this.snackOpen,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.snackMessage)}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return{formOpen:e.formOpen}}}]),t}(r.a.Component),RS=IS,LS=a(23),VS=(Object(n.forwardRef)((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),r.a.forwardRef((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).snackOpen=function(e,t){var n;return l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0===e||null===e||void 0===t||null===t){r.next=7;break}return r.next=3,l.a.awrap(ka(e,t));case 3:n=r.sent,a.setState({snackOpen:!a.state.snackOpen,alertMessage:n,alertClass:e}),r.next=8;break;case 7:a.setState({snackOpen:!1});case 8:case"end":return r.stop()}}))},a.dialogOpen=function(e){var t;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,l.a.awrap(ka("confirmation","delete"));case 2:t=n.sent,a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:e,dialogMessage:r.a.createElement("span",null,void 0!==t?t.replace("[Name]",e.Factory.FctyName):"")});case 4:case"end":return n.stop()}}))},a.diaLogClose=function(){a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:null})},a.onDelete=function(){var e=Object(je.a)(a.state.data),t=e.indexOf(a.state.currentDeleteData);void 0!==a.state.currentDeleteData&&null!==a.state.currentDeleteData&&jS.delete(a.state.currentDeleteData._id).then((function(n){!0===n.code?(e.splice(t,1),a.setState({data:e,dialogOpen:!1},(function(){return a.snackOpen("success","delete")}))):a.setState({dialogOpen:!1},(function(){return a.snackOpen("error","server")}))}))},a.state={columns:[{title:"Factory",field:"Factory",render:function(e){return r.a.createElement("span",null,e.Factory.FctyName)}},{title:"Date",field:"Datetime",render:function(e){return r.a.createElement("span",null,void 0===e?"":new Date(e.Datetime).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric"}))}},{title:"Time",field:"Datetime",render:function(e){return r.a.createElement("span",null,void 0===e?"":new Date(e.Datetime).toLocaleString("en-GB",{hour:"numeric",minute:"numeric"}))}},{title:"Shift",field:"Shift",render:function(e){return r.a.createElement("span",null,e.Shift.Name)}},{title:"Metal Detector #",field:"MachineList",render:function(e){return r.a.createElement("span",null,e.MachineList.MachLstCode)}},{title:"Sample Ferous",field:"SampleFerous",render:function(e){return r.a.createElement("span",null,e.SampleFerous.Name)}},{title:"Sample-Non Ferous",field:"SampleNonFerous",render:function(e){return r.a.createElement("span",null,e.SampleNonFerous.Name)}},{title:"Sample-Non Ferous 1",field:"SampleStainless",render:function(e){return r.a.createElement("span",null,e.SampleStainless.Name)}},{title:"Checker",field:"Checker"},{title:"Remarks",field:"Remarks"},{title:"Operator",field:"LastUpdatedBy"},{title:"Last Updated",field:"LastUpdatedAt",render:function(e){return r.a.createElement("span",null,void 0===e?"":new Date(e.LastUpdatedAt).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}))},editable:"never"}],data:[],formData:null,currentDeleteData:null,formOpen:!1,formAction:"",snackOpen:!1,dialogOpen:!1,alertMessage:"",dialogMessage:"",alertClass:""},a.MetalDetectorModel=LS(AS),a.openForm=a.openForm.bind(Object(Pe.a)(a)),a.closeForm=a.closeForm.bind(Object(Pe.a)(a)),a.onSuccess=a.onSuccess.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initMetalDetector()}},{key:"openForm",value:function(e){var t=e,a=this.state.formAction;void 0===t||null===t?(t=this.MetalDetectorModel,a="Add"):a="update",this.setState({formData:t,formOpen:!this.state.formOpen,formAction:a})}},{key:"closeForm",value:function(){this.setState({formData:null,formOpen:!1,formAction:""})}},{key:"initMetalDetector",value:function(){var e=this;jS.get("").then((function(t){!0===t.code?e.setState({data:t.data}):e.snackOpen("error","server")}))}},{key:"onSuccess",value:function(e){var t=this,a=Object(je.a)(this.state.data);if(void 0!==e&&null!==e)if("Add"===this.state.formAction)a.push(e),this.setState({data:a,formOpen:!this.state.formOpen,formAction:"",formData:null},(function(){return t.snackOpen("success","add")}));else{var n=a.indexOf(this.state.formData);a[n]=e,this.setState({data:a,formOpen:!this.state.formOpen,formAction:"",formData:null},(function(){return t.snackOpen("success","update")}))}else this.snackOpen("error","server")}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{container:!0,direction:"column",justify:"center",wrap:"wrap",style:{margin:"20px 20px 10px 0px"}},r.a.createElement(be.a,{item:!0,xs:12},r.a.createElement(Ve.a,{title:"Metal Detector Verification",columns:this.state.columns,data:this.state.data,components:{Toolbar:function(t){return r.a.createElement("div",null,r.a.createElement(Le.MTableToolbar,t),r.a.createElement("div",{style:{padding:"0px 15px"}},r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:function(){return e.openForm(t.rowData)},"aria-label":"add"},r.a.createElement(wt.a,null))))}},actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.data,columns:e.state.columns,fileName:"Metal Detector Verification"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.initMetalDetector()}},{icon:"edit",tooltip:"Edit User",onClick:function(t,a){return e.openForm(a)}},{icon:"delete",tooltip:"Delete User",onClick:function(t,a){return e.dialogOpen(a)}}],options:{}})),r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-evenly",alignItems:"center",md:10,xs:12,sm:12,xl:10,lg:10},this.state.formOpen?r.a.createElement(RS,{formData:this.state.formData,formAction:this.state.formAction,formOpen:this.state.formOpen,onSuccess:this.onSuccess,closeForm:this.closeForm}):""),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:600,open:this.state.snackOpen,onClose:this.snackOpen,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.diaLogClose,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.diaLogClose,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDelete,color:"primary"},"Delete"))))}}]),t}(r.a.Component)),BS=VS,US=(a(990),{properties:{Factory:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Factory cannot be empty.",conform:"Factory cannot be empty.",required:"Factory cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},Datetime:{description:"",type:"any",required:!0,allowEmpty:!1,messages:{allowEmpty:"Datetime cannot be empty.",conform:"Datetime cannot be empty.",required:"Datetime cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},Shift:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Shift cannot be empty.",conform:"Shift cannot be empty.",required:"Shift cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},WaterQualityConfiguration:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Water Quality Configuration cannot be empty.",conform:"Water Quality Configuration cannot be empty.",required:"Water Quality Configuration cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},TDS:{description:"",type:"number"},Checker:{description:"",type:"string",required:!0,allowEmpty:!1,messages:{allowEmpty:"Checker cannot be empty.",conform:"Checker cannot be empty.",required:"Checker cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},Remarks:{description:"",type:"string"},CreatedAt:{type:"any",default:Date.now()},CreatedBy:{type:"string",default:""},LastUpdatedAt:{type:"any",default:Date.now()},LastUpdatedBy:{type:"string",default:""}}}),qS=a(24),GS={validateFields:function(e){return qS.validate(e,US,{cast:!0})},get:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="waterQualityCheck/"+e,a.abrupt("return",We(t).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},getFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("waterQualityCheck-filter/").concat(e),a.abrupt("return",We(t).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},getOne:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("waterQualityCheck/").concat(e),a.abrupt("return",We(t).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},update:function(e,t){return Qe("waterQualityCheck/"+e,t).then((function(e){return console.log(e),200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Updated",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="waterQualityCheck/"+e,n.abrupt("return",He(a,t).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Added",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,formValid:!0,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("waterQualityCheck/"+e).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))}},WS=GS,HS={Factory:"",Datetime:new Date,Shift:"",WaterQualityConfiguration:"",TDS:0,Checker:"",Remarks:""},QS=HS,zS=(a(991),a(992),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={waterQualityConfigurationData:[]},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){void 0!==this.props.selectedFactory&&""!==this.props.selectedFactory&&this.fetchWaterQualityConfigurationData(this.props.selectedFactory)}},{key:"componentDidUpdate",value:function(e){this.props.selectedFactory!==e.selectedFactory&&void 0!==this.props.selectedFactory&&""!==this.props.selectedFactory&&this.fetchWaterQualityConfigurationData(this.props.selectedFactory)}},{key:"fetchWaterQualityConfigurationData",value:function(e){var t=this;vf.getwaterQualityConfigurationFilter("?Factory=".concat(e)).then((function(e){t.setState({waterQualityConfigurationData:e.data})}))}},{key:"renderOptions",value:function(){return this.state.waterQualityConfigurationData.map((function(e,t){return r.a.createElement(et.a,{label:"Select Tank",value:e.id,key:e.id,name:e.MachineList.MachLstCode},e.MachineList.MachLstCode)}))}},{key:"handleChange",value:function(e){var t=this.state.waterQualityConfigurationData.find((function(t){return t.id===e.target.value}));void 0!==t?this.props.handleChange(t,this.props.propertyName,this.props.required):this.props.handleChange("",this.props.propertyName,this.props.required)}},{key:"render",value:function(){var e=this;return r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(Ea.a,{shrink:!0,htmlFor:"Tank",required:!0,error:!this.props.formControl.valid},"Tank"),r.a.createElement(ba.a,{id:this.props.propertyName,value:void 0===this.props.selectedValue||void 0===this.props.selectedValue.id?"":this.props.selectedValue.id,style:{minWidth:140},error:!this.props.formControl.valid,onChange:function(t){return e.handleChange(t,e.props.propertyName)},margin:"dense",displayEmpty:!0},r.a.createElement(et.a,{value:""},r.a.createElement("em",null,"Select Tank")),this.renderOptions()),r.a.createElement(Sa.a,{error:!this.props.formControl.valid,style:{display:this.props.formControl.valid?"none":""}},this.props.formControl.valid?"":this.props.formControl.message))}}]),t}(r.a.Component)),YS=zS,KS=YS,JS=a(23),ZS=(Object(n.forwardRef)((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),{Factory:{valid:!0,message:""},Datetime:{valid:!0,message:""},Shift:{valid:!0,message:""},WaterQualityConfiguration:{valid:!0,message:""},TDS:{valid:!0,message:""},Checker:{valid:!0,message:""},Remarks:{valid:!0,message:""}}),XS=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).closeForm=function(){a.setState({formControl:JS(ZS)},(function(){return a.props.closeForm()}))},a.snackOpen=function(e,t,n){var r;return l.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(void 0===e||null===e||void 0===t||null===t){o.next=11;break}if(void 0!==n){o.next=7;break}return o.next=4,l.a.awrap(ka(e,t));case 4:r=o.sent,o.next=8;break;case 7:r=n;case 8:a.setState({snackOpen:!a.state.snackOpen,snackMessage:r,snackClass:e}),o.next=12;break;case 11:a.setState({snackOpen:!1});case 12:case"end":return o.stop()}}))},a.onSave=function(){var e=Object(me.a)({},a.state.formData),t=Object(me.a)({},a.state.formControl),n=WS.validateFields(e);return n.valid?a.state.formData.TDS>a.state.formData.WaterQualityConfiguration.MaxTDSValue&&""===e.Remarks?(t.Remarks.valid=!1,t.Remarks.message="Remarks cannot be empty.",void a.snackOpen("error","alertValidation")):(e.ProcessOutput="Crumb",void("Add"===a.props.formAction?WS.add("",e).then((function(e){!0===e.code?a.props.onSuccess(e.data):null!==e.errors&&Array.isArray(e.errors)?(e.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t})):a.snackOpen("error","server")})):WS.update("",e).then((function(e){!0===e.code?a.props.onSuccess(e.data):null!==e.errors&&Array.isArray(e.errors)?(e.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t})):a.snackOpen("error","server")})))):(n.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t}),void a.snackOpen("error","alertValidation"))},a.state={formData:a.props.formData,formOpen:a.props.formOpen,formControl:JS(ZS),disabled:!1,snackOpen:!1,snackMessage:"",snackClass:""},a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"handleChange",value:function(e,t,a){var n=Object(me.a)({},this.state.formData),r=Object(me.a)({},this.state.formControl);!a&&"Factory"!==t||void 0!==e&&""!==e?(r[t].valid=!0,r[t].message=""):(r[t].valid=!1,r[t].message="".concat(t," cannot be empty.")),n[t]=e,this.setState({formData:n})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(Ae.a,{fullScreen:!0,open:this.state.formOpen,onClose:this.closeForm,TransitionComponent:this.Transition},r.a.createElement(w.a,{className:"appBar"},r.a.createElement(F.a,null,r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:this.closeForm,"aria-label":"close"},r.a.createElement(Vt.a,null)),r.a.createElement(x.a,{variant:"h6",className:"app-title"},"Water Quality Check"),r.a.createElement(he.a,{color:"inherit",disabled:this.state.disabled,onClick:this.onSave},"save"))),r.a.createElement(_e.a,null,r.a.createElement("div",{className:"form-container"},r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-evenly",alignItems:"center",md:6,xs:12,sm:12,xl:8,lg:8},r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Hr,{selectedValue:this.state.formData.Factory,propertyName:"Factory",handleChange:this.handleChange,formControl:this.state.formControl.Factory})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Ac.a,{required:!0,format:"dd-MMM-yyyy hh:mm",label:"Datetime",value:this.state.formData.Datetime,onChange:function(t){e.handleChange(t,"Datetime")}})),r.a.createElement(Sa.a,{error:!this.state.formControl.Datetime.valid,style:{display:this.state.formControl.Datetime.valid?"none":""}},this.state.formControl.Datetime.message)),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ns,{handleChange:this.handleChange,selectedValue:this.state.formData.Shift,formControl:this.state.formControl.Shift,propertyName:"Shift",factoryId:void 0===this.state.formData.Factory._id?this.state.formData.Factory:this.state.formData.Factory._id})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(KS,{handleChange:this.handleChange,selectedValue:this.state.formData.WaterQualityConfiguration,formControl:this.state.formControl.WaterQualityConfiguration,propertyName:"WaterQualityConfiguration",selectedFactory:void 0===this.state.formData.Factory._id?this.state.formData.Factory:this.state.formData.Factory._id,OutputType:"Crumb"})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"Line",label:"Line",value:""===this.state.formData.WaterQualityConfiguration?"":this.state.formData.WaterQualityConfiguration.Line.Name,margin:"dense",disabled:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"Process",label:"Process",value:""===this.state.formData.WaterQualityConfiguration?"":this.state.formData.WaterQualityConfiguration.Process.ProcName,margin:"dense",disabled:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"TDS",defaultValue:this.state.formData.TDS,thousandSeparator:!0,decimalScale:2,fixedDecimalScale:!0,onValueChange:function(t){e.handleChange(void 0===t.floatValue?0:t.floatValue,"TDS",!1)},onFocus:function(e){e.target.select()}})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Max. TDS",value:this.state.formData.WaterQualityConfiguration.MaxTDSValue,thousandSeparator:!0,decimalScale:2,fixedDecimalScale:!0,disabled:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"Status",label:"Status",value:""===this.state.formData.WaterQualityConfiguration?"In Spec":this.state.formData.TDS<=this.state.formData.WaterQualityConfiguration.MaxTDSValue?"In Spec":"Out of Standard",margin:"dense",disabled:!0,error:this.state.formData.TDS>this.state.formData.WaterQualityConfiguration.MaxTDSValue})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{required:!0,id:"Checker",label:"Checker",defaultValue:this.state.formData.Checker,onChange:function(t){return e.handleChange(t.target.value.trim(),"Checker",!0)},margin:"dense",error:!this.state.formControl.Checker.valid,helperText:this.state.formControl.Checker.message})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"Remarks",label:"Remarks",multiline:!0,rows:"4",defaultValue:this.state.formData.Remarks,className:"",onChange:function(t){return e.handleChange(t.target.value,"Remarks",e.state.formData.TDS>e.state.formData.WaterQualityConfiguration.MaxTDSValue)},error:!this.state.formControl.Remarks.valid,helperText:this.state.formControl.Remarks.message,margin:"dense"}))))))),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.snackClass,autoHideDuration:600,open:this.state.snackOpen,onClose:this.snackOpen,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.snackMessage)}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return{formOpen:e.formOpen}}}]),t}(r.a.Component),$S=XS,eO=a(23),tO=(Object(n.forwardRef)((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),r.a.forwardRef((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).snackOpen=function(e,t){var n;return l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0===e||null===e||void 0===t||null===t){r.next=7;break}return r.next=3,l.a.awrap(ka(e,t));case 3:n=r.sent,a.setState({snackOpen:!a.state.snackOpen,alertMessage:n,alertClass:e}),r.next=8;break;case 7:a.setState({snackOpen:!1});case 8:case"end":return r.stop()}}))},a.dialogOpen=function(e){var t;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,l.a.awrap(ka("confirmation","delete"));case 2:t=n.sent,a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:e,dialogMessage:r.a.createElement("span",null,void 0!==t?t.replace("[Name]",e.Factory.FctyName):"")});case 4:case"end":return n.stop()}}))},a.diaLogClose=function(){a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:null})},a.onDelete=function(){var e=Object(je.a)(a.state.data),t=e.indexOf(a.state.currentDeleteData);void 0!==a.state.currentDeleteData&&null!==a.state.currentDeleteData&&WS.delete(a.state.currentDeleteData._id).then((function(n){!0===n.code?(e.splice(t,1),a.setState({data:e,dialogOpen:!1},(function(){return a.snackOpen("success","delete")}))):a.setState({dialogOpen:!1},(function(){return a.snackOpen("error","server")}))}))},a.state={columns:[{title:"Factory",field:"Factory",render:function(e){return r.a.createElement("span",null,e.Factory.FctyName)}},{title:"Date",field:"Datetime",render:function(e){return r.a.createElement("span",null,void 0===e?"":new Date(e.Datetime).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric"}))}},{title:"Time",field:"Datetime",render:function(e){return r.a.createElement("span",null,void 0===e?"":new Date(e.Datetime).toLocaleString("en-GB",{hour:"numeric",minute:"numeric"}))}},{title:"Shift",field:"Shift",render:function(e){return r.a.createElement("span",null,e.Shift.Name)}},{title:"Line",field:"WaterQualityConfiguration",render:function(e){return r.a.createElement("span",null,e.WaterQualityConfiguration.Line.Name)}},{title:"Process",field:"WaterQualityConfiguration",render:function(e){return r.a.createElement("span",null,e.WaterQualityConfiguration.Process.ProcName)}},{title:"Tank",field:"WaterQualityConfiguration",render:function(e){return r.a.createElement("span",null,e.WaterQualityConfiguration.MachineList.MachLstCode)}},{title:"TDS",field:"TDS"},{title:"Status",field:"TDS",render:function(e){return r.a.createElement("span",null,e.TDS<=e.WaterQualityConfiguration.MaxTDSValue?"In Spec":"Out of Standard")}},{title:"Checker",field:"Checker"},{title:"Remark",field:"Remarks"},{title:"Operator",field:"LastUpdatedBy"},{title:"Last Updated",field:"LastUpdatedAt",render:function(e){return r.a.createElement("span",null,void 0===e?"":new Date(e.LastUpdatedAt).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}))},editable:"never"}],data:[],formData:null,currentDeleteData:null,formOpen:!1,formAction:"",snackOpen:!1,dialogOpen:!1,alertMessage:"",dialogMessage:"",alertClass:""},a.WaterQualityCheckModel=eO(QS),a.openForm=a.openForm.bind(Object(Pe.a)(a)),a.closeForm=a.closeForm.bind(Object(Pe.a)(a)),a.onSuccess=a.onSuccess.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initWaterQualityCheck()}},{key:"openForm",value:function(e){var t=e,a=this.state.formAction;void 0===t||null===t?(t=this.WaterQualityCheckModel,a="Add"):a="update",this.setState({formData:t,formOpen:!this.state.formOpen,formAction:a})}},{key:"closeForm",value:function(){this.setState({formData:null,formOpen:!1,formAction:""})}},{key:"initWaterQualityCheck",value:function(){var e=this;WS.get("").then((function(t){!0===t.code?e.setState({data:t.data}):e.snackOpen("error","server")}))}},{key:"onSuccess",value:function(e){var t=this,a=Object(je.a)(this.state.data);if(void 0!==e&&null!==e)if("Add"===this.state.formAction)a.push(e),this.setState({data:a,formOpen:!this.state.formOpen,formAction:"",formData:null},(function(){return t.snackOpen("success","add")}));else{var n=a.indexOf(this.state.formData);a[n]=e,this.setState({data:a,formOpen:!this.state.formOpen,formAction:"",formData:null},(function(){return t.snackOpen("success","update")}))}else this.snackOpen("error","server")}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{container:!0,direction:"column",justify:"center",wrap:"wrap",style:{margin:"20px 20px 10px 0px"}},r.a.createElement(be.a,{item:!0,xs:12},r.a.createElement(Ve.a,{title:"Water Quality Check",columns:this.state.columns,data:this.state.data,components:{Toolbar:function(t){return r.a.createElement("div",null,r.a.createElement(Le.MTableToolbar,t),r.a.createElement("div",{style:{padding:"0px 15px"}},r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:function(){return e.openForm(t.rowData)},"aria-label":"add"},r.a.createElement(wt.a,null))))}},actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.data,columns:e.state.columns,fileName:"Water Quality Check"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.initWaterQualityCheck()}},{icon:"edit",tooltip:"Edit User",onClick:function(t,a){return e.openForm(a)}},{icon:"delete",tooltip:"Delete User",onClick:function(t,a){return e.dialogOpen(a)}}],options:{}})),r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-evenly",alignItems:"center",md:10,xs:12,sm:12,xl:10,lg:10},this.state.formOpen?r.a.createElement($S,{formData:this.state.formData,formAction:this.state.formAction,formOpen:this.state.formOpen,onSuccess:this.onSuccess,closeForm:this.closeForm}):""),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:600,open:this.state.snackOpen,onClose:this.snackOpen,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.diaLogClose,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.diaLogClose,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDelete,color:"primary"},"Delete"))))}}]),t}(r.a.Component)),aO=tO,nO=(a(993),{properties:{Factory:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Factory cannot be empty.",conform:"Factory cannot be empty.",required:"Factory cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},Datetime:{description:"",type:"any",required:!0,allowEmpty:!1,messages:{allowEmpty:"Datetime cannot be empty.",conform:"Datetime cannot be empty.",required:"Datetime cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},Shift:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Shift cannot be empty.",conform:"Shift cannot be empty.",required:"Shift cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},PalletNo:{description:"",type:"string",required:!0,allowEmpty:!1,messages:{allowEmpty:"Pallet No cannot be empty.",conform:"Pallet No cannot be empty.",required:"Pallet No cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},LotNo:{description:"",type:"string"},Checker:{description:"",type:"string",required:!0,allowEmpty:!1,messages:{allowEmpty:"Checker cannot be empty.",conform:"Checker cannot be empty.",required:"Checker cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},Supervisor:{description:"",type:"string"},PalletFilling:{description:"",type:"string"},BaleCheck_Detail:{description:"",type:"array"},CreatedAt:{type:"any",default:Date.now()},CreatedBy:{type:"string",default:""},LastUpdatedAt:{type:"any",default:Date.now()},LastUpdatedBy:{type:"string",default:""}}}),rO={properties:{Layer:{description:"",type:"any"},WS:{description:"",type:["object","string"],required:!0,allowEmpty:!1,messages:{allowEmpty:"WS cannot be empty.",conform:"WS cannot be empty.",required:"WS cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},Temperature:{description:"",type:"any"}}},oO=a(24),sO={validateFields:function(e){return oO.validate(e,nO,{cast:!0})},validateBaleCheckDetailFields:function(e){return oO.validate(e,rO,{cast:!0})},get:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="baleCheck/"+e,a.abrupt("return",We(t).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},getFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("baleCheck-filter/").concat(e),a.abrupt("return",We(t).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},getOne:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("baleCheck/").concat(e),a.abrupt("return",We(t).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},update:function(e,t){return Qe("baleCheck/"+e,t).then((function(e){return console.log(e),200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Updated",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="baleCheck/"+e,n.abrupt("return",He(a,t).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Added",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,formValid:!0,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("baleCheck/"+e).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))}},iO=sO,lO={Factory:"",Datetime:new Date,Shift:"",PalletNo:"",LotNo:"",Checker:"",Supervisor:"",PalletFilling:"",LayerNumber:6,BaleCheck_Detail:[]},cO=lO,uO=(a(994),{Layer:1,WS:"",Temperature:0}),dO=a(23),mO=(Object(n.forwardRef)((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),{Factory:{valid:!0,message:""},Datetime:{valid:!0,message:""},Shift:{valid:!0,message:""},PalletNo:{valid:!0,message:""},LotNo:{valid:!0,message:""},Checker:{valid:!0,message:""},Supervisor:{valid:!0,message:""},PalletFilling:{valid:!0,message:""},LayerNumber:{valid:!0,message:""},WS:{valid:!0,message:""}}),pO=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).closeForm=function(){a.setState({formControl:dO(mO)},(function(){return a.props.closeForm()}))},a.snackOpen=function(e,t,n){var r;return l.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(void 0===e||null===e||void 0===t||null===t){o.next=11;break}if(void 0!==n){o.next=7;break}return o.next=4,l.a.awrap(ka(e,t));case 4:r=o.sent,o.next=8;break;case 7:r=n;case 8:a.setState({snackOpen:!a.state.snackOpen,snackMessage:r,snackClass:e}),o.next=12;break;case 11:a.setState({snackOpen:!1});case 12:case"end":return o.stop()}}))},a.onSave=function(){var e=Object(me.a)({},a.state.formData),t=Object(me.a)({},a.state.formControl),n=iO.validateFields(e);if(!n.valid)return n.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t}),void a.snackOpen("error","alertValidation");a.state.baleDetail.filter((function(e){return""===e.WS})).length>0?a.snackOpen("error","","Please enter WS for all layers."):(e.BaleCheck_Detail=a.state.baleDetail,"Add"===a.props.formAction?iO.add("",e).then((function(e){!0===e.code?a.props.onSuccess(e.data):null!==e.errors&&Array.isArray(e.errors)?(e.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t})):a.snackOpen("error","server")})):iO.update("",e).then((function(e){!0===e.code?a.props.onSuccess(e.data):null!==e.errors&&Array.isArray(e.errors)?(e.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t})):a.snackOpen("error","server")})))},a.state={formData:a.props.formData,formOpen:a.props.formOpen,columns:[{title:"No.",field:"Layer",render:function(e){return r.a.createElement("span",null,e.Layer)},editable:"never"},{title:"WS",field:"WS",render:function(e){return r.a.createElement("span",null,e.WS.Name)},editComponent:function(e){return r.a.createElement(xa,{jsonFileName:"checksheet",jsonPropertyName:"BaleCheckWS",formControl:a.state.formControl.WS,propertyName:"WS",required:!0,label:"WS",handleChange:function(t){e.onChange(t),a.resetFormControl(t,"WS")},selectedValue:void 0===e.value?"":e.value.Value})}},{title:"Temp (oC)",field:"Temperature",render:function(e){return r.a.createElement(Xa.a,{value:e.Temperature,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})},editComponent:function(e){return r.a.createElement(Xa.a,{customInput:ge.a,label:"Temp (oC)",defaultValue:void 0===e.value?0:e.value,thousandSeparator:!0,decimalScale:2,fixedDecimalScale:!0,onValueChange:function(t){e.onChange(void 0===t.floatValue?0:t.floatValue)}})}}],baleDetail:a.props.formData.BaleCheck_Detail,formControl:dO(mO),productionCapacity:0,disabled:!1,dialogOpen:!1,dialogMessage:"",snackOpen:!1,snackMessage:"",snackClass:""},a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(me.a)({},this.state.formData);if("Add"===this.props.formAction){for(var t=[],a=1;a<=this.state.formData.LayerNumber;++a){var n=dO(uO);n.Layer=a,t.push(n)}this.setState({formData:e,baleDetail:t})}}},{key:"resetFormControl",value:function(e,t){var a=Object(me.a)({},this.state.formControl);void 0!==e&&null!==e&&""!==e&&(a[t].valid=!0,a[t].message=""),this.setState({formControls:a})}},{key:"handleChange",value:function(e,t,a){var n,r,o,s;return l.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:n=Object(me.a)({},this.state.formData),r=Object(me.a)({},this.state.formControl),!a&&"Factory"!==t||void 0!==e&&""!==e?(r[t].valid=!0,r[t].message=""):(r[t].valid=!1,r[t].message="".concat(t," cannot be empty.")),n[t]=e,"LayerNumber"===t&&(o=Object(je.a)(this.state.baleDetail),6===e?o=o.slice(0,6):(o=o.slice(0,6),(s=dO(uO)).Layer=7,o.push(s)),this.setState({baleDetail:o})),this.setState({formData:n});case 6:case"end":return i.stop()}}),null,this)}},{key:"initFormControl",value:function(){this.setState({formControls:dO(mO)})}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{container:!0},r.a.createElement(Ae.a,{fullScreen:!0,open:this.state.formOpen,onClose:this.closeForm,TransitionComponent:this.Transition},r.a.createElement(w.a,{className:"appBar"},r.a.createElement(F.a,null,r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:this.closeForm,"aria-label":"close"},r.a.createElement(Vt.a,null)),r.a.createElement(x.a,{variant:"h6",className:"app-title"},"Bale Check"),r.a.createElement(he.a,{color:"inherit",disabled:this.state.disabled,onClick:this.onSave},"save"))),r.a.createElement(_e.a,null,r.a.createElement("div",{className:"form-container"},r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-around",alignItems:"center",md:10,xs:12,sm:12,xl:10,lg:10},r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Hr,{selectedValue:this.state.formData.Factory,propertyName:"Factory",handleChange:this.handleChange,formControl:this.state.formControl.Factory})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Ac.a,{required:!0,format:"dd-MMM-yyyy hh:mm",label:"Datetime",value:this.state.formData.Datetime,onChange:function(t){e.handleChange(t,"Datetime")}})),r.a.createElement(Sa.a,{error:!this.state.formControl.Datetime.valid,style:{display:this.state.formControl.Datetime.valid?"none":""}},this.state.formControl.Datetime.message)),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ns,{handleChange:function(t){return e.handleChange(t,"Shift",!0)},selectedValue:this.state.formData.Shift,formControl:this.state.formControl.Shift,propertyName:"Shift",factoryId:void 0===this.state.formData.Factory._id?this.state.formData.Factory:this.state.formData.Factory._id})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{required:!0,id:"PalletNo",label:"PalletNo",defaultValue:this.state.formData.PalletNo,onChange:function(t){return e.handleChange(t.target.value.trim(),"PalletNo",!0)},margin:"dense",error:!this.state.formControl.PalletNo.valid,helperText:this.state.formControl.PalletNo.message})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"LotNo",label:"LotNo",defaultValue:this.state.formData.LotNo,onChange:function(t){return e.handleChange(t.target.value,"LotNo",!1)},margin:"dense",error:!this.state.formControl.LotNo.valid,helperText:this.state.formControl.LotNo.message})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{required:!0,id:"Checker",label:"Checker",defaultValue:this.state.formData.Checker,onChange:function(t){return e.handleChange(t.target.value.trim(),"Checker",!0)},margin:"dense",error:!this.state.formControl.Checker.valid,helperText:this.state.formControl.Checker.message})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"Supervisor",label:"Supervisor",defaultValue:this.state.formData.Supervisor,onChange:function(t){return e.handleChange(t.target.value,"Supervisor",!1)},margin:"dense"})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"PalletFilling",label:"Pallet Filling",defaultValue:this.state.formData.PalletFilling,onChange:function(t){return e.handleChange(t.target.value,"PalletFilling",!1)},margin:"dense"})),r.a.createElement(ya.a,{style:{width:"100%",margin:4},margin:"dense"},r.a.createElement(Ea.a,{shrink:!0},"Layer Number"),r.a.createElement(ba.a,{id:"machClass",value:void 0===this.state.formData.LayerNumber?this.state.formData.BaleCheck_Detail.length:this.state.formData.LayerNumber,onChange:function(t){return e.handleChange(t.target.value,"LayerNumber",!1)},displayEmpty:!0},r.a.createElement(et.a,{value:6}," 6 "),r.a.createElement(et.a,{value:7}," 7 ")))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(Ve.a,{style:{width:"100%",margin:4},title:"Bale Detail",columns:this.state.columns,data:this.state.baleDetail,editable:{onRowUpdate:function(t,a){return new Promise((function(n,r){setTimeout((function(){var o=Object(je.a)(e.state.baleDetail),s=o.indexOf(a),i=e.state.formControl,l=iO.validateBaleCheckDetailFields(t);l.valid?(o[s]=t,e.setState({baleDetail:o},(function(){return n()}))):(r(),l.errors.map((function(e){i[e.property].valid=!1,i[e.property].message=e.message})),e.setState({formControl:i}))}),100)}))}},icons:{Clear:function(t){return r.a.createElement(Nt.a,{onClick:function(){e.initFormControl()},style:{padding:0,margin:0}})}},options:{pageSize:10,search:!1}})))))),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.snackClass,autoHideDuration:600,open:this.state.snackOpen,onClose:this.snackOpen,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.snackMessage)}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return{formOpen:e.formOpen}}}]),t}(r.a.Component),fO=pO,hO=a(23),gO=(Object(n.forwardRef)((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),r.a.forwardRef((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).snackOpen=function(e,t){var n;return l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0===e||null===e||void 0===t||null===t){r.next=7;break}return r.next=3,l.a.awrap(ka(e,t));case 3:n=r.sent,a.setState({snackOpen:!a.state.snackOpen,alertMessage:n,alertClass:e}),r.next=8;break;case 7:a.setState({snackOpen:!1});case 8:case"end":return r.stop()}}))},a.dialogOpen=function(e){var t;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,l.a.awrap(ka("confirmation","delete"));case 2:t=n.sent,a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:e,dialogMessage:r.a.createElement("span",null,void 0!==t?t.replace("[Name]",e.Factory.FctyName):"")});case 4:case"end":return n.stop()}}))},a.diaLogClose=function(){a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:null})},a.onDelete=function(){var e=Object(je.a)(a.state.data),t=e.indexOf(a.state.currentDeleteData);void 0!==a.state.currentDeleteData&&null!==a.state.currentDeleteData&&iO.delete(a.state.currentDeleteData._id).then((function(n){!0===n.code?(e.splice(t,1),a.setState({data:e,dialogOpen:!1},(function(){return a.snackOpen("success","delete")}))):a.setState({dialogOpen:!1},(function(){return a.snackOpen("error","server")}))}))},a.state={columns:[{title:"Factory",field:"Factory",render:function(e){return r.a.createElement("span",null,e.Factory.FctyName)}},{title:"Date",field:"Datetime",render:function(e){return r.a.createElement("span",null,void 0===e?"":new Date(e.Datetime).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric"}))}},{title:"Time",field:"Datetime",render:function(e){return r.a.createElement("span",null,void 0===e?"":new Date(e.Datetime).toLocaleString("en-GB",{hour:"numeric",minute:"numeric"}))}},{title:"Shift",field:"Shift",render:function(e){return r.a.createElement("span",null,e.Shift.Name)}},{title:"Pallet No",field:"PalletNo"},{title:"Lot No",field:"LotNo"},{title:"Checker",field:"Checker"},{title:"Supervisor",field:"Supervisor"},{title:"Pallet Filling",field:"PalletFilling"},{title:"Operator",field:"LastUpdatedBy"},{title:"Last Updated",field:"LastUpdatedAt",render:function(e){return r.a.createElement("span",null,void 0===e?"":new Date(e.LastUpdatedAt).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}))},editable:"never"}],data:[],formData:null,currentDeleteData:null,formOpen:!1,formAction:"",snackOpen:!1,dialogOpen:!1,alertMessage:"",dialogMessage:"",alertClass:""},a.BaleCheckModel=hO(cO),a.openForm=a.openForm.bind(Object(Pe.a)(a)),a.closeForm=a.closeForm.bind(Object(Pe.a)(a)),a.onSuccess=a.onSuccess.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initBaleCheck()}},{key:"openForm",value:function(e){var t=e,a=this.state.formAction;void 0===t||null===t?(t=this.BaleCheckModel,a="Add"):a="update",this.setState({formData:t,formOpen:!this.state.formOpen,formAction:a})}},{key:"closeForm",value:function(){this.setState({formData:null,formOpen:!1,formAction:""})}},{key:"initBaleCheck",value:function(){var e=this;iO.get("").then((function(t){!0===t.code?e.setState({data:t.data}):e.snackOpen("error","server")}))}},{key:"onSuccess",value:function(e){var t=this,a=Object(je.a)(this.state.data);if(void 0!==e&&null!==e)if("Add"===this.state.formAction)a.push(e),this.setState({data:a,formOpen:!this.state.formOpen,formAction:"",formData:null},(function(){return t.snackOpen("success","add")}));else{var n=a.indexOf(this.state.formData);a[n]=e,this.setState({data:a,formOpen:!this.state.formOpen,formAction:"",formData:null},(function(){return t.snackOpen("success","update")}))}else this.snackOpen("error","server")}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{container:!0,direction:"column",justify:"center",wrap:"wrap",style:{margin:"20px 20px 10px 0px"}},r.a.createElement(be.a,{item:!0,xs:12},r.a.createElement(Ve.a,{title:"Bale Check",columns:this.state.columns,data:this.state.data,components:{Toolbar:function(t){return r.a.createElement("div",null,r.a.createElement(Le.MTableToolbar,t),r.a.createElement("div",{style:{padding:"0px 15px"}},r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:function(){return e.openForm(t.rowData)},"aria-label":"add"},r.a.createElement(wt.a,null))))}},actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.data,columns:e.state.columns,fileName:"BaleCheck"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.initBaleCheck()}},{icon:"edit",tooltip:"Edit User",onClick:function(t,a){return e.openForm(a)}},{icon:"delete",tooltip:"Delete User",onClick:function(t,a){return e.dialogOpen(a)}}],options:{}})),r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-evenly",alignItems:"center",md:10,xs:12,sm:12,xl:10,lg:10},this.state.formOpen?r.a.createElement(fO,{formData:this.state.formData,formAction:this.state.formAction,formOpen:this.state.formOpen,onSuccess:this.onSuccess,closeForm:this.closeForm}):""),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:600,open:this.state.snackOpen,onClose:this.snackOpen,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.diaLogClose,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.diaLogClose,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDelete,color:"primary"},"Delete"))))}}]),t}(r.a.Component)),yO=gO,vO=(a(995),{properties:{Factory:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Factory cannot be empty.",conform:"Factory cannot be empty.",required:"Factory cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},Date:{description:"",type:"any",required:!0,allowEmpty:!1,messages:{allowEmpty:"Date cannot be empty.",conform:"Date cannot be empty.",required:"Date cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},Shift:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Shift cannot be empty.",conform:"Shift cannot be empty.",required:"Shift cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},CausticSoda:{description:"",type:"number"},Checker:{description:"",type:"string",required:!0,allowEmpty:!1,messages:{allowEmpty:"Checker cannot be empty.",conform:"Checker cannot be empty.",required:"Checker cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},TrolleyCleaning_Detail:{description:"",type:"array",minItems:1,messages:{minItems:"Detail Trolley Washing should be enter."}},CreatedAt:{type:"any",default:Date.now()},CreatedBy:{type:"string",default:""},LastUpdatedAt:{type:"any",default:Date.now()},LastUpdatedBy:{type:"string",default:""}}}),CO=a(24),DO={validateFields:function(e){return CO.validate(e,vO,{cast:!0})},get:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="trolleyCleaning/"+e,a.abrupt("return",We(t).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},getFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("trolleyCleaning-filter/").concat(e),a.abrupt("return",We(t).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},getOne:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("trolleyCleaning/").concat(e),a.abrupt("return",We(t).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},update:function(e,t){return Qe("trolleyCleaning/"+e,t).then((function(e){return console.log(e),200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Updated",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="trolleyCleaning/"+e,n.abrupt("return",He(a,t).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Added",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,formValid:!0,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("trolleyCleaning/"+e).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))}},EO=DO,bO=(a(996),a(23)),SO=(Object(n.forwardRef)((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),{Factory:{valid:!0,message:""},Date:{valid:!0,message:""},Shift:{valid:!0,message:""},CausticSoda:{valid:!0,message:""},Checker:{valid:!0,message:""},TrolleyCleaning_Detail:{valid:!0,message:""},FactoryTrolley:{valid:!0,message:""}}),OO=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).dialogOpen=function(e){var t;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(void 0===e||null===e){n.next=7;break}return n.next=3,l.a.awrap(ka("confirmation","delete"));case 3:t=n.sent,a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:e,dialogMessage:r.a.createElement("span",null,void 0!==t?t.replace("[Name]",e.FactoryTrolley.TrolleyNumber):"")}),n.next=8;break;case 7:a.setState({dialogOpen:!1});case 8:case"end":return n.stop()}}))},a.diaLogClose=function(){a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:null})},a.closeForm=function(){a.setState({formControl:bO(SO)},(function(){return a.props.closeForm()}))},a.snackOpen=function(e,t,n){var r;return l.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(void 0===e||null===e||void 0===t||null===t){o.next=11;break}if(void 0!==n){o.next=7;break}return o.next=4,l.a.awrap(ka(e,t));case 4:r=o.sent,o.next=8;break;case 7:r=n;case 8:a.setState({snackOpen:!a.state.snackOpen,snackMessage:r,snackClass:e}),o.next=12;break;case 11:a.setState({snackOpen:!1});case 12:case"end":return o.stop()}}))},a.onSave=function(){var e=Object(me.a)({},a.state.formData),t=Object(me.a)({},a.state.formControl);e.TrolleyCleaning_Detail=a.state.trolleyCleaningDetail.map((function(e){return e.FactoryTrolley}));var n=EO.validateFields(e);if(!n.valid)return n.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t}),void(t.TrolleyCleaning_Detail.valid?a.snackOpen("error","alertValidation"):a.snackOpen("error","",t.TrolleyCleaning_Detail.message));"Add"===a.props.formAction?EO.add("",e).then((function(e){!0===e.code?a.props.onSuccess(e.data):null!==e.errors&&Array.isArray(e.errors)?(e.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t})):a.snackOpen("error","server")})):EO.update("",e).then((function(e){!0===e.code?a.props.onSuccess(e.data):null!==e.errors&&Array.isArray(e.errors)?(e.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t})):a.snackOpen("error","server")}))},a.onDelete=function(e){var t=Object(je.a)(a.state.trolleyCleaningDetail),n=t.indexOf(e);t.splice(n,1),a.setState({trolleyCleaningDetail:t,dialogOpen:!1},(function(){return Object(Pe.a)(a)}))},a.state={formData:a.props.formData,formOpen:a.props.formOpen,columns:[{title:"Trolley No",field:"FactoryTrolley",render:function(e){return r.a.createElement("span",null,e.FactoryTrolley.TrolleyNumber)},editComponent:function(e){return r.a.createElement(Tb,{selectedFactory:void 0===a.state.formData.Factory?"":a.state.formData.Factory._id,selectedValue:e.value,formControl:a.state.formControl.FactoryTrolley,propertyName:"FactoryTrolley",required:!0,handleChange:function(t){if(e.onChange(t),a.state.trolleyCleaningDetail.filter((function(e){return e.FactoryTrolley._id===t._id})).length>0){var n=a.state.formControl;n.FactoryTrolley.valid=!1,n.FactoryTrolley.message="This trolley has been chosen.",a.setState({formControl:n})}else a.initFormControl()},for:"Cleaning"})}}],trolleyCleaningDetail:a.props.formData.TrolleyCleaning_Detail.map((function(e){return{FactoryTrolley:e}})),formControl:bO(SO),productionCapacity:0,disabled:!1,dialogOpen:!1,dialogMessage:"",snackOpen:!1,snackMessage:"",snackClass:""},a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){}},{key:"resetFormControl",value:function(e,t){var a=Object(me.a)({},this.state.formControl);void 0!==e&&null!==e&&""!==e&&(a[t].valid=!0,a[t].message=""),this.setState({formControls:a})}},{key:"handleChange",value:function(e,t,a){var n,r;return l.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:n=Object(me.a)({},this.state.formData),r=Object(me.a)({},this.state.formControl),!a&&"Factory"!==t||void 0!==e&&""!==e?(r[t].valid=!0,r[t].message=""):(r[t].valid=!1,r[t].message="".concat(t," cannot be empty.")),n[t]=e,this.setState({formData:n});case 5:case"end":return o.stop()}}),null,this)}},{key:"initFormControl",value:function(){this.setState({formControl:bO(SO)})}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{container:!0},r.a.createElement(Ae.a,{fullScreen:!0,open:this.state.formOpen,onClose:this.closeForm,TransitionComponent:this.Transition},r.a.createElement(w.a,{className:"appBar"},r.a.createElement(F.a,null,r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:this.closeForm,"aria-label":"close"},r.a.createElement(Vt.a,null)),r.a.createElement(x.a,{variant:"h6",className:"app-title"},"Trolley Washing"),r.a.createElement(he.a,{color:"inherit",disabled:this.state.disabled,onClick:this.onSave},"save"))),r.a.createElement(_e.a,null,r.a.createElement("div",{className:"form-container"},r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-around",alignItems:"center",md:10,xs:12,sm:12,xl:10,lg:10},r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Hr,{selectedValue:this.state.formData.Factory,propertyName:"Factory",handleChange:this.handleChange,formControl:this.state.formControl.Factory})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Da.a,{required:!0,format:"dd-MMM-yyyy",label:"Date",value:this.state.formData.Date,onChange:function(t){e.handleChange(t,"Date")},disableFuture:!0})),r.a.createElement(Sa.a,{error:!this.state.formControl.Date.valid,style:{display:this.state.formControl.Date.valid?"none":""}},this.state.formControl.Date.message)),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ns,{handleChange:function(t){return e.handleChange(t,"Shift",!0)},selectedValue:this.state.formData.Shift,formControl:this.state.formControl.Shift,propertyName:"Shift",factoryId:void 0===this.state.formData.Factory._id?this.state.formData.Factory:this.state.formData.Factory._id})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{id:"CausticSoda",label:"Caustic Soda",customInput:ge.a,defaultValue:this.state.formData.CausticSoda,onValueChange:function(t){return e.handleChange(t.floatValue,"CausticSoda")},onFocus:function(e){e.target.select()},decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{required:!0,id:"Checker",label:"Checker",defaultValue:this.state.formData.Checker,onChange:function(t){return e.handleChange(t.target.value.trim(),"Checker",!0)},margin:"dense",error:!this.state.formControl.Checker.valid,helperText:this.state.formControl.Checker.message})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"Remarks",label:"Remarks",defaultValue:this.state.formData.Remarks,onChange:function(t){return e.handleChange(t.target.value,"Remarks",!1)},multiline:!0,rows:"4",margin:"dense"}))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(Ve.a,{style:{width:"100%",margin:4},title:"Trolley Washing Detail",columns:this.state.columns,data:this.state.trolleyCleaningDetail,editable:{onRowAdd:function(t){return new Promise((function(a,n){setTimeout((function(){if(""===t.FactoryTrolley||void 0===t.FactoryTrolley){n();var r=e.state.formControl;return r.FactoryTrolley.valid=!1,r.FactoryTrolley.message="Trolley cannot be empty.",void e.setState({formControl:r})}if(e.state.trolleyCleaningDetail.filter((function(e){return e.FactoryTrolley._id===t.FactoryTrolley._id})).length>0){n();var o=e.state.formControl;return o.FactoryTrolley.valid=!1,o.FactoryTrolley.message="This trolley has been chosen.",void e.setState({formControl:o})}var s=Object(je.a)(e.state.trolleyCleaningDetail);s.push(t),e.setState({trolleyCleaningDetail:s},(function(){return a()})),e.snackOpen("success","add")}),100)}))},onRowUpdate:function(t,a){return new Promise((function(n,r){setTimeout((function(){var o=Object(je.a)(e.state.trolleyCleaningDetail),s=o.indexOf(a);if(o[s]=t,""===t.FactoryTrolley||void 0===t.FactoryTrolley){r();var i=e.state.formControl;return i.FactoryTrolley.valid=!1,i.FactoryTrolley.message="Trolley cannot be empty.",void e.setState({formControl:i})}if(o.filter((function(e){return e.FactoryTrolley._id===t.FactoryTrolley._id})).length>1){r();var l=e.state.formControl;return l.FactoryTrolley.valid=!1,l.FactoryTrolley.message="This trolley has been chosen.",void e.setState({formControl:l})}e.setState({trolleyCleaningDetail:o},(function(){return n()}))}),100)}))}},actions:[{icon:"delete",tooltip:"Delete",onClick:function(t,a){return e.dialogOpen(a)}}],icons:{Clear:function(t){return r.a.createElement(Nt.a,{onClick:function(){e.initFormControl()},style:{padding:0,margin:0}})}},options:{pageSize:10,search:!1}})))))),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.snackClass,autoHideDuration:600,open:this.state.snackOpen,onClose:this.snackOpen,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.snackMessage)}),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.dialogOpen,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.diaLogClose,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDelete,color:"primary"},"Delete"))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return{formOpen:e.formOpen}}}]),t}(r.a.Component),kO=OO,wO=a(23),FO=(Object(n.forwardRef)((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),r.a.forwardRef((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).snackOpen=function(e,t){var n;return l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0===e||null===e||void 0===t||null===t){r.next=7;break}return r.next=3,l.a.awrap(ka(e,t));case 3:n=r.sent,a.setState({snackOpen:!a.state.snackOpen,alertMessage:n,alertClass:e}),r.next=8;break;case 7:a.setState({snackOpen:!1});case 8:case"end":return r.stop()}}))},a.dialogOpen=function(e){var t;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,l.a.awrap(ka("confirmation","delete"));case 2:t=n.sent,a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:e,dialogMessage:r.a.createElement("span",null,void 0!==t?t.replace("[Name]",e.Factory.FctyName):"")});case 4:case"end":return n.stop()}}))},a.diaLogClose=function(){a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:null})},a.onDelete=function(){var e=Object(je.a)(a.state.data),t=e.indexOf(a.state.currentDeleteData);void 0!==a.state.currentDeleteData&&null!==a.state.currentDeleteData&&EO.delete(a.state.currentDeleteData._id).then((function(n){!0===n.code?(e.splice(t,1),a.setState({data:e,dialogOpen:!1},(function(){return a.snackOpen("success","delete")}))):a.setState({dialogOpen:!1},(function(){return a.snackOpen("error","server")}))}))},a.state={columns:[{title:"Factory",field:"Factory",render:function(e){return r.a.createElement("span",null,e.Factory.FctyName)}},{title:"Date",field:"Date",render:function(e){return r.a.createElement("span",null,void 0===e?"":new Date(e.Date).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric"}))}},{title:"Shift",field:"Shift",render:function(e){return r.a.createElement("span",null,e.Shift.Name)}},{title:"Caustic Soda",field:"CausticSoda"},{title:"Checker",field:"Checker"},{title:"Count of Trolley",field:"TrolleyCleaning_Detail",render:function(e){return r.a.createElement("span",null,e.TrolleyCleaning_Detail.length)}},{title:"Operator",field:"LastUpdatedBy"},{title:"Last Updated",field:"LastUpdatedAt",render:function(e){return r.a.createElement("span",null,void 0===e?"":new Date(e.LastUpdatedAt).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}))},editable:"never"}],data:[],formData:null,currentDeleteData:null,formOpen:!1,formAction:"",snackOpen:!1,dialogOpen:!1,alertMessage:"",dialogMessage:"",alertClass:""},a.TrolleyCleaningModel=wO(ou),a.openForm=a.openForm.bind(Object(Pe.a)(a)),a.closeForm=a.closeForm.bind(Object(Pe.a)(a)),a.onSuccess=a.onSuccess.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initTrolleyCleaning()}},{key:"openForm",value:function(e){var t=e,a=this.state.formAction;void 0===t||null===t?(t=this.TrolleyCleaningModel,a="Add"):a="update",this.setState({formData:t,formOpen:!this.state.formOpen,formAction:a})}},{key:"closeForm",value:function(){this.setState({formData:null,formOpen:!1,formAction:""})}},{key:"initTrolleyCleaning",value:function(){var e=this;EO.get("").then((function(t){!0===t.code?e.setState({data:t.data}):e.snackOpen("error","server")}))}},{key:"onSuccess",value:function(e){var t=this,a=Object(je.a)(this.state.data);if(void 0!==e&&null!==e)if("Add"===this.state.formAction)a.push(e),this.setState({data:a,formOpen:!this.state.formOpen,formAction:"",formData:null},(function(){return t.snackOpen("success","add")}));else{var n=a.indexOf(this.state.formData);a[n]=e,this.setState({data:a,formOpen:!this.state.formOpen,formAction:"",formData:null},(function(){return t.snackOpen("success","update")}))}else this.snackOpen("error","server")}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{container:!0,direction:"column",justify:"center",wrap:"wrap",style:{margin:"20px 20px 10px 0px"}},r.a.createElement(be.a,{item:!0,xs:12},r.a.createElement(Ve.a,{title:"Trolley Washing",columns:this.state.columns,data:this.state.data,components:{Toolbar:function(t){return r.a.createElement("div",null,r.a.createElement(Le.MTableToolbar,t),r.a.createElement("div",{style:{padding:"0px 15px"}},r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:function(){return e.openForm(t.rowData)},"aria-label":"add"},r.a.createElement(wt.a,null))))}},actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.data,columns:e.state.columns,fileName:"TrolleyCleaning"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.initTrolleyCleaning()}},{icon:"edit",tooltip:"Edit User",onClick:function(t,a){return e.openForm(a)}},{icon:"delete",tooltip:"Delete User",onClick:function(t,a){return e.dialogOpen(a)}}],options:{}})),r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-evenly",alignItems:"center",md:10,xs:12,sm:12,xl:10,lg:10},this.state.formOpen?r.a.createElement(kO,{formData:this.state.formData,formAction:this.state.formAction,formOpen:this.state.formOpen,onSuccess:this.onSuccess,closeForm:this.closeForm}):""),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:600,open:this.state.snackOpen,onClose:this.snackOpen,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.diaLogClose,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.diaLogClose,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDelete,color:"primary"},"Delete"))))}}]),t}(r.a.Component)),xO=FO,TO=(a(997),{properties:{Factory:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Factory cannot be empty.",conform:"Factory cannot be empty.",required:"Factory cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},Datetime:{description:"",type:"any",required:!0,allowEmpty:!1,messages:{allowEmpty:"Datetime cannot be empty.",conform:"Datetime cannot be empty.",required:"Datetime cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},Shift:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Shift cannot be empty.",conform:"Shift cannot be empty.",required:"Shift cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},MachineList:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Machine List cannot be empty.",conform:"Machine List cannot be empty.",required:"Machine List cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},StdWeightConfiguration:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Std Weight Configuration cannot be empty.",conform:"Std Weight Configuration cannot be empty.",required:"Std Weight Configuration cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},CheckResult:{description:"",type:"number"},Remarks:{description:"",type:"string"},CreatedAt:{type:"any",default:Date.now()},CreatedBy:{type:"string",default:""},LastUpdatedAt:{type:"any",default:Date.now()},LastUpdatedBy:{type:"string",default:""}}}),NO=a(24),jO={validateFields:function(e){return NO.validate(e,TO,{cast:!0})},get:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="weightScaleCheck/"+e,a.abrupt("return",We(t).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},getFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("weightScaleCheck-filter/").concat(e),a.abrupt("return",We(t).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},getOne:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("weightScaleCheck/").concat(e),a.abrupt("return",We(t).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},update:function(e,t){return Qe("weightScaleCheck/"+e,t).then((function(e){return console.log(e),200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Updated",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="weightScaleCheck/"+e,n.abrupt("return",He(a,t).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Added",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,formValid:!0,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("weightScaleCheck/"+e).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))}},PO=jO,AO={Factory:"",Datetime:new Date,Shift:"",MachineList:"",StdWeightConfiguration:"",CheckResult:0,Remarks:""},MO=AO,_O=(a(998),a(999),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={stdWeightConfigurationData:[]},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){void 0!==this.props.selectedFactory&&""!==this.props.selectedFactory&&this.fetchStdWeightConfigurationData(this.props.selectedFactory)}},{key:"componentDidUpdate",value:function(e){this.props.selectedFactory!==e.selectedFactory&&void 0!==this.props.selectedFactory&&""!==this.props.selectedFactory&&this.fetchStdWeightConfigurationData(this.props.selectedFactory)}},{key:"fetchStdWeightConfigurationData",value:function(e){var t=this;iE.getFilter("?Factory=".concat(e)).then((function(e){t.setState({stdWeightConfigurationData:e.data})}))}},{key:"renderOptions",value:function(){return this.state.stdWeightConfigurationData.map((function(e,t){return r.a.createElement(et.a,{label:"Select Std. Weight No",value:e.id,key:e.id,name:e.StdWeightNo},e.StdWeightNo)}))}},{key:"handleChange",value:function(e){var t=this.state.stdWeightConfigurationData.find((function(t){return t.id===e.target.value}));void 0!==t?this.props.handleChange(t,this.props.propertyName,this.props.required):this.props.handleChange("",this.props.propertyName,this.props.required)}},{key:"render",value:function(){var e=this;return r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(Ea.a,{shrink:!0,htmlFor:"Std. Weight No",required:!0,error:!this.props.formControl.valid},"Std. Weight No"),r.a.createElement(ba.a,{id:this.props.propertyName,value:void 0===this.props.selectedValue||void 0===this.props.selectedValue.id?"":this.props.selectedValue.id,style:{minWidth:140},error:!this.props.formControl.valid,onChange:function(t){return e.handleChange(t,e.props.propertyName)},margin:"dense",displayEmpty:!0},r.a.createElement(et.a,{value:""},r.a.createElement("em",null,"Select Std. Weight No")),this.renderOptions()),r.a.createElement(Sa.a,{error:!this.props.formControl.valid,style:{display:this.props.formControl.valid?"none":""}},this.props.formControl.valid?"":this.props.formControl.message))}}]),t}(r.a.Component)),IO=_O,RO=IO,LO=a(23),VO=(Object(n.forwardRef)((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),{Factory:{valid:!0,message:""},Datetime:{valid:!0,message:""},Shift:{valid:!0,message:""},MachineList:{valid:!0,message:""},StdWeightConfiguration:{valid:!0,message:""},CheckResult:{valid:!0,message:""},Checker:{valid:!0,message:""},Remarks:{valid:!0,message:""}}),BO=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).closeForm=function(){a.setState({formControl:LO(VO)},(function(){return a.props.closeForm()}))},a.snackOpen=function(e,t,n){var r;return l.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(void 0===e||null===e||void 0===t||null===t){o.next=11;break}if(void 0!==n){o.next=7;break}return o.next=4,l.a.awrap(ka(e,t));case 4:r=o.sent,o.next=8;break;case 7:r=n;case 8:a.setState({snackOpen:!a.state.snackOpen,snackMessage:r,snackClass:e}),o.next=12;break;case 11:a.setState({snackOpen:!1});case 12:case"end":return o.stop()}}))},a.onSave=function(){var e=Object(me.a)({},a.state.formData),t=Object(me.a)({},a.state.formControl),n=PO.validateFields(e);return n.valid?a.state.formData.CheckResult>a.state.formData.StdWeightConfiguration.StdWeight&&""===e.Remarks?(t.Remarks.valid=!1,t.Remarks.message="Remarks cannot be empty.",void a.snackOpen("error","alertValidation")):void("Add"===a.props.formAction?PO.add("",e).then((function(e){!0===e.code?a.props.onSuccess(e.data):null!==e.errors&&Array.isArray(e.errors)?(e.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t})):a.snackOpen("error","server")})):PO.update("",e).then((function(e){!0===e.code?a.props.onSuccess(e.data):null!==e.errors&&Array.isArray(e.errors)?(e.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t})):a.snackOpen("error","server")}))):(n.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t}),void a.snackOpen("error","alertValidation"))},a.state={formData:a.props.formData,formOpen:a.props.formOpen,formControl:LO(VO),disabled:!1,snackOpen:!1,snackMessage:"",snackClass:""},a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"handleChange",value:function(e,t,a){var n=Object(me.a)({},this.state.formData),r=Object(me.a)({},this.state.formControl);!a&&"Factory"!==t||void 0!==e&&""!==e?(r[t].valid=!0,r[t].message=""):(r[t].valid=!1,r[t].message="".concat(t," cannot be empty.")),n[t]=e,this.setState({formData:n})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(Ae.a,{fullScreen:!0,open:this.state.formOpen,onClose:this.closeForm,TransitionComponent:this.Transition},r.a.createElement(w.a,{className:"appBar"},r.a.createElement(F.a,null,r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:this.closeForm,"aria-label":"close"},r.a.createElement(Vt.a,null)),r.a.createElement(x.a,{variant:"h6",className:"app-title"},"Weight Scale Check"),r.a.createElement(he.a,{color:"inherit",disabled:this.state.disabled,onClick:this.onSave},"save"))),r.a.createElement(_e.a,null,r.a.createElement("div",{className:"form-container"},r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-evenly",alignItems:"center",md:6,xs:12,sm:12,xl:8,lg:8},r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Hr,{selectedValue:this.state.formData.Factory,propertyName:"Factory",handleChange:this.handleChange,formControl:this.state.formControl.Factory})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Ac.a,{required:!0,format:"dd-MMM-yyyy hh:mm",label:"Datetime",value:this.state.formData.Datetime,onChange:function(t){e.handleChange(t,"Datetime")}})),r.a.createElement(Sa.a,{error:!this.state.formControl.Datetime.valid,style:{display:this.state.formControl.Datetime.valid?"none":""}},this.state.formControl.Datetime.message)),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ns,{handleChange:this.handleChange,selectedValue:this.state.formData.Shift,formControl:this.state.formControl.Shift,propertyName:"Shift",factoryId:void 0===this.state.formData.Factory._id?this.state.formData.Factory:this.state.formData.Factory._id})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(wb,{selectedFactory:void 0===this.state.formData.Factory?"":this.state.formData.Factory._id,selectedValue:this.state.formData.MachineList,formControl:this.state.formControl.MachineList,propertyName:"MachineList",required:!0,handleChange:function(t){e.handleChange(t,"MachineList",!0)},machineType:"Weight Scale",abvrs:"WS"})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(RO,{handleChange:this.handleChange,selectedValue:this.state.formData.StdWeightConfiguration,formControl:this.state.formControl.StdWeightConfiguration,propertyName:"StdWeightConfiguration",selectedFactory:void 0===this.state.formData.Factory._id?this.state.formData.Factory:this.state.formData.Factory._id})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Check Result",defaultValue:this.state.formData.CheckResult,thousandSeparator:!0,decimalScale:2,fixedDecimalScale:!0,onValueChange:function(t){e.handleChange(void 0===t.floatValue?0:t.floatValue,"CheckResult",!1)},onFocus:function(e){e.target.select()}})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Standard Weight",value:this.state.formData.StdWeightConfiguration.StdWeight,thousandSeparator:!0,decimalScale:2,fixedDecimalScale:!0,disabled:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"Status",label:"Status",value:""===this.state.formData.StdWeightConfiguration?"In Spec":this.state.formData.CheckResult<=this.state.formData.StdWeightConfiguration.StdWeight?"In Spec":"Out of Standard",margin:"dense",disabled:!0,error:this.state.formData.CheckResult>this.state.formData.StdWeightConfiguration.StdWeight})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"Remarks",label:"Remarks",multiline:!0,rows:"4",defaultValue:this.state.formData.Remarks,className:"",onChange:function(t){return e.handleChange(t.target.value,"Remarks",e.state.formData.TDS>e.state.formData.StdWeightConfiguration.MaxTDSValue)},error:!this.state.formControl.Remarks.valid,helperText:this.state.formControl.Remarks.message,margin:"dense"}))))))),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.snackClass,autoHideDuration:600,open:this.state.snackOpen,onClose:this.snackOpen,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.snackMessage)}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return{formOpen:e.formOpen}}}]),t}(r.a.Component),UO=a(23),qO=(Object(n.forwardRef)((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),r.a.forwardRef((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).snackOpen=function(e,t){var n;return l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0===e||null===e||void 0===t||null===t){r.next=7;break}return r.next=3,l.a.awrap(ka(e,t));case 3:n=r.sent,a.setState({snackOpen:!a.state.snackOpen,alertMessage:n,alertClass:e}),r.next=8;break;case 7:a.setState({snackOpen:!1});case 8:case"end":return r.stop()}}))},a.dialogOpen=function(e){var t;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,l.a.awrap(ka("confirmation","delete"));case 2:t=n.sent,a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:e,dialogMessage:r.a.createElement("span",null,void 0!==t?t.replace("[Name]",e.Factory.FctyName):"")});case 4:case"end":return n.stop()}}))},a.diaLogClose=function(){a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:null})},a.onDelete=function(){var e=Object(je.a)(a.state.data),t=e.indexOf(a.state.currentDeleteData);void 0!==a.state.currentDeleteData&&null!==a.state.currentDeleteData&&PO.delete(a.state.currentDeleteData._id).then((function(n){!0===n.code?(e.splice(t,1),a.setState({data:e,dialogOpen:!1},(function(){return a.snackOpen("success","delete")}))):a.setState({dialogOpen:!1},(function(){return a.snackOpen("error","server")}))}))},a.state={columns:[{title:"Factory",field:"Factory",render:function(e){return r.a.createElement("span",null,e.Factory.FctyName)}},{title:"Date",field:"Datetime",render:function(e){return r.a.createElement("span",null,void 0===e?"":new Date(e.Datetime).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric"}))}},{title:"Time",field:"Datetime",render:function(e){return r.a.createElement("span",null,void 0===e?"":new Date(e.Datetime).toLocaleString("en-GB",{hour:"numeric",minute:"numeric"}))}},{title:"Shift",field:"Shift",render:function(e){return r.a.createElement("span",null,e.Shift.Name)}},{title:"Weight Scale No",field:"MachineList",render:function(e){return r.a.createElement("span",null,e.MachineList.MachLstCode)}},{title:"Std. Weight No",field:"StdWeightConfiguration",render:function(e){return r.a.createElement("span",null,e.StdWeightConfiguration.StdWeightNo)}},{title:"Check Result",field:"CheckResult"},{title:"Status",field:"CheckResult",render:function(e){return r.a.createElement("span",null,e.CheckResult<=e.StdWeightConfiguration.StdWeight?"In Spec":"Out of Standard")}},{title:"Remarks",field:"Remarks"},{title:"Operator",field:"LastUpdatedBy"},{title:"Last Updated",field:"LastUpdatedAt",render:function(e){return r.a.createElement("span",null,void 0===e?"":new Date(e.LastUpdatedAt).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}))},editable:"never"}],data:[],formData:null,currentDeleteData:null,formOpen:!1,formAction:"",snackOpen:!1,dialogOpen:!1,alertMessage:"",dialogMessage:"",alertClass:""},a.WeightScaleCheckModel=UO(MO),a.openForm=a.openForm.bind(Object(Pe.a)(a)),a.closeForm=a.closeForm.bind(Object(Pe.a)(a)),a.onSuccess=a.onSuccess.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initWeightScaleCheck()}},{key:"openForm",value:function(e){var t=e,a=this.state.formAction;void 0===t||null===t?(t=this.WeightScaleCheckModel,a="Add"):a="update",this.setState({formData:t,formOpen:!this.state.formOpen,formAction:a})}},{key:"closeForm",value:function(){this.setState({formData:null,formOpen:!1,formAction:""})}},{key:"initWeightScaleCheck",value:function(){var e=this;PO.get("").then((function(t){!0===t.code?e.setState({data:t.data}):e.snackOpen("error","server")}))}},{key:"onSuccess",value:function(e){var t=this,a=Object(je.a)(this.state.data);if(void 0!==e&&null!==e)if("Add"===this.state.formAction)a.push(e),this.setState({data:a,formOpen:!this.state.formOpen,formAction:"",formData:null},(function(){return t.snackOpen("success","add")}));else{var n=a.indexOf(this.state.formData);a[n]=e,this.setState({data:a,formOpen:!this.state.formOpen,formAction:"",formData:null},(function(){return t.snackOpen("success","update")}))}else this.snackOpen("error","server")}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{container:!0,direction:"column",justify:"center",wrap:"wrap",style:{margin:"20px 20px 10px 0px"}},r.a.createElement(be.a,{item:!0,xs:12},r.a.createElement(Ve.a,{title:"Weight Scale Check",columns:this.state.columns,data:this.state.data,components:{Toolbar:function(t){return r.a.createElement("div",null,r.a.createElement(Le.MTableToolbar,t),r.a.createElement("div",{style:{padding:"0px 15px"}},r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:function(){return e.openForm(t.rowData)},"aria-label":"add"},r.a.createElement(wt.a,null))))}},actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.data,columns:e.state.columns,fileName:"WeightScaleCheck"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.initWeightScaleCheck()}},{icon:"edit",tooltip:"Edit User",onClick:function(t,a){return e.openForm(a)}},{icon:"delete",tooltip:"Delete User",onClick:function(t,a){return e.dialogOpen(a)}}],options:{}})),r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-evenly",alignItems:"center",md:10,xs:12,sm:12,xl:10,lg:10},this.state.formOpen?r.a.createElement(BO,{formData:this.state.formData,formAction:this.state.formAction,formOpen:this.state.formOpen,onSuccess:this.onSuccess,closeForm:this.closeForm}):""),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:600,open:this.state.snackOpen,onClose:this.snackOpen,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.diaLogClose,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.diaLogClose,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDelete,color:"primary"},"Delete"))))}}]),t}(r.a.Component)),GO=(a(1e3),{properties:{Factory:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Factory cannot be empty.",conform:"Factory cannot be empty.",required:"Factory cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},DateSampling:{description:"",type:"any",required:!0,allowEmpty:!1,messages:{allowEmpty:"Date Sampling cannot be empty.",conform:"Date Sampling cannot be empty.",required:"Date Sampling cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},DateTest:{description:"",type:"any",required:!0,allowEmpty:!1,messages:{allowEmpty:"Date Test cannot be empty.",conform:"Date Test cannot be empty.",required:"Date Test cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},Shift:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Shift cannot be empty.",conform:"Shift cannot be empty.",required:"Shift cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},HSMaster_Detail:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"HS No cannot be empty.",conform:"HS No cannot be empty.",required:"HS No cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},VisualCheck:{description:"",type:"string",required:!0,allowEmpty:!1,messages:{allowEmpty:"Visual Check cannot be empty.",conform:"Visual Check cannot be empty.",required:"Visual Check cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},DRC:{description:"",type:"number",exclusiveMinimum:0,messages:{exclusiveMinimum:"DRC must be greater than 0."}},PO:{description:"",type:"number"},Dirt:{description:"",type:"number"},P30:{description:"",type:"number"},PRI:{description:"",type:"number"},MV:{description:"",type:"number"},CreatedAt:{type:"any",default:Date.now()},CreatedBy:{type:"string",default:""},LastUpdatedAt:{type:"any",default:Date.now()},LastUpdatedBy:{type:"string",default:""}}}),WO=a(24),HO={validateFields:function(e){return WO.validate(e,GO,{cast:!0})},get:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="blanketQualityCheck/"+e,a.abrupt("return",We(t).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},getFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("blanketQualityCheck-filter/").concat(e),a.abrupt("return",We(t).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},getOne:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("blanketQualityCheck/").concat(e),a.abrupt("return",We(t).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},update:function(e,t){return Qe("blanketQualityCheck/"+e,t).then((function(e){return console.log(e),200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Updated",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="blanketQualityCheck/"+e,n.abrupt("return",He(a,t).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Added",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,formValid:!0,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("blanketQualityCheck/"+e).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))}},QO={Factory:"",HSMaster_Detail:"",DateSampling:new Date,DateTest:new Date,Shift:"",VisualCheck:"",DRC:0,Dirt:0,PO:0,P30:0,PRI:0,MV:0,Status:!0,Remarks:""},zO=(a(1001),a(23)),YO=(Object(n.forwardRef)((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),{Factory:{valid:!0,message:""},HSMaster_Detail:{valid:!0,message:""},DateSampling:{valid:!0,message:""},DateTest:{valid:!0,message:""},Shift:{valid:!0,message:""},VisualCheck:{valid:!0,message:""},DRC:{valid:!0,message:""},Dirt:{valid:!0,message:""},PO:{valid:!0,message:""},P30:{valid:!0,message:""},PRI:{valid:!0,message:""},MV:{valid:!0,message:""},Status:{valid:!0,message:""},Remarks:{valid:!0,message:""}}),KO=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).closeForm=function(){a.setState({formControl:zO(YO)},(function(){return a.props.closeForm()}))},a.snackOpen=function(e,t,n){var r;return l.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(void 0===e||null===e||void 0===t||null===t){o.next=11;break}if(void 0!==n){o.next=7;break}return o.next=4,l.a.awrap(ka(e,t));case 4:r=o.sent,o.next=8;break;case 7:r=n;case 8:a.setState({snackOpen:!a.state.snackOpen,snackMessage:r,snackClass:e}),o.next=12;break;case 11:a.setState({snackOpen:!1});case 12:case"end":return o.stop()}}))},a.onSave=function(){var e=Object(me.a)({},a.state.formData),t=Object(me.a)({},a.state.formControl),n=HO.validateFields(e);return n.valid?a.state.formData.Status||""!==e.Remarks?void("Add"===a.props.formAction?HO.add("",e).then((function(e){!0===e.code?a.props.onSuccess(e.data):null!==e.errors&&Array.isArray(e.errors)?(e.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t})):a.snackOpen("error","server")})):HO.update("",e).then((function(e){!0===e.code?a.props.onSuccess(e.data):null!==e.errors&&Array.isArray(e.errors)?(e.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t})):a.snackOpen("error","server")}))):(t.Remarks.valid=!1,t.Remarks.message="Remarks cannot be empty.",void a.snackOpen("error","alertValidation")):(n.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t}),void a.snackOpen("error","alertValidation"))},a.state={formData:a.props.formData,formOpen:a.props.formOpen,formControl:zO(YO),disabled:!1,snackOpen:!1,snackMessage:"",snackClass:""},a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"handleChange",value:function(e,t,a){var n=Object(me.a)({},this.state.formData),r=Object(me.a)({},this.state.formControl);!a&&"Factory"!==t||void 0!==e&&""!==e?(r[t].valid=!0,r[t].message=""):(r[t].valid=!1,r[t].message="".concat(t," cannot be empty.")),n[t]=e,this.setState({formData:n})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(Ae.a,{fullScreen:!0,open:this.state.formOpen,onClose:this.closeForm,TransitionComponent:this.Transition},r.a.createElement(w.a,{className:"appBar"},r.a.createElement(F.a,null,r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:this.closeForm,"aria-label":"close"},r.a.createElement(Vt.a,null)),r.a.createElement(x.a,{variant:"h6",className:"app-title"},"Blanket Quality Check"),r.a.createElement(he.a,{color:"inherit",disabled:this.state.disabled,onClick:this.onSave},"save"))),r.a.createElement(_e.a,null,r.a.createElement("div",{className:"form-container"},r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-evenly",alignItems:"center",md:6,xs:12,sm:12,xl:8,lg:8},r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Hr,{selectedValue:this.state.formData.Factory,propertyName:"Factory",handleChange:this.handleChange,formControl:this.state.formControl.Factory})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(by,{handleChange:function(t){return e.handleChange(t,"HSMaster_Detail",!0)},selectedValue:this.state.formData.HSMaster_Detail,formControl:this.state.formControl.HSMaster_Detail,propertyName:"HSMaster_Detail",selectedFactory:void 0===this.state.formData.Factory||""===this.state.formData.Factory?"":this.state.formData.Factory._id,columns:["NumberResult","CurrentCapacity"],required:!0,existingSelection:this.props.formData.HSMaster_Detail})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Da.a,{required:!0,format:"dd-MMM-yyyy",label:"Date Sampling",value:this.state.formData.DateSampling,onChange:function(t){e.handleChange(t,"DateSampling")},disableFuture:!0}))),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Da.a,{required:!0,format:"dd-MMM-yyyy",label:"Date Test",value:this.state.formData.DateTest,onChange:function(t){e.handleChange(t,"DateTest")}}))),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ns,{handleChange:this.handleChange,selectedValue:this.state.formData.Shift,formControl:this.state.formControl.Shift,propertyName:"Shift",factoryId:void 0===this.state.formData.Factory._id?this.state.formData.Factory:this.state.formData.Factory._id})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"VisualCheck",label:"Visual Check",required:!0,defaultValue:this.state.formData.VisualCheck,className:"",onChange:function(t){return e.handleChange(t.target.value.trim(),"VisualCheck",!0)},error:!this.state.formControl.VisualCheck.valid,helperText:this.state.formControl.VisualCheck.message,margin:"dense"})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{required:!0,customInput:ge.a,label:"DRC (%)",defaultValue:this.state.formData.DRC,thousandSeparator:!0,decimalScale:2,fixedDecimalScale:!0,onValueChange:function(t){e.handleChange(void 0===t.floatValue?0:t.floatValue,"DRC",!0)},onFocus:function(e){e.target.select()},error:!this.state.formControl.DRC.valid,helperText:this.state.formControl.DRC.message})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Dirt (%)",defaultValue:this.state.formData.Dirt,thousandSeparator:!0,decimalScale:2,fixedDecimalScale:!0,onValueChange:function(t){e.handleChange(void 0===t.floatValue?0:t.floatValue,"Dirt",!0)},onFocus:function(e){e.target.select()},error:!this.state.formControl.Dirt.valid,helperText:this.state.formControl.Dirt.message})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"PO",defaultValue:this.state.formData.PO,thousandSeparator:!0,decimalScale:2,fixedDecimalScale:!0,onValueChange:function(t){e.handleChange(void 0===t.floatValue?0:t.floatValue,"PO",!0)},onFocus:function(e){e.target.select()},error:!this.state.formControl.PO.valid,helperText:this.state.formControl.PO.message})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"P30",defaultValue:this.state.formData.P30,thousandSeparator:!0,decimalScale:2,fixedDecimalScale:!0,onValueChange:function(t){e.handleChange(void 0===t.floatValue?0:t.floatValue,"P30",!0)},onFocus:function(e){e.target.select()},error:!this.state.formControl.P30.valid,helperText:this.state.formControl.P30.message})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"PRI",defaultValue:this.state.formData.PRI,thousandSeparator:!0,decimalScale:2,fixedDecimalScale:!0,onValueChange:function(t){e.handleChange(void 0===t.floatValue?0:t.floatValue,"PRI",!0)},onFocus:function(e){e.target.select()},error:!this.state.formControl.PRI.valid,helperText:this.state.formControl.PRI.message})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"MV",defaultValue:this.state.formData.MV,thousandSeparator:!0,decimalScale:2,fixedDecimalScale:!0,onValueChange:function(t){e.handleChange(void 0===t.floatValue?0:t.floatValue,"MV",!0)},onFocus:function(e){e.target.select()},error:!this.state.formControl.MV.valid,helperText:this.state.formControl.MV.message})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(Ea.a,{shrink:!0,htmlFor:"ddlStatus",required:!0,error:!this.state.formControl.Status.valid},"Status"),r.a.createElement(ba.a,{id:"ddlStatus",value:this.state.formData.Status,error:!this.state.formControl.Status.valid,onChange:function(t){return e.handleChange(t.target.value,"Status",!0)}},r.a.createElement(et.a,{value:!0},"OK"),r.a.createElement(et.a,{value:!1},"NOT OK")))),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"Remarks",label:"Remarks",multiline:!0,rows:"4",defaultValue:this.state.formData.Remarks,className:"",onChange:function(t){return e.handleChange(t.target.value,"Remarks",!e.state.formData.Status)},error:!this.state.formControl.Remarks.valid,helperText:this.state.formControl.Remarks.message,margin:"dense"}))))))),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.snackClass,autoHideDuration:600,open:this.state.snackOpen,onClose:this.snackOpen,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.snackMessage)}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return{formOpen:e.formOpen}}}]),t}(r.a.Component),JO=a(23),ZO=(Object(n.forwardRef)((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),r.a.forwardRef((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).snackOpen=function(e,t){var n;return l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0===e||null===e||void 0===t||null===t){r.next=7;break}return r.next=3,l.a.awrap(ka(e,t));case 3:n=r.sent,a.setState({snackOpen:!a.state.snackOpen,alertMessage:n,alertClass:e}),r.next=8;break;case 7:a.setState({snackOpen:!1});case 8:case"end":return r.stop()}}))},a.dialogOpen=function(e){var t;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,l.a.awrap(ka("confirmation","delete"));case 2:t=n.sent,a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:e,dialogMessage:r.a.createElement("span",null,void 0!==t?t.replace("[Name]",e.Factory.FctyName):"")});case 4:case"end":return n.stop()}}))},a.diaLogClose=function(){a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:null})},a.onDelete=function(){var e=Object(je.a)(a.state.data),t=e.indexOf(a.state.currentDeleteData);void 0!==a.state.currentDeleteData&&null!==a.state.currentDeleteData&&HO.delete(a.state.currentDeleteData._id).then((function(n){!0===n.code?(e.splice(t,1),a.setState({data:e,dialogOpen:!1},(function(){return a.snackOpen("success","delete")}))):a.setState({dialogOpen:!1},(function(){return a.snackOpen("error","server")}))}))},a.state={columns:[{title:"Factory",field:"Factory",render:function(e){return r.a.createElement("span",null,e.Factory.FctyName)}},{title:"HS Number",field:"HSMaster_Detail",render:function(e){return r.a.createElement("span",null,e.HSMaster_Detail.NumberResult)}},{title:"Sampling Date",field:"DateSampling",render:function(e){return r.a.createElement("span",null,void 0===e?"":new Date(e.DateSampling).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric"}))}},{title:"Test Date",field:"DateTest",render:function(e){return r.a.createElement("span",null,void 0===e?"":new Date(e.DateTest).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric"}))}},{title:"Shift",field:"Shift",render:function(e){return r.a.createElement("span",null,e.Shift.Name)}},{title:"Visual Check",field:"VisualCheck"},{title:"DRC (%)",field:"DRC",render:function(e){return r.a.createElement(Xa.a,{value:e.DRC,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"Dirt (%)",field:"Dirt",render:function(e){return r.a.createElement(Xa.a,{value:e.Dirt,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"PO",field:"PO",render:function(e){return r.a.createElement(Xa.a,{value:e.PO,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"P30",field:"P30",render:function(e){return r.a.createElement(Xa.a,{value:e.P30,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"PRI",field:"PRI",render:function(e){return r.a.createElement(Xa.a,{value:e.PRI,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"MV",field:"MV",render:function(e){return r.a.createElement(Xa.a,{value:e.MV,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"Status",field:"Status",lookup:{true:"OK",false:"NOT OK"}},{title:"Remarks",field:"Remarks"},{title:"Operator",field:"LastUpdatedBy"},{title:"Last Updated",field:"LastUpdatedAt",render:function(e){return r.a.createElement("span",null,void 0===e?"":new Date(e.LastUpdatedAt).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}))},editable:"never"}],data:[],formData:null,currentDeleteData:null,formOpen:!1,formAction:"",snackOpen:!1,dialogOpen:!1,alertMessage:"",dialogMessage:"",alertClass:""},a.BlanketQualityCheckModel=JO(QO),a.openForm=a.openForm.bind(Object(Pe.a)(a)),a.closeForm=a.closeForm.bind(Object(Pe.a)(a)),a.onSuccess=a.onSuccess.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initBlanketQualityCheck()}},{key:"openForm",value:function(e){var t=e,a=this.state.formAction;void 0===t||null===t?(t=this.BlanketQualityCheckModel,a="Add"):a="update",this.setState({formData:t,formOpen:!this.state.formOpen,formAction:a})}},{key:"closeForm",value:function(){this.setState({formData:null,formOpen:!1,formAction:""})}},{key:"initBlanketQualityCheck",value:function(){var e=this;HO.get("").then((function(t){!0===t.code?e.setState({data:t.data}):e.snackOpen("error","server")}))}},{key:"onSuccess",value:function(e){var t=this,a=Object(je.a)(this.state.data);if(void 0!==e&&null!==e)if("Add"===this.state.formAction)a.push(e),this.setState({data:a,formOpen:!this.state.formOpen,formAction:"",formData:null},(function(){return t.snackOpen("success","add")}));else{var n=a.indexOf(this.state.formData);a[n]=e,this.setState({data:a,formOpen:!this.state.formOpen,formAction:"",formData:null},(function(){return t.snackOpen("success","update")}))}else this.snackOpen("error","server")}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{container:!0,direction:"column",justify:"center",wrap:"wrap",style:{margin:"20px 20px 10px 0px"}},r.a.createElement(be.a,{item:!0,xs:12},r.a.createElement(Ve.a,{title:"Blanket Quality Check",columns:this.state.columns,data:this.state.data,components:{Toolbar:function(t){return r.a.createElement("div",null,r.a.createElement(Le.MTableToolbar,t),r.a.createElement("div",{style:{padding:"0px 15px"}},r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:function(){return e.openForm(t.rowData)},"aria-label":"add"},r.a.createElement(wt.a,null))))}},actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.data,columns:e.state.columns,fileName:"Blanket Quality Check"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.initBlanketQualityCheck()}},{icon:"edit",tooltip:"Edit User",onClick:function(t,a){return e.openForm(a)}},{icon:"delete",tooltip:"Delete User",onClick:function(t,a){return e.dialogOpen(a)}}],options:{}})),r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-evenly",alignItems:"center",md:10,xs:12,sm:12,xl:10,lg:10},this.state.formOpen?r.a.createElement(KO,{formData:this.state.formData,formAction:this.state.formAction,formOpen:this.state.formOpen,onSuccess:this.onSuccess,closeForm:this.closeForm}):""),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:600,open:this.state.snackOpen,onClose:this.snackOpen,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.diaLogClose,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.diaLogClose,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDelete,color:"primary"},"Delete"))))}}]),t}(r.a.Component)),XO=(a(1002),{properties:{Factory:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Factory cannot be empty.",conform:"Factory cannot be empty.",required:"Factory cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},Datetime:{description:"",type:"any",required:!0,allowEmpty:!1,messages:{allowEmpty:"Datetime cannot be empty.",conform:"Datetime cannot be empty.",required:"Datetime cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},Shift:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Shift cannot be empty.",conform:"Shift cannot be empty.",required:"Shift cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},MachineList:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Metal Detector cannot be empty.",conform:"Metal Detector cannot be empty.",required:"Metal Detector cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},Supervisor:{description:"",type:"string"},B01_Setting:{description:"",type:"number"},B01_Actual:{description:"",type:"number"},B02_Setting:{description:"",type:"number"},B02_Actual:{description:"",type:"number"},B03_Setting:{description:"",type:"number"},B03_Actual:{description:"",type:"number"},B04_Setting:{description:"",type:"number"},B04_Actual:{description:"",type:"number"},B05_Setting:{description:"",type:"number"},B05_Actual:{description:"",type:"number"},B06_Setting:{description:"",type:"number"},B06_Actual:{description:"",type:"number"},B07_Setting:{description:"",type:"number"},B07_Actual:{description:"",type:"number"},B08_Setting:{description:"",type:"number"},B08_Actual:{description:"",type:"number"},Speed:{description:"",type:"number"},Mooney:{description:"",type:"number"},PO:{description:"",type:"number"},HNS:{description:"",type:"number"},Acid:{description:"",type:"number"},SBR:{description:"",type:"number"},Remarks:{description:"",type:"string"},CreatedAt:{type:"any",default:Date.now()},CreatedBy:{type:"string",default:""},LastUpdatedAt:{type:"any",default:Date.now()},LastUpdatedBy:{type:"string",default:""}}}),$O=a(24),ek={validateFields:function(e){return $O.validate(e,XO,{cast:!0})},get:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="apronDryer/"+e,a.abrupt("return",We(t).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},getFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("apronDryer-filter/").concat(e),a.abrupt("return",We(t).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},getOne:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("apronDryer/").concat(e),a.abrupt("return",We(t).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},update:function(e,t){return Qe("apronDryer/"+e,t).then((function(e){return console.log(e),200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Updated",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="apronDryer/"+e,n.abrupt("return",He(a,t).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Added",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,formValid:!0,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("apronDryer/"+e).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))}},tk={Factory:"",Datetime:new Date,Shift:"",MachineList:"",Supervisor:"",B01_Setting:0,B01_Actual:0,B02_Setting:0,B02_Actual:0,B03_Setting:0,B03_Actual:0,B04_Setting:0,B04_Actual:0,B05_Setting:0,B05_Actual:0,B06_Setting:0,B06_Actual:0,B07_Setting:0,B07_Actual:0,B08_Setting:0,B08_Actual:0,Speed:0,Mooney:0,PO:0,HNS:0,Acid:0,SBR:0,Remarks:""},ak=(a(1003),a(23)),nk=(Object(n.forwardRef)((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),{Factory:{valid:!0,message:""},Datetime:{valid:!0,message:""},Shift:{valid:!0,message:""},MachineList:{valid:!0,message:""},Supervisor:{valid:!0,message:""},B01_Setting:{valid:!0,message:""},B01_Actual:{valid:!0,message:""},B02_Setting:{valid:!0,message:""},B02_Actual:{valid:!0,message:""},B03_Setting:{valid:!0,message:""},B03_Actual:{valid:!0,message:""},B04_Setting:{valid:!0,message:""},B04_Actual:{valid:!0,message:""},B05_Setting:{valid:!0,message:""},B05_Actual:{valid:!0,message:""},B06_Setting:{valid:!0,message:""},B06_Actual:{valid:!0,message:""},B07_Setting:{valid:!0,message:""},B07_Actual:{valid:!0,message:""},B08_Setting:{valid:!0,message:""},B08_Actual:{valid:!0,message:""},Speed:{valid:!0,message:""},Mooney:{valid:!0,message:""},PO:{valid:!0,message:""},HNS:{valid:!0,message:""},Acid:{valid:!0,message:""},SBR:{valid:!0,message:""},Remarks:{valid:!0,message:""}}),rk=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).closeForm=function(){a.setState({formControl:ak(nk)},(function(){return a.props.closeForm()}))},a.snackOpen=function(e,t,n){var r;return l.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(void 0===e||null===e||void 0===t||null===t){o.next=11;break}if(void 0!==n){o.next=7;break}return o.next=4,l.a.awrap(ka(e,t));case 4:r=o.sent,o.next=8;break;case 7:r=n;case 8:a.setState({snackOpen:!a.state.snackOpen,snackMessage:r,snackClass:e}),o.next=12;break;case 11:a.setState({snackOpen:!1});case 12:case"end":return o.stop()}}))},a.onSave=function(){var e=Object(me.a)({},a.state.formData),t=Object(me.a)({},a.state.formControl),n=ek.validateFields(e);n.valid?"Add"===a.props.formAction?ek.add("",e).then((function(e){!0===e.code?a.props.onSuccess(e.data):null!==e.errors&&Array.isArray(e.errors)?(e.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t})):a.snackOpen("error","server")})):ek.update("",e).then((function(e){!0===e.code?a.props.onSuccess(e.data):null!==e.errors&&Array.isArray(e.errors)?(e.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t})):a.snackOpen("error","server")})):(n.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t}),a.snackOpen("error","alertValidation"))},a.state={formData:a.props.formData,formOpen:a.props.formOpen,formControl:ak(nk),disabled:!1,snackOpen:!1,snackMessage:"",snackClass:""},a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"handleChange",value:function(e,t,a){var n=Object(me.a)({},this.state.formData),r=Object(me.a)({},this.state.formControl);!a&&"Factory"!==t||void 0!==e&&""!==e?(r[t].valid=!0,r[t].message=""):(r[t].valid=!1,r[t].message="MachineList"===t?"Machine Detector cannot be empty.":"".concat(t," cannot be empty.")),n[t]=e,this.setState({formData:n})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(Ae.a,{fullScreen:!0,open:this.state.formOpen,onClose:this.closeForm,TransitionComponent:this.Transition},r.a.createElement(w.a,{className:"appBar"},r.a.createElement(F.a,null,r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:this.closeForm,"aria-label":"close"},r.a.createElement(Vt.a,null)),r.a.createElement(x.a,{variant:"h6",className:"app-title"},"Apron Dryer"),r.a.createElement(he.a,{color:"inherit",disabled:this.state.disabled,onClick:this.onSave},"save"))),r.a.createElement(_e.a,null,r.a.createElement("div",{className:"form-container"},r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-evenly",alignItems:"center",md:6,xs:12,sm:12,xl:8,lg:8},r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Hr,{selectedValue:this.state.formData.Factory,propertyName:"Factory",handleChange:this.handleChange,formControl:this.state.formControl.Factory})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Ac.a,{required:!0,format:"dd-MMM-yyyy hh:mm",label:"Datetime",value:this.state.formData.Datetime,onChange:function(t){e.handleChange(t,"Datetime")}})),r.a.createElement(Sa.a,{error:!this.state.formControl.Datetime.valid,style:{display:this.state.formControl.Datetime.valid?"none":""}},this.state.formControl.Datetime.message)),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ns,{handleChange:this.handleChange,selectedValue:this.state.formData.Shift,formControl:this.state.formControl.Shift,propertyName:"Shift",factoryId:void 0===this.state.formData.Factory._id?this.state.formData.Factory:this.state.formData.Factory._id})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(wb,{selectedFactory:void 0===this.state.formData.Factory?"":this.state.formData.Factory._id,selectedValue:this.state.formData.MachineList,formControl:this.state.formControl.MachineList,propertyName:"MachineList",required:!0,handleChange:function(t){e.handleChange(t,"MachineList",!0)},machineType:"Dryer",abvrs:"DA"})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"Supervisor",label:"Supervisor",defaultValue:this.state.formData.Supervisor,onChange:function(t){return e.handleChange(t.target.value,"Supervisor",!0)},margin:"dense",error:!this.state.formControl.Supervisor.valid,helperText:this.state.formControl.Supervisor.message})),r.a.createElement(bn,{label:"Dryer Parameter",style:{width:"100%"}},r.a.createElement(be.a,{container:!0,direction:"row",justify:"space-around",alignItems:"flex-start",spacing:1},r.a.createElement(be.a,{item:!0,xs:6},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"B01 Setting \u2103",defaultValue:this.state.formData.B01_Setting,thousandSeparator:!0,decimalScale:2,fixedDecimalScale:!0,onValueChange:function(t){e.handleChange(void 0===t.floatValue?0:t.floatValue,"B01_Setting",!0)},onFocus:function(e){e.target.select()}}))),r.a.createElement(be.a,{item:!0,xs:6},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"B01 Actual \u2103",defaultValue:this.state.formData.B01_Actual,thousandSeparator:!0,decimalScale:2,fixedDecimalScale:!0,onValueChange:function(t){e.handleChange(void 0===t.floatValue?0:t.floatValue,"B01_Actual",!0)},onFocus:function(e){e.target.select()}}))),r.a.createElement(be.a,{item:!0,xs:6},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"B02 Setting \u2103",defaultValue:this.state.formData.B02_Setting,thousandSeparator:!0,decimalScale:2,fixedDecimalScale:!0,onValueChange:function(t){e.handleChange(void 0===t.floatValue?0:t.floatValue,"B022_Setting",!0)},onFocus:function(e){e.target.select()}}))),r.a.createElement(be.a,{item:!0,xs:6},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"B02 Actual \u2103",defaultValue:this.state.formData.B02_Actual,thousandSeparator:!0,decimalScale:2,fixedDecimalScale:!0,onValueChange:function(t){e.handleChange(void 0===t.floatValue?0:t.floatValue,"B02_Actual",!0)},onFocus:function(e){e.target.select()}}))),r.a.createElement(be.a,{item:!0,xs:6},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"B03 Setting \u2103",defaultValue:this.state.formData.B03_Setting,thousandSeparator:!0,decimalScale:2,fixedDecimalScale:!0,onValueChange:function(t){e.handleChange(void 0===t.floatValue?0:t.floatValue,"B03_Setting",!0)},onFocus:function(e){e.target.select()}}))),r.a.createElement(be.a,{item:!0,xs:6},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"B03 Actual \u2103",defaultValue:this.state.formData.B03_Actual,thousandSeparator:!0,decimalScale:2,fixedDecimalScale:!0,onValueChange:function(t){e.handleChange(void 0===t.floatValue?0:t.floatValue,"B03_Actual",!0)},onFocus:function(e){e.target.select()}}))),r.a.createElement(be.a,{item:!0,xs:6},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"B04 Setting \u2103",defaultValue:this.state.formData.B04_Setting,thousandSeparator:!0,decimalScale:2,fixedDecimalScale:!0,onValueChange:function(t){e.handleChange(void 0===t.floatValue?0:t.floatValue,"B04_Setting",!0)},onFocus:function(e){e.target.select()}}))),r.a.createElement(be.a,{item:!0,xs:6},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"B04 Actual \u2103",defaultValue:this.state.formData.B04_Actual,thousandSeparator:!0,decimalScale:2,fixedDecimalScale:!0,onValueChange:function(t){e.handleChange(void 0===t.floatValue?0:t.floatValue,"B04_Actual",!0)},onFocus:function(e){e.target.select()}}))),r.a.createElement(be.a,{item:!0,xs:6},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"B05 Setting \u2103",defaultValue:this.state.formData.B05_Setting,thousandSeparator:!0,decimalScale:2,fixedDecimalScale:!0,onValueChange:function(t){e.handleChange(void 0===t.floatValue?0:t.floatValue,"B05_Setting",!0)},onFocus:function(e){e.target.select()}}))),r.a.createElement(be.a,{item:!0,xs:6},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"B05 Actual \u2103",defaultValue:this.state.formData.B05_Actual,thousandSeparator:!0,decimalScale:2,fixedDecimalScale:!0,onValueChange:function(t){e.handleChange(void 0===t.floatValue?0:t.floatValue,"B05_Actual",!0)},onFocus:function(e){e.target.select()}}))),r.a.createElement(be.a,{item:!0,xs:6},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"B06 Setting \u2103",defaultValue:this.state.formData.B06_Setting,thousandSeparator:!0,decimalScale:2,fixedDecimalScale:!0,onValueChange:function(t){e.handleChange(void 0===t.floatValue?0:t.floatValue,"B06_Setting",!0)},onFocus:function(e){e.target.select()}}))),r.a.createElement(be.a,{item:!0,xs:6},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"B06 Actual \u2103",defaultValue:this.state.formData.B06_Actual,thousandSeparator:!0,decimalScale:2,fixedDecimalScale:!0,onValueChange:function(t){e.handleChange(void 0===t.floatValue?0:t.floatValue,"B06_Actual",!0)},onFocus:function(e){e.target.select()}}))),r.a.createElement(be.a,{item:!0,xs:6},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"B07 Setting \u2103",defaultValue:this.state.formData.B07_Setting,thousandSeparator:!0,decimalScale:2,fixedDecimalScale:!0,onValueChange:function(t){e.handleChange(void 0===t.floatValue?0:t.floatValue,"B07_Setting",!0)},onFocus:function(e){e.target.select()}}))),r.a.createElement(be.a,{item:!0,xs:6},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"B07 Actual \u2103",defaultValue:this.state.formData.B07_Actual,thousandSeparator:!0,decimalScale:2,fixedDecimalScale:!0,onValueChange:function(t){e.handleChange(void 0===t.floatValue?0:t.floatValue,"B07_Actual",!0)},onFocus:function(e){e.target.select()}}))),r.a.createElement(be.a,{item:!0,xs:6},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"B08 Setting \u2103",defaultValue:this.state.formData.B08_Setting,thousandSeparator:!0,decimalScale:2,fixedDecimalScale:!0,onValueChange:function(t){e.handleChange(void 0===t.floatValue?0:t.floatValue,"B08_Setting",!0)},onFocus:function(e){e.target.select()}}))),r.a.createElement(be.a,{item:!0,xs:6},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"B08 Actual \u2103",defaultValue:this.state.formData.B08_Actual,thousandSeparator:!0,decimalScale:2,fixedDecimalScale:!0,onValueChange:function(t){e.handleChange(void 0===t.floatValue?0:t.floatValue,"B08_Actual",!0)},onFocus:function(e){e.target.select()}}))),r.a.createElement(be.a,{item:!0,xs:6},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Speed",defaultValue:this.state.formData.Speed,thousandSeparator:!0,decimalScale:2,fixedDecimalScale:!0,onValueChange:function(t){e.handleChange(void 0===t.floatValue?0:t.floatValue,"Speed",!0)},onFocus:function(e){e.target.select()}}))),r.a.createElement(be.a,{item:!0,xs:6}),r.a.createElement(be.a,{item:!0,xs:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"Remarks",label:"Remarks",multiline:!0,rows:"4",defaultValue:this.state.formData.Remarks,className:"",onChange:function(t){return e.handleChange(t.target.value,"Remarks",!1)},margin:"dense"}))))),r.a.createElement(bn,{label:"Product Parameter",style:{width:"100%"}},r.a.createElement(be.a,{container:!0,direction:"row",justify:"space-around",alignItems:"flex-start",spacing:1},r.a.createElement(be.a,{item:!0,xs:6},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Mooney",defaultValue:this.state.formData.Mooney,thousandSeparator:!0,decimalScale:2,fixedDecimalScale:!0,onValueChange:function(t){e.handleChange(void 0===t.floatValue?0:t.floatValue,"Mooney",!0)},onFocus:function(e){e.target.select()}}))),r.a.createElement(be.a,{item:!0,xs:6},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"PO",defaultValue:this.state.formData.PO,thousandSeparator:!0,decimalScale:2,fixedDecimalScale:!0,onValueChange:function(t){e.handleChange(void 0===t.floatValue?0:t.floatValue,"PO",!0)},onFocus:function(e){e.target.select()}}))))),r.a.createElement(bn,{label:"Product Parameter",style:{width:"100%"}},r.a.createElement(be.a,{container:!0,direction:"row",justify:"space-around",alignItems:"flex-start",spacing:1},r.a.createElement(be.a,{item:!0,xs:6},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"HNS (Liter)",defaultValue:this.state.formData.HNS,thousandSeparator:!0,decimalScale:2,fixedDecimalScale:!0,onValueChange:function(t){e.handleChange(void 0===t.floatValue?0:t.floatValue,"HNS",!0)},onFocus:function(e){e.target.select()}}))),r.a.createElement(be.a,{item:!0,xs:6},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"S. Acid (Liter)",defaultValue:this.state.formData.Acid,thousandSeparator:!0,decimalScale:2,fixedDecimalScale:!0,onValueChange:function(t){e.handleChange(void 0===t.floatValue?0:t.floatValue,"Acid",!0)},onFocus:function(e){e.target.select()}}))),r.a.createElement(be.a,{item:!0,xs:6},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"SBR (kg)",defaultValue:this.state.formData.SBR,thousandSeparator:!0,decimalScale:2,fixedDecimalScale:!0,onValueChange:function(t){e.handleChange(void 0===t.floatValue?0:t.floatValue,"SBR",!0)},onFocus:function(e){e.target.select()}}))),r.a.createElement(be.a,{item:!0,xs:6})))))))),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.snackClass,autoHideDuration:600,open:this.state.snackOpen,onClose:this.snackOpen,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.snackMessage)}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return{formOpen:e.formOpen}}}]),t}(r.a.Component),ok=a(23),sk=(Object(n.forwardRef)((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),r.a.forwardRef((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).snackOpen=function(e,t){var n;return l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0===e||null===e||void 0===t||null===t){r.next=7;break}return r.next=3,l.a.awrap(ka(e,t));case 3:n=r.sent,a.setState({snackOpen:!a.state.snackOpen,alertMessage:n,alertClass:e}),r.next=8;break;case 7:a.setState({snackOpen:!1});case 8:case"end":return r.stop()}}))},a.dialogOpen=function(e){var t;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,l.a.awrap(ka("confirmation","delete"));case 2:t=n.sent,a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:e,dialogMessage:r.a.createElement("span",null,void 0!==t?t.replace("[Name]",e.Factory.FctyName):"")});case 4:case"end":return n.stop()}}))},a.diaLogClose=function(){a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:null})},a.onDelete=function(){var e=Object(je.a)(a.state.data),t=e.indexOf(a.state.currentDeleteData);void 0!==a.state.currentDeleteData&&null!==a.state.currentDeleteData&&ek.delete(a.state.currentDeleteData._id).then((function(n){!0===n.code?(e.splice(t,1),a.setState({data:e,dialogOpen:!1},(function(){return a.snackOpen("success","delete")}))):a.setState({dialogOpen:!1},(function(){return a.snackOpen("error","server")}))}))},a.state={columns:[{title:"Factory",field:"Factory",render:function(e){return r.a.createElement("span",null,e.Factory.FctyName)}},{title:"Date",field:"Datetime",render:function(e){return r.a.createElement("span",null,void 0===e?"":new Date(e.Datetime).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric"}))}},{title:"Time",field:"Datetime",render:function(e){return r.a.createElement("span",null,void 0===e?"":new Date(e.Datetime).toLocaleString("en-GB",{hour:"numeric",minute:"numeric"}))}},{title:"Shift",field:"Shift",render:function(e){return r.a.createElement("span",null,e.Shift.Name)}},{title:"Dryer #",field:"MachineList",render:function(e){return r.a.createElement("span",null,e.MachineList.MachLstCode)}},{title:"Supervisor",field:"Supervisor"},{title:"B 01 Setting",field:"B01_Setting",render:function(e){return r.a.createElement(Xa.a,{value:e.B01_Setting,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"B 01 Actual",field:"B01_Actual",render:function(e){return r.a.createElement(Xa.a,{value:e.B01_Actual,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"B 02 Setting",field:"B02_Setting",render:function(e){return r.a.createElement(Xa.a,{value:e.B02_Setting,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"B 02 Actual",field:"B02_Actual",render:function(e){return r.a.createElement(Xa.a,{value:e.B02_Actual,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"B 03 Setting",field:"B03_Setting",render:function(e){return r.a.createElement(Xa.a,{value:e.B03_Setting,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"B 03 Actual",field:"B03_Actual",render:function(e){return r.a.createElement(Xa.a,{value:e.B03_Actual,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"B 04 Setting",field:"B04_Setting",render:function(e){return r.a.createElement(Xa.a,{value:e.B04_Setting,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"B 04 Actual",field:"B04_Actual",render:function(e){return r.a.createElement(Xa.a,{value:e.B04_Actual,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"B 05 Setting",field:"B05_Setting",render:function(e){return r.a.createElement(Xa.a,{value:e.B05_Setting,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"B 05 Actual",field:"B05_Actual",render:function(e){return r.a.createElement(Xa.a,{value:e.B05_Actual,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"B 06 Setting",field:"B06_Setting",render:function(e){return r.a.createElement(Xa.a,{value:e.B06_Setting,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"B 06 Actual",field:"B06_Actual",render:function(e){return r.a.createElement(Xa.a,{value:e.B06_Actual,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"B 07 Setting",field:"B07_Setting",render:function(e){return r.a.createElement(Xa.a,{value:e.B07_Setting,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"B 07 Actual",field:"B07_Actual",render:function(e){return r.a.createElement(Xa.a,{value:e.B07_Actual,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"B 08 Setting",field:"B08_Setting",render:function(e){return r.a.createElement(Xa.a,{value:e.B08_Setting,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"B 08 Actual",field:"B08_Actual",render:function(e){return r.a.createElement(Xa.a,{value:e.B08_Actual,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"Speed",field:"Speed",render:function(e){return r.a.createElement(Xa.a,{value:e.Speed,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"Remark",field:"Remarks"},{title:"Mooney",field:"Mooney",render:function(e){return r.a.createElement(Xa.a,{value:e.Mooney,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"PO",field:"PO",render:function(e){return r.a.createElement(Xa.a,{value:e.PO,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"HNS",field:"HNS",render:function(e){return r.a.createElement(Xa.a,{value:e.HNS,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"S. Acid",field:"Acid",render:function(e){return r.a.createElement(Xa.a,{value:e.Acid,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"SBR",field:"SBR",render:function(e){return r.a.createElement(Xa.a,{value:e.SBR,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"Operator",field:"LastUpdatedBy"},{title:"Last Updated",field:"LastUpdatedAt",render:function(e){return r.a.createElement("span",null,void 0===e?"":new Date(e.LastUpdatedAt).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}))},editable:"never"}],data:[],formData:null,currentDeleteData:null,formOpen:!1,formAction:"",snackOpen:!1,dialogOpen:!1,alertMessage:"",dialogMessage:"",alertClass:""},a.ApronDryerModel=ok(tk),a.openForm=a.openForm.bind(Object(Pe.a)(a)),a.closeForm=a.closeForm.bind(Object(Pe.a)(a)),a.onSuccess=a.onSuccess.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initApronDryer()}},{key:"openForm",value:function(e){var t=e,a=this.state.formAction;void 0===t||null===t?(t=this.ApronDryerModel,a="Add"):a="update",this.setState({formData:t,formOpen:!this.state.formOpen,formAction:a})}},{key:"closeForm",value:function(){this.setState({formData:null,formOpen:!1,formAction:""})}},{key:"initApronDryer",value:function(){var e=this;ek.get("").then((function(t){!0===t.code?e.setState({data:t.data}):e.snackOpen("error","server")}))}},{key:"onSuccess",value:function(e){var t=this,a=Object(je.a)(this.state.data);if(void 0!==e&&null!==e)if("Add"===this.state.formAction)a.push(e),this.setState({data:a,formOpen:!this.state.formOpen,formAction:"",formData:null},(function(){return t.snackOpen("success","add")}));else{var n=a.indexOf(this.state.formData);a[n]=e,this.setState({data:a,formOpen:!this.state.formOpen,formAction:"",formData:null},(function(){return t.snackOpen("success","update")}))}else this.snackOpen("error","server")}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{container:!0,direction:"column",justify:"center",wrap:"wrap",style:{margin:"20px 20px 10px 0px"}},r.a.createElement(be.a,{item:!0,xs:12},r.a.createElement(Ve.a,{title:"Apron Dryer",columns:this.state.columns,data:this.state.data,components:{Toolbar:function(t){return r.a.createElement("div",null,r.a.createElement(Le.MTableToolbar,t),r.a.createElement("div",{style:{padding:"0px 15px"}},r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:function(){return e.openForm(t.rowData)},"aria-label":"add"},r.a.createElement(wt.a,null))))}},actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.data,columns:e.state.columns,fileName:"Apron Dryer"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.initApronDryer()}},{icon:"edit",tooltip:"Edit User",onClick:function(t,a){return e.openForm(a)}},{icon:"delete",tooltip:"Delete User",onClick:function(t,a){return e.dialogOpen(a)}}],options:{}})),r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-evenly",alignItems:"center",md:10,xs:12,sm:12,xl:10,lg:10},this.state.formOpen?r.a.createElement(rk,{formData:this.state.formData,formAction:this.state.formAction,formOpen:this.state.formOpen,onSuccess:this.onSuccess,closeForm:this.closeForm}):""),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:600,open:this.state.snackOpen,onClose:this.snackOpen,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.diaLogClose,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.diaLogClose,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDelete,color:"primary"},"Delete"))))}}]),t}(r.a.Component)),ik=(a(1004),{properties:{Factory:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Factory cannot be empty.",conform:"Factory cannot be empty.",required:"Factory cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},Datetime:{description:"",type:"any",required:!0,allowEmpty:!1,messages:{allowEmpty:"Datetime cannot be empty.",conform:"Datetime cannot be empty.",required:"Datetime cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},Shift:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Shift cannot be empty.",conform:"Shift cannot be empty.",required:"Shift cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},MachineList:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Metal Detector cannot be empty.",conform:"Metal Detector cannot be empty.",required:"Metal Detector cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},CreatedAt:{type:"any",default:Date.now()},CreatedBy:{type:"string",default:""},LastUpdatedAt:{type:"any",default:Date.now()},LastUpdatedBy:{type:"string",default:""}}}),lk=a(24),ck={validateFields:function(e){return lk.validate(e,ik,{cast:!0})},get:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="ncMetal/"+e,a.abrupt("return",We(t).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},getFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("ncMetal-filter/").concat(e),a.abrupt("return",We(t).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},getOne:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("ncMetal/").concat(e),a.abrupt("return",We(t).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},update:function(e,t){return Qe("ncMetal/"+e,t).then((function(e){return console.log(e),200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Updated",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="ncMetal/"+e,n.abrupt("return",He(a,t).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Added",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,formValid:!0,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("ncMetal/"+e).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))}},uk={Factory:"",Datetime:new Date,Shift:"",MachineList:""},dk=(a(1005),a(23)),mk=(Object(n.forwardRef)((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),{Factory:{valid:!0,message:""},Datetime:{valid:!0,message:""},Shift:{valid:!0,message:""},MachineList:{valid:!0,message:""}}),pk=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).closeForm=function(){a.setState({formControl:dk(mk)},(function(){return a.props.closeForm()}))},a.snackOpen=function(e,t,n){var r;return l.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(void 0===e||null===e||void 0===t||null===t){o.next=11;break}if(void 0!==n){o.next=7;break}return o.next=4,l.a.awrap(ka(e,t));case 4:r=o.sent,o.next=8;break;case 7:r=n;case 8:a.setState({snackOpen:!a.state.snackOpen,snackMessage:r,snackClass:e}),o.next=12;break;case 11:a.setState({snackOpen:!1});case 12:case"end":return o.stop()}}))},a.onSave=function(){var e=Object(me.a)({},a.state.formData),t=Object(me.a)({},a.state.formControl),n=ck.validateFields(e);n.valid?"Add"===a.props.formAction?ck.add("",e).then((function(e){!0===e.code?a.props.onSuccess(e.data):null!==e.errors&&Array.isArray(e.errors)?(e.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t})):a.snackOpen("error","server")})):ck.update("",e).then((function(e){!0===e.code?a.props.onSuccess(e.data):null!==e.errors&&Array.isArray(e.errors)?(e.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t})):a.snackOpen("error","server")})):(n.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t}),a.snackOpen("error","alertValidation"))},a.state={formData:a.props.formData,formOpen:a.props.formOpen,formControl:dk(mk),disabled:!1,snackOpen:!1,snackMessage:"",snackClass:""},a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"handleChange",value:function(e,t,a){var n=Object(me.a)({},this.state.formData),r=Object(me.a)({},this.state.formControl);!a&&"Factory"!==t||void 0!==e&&""!==e?(r[t].valid=!0,r[t].message=""):(r[t].valid=!1,r[t].message="".concat(t," cannot be empty.")),n[t]=e,this.setState({formData:n})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(Ae.a,{fullScreen:!0,open:this.state.formOpen,onClose:this.closeForm,TransitionComponent:this.Transition},r.a.createElement(w.a,{className:"appBar"},r.a.createElement(F.a,null,r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:this.closeForm,"aria-label":"close"},r.a.createElement(Vt.a,null)),r.a.createElement(x.a,{variant:"h6",className:"app-title"},"NC - Metal"),r.a.createElement(he.a,{color:"inherit",disabled:this.state.disabled,onClick:this.onSave},"save"))),r.a.createElement(_e.a,null,r.a.createElement("div",{className:"form-container"},r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-evenly",alignItems:"center",md:6,xs:12,sm:12,xl:8,lg:8},r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Hr,{selectedValue:this.state.formData.Factory,propertyName:"Factory",handleChange:this.handleChange,formControl:this.state.formControl.Factory})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Ac.a,{required:!0,format:"dd-MMM-yyyy hh:mm",label:"Datetime",value:this.state.formData.Datetime,onChange:function(t){e.handleChange(t,"Datetime")}})),r.a.createElement(Sa.a,{error:!this.state.formControl.Datetime.valid,style:{display:this.state.formControl.Datetime.valid?"none":""}},this.state.formControl.Datetime.message)),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ns,{handleChange:this.handleChange,selectedValue:this.state.formData.Shift,formControl:this.state.formControl.Shift,propertyName:"Shift",factoryId:void 0===this.state.formData.Factory._id?this.state.formData.Factory:this.state.formData.Factory._id})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(wb,{selectedFactory:void 0===this.state.formData.Factory?"":this.state.formData.Factory._id,selectedValue:this.state.formData.MachineList,formControl:this.state.formControl.MachineList,propertyName:"MachineList",required:!0,handleChange:function(t){e.handleChange(t,"MachineList",!0)},machineType:"Metal Detector",abvrs:"ID"}))))))),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.snackClass,autoHideDuration:600,open:this.state.snackOpen,onClose:this.snackOpen,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.snackMessage)}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return{formOpen:e.formOpen}}}]),t}(r.a.Component),fk=a(23),hk=(Object(n.forwardRef)((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),r.a.forwardRef((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).snackOpen=function(e,t){var n;return l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0===e||null===e||void 0===t||null===t){r.next=7;break}return r.next=3,l.a.awrap(ka(e,t));case 3:n=r.sent,a.setState({snackOpen:!a.state.snackOpen,alertMessage:n,alertClass:e}),r.next=8;break;case 7:a.setState({snackOpen:!1});case 8:case"end":return r.stop()}}))},a.dialogOpen=function(e){var t;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,l.a.awrap(ka("confirmation","delete"));case 2:t=n.sent,a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:e,dialogMessage:r.a.createElement("span",null,void 0!==t?t.replace("[Name]",e.Factory.FctyName):"")});case 4:case"end":return n.stop()}}))},a.diaLogClose=function(){a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:null})},a.onDelete=function(){var e=Object(je.a)(a.state.data),t=e.indexOf(a.state.currentDeleteData);void 0!==a.state.currentDeleteData&&null!==a.state.currentDeleteData&&ck.delete(a.state.currentDeleteData._id).then((function(n){!0===n.code?(e.splice(t,1),a.setState({data:e,dialogOpen:!1},(function(){return a.snackOpen("success","delete")}))):a.setState({dialogOpen:!1},(function(){return a.snackOpen("error","server")}))}))},a.state={columns:[{title:"Factory",field:"Factory",render:function(e){return r.a.createElement("span",null,e.Factory.FctyName)}},{title:"Date",field:"Datetime",render:function(e){return r.a.createElement("span",null,void 0===e?"":new Date(e.Datetime).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric"}))}},{title:"Time",field:"Datetime",render:function(e){return r.a.createElement("span",null,void 0===e?"":new Date(e.Datetime).toLocaleString("en-GB",{hour:"numeric",minute:"numeric"}))}},{title:"Shift",field:"Shift",render:function(e){return r.a.createElement("span",null,e.Shift.Name)}},{title:"Metal Detector #",field:"MachineList",render:function(e){return r.a.createElement("span",null,e.MachineList.MachLstCode)}},{title:"Operator",field:"LastUpdatedBy"},{title:"Last Updated",field:"LastUpdatedAt",render:function(e){return r.a.createElement("span",null,void 0===e?"":new Date(e.LastUpdatedAt).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}))},editable:"never"}],data:[],formData:null,currentDeleteData:null,formOpen:!1,formAction:"",snackOpen:!1,dialogOpen:!1,alertMessage:"",dialogMessage:"",alertClass:""},a.NCMetalModel=fk(uk),a.openForm=a.openForm.bind(Object(Pe.a)(a)),a.closeForm=a.closeForm.bind(Object(Pe.a)(a)),a.onSuccess=a.onSuccess.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initNCMetal()}},{key:"openForm",value:function(e){var t=e,a=this.state.formAction;void 0===t||null===t?(t=this.NCMetalModel,a="Add"):a="update",this.setState({formData:t,formOpen:!this.state.formOpen,formAction:a})}},{key:"closeForm",value:function(){this.setState({formData:null,formOpen:!1,formAction:""})}},{key:"initNCMetal",value:function(){var e=this;ck.get("").then((function(t){!0===t.code?e.setState({data:t.data}):e.snackOpen("error","server")}))}},{key:"onSuccess",value:function(e){var t=this,a=Object(je.a)(this.state.data);if(void 0!==e&&null!==e)if("Add"===this.state.formAction)a.push(e),this.setState({data:a,formOpen:!this.state.formOpen,formAction:"",formData:null},(function(){return t.snackOpen("success","add")}));else{var n=a.indexOf(this.state.formData);a[n]=e,this.setState({data:a,formOpen:!this.state.formOpen,formAction:"",formData:null},(function(){return t.snackOpen("success","update")}))}else this.snackOpen("error","server")}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{container:!0,direction:"column",justify:"center",wrap:"wrap",style:{margin:"20px 20px 10px 0px"}},r.a.createElement(be.a,{item:!0,xs:12},r.a.createElement(Ve.a,{title:"NC - Metal",columns:this.state.columns,data:this.state.data,components:{Toolbar:function(t){return r.a.createElement("div",null,r.a.createElement(Le.MTableToolbar,t),r.a.createElement("div",{style:{padding:"0px 15px"}},r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:function(){return e.openForm(t.rowData)},"aria-label":"add"},r.a.createElement(wt.a,null))))}},actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.data,columns:e.state.columns,fileName:"NC - Metal"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.initNCMetal()}},{icon:"edit",tooltip:"Edit User",onClick:function(t,a){return e.openForm(a)}},{icon:"delete",tooltip:"Delete User",onClick:function(t,a){return e.dialogOpen(a)}}],options:{}})),r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-evenly",alignItems:"center",md:10,xs:12,sm:12,xl:10,lg:10},this.state.formOpen?r.a.createElement(pk,{formData:this.state.formData,formAction:this.state.formAction,formOpen:this.state.formOpen,onSuccess:this.onSuccess,closeForm:this.closeForm}):""),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:600,open:this.state.snackOpen,onClose:this.snackOpen,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.diaLogClose,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.diaLogClose,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDelete,color:"primary"},"Delete"))))}}]),t}(r.a.Component)),gk=(a(1006),{add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="trolleyFillingUpload/"+e,n.abrupt("return",He(a,t).then((function(e){return 200===e.status&&"Succeed"===e.data.message&&0===e.data.failedData.length?{code:!0,formValid:!0,message:"Successfully Import",errors:null,data:e.data.data,failedData:e.data.failedData}:{code:!1,formValid:!0,message:e.data.message,failedData:e.data.failedData,errors:e.data.errors,data:null}})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))}}),yk=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).snackOpen=function(e,t){var n;return l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0===e||null===e||void 0===t||null===t){r.next=7;break}return r.next=3,l.a.awrap(ka(e,t));case 3:n=r.sent,a.setState({snackOpen:!a.state.snackOpen,alertMessage:n,alertClass:e}),r.next=8;break;case 7:a.setState({snackOpen:!1});case 8:case"end":return r.stop()}}))},a.onCancel=function(){a.setState({uploadExcelData:[],uploadExcelColumn:[],file:{}})},a.onImport=function(){if(Array.isArray(a.state.uploadExcelData)&&a.state.uploadExcelData.length>0){var e=Object(je.a)(a.state.uploadExcelData);e.forEach((function(e){return delete e.FailedReason})),gk.add("",{factory:a.state.selectedFactory,importData:e}).then((function(e){if(!0===e.code)a.setState({uploadExcelData:[],uploadExcelColumn:[],file:{}},(function(){return a.snackOpen("success","add")}));else if(void 0!==e.failedData&&Array.isArray(e.failedData)&&e.failedData.length>0){var t=a.state.uploadExcelColumn;0===t.filter((function(e){return"FailedReason"===e.Key})).length&&t.push({DisplayName:"FailedReason",Key:"FailedReason"}),a.setState({uploadExcelData:e.failedData,uploadExcelColumn:t},(function(){return console.log(a.state)}))}else a.snackOpen("error","server")}))}},a.state={selectedFactory:"",remarks:"",disabledUpload:!0,disabledImport:!0,uploadExcelColumn:[],uploadExcelData:[],file:{}},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"handleChange",value:function(e,t){"Factory"!==t||void 0!==e&&""!==e?"Factory"===t&&void 0!==e&&""!==e&&this.setState({selectedFactory:e,disabledUpload:!1,disabledImport:!1}):this.setState({selectedFactory:e,disabledUpload:!0,disabledImport:!0})}},{key:"onDownloadTemplate",value:function(){var e=this;Eo("TrolleyFilling.xlsx").then((function(t){!0===t.code?Co(t.data,"TrolleyFilling.xlsx"):e.snackOpen("error","server")}))}},{key:"postFile",value:function(e){var t=this,a=new FormData;a.append("file",e),this.setState({file:e}),Ke("Common/XlSToJson/",a).then((function(e){if(200===e.status&&null===e.data.errors){var a=[],n=[],r=e.data.data;if(Array.isArray(r)&&r.length>0){Object.keys(r[0]).map((function(e){var t=e.trim();if(""!==t&&-1===t.indexOf("_EMPTY")){var n={};n.DisplayName=t.replace("_"," "),n.Key=t,a.push(n)}}));var o=!0,s=!1,i=void 0;try{for(var l,c=function(){var e=l.value,t={};Object.keys(r[0]).map((function(a){var n=a.trim();""!==n&&-1===n.indexOf("_EMPTY")&&(-1===a.indexOf("Date")||Number.isNaN(e[a])?-1===a.indexOf("Time")||""===e[a]||Number.isNaN(e[a])?t[a]=e[a]:t[a]=new Date(0,0,0,0,0,86401*e[a]).toLocaleString("en-GB",{hour:"numeric",minute:"numeric"}):t[a]=new Date(0,0,e[a]).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric"}))})),n.push(t)},u=r[Symbol.iterator]();!(o=(l=u.next()).done);o=!0)c()}catch(d){s=!0,i=d}finally{try{o||null==u.return||u.return()}finally{if(s)throw i}}}t.setState({uploadExcelColumn:a,uploadExcelData:n})}}))}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",wrap:"wrap",spacing:3,style:{marginTop:3}},r.a.createElement(be.a,{item:!0,xs:12},r.a.createElement(x.a,{variant:"overline",display:"block",gutterBottom:!0},"Trolley Filling Upload")),r.a.createElement(be.a,{item:!0,xs:12,sm:12,md:8,lg:8},r.a.createElement(Hr,{selectedValue:this.state.selectedFactory,propertyName:"Factory",handleChange:function(t){return e.handleChange(t,"Factory")},required:!1})),r.a.createElement(be.a,{item:!0,xs:6,sm:6,md:2,lg:2},r.a.createElement(he.a,{variant:"outlined",color:"secondary",onClick:this.onDownloadTemplate},"Download Template")),r.a.createElement(be.a,{item:!0,xs:6,sm:6,md:2,lg:2}),r.a.createElement(be.a,{item:!0,xs:6,sm:6,md:2,lg:2},r.a.createElement("div",null,r.a.createElement("input",{accept:"pdf",className:"",id:"excelupload",color:"primary",type:"file",style:{display:"none"},onChange:function(t){e.postFile(t.target.files[0]),t.target.value=null},disabled:this.state.disabledUpload}),r.a.createElement("label",{htmlFor:"excelupload"},r.a.createElement(fo.a,{size:"small",color:"primary",component:"span","aria-label":"add",disabled:this.state.disabledUpload,className:""},r.a.createElement(wt.a,null))),r.a.createElement("label",null,this.state.file.name))),r.a.createElement(be.a,{item:!0,xs:12},r.a.createElement(bn,{label:"Uploaded Data",style:{maxWidth:"90%"}},r.a.createElement(Ls,{columns:this.state.uploadExcelColumn,row:this.state.uploadExcelData,order:"asc",orderBy:"Date",rowsPerPage:25}))),r.a.createElement(be.a,{item:!0,xs:4,md:1},r.a.createElement(he.a,{htmlFor:"upload_excel",variant:"contained",color:"primary",disabled:this.state.disabledImport,onClick:this.onImport},"Import")),r.a.createElement(be.a,{item:!0,xs:4,md:1},r.a.createElement(he.a,{variant:"contained",color:"secondary",onClick:this.onCancel},"Cancel")),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:600,open:this.state.snackOpen,onClose:this.snackOpen,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}))}}]),t}(r.a.Component),vk=(a(1007),{add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="trolleyCleaningUpload/"+e,n.abrupt("return",He(a,t).then((function(e){return 200===e.status&&"Succeed"===e.data.message&&0===e.data.failedData.length?{code:!0,formValid:!0,message:"Successfully Import",errors:null,data:e.data.data,failedData:e.data.failedData}:{code:!1,formValid:!0,message:e.data.message,failedData:e.data.failedData,errors:e.data.errors,data:null}})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))}}),Ck=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).snackOpen=function(e,t){var n;return l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0===e||null===e||void 0===t||null===t){r.next=7;break}return r.next=3,l.a.awrap(ka(e,t));case 3:n=r.sent,a.setState({snackOpen:!a.state.snackOpen,alertMessage:n,alertClass:e}),r.next=8;break;case 7:a.setState({snackOpen:!1});case 8:case"end":return r.stop()}}))},a.onCancel=function(){a.setState({uploadExcelData:[],uploadExcelColumn:[],file:{}})},a.onImport=function(){if(Array.isArray(a.state.uploadExcelData)&&a.state.uploadExcelData.length>0){var e=Object(je.a)(a.state.uploadExcelData);e.forEach((function(e){return delete e.FailedReason})),vk.add("",{factory:a.state.selectedFactory,importData:e}).then((function(e){if(!0===e.code)a.setState({uploadExcelData:[],uploadExcelColumn:[],file:{}},(function(){return a.snackOpen("success","add")}));else if(void 0!==e.failedData&&Array.isArray(e.failedData)&&e.failedData.length>0){var t=a.state.uploadExcelColumn;0===t.filter((function(e){return"FailedReason"===e.Key})).length&&t.push({DisplayName:"FailedReason",Key:"FailedReason"}),a.setState({uploadExcelData:e.failedData,uploadExcelColumn:t},(function(){return console.log(a.state)}))}else a.snackOpen("error","server")}))}},a.state={selectedFactory:"",remarks:"",disabledUpload:!0,disabledImport:!0,uploadExcelColumn:[],uploadExcelData:[],file:{}},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"handleChange",value:function(e,t){"Factory"!==t||void 0!==e&&""!==e?"Factory"===t&&void 0!==e&&""!==e&&this.setState({selectedFactory:e,disabledUpload:!1,disabledImport:!1}):this.setState({selectedFactory:e,disabledUpload:!0,disabledImport:!0})}},{key:"onDownloadTemplate",value:function(){var e=this;Eo("TrolleyWashing.xlsx").then((function(t){!0===t.code?Co(t.data,"TrolleyWashing.xlsx"):e.snackOpen("error","server")}))}},{key:"postFile",value:function(e){var t=this,a=new FormData;a.append("file",e),this.setState({file:e}),Ke("Common/XlSToJson/",a).then((function(e){if(200===e.status&&null===e.data.errors){var a=[],n=[],r=e.data.data;if(Array.isArray(r)&&r.length>0){Object.keys(r[0]).map((function(e){var t=e.trim();if(""!==t&&-1===t.indexOf("_EMPTY")){var n={};n.DisplayName=t.replace("_"," "),n.Key=t,a.push(n)}}));var o=!0,s=!1,i=void 0;try{for(var l,c=function(){var e=l.value,t={};Object.keys(r[0]).map((function(a){var n=a.trim();""!==n&&-1===n.indexOf("_EMPTY")&&(-1===a.indexOf("Date")||Number.isNaN(e[a])?t[a]=e[a]:t[a]=new Date(0,0,e[a]).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric"}))})),n.push(t)},u=r[Symbol.iterator]();!(o=(l=u.next()).done);o=!0)c()}catch(d){s=!0,i=d}finally{try{o||null==u.return||u.return()}finally{if(s)throw i}}}t.setState({uploadExcelColumn:a,uploadExcelData:n})}}))}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",wrap:"wrap",spacing:3,style:{marginTop:3}},r.a.createElement(be.a,{item:!0,xs:12},r.a.createElement(x.a,{variant:"overline",display:"block",gutterBottom:!0},"Trolley Washing Upload")),r.a.createElement(be.a,{item:!0,xs:12,sm:12,md:8,lg:8},r.a.createElement(Hr,{selectedValue:this.state.selectedFactory,propertyName:"Factory",handleChange:function(t){return e.handleChange(t,"Factory")},required:!1})),r.a.createElement(be.a,{item:!0,xs:6,sm:6,md:2,lg:2},r.a.createElement(he.a,{variant:"outlined",color:"secondary",onClick:this.onDownloadTemplate},"Download Template")),r.a.createElement(be.a,{item:!0,xs:6,sm:6,md:2,lg:2}),r.a.createElement(be.a,{item:!0,xs:6,sm:6,md:2,lg:2},r.a.createElement("div",null,r.a.createElement("input",{accept:"pdf",className:"",id:"excelupload",color:"primary",type:"file",style:{display:"none"},onChange:function(t){e.postFile(t.target.files[0]),t.target.value=null},disabled:this.state.disabledUpload}),r.a.createElement("label",{htmlFor:"excelupload"},r.a.createElement(fo.a,{size:"small",color:"primary",component:"span","aria-label":"add",disabled:this.state.disabledUpload,className:""},r.a.createElement(wt.a,null))),r.a.createElement("label",null,this.state.file.name))),r.a.createElement(be.a,{item:!0,xs:12},r.a.createElement(bn,{label:"Uploaded Data",style:{maxWidth:"90%"}},r.a.createElement(Ls,{columns:this.state.uploadExcelColumn,row:this.state.uploadExcelData,order:"asc",orderBy:"Date",rowsPerPage:25}))),r.a.createElement(be.a,{item:!0,xs:4,md:1},r.a.createElement(he.a,{htmlFor:"upload_excel",variant:"contained",color:"primary",disabled:this.state.disabledImport,onClick:this.onImport},"Import")),r.a.createElement(be.a,{item:!0,xs:4,md:1},r.a.createElement(he.a,{variant:"contained",color:"secondary",onClick:this.onCancel},"Cancel")),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:600,open:this.state.snackOpen,onClose:this.snackOpen,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}))}}]),t}(r.a.Component),Dk=(a(1008),{ShippingType:"Loosebale",Factory:"",StuffingDate:new Date(Date.now()),ShippingInstruction:"",Shipping:"",ContainerDetail:"",SealNo:0,TruckID:"",Driver:"",Supervisor:""}),Ek={properties:{ShippingType:{description:"",type:["object","string"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Shipping Type cannot be empty.",conform:"Shipping Type cannot be empty.",required:"Shipping Type cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},Factory:{description:"",type:["object","string"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Factory cannot be empty.",conform:"Factory cannot be empty.",required:"Factory cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},StuffingDate:{description:"",type:"any",required:!0,allowEmpty:!1,messages:{allowEmpty:"Date cannot be empty.",conform:"Date cannot be empty.",required:"Date cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},ShippingInstruction:{description:"",type:["object","string"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Shipping Instruction cannot be empty.",conform:"Shipping Instruction cannot be empty.",required:"Shipping Instruction cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},Shipping:{description:"",type:["object","string"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Sequence Number cannot be empty.",conform:"Sequence Number cannot be empty.",required:"Sequence Number cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},ContainerDetail:{description:"",type:["object","string"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Container cannot be empty.",conform:"Container cannot be empty.",required:"Container cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},TruckID:{description:"",type:"string"},Driver:{description:"",type:"string"},Supervisor:{description:"",type:"string"},ContainerImages:{description:"",type:"object"},OtherImages:{description:"",type:"array"},CreatedAt:{type:"any",default:Date.now()},CreatedBy:{type:"string",default:""},LastUpdatedAt:{type:"any",default:Date.now()},LastUpdatedBy:{type:"string",default:""}}},bk=a(24),Sk={validateFields:function(e){return bk.validate(e,Ek,{cast:!0})},getStuffingLoosebale:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="StuffingLoosebale/"+e,a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 2:case"end":return a.stop()}}))},getStuffingLoosebaleFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("StuffingLoosebale-filter/").concat(e),a.next=3,l.a.awrap(We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 3:return a.abrupt("return",a.sent);case 4:case"end":return a.stop()}}))},getOneStuffingLoosebale:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("StuffingLoosebale/").concat(e),a.next=3,l.a.awrap(We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 3:return a.abrupt("return",a.sent);case 4:case"end":return a.stop()}}))},update:function(e,t){return Qe("StuffingLoosebale/"+e,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Updated",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="StuffingLoosebale/"+e,n.abrupt("return",He(a,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Added",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,formValid:!0,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("StuffingLoosebale/"+e).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))}},Ok=a(23),kk=(Object(n.forwardRef)((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),{ShippingType:{valid:!0,message:"",value:""},Factory:{valid:!0,message:"",value:""},StuffingDate:{valid:!0,message:"",value:""},SI:{valid:!0,message:"",value:""},ContainerDetail:{valid:!0,message:"",value:""},DynamicDescription:{valid:!0,message:"",value:""},DynamicImage:{valid:!0,message:"",value:""}}),wk=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).closeForm=function(){a.setState({formControl:Ok(kk)},(function(){return a.props.closeForm()}))},a.openImageForm=function(){var e=Object(me.a)({},a.state.formControls);e.DynamicDescription.valid=!0,e.DynamicImage.valid=!0,a.setState({openImageForm:!0,actionType:"dynamic",formControls:e,currentImgData:""})},a.closeImageForm=function(){a.setState({openImageForm:!1,actionType:"fixed",currentImgData:""})},a.onImgSave=function(e,t,n){if("dynamic"===n){var r=Object(je.a)(a.state.otherImgData),o=Object(me.a)({},a.state.formControls);void 0===a.state.currentImgData.Description||""===a.state.currentImgData.Description||void 0===a.state.currentImgData.ImageData||""===a.state.currentImgData.ImageData?(o.DynamicDescription.valid=!1,o.DynamicImage.valid=!1,a.setState({formControls:o})):(r.push(a.state.currentImgData),o.DynamicDescription.valid=!0,o.DynamicImage.valid=!0,a.setState({otherImgData:r,openImageForm:!1,currentImgData:"",formControls:o}))}else{var s=Object(me.a)({},a.state.stuffingUploadDocument);s[t]=e,a.setState({stuffingUploadDocument:s})}},a.onImgCancel=function(){var e=Object(me.a)({},a.state.formState);e.valid=!0,e.errors=[],a.setState({currentImgData:"",openImageForm:!1,formState:e})},a.save=function(){var e=Object(me.a)({},a.state.data),t=Object(je.a)(a.state.otherImgData),n=Object(me.a)({},a.state.formState);e.ContainerImages=Object(me.a)({},a.state.stuffingUploadDocument),e.OtherImages=t;var r=Sk.validateFields(e);r.valid?(a.setState({formState:{valid:!0,errors:[]}}),"Add"===a.props.formAction?Sk.add("",e).then((function(e){!0===e.code?a.props.onSuccess(e.data,a.props.formAction):n.errors.push({PropertyName:e.errors.propertyName,Message:e.errors.message})})):Sk.update("",e).then((function(e){!0===e.code?a.props.onSuccess(e.data,a.props.formAction):n.errors.push({PropertyName:e.errors.propertyName,Message:e.errors.message})}))):(n.errors=[],r.errors.map((function(e){"conform"===e.attribute&&n.errors.push({PropertyName:e.property,Message:e.message})})),a.setState({formState:n}))},a.state={data:a.props.formData,formOpen:a.props.formOpen,formAction:a.props.formAction,formControls:Object(me.a)({},kk),shippingList:[],containerList:[],stuffingDocumentList:[],stuffingUploadDocument:{},currentImgData:"",openCamera:!1,otherImgData:[],currentActionName:"ImageData",actionType:"fixed",imageContent:"",modalState:!1,factorySelectedValue:"",formState:{valid:!0,errors:[]}},a.closeCamera=a.closeCamera.bind(Object(Pe.a)(a)),a.handelChange=a.handelChange.bind(Object(Pe.a)(a)),a.openCamera=a.openCamera.bind(Object(Pe.a)(a)),a.onHandelChange=a.onHandelChange.bind(Object(Pe.a)(a)),a.closeModal=a.closeModal.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initContainerDocument(),"Update"===this.props.formAction&&(this.initContainer(),this.initShipping())}},{key:"initContainerDocument",value:function(){var e,t,a=this;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,l.a.awrap(Do("getStuffingDocument/Loosebale").then((function(e){if(!0===e.code)return e.data})));case 2:e=n.sent,"Update"===this.props.formAction?(t=Object(me.a)({},this.state.stuffingUploadDocument),Object.keys(this.state.data.ContainerImages).map((function(e){t[e]=a.state.data.ContainerImages[e]})),this.setState({stuffingDocumentList:e,otherImgData:this.state.data.OtherImages,stuffingUploadDocument:t})):this.setState({stuffingDocumentList:e});case 4:case"end":return n.stop()}}),null,this)}},{key:"initShipping",value:function(){var e=this;"object"===typeof this.state.data.ShippingInstruction&&void 0!==this.state.data.ShippingInstruction._id&&hi.getFilter("?ShippingInstruction=".concat(this.state.data.ShippingInstruction._id)).then((function(t){if(!0===t.code)e.setState({shippingList:t.data});else{var a=Object(me.a)({},e.state.formState),n=new Object(e);null===t.errors?(n.propertyName="",n.message="Error retrieving Sequence Number.",a.errors.push(n)):(n.propertyName=t.errors.propertyName,n.message=t.errors.message,a.errors.push(n)),e.setState({formState:a})}}))}},{key:"initContainer",value:function(){var e=this;"object"===typeof this.state.data.ShippingInstruction&&""!==this.state.data.ShippingInstruction._id&&Do("ContainerDetail/getContainerDetailBySI/".concat(this.state.data.ShippingInstruction._id)).then((function(t){if(!0===t.code)e.setState({containerList:t.data});else{var a=Object(me.a)({},e.state.formState),n=new Object(e);null===t.errors?(n.propertyName="",n.message="Error retrieving Sequence Number.",a.errors.push(n)):(n.propertyName=t.errors.propertyName,n.message=t.errors.message,a.errors.push(n)),e.setState({formState:a})}}))}},{key:"renderStuffingDocument",value:function(){var e=this;if(Array.isArray(this.state.stuffingDocumentList)&&this.state.stuffingDocumentList.length>0)return this.state.stuffingDocumentList.map((function(t,a){return t.StuffingDocument.length>0?r.a.createElement(be.a,{key:"g".concat(a+1),item:!0,container:!0,xs:12},r.a.createElement(bn,{label:t.Name,style:{width:"100%",padding:"10px"}},r.a.createElement(be.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center",wrap:"wrap"},t.StuffingDocument.length>0?t.StuffingDocument.map((function(t,a){return r.a.createElement(be.a,{key:"s".concat(a+1),item:!0,style:{padding:10},xs:12,sm:6,md:3,lg:3},r.a.createElement(jt.a,null,r.a.createElement(zs.a,{action:r.a.createElement(bt.a,{"aria-label":"close",onClick:function(a){e.removeImage(t.Name,"Stuffing")}},r.a.createElement(Vt.a,null)),title:t.Name}),r.a.createElement(Ys.a,{onClick:function(a){e.openCamera(t.Name,"fixed")}},r.a.createElement(Ks.a,{style:{height:250,backgroundSize:"cover"},image:""===e.state.stuffingUploadDocument[t.Name]||void 0===e.state.stuffingUploadDocument[t.Name]?ti.a:e.state.stuffingUploadDocument[t.Name],title:t.Name}))))})):""))):""}))}},{key:"openCamera",value:function(e,t){if("dynamic"===t)if(void 0===e||null===e)this.setState({openCamera:!0});else{var a={img:this.state.otherImgData[e].ImageData,propertyName:this.state.otherImgData[e].Description};this.setState({modalState:!0,imageContent:a,actionType:"dynamic"})}else if("fixed"===t)if(""===this.state.data[e]||void 0===this.state.data[e])this.setState({openCamera:!0,currentActionName:e,actionType:"fixed"});else{var n={img:this.state.data[e],propertyName:e};this.setState({modalState:!0,imageContent:n,actionType:"fixed"})}}},{key:"closeCamera",value:function(){this.setState({openCamera:!1})}},{key:"closeModal",value:function(){this.setState({modalState:!1})}},{key:"onHandelChange",value:function(e,t){var a=this,n=Object(me.a)({},this.state.data);n[t]=e,"ShippingInstruction"===t&&"object"===typeof e&&""!==e?this.setState({data:n,formState:{valid:!0,errors:[]}},(function(){a.initShipping(),a.initContainer()})):this.setState({data:n,formState:{valid:!0,errors:[]}})}},{key:"handelChange",value:function(e,t){"fixed"===this.state.actionType?this.onImgSave(e,t):"dynamic"===this.state.actionType&&this.imgFormOnChange(e,"ImageData")}},{key:"removeImage",value:function(e,t){if("Stuffing"===t){var a=Object(me.a)({},this.state.stuffingUploadDocument);a[e]="",this.setState({stuffingUploadDocument:a})}else{var n=Object(je.a)(this.state.otherImgData),r=n.indexOf(e);n.splice(r,1),this.setState({otherImgData:n})}}},{key:"imgFormOnChange",value:function(e,t){var a=Object(me.a)({},this.state.currentImgData),n=Object(me.a)({},this.state.formControls);"Description"===t?void 0===e||""===e?n.DynamicDescription.valid=!1:void 0!==e&&""!==e&&(a[t]=e,n.DynamicDescription.valid=!0):void 0===e||""===e?n.DynamicImage.valid=!1:void 0!==e&&""!==e&&(a[t]=e,n.DynamicImage.valid=!0),this.setState({currentImgData:a,formControls:n})}},{key:"renderImageData",value:function(){var e=this;return this.state.otherImgData.map((function(t,a){return r.a.createElement(be.a,{key:a,item:!0,style:{padding:10},xs:12,sm:6,md:3,lg:3},r.a.createElement(jt.a,null,r.a.createElement(zs.a,{action:r.a.createElement(bt.a,{"aria-label":"close",onClick:function(a){e.removeImage(t,"Other")}},r.a.createElement(Vt.a,null)),title:t.Description}),r.a.createElement(Ys.a,{onClick:function(t){e.openCamera(a,"dynamic")}},r.a.createElement(Ks.a,{style:{height:250,backgroundSize:"cover"},image:t.ImageData,title:t.Description}))))}))}},{key:"cancel",value:function(){}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{container:!0},r.a.createElement(Ae.a,{fullScreen:!0,open:this.state.formOpen,onClose:this.closeForm,TransitionComponent:this.Transition},r.a.createElement(w.a,{className:"appBar"},r.a.createElement(F.a,null,r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:this.closeForm,"aria-label":"close"},r.a.createElement(Vt.a,null)),r.a.createElement(x.a,{variant:"h6",className:"app-title"},"Stuffing Loosebale"),r.a.createElement(he.a,{color:"inherit",disabled:this.state.disabled,onClick:this.save},"save"))),r.a.createElement(_e.a,null,r.a.createElement("div",{className:"form-container"},r.a.createElement(be.a,{container:!0},r.a.createElement(be.a,{item:!0,container:!0,xs:12},r.a.createElement(be.a,{container:!0,direction:"row",justify:"flex-start",wrap:"wrap"},r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:6,lg:6},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"Shipping_Type",label:"Shipping Type",error:!this.state.formControls.ShippingType.valid,helperText:this.state.formControls.ShippingType.message,defaultValue:"Container",className:"",onChange:function(t){return e.onHandelChange(t.target.value,"ShippingType")},disabled:!0,margin:"dense"}))),r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:6,lg:6},r.a.createElement(Hr,{selectedValue:void 0!==this.state.data&&null!==this.state.data?this.state.data.Factory:"",handleChange:function(t){return e.onHandelChange(t,"Factory")},propertyName:"Factory",formControl:this.state.formControls.Factory})),r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:6,lg:6},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Da.b,{style:{width:"100%"},margin:"dense",id:"date-picker-dialog",label:"Date",format:"dd-MMM-yyyy",value:void 0===this.state.data||null===this.state.data||void 0===this.state.data.StuffingDate?Date.now():this.state.data.StuffingDate,onChange:function(t){return e.onHandelChange(t,"StuffingDate")},KeyboardButtonProps:{"aria-label":"Date"}})))),r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:6,lg:6},r.a.createElement(di,{for:"Shipping",selectedFactory:void 0===this.state.data||null===this.state.data?"":this.state.data.Factory._id,formControl:this.state.formControls.SI,selectedValue:this.state.data.ShippingInstruction,handleChange:function(t){return e.onHandelChange(t,"ShippingInstruction")},required:!1,propertyName:"ShippingInstruction"})),r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:6,lg:6},r.a.createElement(yi,{selectedValue:this.state.data.Shipping,data:this.state.shippingList,displayName:"Sequence Number",columns:["SequenceNumber"],propertyName:"Shipping",required:!0,handleChange:this.onHandelChange})),r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:6,lg:6},r.a.createElement(yi,{selectedValue:this.state.data.ContainerDetail,data:this.state.containerList,displayName:"Container#",columns:["Container"],propertyName:"ContainerDetail",required:!0,handleChange:this.onHandelChange})),r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:6,lg:6},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"SealNo",label:"Seal No.",value:void 0===this.state.data||null===this.state.data||void 0===this.state.data.ContainerDetail||""===this.state.data.ContainerDetail?0:this.state.data.ContainerDetail.Seal,className:"",onChange:function(t){return e.onHandelChange(t.target.value,"SealNo")},disabled:!0,margin:"dense"}))),r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:6,lg:6},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"Truck_ID",label:"Truck ID",defaultValue:this.state.data.TruckID,className:"",onChange:function(t){return e.onHandelChange(t.target.value,"TruckID")},margin:"dense"}))),r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:6,lg:6},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"Driver",label:"Driver",defaultValue:this.state.data.Driver,className:"",onChange:function(t){return e.onHandelChange(t.target.value,"Driver")},margin:"dense"}))),r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:6,lg:6},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"Supervisor",label:"Supervisor",defaultValue:this.state.data.Supervisor,className:"",onChange:function(t){return e.onHandelChange(t.target.value,"Supervisor")},margin:"dense"}))))),r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12},this.state.formState.errors.length>0?this.state.formState.errors.map((function(e){return r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12},r.a.createElement(x.a,{variant:"overline",color:"secondary"},e.Message))})):""),this.renderStuffingDocument(),this.state.otherImgData.length>0?r.a.createElement(be.a,{item:!0,container:!0,xs:12},r.a.createElement(bn,{label:"Others",style:{width:"100%",padding:"10px"}},r.a.createElement(be.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",wrap:"wrap"},0===this.state.otherImgData.length?r.a.createElement("h5",null,"No Data"):"",this.renderImageData()))):"",r.a.createElement(Ae.a,{fullScreen:!0,open:this.state.openCamera,onClose:this.closeCamera,TransitionComponent:this.Transition},this.state.openCamera?r.a.createElement($s,{closeCamera:this.closeCamera,handelChange:this.handelChange,actionFor:this.state.currentActionName}):""),r.a.createElement(oi,{modalState:this.state.modalState,contents:this.state.imageContent,closeModal:this.closeModal}),r.a.createElement("div",{className:"floating-btn-container"},r.a.createElement(fo.a,{color:"primary","aria-label":"add",onClick:this.openImageForm},r.a.createElement(wt.a,null))),r.a.createElement(Ae.a,{open:void 0!==this.state.openImageForm&&this.state.openImageForm,onClose:this.closeImageForm,"aria-labelledby":"Add Image"},r.a.createElement(Re.a,{id:"dialog-title"},"Add Image"),r.a.createElement(_e.a,null,r.a.createElement(be.a,{container:!0,direction:"column",justify:"flex-start",wrap:"wrap",style:{minWidth:450}},r.a.createElement(be.a,{item:!0,style:{padding:4}},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"Description",label:"Description",error:!this.state.formControls.DynamicDescription.valid,helperText:!0===this.state.formControls.DynamicDescription.valid?"":"Image Description cannot be empty.",defaultValue:"",className:"",onChange:function(t){return e.imgFormOnChange(t.target.value,"Description")},margin:"dense"}))),r.a.createElement(be.a,{item:!0,style:{padding:10}},!0===this.state.formControls.DynamicImage.valid?"":r.a.createElement(x.a,{variant:"span",component:"span",style:{fontSize:"0.75rem",color:"red"}},"Image need to capture."),r.a.createElement(jt.a,{className:"".concat(!0===this.state.formControls.DynamicImage.valid?"border-none":"border-red")},r.a.createElement(Ys.a,{onClick:function(t){e.openCamera(null,"dynamic")}},r.a.createElement(Ks.a,{style:{height:250,backgroundSize:"cover"},image:void 0===this.state.currentImgData.ImageData?ti.a:this.state.currentImgData.ImageData})))))),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.onImgCancel,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:function(t){return e.onImgSave(null,null,"dynamic")},color:"primary"},"Save"))))))))}}]),t}(r.a.Component),Fk=a(23),xk=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).snackOpen=function(e,t){var n;return l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0===e||null===e||void 0===t||null===t){r.next=7;break}return r.next=3,l.a.awrap(ka(e,t));case 3:n=r.sent,a.setState({snackOpen:!a.state.snackOpen,alertMessage:n,alertClass:e}),r.next=8;break;case 7:a.setState({snackOpen:!1});case 8:case"end":return r.stop()}}))},a.dialogOpen=function(e){var t;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,l.a.awrap(ka("confirmation","delete"));case 2:t=n.sent,console.log(e),a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:e,dialogMessage:r.a.createElement("span",null,void 0!==t?t.replace("[Name]",e.Factory.FctyName):"")});case 5:case"end":return n.stop()}}))},a.diaLogClose=function(){a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:null})},a.onDelete=function(){null!==a.state.currentDeleteData&&Sk.delete("".concat(a.state.currentDeleteData._id)).then((function(e){if(!0===e.code){var t=Object(je.a)(a.state.data),n=t.indexOf(a.state.currentDeleteData);t.splice(n,1),a.setState({data:t,currentDeleteData:"",dialogOpen:!a.state.dialogOpen},(function(){return a.snackOpen("success","delete")}))}else a.snackOpen("error","server")}))},a.state={columns:[{title:"Factory",field:"Factory",render:function(e){return r.a.createElement("span",null,e.Factory.FctyName)}},{title:"Date",field:"StuffingDate",render:function(e){return r.a.createElement("span",null,new Date(e.StuffingDate).toLocaleDateString())}},{title:"SI#",field:"ShippingInstruction",render:function(e){return r.a.createElement("span",null,e.ShippingInstruction.SINo)}},{title:"Sequence#",field:"Sequence",render:function(e){return r.a.createElement("span",null,e.Shipping.SequenceNumber)}},{title:"Loosebale#",field:"LoosebaleDetail",render:function(e){return r.a.createElement("span",null,void 0===e.LoosebaleDetail?0:e.LoosebaleDetail.Loosebale)}},{title:"Seal #",field:"Seal",render:function(e){return r.a.createElement("span",null,void 0===e.LoosebaleDetail?0:e.LoosebaleDetail.Seal)}},{title:"TruckID",field:"TruckID"},{title:"Driver",field:"Driver"},{title:"Supervisor",field:"Supervisor"},{title:"Operator",field:"LastUpdatedBy",editable:"never"},{title:"Last Updated",field:"LastUpdatedAt",render:function(e){return r.a.createElement("span",null,void 0===e?"":new Date(e.LastUpdatedAt).toLocaleDateString())},editable:"never"}],data:[],formData:null,currentDeleteData:null,formOpen:!1,formAction:"",dialogOpen:!1,snackOpen:!1,alertMessage:"",dialogMessage:"",alertClass:""},a.stuffingLoosebaleModel=Fk(Dk),a.onSuccess=a.onSuccess.bind(Object(Pe.a)(a)),a.closeForm=a.closeForm.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initstuffingLoosebale()}},{key:"initstuffingLoosebale",value:function(){var e=this;Sk.getOneStuffingLoosebale("").then((function(t){!0===t.code&&e.setState({data:t.data})}))}},{key:"openForm",value:function(e){var t,a,n;return l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(t=e,a=!this.state.formOpen,void 0!==t&&null!==t){r.next=8;break}t=this.stuffingLoosebaleModel,n="Add",a=!0,r.next=11;break;case 8:return n="Update",r.next=11,l.a.awrap(Sk.getOneStuffingLoosebale("ImageUpload/".concat(t._id)).then((function(e){!0===e.code?(t=e.data,a=!0):a=!1})));case 11:this.setState({formData:t,formOpen:a,formAction:n});case 12:case"end":return r.stop()}}),null,this)}},{key:"closeForm",value:function(){this.setState({formData:null,formOpen:!1,formAction:""})}},{key:"onSuccess",value:function(e){var t=this,a=Object(je.a)(this.state.data);if(void 0!==e&&null!==e)if("Add"===this.state.formAction)a.push(e),this.setState({data:a,formOpen:!this.state.formOpen,formAction:"",currentRowData:null},(function(){return t.snackOpen("success","add")}));else{var n=a.indexOf(this.state.formData);a[n]=e,this.setState({data:a,formOpen:!this.state.formOpen,formAction:"",currentRowData:null},(function(){return t.snackOpen("success","update")}))}else this.snackOpen("error","server")}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{Loosebale:!0,direction:"column",justify:"center",wrap:"wrap",style:{margin:"20px 20px 10px 0px"}},r.a.createElement(be.a,{item:!0,xs:12},r.a.createElement(Ve.a,{title:"Stuffing Loosebale",columns:this.state.columns,data:this.state.data,components:{Toolbar:function(t){return r.a.createElement("div",null,r.a.createElement(Le.MTableToolbar,t),r.a.createElement("div",{style:{padding:"0px 15px"}},r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:function(){return e.openForm(t.rowData)},"aria-label":"add"},r.a.createElement(wt.a,null))))}},actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.data,columns:e.state.columns,fileName:"stuffingLoosebale"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.initstuffingLoosebale()}},{icon:"edit",tooltip:"Edit User",onClick:function(t,a){return e.openForm(a)}},{icon:"delete",tooltip:"Delete User",onClick:function(t,a){return e.dialogOpen(a)}}],icons:{Clear:function(t){return r.a.createElement(Nt.a,{onClick:function(){e.initFormControl()},style:{padding:0,margin:0}})}},options:{}})),r.a.createElement(be.a,{item:!0,xs:12},this.state.formOpen?r.a.createElement(wk,{formAction:this.state.formAction,formData:this.state.formData,formOpen:this.state.formOpen,onSuccess:this.onSuccess,closeForm:this.closeForm}):""),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:600,open:this.state.snackOpen,onClose:this.snackOpen,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.diaLogClose,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.diaLogClose,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDelete,color:"primary"},"Delete"))))}}]),t}(r.a.Component),Tk=(a(1009),{ShippingType:"Truck",Factory:"",StuffingDate:new Date(Date.now()),ShippingInstruction:"",Shipping:"",Container:"",QuantityUnit:0,TruckID:"",Driver:"",Supervisor:""}),Nk={properties:{ShippingType:{description:"",type:["object","string"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Shipping Type cannot be empty.",conform:"Shipping Type cannot be empty.",required:"Shipping Type cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},Factory:{description:"",type:"any",required:!0,allowEmpty:!1,messages:{allowEmpty:"Factory cannot be empty.",conform:"Factory cannot be empty.",required:"Factory cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},Date:{description:"",type:"any",required:!0,allowEmpty:!1,messages:{allowEmpty:"Date cannot be empty.",conform:"Date cannot be empty.",required:"Date cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},ShippingInstruction:{description:"",type:"any",required:!0,allowEmpty:!1,messages:{allowEmpty:"Shipping Instruction cannot be empty.",conform:"Shipping Instruction cannot be empty.",required:"Shipping Instruction cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},Shipping:{description:"",type:"any",required:!0,allowEmpty:!1,messages:{allowEmpty:"Sequence Number cannot be empty.",conform:"Sequence Number cannot be empty.",required:"Sequence Number cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},ContainerDetail:{description:"",type:["object","string"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Container cannot be empty.",conform:"Container cannot be empty.",required:"Container cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},TruckID:{description:"",type:"string"},Driver:{description:"",type:"string"},Supervisor:{description:"",type:"string"},ContainerImages:{description:"",type:"object"},OtherImages:{description:"",type:"array"},CreatedAt:{type:"any",default:Date.now()},CreatedBy:{type:"string",default:""},LastUpdatedAt:{type:"any",default:Date.now()},LastUpdatedBy:{type:"string",default:""}}},jk=a(24),Pk={validateFields:function(e){return jk.validate(e,Nk,{cast:!0})},getStuffingTruck:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="StuffingTruck/"+e,a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 2:case"end":return a.stop()}}))},getStuffingTruckFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("StuffingTruck-filter/").concat(e),a.next=3,l.a.awrap(We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 3:return a.abrupt("return",a.sent);case 4:case"end":return a.stop()}}))},getOneStuffingTruck:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("StuffingTruck/").concat(e),a.next=3,l.a.awrap(We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 3:return a.abrupt("return",a.sent);case 4:case"end":return a.stop()}}))},update:function(e,t){return Qe("StuffingTruck/"+e,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Updated",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="StuffingTruck/"+e,n.abrupt("return",He(a,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Added",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,formValid:!0,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("StuffingTruck/"+e).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))}},Ak=a(23),Mk=(Object(n.forwardRef)((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),{ShippingType:{valid:!0,message:"",value:""},Factory:{valid:!0,message:"",value:""},StuffingDate:{valid:!0,message:"",value:""},SI:{valid:!0,message:"",value:""},Container:{valid:!0,message:"",value:""}}),_k=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).closeForm=function(){a.setState({formControl:Ak(Mk)},(function(){return a.props.closeForm()}))},a.openImageForm=function(){a.setState({openImageForm:!0,actionType:"dynamic"})},a.closeImageForm=function(){a.setState({openImageForm:!1,actionType:"fixed"})},a.onImgSave=function(e,t,n){if("dynamic"===n){var r=Object(je.a)(a.state.otherImgData),o=Object(me.a)({},a.state.currentImgData);r.push(o),a.setState({otherImgData:r,openImageForm:!1,currentImgData:""})}else{var s=Object(me.a)({},a.state.stuffingUploadDocument);s[t]=e,a.setState({stuffingUploadDocument:s})}},a.onImgCancel=function(){var e=Object(me.a)({},a.state.formState);e.valid=!0,e.errors=[],a.setState({currentImgData:"",openImageForm:!1,formState:e})},a.save=function(){var e=Object(me.a)({},a.state.data),t=Object(je.a)(a.state.otherImgData),n=Object(me.a)({},a.state.formState);e.ContainerImages=Object(me.a)({},a.state.stuffingUploadDocument),e.OtherImages=t;var r=Pk.validateFields(e);r.valid?(a.setState({formState:{valid:!0,errors:[]}}),console.log(a.state.formState.errors),"Add"===a.props.formAction?Pk.add("",e).then((function(e){!0===e.code?a.closeForm():n.errors.push({PropertyName:e.errors.propertyName,Message:e.errors.message})})):Pk.update("",e).then((function(e){!0===e.code?a.closeForm():n.errors.push({PropertyName:e.errors.propertyName,Message:e.errors.message})}))):(n.errors=[],r.errors.map((function(e){console.log(n.errors),n.errors.push({PropertyName:e.property,Message:e.message})})),a.setState({formState:n}))},a.state={data:a.props.formData,formOpen:a.props.formOpen,formAction:a.props.formAction,formControls:Object(me.a)({},Mk),shippingList:[],containerList:[],stuffingDocumentList:[],stuffingUploadDocument:{},currentImgData:"",openCamera:!1,otherImgData:[],currentActionName:"ImageData",actionType:"fixed",imageContent:"",modalState:!1,factorySelectedValue:"",formState:{valid:!0,errors:[]}},a.closeCamera=a.closeCamera.bind(Object(Pe.a)(a)),a.handelChange=a.handelChange.bind(Object(Pe.a)(a)),a.openCamera=a.openCamera.bind(Object(Pe.a)(a)),a.onHandelChange=a.onHandelChange.bind(Object(Pe.a)(a)),a.closeModal=a.closeModal.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initContainerDocument(),"Update"===this.props.formAction&&(this.initContainer(),this.initShipping())}},{key:"initContainerDocument",value:function(){var e,t,a=this;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,l.a.awrap(Do("getStuffingDocument/Truck").then((function(e){if(!0===e.code)return e.data})));case 2:e=n.sent,"Update"===this.props.formAction?(t=Object(me.a)({},this.state.stuffingUploadDocument),Object.keys(this.state.data.ContainerImages).map((function(e){t[e]=a.state.data.ContainerImages[e]})),this.setState({stuffingDocumentList:e,otherImgData:this.state.data.OtherImages,stuffingUploadDocument:t})):this.setState({stuffingDocumentList:e});case 4:case"end":return n.stop()}}),null,this)}},{key:"initShipping",value:function(){var e=this;"object"===typeof this.state.data.ShippingInstruction&&void 0!==this.state.data.ShippingInstruction._id&&hi.getFilter("?ShippingInstruction=".concat(this.state.data.ShippingInstruction._id)).then((function(t){if(!0===t.code)e.setState({shippingList:t.data});else{var a=Object(me.a)({},e.state.formState),n=new Object(e);null===t.errors?(n.propertyName="",n.message="Error retrieving Sequence Number.",a.errors.push(n)):(n.propertyName=t.errors.propertyName,n.message=t.errors.message,a.errors.push(n)),e.setState({formState:a})}}))}},{key:"initContainer",value:function(){var e=this;"object"===typeof this.state.data.ShippingInstruction&&""!==this.state.data.ShippingInstruction._id&&Do("ContainerDetail/getContainerDetailBySI/".concat(this.state.data.ShippingInstruction._id)).then((function(t){if(!0===t.code)e.setState({containerList:t.data});else{var a=Object(me.a)({},e.state.formState),n=new Object(e);null===t.errors?(n.propertyName="",n.message="Error retrieving Sequence Number.",a.errors.push(n)):(n.propertyName=t.errors.propertyName,n.message=t.errors.message,a.errors.push(n)),e.setState({formState:a})}}))}},{key:"renderStuffingDocument",value:function(){var e=this;if(Array.isArray(this.state.stuffingDocumentList)&&this.state.stuffingDocumentList.length>0)return this.state.stuffingDocumentList.map((function(t){return t.StuffingDocument.length>0?r.a.createElement(be.a,{item:!0,container:!0,xs:12},r.a.createElement(bn,{label:t.Name,style:{width:"100%",padding:"10px"}},r.a.createElement(be.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center",wrap:"wrap"},t.StuffingDocument.length>0?t.StuffingDocument.map((function(t){return r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:3,lg:3},r.a.createElement(jt.a,null,r.a.createElement(zs.a,{action:r.a.createElement(bt.a,{"aria-label":"close",onClick:function(a){e.removeImage(t.Name)}},r.a.createElement(Vt.a,null)),title:t.Name}),r.a.createElement(Ys.a,{onClick:function(a){e.openCamera(t.Name,"fixed")}},r.a.createElement(Ks.a,{style:{height:250,backgroundSize:"cover"},image:""===e.state.stuffingUploadDocument[t.Name]||void 0===e.state.stuffingUploadDocument[t.Name]?ti.a:e.state.stuffingUploadDocument[t.Name],title:t.Name}))))})):""))):""}))}},{key:"openCamera",value:function(e,t){if("dynamic"===t)if(void 0===e||null===e)this.setState({openCamera:!0});else{var a={img:this.state.otherImgData[e].ImageData,propertyName:this.state.otherImgData[e].Description};this.setState({modalState:!0,imageContent:a,actionType:"dynamic"})}else if("fixed"===t)if(""===this.state.data[e]||void 0===this.state.data[e])this.setState({openCamera:!0,currentActionName:e,actionType:"fixed"});else{var n={img:this.state.data[e],propertyName:e};this.setState({modalState:!0,imageContent:n,actionType:"fixed"})}}},{key:"closeCamera",value:function(){this.setState({openCamera:!1})}},{key:"closeModal",value:function(){this.setState({modalState:!1})}},{key:"onHandelChange",value:function(e,t){var a=this,n=Object(me.a)({},this.state.data);n[t]=e,"ShippingInstruction"===t&&"object"===typeof e&&""!==e?this.setState({data:n,formState:{valid:!0,errors:[]}},(function(){a.initShipping(),a.initContainer()})):this.setState({data:n,formState:{valid:!0,errors:[]}})}},{key:"handelChange",value:function(e,t){"fixed"===this.state.actionType?this.onImgSave(e,t):"dynamic"===this.state.actionType&&this.imgFormOnChange(e,"ImageData")}},{key:"removeImage",value:function(e){var t=Object(me.a)({},this.state.data);t[e]="",this.setState({data:t})}},{key:"imgFormOnChange",value:function(e,t){var a=Object(me.a)({},this.state.currentImgData),n=Object(me.a)({},this.state.formState);void 0!==e&&null!==e&&""!==e?(a[t]=e,n.valid=!0,this.setState({currentImgData:a,formState:n})):(n.valid=!1,this.setState({formState:n}))}},{key:"renderImageData",value:function(){var e=this;return this.state.otherImgData.map((function(t,a){return r.a.createElement(be.a,{key:a,item:!0,style:{padding:10},xs:12,sm:6,md:3,lg:3},r.a.createElement(jt.a,null,r.a.createElement(zs.a,{action:r.a.createElement(bt.a,{"aria-label":"close",onClick:function(a){e.removeImage(t)}},r.a.createElement(Vt.a,null)),title:t.Description}),r.a.createElement(Ys.a,{onClick:function(t){e.openCamera(a,"dynamic")}},r.a.createElement(Ks.a,{style:{height:250,backgroundSize:"cover"},image:t.ImageData,title:t.Description}))))}))}},{key:"cancel",value:function(){}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{container:!0},r.a.createElement(Ae.a,{fullScreen:!0,open:this.state.formOpen,onClose:this.closeForm,TransitionComponent:this.Transition},r.a.createElement(w.a,{className:"appBar"},r.a.createElement(F.a,null,r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:this.closeForm,"aria-label":"close"},r.a.createElement(Vt.a,null)),r.a.createElement(x.a,{variant:"h6",className:"app-title"},"Stuffing Truck"),r.a.createElement(he.a,{color:"inherit",disabled:this.state.disabled,onClick:this.save},"save"))),r.a.createElement(_e.a,null,r.a.createElement("div",{className:"form-container"},r.a.createElement(be.a,{container:!0},r.a.createElement(be.a,{item:!0,container:!0,xs:12},r.a.createElement(be.a,{container:!0,direction:"row",justify:"flex-start",wrap:"wrap"},r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:6,lg:6},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"Shipping_Type",label:"Shipping Type",error:!this.state.formControls.ShippingType.valid,helperText:this.state.formControls.ShippingType.message,defaultValue:"Container",className:"",onChange:function(t){return e.onHandelChange(t.target.value,"ShippingType")},disabled:!0,margin:"dense"}))),r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:6,lg:6},r.a.createElement(Hr,{selectedValue:this.state.data.Factory,handleChange:function(t){return e.onHandelChange(t,"Factory")},propertyName:"Factory",formControl:this.state.formControls.Factory})),r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:6,lg:6},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Da.b,{style:{width:"100%"},margin:"dense",id:"date-picker-dialog",label:"Date",format:"dd-MMM-yyyy",value:void 0===this.state.data.StuffingDate?Date.now():this.state.data.StuffingDate,onChange:function(t){return e.onHandelChange(t,"StuffingDate")},KeyboardButtonProps:{"aria-label":"Date"}})))),r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:6,lg:6},r.a.createElement(di,{for:"Shipping",selectedFactory:this.state.data.Factory._id,formControl:this.state.formControls.SI,selectedValue:this.state.data.ShippingInstruction,handleChange:function(t){return e.onHandelChange(t,"ShippingInstruction")},required:!1,propertyName:"ShippingInstruction"})),r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:6,lg:6},r.a.createElement(yi,{selectedValue:this.state.data.Shipping,data:this.state.shippingList,displayName:"Sequence Number",columns:["SequenceNumber"],propertyName:"Shipping",required:!0,handleChange:this.onHandelChange})),r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:6,lg:6},r.a.createElement(yi,{selectedValue:this.state.data.ContainerDetail,data:this.state.containerList,displayName:"Container#",columns:["Container"],propertyName:"ContainerDetail",required:!0,handleChange:this.onHandelChange})),r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:6,lg:6},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{id:"QuantityUnit",label:"Quantity (Unit)",customInput:ge.a,value:this.state.data.QuantityUnit,onValueChange:function(t){return e.onHandelChange(t.floatValue,"QuantityUnit")},onFocus:function(e){e.target.select()},decimalScale:2,fixedDecimalScale:!0}))),r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:6,lg:6},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"Truck_ID",label:"Truck ID",defaultValue:this.state.data.TruckID,className:"",onChange:function(t){return e.onHandelChange(t.target.value,"TruckID")},margin:"dense"}))),r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:6,lg:6},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"Driver",label:"Driver",defaultValue:this.state.data.Driver,className:"",onChange:function(t){return e.onHandelChange(t.target.value,"Driver")},margin:"dense"}))),r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:6,lg:6},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"Supervisor",label:"Supervisor",defaultValue:this.state.data.Supervisor,className:"",onChange:function(t){return e.onHandelChange(t.target.value,"Supervisor")},margin:"dense"}))))),r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12},this.state.formState.errors.length>0?this.state.formState.errors.map((function(e){return r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12},r.a.createElement(x.a,{variant:"overline",color:"secondary"},e.Message))})):""),this.renderStuffingDocument(),this.state.otherImgData.length>0?r.a.createElement(be.a,{item:!0,container:!0,xs:12},r.a.createElement(bn,{label:"Others",style:{width:"100%",padding:"10px"}},r.a.createElement(be.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",wrap:"wrap"},0===this.state.otherImgData.length?r.a.createElement("h5",null,"No Data"):"",this.renderImageData()))):"",r.a.createElement(Ae.a,{fullScreen:!0,open:this.state.openCamera,onClose:this.closeCamera,TransitionComponent:this.Transition},this.state.openCamera?r.a.createElement($s,{closeCamera:this.closeCamera,handelChange:this.handelChange,actionFor:this.state.currentActionName}):""),r.a.createElement(oi,{modalState:this.state.modalState,contents:this.state.imageContent,closeModal:this.closeModal}),r.a.createElement("div",{className:"floating-btn-container"},r.a.createElement(fo.a,{color:"primary","aria-label":"add",onClick:this.openImageForm},r.a.createElement(wt.a,null))),r.a.createElement(Ae.a,{open:this.state.openImageForm,onClose:this.closeImageForm,"aria-labelledby":"Add Image"},r.a.createElement(Re.a,{id:"dialog-title"},"Add Image"),r.a.createElement(_e.a,null,r.a.createElement(be.a,{container:!0,direction:"column",justify:"flex-start",wrap:"wrap",style:{minWidth:450}},r.a.createElement(be.a,{item:!0,style:{padding:4}},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"Description",label:"Description",error:!this.state.formState,helperText:"Image Description cannot be empty.",defaultValue:"",className:"",onChange:function(t){return e.imgFormOnChange(t.target.value,"Description")},margin:"dense"}))),r.a.createElement(be.a,{item:!0,style:{padding:10}},r.a.createElement(jt.a,null,r.a.createElement(Ys.a,{onClick:function(t){e.openCamera(null,"dynamic")}},r.a.createElement(Ks.a,{style:{height:250,backgroundSize:"cover"},image:void 0===this.state.currentImgData.ImageData?ti.a:this.state.currentImgData.ImageData})))))),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.onImgCancel,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:function(t){return e.onImgSave(null,null,"dynamic")},color:"primary"},"Save"))))))))}}]),t}(r.a.Component),Ik=a(23),Rk=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).snackOpen=function(e,t){var n;return l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0===e||null===e||void 0===t||null===t){r.next=7;break}return r.next=3,l.a.awrap(ka(e,t));case 3:n=r.sent,a.setState({snackOpen:!a.state.snackOpen,alertMessage:n,alertClass:e}),r.next=8;break;case 7:a.setState({snackOpen:!1});case 8:case"end":return r.stop()}}))},a.dialogOpen=function(e){var t;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,l.a.awrap(ka("confirmation","delete"));case 2:t=n.sent,a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:e,dialogMessage:r.a.createElement("span",null,void 0!==t?t.replace("[Name]",e.Factory.FctyName):"")});case 4:case"end":return n.stop()}}))},a.diaLogClose=function(){a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:null})},a.onDelete=function(){null!==a.state.currentDeleteData&&Pk.delete("".concat(a.state.currentDeleteData._id)).then((function(e){if(!0===e.code){var t=Object(je.a)(a.state.data),n=t.indexOf(a.state.currentDeleteData);t.splice(n,1),a.setState({data:t,currentDeleteData:"",dialogOpen:!a.state.dialogOpen},(function(){return a.snackOpen("success","delete")}))}else a.snackOpen("error","server")}))},a.state={columns:[{title:"Factory",field:"Factory",render:function(e){return r.a.createElement("span",null,e.Factory.FctyName)}},{title:"Date",field:"Date",render:function(e){return r.a.createElement("span",null,new Date(e.Date).toLocaleDateString())}},{title:"SI#",field:"ShippingInstruction",render:function(e){return r.a.createElement("span",null,e.ShippingInstruction.SINo)}},{title:"Sequence#",field:"Sequence",render:function(e){return r.a.createElement("span",null,e.Shipping.SequenceNumber)}},{title:"Truck#",field:"TruckDetail",render:function(e){return r.a.createElement("span",null,void 0===e.TruckDetail?0:e.TruckDetail.Truck)}},{title:"QuantityUnit #",field:"QuantityUnit",render:function(e){return r.a.createElement("span",null,void 0===e.QuantityUnit?0:e.QuantityUnit)}},{title:"TruckID",field:"TruckID"},{title:"Driver",field:"Driver"},{title:"Supervisor",field:"Supervisor"},{title:"Operator",field:"LastUpdatedBy",editable:"never"},{title:"Last Updated",field:"LastUpdatedAt",render:function(e){return r.a.createElement("span",null,void 0===e?"":new Date(e.LastUpdatedAt).toLocaleDateString())},editable:"never"}],data:[],formData:null,currentDeleteData:null,formOpen:!1,formAction:"",dialogOpen:!1,snackOpen:!1,alertMessage:"",dialogMessage:"",alertClass:""},a.stuffingTruckModel=Ik(Tk),a.onSuccess=a.onSuccess.bind(Object(Pe.a)(a)),a.closeForm=a.closeForm.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initstuffingTruck()}},{key:"initstuffingTruck",value:function(){var e=this;Pk.getOneStuffingTruck("").then((function(t){!0===t.code&&e.setState({data:t.data})}))}},{key:"openForm",value:function(e){var t,a,n;return l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(t=e,a=!this.state.formOpen,void 0!==t&&null!==t){r.next=8;break}t=this.stuffingTruckModel,n="Add",a=!0,r.next=11;break;case 8:return n="Update",r.next=11,l.a.awrap(Pk.getOneStuffingTruck("ImageUpload/".concat(t._id)).then((function(e){!0===e.code?(t=e.data,a=!0):a=!1})));case 11:this.setState({formData:t,formOpen:a,formAction:n});case 12:case"end":return r.stop()}}),null,this)}},{key:"closeForm",value:function(){this.setState({formData:null,formOpen:!1,formAction:""})}},{key:"onSuccess",value:function(e){var t=this,a=Object(je.a)(this.state.data);if(void 0!==e&&null!==e)if("Add"===this.state.formAction)a.push(e),this.setState({data:a,formOpen:!this.state.formOpen,formAction:"",currentRowData:null},(function(){return t.snackOpen("success","add")}));else{var n=a.indexOf(this.state.formData);a[n]=e,this.setState({data:a,formOpen:!this.state.formOpen,formAction:"",currentRowData:null},(function(){return t.snackOpen("success","update")}))}else this.snackOpen("error","server")}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{Truck:!0,direction:"column",justify:"center",wrap:"wrap",style:{margin:"20px 20px 10px 0px"}},r.a.createElement(be.a,{item:!0,xs:12},r.a.createElement(Ve.a,{title:"Stuffing Truck",columns:this.state.columns,data:this.state.data,components:{Toolbar:function(t){return r.a.createElement("div",null,r.a.createElement(Le.MTableToolbar,t),r.a.createElement("div",{style:{padding:"0px 15px"}},r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:function(){return e.openForm(t.rowData)},"aria-label":"add"},r.a.createElement(wt.a,null))))}},actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.data,columns:e.state.columns,fileName:"stuffingTruck"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.initstuffingTruck()}},{icon:"edit",tooltip:"Edit User",onClick:function(t,a){return e.openForm(a)}},{icon:"delete",tooltip:"Delete User",onClick:function(t,a){return e.dialogOpen(a)}}],icons:{Clear:function(t){return r.a.createElement(Nt.a,{onClick:function(){e.initFormControl()},style:{padding:0,margin:0}})}},options:{}})),r.a.createElement(be.a,{item:!0,xs:12},this.state.formOpen?r.a.createElement(_k,{formAction:this.state.formAction,formData:this.state.formData,formOpen:this.state.formOpen,onSuccess:this.onSuccess,closeForm:this.closeForm}):""),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:600,open:this.state.snackOpen,onClose:this.snackOpen,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.diaLogClose,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.diaLogClose,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDelete,color:"primary"},"Delete"))))}}]),t}(r.a.Component),Lk=(a(1010),{ShippingType:"Barge",Factory:"",StuffingDate:new Date(Date.now()),ShippingInstruction:"",Shipping:"",Container:"",QuantityUnit:0,BargeID:"",Driver:"",Supervisor:""}),Vk={properties:{ShippingType:{description:"",type:"any",required:!0,allowEmpty:!1,messages:{allowEmpty:"Shipping Type cannot be empty.",conform:"Shipping Type cannot be empty.",required:"Shipping Type cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},Factory:{description:"",type:"any",required:!0,allowEmpty:!1,messages:{allowEmpty:"Factory cannot be empty.",conform:"Factory cannot be empty.",required:"Factory cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},Date:{description:"",type:"any",required:!0,allowEmpty:!1,messages:{allowEmpty:"Date cannot be empty.",conform:"Date cannot be empty.",required:"Date cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},ShippingInstruction:{description:"",type:"any",required:!0,allowEmpty:!1,messages:{allowEmpty:"Shipping Instruction cannot be empty.",conform:"Shipping Instruction cannot be empty.",required:"Shipping Instruction cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},Shipping:{description:"",type:"any",required:!0,allowEmpty:!1,messages:{allowEmpty:"Sequence Number cannot be empty.",conform:"Sequence Number cannot be empty.",required:"Sequence Number cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},ContainerDetail:{description:"",type:["object","string"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Container cannot be empty.",conform:"Container cannot be empty.",required:"Container cannot be empty."},conform:function(e){return 0!==e&&""!==e&&void 0!==e}},BargeID:{description:"",type:"string"},Driver:{description:"",type:"string"},Supervisor:{description:"",type:"string"},ContainerImages:{description:"",type:"object"},OtherImages:{description:"",type:"array"},CreatedAt:{type:"any",default:Date.now()},CreatedBy:{type:"string",default:""},LastUpdatedAt:{type:"any",default:Date.now()},LastUpdatedBy:{type:"string",default:""}}},Bk=a(24),Uk={validateFields:function(e){return Bk.validate(e,Vk,{cast:!0})},getStuffingBarge:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="StuffingBarge/"+e,a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 2:case"end":return a.stop()}}))},getStuffingBargeFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("StuffingBarge-filter/").concat(e),a.next=3,l.a.awrap(We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 3:return a.abrupt("return",a.sent);case 4:case"end":return a.stop()}}))},getOneStuffingBarge:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("StuffingBarge/").concat(e),a.next=3,l.a.awrap(We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 3:return a.abrupt("return",a.sent);case 4:case"end":return a.stop()}}))},update:function(e,t){return Qe("StuffingBarge/"+e,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Updated",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="StuffingBarge/"+e,n.abrupt("return",He(a,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Added",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,formValid:!0,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("StuffingBarge/"+e).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))}},qk=a(23),Gk=(Object(n.forwardRef)((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),{ShippingType:{valid:!0,message:"",value:""},Factory:{valid:!0,message:"",value:""},StuffingDate:{valid:!0,message:"",value:""},SI:{valid:!0,message:"",value:""},Container:{valid:!0,message:"",value:""}}),Wk=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).closeForm=function(){a.setState({formControl:qk(Gk)},(function(){return a.props.closeForm()}))},a.openImageForm=function(){a.setState({openImageForm:!0,actionType:"dynamic"})},a.closeImageForm=function(){a.setState({openImageForm:!1,actionType:"fixed"})},a.onImgSave=function(e,t,n){if("dynamic"===n){var r=Object(je.a)(a.state.otherImgData),o=Object(me.a)({},a.state.currentImgData);r.push(o),a.setState({otherImgData:r,openImageForm:!1,currentImgData:""})}else{var s=Object(me.a)({},a.state.stuffingUploadDocument);s[t]=e,a.setState({stuffingUploadDocument:s})}},a.onImgCancel=function(){var e=Object(me.a)({},a.state.formState);e.valid=!0,e.errors=[],a.setState({currentImgData:"",openImageForm:!1,formState:e})},a.save=function(){var e=Object(me.a)({},a.state.data),t=Object(je.a)(a.state.otherImgData),n=Object(me.a)({},a.state.formState);e.ContainerImages=Object(me.a)({},a.state.stuffingUploadDocument),e.OtherImages=t;var r=Uk.validateFields(e);r.valid?(a.setState({formState:{valid:!0,errors:[]}}),"Add"===a.props.formAction?Uk.add("",e).then((function(e){!0===e.code?a.closeForm():n.errors.push({PropertyName:e.errors.propertyName,Message:e.errors.message})})):Uk.update("",e).then((function(e){!0===e.code?a.closeForm():n.errors.push({PropertyName:e.errors.propertyName,Message:e.errors.message})}))):(n.errors=[],r.errors.map((function(e){n.errors.push({PropertyName:e.property,Message:e.message})})),a.setState({formState:n}))},a.state={data:a.props.formData,formOpen:a.props.formOpen,formAction:a.props.formAction,formControls:Object(me.a)({},Gk),shippingList:[],containerList:[],stuffingDocumentList:[],stuffingUploadDocument:{},currentImgData:"",openCamera:!1,otherImgData:[],currentActionName:"ImageData",actionType:"fixed",imageContent:"",modalState:!1,factorySelectedValue:"",formState:{valid:!0,errors:[]}},a.closeCamera=a.closeCamera.bind(Object(Pe.a)(a)),a.handelChange=a.handelChange.bind(Object(Pe.a)(a)),a.openCamera=a.openCamera.bind(Object(Pe.a)(a)),a.onHandelChange=a.onHandelChange.bind(Object(Pe.a)(a)),a.closeModal=a.closeModal.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initContainerDocument(),"Update"===this.props.formAction&&(this.initContainer(),this.initShipping())}},{key:"initContainerDocument",value:function(){var e,t,a=this;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,l.a.awrap(Do("getStuffingDocument/Barge").then((function(e){if(!0===e.code)return e.data})));case 2:e=n.sent,"Update"===this.props.formAction?(t=Object(me.a)({},this.state.stuffingUploadDocument),Object.keys(this.state.data.ContainerImages).map((function(e){t[e]=a.state.data.ContainerImages[e]})),this.setState({stuffingDocumentList:e,otherImgData:this.state.data.OtherImages,stuffingUploadDocument:t})):this.setState({stuffingDocumentList:e});case 4:case"end":return n.stop()}}),null,this)}},{key:"initShipping",value:function(){var e=this;"object"===typeof this.state.data.ShippingInstruction&&void 0!==this.state.data.ShippingInstruction._id&&hi.getFilter("?ShippingInstruction=".concat(this.state.data.ShippingInstruction._id)).then((function(t){if(!0===t.code)e.setState({shippingList:t.data});else{var a=Object(me.a)({},e.state.formState),n=new Object(e);null===t.errors?(n.propertyName="",n.message="Error retrieving Sequence Number.",a.errors.push(n)):(n.propertyName=t.errors.propertyName,n.message=t.errors.message,a.errors.push(n)),e.setState({formState:a})}}))}},{key:"initContainer",value:function(){var e=this;"object"===typeof this.state.data.ShippingInstruction&&""!==this.state.data.ShippingInstruction._id&&Do("ContainerDetail/getContainerDetailBySI/".concat(this.state.data.ShippingInstruction._id)).then((function(t){if(!0===t.code)e.setState({containerList:t.data});else{var a=Object(me.a)({},e.state.formState),n=new Object(e);null===t.errors?(n.propertyName="",n.message="Error retrieving Sequence Number.",a.errors.push(n)):(n.propertyName=t.errors.propertyName,n.message=t.errors.message,a.errors.push(n)),e.setState({formState:a})}}))}},{key:"renderStuffingDocument",value:function(){var e=this;if(Array.isArray(this.state.stuffingDocumentList)&&this.state.stuffingDocumentList.length>0)return this.state.stuffingDocumentList.map((function(t){return t.StuffingDocument.length>0?r.a.createElement(be.a,{item:!0,container:!0,xs:12},r.a.createElement(bn,{label:t.Name,style:{width:"100%",padding:"10px"}},r.a.createElement(be.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center",wrap:"wrap"},t.StuffingDocument.length>0?t.StuffingDocument.map((function(t){return r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:3,lg:3},r.a.createElement(jt.a,null,r.a.createElement(zs.a,{action:r.a.createElement(bt.a,{"aria-label":"close",onClick:function(a){e.removeImage(t.Name)}},r.a.createElement(Vt.a,null)),title:t.Name}),r.a.createElement(Ys.a,{onClick:function(a){e.openCamera(t.Name,"fixed")}},r.a.createElement(Ks.a,{style:{height:250,backgroundSize:"cover"},image:""===e.state.stuffingUploadDocument[t.Name]||void 0===e.state.stuffingUploadDocument[t.Name]?ti.a:e.state.stuffingUploadDocument[t.Name],title:t.Name}))))})):""))):""}))}},{key:"openCamera",value:function(e,t){if("dynamic"===t)if(void 0===e||null===e)this.setState({openCamera:!0});else{var a={img:this.state.otherImgData[e].ImageData,propertyName:this.state.otherImgData[e].Description};this.setState({modalState:!0,imageContent:a,actionType:"dynamic"})}else if("fixed"===t)if(""===this.state.data[e]||void 0===this.state.data[e])this.setState({openCamera:!0,currentActionName:e,actionType:"fixed"});else{var n={img:this.state.data[e],propertyName:e};this.setState({modalState:!0,imageContent:n,actionType:"fixed"})}}},{key:"closeCamera",value:function(){this.setState({openCamera:!1})}},{key:"closeModal",value:function(){this.setState({modalState:!1})}},{key:"onHandelChange",value:function(e,t){var a=this,n=Object(me.a)({},this.state.data);n[t]=e,"ShippingInstruction"===t&&"object"===typeof e&&""!==e?this.setState({data:n,formState:{valid:!0,errors:[]}},(function(){a.initShipping(),a.initContainer()})):this.setState({data:n,formState:{valid:!0,errors:[]}})}},{key:"handelChange",value:function(e,t){"fixed"===this.state.actionType?this.onImgSave(e,t):"dynamic"===this.state.actionType&&this.imgFormOnChange(e,"ImageData")}},{key:"removeImage",value:function(e){var t=Object(me.a)({},this.state.data);t[e]="",this.setState({data:t})}},{key:"imgFormOnChange",value:function(e,t){var a=Object(me.a)({},this.state.currentImgData),n=Object(me.a)({},this.state.formState);void 0!==e&&null!==e&&""!==e?(a[t]=e,n.valid=!0,this.setState({currentImgData:a,formState:n})):(n.valid=!1,this.setState({formState:n}))}},{key:"renderImageData",value:function(){var e=this;return this.state.otherImgData.map((function(t,a){return r.a.createElement(be.a,{key:a,item:!0,style:{padding:10},xs:12,sm:6,md:3,lg:3},r.a.createElement(jt.a,null,r.a.createElement(zs.a,{action:r.a.createElement(bt.a,{"aria-label":"close",onClick:function(a){e.removeImage(t)}},r.a.createElement(Vt.a,null)),title:t.Description}),r.a.createElement(Ys.a,{onClick:function(t){e.openCamera(a,"dynamic")}},r.a.createElement(Ks.a,{style:{height:250,backgroundSize:"cover"},image:t.ImageData,title:t.Description}))))}))}},{key:"cancel",value:function(){}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{container:!0},r.a.createElement(Ae.a,{fullScreen:!0,open:this.state.formOpen,onClose:this.closeForm,TransitionComponent:this.Transition},r.a.createElement(w.a,{className:"appBar"},r.a.createElement(F.a,null,r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:this.closeForm,"aria-label":"close"},r.a.createElement(Vt.a,null)),r.a.createElement(x.a,{variant:"h6",className:"app-title"},"Stuffing Barge"),r.a.createElement(he.a,{color:"inherit",disabled:this.state.disabled,onClick:this.save},"save"))),r.a.createElement(_e.a,null,r.a.createElement("div",{className:"form-container"},r.a.createElement(be.a,{container:!0},r.a.createElement(be.a,{item:!0,container:!0,xs:12},r.a.createElement(be.a,{container:!0,direction:"row",justify:"flex-start",wrap:"wrap"},r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:6,lg:6},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"Shipping_Type",label:"Shipping Type",error:!this.state.formControls.ShippingType.valid,helperText:this.state.formControls.ShippingType.message,defaultValue:"Container",className:"",onChange:function(t){return e.onHandelChange(t.target.value,"ShippingType")},disabled:!0,margin:"dense"}))),r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:6,lg:6},r.a.createElement(Hr,{selectedValue:this.state.data.Factory,handleChange:function(t){return e.onHandelChange(t,"Factory")},propertyName:"Factory",formControl:this.state.formControls.Factory})),r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:6,lg:6},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Da.b,{style:{width:"100%"},margin:"dense",id:"date-picker-dialog",label:"Date",format:"dd-MMM-yyyy",value:void 0===this.state.data.StuffingDate?Date.now():this.state.data.StuffingDate,onChange:function(t){return e.onHandelChange(t,"StuffingDate")},KeyboardButtonProps:{"aria-label":"Date"}})))),r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:6,lg:6},r.a.createElement(di,{for:"Shipping",selectedFactory:this.state.data.Factory._id,formControl:this.state.formControls.SI,selectedValue:this.state.data.ShippingInstruction,handleChange:function(t){return e.onHandelChange(t,"ShippingInstruction")},required:!1,propertyName:"ShippingInstruction"})),r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:6,lg:6},r.a.createElement(yi,{selectedValue:this.state.data.Shipping,data:this.state.shippingList,displayName:"Sequence Number",columns:["SequenceNumber"],propertyName:"Shipping",required:!0,handleChange:this.onHandelChange})),r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:6,lg:6},r.a.createElement(yi,{selectedValue:this.state.data.ContainerDetail,data:this.state.containerList,displayName:"Container#",columns:["Container"],propertyName:"ContainerDetail",required:!0,handleChange:this.onHandelChange})),r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:6,lg:6},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{id:"QuantityUnit",label:"Quantity (Unit)",customInput:ge.a,value:this.state.data.QuantityUnit,onValueChange:function(t){return e.onHandelChange(t.floatValue,"QuantityUnit")},onFocus:function(e){e.target.select()},decimalScale:2,fixedDecimalScale:!0}))),r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:6,lg:6},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"Barge_ID",label:"Barge ID",defaultValue:this.state.data.BargeID,className:"",onChange:function(t){return e.onHandelChange(t.target.value,"BargeID")},margin:"dense"}))),r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:6,lg:6},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"Driver",label:"Driver",defaultValue:this.state.data.Driver,className:"",onChange:function(t){return e.onHandelChange(t.target.value,"Driver")},margin:"dense"}))),r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:6,lg:6},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"Supervisor",label:"Supervisor",defaultValue:this.state.data.Supervisor,className:"",onChange:function(t){return e.onHandelChange(t.target.value,"Supervisor")},margin:"dense"}))))),r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12},this.state.formState.errors.length>0?this.state.formState.errors.map((function(e){return r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12},r.a.createElement(x.a,{variant:"overline",color:"secondary"},e.Message))})):""),this.renderStuffingDocument(),this.state.otherImgData.length>0?r.a.createElement(be.a,{item:!0,container:!0,xs:12},r.a.createElement(bn,{label:"Others",style:{width:"100%",padding:"10px"}},r.a.createElement(be.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",wrap:"wrap"},0===this.state.otherImgData.length?r.a.createElement("h5",null,"No Data"):"",this.renderImageData()))):"",r.a.createElement(Ae.a,{fullScreen:!0,open:this.state.openCamera,onClose:this.closeCamera,TransitionComponent:this.Transition},this.state.openCamera?r.a.createElement($s,{closeCamera:this.closeCamera,handelChange:this.handelChange,actionFor:this.state.currentActionName}):""),r.a.createElement(oi,{modalState:this.state.modalState,contents:this.state.imageContent,closeModal:this.closeModal}),r.a.createElement("div",{className:"floating-btn-container"},r.a.createElement(fo.a,{color:"primary","aria-label":"add",onClick:this.openImageForm},r.a.createElement(wt.a,null))),r.a.createElement(Ae.a,{open:this.state.openImageForm,onClose:this.closeImageForm,"aria-labelledby":"Add Image"},r.a.createElement(Re.a,{id:"dialog-title"},"Add Image"),r.a.createElement(_e.a,null,r.a.createElement(be.a,{container:!0,direction:"column",justify:"flex-start",wrap:"wrap",style:{minWidth:450}},r.a.createElement(be.a,{item:!0,style:{padding:4}},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"Description",label:"Description",error:!this.state.formState,helperText:"Image Description cannot be empty.",defaultValue:"",className:"",onChange:function(t){return e.imgFormOnChange(t.target.value,"Description")},margin:"dense"}))),r.a.createElement(be.a,{item:!0,style:{padding:10}},r.a.createElement(jt.a,null,r.a.createElement(Ys.a,{onClick:function(t){e.openCamera(null,"dynamic")}},r.a.createElement(Ks.a,{style:{height:250,backgroundSize:"cover"},image:void 0===this.state.currentImgData.ImageData?ti.a:this.state.currentImgData.ImageData})))))),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.onImgCancel,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:function(t){return e.onImgSave(null,null,"dynamic")},color:"primary"},"Save"))))))))}}]),t}(r.a.Component),Hk=a(23),Qk=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).snackOpen=function(e,t){var n;return l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0===e||null===e||void 0===t||null===t){r.next=7;break}return r.next=3,l.a.awrap(ka(e,t));case 3:n=r.sent,a.setState({snackOpen:!a.state.snackOpen,alertMessage:n,alertClass:e}),r.next=8;break;case 7:a.setState({snackOpen:!1});case 8:case"end":return r.stop()}}))},a.dialogOpen=function(e){var t;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,l.a.awrap(ka("confirmation","delete"));case 2:t=n.sent,a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:e,dialogMessage:r.a.createElement("span",null,void 0!==t?t.replace("[Name]",e.Factory.FctyName):"")});case 4:case"end":return n.stop()}}))},a.diaLogClose=function(){a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:null})},a.onDelete=function(){null!==a.state.currentDeleteData&&Uk.delete("".concat(a.state.currentDeleteData._id)).then((function(e){if(!0===e.code){var t=Object(je.a)(a.state.data),n=t.indexOf(a.state.currentDeleteData);t.splice(n,1),a.setState({data:t,currentDeleteData:"",dialogOpen:!a.state.dialogOpen},(function(){return a.snackOpen("success","delete")}))}else a.snackOpen("error","server")}))},a.state={columns:[{title:"Factory",field:"Factory",render:function(e){return r.a.createElement("span",null,e.Factory.FctyName)}},{title:"Date",field:"Date",render:function(e){return r.a.createElement("span",null,new Date(e.Date).toLocaleDateString())}},{title:"SI#",field:"ShippingInstruction",render:function(e){return r.a.createElement("span",null,e.ShippingInstruction.SINo)}},{title:"Sequence#",field:"Sequence",render:function(e){return r.a.createElement("span",null,e.Shipping.SequenceNumber)}},{title:"Barge#",field:"BargeDetail",render:function(e){return r.a.createElement("span",null,void 0===e.BargeDetail?0:e.BargeDetail.Barge)}},{title:"QuantityUnit #",field:"QuantityUnit",render:function(e){return r.a.createElement("span",null,void 0===e.QuantityUnit?0:e.QuantityUnit)}},{title:"BargeID",field:"BargeID"},{title:"Driver",field:"Driver"},{title:"Supervisor",field:"Supervisor"},{title:"Operator",field:"LastUpdatedBy",editable:"never"},{title:"Last Updated",field:"LastUpdatedAt",render:function(e){return r.a.createElement("span",null,void 0===e?"":new Date(e.LastUpdatedAt).toLocaleDateString())},editable:"never"}],data:[],formData:null,currentDeleteData:null,formOpen:!1,formAction:"",dialogOpen:!1,snackOpen:!1,alertMessage:"",dialogMessage:"",alertClass:""},a.stuffingBargeModel=Hk(Lk),a.onSuccess=a.onSuccess.bind(Object(Pe.a)(a)),a.closeForm=a.closeForm.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initstuffingBarge()}},{key:"initstuffingBarge",value:function(){var e=this;Uk.getOneStuffingBarge("").then((function(t){!0===t.code&&e.setState({data:t.data})}))}},{key:"openForm",value:function(e){var t,a,n;return l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(t=e,a=!this.state.formOpen,void 0!==t&&null!==t){r.next=8;break}t=this.stuffingBargeModel,n="Add",a=!0,r.next=11;break;case 8:return n="Update",r.next=11,l.a.awrap(Uk.getOneStuffingBarge("ImageUpload/".concat(t._id)).then((function(e){!0===e.code?(t=e.data,a=!0):a=!1})));case 11:this.setState({formData:t,formOpen:a,formAction:n});case 12:case"end":return r.stop()}}),null,this)}},{key:"closeForm",value:function(){this.setState({formData:null,formOpen:!1,formAction:""})}},{key:"onSuccess",value:function(e){var t=this,a=Object(je.a)(this.state.data);if(void 0!==e&&null!==e)if("Add"===this.state.formAction)a.push(e),this.setState({data:a,formOpen:!this.state.formOpen,formAction:"",currentRowData:null},(function(){return t.snackOpen("success","add")}));else{var n=a.indexOf(this.state.formData);a[n]=e,this.setState({data:a,formOpen:!this.state.formOpen,formAction:"",currentRowData:null},(function(){return t.snackOpen("success","update")}))}else this.snackOpen("error","server")}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{Barge:!0,direction:"column",justify:"center",wrap:"wrap",style:{margin:"20px 20px 10px 0px"}},r.a.createElement(be.a,{item:!0,xs:12},r.a.createElement(Ve.a,{title:"Stuffing Barge",columns:this.state.columns,data:this.state.data,components:{Toolbar:function(t){return r.a.createElement("div",null,r.a.createElement(Le.MTableToolbar,t),r.a.createElement("div",{style:{padding:"0px 15px"}},r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:function(){return e.openForm(t.rowData)},"aria-label":"add"},r.a.createElement(wt.a,null))))}},actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.data,columns:e.state.columns,fileName:"stuffingBarge"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.initstuffingBarge()}},{icon:"edit",tooltip:"Edit User",onClick:function(t,a){return e.openForm(a)}},{icon:"delete",tooltip:"Delete User",onClick:function(t,a){return e.dialogOpen(a)}}],icons:{Clear:function(t){return r.a.createElement(Nt.a,{onClick:function(){e.initFormControl()},style:{padding:0,margin:0}})}},options:{}})),r.a.createElement(be.a,{item:!0,xs:12},this.state.formOpen?r.a.createElement(Wk,{formAction:this.state.formAction,formData:this.state.formData,formOpen:this.state.formOpen,onSuccess:this.onSuccess,closeForm:this.closeForm}):""),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:600,open:this.state.snackOpen,onClose:this.snackOpen,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.diaLogClose,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.diaLogClose,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDelete,color:"primary"},"Delete"))))}}]),t}(r.a.Component),zk=(a(1011),{properties:{Factory:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Factory cannot be empty.",conform:"Factory cannot be empty.",required:"Factory cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},Period:{description:"",type:"any",required:!0,allowEmpty:!1,messages:{allowEmpty:"Period cannot be empty.",conform:"Period cannot be empty.",required:"Period cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},Absence_DaysSchedWork_EM:{type:"number",exclusiveMinimum:0,messages:{exclusiveMinimum:"Total Days Scheduled to Work Employees - Male cannot be empty"}},Absence_DaysSchedWork_EF:{type:"number",exclusiveMinimum:0,messages:{exclusiveMinimum:"Total Days Scheduled to Work Employees - Female cannot be empty"}},CreatedAt:{type:"any",default:Date.now()},CreatedBy:{type:"string",default:""},LastUpdatedAt:{type:"any",default:Date.now()},LastUpdatedBy:{type:"string",default:""}}}),Yk=a(24),Kk={validateFields:function(e){return Yk.validate(e,zk,{cast:!0})},get:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="ehsMetrics/"+e,a.abrupt("return",We(t).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},getFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("ehsMetrics-filter/").concat(e),a.abrupt("return",We(t).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},getOne:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("ehsMetrics/").concat(e),a.abrupt("return",We(t).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},update:function(e,t){return Qe("ehsMetrics/"+e,t).then((function(e){return console.log(e),200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Updated",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="ehsMetrics/"+e,n.abrupt("return",He(a,t).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Added",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,formValid:!0,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("ehsMetrics/"+e).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))}},Jk={Factory:"",Period:new Date,NumbOfEmployee_EM:0,NumbOfEmployee_EF:0,NumbOfEmployee_UM:0,NumbOfEmployee_UF:0,Safety_NumbOfOccupationalInj_EM:0,Safety_NumbOfOccupationalInj_EF:0,Safety_NumbOfOccupationalInj_UM:0,Safety_NumbOfOccupationalInj_UF:0,Safety_NumbOfOccupationalInj_Desc:"",Safety_NumbOfOccupationalLostDays_EM:0,Safety_NumbOfOccupationalLostDays_EF:0,Safety_NumbOfOccupationalLostDays_UM:0,Safety_NumbOfOccupationalLostDays_UF:0,Safety_NumbOfOccupationalLostDays_Desc:"",Safety_TotalHourWork_EM:0,Safety_TotalHourWork_EF:0,Safety_TotalHourWork_UM:0,Safety_TotalHourWork_UF:0,Safety_TotalLostWorkDays_EM:0,Safety_TotalLostWorkDays_EF:0,Safety_TotalLostWorkDays_UM:0,Safety_TotalLostWorkDays_UF:0,Safety_GovInspection_EM:0,Safety_GovInspection_Desc:"",Safety_NumbOfIncidentWithFines_EM:0,Safety_NumbOfIncidentWithFines_Desc:"",Safety_Fines_EM:0,Safety_Fines_Desc:"",Safety_Notice_EM:0,Safety_Notice_Desc:"",Vehicle_Accident_EM:0,Vehicle_Accident_EF:0,Vehicle_Accident_UM:0,Vehicle_Accident_UF:0,Vehicle_Accident_Desc:"",Vehicle_InjureAccident_EM:0,Vehicle_InjureAccident_EF:0,Vehicle_InjureAccident_UM:0,Vehicle_InjureAccident_UF:0,Vehicle_InjureAccident_Desc:"",Health_Vector_Bourne_EM:0,Health_Vector_Bourne_EF:0,Health_Vector_Bourne_UM:0,Health_Vector_Bourne_UF:0,Health_Vector_Bourne_Desc:"",Health_NonOccupational_Disease_EM:0,Health_NonOccupational_Disease_EF:0,Health_NonOccupational_Disease_UM:0,Health_NonOccupational_Disease_UF:0,Health_NonOccupational_Disease_Desc:"",Health_Occupational_Illness_EM:0,Health_Occupational_Illness_EF:0,Health_Occupational_Illness_UM:0,Health_Occupational_Illness_UF:0,Health_Occupational_Illness_Desc:"",Health_TotalLostWorkDays_EM:0,Health_TotalLostWorkDays_EF:0,Health_TotalLostWorkDays_UM:0,Health_TotalLostWorkDays_UF:0,Env_SpillReleased:0,Env_SpillReleased_Desc:"",Env_AirExceedance:0,Env_AirExceedance_Desc:"",Env_WasteWaterExceedance:0,Env_WasteWaterExceedance_Desc:"",Env_NoticeOfViolation:0,Env_NoticeOfViolation_Desc:"",Env_GovInspection:0,Env_GovInspection_Desc:"",Env_NumbOfIncidentWithFines:0,Env_NumbOfIncidentWithFines_Desc:"",Env_Fines:0,Env_Fines_Desc:"",Absence_DaysSchedWork_EM:0,Absence_DaysSchedWork_EF:0,Absence_DaysSchedWork_UM:0,Absence_DaysSchedWork_UF:0,Absence_DaysSchedWork_Desc:"",Absence_DaysAbsenceWork_EM:0,Absence_DaysAbsenceWork_EF:0,Absence_DaysAbsenceWork_UM:0,Absence_DaysAbsenceWork_UF:0,Absence_DaysAbsenceWork_Desc:""},Zk=(a(1012),a(23)),Xk=(Object(n.forwardRef)((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),{Factory:{valid:!0,message:""},Period:{valid:!0,message:""},NumbOfEmployee_EM:{valid:!0,message:""},NumbOfEmployee_EF:{valid:!0,message:""},NumbOfEmployee_UM:{valid:!0,message:""},NumbOfEmployee_UF:{valid:!0,message:""},Safety_NumbOfOccupationalInj_EM:{valid:!0,message:""},Safety_NumbOfOccupationalInj_EF:{valid:!0,message:""},Safety_NumbOfOccupationalInj_UM:{valid:!0,message:""},Safety_NumbOfOccupationalInj_UF:{valid:!0,message:""},Safety_NumbOfOccupationalInj_Desc:{valid:!0,message:""},Safety_NumbOfOccupationalLostDays_EM:{valid:!0,message:""},Safety_NumbOfOccupationalLostDays_EF:{valid:!0,message:""},Safety_NumbOfOccupationalLostDays_UM:{valid:!0,message:""},Safety_NumbOfOccupationalLostDays_UF:{valid:!0,message:""},Safety_NumbOfOccupationalLostDays_Desc:{valid:!0,message:""},Safety_TotalHourWork_EM:{valid:!0,message:""},Safety_TotalHourWork_EF:{valid:!0,message:""},Safety_TotalHourWork_UM:{valid:!0,message:""},Safety_TotalHourWork_UF:{valid:!0,message:""},Safety_TotalLostWorkDays_EM:{valid:!0,message:""},Safety_TotalLostWorkDays_EF:{valid:!0,message:""},Safety_TotalLostWorkDays_UM:{valid:!0,message:""},Safety_TotalLostWorkDays_UF:{valid:!0,message:""},Safety_GovInspection_EM:{valid:!0,message:""},Safety_GovInspection_Desc:{valid:!0,message:""},Safety_NumbOfIncidentWithFines_EM:{valid:!0,message:""},Safety_NumbOfIncidentWithFines_Desc:{valid:!0,message:""},Safety_Fines_EM:{valid:!0,message:""},Safety_Fines_Desc:{valid:!0,message:""},Safety_Notice_EM:{valid:!0,message:""},Safety_Notice_Desc:{valid:!0,message:""},Vehicle_Accident_EM:{valid:!0,message:""},Vehicle_Accident_EF:{valid:!0,message:""},Vehicle_Accident_UM:{valid:!0,message:""},Vehicle_Accident_UF:{valid:!0,message:""},Vehicle_Accident_Desc:{valid:!0,message:""},Vehicle_InjureAccident_EM:{valid:!0,message:""},Vehicle_InjureAccident_EF:{valid:!0,message:""},Vehicle_InjureAccident_UM:{valid:!0,message:""},Vehicle_InjureAccident_UF:{valid:!0,message:""},Vehicle_InjureAccident_Desc:{valid:!0,message:""},Health_Vector_Bourne_EM:{valid:!0,message:""},Health_Vector_Bourne_EF:{valid:!0,message:""},Health_Vector_Bourne_UM:{valid:!0,message:""},Health_Vector_Bourne_UF:{valid:!0,message:""},Health_Vector_Bourne_Desc:{valid:!0,message:""},Health_NonOccupational_Disease_EM:{valid:!0,message:""},Health_NonOccupational_Disease_EF:{valid:!0,message:""},Health_NonOccupational_Disease_UM:{valid:!0,message:""},Health_NonOccupational_Disease_UF:{valid:!0,message:""},Health_NonOccupational_Disease_Desc:{valid:!0,message:""},Health_Occupational_Illness_EM:{valid:!0,message:""},Health_Occupational_Illness_EF:{valid:!0,message:""},Health_Occupational_Illness_UM:{valid:!0,message:""},Health_Occupational_Illness_UF:{valid:!0,message:""},Health_Occupational_Illness_Desc:{valid:!0,message:""},Health_TotalLostWorkDays_EM:{valid:!0,message:""},Health_TotalLostWorkDays_EF:{valid:!0,message:""},Health_TotalLostWorkDays_UM:{valid:!0,message:""},Health_TotalLostWorkDays_UF:{valid:!0,message:""},Env_SpillReleased:{valid:!0,message:""},Env_SpillReleased_Desc:{valid:!0,message:""},Env_AirExceedance:{valid:!0,message:""},Env_AirExceedance_Desc:{valid:!0,message:""},Env_WasteWaterExceedance:{valid:!0,message:""},Env_WasteWaterExceedance_Desc:{valid:!0,message:""},Env_NoticeOfViolation:{valid:!0,message:""},Env_NoticeOfViolation_Desc:{valid:!0,message:""},Env_GovInspection:{valid:!0,message:""},Env_GovInspection_Desc:{valid:!0,message:""},Env_NumbOfIncidentWithFines:{valid:!0,message:""},Env_NumbOfIncidentWithFines_Desc:{valid:!0,message:""},Env_Fines:{valid:!0,message:""},Env_Fines_Desc:{valid:!0,message:""},Absence_DaysSchedWork_EM:{valid:!0,message:""},Absence_DaysSchedWork_EF:{valid:!0,message:""},Absence_DaysSchedWork_UM:{valid:!0,message:""},Absence_DaysSchedWork_UF:{valid:!0,message:""},Absence_DaysSchedWork_Desc:{valid:!0,message:""},Absence_DaysAbsenceWork_EM:{valid:!0,message:""},Absence_DaysAbsenceWork_EF:{valid:!0,message:""},Absence_DaysAbsenceWork_UM:{valid:!0,message:""},Absence_DaysAbsenceWork_UF:{valid:!0,message:""},Absence_DaysAbsenceWork_Desc:{valid:!0,message:""}}),$k=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).closeForm=function(){a.setState({formControl:Zk(Xk)},(function(){return a.props.closeForm()}))},a.snackOpen=function(e,t,n){var r;return l.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(void 0===e||null===e||void 0===t||null===t){o.next=11;break}if(void 0!==n){o.next=7;break}return o.next=4,l.a.awrap(ka(e,t));case 4:r=o.sent,o.next=8;break;case 7:r=n;case 8:a.setState({snackOpen:!a.state.snackOpen,snackMessage:r,snackClass:e}),o.next=12;break;case 11:a.setState({snackOpen:!1});case 12:case"end":return o.stop()}}))},a.onSave=function(){var e=Object(me.a)({},a.state.formData),t=Object(me.a)({},a.state.formControl),n=Kk.validateFields(e);n.valid?"Add"===a.props.formAction?Kk.add("",e).then((function(e){!0===e.code?a.props.onSuccess(e.data):null!==e.errors&&Array.isArray(e.errors)?(e.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t}),a.snackOpen("error","alertValidation")):a.snackOpen("error","server")})):Kk.update("",e).then((function(e){!0===e.code?a.props.onSuccess(e.data):null!==e.errors&&Array.isArray(e.errors)?(e.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t}),a.snackOpen("error","alertValidation")):a.snackOpen("error","server")})):(n.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t}),a.snackOpen("error","alertValidation"))},a.state={formData:a.props.formData,formOpen:a.props.formOpen,formControl:Zk(Xk),disabled:!1,snackOpen:!1,snackMessage:{valid:!0,message:""},snackClass:""},a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"handleChange",value:function(e,t,a){var n=Object(me.a)({},this.state.formData),r=Object(me.a)({},this.state.formControl);!a&&"Factory"!==t||void 0!==e&&""!==e?(r[t].valid=!0,r[t].message=""):(r[t].valid=!1,r[t].message="".concat(t," cannot be empty.")),n[t]=e,this.setState({formData:n})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(Ae.a,{fullScreen:!0,open:this.state.formOpen,onClose:this.closeForm,TransitionComponent:this.Transition},r.a.createElement(w.a,{className:"appBar"},r.a.createElement(F.a,null,r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:this.closeForm,"aria-label":"close"},r.a.createElement(Vt.a,null)),r.a.createElement(x.a,{variant:"h6",className:"app-title"},"Monthly EHS Metrics"),r.a.createElement(he.a,{color:"inherit",disabled:this.state.disabled,onClick:this.onSave},"save"))),r.a.createElement(_e.a,null,r.a.createElement("div",{className:"form-container"},r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-evenly",alignItems:"center",md:6,xs:12,sm:12,xl:8,lg:8},r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Hr,{selectedValue:this.state.formData.Factory,propertyName:"Factory",handleChange:this.handleChange,formControl:this.state.formControl.Factory})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Da.a,{required:!0,format:"MMM-yyyy",label:"Period",value:this.state.formData.Period,onChange:function(t){e.handleChange(t,"Period")},views:["year","month"]})),r.a.createElement(Sa.a,{error:!this.state.formControl.Period.valid,style:{display:this.state.formControl.Period.valid?"none":""}},this.state.formControl.Period.message)))),r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-evenly",alignItems:"center",md:10,xs:12,sm:12,xl:10,lg:10},r.a.createElement(be.a,{style:{marginTop:10,width:"100%"}},r.a.createElement(bn,{label:"Staffing",style:{width:"100%"}},r.a.createElement(be.a,{style:{marginTop:20}},r.a.createElement(bn,{label:"Approximate Number of Employees / Workers (by Month)",style:{width:"100%"}},r.a.createElement(be.a,{container:!0,direction:"row",justify:"space-around",alignItems:"flex-start",spacing:2,style:{marginTop:5}},r.a.createElement(be.a,{item:!0,xs:2},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Male Employees",defaultValue:this.state.formData.NumbOfEmployee_EM,onValueChange:function(t){e.handleChange(void 0===t.floatValue?0:t.floatValue,"NumbOfEmployee_EM",!1)},onFocus:function(e){e.target.select()}}))),r.a.createElement(be.a,{item:!0,xs:2},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Female Employees",defaultValue:this.state.formData.NumbOfEmployee_EF,onValueChange:function(t){e.handleChange(void 0===t.floatValue?0:t.floatValue,"NumbOfEmployee_EF",!1)},onFocus:function(e){e.target.select()}}))),r.a.createElement(be.a,{item:!0,xs:2},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Male Non-Employees",defaultValue:this.state.formData.NumbOfEmployee_UM,onValueChange:function(t){e.handleChange(void 0===t.floatValue?0:t.floatValue,"NumbOfEmployee_UM",!1)},onFocus:function(e){e.target.select()}}))),r.a.createElement(be.a,{item:!0,xs:2},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Female Non-Employees",defaultValue:this.state.formData.NumbOfEmployee_UF,onValueChange:function(t){e.handleChange(void 0===t.floatValue?0:t.floatValue,"NumbOfEmployee_UF",!1)},onFocus:function(e){e.target.select()}}))),r.a.createElement(be.a,{item:!0,xs:4})))))),r.a.createElement(be.a,{style:{marginTop:10,width:"100%"}},r.a.createElement(bn,{label:"SAFETY REPORTING",style:{width:"100%"}},r.a.createElement(be.a,{style:{marginTop:20}},r.a.createElement(bn,{label:"B1. Number of Occupational Injuries",style:{width:"100%"}},r.a.createElement(be.a,{container:!0,direction:"row",justify:"space-around",alignItems:"flex-start",spacing:2,style:{marginTop:5}},r.a.createElement(be.a,{item:!0,xs:2},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Male Employees",defaultValue:this.state.formData.Safety_NumbOfOccupationalInj_EM,onValueChange:function(t){e.handleChange(void 0===t.floatValue?0:t.floatValue,"Safety_NumbOfOccupationalInj_EM",!1)},onFocus:function(e){e.target.select()}}))),r.a.createElement(be.a,{item:!0,xs:2},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Female Employees",defaultValue:this.state.formData.Safety_NumbOfOccupationalInj_EF,onValueChange:function(t){e.handleChange(void 0===t.floatValue?0:t.floatValue,"Safety_NumbOfOccupationalInj_EF",!1)},onFocus:function(e){e.target.select()}}))),r.a.createElement(be.a,{item:!0,xs:2},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Male Non-Employees",defaultValue:this.state.formData.Safety_NumbOfOccupationalInj_UM,onValueChange:function(t){e.handleChange(void 0===t.floatValue?0:t.floatValue,"Safety_NumbOfOccupationalInj_UM",!1)},onFocus:function(e){e.target.select()}}))),r.a.createElement(be.a,{item:!0,xs:2},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Female Non-Employees",defaultValue:this.state.formData.Safety_NumbOfOccupationalInj_UF,onValueChange:function(t){e.handleChange(void 0===t.floatValue?0:t.floatValue,"Safety_NumbOfOccupationalInj_UF",!1)},onFocus:function(e){e.target.select()}}))),r.a.createElement(be.a,{item:!0,xs:4},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{label:"Description",defaultValue:this.state.formData.Safety_NumbOfOccupationalInj_Desc,onChange:function(t){e.handleChange(t.target.value,"Safety_NumbOfOccupationalInj_Desc",!1)}})))))),r.a.createElement(be.a,{style:{marginTop:10}},r.a.createElement(bn,{label:"B2. Number of Occupational Injuries resulting in lost work days",style:{width:"100%"}},r.a.createElement(be.a,{container:!0,direction:"row",justify:"space-around",alignItems:"flex-start",spacing:2,style:{marginTop:5}},r.a.createElement(be.a,{item:!0,xs:2},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Male Employees",defaultValue:this.state.formData.Safety_NumbOfOccupationalLostDays_EM,onValueChange:function(t){e.handleChange(void 0===t.floatValue?0:t.floatValue,"Safety_NumbOfOccupationalLostDays_EM",!1)},onFocus:function(e){e.target.select()}}))),r.a.createElement(be.a,{item:!0,xs:2},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Female Employees",defaultValue:this.state.formData.Safety_NumbOfOccupationalLostDays_EF,onValueChange:function(t){e.handleChange(void 0===t.floatValue?0:t.floatValue,"Safety_NumbOfOccupationalLostDays_EF",!1)},onFocus:function(e){e.target.select()}}))),r.a.createElement(be.a,{item:!0,xs:2},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Male Non-Employees",defaultValue:this.state.formData.Safety_NumbOfOccupationalLostDays_UM,onValueChange:function(t){e.handleChange(void 0===t.floatValue?0:t.floatValue,"Safety_NumbOfOccupationalLostDays_UM",!1)},onFocus:function(e){e.target.select()}}))),r.a.createElement(be.a,{item:!0,xs:2},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Female Non-Employees",defaultValue:this.state.formData.Safety_NumbOfOccupationalLostDays_UF,onValueChange:function(t){e.handleChange(void 0===t.floatValue?0:t.floatValue,"Safety_NumbOfOccupationalLostDays_UF",!1)},onFocus:function(e){e.target.select()}}))),r.a.createElement(be.a,{item:!0,xs:4},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{label:"Description",defaultValue:this.state.formData.Safety_NumbOfOccupationalLostDays_Desc,onChange:function(t){e.handleChange(t.target.value,"Safety_NumbOfOccupationalLostDays_Desc",!1)}})))))),r.a.createElement(be.a,{style:{marginTop:10}},r.a.createElement(bn,{label:"B3. Number of hours worked",style:{width:"100%"}},r.a.createElement(be.a,{container:!0,direction:"row",justify:"space-around",alignItems:"flex-start",spacing:2,style:{marginTop:5}},r.a.createElement(be.a,{item:!0,xs:2},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Male Employees",defaultValue:this.state.formData.Safety_TotalHourWork_EM,onValueChange:function(t){e.handleChange(void 0===t.floatValue?0:t.floatValue,"Safety_TotalHourWork_EM",!1)},onFocus:function(e){e.target.select()}}))),r.a.createElement(be.a,{item:!0,xs:2},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Female Employees",defaultValue:this.state.formData.Safety_TotalHourWork_EF,onValueChange:function(t){e.handleChange(void 0===t.floatValue?0:t.floatValue,"Safety_TotalHourWork_EF",!1)},onFocus:function(e){e.target.select()}}))),r.a.createElement(be.a,{item:!0,xs:2},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Male Non-Employees",defaultValue:this.state.formData.Safety_TotalHourWork_UM,onValueChange:function(t){e.handleChange(void 0===t.floatValue?0:t.floatValue,"Safety_TotalHourWork_UM",!1)},onFocus:function(e){e.target.select()}}))),r.a.createElement(be.a,{item:!0,xs:2},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Female Non-Employees",defaultValue:this.state.formData.Safety_TotalHourWork_UF,onValueChange:function(t){e.handleChange(void 0===t.floatValue?0:t.floatValue,"Safety_TotalHourWork_UF",!1)},onFocus:function(e){e.target.select()}}))),r.a.createElement(be.a,{item:!0,xs:4})))),r.a.createElement(be.a,{style:{marginTop:10}},r.a.createElement(bn,{label:"B4. Total Number of Lost Workdays from Occupational Injuries",style:{width:"100%"}},r.a.createElement(be.a,{container:!0,direction:"row",justify:"space-around",alignItems:"flex-start",spacing:2,style:{marginTop:5}},r.a.createElement(be.a,{item:!0,xs:2},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Male Employees",defaultValue:this.state.formData.Safety_TotalLostWorkDays_EM,onValueChange:function(t){e.handleChange(void 0===t.floatValue?0:t.floatValue,"Safety_TotalLostWorkDays_EM",!1)},onFocus:function(e){e.target.select()}}))),r.a.createElement(be.a,{item:!0,xs:2},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Female Employees",defaultValue:this.state.formData.Safety_TotalLostWorkDays_EF,onValueChange:function(t){e.handleChange(void 0===t.floatValue?0:t.floatValue,"Safety_TotalLostWorkDays_EF",!1)},onFocus:function(e){e.target.select()}}))),r.a.createElement(be.a,{item:!0,xs:2},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Male Non-Employees",defaultValue:this.state.formData.Safety_TotalLostWorkDays_UM,onValueChange:function(t){e.handleChange(void 0===t.floatValue?0:t.floatValue,"Safety_TotalLostWorkDays_UM",!1)},onFocus:function(e){e.target.select()}}))),r.a.createElement(be.a,{item:!0,xs:2},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Female Non-Employees",defaultValue:this.state.formData.Safety_TotalLostWorkDays_UF,onValueChange:function(t){e.handleChange(void 0===t.floatValue?0:t.floatValue,"Safety_TotalLostWorkDays_UF",!1)},onFocus:function(e){e.target.select()}}))),r.a.createElement(be.a,{item:!0,xs:4})))),r.a.createElement(be.a,{style:{marginTop:10}},r.a.createElement(bn,{label:"B6. Number of Government Agency Inspections",style:{width:"100%"}},r.a.createElement(be.a,{container:!0,direction:"row",justify:"space-around",alignItems:"flex-start",spacing:2,style:{marginTop:5}},r.a.createElement(be.a,{item:!0,xs:2},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Male Employees",defaultValue:this.state.formData.Safety_GovInspection_EM,onValueChange:function(t){e.handleChange(void 0===t.floatValue?0:t.floatValue,"Safety_GovInspection_EM",!1)},onFocus:function(e){e.target.select()}}))),r.a.createElement(be.a,{item:!0,xs:2}),r.a.createElement(be.a,{item:!0,xs:2}),r.a.createElement(be.a,{item:!0,xs:2}),r.a.createElement(be.a,{item:!0,xs:4},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{label:"Description",defaultValue:this.state.formData.Safety_GovInspection_Desc,onChange:function(t){e.handleChange(t.target.value,"Safety_GovInspection_Desc",!1)}})))))),r.a.createElement(be.a,{style:{marginTop:10}},r.a.createElement(bn,{label:"B7. Number of Incidents with Fines / Penalties (Safety-related)",style:{width:"100%"}},r.a.createElement(be.a,{container:!0,direction:"row",justify:"space-around",alignItems:"flex-start",spacing:2,style:{marginTop:5}},r.a.createElement(be.a,{item:!0,xs:2},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Male Employees",defaultValue:this.state.formData.Safety_NumbOfIncidentWithFines_EM,onValueChange:function(t){e.handleChange(void 0===t.floatValue?0:t.floatValue,"Safety_NumbOfIncidentWithFines_EM",!1)},onFocus:function(e){e.target.select()}}))),r.a.createElement(be.a,{item:!0,xs:2}),r.a.createElement(be.a,{item:!0,xs:2}),r.a.createElement(be.a,{item:!0,xs:2}),r.a.createElement(be.a,{item:!0,xs:4},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{label:"Description",defaultValue:this.state.formData.Safety_NumbOfIncidentWithFines_Desc,onChange:function(t){e.handleChange(t.target.value,"Safety_NumbOfIncidentWithFines_Desc",!1)}})))))),r.a.createElement(be.a,{style:{marginTop:10}},r.a.createElement(bn,{label:"B8. Fines / Penalties Paid (Safety-related) (USD)",style:{width:"100%"}},r.a.createElement(be.a,{container:!0,direction:"row",justify:"space-around",alignItems:"flex-start",spacing:2,style:{marginTop:5}},r.a.createElement(be.a,{item:!0,xs:2},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Male Employees",defaultValue:this.state.formData.Safety_Fines_EM,onValueChange:function(t){e.handleChange(void 0===t.floatValue?0:t.floatValue,"Safety_Fines_EM",!1)},onFocus:function(e){e.target.select()},fixedDecimalScale:!0,decimalScale:2}))),r.a.createElement(be.a,{item:!0,xs:2}),r.a.createElement(be.a,{item:!0,xs:2}),r.a.createElement(be.a,{item:!0,xs:2}),r.a.createElement(be.a,{item:!0,xs:4},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{label:"Description",defaultValue:this.state.formData.Safety_Fines_Desc,onChange:function(t){e.handleChange(t.target.value,"Safety_Fines_Desc",!1)}})))))),r.a.createElement(be.a,{style:{marginTop:10}},r.a.createElement(bn,{label:"B9. Number of Safety Notices of Violations (Internal & External)",style:{width:"100%"}},r.a.createElement(be.a,{container:!0,direction:"row",justify:"space-around",alignItems:"flex-start",spacing:2,style:{marginTop:5}},r.a.createElement(be.a,{item:!0,xs:2},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Male Employees",defaultValue:this.state.formData.Safety_Notice_EM,onValueChange:function(t){e.handleChange(void 0===t.floatValue?0:t.floatValue,"Safety_Notice_EM",!1)},onFocus:function(e){e.target.select()}}))),r.a.createElement(be.a,{item:!0,xs:2}),r.a.createElement(be.a,{item:!0,xs:2}),r.a.createElement(be.a,{item:!0,xs:2}),r.a.createElement(be.a,{item:!0,xs:4},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{label:"Description",defaultValue:this.state.formData.Safety_Notice_Desc,onChange:function(t){e.handleChange(t.target.value,"Safety_Notice_Desc",!1)}})))))))),r.a.createElement(be.a,{style:{marginTop:10,width:"100%"}},r.a.createElement(bn,{label:"MOTOR VEHICLE ACCIDENT REPORTING",style:{width:"100%"}},r.a.createElement(be.a,{style:{marginTop:20}},r.a.createElement(bn,{label:"C1. Number of Motor Vehicle Accidents",style:{width:"100%"}},r.a.createElement(be.a,{container:!0,direction:"row",justify:"space-around",alignItems:"flex-start",spacing:2,style:{marginTop:5}},r.a.createElement(be.a,{item:!0,xs:2},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Male Employees",defaultValue:this.state.formData.Vehicle_Accident_EM,onValueChange:function(t){e.handleChange(void 0===t.floatValue?0:t.floatValue,"Vehicle_Accident_EM",!1)},onFocus:function(e){e.target.select()}}))),r.a.createElement(be.a,{item:!0,xs:2},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Female Employees",defaultValue:this.state.formData.Vehicle_Accident_EF,onValueChange:function(t){e.handleChange(void 0===t.floatValue?0:t.floatValue,"Vehicle_Accident_EF",!1)},onFocus:function(e){e.target.select()}}))),r.a.createElement(be.a,{item:!0,xs:2},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Male Non-Employees",defaultValue:this.state.formData.Vehicle_Accident_UM,onValueChange:function(t){e.handleChange(void 0===t.floatValue?0:t.floatValue,"Vehicle_Accident_UM",!1)},onFocus:function(e){e.target.select()}}))),r.a.createElement(be.a,{item:!0,xs:2},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Female Non-Employees",defaultValue:this.state.formData.Vehicle_Accident_UF,onValueChange:function(t){e.handleChange(void 0===t.floatValue?0:t.floatValue,"Vehicle_Accident_UF",!1)},onFocus:function(e){e.target.select()}}))),r.a.createElement(be.a,{item:!0,xs:4},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{label:"Description",defaultValue:this.state.formData.Vehicle_Accident_Desc,onChange:function(t){e.handleChange(t.target.value,"Vehicle_Accident_Desc",!1)}})))))),r.a.createElement(be.a,{style:{marginTop:10}},r.a.createElement(bn,{label:"C2. Number of motor vehicle accident injuries",style:{width:"100%"}},r.a.createElement(be.a,{container:!0,direction:"row",justify:"space-around",alignItems:"flex-start",spacing:2,style:{marginTop:5}},r.a.createElement(be.a,{item:!0,xs:2},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Male Employees",defaultValue:this.state.formData.Vehicle_InjureAccident_EM,onValueChange:function(t){e.handleChange(void 0===t.floatValue?0:t.floatValue,"Vehicle_InjureAccident_EM",!1)},onFocus:function(e){e.target.select()}}))),r.a.createElement(be.a,{item:!0,xs:2},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Female Employees",defaultValue:this.state.formData.Vehicle_InjureAccident_EF,onValueChange:function(t){e.handleChange(void 0===t.floatValue?0:t.floatValue,"Vehicle_InjureAccident_EF",!1)},onFocus:function(e){e.target.select()}}))),r.a.createElement(be.a,{item:!0,xs:2},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Male Non-Employees",defaultValue:this.state.formData.Vehicle_InjureAccident_UM,onValueChange:function(t){e.handleChange(void 0===t.floatValue?0:t.floatValue,"Vehicle_InjureAccident_UM",!1)},onFocus:function(e){e.target.select()}}))),r.a.createElement(be.a,{item:!0,xs:2},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Female Non-Employees",defaultValue:this.state.formData.Vehicle_InjureAccident_UF,onValueChange:function(t){e.handleChange(void 0===t.floatValue?0:t.floatValue,"Vehicle_InjureAccident_UF",!1)},onFocus:function(e){e.target.select()}}))),r.a.createElement(be.a,{item:!0,xs:4},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{label:"Description",defaultValue:this.state.formData.Vehicle_InjureAccident_Desc,onChange:function(t){e.handleChange(t.target.value,"Vehicle_InjureAccident_Desc",!1)}})))))))),r.a.createElement(be.a,{style:{marginTop:10,width:"100%"}},r.a.createElement(bn,{label:"HEALTH REPORTING",style:{width:"100%"}},r.a.createElement(be.a,{style:{marginTop:20}},r.a.createElement(bn,{label:"E1. Number of vector bourne disease cases (Malaria, Dengue)",style:{width:"100%"}},r.a.createElement(be.a,{container:!0,direction:"row",justify:"space-around",alignItems:"flex-start",spacing:2,style:{marginTop:5}},r.a.createElement(be.a,{item:!0,xs:2},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Male Employees",defaultValue:this.state.formData.Health_Vector_Bourne_EM,onValueChange:function(t){e.handleChange(void 0===t.floatValue?0:t.floatValue,"Health_Vector_Bourne_EM",!1)},onFocus:function(e){e.target.select()}}))),r.a.createElement(be.a,{item:!0,xs:2},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Female Employees",defaultValue:this.state.formData.Health_Vector_Bourne_EF,onValueChange:function(t){e.handleChange(void 0===t.floatValue?0:t.floatValue,"Health_Vector_Bourne_EF",!1)},onFocus:function(e){e.target.select()}}))),r.a.createElement(be.a,{item:!0,xs:2},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Male Non-Employees",defaultValue:this.state.formData.Health_Vector_Bourne_UM,onValueChange:function(t){e.handleChange(void 0===t.floatValue?0:t.floatValue,"Health_Vector_Bourne_UM",!1)},onFocus:function(e){e.target.select()}}))),r.a.createElement(be.a,{item:!0,xs:2},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Female Non-Employees",defaultValue:this.state.formData.Health_Vector_Bourne_UF,onValueChange:function(t){e.handleChange(void 0===t.floatValue?0:t.floatValue,"Health_Vector_Bourne_UF",!1)},onFocus:function(e){e.target.select()}}))),r.a.createElement(be.a,{item:!0,xs:4},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{label:"Description",defaultValue:this.state.formData.Health_Vector_Bourne_Desc,onChange:function(t){e.handleChange(t.target.value,"Health_Vector_Bourne_Desc",!1)}})))))),r.a.createElement(be.a,{style:{marginTop:10}},r.a.createElement(bn,{label:"E2. Number of  non-vector borne diseases",style:{width:"100%"}},r.a.createElement(be.a,{container:!0,direction:"row",justify:"space-around",alignItems:"flex-start",spacing:2,style:{marginTop:5}},r.a.createElement(be.a,{item:!0,xs:2},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Male Employees",defaultValue:this.state.formData.Health_NonOccupational_Disease_EM,onValueChange:function(t){e.handleChange(void 0===t.floatValue?0:t.floatValue,"Health_NonOccupational_Disease_EM",!1)},onFocus:function(e){e.target.select()}}))),r.a.createElement(be.a,{item:!0,xs:2},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Female Employees",defaultValue:this.state.formData.Health_NonOccupational_Disease_EF,onValueChange:function(t){e.handleChange(void 0===t.floatValue?0:t.floatValue,"Health_NonOccupational_Disease_EF",!1)},onFocus:function(e){e.target.select()}}))),r.a.createElement(be.a,{item:!0,xs:2},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Male Non-Employees",defaultValue:this.state.formData.Health_NonOccupational_Disease_UM,onValueChange:function(t){e.handleChange(void 0===t.floatValue?0:t.floatValue,"Health_NonOccupational_Disease_UM",!1)},onFocus:function(e){e.target.select()}}))),r.a.createElement(be.a,{item:!0,xs:2},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Female Non-Employees",defaultValue:this.state.formData.Health_NonOccupational_Disease_UF,onValueChange:function(t){e.handleChange(void 0===t.floatValue?0:t.floatValue,"Health_NonOccupational_Disease_UF",!1)},onFocus:function(e){e.target.select()}}))),r.a.createElement(be.a,{item:!0,xs:4},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{label:"Description",defaultValue:this.state.formData.Health_NonOccupational_Disease_Desc,onChange:function(t){e.handleChange(t.target.value,"Health_NonOccupational_Disease_Desc",!1)}})))))),r.a.createElement(be.a,{style:{marginTop:10}},r.a.createElement(bn,{label:"E3. Number of occupational disease cases resulting in lost work days",style:{width:"100%"}},r.a.createElement(be.a,{container:!0,direction:"row",justify:"space-around",alignItems:"flex-start",spacing:2,style:{marginTop:5}},r.a.createElement(be.a,{item:!0,xs:2},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Male Employees",defaultValue:this.state.formData.Health_Occupational_Illness_EM,onValueChange:function(t){e.handleChange(void 0===t.floatValue?0:t.floatValue,"Health_Occupational_Illness_EM",!1)},onFocus:function(e){e.target.select()}}))),r.a.createElement(be.a,{item:!0,xs:2},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Female Employees",defaultValue:this.state.formData.Health_Occupational_Illness_EF,onValueChange:function(t){e.handleChange(void 0===t.floatValue?0:t.floatValue,"Health_Occupational_Illness_EF",!1)},onFocus:function(e){e.target.select()}}))),r.a.createElement(be.a,{item:!0,xs:2},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Male Non-Employees",defaultValue:this.state.formData.Health_Occupational_Illness_UM,onValueChange:function(t){e.handleChange(void 0===t.floatValue?0:t.floatValue,"Health_Occupational_Illness_UM",!1)},onFocus:function(e){e.target.select()}}))),r.a.createElement(be.a,{item:!0,xs:2},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Female Non-Employees",defaultValue:this.state.formData.Health_Occupational_Illness_UF,onValueChange:function(t){e.handleChange(void 0===t.floatValue?0:t.floatValue,"Health_Occupational_Illness_UF",!1)},onFocus:function(e){e.target.select()}}))),r.a.createElement(be.a,{item:!0,xs:4},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{label:"Description",defaultValue:this.state.formData.Health_Occupational_Illness_Desc,onChange:function(t){e.handleChange(t.target.value,"Health_Occupational_Illness_Desc",!1)}})))))),r.a.createElement(be.a,{style:{marginTop:10}},r.a.createElement(bn,{label:"E4. Total number of lost work days from occupational diseases",style:{width:"100%"}},r.a.createElement(be.a,{container:!0,direction:"row",justify:"space-around",alignItems:"flex-start",spacing:2,style:{marginTop:5}},r.a.createElement(be.a,{item:!0,xs:2},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Male Employees",defaultValue:this.state.formData.Health_TotalLostWorkDays_EM,onValueChange:function(t){e.handleChange(void 0===t.floatValue?0:t.floatValue,"Health_TotalLostWorkDays_EM",!1)},onFocus:function(e){e.target.select()}}))),r.a.createElement(be.a,{item:!0,xs:2},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Female Employees",defaultValue:this.state.formData.Health_TotalLostWorkDays_EF,onValueChange:function(t){e.handleChange(void 0===t.floatValue?0:t.floatValue,"Health_TotalLostWorkDays_EF",!1)},onFocus:function(e){e.target.select()}}))),r.a.createElement(be.a,{item:!0,xs:2},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Male Non-Employees",defaultValue:this.state.formData.Health_TotalLostWorkDays_UM,onValueChange:function(t){e.handleChange(void 0===t.floatValue?0:t.floatValue,"Health_TotalLostWorkDays_UM",!1)},onFocus:function(e){e.target.select()}}))),r.a.createElement(be.a,{item:!0,xs:2},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Female Non-Employees",defaultValue:this.state.formData.Health_TotalLostWorkDays_UF,onValueChange:function(t){e.handleChange(void 0===t.floatValue?0:t.floatValue,"Health_TotalLostWorkDays_UF",!1)},onFocus:function(e){e.target.select()}}))),r.a.createElement(be.a,{item:!0,xs:4})))))),r.a.createElement(be.a,{style:{marginTop:10,width:"100%"}},r.a.createElement(bn,{label:"ENVIRONMENTAL REPORTING",style:{width:"100%"}},r.a.createElement(be.a,{style:{marginTop:20}},r.a.createElement(bn,{label:"F1. Reportable Spills and Releases",style:{width:"100%"}},r.a.createElement(be.a,{container:!0,direction:"row",justify:"space-around",alignItems:"flex-start",spacing:2,style:{marginTop:5}},r.a.createElement(be.a,{item:!0,xs:4},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Total",defaultValue:this.state.formData.Env_SpillReleased,onValueChange:function(t){e.handleChange(void 0===t.floatValue?0:t.floatValue,"Env_SpillReleased",!1)},onFocus:function(e){e.target.select()}}))),r.a.createElement(be.a,{item:!0,xs:8},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{label:"Description",defaultValue:this.state.formData.Env_SpillReleased_Desc,onChange:function(t){e.handleChange(t.target.value,"Env_SpillReleased_Desc",!1)}})))))),r.a.createElement(be.a,{style:{marginTop:10}},r.a.createElement(bn,{label:"F2. Air Exceedances / Permit Misses",style:{width:"100%"}},r.a.createElement(be.a,{container:!0,direction:"row",justify:"space-around",alignItems:"flex-start",spacing:2,style:{marginTop:5}},r.a.createElement(be.a,{item:!0,xs:4},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Total",defaultValue:this.state.formData.Env_AirExceedance,onValueChange:function(t){e.handleChange(void 0===t.floatValue?0:t.floatValue,"Env_AirExceedance",!1)},onFocus:function(e){e.target.select()}}))),r.a.createElement(be.a,{item:!0,xs:8},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{label:"Description",defaultValue:this.state.formData.Env_AirExceedance_Desc,onChange:function(t){e.handleChange(t.target.value,"Env_AirExceedance_Desc",!1)}})))))),r.a.createElement(be.a,{style:{marginTop:10}},r.a.createElement(bn,{label:"F3. Waste Water Exceedances / Permit Misses",style:{width:"100%"}},r.a.createElement(be.a,{container:!0,direction:"row",justify:"space-around",alignItems:"flex-start",spacing:2,style:{marginTop:5}},r.a.createElement(be.a,{item:!0,xs:4},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Total",defaultValue:this.state.formData.Env_WasteWaterExceedance,onValueChange:function(t){e.handleChange(void 0===t.floatValue?0:t.floatValue,"Env_WasteWaterExceedance",!1)},onFocus:function(e){e.target.select()}}))),r.a.createElement(be.a,{item:!0,xs:8},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{label:"Description",defaultValue:this.state.formData.Env_WasteWaterExceedance_Desc,onChange:function(t){e.handleChange(t.target.value,"Env_WasteWaterExceedance_Desc",!1)}})))))),r.a.createElement(be.a,{style:{marginTop:10}},r.a.createElement(bn,{label:"F4. Notices of Violation",style:{width:"100%"}},r.a.createElement(be.a,{container:!0,direction:"row",justify:"space-around",alignItems:"flex-start",spacing:2,style:{marginTop:5}},r.a.createElement(be.a,{item:!0,xs:4},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Total",defaultValue:this.state.formData.Env_NoticeOfViolation,onValueChange:function(t){e.handleChange(void 0===t.floatValue?0:t.floatValue,"Env_NoticeOfViolation",!1)},onFocus:function(e){e.target.select()}}))),r.a.createElement(be.a,{item:!0,xs:8},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{label:"Description",defaultValue:this.state.formData.Env_NoticeOfViolation_Desc,onChange:function(t){e.handleChange(t.target.value,"Env_NoticeOfViolation_Desc",!1)}})))))),r.a.createElement(be.a,{style:{marginTop:10}},r.a.createElement(bn,{label:"F5. Number of Government Agency Inspections",style:{width:"100%"}},r.a.createElement(be.a,{container:!0,direction:"row",justify:"space-around",alignItems:"flex-start",spacing:2,style:{marginTop:5}},r.a.createElement(be.a,{item:!0,xs:4},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Total",defaultValue:this.state.formData.Env_GovInspection,onValueChange:function(t){e.handleChange(void 0===t.floatValue?0:t.floatValue,"Env_GovInspection",!1)},onFocus:function(e){e.target.select()}}))),r.a.createElement(be.a,{item:!0,xs:8},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{label:"Description",defaultValue:this.state.formData.Env_GovInspection_Desc,onChange:function(t){e.handleChange(t.target.value,"Env_GovInspection_Desc",!1)}})))))),r.a.createElement(be.a,{style:{marginTop:10}},r.a.createElement(bn,{label:"F6. Number of Incidents with Fines / Penalties (Environmental)",style:{width:"100%"}},r.a.createElement(be.a,{container:!0,direction:"row",justify:"space-around",alignItems:"flex-start",spacing:2,style:{marginTop:5}},r.a.createElement(be.a,{item:!0,xs:4},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Total",defaultValue:this.state.formData.Env_NumbOfIncidentWithFines,onValueChange:function(t){e.handleChange(void 0===t.floatValue?0:t.floatValue,"Env_NumbOfIncidentWithFines",!1)},onFocus:function(e){e.target.select()}}))),r.a.createElement(be.a,{item:!0,xs:8},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{label:"Description",defaultValue:this.state.formData.Env_NumbOfIncidentWithFines_Desc,onChange:function(t){e.handleChange(t.target.value,"Env_NumbOfIncidentWithFines_Desc",!1)}})))))),r.a.createElement(be.a,{style:{marginTop:10}},r.a.createElement(bn,{label:"F7. Fines / Penalties Paid (Environmental) (USD)",style:{width:"100%"}},r.a.createElement(be.a,{container:!0,direction:"row",justify:"space-around",alignItems:"flex-start",spacing:2,style:{marginTop:5}},r.a.createElement(be.a,{item:!0,xs:4},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Total",defaultValue:this.state.formData.Env_Fines,onValueChange:function(t){e.handleChange(void 0===t.floatValue?0:t.floatValue,"Env_Fines",!1)},onFocus:function(e){e.target.select()}}))),r.a.createElement(be.a,{item:!0,xs:8},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{label:"Description",defaultValue:this.state.formData.Env_Fines_Desc,onChange:function(t){e.handleChange(t.target.value,"Env_Fines_Desc",!1)}})))))))),r.a.createElement(be.a,{style:{marginTop:10,width:"100%"}},r.a.createElement(bn,{label:"ABSENTEEISM",style:{width:"100%"}},r.a.createElement(be.a,{style:{marginTop:20}},r.a.createElement(bn,{label:"G1. Total Days Scheduled to Work ",style:{width:"100%"}},r.a.createElement(be.a,{container:!0,direction:"row",justify:"space-around",alignItems:"flex-start",spacing:2,style:{marginTop:5}},r.a.createElement(be.a,{item:!0,xs:2},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Male Employees",defaultValue:this.state.formData.Absence_DaysSchedWork_EM,onValueChange:function(t){e.handleChange(void 0===t.floatValue?0:t.floatValue,"Absence_DaysSchedWork_EM",!1)},onFocus:function(e){e.target.select()},error:!this.state.formControl.Absence_DaysSchedWork_EM.valid,helperText:this.state.formControl.Absence_DaysSchedWork_EM.message}))),r.a.createElement(be.a,{item:!0,xs:2},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Female Employees",defaultValue:this.state.formData.Absence_DaysSchedWork_EF,onValueChange:function(t){e.handleChange(void 0===t.floatValue?0:t.floatValue,"Absence_DaysSchedWork_EF",!1)},onFocus:function(e){e.target.select()},error:!this.state.formControl.Absence_DaysSchedWork_EF.valid,helperText:this.state.formControl.Absence_DaysSchedWork_EF.message}))),r.a.createElement(be.a,{item:!0,xs:2},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Male Non-Employees",defaultValue:this.state.formData.Absence_DaysSchedWork_UM,onValueChange:function(t){e.handleChange(void 0===t.floatValue?0:t.floatValue,"Absence_DaysSchedWork_UM",!1)},onFocus:function(e){e.target.select()}}))),r.a.createElement(be.a,{item:!0,xs:2},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Female Non-Employees",defaultValue:this.state.formData.Absence_DaysSchedWork_UF,onValueChange:function(t){e.handleChange(void 0===t.floatValue?0:t.floatValue,"Absence_DaysSchedWork_UF",!1)},onFocus:function(e){e.target.select()}}))),r.a.createElement(be.a,{item:!0,xs:4})))),r.a.createElement(be.a,{style:{marginTop:10}},r.a.createElement(bn,{label:"G2. Total days of absence from work *",style:{width:"100%"}},r.a.createElement(be.a,{container:!0,direction:"row",justify:"space-around",alignItems:"flex-start",spacing:2,style:{marginTop:5}},r.a.createElement(be.a,{item:!0,xs:2},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Male Employees",defaultValue:this.state.formData.Absence_DaysAbsenceWork_EM,onValueChange:function(t){e.handleChange(void 0===t.floatValue?0:t.floatValue,"Absence_DaysAbsenceWork_EM",!1)},onFocus:function(e){e.target.select()}}))),r.a.createElement(be.a,{item:!0,xs:2},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Female Employees",defaultValue:this.state.formData.Absence_DaysAbsenceWork_EF,onValueChange:function(t){e.handleChange(void 0===t.floatValue?0:t.floatValue,"Absence_DaysAbsenceWork_EF",!1)},onFocus:function(e){e.target.select()}}))),r.a.createElement(be.a,{item:!0,xs:2},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Male Non-Employees",defaultValue:this.state.formData.Absence_DaysAbsenceWork_UM,onValueChange:function(t){e.handleChange(void 0===t.floatValue?0:t.floatValue,"Absence_DaysAbsenceWork_UM",!1)},onFocus:function(e){e.target.select()}}))),r.a.createElement(be.a,{item:!0,xs:2},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Female Non-Employees",defaultValue:this.state.formData.Absence_DaysAbsenceWork_UF,onValueChange:function(t){e.handleChange(void 0===t.floatValue?0:t.floatValue,"Absence_DaysAbsenceWork_UF",!1)},onFocus:function(e){e.target.select()}}))),r.a.createElement(be.a,{item:!0,xs:4})))))),r.a.createElement(be.a,{style:{marginTop:10,width:"100%"}},r.a.createElement(bn,{label:"Performance Measurement",style:{width:"100%"}},r.a.createElement(be.a,{style:{marginTop:20}},r.a.createElement(bn,{label:"H1. Total Lost Workdays",style:{width:"100%"}},r.a.createElement(be.a,{container:!0,direction:"row",justify:"space-around",alignItems:"flex-start",spacing:2,style:{marginTop:5}},r.a.createElement(be.a,{item:!0,xs:2},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Male Employees",value:this.state.formData.Safety_TotalLostWorkDays_EM+this.state.formData.Health_TotalLostWorkDays_EM,inputProps:{readOnly:!0},fixedDecimalScale:!0,decimalScale:2}))),r.a.createElement(be.a,{item:!0,xs:2},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Female Employees",value:this.state.formData.Safety_TotalLostWorkDays_EF+this.state.formData.Health_TotalLostWorkDays_EF,inputProps:{readOnly:!0},fixedDecimalScale:!0,decimalScale:2}))),r.a.createElement(be.a,{item:!0,xs:2},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Male Non-Employees",value:this.state.formData.Safety_TotalLostWorkDays_UM+this.state.formData.Health_TotalLostWorkDays_UM,inputProps:{readOnly:!0},fixedDecimalScale:!0,decimalScale:2}))),r.a.createElement(be.a,{item:!0,xs:2},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Female Non-Employees",value:this.state.formData.Safety_TotalLostWorkDays_UF+this.state.formData.Health_TotalLostWorkDays_UF,inputProps:{readOnly:!0},fixedDecimalScale:!0,decimalScale:2}))),r.a.createElement(be.a,{item:!0,xs:2},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Total",value:this.state.formData.Safety_TotalLostWorkDays_EM+this.state.formData.Health_TotalLostWorkDays_EM+this.state.formData.Safety_TotalLostWorkDays_EF+this.state.formData.Health_TotalLostWorkDays_EF+this.state.formData.Safety_TotalLostWorkDays_UM+this.state.formData.Health_TotalLostWorkDays_UM+this.state.formData.Safety_TotalLostWorkDays_UF+this.state.formData.Health_TotalLostWorkDays_UF,inputProps:{readOnly:!0},fixedDecimalScale:!0,decimalScale:2}))),r.a.createElement(be.a,{item:!0,xs:2})))),r.a.createElement(be.a,{style:{marginTop:10}},r.a.createElement(bn,{label:"H2. Occupational Disease Rate",style:{width:"100%"}},r.a.createElement(be.a,{container:!0,direction:"row",justify:"space-around",alignItems:"flex-start",spacing:2,style:{marginTop:5}},r.a.createElement(be.a,{item:!0,xs:2},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Male Employees",value:this.state.formData.Safety_TotalHourWork_EM>0?1e6*this.state.formData.Health_Occupational_Illness_EM/this.state.formData.Safety_TotalHourWork_EM:0,inputProps:{readOnly:!0},fixedDecimalScale:!0,decimalScale:2}))),r.a.createElement(be.a,{item:!0,xs:2},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Female Employees",value:this.state.formData.Safety_TotalHourWork_EF>0?1e6*this.state.formData.Health_Occupational_Illness_EF/this.state.formData.Safety_TotalHourWork_EF:0,inputProps:{readOnly:!0},fixedDecimalScale:!0,decimalScale:2}))),r.a.createElement(be.a,{item:!0,xs:2},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Male Non-Employees",value:this.state.formData.Safety_TotalHourWork_UM>0?1e6*this.state.formData.Health_Occupational_Illness_UM/this.state.formData.Safety_TotalHourWork_UM:0,inputProps:{readOnly:!0},fixedDecimalScale:!0,decimalScale:2}))),r.a.createElement(be.a,{item:!0,xs:2},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Female Non-Employees",value:this.state.formData.Safety_TotalHourWork_UF>0?1e6*this.state.formData.Health_Occupational_Illness_UF/this.state.formData.Safety_TotalHourWork_UF:0,inputProps:{readOnly:!0},fixedDecimalScale:!0,decimalScale:2}))),r.a.createElement(be.a,{item:!0,xs:2},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Total",value:(this.state.formData.Safety_TotalHourWork_EF>0?1e6*this.state.formData.Health_Occupational_Illness_EF/this.state.formData.Safety_TotalHourWork_EF:0)+(this.state.formData.Safety_TotalHourWork_EM>0?1e6*this.state.formData.Health_Occupational_Illness_EM/this.state.formData.Safety_TotalHourWork_EM:0)+(this.state.formData.Safety_TotalHourWork_UM>0?1e6*this.state.formData.Health_Occupational_Illness_UM/this.state.formData.Safety_TotalHourWork_UM:0)+(this.state.formData.Safety_TotalHourWork_UF>0?1e6*this.state.formData.Health_Occupational_Illness_UF/this.state.formData.Safety_TotalHourWork_UF:0),inputProps:{readOnly:!0},fixedDecimalScale:!0,decimalScale:2}))),r.a.createElement(be.a,{item:!0,xs:2})))),r.a.createElement(be.a,{style:{marginTop:10}},r.a.createElement(bn,{label:"H3. Total Recordable Injury Rate (TRIR)",style:{width:"100%"}},r.a.createElement(be.a,{container:!0,direction:"row",justify:"space-around",alignItems:"flex-start",spacing:2,style:{marginTop:5}},r.a.createElement(be.a,{item:!0,xs:2},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Male Employees",value:this.state.formData.Safety_TotalHourWork_EM>0?1e6*this.state.formData.Safety_NumbOfOccupationalInj_EM/this.state.formData.Safety_TotalHourWork_EM:0,inputProps:{readOnly:!0},fixedDecimalScale:!0,decimalScale:2}))),r.a.createElement(be.a,{item:!0,xs:2},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Female Employees",value:this.state.formData.Safety_TotalHourWork_EF>0?1e6*this.state.formData.Safety_NumbOfOccupationalInj_EF/this.state.formData.Safety_TotalHourWork_EF:0,inputProps:{readOnly:!0},fixedDecimalScale:!0,decimalScale:2}))),r.a.createElement(be.a,{item:!0,xs:2},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Male Non-Employees",value:this.state.formData.Safety_TotalHourWork_UM>0?1e6*this.state.formData.Safety_NumbOfOccupationalInj_UM/this.state.formData.Safety_TotalHourWork_UM:0,inputProps:{readOnly:!0},fixedDecimalScale:!0,decimalScale:2}))),r.a.createElement(be.a,{item:!0,xs:2},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Female Non-Employees",value:this.state.formData.Safety_TotalHourWork_UF>0?1e6*this.state.formData.Safety_NumbOfOccupationalInj_UF/this.state.formData.Safety_TotalHourWork_UF:0,inputProps:{readOnly:!0},fixedDecimalScale:!0,decimalScale:2}))),r.a.createElement(be.a,{item:!0,xs:2},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Total",value:(this.state.formData.Safety_TotalHourWork_EF>0?1e6*this.state.formData.Safety_NumbOfOccupationalInj_EF/this.state.formData.Safety_TotalHourWork_EF:0)+(this.state.formData.Safety_TotalHourWork_EM>0?1e6*this.state.formData.Safety_NumbOfOccupationalInj_EM/this.state.formData.Safety_TotalHourWork_EM:0)+(this.state.formData.Safety_TotalHourWork_UM>0?1e6*this.state.formData.Safety_NumbOfOccupationalInj_UM/this.state.formData.Safety_TotalHourWork_UM:0)+(this.state.formData.Safety_TotalHourWork_UF>0?1e6*this.state.formData.Safety_NumbOfOccupationalInj_UF/this.state.formData.Safety_TotalHourWork_UF:0),inputProps:{readOnly:!0},fixedDecimalScale:!0,decimalScale:2}))),r.a.createElement(be.a,{item:!0,xs:2})))),r.a.createElement(be.a,{style:{marginTop:10}},r.a.createElement(bn,{label:"H4. Lost Time Injury Rate (LTIR)",style:{width:"100%"}},r.a.createElement(be.a,{container:!0,direction:"row",justify:"space-around",alignItems:"flex-start",spacing:2,style:{marginTop:5}},r.a.createElement(be.a,{item:!0,xs:2},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Male Employees",value:this.state.formData.Safety_TotalHourWork_EM>0?1e6*this.state.formData.Safety_NumbOfOccupationalLostDays_EM/this.state.formData.Safety_TotalHourWork_EM:0,inputProps:{readOnly:!0},fixedDecimalScale:!0,decimalScale:2}))),r.a.createElement(be.a,{item:!0,xs:2},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Female Employees",value:this.state.formData.Safety_TotalHourWork_EF>0?1e6*this.state.formData.Safety_NumbOfOccupationalLostDays_EF/this.state.formData.Safety_TotalHourWork_EF:0,inputProps:{readOnly:!0},fixedDecimalScale:!0,decimalScale:2}))),r.a.createElement(be.a,{item:!0,xs:2},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Male Non-Employees",value:this.state.formData.Safety_TotalHourWork_UM>0?1e6*this.state.formData.Safety_NumbOfOccupationalLostDays_UM/this.state.formData.Safety_TotalHourWork_UM:0,inputProps:{readOnly:!0},fixedDecimalScale:!0,decimalScale:2}))),r.a.createElement(be.a,{item:!0,xs:2},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Female Non-Employees",value:this.state.formData.Safety_TotalHourWork_UF>0?1e6*this.state.formData.Safety_NumbOfOccupationalLostDays_UF/this.state.formData.Safety_TotalHourWork_UF:0,inputProps:{readOnly:!0},fixedDecimalScale:!0,decimalScale:2}))),r.a.createElement(be.a,{item:!0,xs:2},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Total",value:(this.state.formData.Safety_TotalHourWork_EF>0?1e6*this.state.formData.Safety_NumbOfOccupationalLostDays_EF/this.state.formData.Safety_TotalHourWork_EF:0)+(this.state.formData.Safety_TotalHourWork_EM>0?1e6*this.state.formData.Safety_NumbOfOccupationalLostDays_EM/this.state.formData.Safety_TotalHourWork_EM:0)+(this.state.formData.Safety_TotalHourWork_UM>0?1e6*this.state.formData.Safety_NumbOfOccupationalLostDays_UM/this.state.formData.Safety_TotalHourWork_UM:0)+(this.state.formData.Safety_TotalHourWork_UF>0?1e6*this.state.formData.Safety_NumbOfOccupationalLostDays_UF/this.state.formData.Safety_TotalHourWork_UF:0),inputProps:{readOnly:!0},fixedDecimalScale:!0,decimalScale:2}))),r.a.createElement(be.a,{item:!0,xs:2})))),r.a.createElement(be.a,{style:{marginTop:10}},r.a.createElement(bn,{label:"H5. Lost Day Rate (LDR)",style:{width:"100%"}},r.a.createElement(be.a,{container:!0,direction:"row",justify:"space-around",alignItems:"flex-start",spacing:2,style:{marginTop:5}},r.a.createElement(be.a,{item:!0,xs:2},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Male Employees",value:this.state.formData.Safety_TotalHourWork_EM>0?1e6*(this.state.formData.Safety_TotalLostWorkDays_EM+this.state.formData.Health_TotalLostWorkDays_EM)/this.state.formData.Safety_TotalHourWork_EM:0,inputProps:{readOnly:!0},fixedDecimalScale:!0,decimalScale:2}))),r.a.createElement(be.a,{item:!0,xs:2},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Female Employees",value:this.state.formData.Safety_TotalHourWork_EF>0?1e6*(this.state.formData.Safety_TotalLostWorkDays_EF+this.state.formData.Health_TotalLostWorkDays_EF)/this.state.formData.Safety_TotalHourWork_EF:0,inputProps:{readOnly:!0},fixedDecimalScale:!0,decimalScale:2}))),r.a.createElement(be.a,{item:!0,xs:2},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Male Non-Employees",value:this.state.formData.Safety_TotalHourWork_UM>0?1e6*(this.state.formData.Safety_TotalLostWorkDays_UM+this.state.formData.Health_TotalLostWorkDays_UM)/this.state.formData.Safety_TotalHourWork_UM:0,inputProps:{readOnly:!0},fixedDecimalScale:!0,decimalScale:2}))),r.a.createElement(be.a,{item:!0,xs:2},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Female Non-Employees",value:this.state.formData.Safety_TotalHourWork_UF>0?1e6*(this.state.formData.Safety_TotalLostWorkDays_UF+this.state.formData.Health_TotalLostWorkDays_UF)/this.state.formData.Safety_TotalHourWork_UF:0,inputProps:{readOnly:!0},fixedDecimalScale:!0,decimalScale:2}))),r.a.createElement(be.a,{item:!0,xs:2},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Total",value:(this.state.formData.Safety_TotalHourWork_EF>0?1e6*this.state.formData.Safety_NumbOfOccupationalLostDays_EF/this.state.formData.Safety_TotalHourWork_EF:0)+(this.state.formData.Safety_TotalHourWork_EM>0?1e6*this.state.formData.Safety_NumbOfOccupationalLostDays_EM/this.state.formData.Safety_TotalHourWork_EM:0)+(this.state.formData.Safety_TotalHourWork_UM>0?1e6*this.state.formData.Safety_NumbOfOccupationalLostDays_UM/this.state.formData.Safety_TotalHourWork_UM:0)+(this.state.formData.Safety_TotalHourWork_UF>0?1e6*this.state.formData.Safety_NumbOfOccupationalLostDays_UF/this.state.formData.Safety_TotalHourWork_UF:0),inputProps:{readOnly:!0},fixedDecimalScale:!0,decimalScale:2}))),r.a.createElement(be.a,{item:!0,xs:2})))),r.a.createElement(be.a,{style:{marginTop:10}},r.a.createElement(bn,{label:"H6. Absenteeism Rate (%)",style:{width:"100%"}},r.a.createElement(be.a,{container:!0,direction:"row",justify:"space-around",alignItems:"flex-start",spacing:2,style:{marginTop:5}},r.a.createElement(be.a,{item:!0,xs:2},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Male Employees",value:this.state.formData.Absence_DaysSchedWork_EM>0?this.state.formData.Absence_DaysAbsenceWork_EM/this.state.formData.Absence_DaysSchedWork_EM*100:0,inputProps:{readOnly:!0},fixedDecimalScale:!0,decimalScale:2}))),r.a.createElement(be.a,{item:!0,xs:2},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Female Employees",value:this.state.formData.Absence_DaysSchedWork_EF>0?this.state.formData.Absence_DaysAbsenceWork_EF/this.state.formData.Absence_DaysSchedWork_EF*100:0,inputProps:{readOnly:!0},fixedDecimalScale:!0,decimalScale:2}))),r.a.createElement(be.a,{item:!0,xs:2},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Male Non-Employees",value:this.state.formData.Absence_DaysSchedWork_UM>0?this.state.formData.Absence_DaysAbsenceWork_UM/this.state.formData.Absence_DaysSchedWork_UM*100:0,inputProps:{readOnly:!0},fixedDecimalScale:!0,decimalScale:2}))),r.a.createElement(be.a,{item:!0,xs:2},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Female Non-Employees",value:this.state.formData.Absence_DaysSchedWork_UF>0?this.state.formData.Absence_DaysAbsenceWork_UF/this.state.formData.Absence_DaysSchedWork_UF*100:0,inputProps:{readOnly:!0},fixedDecimalScale:!0,decimalScale:2}))),r.a.createElement(be.a,{item:!0,xs:2},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Total",value:this.state.formData.Absence_DaysSchedWork_EM+this.state.formData.Absence_DaysSchedWork_EF+this.state.formData.Absence_DaysSchedWork_UM+this.state.formData.Absence_DaysSchedWork_UF>0?(this.state.formData.Absence_DaysAbsenceWork_EM+this.state.formData.Absence_DaysAbsenceWork_EF+this.state.formData.Absence_DaysAbsenceWork_UM+this.state.formData.Absence_DaysAbsenceWork_UF)/(this.state.formData.Absence_DaysSchedWork_EM+this.state.formData.Absence_DaysSchedWork_EF+this.state.formData.Absence_DaysSchedWork_UM+this.state.formData.Absence_DaysSchedWork_UF)*100:0,inputProps:{readOnly:!0},fixedDecimalScale:!0,decimalScale:2}))),r.a.createElement(be.a,{item:!0,xs:2})))))),r.a.createElement(be.a,{style:{marginTop:10,width:"100%"}},r.a.createElement(bn,{label:"Lost Work Day Definition",style:{width:"100%"}},r.a.createElement(be.a,{style:{marginTop:20}},r.a.createElement("p",null,'" Time lost should be measured separately for each case of occupational injury leading to temporary incapacity for work of a maximum of one year. In order to assess the severity of the injury, time lost should be measured in terms of the number of calendar days (underline) during which the injured person is temporarily incapacitated, based on the information available at the time the statistics are compiled. If it is measured in workdays, attempts should be made to assess the total number of calendar days lost. The time lost should be measured inclusively from the day after the day of the accident, to the day prior to the day of return to work (underline). In the case of recurrent absences due to a single case of occupational injury, each period of absence should be measured as above, and the resulting number of days lost for each period summed to arrive at the total for the case of injury. Temporary absences from work of less than one day for medical treatment should not be included in time lost. "')))),"//todo Download ILO List of Occupational Diseases (Revised 2010)")))),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.snackClass,autoHideDuration:600,open:this.state.snackOpen,onClose:this.snackOpen,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.snackMessage)}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return{formOpen:e.formOpen}}}]),t}(r.a.Component),ew=a(23),tw=(Object(n.forwardRef)((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),r.a.forwardRef((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).snackOpen=function(e,t){var n;return l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0===e||null===e||void 0===t||null===t){r.next=7;break}return r.next=3,l.a.awrap(ka(e,t));case 3:n=r.sent,a.setState({snackOpen:!a.state.snackOpen,alertMessage:n,alertClass:e}),r.next=8;break;case 7:a.setState({snackOpen:!1});case 8:case"end":return r.stop()}}))},a.dialogOpen=function(e){var t;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log(e),n.next=3,l.a.awrap(ka("confirmation","delete"));case 3:t=n.sent,a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:e,dialogMessage:r.a.createElement("span",null,void 0!==t?t.replace("[Name]",e.Factory.FctyName):"")});case 5:case"end":return n.stop()}}))},a.diaLogClose=function(){a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:null})},a.onDelete=function(){var e=Object(je.a)(a.state.data),t=e.indexOf(a.state.currentDeleteData);void 0!==a.state.currentDeleteData&&null!==a.state.currentDeleteData&&Kk.delete(a.state.currentDeleteData._id).then((function(n){!0===n.code?(e.splice(t,1),a.setState({data:e,dialogOpen:!1},(function(){return a.snackOpen("success","delete")}))):a.setState({dialogOpen:!1},(function(){return a.snackOpen("error","server")}))}))},a.state={columns:[{title:"Factory",field:"Factory",render:function(e){return r.a.createElement("span",null,e.Factory.FctyName)}},{title:"Month",field:"Period",render:function(e){return r.a.createElement("span",null,void 0===e?"":new Date(e.Period).toLocaleString("en-GB",{year:"numeric",month:"short"}))}},{title:"Staffing - Worker by Month",render:function(e){return r.a.createElement(Xa.a,{value:e.NumbOfEmployee_EM+e.NumbOfEmployee_EF+e.NumbOfEmployee_UM+e.NumbOfEmployee_UF,displayType:"text",thousandSeparator:!0})}},{title:"Safety - Total Hours Worked",render:function(e){return r.a.createElement(Xa.a,{value:e.Safety_TotalHourWork_EM+e.Safety_TotalHourWork_EF+e.Safety_TotalHourWork_UM+e.Safety_TotalHourWork_UF,displayType:"text",thousandSeparator:!0})}},{title:"Safety - Occupational Injuries",render:function(e){return r.a.createElement(Xa.a,{value:e.Safety_NumbOfOccupationalInj_EM+e.Safety_NumbOfOccupationalInj_EF+e.Safety_NumbOfOccupationalInj_UM+e.Safety_NumbOfOccupationalInj_UF,displayType:"text",thousandSeparator:!0})}},{title:"Safety - Occupational Injuries Lost Work Days",render:function(e){return r.a.createElement(Xa.a,{value:e.Safety_NumbOfOccupationalLostDays_EM+e.Safety_NumbOfOccupationalLostDays_EF+e.Safety_NumbOfOccupationalLostDays_UM+e.Safety_NumbOfOccupationalLostDays_UF,displayType:"text",thousandSeparator:!0})}},{title:"Safety - Number of Lost Work Days",render:function(e){return r.a.createElement(Xa.a,{value:e.Safety_TotalLostWorkDays_EM+e.Safety_TotalLostWorkDays_EF+e.Safety_TotalLostWorkDays_UM+e.Safety_TotalLostWorkDays_UF,displayType:"text",thousandSeparator:!0})}},{title:"Safety - Gov. Inspection(Safety)",render:function(e){return r.a.createElement(Xa.a,{value:e.Safety_GovInspection_EM,displayType:"text",thousandSeparator:!0})}},{title:"Safety - Incident with Fines(Safety)",render:function(e){return r.a.createElement(Xa.a,{value:e.Safety_NumbOfIncidentWithFines_EM,displayType:"text",thousandSeparator:!0})}},{title:"Safety - Fines Safety(USD)",render:function(e){return r.a.createElement(Xa.a,{value:e.Safety_Fines_EM,displayType:"text",thousandSeparator:!0})}},{title:"Safety - Safety Notice",render:function(e){return r.a.createElement(Xa.a,{value:e.Safety_Notice_EM,displayType:"text",thousandSeparator:!0})}},{title:"Motor Vehicle Accidents",render:function(e){return r.a.createElement(Xa.a,{value:e.Vehicle_Accident_EM+e.Vehicle_Accident_EF+e.Vehicle_Accident_UM+e.Vehicle_Accident_UF,displayType:"text",thousandSeparator:!0})}},{title:"Motor Vehicle Injury Accidents",render:function(e){return r.a.createElement(Xa.a,{value:e.Vehicle_InjureAccident_EM+e.Vehicle_InjureAccident_EF+e.Vehicle_InjureAccident_UM+e.Vehicle_InjureAccident_UF,displayType:"text",thousandSeparator:!0})}},{title:"Health - Vector Bourne Disease Cases",render:function(e){return r.a.createElement(Xa.a,{value:e.Health_Vector_Bourne_EM+e.Health_Vector_Bourne_EF+e.Health_Vector_Bourne_UM+e.Health_Vector_Bourne_UF,displayType:"text",thousandSeparator:!0})}},{title:"Health - Non-Occupational Disease Cases",render:function(e){return r.a.createElement(Xa.a,{value:e.Health_NonOccupational_Disease_EM+e.Health_NonOccupational_Disease_EF+e.Health_NonOccupational_Disease_UM+e.Health_NonOccupational_Disease_UF,displayType:"text",thousandSeparator:!0})}},{title:"Health - Occupational Illness",render:function(e){return r.a.createElement(Xa.a,{value:e.Health_Occupational_Illness_EM+e.Health_Occupational_Illness_EF+e.Health_Occupational_Illness_UM+e.Health_Occupational_Illness_UF,displayType:"text",thousandSeparator:!0})}},{title:"Health - Lost Work Days",render:function(e){return r.a.createElement(Xa.a,{value:e.Health_TotalLostWorkDays_EM+e.Health_TotalLostWorkDays_EF+e.Health_TotalLostWorkDays_UM+e.Health_TotalLostWorkDays_UF,displayType:"text",thousandSeparator:!0})}},{title:"Env - Spills and Releases",render:function(e){return r.a.createElement(Xa.a,{value:e.Env_SpillReleased,displayType:"text",thousandSeparator:!0})}},{title:"Env - Spills and Releases Desc",field:"Env_SpillReleased_Desc"},{title:"Env - Air Exceedances",render:function(e){return r.a.createElement(Xa.a,{value:e.Env_AirExceedance,displayType:"text",thousandSeparator:!0})}},{title:"Env - Air Exceedances Desc",field:"Env_AirExceedance_Desc"},{title:"Env - Wastewater Exceedances",render:function(e){return r.a.createElement(Xa.a,{value:e.Env_WasteWaterExceedance,displayType:"text",thousandSeparator:!0})}},{title:"Env - Wastewater Exceedances Desc",field:"Env_WasteWaterExceedance_Desc"},{title:"Env - Notices of Violation",render:function(e){return r.a.createElement(Xa.a,{value:e.Env_NoticeOfViolation,displayType:"text",thousandSeparator:!0})}},{title:"Env - Notices of Violation Desc",field:"Env_NoticeOfViolation_Desc"},{title:"Env - Gov. Inspection",render:function(e){return r.a.createElement(Xa.a,{value:e.Env_GovInspection,displayType:"text",thousandSeparator:!0})}},{title:"Env - Gov. Inspection Desc",field:"Env_GovInspection_Desc"},{title:"Env - Incident with Fines",render:function(e){return r.a.createElement(Xa.a,{value:e.Env_NumbOfIncidentWithFines,displayType:"text",thousandSeparator:!0})}},{title:"Env - Incident with Fines",field:"Env_NumbOfIncidentWithFines_Desc"},{title:"Env - Fines(USD)",render:function(e){return r.a.createElement(Xa.a,{value:e.Env_Fines,displayType:"text",thousandSeparator:!0})}},{title:"Env - Fines(USD) Desc",field:"Env_Fines_Desc"},{title:"Absence - Schedule Work",render:function(e){return r.a.createElement(Xa.a,{value:e.Absence_DaysSchedWork_EM+e.Absence_DaysSchedWork_EF+e.Absence_DaysSchedWork_UM+e.Absence_DaysSchedWork_UF,displayType:"text",thousandSeparator:!0})}},{title:"Absence - Schedule Work Desc",field:"Absence_DaysSchedWork_Desc"},{title:"Absence - Absence from Work",render:function(e){return r.a.createElement(Xa.a,{value:e.Absence_DaysAbsenceWork_EM+e.Absence_DaysAbsenceWork_EF+e.Absence_DaysAbsenceWork_UM+e.Absence_DaysAbsenceWork_UF,displayType:"text",thousandSeparator:!0})}},{title:"Absence - Absence from Work Desc",field:"Absence_DaysAbsenceWork_Desc"},{title:"Operator",field:"LastUpdatedBy"},{title:"Last Updated",field:"LastUpdatedAt",render:function(e){return r.a.createElement("span",null,void 0===e?"":new Date(e.LastUpdatedAt).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}))},editable:"never"}],data:[],formData:null,currentDeleteData:null,formOpen:!1,formAction:"",snackOpen:!1,dialogOpen:!1,alertMessage:"",dialogMessage:"",alertClass:""},a.EHSMetricsModel=ew(Jk),a.openForm=a.openForm.bind(Object(Pe.a)(a)),a.closeForm=a.closeForm.bind(Object(Pe.a)(a)),a.onSuccess=a.onSuccess.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initEHSMetrics()}},{key:"openForm",value:function(e){var t=e,a=this.state.formAction;void 0===t||null===t?(t=this.EHSMetricsModel,a="Add"):a="update",this.setState({formData:t,formOpen:!this.state.formOpen,formAction:a})}},{key:"closeForm",value:function(){this.setState({formData:null,formOpen:!1,formAction:""})}},{key:"initEHSMetrics",value:function(){var e=this;Kk.get("").then((function(t){!0===t.code?e.setState({data:t.data}):e.snackOpen("error","server")}))}},{key:"onSuccess",value:function(e){var t=this,a=Object(je.a)(this.state.data);if(void 0!==e&&null!==e)if("Add"===this.state.formAction)a.push(e),this.setState({data:a,formOpen:!this.state.formOpen,formAction:"",formData:null},(function(){return t.snackOpen("success","add")}));else{var n=a.indexOf(this.state.formData);a[n]=e,this.setState({data:a,formOpen:!this.state.formOpen,formAction:"",formData:null},(function(){return t.snackOpen("success","update")}))}else this.snackOpen("error","server")}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{container:!0,direction:"column",justify:"center",wrap:"wrap",style:{margin:"20px 20px 10px 0px"}},r.a.createElement(be.a,{item:!0,xs:12},r.a.createElement(Ve.a,{title:"Monthly EHS Metrics",columns:this.state.columns,data:this.state.data,components:{Toolbar:function(t){return r.a.createElement("div",null,r.a.createElement(Le.MTableToolbar,t),r.a.createElement("div",{style:{padding:"0px 15px"}},r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:function(){return e.openForm(t.rowData)},"aria-label":"add"},r.a.createElement(wt.a,null))))}},actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.data,columns:e.state.columns,fileName:"Monthly EHS Metrics"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.initEHSMetrics()}},{icon:"edit",tooltip:"Edit User",onClick:function(t,a){return e.openForm(a)}},{icon:"delete",tooltip:"Delete User",onClick:function(t,a){return e.dialogOpen(a)}}],options:{}})),r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-evenly",alignItems:"center",md:10,xs:12,sm:12,xl:10,lg:10},this.state.formOpen?r.a.createElement($k,{formData:this.state.formData,formAction:this.state.formAction,formOpen:this.state.formOpen,onSuccess:this.onSuccess,closeForm:this.closeForm}):""),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:600,open:this.state.snackOpen,onClose:this.snackOpen,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.diaLogClose,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.diaLogClose,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDelete,color:"primary"},"Delete"))))}}]),t}(r.a.Component)),aw=a(23),nw={Factory:{valid:!0,message:""},Datetime:{valid:!0,message:""},Shift:{valid:!0,message:""},SizeConfiguration:{valid:!0,message:""},Size:{valid:!0,message:""},Remarks:{valid:!0,message:""}},rw=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={chartData:{},sizeConfigurationLabel:"",labels:[],dataSet:[],factoryData:[],sizeConfiguration:[],dataPoints:[],formData:aw(bE),formControls:aw(nw),disabled:!0,currentDeleteData:null,seqPalletData:null},a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initFactory(),this.initialGraphData(),this.initSizeConfiguration(),this.initialHandleData()}},{key:"initFactory",value:function(){var e=this;Qa.get("").then((function(t){!0===t.code&&e.setState({factoryData:t.data})}))}},{key:"initSizeConfiguration",value:function(){var e=this;Sp.getsizeConfiguration("").then((function(t){!0===t.code&&e.setState({sizeConfiguration:t.data})}))}},{key:"initialHandleData",value:function(){this.setState({chartData:{labels:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23"],datasets:[{data:this.state.dataSet,label:"Size Max. Std. Size",borderColor:"#2E66D7",backgroundColor:"#FF0000"}]}})}},{key:"initialGraphData",value:function(){var e,t=this;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return e=new Date,console.log(e),a.next=4,l.a.awrap(DE.get("").then((function(e){if(!0===e.code){t.state.dataSet=[],console.log(e.data);for(var a=0;a<e.data.length;a++)t.state.dataSet.push(e.data[a].Size)}})));case 4:this.setState({chartData:{labels:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23"],datasets:[{data:this.state.dataSet,label:"Size Max. Std. Size",borderColor:"#2E66D7",backgroundColor:"#FF0000"}]}});case 5:case"end":return a.stop()}}),null,this)}},{key:"handleChange",value:function(e,t,a){var n=this,r=Object(me.a)({},this.state.formData);Object(me.a)({},this.state.formControls);console.log(e),"Factory"===t&&(console.log(e._id),DE.getFilter("?Factory="+e._id).then((function(e){if(console.log(e.code),n.state.dataSet=[],!0===e.code){for(var t=0;t<e.data.length;t++)n.state.dataSet.push(e.data[t].Size);console.log(n.state.dataSet)}n.initialHandleData()}))),"SizeConfiguration"===t&&(this.state.sizeConfigurationLabel=" ("+e.SubProcessNumber+")",DE.getFilter("?SizeConfiguration="+e._id+"&&Factory="+r.Factory._id).then((function(e){if(console.log(e.code),n.state.dataSet=[],!0===e.code){for(var t=0;t<e.data.length;t++)n.state.dataSet.push(e.data[t].Size);console.log(n.state.dataSet)}n.initialHandleData()}))),r[t]=e,this.setState({formData:r})}},{key:"render",value:function(){var e,t=this;return r.a.createElement(be.a,{container:!0,direction:"row",justify:"center",alignItems:"stretch"},r.a.createElement(be.a,{item:!0,container:!0,xs:12},r.a.createElement(x.a,{variant:"overline",display:"block",gutterBottom:!0},"Blanket Graph")),r.a.createElement(be.a,{item:!0,container:!0,xs:12},r.a.createElement(be.a,{item:!0,xs:3,sm:3,md:2,lg:3},r.a.createElement(Hr,{selectedValue:this.state.formData.Factory,propertyName:"Factory",handleChange:function(e){return t.handleChange(e,"Factory")},required:!1})),r.a.createElement(be.a,{item:!0,xs:1,sm:1,md:1,lg:1}),r.a.createElement(be.a,{item:!0,xs:2,sm:2,md:2,lg:2},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Ac.a,{format:"dd-MMM-yyyy hh:mm",label:"Until Date",value:this.state.formData.Datetime.value,onChange:function(e){t.handleChange(e,"Datetime")}})),r.a.createElement(Sa.a,{error:!this.state.formData.Datetime.valid,style:{display:this.state.formData.Datetime.valid?"none":""}},this.state.formData.Datetime.message))),r.a.createElement(be.a,{item:!0,xs:1,sm:1,md:1,lg:1}),r.a.createElement(be.a,{item:!0,xs:2,sm:2,md:2,lg:2},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(kE,(e={handleChange:this.handleChange,selectedValue:this.state.formData.SizeConfiguration,formControl:So(this.state.formData.Factory,"empty")?{valid:!0,message:""}:{valid:!1,message:""}},Object(y.a)(e,"handleChange",this.handleChange),Object(y.a)(e,"propertyName","SizeConfiguration"),Object(y.a)(e,"selectedFactory",void 0===this.state.formData.Factory._id?this.state.formData.Factory:this.state.formData.Factory._id),Object(y.a)(e,"OutputType","Crumb"),e)))),r.a.createElement(be.a,{item:!0,xs:1,sm:1,md:1,lg:1}),r.a.createElement(be.a,{item:!0,xs:1,sm:1,md:1,lg:1},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"Line",label:"Line",value:""===this.state.formData.SizeConfiguration?"":this.state.formData.SizeConfiguration.Line.Name,margin:"dense",disabled:!0}))),r.a.createElement(be.a,{item:!0,xs:1,sm:1,md:1,lg:1}),r.a.createElement(be.a,{item:!0,xs:1,sm:1,md:1,lg:1},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"Process",label:"Process",value:""===this.state.formData.SizeConfiguration?"":this.state.formData.SizeConfiguration.Process.ProcName,margin:"dense",disabled:!0})))),r.a.createElement(be.a,{item:!0,xs:12,sm:12,md:12,lg:12},r.a.createElement("div",null,r.a.createElement(_t.c,{data:this.state.chartData,options:{title:{display:!0,text:"Blanket Thickness"+this.state.sizeConfigurationLabel,fontSize:20},scales:{yAxes:[{scaleLabel:{display:!0,labelString:"mm"}}],xAxes:[{scaleLabel:{display:!0,labelString:"Hour"}}]},legend:{display:!0,maxWidth:50,position:"bottom"}}}))))}}]),t}(r.a.Component),ow=(a(1013),{properties:{Factory:{type:"any",messages:{conform:"Factory cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},ReportDate:{type:"any",messages:{conform:"Report date cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},QPRType:{type:"any",messages:{conform:"QPRType cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},Category:{type:"any",messages:{conform:"Category cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},Reason:{type:"any",messages:{conform:"QPR Reason cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},QADRefNo:{type:"string",messages:{conform:"QAD Ref No cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},RevisionNo:{type:"number",messages:{conform:"Revision No cannot be empty."},conform:function(e){return!(""===e||void 0===e)}},QPRStatus:{type:"any",messages:{conform:"Case status cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},CAPStatusInternal:{type:"any",messages:{conform:"CAP Status cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},CAPStatusBuyer:{type:"any",messages:{conform:"CAP Status Buyer cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},ProductGrade:{type:"any",messages:{conform:"Product Grade cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},PackingType:{type:"any",messages:{conform:"Packing Type cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},Buyer:{type:"any",messages:{conform:"Buyer cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}}}}),sw=a(24),iw={validateFields:function(e){return sw.validate(e,ow,{cast:!0})},get:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="qualityProblemReport/"+e,a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 2:case"end":return a.stop()}}))},getOne:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("qualityProblemReport/").concat(e),a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 2:case"end":return a.stop()}}))},getFileBuffer:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("qualityProblemReport/").concat(e),a.abrupt("return",Ye(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data?{code:!0,formValid:!0,message:"Succeed",data:e.data}:200===e.status&&null===e.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 2:case"end":return a.stop()}}))},getFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("qualityProblemReport-filter/").concat(e),a.abrupt("return",We(t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){return{code:!1,message:"Oops, something went wrong while processing your request!",data:null}})));case 2:case"end":return a.stop()}}))},update:function(e,t){return Qe("qualityProblemReport/"+e,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Updated",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="qualityProblemReport/"+e,n.abrupt("return",He(a,t).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Added",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,formValid:!0,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("qualityProblemReport/"+e).then((function(e){return e})).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))}},lw={Factory:"",ReportDate:new Date,SIRef:"",RevisionNo:0,Buyer:"",BuyerRef:"",QADRefNo:"",ProductGrade:"",Category:"",Reason:"",ProblemDesc:"",QualityAffected:0,ClaimValue:0,QPRStatus:"",RootCause:"",CorrectiveAction:"",CAPStatusInternal:"",CAPStatusBuyer:"",QPRType:"",CAPA:!0,PackingType:"",ClaimAmt:0,TransportationAmt:0,PackingAmt:0,OtherAmt:0,ReprocessAmt:0,CorrectiveDate:new Date,FactoryComment:"",QADComment:"",Remarks:"",SupportDocument:[],CreatedAt:new Date,CreatedBy:"Admin",LastUpdatedAt:new Date,LastUpdatedBy:"Admin"},cw=(a(1014),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={qprReasonData:[]},a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a.initQPRReasonData=a.initQPRReasonData.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initQPRReasonData()}},{key:"initQPRReasonData",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:$n.getFilter("?QPRReasonInactive=false").then((function(t){!0===t.code&&e.setState({qprReasonData:t.data})})).catch((function(e){throw e}));case 1:case"end":return t.stop()}}))}},{key:"renderOptions",value:function(){return this.state.qprReasonData.map((function(e,t){return r.a.createElement(et.a,{label:"Select Classification of NC",value:e._id,key:e.QPRReason,name:e.QPRReason},e.QPRReason)}))}},{key:"handleChange",value:function(e){var t=this.state.qprReasonData.find((function(t){return t._id===e.target.value}));void 0!==t?this.props.handleChange(t,this.props.propertyName,this.props.required):this.props.handleChange("",this.props.propertyName,this.props.required)}},{key:"render",value:function(){var e=this;return r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(Ea.a,{shrink:!0,required:!0,error:!this.props.formControl.valid},"QPR Reason"),r.a.createElement(ba.a,{id:"qprReason",value:void 0===this.props.selectedValue?"":this.props.selectedValue,style:{minWidth:140},error:!this.props.formControl.valid,onChange:function(t){return e.handleChange(t,e.props.propertyName)},displayEmpty:!0},r.a.createElement(et.a,{value:""},r.a.createElement("em",null,"Select Classification of NC")),this.renderOptions()),r.a.createElement(Sa.a,{error:!this.props.formControl.valid,style:{display:this.props.formControl.valid?"none":""}},this.props.formControl.valid?"":this.props.formControl.message))}}]),t}(n.Component)),uw=a(23),dw=(Object(n.forwardRef)((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),{Factory:{valid:!0,message:""},ReportDate:{valid:!0,message:""},SIRef:{valid:!0,message:""},RevisionNo:{valid:!0,message:""},QADRefNo:{valid:!0,message:""},Buyer:{valid:!0,message:""},BuyerRef:{valid:!0,message:""},ProductGrade:{valid:!0,message:""},Category:{valid:!0,message:""},Reason:{valid:!0,message:""},ProblemDesc:{valid:!0,message:""},QuantityAffected:{valid:!0,message:""},QPRStatus:{valid:!0,message:""},RootCause:{valid:!0,message:""},CorrectiveAction:{valid:!0,message:""},CAPStatusInternal:{valid:!0,message:""},CAPStatusBuyer:{valid:!0,message:""},QPRType:{valid:!0,message:""},CAPA:{valid:!0,message:""},PackingType:{valid:!0,message:""},ClaimAmt:{valid:!0,message:""},TransportationAmt:{valid:!0,message:""},PackingAmt:{valid:!0,message:""},OtherAmt:{valid:!0,message:""},ReprocessAmt:{valid:!0,message:""},CorrectiveDate:{valid:!0,message:""},FactoryComment:{valid:!0,message:""},QADComment:{valid:!0,message:""},Remarks:{valid:!0,message:""},SupportDocument:{valid:!0,message:""}}),mw=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).closeForm=function(){a.setState({formControl:uw(dw)},(function(){return a.props.closeForm()}))},a.snackOpen=function(e,t,n){var r;return l.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(void 0===e||null===e||void 0===t||null===t){o.next=11;break}if(void 0!==n){o.next=7;break}return o.next=4,l.a.awrap(ka(e,t));case 4:r=o.sent,o.next=8;break;case 7:r=n;case 8:a.setState({snackOpen:!a.state.snackOpen,snackMessage:r,snackClass:e}),o.next=12;break;case 11:a.setState({snackOpen:!1});case 12:case"end":return o.stop()}}))},a.onSave=function(){var e=Object(me.a)({},a.state.formData),t=Object(me.a)({},a.state.formControl);"object"===typeof e.Factory&&(e.Factory=e.Factory._id),"object"===typeof e.ProductGrade&&(e.ProductGrade=e.ProductGrade._id),"object"===typeof e.PackingType&&(e.PackingType=e.PackingType._id),"object"===typeof e.Reason&&(e.Reason=e.Reason._id),"object"===typeof e.Buyer&&(e.Buyer=e.Buyer._id);var n=iw.validateFields(e);if(n.valid){var r=a.getFormDataFromObject(e);"Add"===a.props.formAction?iw.add("",r).then((function(e){!0===e.code?a.props.onSuccess(e.data):null!==e.errors&&Array.isArray(e.errors)?(e.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t})):a.snackOpen("error","server")})):iw.update("",r).then((function(e){!0===e.code?a.props.onSuccess(e.data):null!==e.errors&&Array.isArray(e.errors)?(e.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t})):a.snackOpen("error","server")}))}else n.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t}),a.snackOpen("error","alertValidation")},a.updateSupportDoc=function(e,t){if(void 0!==t&&void 0!==e){var n=a.state.supportDoc;n[t]=e,a.setState({supportDoc:n}),a.handleChange(n,"SupportDocument")}},a.addSupportDoc=function(e){if(void 0!==e){var t=a.state.supportDoc;t.push(e),a.setState({supportDoc:t}),a.handleChange(t,"SupportDocument")}},a.deleteSupportDoc=function(e){void 0!==e&&null!==e&&(a.setState({supportDoc:e}),a.handleChange(e,"SupportDocument"))},a.state={formData:a.props.formData,formOpen:a.props.formOpen,formControl:uw(dw),disabled:!1,snackOpen:!1,snackMessage:{valid:!0,message:""},snackClass:"",supportDoc:a.props.formData.SupportDocument,eightDFormOpen:!1,eightDFormAction:"",eightDFormData:""},a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a.EightDModel=uw(Fm),a.closeEightDForm=a.closeEightDForm.bind(Object(Pe.a)(a)),a.onEightDSuccess=a.onEightDSuccess.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initEightReport()}},{key:"initEightReport",value:function(){var e=this;Em.getFilter("?RefNumber=".concat(this.state.formData.QADRefNo)).then((function(t){!0===t.code&&t.data.length>0&&e.setState({eightDFormData:t.data[0]})}))}},{key:"openEightDForm",value:function(){var e=Object(me.a)({},this.state.formData),t=Object(me.a)({},this.state.formControl),a=iw.validateFields(e);if(!a.valid)return a.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),this.setState({formControl:t}),void this.snackOpen("error","alertValidation");var n=Object(me.a)({},this.state.eightDFormData),r="";""===this.state.eightDFormData?((n=this.EightDModel).Factory=this.state.formData.Factory,n.Category="Quality",n.RefNumber=this.state.formData.QADRefNo,n.EightDNumber="8D-"+this.state.formData.QADRefNo,r="Add"):r="update",this.setState({eightDFormData:n,eightDFormOpen:!0,eightDFormAction:r})}},{key:"closeEightDForm",value:function(){this.setState({eightDFormOpen:!1,eightDFormAction:""})}},{key:"onEightDSuccess",value:function(e){var t=this;void 0!==e&&null!==e?"Add"===this.state.eightDFormAction?this.setState({eightDFormData:e,eightDFormOpen:!1,eightDFormAction:""},(function(){return t.snackOpen("success","add")})):this.setState({eightDFormData:e,eightDFormOpen:!1,eightDFormAction:""},(function(){return t.snackOpen("success","update")})):this.snackOpen("error","server")}},{key:"handleChange",value:function(e,t,a){var n=Object(me.a)({},this.state.formData),r=Object(me.a)({},this.state.formControl);!a&&"Factory"!==t||void 0!==e&&""!==e?(r[t].valid=!0,r[t].message=""):(r[t].valid=!1,r[t].message="QADRefNo"===t?"QAD Ref No cannot be empty.":"CAPStatusBuyer"===t?"CAP Status Buyer cannot be empty.":"CAPStatusInternal "===t?"CAP Status cannot be empty.":"QPRStatus"===t?"Case status cannot be empty.":"".concat(t," cannot be empty.")),n[t]=e,this.setState({formData:n})}},{key:"getFormDataFromObject",value:function(e){var t=this,a=new FormData;return void 0!==e&&Object.keys(e).map((function(n,r){if("SupportDocument"===n){var o=new Array;if("Add"===t.state.actionStatus)e[n].map((function(e){o.push({Remarks:e.Remarks,DocumentName:e.Document.name}),a.append("file",e.Document)}));else{var s=(o=e[n]).filter((function(e){return void 0!==e.Document}));void 0!==s&&s.length>0&&s.map((function(e){var t=o.indexOf(e);o[t]={Remarks:e.Remarks,DocumentName:e.Document.name},a.append("file",e.Document)}))}a.set("SupportDocument",JSON.stringify(o))}else"QPRType"===n?a.append("QPRType",JSON.stringify(e[n])):"Category"===n?a.append("Category",JSON.stringify(e[n])):"QPRStatus"===n?a.append("QPRStatus",JSON.stringify(e[n])):"CAPStatusBuyer"===n?a.append("CAPStatusBuyer",JSON.stringify(e[n])):"CAPStatusInternal"===n?a.append("CAPStatusInternal",JSON.stringify(e[n])):a.append(n,e[n])})),a}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(Ae.a,{fullScreen:!0,open:this.state.formOpen,onClose:this.closeForm,TransitionComponent:this.Transition},r.a.createElement(w.a,{className:"appBar"},r.a.createElement(F.a,null,r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:this.closeForm,"aria-label":"close"},r.a.createElement(Vt.a,null)),r.a.createElement(x.a,{variant:"h6",className:"app-title"},"Quality Problem Report"),r.a.createElement(he.a,{color:"inherit",disabled:this.state.disabled,onClick:this.onSave},"save"))),r.a.createElement(_e.a,null,r.a.createElement("div",{className:"form-container"},r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-evenly",alignItems:"center",md:10,xs:12,sm:12,xl:10,lg:10},r.a.createElement(be.a,{container:!0,direction:"row",justify:"space-around",alignItems:"center",spacing:3},r.a.createElement(be.a,{item:!0,container:!0,md:6,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Fa,{jsonFileName:"qualityProblemReport",jsonPropertyName:"QPRType",formControl:this.state.formControl.QPRType,propertyName:"QPRType",required:!0,label:"QPR Type",handleChange:function(t){return e.handleChange(t,"QPRType",!0)},selectedValue:this.state.formData.QPRType.Value}))),r.a.createElement(be.a,{item:!0,container:!0,md:6,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Ea.a,{shrink:!0,htmlFor:"ddlCaseStatus",required:!0},"CAPA (8D)"),r.a.createElement(ba.a,{id:"ddlCAPA",value:this.state.formData.CAPA,onChange:function(t){return e.handleChange(t.target.value,"CAPA",!0)}},r.a.createElement(et.a,{value:!0},"Yes"),r.a.createElement(et.a,{value:!1},"No")))),r.a.createElement(be.a,{item:!0,container:!0,md:6,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"txtQADRefNo",label:"QAD Ref. # ",defaultValue:this.state.formData.QADRefNo,margin:"dense",onChange:function(t){return e.handleChange(t.target.value.trim(),"QADRefNo",!0)},required:!0,error:!this.state.formControl.QADRefNo.valid,helperText:this.state.formControl.QADRefNo.message}))),r.a.createElement(be.a,{item:!0,container:!0,md:6,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Fa,{jsonFileName:"qualityProblemReport",jsonPropertyName:"QPRStatus",formControl:this.state.formControl.QPRStatus,propertyName:"QPRStatus",required:!0,label:"QPR Status",handleChange:function(t){return e.handleChange(t,"QPRStatus",!0)},selectedValue:this.state.formData.QPRStatus.Value})))),r.a.createElement(be.a,{container:!0,item:!0,style:{marginTop:25},direction:"row",justify:"space-around",alignItems:"center",xs:12},r.a.createElement(bn,{label:"Case Info",style:{width:"100%"}},r.a.createElement(be.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center",spacing:3},r.a.createElement(be.a,{item:!0,container:!0,md:6,xs:12,sm:12},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Da.b,{style:{width:"100%"},margin:"dense",id:"date-picker-dialog",label:"Date Registered",format:"dd-MMM-yyyy",value:this.state.formData.ReportDate,onChange:function(t){return e.handleChange(t,"ReportDate")},disableFuture:!0}))),r.a.createElement(be.a,{item:!0,container:!0,md:6,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%"}},r.a.createElement(ge.a,{id:"txtSIRef",label:"SI Ref",defaultValue:this.state.formData.SIRef,margin:"dense",onChange:function(t){return e.handleChange(t.target.value,"SIRef",!1)}}))),r.a.createElement(be.a,{item:!0,container:!0,md:6,xs:12,sm:12},r.a.createElement(Hr,{selectedValue:this.state.formData.Factory,propertyName:"Factory",handleChange:this.handleChange,formControl:this.state.formControl.Factory})),r.a.createElement(be.a,{item:!0,container:!0,md:6,xs:12,sm:12}),r.a.createElement(be.a,{item:!0,container:!0,md:6,xs:12,sm:12},r.a.createElement(Qn,{selectedValue:this.state.formData.Buyer,propertyName:"Buyer",handleChange:function(t){return e.handleChange(t,"Buyer",!0)},formState:this.state.formControl.Buyer})),r.a.createElement(be.a,{item:!0,container:!0,md:6,xs:12,sm:12},r.a.createElement(Fl,{handleChange:function(t){return e.handleChange(t,"ProductGrade",!0)},formControl:this.state.formControl.ProductGrade,propertyName:"Grade",selectedValue:this.state.formData.ProductGrade,countryId:""===this.state.formData.Factory?"":void 0===this.state.formData.Factory.FctyCountry._id?this.state.formData.Factory.FctyCountry:this.state.formData.Factory.FctyCountry._id})),r.a.createElement(be.a,{item:!0,container:!0,md:6,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%"}},r.a.createElement(ge.a,{id:"txtBuyerRef",label:"Customer Ref",defaultValue:this.state.formData.BuyerRef,margin:"dense",onChange:function(t){return e.handleChange(t.target.value,"BuyerRef",!1)}}))),r.a.createElement(be.a,{item:!0,container:!0,md:6,xs:12,sm:12},r.a.createElement(mu,{selectedValue:this.state.formData.PackingType,formControl:this.state.formControl.PackingType,propertyName:"PackingType",handleChange:function(t){return e.handleChange(t,"PackingType",!0)}})),r.a.createElement(be.a,{item:!0,container:!0,md:6,xs:12,sm:12},r.a.createElement(cw,{selectedValue:this.state.formData.Reason._id,formControl:this.state.formControl.Reason,propertyName:"Reason",handleChange:function(t){return e.handleChange(t,"Reason",!0)}})),r.a.createElement(be.a,{item:!0,container:!0,md:6,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%"}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Quantity Affected (kg)",defaultValue:this.state.formData.QuantityAffected,thousandSeparator:!0,decimalScale:2,fixedDecimalScale:!0,onValueChange:function(t){e.handleChange(void 0===t.floatValue?0:t.floatValue,"QuantityAffected",!0)}}))),r.a.createElement(be.a,{item:!0,container:!0,md:12,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%"}},r.a.createElement(ge.a,{id:"txtProblemDesc",label:"Problem Description",defaultValue:this.state.formData.ProblemDesc,onChange:function(t){return e.handleChange(t.target.value,"ProblemDesc")},multiline:!0,rows:2})))))),r.a.createElement(be.a,{container:!0,item:!0,style:{marginTop:25},direction:"row",justify:"space-around",alignItems:"center",xs:12},r.a.createElement(bn,{label:"Disposition",style:{width:"100%"}},r.a.createElement(be.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center",spacing:3},r.a.createElement(be.a,{item:!0,container:!0,md:6,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Fa,{jsonFileName:"qualityProblemReport",jsonPropertyName:"Category",formControl:this.state.formControl.Category,propertyName:"Category",required:!0,label:"Category",handleChange:function(t){return e.handleChange(t,"Category",!0)},selectedValue:this.state.formData.Category.Value}))),r.a.createElement(be.a,{item:!0,container:!0,md:6,xs:12,sm:12}),r.a.createElement(be.a,{item:!0,container:!0,md:6,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%"}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Value of the affected quantity (USD)",defaultValue:this.state.formData.ClaimAmt,thousandSeparator:!0,decimalScale:2,fixedDecimalScale:!0,onValueChange:function(t){e.handleChange(void 0===t.floatValue?0:t.floatValue,"ClaimAmt",!0)}}))),r.a.createElement(be.a,{item:!0,container:!0,md:6,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%"}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Cost of returning (transportation) (USD)",defaultValue:this.state.formData.TransportationAmt,thousandSeparator:!0,decimalScale:2,fixedDecimalScale:!0,onValueChange:function(t){e.handleChange(void 0===t.floatValue?0:t.floatValue,"TransportationAmt",!0)}}))),r.a.createElement(be.a,{item:!0,container:!0,md:6,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%"}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Cost of packaging (MB rental) (USD)",defaultValue:this.state.formData.PackingAmt,thousandSeparator:!0,decimalScale:2,fixedDecimalScale:!0,onValueChange:function(t){e.handleChange(void 0===t.floatValue?0:t.floatValue,"PackingAmt",!0)}}))),r.a.createElement(be.a,{item:!0,container:!0,md:6,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%"}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Other Cost (USD)",defaultValue:this.state.formData.OtherAmt,thousandSeparator:!0,decimalScale:2,fixedDecimalScale:!0,onValueChange:function(t){e.handleChange(void 0===t.floatValue?0:t.floatValue,"OtherAmt",!0)}}))),r.a.createElement(be.a,{item:!0,container:!0,md:6,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%"}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Cost of reprocessing (USD)",defaultValue:this.state.formData.ReprocessAmt,thousandSeparator:!0,decimalScale:2,fixedDecimalScale:!0,onValueChange:function(t){e.handleChange(void 0===t.floatValue?0:t.floatValue,"ReprocessAmt",!0)}}))),r.a.createElement(be.a,{item:!0,container:!0,md:6,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%"}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Grand Total (USD)",value:this.state.formData.ClaimAmt+this.state.formData.TransportationAmt+this.state.formData.PackingAmt+this.state.formData.OtherAmt+this.state.formData.ReprocessAmt,thousandSeparator:!0,decimalScale:2,fixedDecimalScale:!0,inputProps:{readOnly:!0}}))),r.a.createElement(be.a,{item:!0,container:!0,md:12,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%"}},r.a.createElement(ge.a,{id:"txtFactoryComment",label:"Factory Comment",defaultValue:this.state.formData.FactoryComment,onChange:function(t){return e.handleChange(t.target.value,"FactoryComment")},multiline:!0,rows:2}))),r.a.createElement(be.a,{item:!0,container:!0,md:6,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Fa,{jsonFileName:"qualityProblemReport",jsonPropertyName:"CAPStatus",formControl:this.state.formControl.CAPStatusInternal,propertyName:"CAPStatusInternal",required:!0,label:"Status",handleChange:function(t){return e.handleChange(t,"CAPStatusInternal",!0)},selectedValue:this.state.formData.CAPStatusInternal.Value}))),r.a.createElement(be.a,{item:!0,container:!0,md:12,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%"}},r.a.createElement(ge.a,{id:"txtQADComment",label:"QAD Comment",defaultValue:this.state.formData.QADComment,onChange:function(t){return e.handleChange(t.target.value,"QADComment")},multiline:!0,rows:2}))),r.a.createElement(be.a,{item:!0,container:!0,md:6,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Fa,{jsonFileName:"qualityProblemReport",jsonPropertyName:"CAPStatus",formControl:this.state.formControl.CAPStatusBuyer,propertyName:"CAPStatusBuyer",required:!0,label:"CAP Status Buyer",handleChange:function(t){return e.handleChange(t,"CAPStatusBuyer",!0)},selectedValue:this.state.formData.CAPStatusBuyer.Value})))))),r.a.createElement(be.a,{container:!0,item:!0,style:{marginTop:25},direction:"row",justify:"space-around",alignItems:"center",xs:12},r.a.createElement(be.a,{item:!0,container:!0,md:12,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%"}},r.a.createElement(ge.a,{id:"txtRemarks",label:"Additional Comment",defaultValue:this.state.formData.Remarks,onChange:function(t){return e.handleChange(t.target.value,"Remarks")},multiline:!0,rows:2})))),r.a.createElement(be.a,{container:!0,item:!0,style:{marginTop:25},direction:"row",justify:"space-around",alignItems:"center",xs:12},r.a.createElement(bn,{label:"QPR Analysis",style:{width:"100%"}},r.a.createElement(be.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center",spacing:3,style:{margin:10}},r.a.createElement(be.a,{item:!0,md:1,xs:1,sm:1},r.a.createElement(he.a,{onClick:function(){return e.openEightDForm()},variant:"contained"},"8D")),r.a.createElement(be.a,{item:!0,md:5,xs:5,sm:5},r.a.createElement(ya.a,{style:{width:"100%"}},r.a.createElement(ge.a,{label:"Report #",value:void 0===this.state.eightDFormData.EightDNumber?"":this.state.eightDFormData.EightDNumber,inputProps:{readOnly:!0}}))),r.a.createElement(be.a,{item:!0,md:3,xs:3,sm:3},r.a.createElement(ya.a,{style:{width:"100%"}},r.a.createElement(ge.a,{label:"Rev",value:void 0===this.state.eightDFormData.RevisionNo?"":this.state.eightDFormData.RevisionNo,inputProps:{readOnly:!0}}))),r.a.createElement(be.a,{item:!0,md:3,xs:3,sm:3},r.a.createElement(ye.a,{control:r.a.createElement(ve.a,{checked:!0===this.state.eightDFormData.Closed,value:!0===this.state.eightDFormData.Closed,disabled:!0,color:"primary"}),label:"Done"}))))),r.a.createElement(be.a,{container:!0,direction:"row",justify:"space-around",alignItems:"center",xs:12},r.a.createElement(tu,{parentName:"QualityProblemReport",parentId:this.props.formData._id,formData:this.state.formData.SupportDocument,updateSupportDoc:this.updateSupportDoc,addSupportDoc:this.addSupportDoc,deleteSupportDoc:this.deleteSupportDoc})))))),r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-evenly",alignItems:"center",md:10,xs:12,sm:12,xl:10,lg:10},this.state.eightDFormOpen?r.a.createElement(wm,{formData:this.state.eightDFormData,formAction:this.state.eightDFormAction,formOpen:this.state.eightDFormOpen,onSuccess:this.onEightDSuccess,closeForm:this.closeEightDForm}):""),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.snackClass,autoHideDuration:600,open:this.state.snackOpen,onClose:this.snackOpen,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.snackMessage)}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return{formOpen:e.formOpen}}}]),t}(r.a.Component),pw=a(23),fw=(Object(n.forwardRef)((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),r.a.forwardRef((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).snackOpen=function(e,t,n){var r;return l.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(void 0===e||null===e||void 0===t||null===t){o.next=12;break}if(void 0!==n){o.next=7;break}return o.next=4,l.a.awrap(ka(e,t));case 4:o.t0=o.sent,o.next=8;break;case 7:o.t0=n;case 8:r=o.t0,a.setState({snackOpen:!a.state.snackOpen,alertMessage:r,alertClass:e}),o.next=13;break;case 12:a.setState({snackOpen:!1});case 13:case"end":return o.stop()}}))},a.dialogOpen=function(e){var t;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,l.a.awrap(ka("confirmation","delete"));case 2:t=n.sent,a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:e,dialogMessage:r.a.createElement("span",null,void 0!==t?t.replace("[Name]",e.QADRefNo):"")});case 4:case"end":return n.stop()}}))},a.diaLogClose=function(){a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:null})},a.onDelete=function(){var e=Object(je.a)(a.state.data),t=e.indexOf(a.state.currentDeleteData);void 0!==a.state.currentDeleteData&&null!==a.state.currentDeleteData&&iw.delete(a.state.currentDeleteData._id).then((function(n){!0===n.code?(e.splice(t,1),a.setState({data:e,dialogOpen:!1},(function(){return a.snackOpen("success","delete")}))):a.setState({dialogOpen:!1},(function(){return a.snackOpen("error","server")}))}))},a.state={columns:[{title:"Print QPR",field:"_id",render:function(e){return r.a.createElement(bt.a,{"aria-label":"Print",className:"",onClick:function(){return a.printFormData(e._id)}},r.a.createElement(ao.a,{fontSize:"inherit"}))}},{title:"Print 8D",field:"_id",render:function(e){return r.a.createElement(bt.a,{"aria-label":"Print",className:"",onClick:function(){return a.print8D(e.QADRefNo)}},r.a.createElement(ao.a,{fontSize:"inherit"}))}},{title:"Factory",field:"Factory",render:function(e){return r.a.createElement("span",null,e.Factory.FctyName)}},{title:"QAD Ref.#",field:"QADRefNo"},{title:"Ref.#",field:"BuyerRef"},{title:"Date",field:"ReportDate",render:function(e){return r.a.createElement("span",null,void 0===e?"":new Date(e.ReportDate).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric"}))}},{title:"Buyer",field:"Buyer",render:function(e){return r.a.createElement("span",null,e.Buyer.name)}},{title:"Grade",field:"ProductGrade",render:function(e){return r.a.createElement("span",null,e.ProductGrade.GradeName)}},{title:"Category",field:"Category",render:function(e){return r.a.createElement("span",null,e.Category.Name)}},{title:"Reason",field:"Reason",render:function(e){return r.a.createElement("span",null,e.Reason.QPRReason)}},{title:"Detail",field:"ProblemDesc"},{title:"Qty",field:"QuantityAffected",render:function(e){return r.a.createElement(Xa.a,{value:e.QuantityAffected,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"Grand Total",render:function(e){return r.a.createElement(Xa.a,{value:e.ClaimAmt+e.TransportationAmt+e.PackingAmt+e.OtherAmt+e.ReprocessAmt,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"Status",field:"QPRStatus",render:function(e){return r.a.createElement("span",null,e.QPRStatus.Name)}},{title:"Status Internal",field:"CAPStatusInternal",render:function(e){return r.a.createElement("span",null,e.CAPStatusInternal.Name)}},{title:"Status Buyer",field:"CAPStatusBuyer",render:function(e){return r.a.createElement("span",null,e.CAPStatusBuyer.Name)}},{title:"Operator",field:"LastUpdatedBy"},{title:"Last Updated",field:"LastUpdatedAt",render:function(e){return r.a.createElement("span",null,void 0===e?"":new Date(e.LastUpdatedAt).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}))},editable:"never"}],data:[],formData:null,currentDeleteData:null,formOpen:!1,formAction:"",snackOpen:!1,dialogOpen:!1,alertMessage:"",dialogMessage:"",alertClass:""},a.QualityProblemReportModel=pw(lw),a.openForm=a.openForm.bind(Object(Pe.a)(a)),a.closeForm=a.closeForm.bind(Object(Pe.a)(a)),a.onSuccess=a.onSuccess.bind(Object(Pe.a)(a)),a.snackOpen=a.snackOpen.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initQualityProblemReport()}},{key:"openForm",value:function(e){var t=e,a=this.state.formAction;void 0===t||null===t?(t=this.QualityProblemReportModel,a="Add"):a="update",this.setState({formData:t,formOpen:!this.state.formOpen,formAction:a})}},{key:"closeForm",value:function(){this.setState({formData:null,formOpen:!1,formAction:""})}},{key:"initQualityProblemReport",value:function(){var e=this;iw.get("").then((function(t){!0===t.code?e.setState({data:t.data}):e.snackOpen("error","server")}))}},{key:"onSuccess",value:function(e){var t=this,a=Object(je.a)(this.state.data);if(void 0!==e&&null!==e)if("Add"===this.state.formAction)a.push(e),this.setState({data:a,formOpen:!this.state.formOpen,formAction:"",formData:null},(function(){return t.snackOpen("success","add")}));else{var n=a.indexOf(this.state.formData);a[n]=e,this.setState({data:a,formOpen:!this.state.formOpen,formAction:"",formData:null},(function(){return t.snackOpen("success","update")}))}else this.snackOpen("error","server")}},{key:"printFormData",value:function(e){var t=this;iw.getOne("print/".concat(e)).then((function(e){return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:!0===e.code?Co(new Uint8Array(e.data.data),"QPR_".concat(new Date(Date.now()).toString("ddMMyyyy"),".pdf")):t.snackOpen("error","server");case 1:case"end":return a.stop()}}))})).catch((function(e){t.snackOpen("error","server")}))}},{key:"print8D",value:function(e){var t=this;Em.getOne("print/".concat(e)).then((function(e){return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:!0===e.code?Co(new Uint8Array(e.data.data),"8D_".concat(new Date(Date.now()).toString("ddMMyyyy"),".pdf")):t.snackOpen("error","",e.message);case 1:case"end":return a.stop()}}))})).catch((function(e){t.snackOpen("error","server")}))}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{container:!0,direction:"column",justify:"center",wrap:"wrap",style:{margin:"20px 20px 10px 0px"}},r.a.createElement(be.a,{item:!0,xs:12},r.a.createElement(Ve.a,{title:"Quality Problem Report",columns:this.state.columns,data:this.state.data,components:{Toolbar:function(t){return r.a.createElement("div",null,r.a.createElement(Le.MTableToolbar,t),r.a.createElement("div",{style:{padding:"0px 15px"}},r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:function(){return e.openForm(t.rowData)},"aria-label":"add"},r.a.createElement(wt.a,null))))}},actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.data,columns:e.state.columns,fileName:"Quality Problem Report"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.initQualityProblemReport()}},{icon:"edit",tooltip:"Edit User",onClick:function(t,a){return e.openForm(a)}},{icon:"delete",tooltip:"Delete User",onClick:function(t,a){return e.dialogOpen(a)}}],options:{}})),r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-evenly",alignItems:"center",md:10,xs:12,sm:12,xl:10,lg:10},this.state.formOpen?r.a.createElement(mw,{formData:this.state.formData,formAction:this.state.formAction,formOpen:this.state.formOpen,onSuccess:this.onSuccess,closeForm:this.closeForm}):""),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:600,open:this.state.snackOpen,onClose:this.snackOpen,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.diaLogClose,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.diaLogClose,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDelete,color:"primary"},"Delete"))))}}]),t}(r.a.Component)),hw=(a(1015),a(94)),gw=a.n(hw),yw=(a(1016),a(316)),vw=a.n(yw),Cw=a(317),Dw=a.n(Cw),Ew=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).exportPdf=function(){!function(e,t){var a="data:application/pdf;base64,".concat(e),n=document.createElement("a"),r="".concat(t,".pdf");n.href=a,n.download=r,n.click()}(a.props.pdfData,a.props.name)},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(De.a,null,void 0!==this.props.pdfData&&null!==this.props.pdfData?"url"===this.props.type?r.a.createElement("div",null,r.a.createElement(w.a,{position:"static"},r.a.createElement(F.a,null,r.a.createElement(bt.a,{edge:"start",color:"inherit","aria-label":"menu",onClick:this.exportPdf},r.a.createElement(Dw.a,null)))),r.a.createElement(vw.a,{style:{width:"100%"},document:{url:this.props.pdfData},scale:1.3,css:"canvasContainer",canvasCss:"t-canvas"})):r.a.createElement("div",null,r.a.createElement(w.a,{position:"static"},r.a.createElement(F.a,null,r.a.createElement(bt.a,{edge:"start",color:"inherit","aria-label":"menu",onClick:this.exportPdf},r.a.createElement(Dw.a,null)))),r.a.createElement(vw.a,{style:{width:"100%"},document:{base64:this.props.pdfData},scale:1.3,css:"canvasContainer",canvasCss:"t-canvas"})):"")}}]),t}(r.a.Component),bw=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).handelChange=function(e,t){var n=Object(me.a)({},a.state.data);n[t]=e,a.setState({data:n})},a.getReport=function(){We("CheckSheet/Reports/TrolleyFilling/".concat(a.state.data.Factory._id,"/").concat(new Date(a.state.data.Date).toDateString(),"/").concat(a.state.data.Shift._id)).then((function(e){if(200===e.status&&"Succeed"===e.data.message){var t=e.data.data;a.setState({pdfData:t})}}))},a.state={data:null,pdfData:null},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{style:{margin:"20px 0px 0px 0px"}},r.a.createElement(be.a,{item:!0,xs:12},r.a.createElement(x.a,{variant:"h5"},"Trolley Filling")),r.a.createElement(be.a,{item:!0,xs:12},r.a.createElement(be.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center"},r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:3,lg:3},r.a.createElement(Hr,{selectedValue:null===this.state.data||void 0===this.state.data.Factory?"":this.state.data.Factory,propertyName:"Factory",formControl:{valid:!0,message:""},handleChange:this.handelChange,required:!1})),r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:3,lg:3},r.a.createElement(ya.a,{style:{width:"100%",margin:7}},r.a.createElement(ns,{selectedValue:null===this.state.data||void 0===this.state.data.Shift?"":this.state.data.Shift,factoryId:null===this.state.data?"":this.state.data.Factory._id,propertyName:"Shift",formControl:{valid:!0,message:""},handleChange:this.handelChange,required:!1}))),r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:3,lg:3},r.a.createElement(ya.a,{style:{width:"100%",margin:7}},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Da.b,{style:{width:"100%"},margin:"dense",id:"date-picker-dialog",label:"Date",format:"dd-MMM-yyyy",value:void 0===this.state.data||null===this.state.data?Date.now():this.state.data.Date,onChange:function(t){return e.handelChange(t,"Date")},KeyboardButtonProps:{"aria-label":"Date"}})))))),r.a.createElement(be.a,{item:!0,xs:3},r.a.createElement(fo.a,{variant:"extended",onClick:this.getReport},r.a.createElement(gw.a,null),"Generate")),r.a.createElement(be.a,{item:!0,xs:12,style:{marginTop:15}},r.a.createElement(Ew,{pdfData:this.state.pdfData,name:"TrolleyFilling ".concat(new Date(Date.now()).toDateString()),type:"base64"})))}}]),t}(r.a.Component),Sw=(a(1033),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).handelChange=function(e,t){var n=Object(me.a)({},a.state.data);n[t]=e,a.setState({data:n})},a.getReport=function(){We("CheckSheet/Reports/ToolCheck/".concat(a.state.data.Factory._id,"/").concat(new Date(a.state.data.Date).toDateString(),"/").concat(a.state.data.Shift._id)).then((function(e){if(200===e.status&&"Succeed"===e.data.message){var t=e.data.data;a.setState({pdfData:t})}}))},a.state={data:null,pdfData:null},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{style:{margin:"20px 0px 0px 0px"}},r.a.createElement(be.a,{item:!0,xs:12},r.a.createElement(x.a,{variant:"h5"},"Tools Check")),r.a.createElement(be.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center"},r.a.createElement(be.a,{item:!0,xs:12,sm:6,md:3,lg:3},r.a.createElement(Hr,{selectedValue:null===this.state.data||void 0===this.state.data.Factory?"":this.state.data.Factory,propertyName:"Factory",formControl:{valid:!0,message:""},handleChange:this.handelChange,required:!1})),r.a.createElement(be.a,{item:!0,xs:12,sm:6,md:3,lg:3},r.a.createElement(ya.a,{style:{width:"100%",margin:7}},r.a.createElement(ns,{selectedValue:null===this.state.data||void 0===this.state.data.Shift?"":this.state.data.Shift,factoryId:null===this.state.data?"":this.state.data.Factory._id,propertyName:"Shift",formControl:{valid:!0,message:""},handleChange:this.handelChange,required:!1}))),r.a.createElement(be.a,{item:!0,xs:12,sm:6,md:3,lg:3},r.a.createElement(ya.a,{style:{width:"100%",margin:7}},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Da.b,{style:{width:"100%"},margin:"dense",id:"date-picker-dialog",label:"Date",format:"dd-MMM-yyyy",value:void 0===this.state.data||null===this.state.data?Date.now():this.state.data.Date,onChange:function(t){return e.handelChange(t,"Date")},KeyboardButtonProps:{"aria-label":"Date"}}))))),r.a.createElement(be.a,{item:!0,xs:3},r.a.createElement(fo.a,{variant:"extended",onClick:this.getReport},r.a.createElement(gw.a,null),"Generate")),r.a.createElement(be.a,{item:!0,xs:12,style:{marginTop:15}},r.a.createElement(Ew,{pdfData:this.state.pdfData,name:"ToolCheck ".concat(new Date(Date.now()).toDateString()),type:"base64"})))}}]),t}(r.a.Component)),Ow=(a(1034),a(460)),kw=a(32),ww=a(140),Fw=a.n(ww),xw=a(15);var Tw=Fw()((function(e){var t=Object(kw.c)(e.palette.primary.main,.3),a="linear-gradient(to right, ".concat(t,", ").concat(t,")");return{dateRangePickerDialog:{"& .MuiPickersCalendar-transitionContainer":{minHeight:218,marginTop:10}},day:{width:40,height:36,fontSize:e.typography.caption.fontSize,margin:0,color:e.palette.text.primary,fontWeight:e.typography.fontWeightMedium,padding:0,transition:"none","&::after":{borderRadius:"100%",bottom:0,boxSizing:"border-box",content:'""',height:36,width:36,left:0,margin:"auto",position:"absolute",right:0,top:0,transform:"scale(0)",zIndex:2},"&:hover":{backgroundColor:"transparent",color:e.palette.text.primary,"&::after":{backgroundColor:e.palette.background.paper,border:"2px solid ".concat(e.palette.primary.main),bottom:-2,left:-2,height:36,width:36,right:-2,top:-2,boxSizing:"content-box",transform:"scale(1)"}},"& > .MuiIconButton-label":{zIndex:3}},hidden:{opacity:0,pointerEvents:"none"},current:{color:e.palette.primary.main,fontWeight:600},focusedRange:{color:e.palette.primary.contrastText,background:"".concat(a," no-repeat 0/20px 40px, ").concat(a," no-repeat 20px 0/20px 40px"),fontWeight:e.typography.fontWeightMedium,width:40,marginRight:0,marginLeft:0,borderRadius:0},dayDisabled:{pointerEvents:"none",color:e.palette.text.hint},beginCap:{"&::after":{transform:"scale(1)",backgroundColor:e.palette.primary.main}},endCap:{"&::after":{transform:"scale(1)",backgroundColor:e.palette.primary.main}},focusedFirst:{background:"".concat("linear-gradient(to right, rgba(0,0,0,0.0), rgba(0,0,0,0.0))"," no-repeat 0/20px 40px,").concat(a," no-repeat 20px 0/20px 40px")},focusedLast:{background:"".concat(a," no-repeat 0/20px 40px,").concat("linear-gradient(to right, rgba(0,0,0,0.0), rgba(0,0,0,0.0))"," no-repeat 20px 0/20px 40px")}}}),{name:"DateRangePicker"})((function(e){var t=e.classes,a=e.value,o=e.onChange,s=e.labelFunc,i=e.format,l=e.emptyLabel,c=e.autoOk,u=e.onOpen,d=e.onClose,m=e.open,p=Object(Ow.a)(e,["classes","value","onChange","labelFunc","format","emptyLabel","autoOk","onOpen","onClose","open"]),f=Object(n.useState)(a[0]),h=Object(pe.a)(f,2),g=h[0],v=h[1],C=Object(n.useState)(a[1]),D=Object(pe.a)(C,2),E=D[0],b=D[1],S=Object(n.useState)(void 0),O=Object(pe.a)(S,2),k=O[0],w=O[1],F=Object(n.useState)(void 0),x=Object(pe.a)(F,2),T=x[0],N=x[1],j=Object(n.useState)(!1),P=Object(pe.a)(j,2),A=P[0],M=P[1],_=Object(n.useState)(void 0),I=Object(pe.a)(_,2),R=I[0],L=I[1],V=Object(n.useState)(!1),B=Object(pe.a)(V,2),U=B[0],q=B[1],G=Object(Ca.c)(),W=Math.min(g,E||R),H=Math.max(g,E||R),Q=Object(n.useState)(!1),z=Object(pe.a)(Q,2),Y=z[0],K=z[1],J=void 0!==m?m:Y;Object(n.useEffect)((function(){if(J&&U&&!k&&!T)return q(!1),w(g),void N(E);J||U||(v(k),b(T),L(void 0),M(!1)),J&&c&&!U&&g&&E&&A&&(q(!0),d?d():K(!1)),U&&g&&E&&!J&&A&&(M(!1),o({begin:g,end:E}),d?d():K(!1))}),[g,E,c,U,J,k,A,T]);var Z=function(e){return G.format(e,i||G.dateFormat)};return r.a.createElement(Da.b,Object.assign({},p,{value:g,renderDay:function(e,a,n,o){var s;return r.a.cloneElement(o,{onClick:function(t){M(!0),t.stopPropagation(),g?E?(v(e),b(void 0)):(G.isBeforeDay(e,g)?(b(g),v(e)):b(e),c&&(w(void 0),N(void 0))):v(e)},onMouseEnter:function(){return requestAnimationFrame((function(){return L(e)}))},onFocus:function(){return requestAnimationFrame((function(){return L(e)}))},className:Object(xw.default)(t.day,(s={},Object(y.a)(s,t.hidden,o.props.hidden),Object(y.a)(s,t.current,o.props.current),Object(y.a)(s,t.isDisabled,o.props.disabled),Object(y.a)(s,t.focusedRange,G.isAfterDay(e,W)&&G.isBeforeDay(e,H)||G.isSameDay(e,W)&&!G.isSameDay(e,H)||G.isSameDay(e,H)&&!G.isSameDay(e,W)),Object(y.a)(s,t.focusedFirst,G.isSameDay(e,W)&&!G.isSameDay(e,H)),Object(y.a)(s,t.focusedLast,G.isSameDay(e,H)&&!G.isSameDay(e,W)),Object(y.a)(s,t.beginCap,G.isSameDay(e,W)),Object(y.a)(s,t.endCap,G.isSameDay(e,H)),s))})},margin:"dense",id:"date-picker-dialog",label:"Date",open:J,onOpen:function(){q(!1),w(g),N(E),u?u():K(!0)},onAccept:function(){g&&E||(R&&G.isBeforeDay(g,R)?b(R):(b(g),v(R))),w(void 0),N(void 0),q(!0)},onClose:function(){d?d():K(!1)},onChange:function(){},labelFunc:function(e,t){return J?k&&T?s?s([k,T],t):"".concat(Z(k)," - ").concat(Z(T)):l||"":s?s([g,E],t):e&&g&&E?"".concat(Z(g)," - ").concat(Z(E)):l||""},DialogProps:{className:t.dateRangePickerDialog}}))})),Nw=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).handelChange=function(e,t){var n=Object(me.a)({},a.state.data);n[t]=e,a.setState({data:n})},a.getReport=function(){We("CheckSheet/Reports/MentalDetector/".concat(a.state.data.Factory._id,"/").concat(new Date(a.state.beginDate).toDateString(),"/").concat(new Date(a.state.endDate).toDateString())).then((function(e){if(200===e.status&&"Succeed"===e.data.message){var t=e.data.data;a.setState({pdfData:t})}}))},a.setBegin=function(e){a.setState({beginDate:e})},a.setEnd=function(e){a.setState({endDate:e},(function(){return console.log(a.state)}))},a.state={data:null,pdfData:null,beginDate:!1,endDate:!1},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{style:{margin:"20px 0px 0px 0px"}},r.a.createElement(be.a,{item:!0,xs:12},r.a.createElement(x.a,{variant:"h5"},"Metal Detector Verification")),r.a.createElement(be.a,{item:!0,xs:12},r.a.createElement(be.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center"},r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:3,lg:3},r.a.createElement(Hr,{selectedValue:null===this.state.data||void 0===this.state.data.Factory?"":this.state.data.Factory,propertyName:"Factory",formControl:{valid:!0,message:""},handleChange:this.handelChange,required:!1})),r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:3,lg:3},r.a.createElement(ya.a,{style:{width:"100%",marginTop:-10},margin:"dense"},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Tw,{autoOk:!0,value:[],placeholder:"Select a date range",onChange:function(t){e.setBegin(t.begin),e.setEnd(t.end)}})))))),r.a.createElement(be.a,{item:!0,xs:3},r.a.createElement(fo.a,{variant:"extended",onClick:this.getReport},r.a.createElement(gw.a,null),"Generate")),r.a.createElement(be.a,{item:!0,xs:12,style:{marginTop:15}},r.a.createElement(Ew,{pdfData:this.state.pdfData,name:"MetalDetector ".concat(new Date(Date.now()).toDateString()),type:"base64"})))}}]),t}(r.a.Component),jw=(a(1035),a(23)),Pw=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).snackOpen=function(e,t){var n;return l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0===e||null===e||void 0===t||null===t){r.next=7;break}return r.next=3,l.a.awrap(ka(e,t));case 3:n=r.sent,a.setState({snackOpen:!a.state.snackOpen,alertMessage:n,alertClass:e}),r.next=8;break;case 7:a.setState({snackOpen:!1});case 8:case"end":return r.stop()}}))},a.onPalletSeqChange=function(e){return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===e||""===e){t.next=3;break}return t.next=3,l.a.awrap(Uv.getOneCreatePallet(e._id).then((function(e){!0===e.code&&a.setState({palletData:e.data},(function(){return a.initTestResultSample()}))})));case 3:case"end":return t.stop()}}))},a.onLotChange=function(e){return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===e||""===e){t.next=3;break}return t.next=3,l.a.awrap(XC.getOne(e._id).then((function(e){!0===e.code&&a.setState({lotData:e.data})})));case 3:case"end":return t.stop()}}))},a.onDetect=function(e){var t=e.codeResult.code;qv.getOneCreatePallet("".concat(t)).then((function(e){!0===e.code&&(a.setState({startScan:!1}),a.onPalletSeqChange(e.data))})).catch((function(e){a.snackOpen("error","server")}))},a.onPrintQR=function(){"Barcode"===a.state.mode||"ManualByPallet"===a.state.mode?void 0!==a.state.palletData._id&&Do("getQRCode/SinglePallet/".concat(a.state.palletData._id)).then((function(e){!0===e.code?Co(new Uint8Array(e.data.data),"qrcode_pallet_".concat(Date.now().toLocaleString(),".pdf")):a.snackOpen("error","server")})):void 0!==a.state.lotData._id&&Do("getQRCode/MultiPallet/".concat(a.state.lotData._id)).then((function(e){!0===e.code?Co(new Uint8Array(e.data.data),"qrcode_pallet_".concat(Date.now().toLocaleString(),".pdf")):a.snackOpen("error","server")}))},a.onDelete=function(){null!==a.state.currentDeleteData&&Kv.delete("".concat(a.state.currentDeleteData._id)).then((function(e){if(!0===e.code){var t=Object(je.a)(a.state.testResultSampleData),n=t.indexOf(a.state.currentDeleteData);t.splice(n,1),a.setState({testResultSampleData:t},(function(){return a.diaLogClose()}))}else a.snackOpen("error","server")}))},a.state={palletData:jw(Lv),lotData:jw(eD),testResultData:jw(HC),testResultSampleCol:[{title:"Dirt",field:"Dirt",render:function(e){return r.a.createElement("span",null,void 0===e.Dirt?"0.00":e.Dirt)},editComponent:function(e){return r.a.createElement(Xa.a,{customInput:ge.a,label:"Dirt",defaultValue:void 0===e.value?0:e.value,decimalSeparator:".",decimalScale:2,fixedDecimalScale:!0,onValueChange:function(t){t.formattedValue;var a=t.value;e.onChange(a)}})}},{title:"Ash",field:"Ash",render:function(e){return r.a.createElement("span",null,void 0===e.Ash?"0.00":e.Ash)},editComponent:function(e){return r.a.createElement(Xa.a,{customInput:ge.a,label:"Dirt",defaultValue:void 0===e.value?0:e.value,decimalSeparator:".",decimalScale:2,fixedDecimalScale:!0,onValueChange:function(t){t.formattedValue;var a=t.value;e.onChange(a)}})}},{title:"VM",field:"VM",render:function(e){return r.a.createElement("span",null,void 0===e.VM?"0.00":e.VM)},editComponent:function(e){return r.a.createElement(Xa.a,{customInput:ge.a,label:"VM",defaultValue:void 0===e.value?0:e.value,decimalSeparator:".",decimalScale:2,fixedDecimalScale:!0,onValueChange:function(t){t.formattedValue;var a=t.value;e.onChange(a)}})}},{title:"Nitrogen",field:"Nitrogen",render:function(e){return r.a.createElement("span",null,void 0===e.Nitrogen?"0.00":e.Nitrogen)},editComponent:function(e){return r.a.createElement(Xa.a,{customInput:ge.a,label:"Nitrogen",defaultValue:void 0===e.value?0:e.value,decimalSeparator:".",decimalScale:2,fixedDecimalScale:!0,onValueChange:function(t){t.formattedValue;var a=t.value;e.onChange(a)}})}},{title:"PO",field:"PO",render:function(e){return r.a.createElement("span",null,void 0===e.PO?"0.00":e.PO)},editComponent:function(e){return r.a.createElement(Xa.a,{customInput:ge.a,label:"PO",defaultValue:void 0===e.value?0:e.value,decimalSeparator:".",decimalScale:2,fixedDecimalScale:!0,onValueChange:function(t){t.formattedValue;var a=t.value;e.onChange(a)}})}},{title:"P30",field:"P30",render:function(e){return r.a.createElement("span",null,void 0===e.P30?"0.00":e.P30)},editComponent:function(e){return r.a.createElement(Xa.a,{customInput:ge.a,label:"P30",defaultValue:void 0===e.value?0:e.value,decimalSeparator:".",decimalScale:2,fixedDecimalScale:!0,onValueChange:function(t){t.formattedValue;var a=t.value;e.onChange(a)}})}},{title:"PRI",field:"PRI",render:function(e){return r.a.createElement("span",null,void 0===e.PRI?"0.00":e.PRI)},editComponent:function(e){return r.a.createElement(Xa.a,{customInput:ge.a,label:"PRI",defaultValue:void 0===e.value?0:e.value,decimalSeparator:".",decimalScale:2,fixedDecimalScale:!0,onValueChange:function(t){t.formattedValue;var a=t.value;e.onChange(a)}})}},{title:"Mooney",field:"Mooney",render:function(e){return r.a.createElement("span",null,void 0===e.Mooney?"0.00":e.Mooney)},editComponent:function(e){return r.a.createElement(Xa.a,{customInput:ge.a,label:"Mooney",defaultValue:void 0===e.value?0:e.value,decimalSeparator:".",decimalScale:2,fixedDecimalScale:!0,onValueChange:function(t){t.formattedValue;var a=t.value;e.onChange(a)}})}},{title:"Gel",field:"Gel",render:function(e){return r.a.createElement("span",null,void 0===e.Gel?"0.00":e.Gel)},editComponent:function(e){return r.a.createElement(Xa.a,{customInput:ge.a,label:"Gel",defaultValue:void 0===e.value?0:e.value,decimalSeparator:".",decimalScale:2,fixedDecimalScale:!0,onValueChange:function(t){t.formattedValue;var a=t.value;e.onChange(a)}})}},{title:"SVI",field:"SVI",render:function(e){return r.a.createElement("span",null,void 0===e.SVI?"0.00":e.SVI)},editComponent:function(e){return r.a.createElement(Xa.a,{customInput:ge.a,label:"SVI",defaultValue:void 0===e.value?0:e.value,decimalSeparator:".",decimalScale:2,fixedDecimalScale:!0,onValueChange:function(t){t.formattedValue;var a=t.value;e.onChange(a)}})}},{title:"Asht",field:"Asht",render:function(e){return r.a.createElement("span",null,void 0===e.Asht?"0.00":e.Asht)},editComponent:function(e){return r.a.createElement(Xa.a,{customInput:ge.a,label:"Asht",defaultValue:void 0===e.value?0:e.value,decimalSeparator:".",decimalScale:2,fixedDecimalScale:!0,onValueChange:function(t){t.formattedValue;var a=t.value;e.onChange(a)}})}},{title:"Offspec",field:"Offspec",render:function(e){return r.a.createElement("span",null,!0===e.Offspec?"Yes":"No")},editComponent:function(e){return r.a.createElement(Xe.a,{checked:e.value,onChange:function(t){return e.onChange(t.target.checked)},value:e.value,inputProps:{"aria-label":"secondary checkbox"},color:"primary"})}}],testResultSampleData:[],currentDeleteData:null,seqPalletData:null,lots:null,startScan:!0,mode:"Barcode"},a.handelChangePallet=a.handelChangePallet.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"handelChangePallet",value:function(e,t){var a,n=this;return l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:(a=Object(me.a)({},this.state.palletData))[t]=e,this.setState({palletData:a},(function(){return n.getPalletProductionByFactory()}));case 3:case"end":return r.stop()}}),null,this)}},{key:"handelChangeLot",value:function(e,t){var a,n=this;return l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:(a=Object(me.a)({},this.state.lotData))[t]=e,this.setState({lotData:a},(function(){return n.getLotByFactory()}));case 3:case"end":return r.stop()}}),null,this)}},{key:"getPalletProductionByFactory",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if("object"!==typeof this.state.palletData.Factory||void 0===this.state.palletData.ProductionDate){t.next=3;break}return t.next=3,l.a.awrap(Uv.getCreatePallet("filter-fy/".concat(this.state.palletData.Factory._id,"/").concat(new Date(this.state.palletData.ProductionDate).getFullYear())).then((function(t){!0===t.code&&e.setState({seqPalletData:t.data})})));case 3:case"end":return t.stop()}}),null,this)}},{key:"getLotByFactory",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if("object"!==typeof this.state.lotData.Factory||void 0===this.state.lotData.LotDate){t.next=3;break}return t.next=3,l.a.awrap(XC.get("filter-fy/".concat(this.state.lotData.Factory._id,"/").concat(new Date(this.state.lotData.LotDate).getFullYear())).then((function(t){!0===t.code&&e.setState({lots:t.data})})));case 3:case"end":return t.stop()}}),null,this)}},{key:"initTestResultSample",value:function(){var e=this,t=[];Kv.getFilterTestResult("?Pallet=".concat(this.state.palletData.id)).then((function(a){if(!0===a.code){if(Array.isArray(a.data)&&a.data.length>0)t=a.data;else{var n=e.state.palletData.DefaultTestResult;if(n>0)for(var r=0;r<n;r++)Jv.SampleNo=r+1,Jv.Pallet=e.state.palletData.id,t.push(jw(Jv))}e.setState({testResultSampleData:t})}}))}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{container:!0,direction:"row",justify:"center",alignItems:"stretch"},r.a.createElement(be.a,{item:!0,container:!0,xs:12},r.a.createElement(x.a,{variant:"overline",display:"block",gutterBottom:!0},"QR Generator")),r.a.createElement(io.a,{"aria-label":"position",name:"position",value:this.state.mode,onChange:function(t){e.setState({mode:t.target.value,startScan:"Barcode"===t.target.value})},row:!0},r.a.createElement(ye.a,{value:"Barcode",control:r.a.createElement(lo.a,{color:"primary"}),label:"Barcode",labelPlacement:"end"}),r.a.createElement(ye.a,{value:"ManualByPallet",control:r.a.createElement(lo.a,{color:"primary"}),label:"Manual By Pallet",labelPlacement:"end"}),r.a.createElement(ye.a,{value:"ManualByLot",control:r.a.createElement(lo.a,{color:"primary"}),label:"Manual By Lot",labelPlacement:"end"})),r.a.createElement(be.a,{item:!0,xs:12,style:{display:"Barcode"===this.state.mode?"":"none"}},r.a.createElement(x.a,null,"Pallet Number:"," ",null===this.state.palletData?"":this.state.palletData.SeqPallet),r.a.createElement(SC,{startScan:this.state.startScan,OnDetect:this.onDetect})),r.a.createElement(be.a,{item:!0,container:!0,md:10,xs:12,sm:12,xl:10,lg:10,style:{display:"ManualByPallet"===this.state.mode?"":"none"}},r.a.createElement(be.a,{container:!0,direction:"row",justify:"space-evenly",alignItems:"flex-start",wrap:"wrap",spacing:3},r.a.createElement(be.a,{item:!0,xs:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Hr,{selectedValue:this.state.palletData.Factory,propertyName:"Factory",handleChange:function(t){return e.handelChangePallet(t,"Factory")},required:!1}))),r.a.createElement(be.a,{item:!0,xs:12},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Da.a,{style:{width:"100%",margin:4},margin:"dense",id:"date-picker-dialog",label:"Production Date *",views:["year"],value:void 0===this.state.palletData.ProductionDate?Date.now():this.state.palletData.ProductionDate,onChange:function(t){return e.handelChangePallet(t,"ProductionDate")},KeyboardButtonProps:{"aria-label":"Production Date"}}))),r.a.createElement(be.a,{item:!0,xs:12},r.a.createElement(yi,{selectedValue:this.state.palletData,columns:["SeqPallet"],data:this.state.seqPalletData,handleChange:this.onPalletSeqChange})))),r.a.createElement(be.a,{item:!0,container:!0,md:10,xs:12,sm:12,xl:10,lg:10,style:{display:"ManualByLot"===this.state.mode?"":"none"}},r.a.createElement(be.a,{container:!0,direction:"row",justify:"space-evenly",alignItems:"flex-start",wrap:"wrap",spacing:3},r.a.createElement(be.a,{item:!0,xs:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Hr,{selectedValue:this.state.lotData.Factory,propertyName:"Factory",handleChange:function(t){return e.handelChangeLot(t,"Factory")},required:!1}))),r.a.createElement(be.a,{item:!0,xs:12},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Da.a,{style:{width:"100%",margin:4},margin:"dense",id:"date-picker-dialog",label:"Lot Date *",views:["year"],value:void 0===this.state.lotData.LotDate?Date.now():this.state.lotData.LotDate,onChange:function(t){return e.handelChangeLot(t,"LotDate")},KeyboardButtonProps:{"aria-label":"Lot Date"}}))),r.a.createElement(be.a,{item:!0,xs:12},r.a.createElement(yi,{selectedValue:this.state.lotData,columns:["LotNumber"],data:this.state.lots,handleChange:this.onLotChange})))),r.a.createElement(be.a,{item:!0,xs:12,style:{marginTop:10,display:"ManualByLot"===this.state.mode?"none":""}},r.a.createElement(BC.a,{defaultExpanded:!0},r.a.createElement(UC.a,{expandIcon:r.a.createElement(A.a,null),"aria-controls":"Pallet Details",id:"palletdetail-header"},r.a.createElement("div",null,r.a.createElement(x.a,{variant:"subtitle1",gutterBottom:!0},"Pallet Detail"))),r.a.createElement(qC.a,null,r.a.createElement(be.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",wrap:"wrap",spacing:3},r.a.createElement(be.a,{item:!0,container:!0,xs:12,md:4},r.a.createElement(x.a,{variant:"subtitle1",gutterBottom:!0,style:{marginTop:4}},"Production Date:"," ",new Date(this.state.palletData.ProductionDate).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric"}))),r.a.createElement(be.a,{item:!0,container:!0,xs:12,md:4},r.a.createElement(x.a,{variant:"subtitle1",gutterBottom:!0,style:{marginTop:4}},"Grade: ",this.state.palletData.ProductGrade.GradeCode)),r.a.createElement(be.a,{item:!0,container:!0,xs:12,md:4},r.a.createElement(x.a,{variant:"subtitle1",gutterBottom:!0,style:{marginTop:4}},"Export Pallet #: ",this.state.palletData.ExportPallet)),r.a.createElement(be.a,{item:!0,container:!0,xs:12,md:4},r.a.createElement(x.a,{variant:"subtitle1",gutterBottom:!0,style:{marginTop:4}},"Packing Type:"," ",this.state.palletData.PackingType.PckTypeName)),r.a.createElement(be.a,{item:!0,container:!0,xs:12,md:4},r.a.createElement(x.a,{variant:"subtitle1",gutterBottom:!0,style:{marginTop:4}},"Pallet Weight: ",this.state.palletData.PalletWeight)),r.a.createElement(be.a,{item:!0,container:!0,xs:12,md:4},r.a.createElement(x.a,{variant:"subtitle1",gutterBottom:!0,style:{marginTop:4}},"Test Date:",void 0===this.state.palletData.TestDate||null===this.state.palletData.TestDate?"":new Date(this.state.palletData.TestDate).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric"}))),r.a.createElement(be.a,{item:!0,container:!0,xs:12},r.a.createElement(x.a,{variant:"subtitle1",gutterBottom:!0,style:{marginTop:4}},"Remarks: ",this.state.palletData.Remarks)),r.a.createElement(be.a,{item:!0,container:!0,xs:12,md:4},r.a.createElement(x.a,{variant:"subtitle1",gutterBottom:!0,style:{marginTop:4}},"Print Label Status:"," ",!0===this.state.palletData.PrintLabelStatus?"Enabled":"Disabled")),r.a.createElement(be.a,{item:!0,container:!0,xs:12,md:4},r.a.createElement(x.a,{variant:"subtitle1",gutterBottom:!0,style:{marginTop:4}},"Print QR Code:"," ",!0===this.state.palletData.PrintQRCode?"Enabled":"Disabled")),r.a.createElement(be.a,{item:!0,container:!0,xs:12,md:4},r.a.createElement(x.a,{variant:"subtitle1",gutterBottom:!0,style:{marginTop:4}},"Pallet Status: ",this.state.palletData.PalletStatus)),r.a.createElement(be.a,{item:!0,container:!0,xs:12,md:4},r.a.createElement(x.a,{variant:"subtitle1",gutterBottom:!0,style:{marginTop:4}},"Allocation Status: ",this.state.palletData.AllocationStatus)),r.a.createElement(be.a,{item:!0,container:!0,xs:12,md:4},r.a.createElement(x.a,{variant:"subtitle1",gutterBottom:!0,style:{marginTop:4}},"Inactive:"," ",!0===this.state.palletData.Inactive?"Yes":"No")),r.a.createElement(be.a,{item:!0,container:!0,xs:12,md:4},r.a.createElement(x.a,{variant:"subtitle1",gutterBottom:!0,style:{marginTop:4}},"Total Sample: ",this.state.palletData.DefaultTestResult)),r.a.createElement(be.a,{item:!0,md:12},r.a.createElement(Ve.a,{title:"Test Result Sample",columns:this.state.testResultSampleCol,data:this.state.testResultSampleData})))),r.a.createElement(k.a,null),r.a.createElement(GC.a,null,r.a.createElement(he.a,{size:"small"},"Cancel"),r.a.createElement(he.a,{size:"small",color:"primary",onClick:this.onPrintQR},"Print QR")))),r.a.createElement(be.a,{item:!0,xs:12,style:{marginTop:10,display:"ManualByLot"===this.state.mode?"":"none"}},r.a.createElement(BC.a,{defaultExpanded:!0},r.a.createElement(UC.a,{expandIcon:r.a.createElement(A.a,null),"aria-controls":"Lot Details",id:"palletdetail-header"},r.a.createElement("div",null,r.a.createElement(x.a,{variant:"subtitle1",gutterBottom:!0},"Lot Detail"))),r.a.createElement(qC.a,null,r.a.createElement(be.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",wrap:"wrap",spacing:3},r.a.createElement(be.a,{item:!0,container:!0,xs:12,md:4},r.a.createElement(x.a,{variant:"subtitle1",gutterBottom:!0,style:{marginTop:4}},"Lot Date:",new Date(this.state.lotData.LotDate).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric"}))),r.a.createElement(be.a,{item:!0,container:!0,xs:12,md:4},r.a.createElement(x.a,{variant:"subtitle1",gutterBottom:!0,style:{marginTop:4}},"Grade: ",this.state.lotData.ProductGrade.GradeCode)),r.a.createElement(be.a,{item:!0,container:!0,xs:12,md:4},r.a.createElement(x.a,{variant:"subtitle1",gutterBottom:!0,style:{marginTop:4}},"Packing Type:"," ",this.state.lotData.PackingType.PckTypeName)),r.a.createElement(be.a,{item:!0,container:!0,xs:12,md:4},r.a.createElement(x.a,{variant:"subtitle1",gutterBottom:!0,style:{marginTop:4}},"Qty (kg): ",this.state.lotData.LotWeight)),r.a.createElement(be.a,{item:!0,container:!0,xs:12,md:4},r.a.createElement(x.a,{variant:"subtitle1",gutterBottom:!0,style:{marginTop:4}},"Inactive:",!0===this.state.lotData.Inactive?"Yes":"No")),r.a.createElement(be.a,{item:!0,container:!0,xs:12},r.a.createElement(x.a,{variant:"subtitle1",gutterBottom:!0,style:{marginTop:4}},"Remarks: ",this.state.lotData.Remarks)))),r.a.createElement(k.a,null),r.a.createElement(GC.a,null,r.a.createElement(he.a,{size:"small"},"Cancel"),r.a.createElement(he.a,{size:"small",color:"primary",onClick:this.onPrintQR},"Print QR")))),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:600,open:this.state.snackOpen,onClose:this.snackOpen,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}))}}]),t}(r.a.Component),Aw=(a(1036),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).handelChange=function(e,t){var n=Object(me.a)({},a.state.data);n[t]=e,a.setState({data:n})},a.getReport=function(){We("CheckSheet/Reports/BaleCheck/".concat(a.state.data.Factory._id,"/").concat(new Date(a.state.data.Date).toDateString())).then((function(e){if(200===e.status&&"Succeed"===e.data.message){var t=e.data.data;a.setState({pdfData:t})}}))},a.state={data:null,pdfData:null,beginDate:!1,endDate:!1},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{style:{margin:"20px 0px 0px 0px"}},r.a.createElement(be.a,{item:!0,xs:12},r.a.createElement(x.a,{variant:"h5"},"Bale Check")),r.a.createElement(be.a,{item:!0,xs:12},r.a.createElement(be.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center"},r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:3,lg:3},r.a.createElement(Hr,{selectedValue:null===this.state.data||void 0===this.state.data.Factory?"":this.state.data.Factory,propertyName:"Factory",formControl:{valid:!0,message:""},handleChange:this.handelChange,required:!1})),r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:3,lg:3},r.a.createElement(ya.a,{style:{width:"100%",marginTop:-10},margin:"dense"},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Da.b,{style:{width:"100%"},margin:"dense",id:"date-picker-dialog",label:"Date",format:"dd-MMM-yyyy",value:void 0===this.state.data||null===this.state.data?Date.now():this.state.data.Date,onChange:function(t){return e.handelChange(t,"Date")},KeyboardButtonProps:{"aria-label":"Date"}})))))),r.a.createElement(be.a,{item:!0,xs:3},r.a.createElement(fo.a,{variant:"extended",onClick:this.getReport},r.a.createElement(gw.a,null),"Generate")),r.a.createElement(be.a,{item:!0,xs:12,style:{marginTop:15}},r.a.createElement(Ew,{pdfData:this.state.pdfData,name:"BaleCheck ".concat(new Date(Date.now()).toDateString()),type:"base64"})))}}]),t}(r.a.Component)),Mw=(a(1037),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).handelChange=function(e,t){var n=Object(me.a)({},a.state.data);n[t]=e,a.setState({data:n})},a.getReport=function(){We("CheckSheet/Reports/TrolleyWashing/".concat(a.state.data.Factory._id,"/").concat(new Date(a.state.data.Date).toDateString())).then((function(e){if(200===e.status&&"Succeed"===e.data.message){var t=e.data.data;a.setState({pdfData:t})}}))},a.state={data:null,pdfData:null,beginDate:!1,endDate:!1},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{style:{margin:"20px 0px 0px 0px"}},r.a.createElement(be.a,{item:!0,xs:12},r.a.createElement(x.a,{variant:"h5"},"Trolley Washing")),r.a.createElement(be.a,{item:!0,xs:12},r.a.createElement(be.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center"},r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:3,lg:3},r.a.createElement(Hr,{selectedValue:null===this.state.data||void 0===this.state.data.Factory?"":this.state.data.Factory,propertyName:"Factory",formControl:{valid:!0,message:""},handleChange:this.handelChange,required:!1})),r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:3,lg:3},r.a.createElement(ya.a,{style:{width:"100%",marginTop:-10},margin:"dense"},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Da.b,{style:{width:"100%"},margin:"dense",id:"date-picker-dialog",label:"Date",format:"dd-MMM-yyyy",value:void 0===this.state.data||null===this.state.data?Date.now():this.state.data.Date,onChange:function(t){return e.handelChange(t,"Date")},KeyboardButtonProps:{"aria-label":"Date"}})))))),r.a.createElement(be.a,{item:!0,xs:3},r.a.createElement(fo.a,{variant:"extended",onClick:this.getReport},r.a.createElement(gw.a,null),"Generate")),r.a.createElement(be.a,{item:!0,xs:12,style:{marginTop:15}},r.a.createElement(Ew,{pdfData:this.state.pdfData,name:"TrolleyWashing ".concat(new Date(Date.now()).toDateString()),type:"base64"})))}}]),t}(r.a.Component)),_w=(a(1038),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).handelChange=function(e,t){var n=Object(me.a)({},a.state.data);n[t]=e,a.setState({data:n})},a.getReport=function(){We("CheckSheet/Reports/BlanketAnalysis/".concat(a.state.data.Factory._id,"/").concat(new Date(a.state.beginDate).toDateString(),"/").concat(new Date(a.state.endDate).toDateString())).then((function(e){if(200===e.status&&"Succeed"===e.data.message){var t=e.data.data;a.setState({pdfData:t})}}))},a.setBegin=function(e){a.setState({beginDate:e})},a.setEnd=function(e){a.setState({endDate:e},(function(){return console.log(a.state)}))},a.state={data:null,pdfData:null,beginDate:!1,endDate:!1},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{style:{margin:"20px 0px 0px 0px"}},r.a.createElement(be.a,{item:!0,xs:12},r.a.createElement(x.a,{variant:"h5"},"Blanket Analysis Report")),r.a.createElement(be.a,{item:!0,xs:12},r.a.createElement(be.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center"},r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:3,lg:3},r.a.createElement(Hr,{selectedValue:null===this.state.data||void 0===this.state.data.Factory?"":this.state.data.Factory,propertyName:"Factory",formControl:{valid:!0,message:""},handleChange:this.handelChange,required:!1})),r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:3,lg:3},r.a.createElement(ya.a,{style:{width:"100%",marginTop:-10},margin:"dense"},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Tw,{autoOk:!0,value:[],placeholder:"Select a date range",onChange:function(t){e.setBegin(t.begin),e.setEnd(t.end)}})))))),r.a.createElement(be.a,{item:!0,xs:3},r.a.createElement(fo.a,{variant:"extended",onClick:this.getReport},r.a.createElement(gw.a,null),"Generate")),r.a.createElement(be.a,{item:!0,xs:12,style:{marginTop:15}},r.a.createElement(Ew,{pdfData:this.state.pdfData,name:"BlanketAnalysis ".concat(new Date(Date.now()).toDateString()),type:"base64"})))}}]),t}(r.a.Component)),Iw=(a(1039),a(23)),Rw=[{Remark:"Lost Workdays Male Employee",Value:"TotalLostWorkDays_EM"},{Remark:"Lost Workdays Female Employee",Value:"TotalLostWorkDays_EF"},{Remark:"Lost Workdays Male non-Employee",Value:"TotalLostWorkDays_UM"},{Remark:"Lost Workdays Female non-Employee",Value:"TotalLostWorkDays_UF"},{Remark:"Total Lost Workdays",Value:"TotalLostWorkDays_Total"},{Remark:"Occupational Disease Rate Male Employee",Value:"OccupationalIllness_Rate_EM"},{Remark:"Occupational Disease Rate Female Employee",Value:"OccupationalIllness_Rate_EF"},{Remark:"Occupational Disease Rate Male non-Employee",Value:"OccupationalIllness_Rate_UM"},{Remark:"Occupational Disease Rate Female non-Employee",Value:"OccupationalIllness_Rate_UF"},{Remark:"Total Occupational Disease Rate",Value:"OccupationalIllness_Rate_Total"},{Remark:"Recordable Injury Rate (TRIR) Male Employee",Value:"OccupationalInjury_Rate_EM"},{Remark:"Recordable Injury Rate (TRIR) Female Employee",Value:"OccupationalInjury_Rate_EF"},{Remark:"Recordable Injury Rate (TRIR) Male non-Employee",Value:"OccupationalInjury_Rate_UM"},{Remark:"Recordable Injury Rate (TRIR) Female non-Employee",Value:"OccupationalInjury_Rate_UF"},{Remark:"Total Recordable Injury Rate (TRIR)",Value:"OccupationalInjury_Rate_Total"},{Remark:"Lost Time Injury Rate (LTIR) Male Employee",Value:"LostTimeInjury_Rate_EM"},{Remark:"Lost Time Injury Rate (LTIR) Female Employee",Value:"LostTimeInjury_Rate_EF"},{Remark:"Lost Time Injury Rate (LTIR) Male non-Employee",Value:"LostTimeInjury_Rate_UM"},{Remark:"Lost Time Injury Rate (LTIR) Female non-Employee",Value:"LostTimeInjury_Rate_UF"},{Remark:"Total Lost Time Injury Rate (LTIR)",Value:"LostTimeInjury_Rate_Total"},{Remark:"Lost Day Rate (LDR) Male Employee",Value:"LostDays_Rate_EM"},{Remark:"Lost Day Rate (LDR) Female Employee",Value:"LostDays_Rate_EF"},{Remark:"Lost Day Rate (LDR) Male non-Employee",Value:"LostDays_Rate_UM"},{Remark:"Lost Day Rate (LDR) Female non-Employee",Value:"LostDays_Rate_UF"},{Remark:"Total Lost Day Rate (LDR)",Value:"LostDays_Rate_Total"},{Remark:"Absenteism Rate (%) Male Employee",Value:"Absence_Rate_EM"},{Remark:"Absenteism Rate (%) Female Employee",Value:"Absence_Rate_EF"},{Remark:"Absenteism Rate (%) Male non-Employee",Value:"Absence_Rate_UM"},{Remark:"Absenteism Rate (%) Female non-Employee",Value:"Absence_Rate_UF"},{Remark:"Absenteism Rate (%)",Value:"Absence_Rate_Total"}],Lw=[{title:"Remark",field:"Remark"}],Vw=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).getReport=function(){var e=""===a.state.country?"world":a.state.country;We("ehsMetrics/Reports/".concat(e,"/").concat(new Date(a.state.beginDate).toDateString(),"/").concat(new Date(a.state.endDate).toDateString())).then((function(e){if(200===e.status&&"Succeed"===e.data.message){var t=e.data.data,n=Iw(Lw),o=!0,s=!1,i=void 0;try{for(var l,c=function(){var e=l.value;n.push({title:e._id.FactoryCode,field:e._id.FactoryCode,render:function(t){return r.a.createElement(Xa.a,{value:t[e._id.FactoryCode],displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}})},u=t[Symbol.iterator]();!(o=(l=u.next()).done);o=!0)c()}catch(O){s=!0,i=O}finally{try{o||null==u.return||u.return()}finally{if(s)throw i}}var d=Iw(Rw),m=!0,p=!1,f=void 0;try{for(var h,g=t[Symbol.iterator]();!(m=(h=g.next()).done);m=!0){var y=h.value,v=!0,C=!1,D=void 0;try{for(var E,b=d[Symbol.iterator]();!(v=(E=b.next()).done);v=!0){var S=E.value;S[y._id.FactoryCode]=y[S.Value]}}catch(O){C=!0,D=O}finally{try{v||null==b.return||b.return()}finally{if(C)throw D}}}}catch(O){p=!0,f=O}finally{try{m||null==g.return||g.return()}finally{if(p)throw f}}a.setState({ehsPerformanceData:d,columns:n})}else a.setState({ehsPerformanceData:Iw(Rw)})}))},a.handelChange=function(e){a.setState({country:e})},a.setBegin=function(e){a.setState({beginDate:e})},a.setEnd=function(e){a.setState({endDate:e})},a.state={columns:Iw(Lw),country:"",beginDate:null,endDate:null,ehsPerformanceData:Iw(Rw)},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{style:{margin:"20px 0px 0px 0px"}},r.a.createElement(be.a,{item:!0,xs:12},r.a.createElement(x.a,{variant:"h5"},"EHS Performance")),r.a.createElement(be.a,{item:!0,xs:12},r.a.createElement(be.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center"},r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:3,lg:3},r.a.createElement(Ba,{selectedValue:this.state.country,propertyName:"country",handleChange:this.handelChange,formControl:{valid:!0,message:""},containWorld:!0})),r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:3,lg:3},r.a.createElement(ya.a,{style:{width:"100%"}},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Tw,{autoOk:!0,value:[],placeholder:"Select a date range",onChange:function(t){e.setBegin(t.begin),e.setEnd(t.end)}})))),r.a.createElement(be.a,{item:!0,xs:3},r.a.createElement(fo.a,{variant:"extended",onClick:this.getReport},"Go")))),r.a.createElement(be.a,{item:!0,xs:12,style:{marginTop:15}},r.a.createElement(Ve.a,{title:"",columns:this.state.columns,data:this.state.ehsPerformanceData,actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.ehsPerformanceData,columns:e.state.columns,fileName:"EHS Performance"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.getReport()}}],options:{search:!1,paging:!1}})))}}]),t}(r.a.Component),Bw=(a(1040),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).getReport=function(){var e=""===a.state.country?"world":a.state.country;We("RawMaterial/Reports/DataEntryProgress/".concat(e)).then((function(e){if(200===e.status&&"Succeed"===e.data.message){var t=e.data.data,n=[];t.factoryList.length>0&&t.factoryList.forEach((function(e){var a={Factory:e.FctyCode,FactoryId:e._id},r=t.procurementList.filter((function(t){return t._id.FactoryId===e._id}));a.ProcurementDate=r.length>0?new Date(r[0].LastUpdatedDate).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric"}):"",a.ProcurementQty=r.length>0?r[0].Qty:"";var o=t.wetProcessList.filter((function(t){return t._id.FactoryId===e._id}));a.WetProcessDate=o.length>0?new Date(o[0].LastUpdatedDate).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric"}):"",a.WetProcessQty=o.length>0?o[0].Qty:"";var s=t.dryProcessList.filter((function(t){return t._id.FactoryId===e._id}));a.HangingShedDate=s.length>0?new Date(s[0].LastUpdatedDate).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric"}):"",a.HangingShedQty=s.length>0?s[0].Qty:"";var i=t.dryProcessList.filter((function(t){return t._id.FactoryId===e._id}));a.DryProcessDate=i.length>0?new Date(i[0].LastUpdatedDate).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric"}):"",a.DryProcessQty=i.length>0?i[0].Qty:"",n.push(a)})),a.setState({reportData:n})}else a.setState({reportData:[]})}))},a.handelChange=function(e){a.setState({country:e})},a.state={columns:[{title:"Factory",field:"Factory"},{title:"Procurement Date",field:"ProcurementDate"},{title:"Procurement Qty(kg)",field:"ProcurementQty",render:function(e){return r.a.createElement(Xa.a,{value:e.ProcurementQty,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"TS to Wet Date",field:"WetProcessDate"},{title:"TS to Wet Qty(kg)",field:"WetProcessQty",render:function(e){return r.a.createElement(Xa.a,{value:e.WetProcessQty,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"TS to Blanket Date",field:"HangingShedDate"},{title:"TS to Blanket Qty(kg)",field:"HangingShedQty",render:function(e){return r.a.createElement(Xa.a,{value:e.HangingShedQty,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"TS to Dry Date",field:"DryProcessDate"},{title:"TS to Dry Qty(kg)",field:"DryProcessQty",render:function(e){return r.a.createElement(Xa.a,{value:e.DryProcessQty,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}}],country:"",reportData:[]},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{style:{margin:"20px 0px 0px 0px"}},r.a.createElement(be.a,{item:!0,xs:12},r.a.createElement(x.a,{variant:"h5"},"Data Entry Progress")),r.a.createElement(be.a,{item:!0,xs:12},r.a.createElement(be.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center"},r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:3,lg:3},r.a.createElement(Ba,{selectedValue:this.state.country,propertyName:"country",handleChange:this.handelChange,formControl:{valid:!0,message:""},containWorld:!0})),r.a.createElement(be.a,{item:!0,xs:3},r.a.createElement(fo.a,{variant:"extended",onClick:this.getReport},"Go")))),r.a.createElement(be.a,{item:!0,xs:12,style:{marginTop:15}},r.a.createElement(Ve.a,{title:"",columns:this.state.columns,data:this.state.reportData,actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.reportData,columns:e.state.columns,fileName:"Data Entry Progress"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.getReport()}}],options:{search:!1,paging:!1}})))}}]),t}(r.a.Component)),Uw=(a(1041),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).getReport=function(){var e=""===a.state.country?"world":a.state.country;We("FinishGoods/Reports/DataEntryProgress/".concat(e)).then((function(e){if(200===e.status&&"Succeed"===e.data.message){var t=e.data.data,n=[];t.factoryList.length>0&&t.factoryList.forEach((function(e){var a={Factory:e.FctyCode,FactoryId:e._id},r=t.palletList.filter((function(t){return t._id.FactoryId===e._id}));a.ProductionDate=r.length>0?new Date(r[0].ProductionDate).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric"}):"",a.TestDate=r.length>0&&null!==r[0].TestDate?new Date(r[0].TestDate).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric"}):"",a.SINo=r.length>0?null!==r[0].LotSINo?r[0].LotSINo:null!==r[0].SINo?r[0].SINo:"":"";var o=r.length>0?null!==r[0].LotSIDate?r[0].LotSIDate:null!==r[0].SIDate?r[0].SIDate:"":"";a.SIDate=""===o?"":new Date(o).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric"}),a.Buyer=r.length>0?null!==r[0].LotBuyer?r[0].LotBuyer:null!==r[0].SIBuyer?r[0].SIBuyer:"":"",a.LastUpdatedAt=r.length>0?new Date(r[0].LastUpdatedAt).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric"}):"";var s=r.length>0?null!==r[0].LotSILastUpdatedAt?r[0].LotSILastUpdatedAt:null!==r[0].SILastUpdatedAt?r[0].SILastUpdatedAt:"":"";a.SILastUpdatedAt=""===o?"":new Date(s).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric"}),n.push(a)})),a.setState({reportData:n})}else a.setState({reportData:[]})}))},a.handelChange=function(e){a.setState({country:e})},a.state={columns:[{title:"Factory",field:"Factory"},{title:"Prod. Date",field:"ProductionDate"},{title:"Test Date",field:"TestDate"},{title:"SI #",field:"SINo"},{title:"SI Date",field:"SIDate"},{title:"Buyer",field:"Buyer"},{title:"Last Pallet Entry Date",field:"LastUpdatedAt"},{title:"Last SI Entry Date",field:"SILastUpdatedAt"}],country:"",reportData:[]},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{style:{margin:"20px 0px 0px 0px"}},r.a.createElement(be.a,{item:!0,xs:12},r.a.createElement(x.a,{variant:"h5"},"Data Entry Progress")),r.a.createElement(be.a,{item:!0,xs:12},r.a.createElement(be.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center"},r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:3,lg:3},r.a.createElement(Ba,{selectedValue:this.state.country,propertyName:"country",handleChange:this.handelChange,formControl:{valid:!0,message:""},containWorld:!0})),r.a.createElement(be.a,{item:!0,xs:3},r.a.createElement(fo.a,{variant:"extended",onClick:this.getReport},"Go")))),r.a.createElement(be.a,{item:!0,xs:12,style:{marginTop:15}},r.a.createElement(Ve.a,{title:"",columns:this.state.columns,data:this.state.reportData,actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.reportData,columns:e.state.columns,fileName:"Data Entry Progress"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.getReport()}}],options:{search:!1,paging:!1}})))}}]),t}(r.a.Component)),qw=(a(1042),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).getReport=function(){void 0!==a.state.data.Factory&&We("FinishGoods/Reports/SIControl/".concat(a.state.data.Factory._id,"/").concat(a.state.data.Shipped)).then((function(e){if(200===e.status&&"Succeed"===e.data.message){var t=e.data.data;a.setState({reportData:t})}else a.setState({reportData:[]})}))},a.handleChange=function(e,t){var n=Object(me.a)({},a.state.data);n[t]=e,a.setState({data:n})},a.state={columns:[{title:"SI #",field:"SINo"},{title:"Buyer",field:"Buyer",render:function(e){return r.a.createElement("span",null,e.Buyer.name)}},{title:"Vessel",field:"Vessel"},{title:"Date",field:"Date",render:function(e){return r.a.createElement("span",null,new Date(e.Date).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric"}))}},{title:"Grade",field:"ProductGrade",render:function(e){return r.a.createElement("span",null,e.ProductGrade.GradeCode)}},{title:"Qty (kg)",field:"Weight",render:function(e){return r.a.createElement(Xa.a,{value:e.Weight,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"Qty Ready (kg)",field:"LoadedQty",render:function(e){return r.a.createElement(Xa.a,{value:e.LoadedQty,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"Qty Balance (kg)",render:function(e){return r.a.createElement(Xa.a,{value:e.Weight-e.LoadedQty,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"Shipped Status",field:"ShipStatus",lookup:{true:"Shipped",false:"Not Shipped"}},{title:"Shipped Date",field:"ShipDate",render:function(e){return r.a.createElement("span",null,null===e.ShipDate?"":new Date(e.ShipDate).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric"}))}}],data:{Shipped:!1},reportData:[]},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{style:{margin:"20px 0px 0px 0px"}},r.a.createElement(be.a,{item:!0,xs:12},r.a.createElement(x.a,{variant:"h5"},"SI Control")),r.a.createElement(be.a,{item:!0,xs:12},r.a.createElement(be.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center"},r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:3,lg:3},r.a.createElement(Hr,{selectedValue:void 0===this.state.data.Factory?"":this.state.data.Factory,propertyName:"Factory",formControl:{valid:!0,message:""},handleChange:function(t){return e.handleChange(t,"Factory")},required:!1})),r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:3,lg:3},r.a.createElement(ya.a,{style:{width:"100%",marginTop:-12},margin:"dense"},r.a.createElement(Ea.a,{shrink:!0,required:!0},"Shipped"),r.a.createElement(ba.a,{id:"shipped",value:this.state.data.Shipped,style:{minWidth:190},onChange:function(t){return e.handleChange(t.target.value,"Shipped")}},r.a.createElement(et.a,{value:!1},"Not Shipped"),r.a.createElement(et.a,{value:!0},"Shipped"),r.a.createElement(et.a,{value:"all"},"Show All")))),r.a.createElement(be.a,{item:!0,xs:3},r.a.createElement(fo.a,{variant:"extended",onClick:this.getReport},"Go")))),r.a.createElement(be.a,{item:!0,xs:12,style:{marginTop:15}},r.a.createElement(Ve.a,{title:"",columns:this.state.columns,data:this.state.reportData,actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.reportData,columns:e.state.columns,fileName:"SI Control"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.getReport()}}],options:{search:!1,paging:!1}})))}}]),t}(r.a.Component)),Gw=(a(1043),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).getReport=function(){void 0!==a.state.data.Factory&&We("FinishGoods/Reports/StockPosition/".concat(a.state.data.Factory._id)).then((function(e){if(200===e.status&&"Succeed"===e.data.message){var t=e.data.data;a.setState({reportData:t})}else a.setState({reportData:[]})}))},a.handleChange=function(e,t){var n=Object(me.a)({},a.state.data);n[t]=e,a.setState({data:n})},a.state={columns:[{title:"Grade",render:function(e){return r.a.createElement("span",null,e._id.GradeCode)}},{title:"Qty Allocated to SI (kg)",field:"AllocatedToSIQty",render:function(e){return r.a.createElement(Xa.a,{value:e.AllocatedToSIQty,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"Qty Allocated to Lot (kg)",field:"AllocatedToLotQty",render:function(e){return r.a.createElement(Xa.a,{value:e.AllocatedToLotQty,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"Qty Not Allocated (kg)",render:function(e){return r.a.createElement(Xa.a,{value:e.NonAllocatedQty,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"Qty Total (kg)",render:function(e){return r.a.createElement(Xa.a,{value:e.TotalQty,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}}],data:"",reportData:[]},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{style:{margin:"20px 0px 0px 0px"}},r.a.createElement(be.a,{item:!0,xs:12},r.a.createElement(x.a,{variant:"h5"},"Stock Position")),r.a.createElement(be.a,{item:!0,xs:12},r.a.createElement(be.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center"},r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:3,lg:3},r.a.createElement(Hr,{selectedValue:void 0===this.state.data.Factory?"":this.state.data.Factory,propertyName:"Factory",formControl:{valid:!0,message:""},handleChange:function(t){return e.handleChange(t,"Factory")},required:!1})),r.a.createElement(be.a,{item:!0,xs:3},r.a.createElement(fo.a,{variant:"extended",onClick:this.getReport},"Go")))),r.a.createElement(be.a,{item:!0,xs:12,style:{marginTop:15}},r.a.createElement(Ve.a,{title:"",columns:this.state.columns,data:this.state.reportData,actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.reportData,columns:e.state.columns,fileName:"Stock Position"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.getReport()}}],options:{search:!1,paging:!1}})))}}]),t}(r.a.Component)),Ww=(a(1044),a(23)),Hw=(Object(n.forwardRef)((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),r.a.forwardRef((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),{Factory:"",Year:new Date,Option:"SI",Picking:""}),Qw=[{DisplayName:"Test Result",Key:"Range"},{DisplayName:"PO",Key:"PO"},{DisplayName:"PRI",Key:"PRI"},{DisplayName:"Dirt",Key:"Dirt"},{DisplayName:"Ash",Key:"Ash"},{DisplayName:"Mooney",Key:"Mooney"}],zw=[{DisplayName:"Description",Key:"Description"},{DisplayName:"Begin",Key:"Begin"},{DisplayName:"End",Key:"End"}],Yw=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).snackOpen=function(e,t,n){var r;return l.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(void 0===e||null===e||void 0===t||null===t){o.next=11;break}if(void 0!==n){o.next=7;break}return o.next=4,l.a.awrap(ka(e,t));case 4:r=o.sent,o.next=8;break;case 7:r=n;case 8:a.setState({snackOpen:!a.state.snackOpen,snackMessage:r,snackClass:e}),o.next=12;break;case 11:a.setState({snackOpen:!1});case 12:case"end":return o.stop()}}))},a.handleChange=function(e,t){var n=Object(me.a)({},a.state.formData);n[t]=e,a.setState({formData:n,formDirty:!0}),"Picking"!==t?""!==n.Factory&&a.fetchSILotPalletForTraceabilityDropDownData(n.Factory._id,n.Year.getFullYear(),n.Option):We("FinishGoods/Reports/Traceability/".concat(e,"/").concat(n.Option)).then((function(e){if(200===e.status&&"Succeed"===e.data.message){var t={};switch(a.state.formData.Option){case"SI":var n=e.data.data;console.log(n),t.Buyer=null===n.Buyer?"":n.Buyer.name,t.Contract=n.Contract,t.SINo=n.SINo,t.ProductGrade=null===n.ProductGrade?"":n.ProductGrade.GradeCode,t.PackingType=null===n.PackingType?"":n.PackingType.PckTypeName,t.StuffingDate=null===n.StuffingDate?"":n.StuffingDate,t.StuffingLocation=null===n.StuffingLocation?"":n.StuffingLocation,t.Destination=null===n.Destination?"":n.Destination.Destination,t.Weight=n.Weight,t.Lots=n.Lots,t.Pallets=n.Pallets,t.TestResults=n.TestResults;break;case"Lot":var r=e.data.data;console.log(r),t.Buyer=null===r.ShippingInstruction||null===r.ShippingInstruction.Buyer?"":r.ShippingInstruction.Buyer.name,t.Contract=null===r.ShippingInstruction?"":r.ShippingInstruction.Contract,t.SINo=null===r.ShippingInstruction?"":r.ShippingInstruction.SINo,t.LotNumber=r.LotNumber,t.ProductGrade=null===r.ShippingInstruction||null===r.ShippingInstruction.ProductGrade?"":r.ShippingInstruction.ProductGrade.GradeCode,t.PackingType=null===r.ShippingInstruction||null===r.ShippingInstruction.PackingType?"":r.ShippingInstruction.PackingType.PckTypeName,t.StuffingDate=null===r.ShippingInstruction||null===r.ShippingInstruction.StuffingDate?"":r.ShippingInstruction.StuffingDate,t.StuffingLocation=null===r.ShippingInstruction||null===r.ShippingInstruction.StuffingLocation?"":r.ShippingInstruction.StuffingLocation,t.Weight=null===r.ShippingInstruction?"":r.ShippingInstruction.Weight,t.Destination=null===r.ShippingInstruction||null===r.ShippingInstruction.Destination?"":r.ShippingInstruction.Destination.Destination,t.Pallets=r.Pallets,t.TestResults=r.TestResults;break;case"Pallet":var o=e.data.data;console.log(o),t.Buyer=""===o.ShippingInstruction||null===o.ShippingInstruction||null===o.ShippingInstruction.Buyer?"":o.ShippingInstruction.Buyer.name,t.Contract=""===o.ShippingInstruction||null===o.ShippingInstruction?"":o.ShippingInstruction.Contract,t.SINo=""===o.ShippingInstruction||null===o.ShippingInstruction?"":o.ShippingInstruction.SINo,t.LotNumber=""===o.Lot||null===o.Lot?"":o.Lot.LotNumber,t.ProductGrade=""===o.ShippingInstruction||null===o.ShippingInstruction||null===o.ShippingInstruction.ProductGrade?"":o.ShippingInstruction.ProductGrade.GradeCode,t.PackingType=""===o.ShippingInstruction||null===o.ShippingInstruction||null===o.ShippingInstruction.PackingType?"":o.ShippingInstruction.PackingType.PckTypeName,t.StuffingDate=""===o.ShippingInstruction||null===o.ShippingInstruction||null===o.ShippingInstruction.StuffingDate?"":o.ShippingInstruction.StuffingDate,t.StuffingLocation=""===o.ShippingInstruction||null===o.ShippingInstruction||null===o.ShippingInstruction.StuffingLocation?"":o.ShippingInstruction.StuffingLocation,t.Weight=""===o.ShippingInstruction||null===o.ShippingInstruction?"":o.ShippingInstruction.Weight,t.Destination=""===o.ShippingInstruction||null===o.ShippingInstruction||null===o.ShippingInstruction.Destination?"":o.ShippingInstruction.Destination.Destination,t.Pallets=[o],t.TestResults=o.TestResults}var s=t.Pallets.map((function(e){return e.ProductionDate}));s=s.sort((function(e,t){return new Date(e)-new Date(t)}));var i=[],l=!0,c=!1,u=void 0;try{for(var d,m=t.Pallets[Symbol.iterator]();!(l=(d=m.next()).done);l=!0){var p=d.value;void 0!==p.TestDate&&null!==p.TestDate&&i.push(p.TestDate)}}catch(C){c=!0,u=C}finally{try{l||null==m.return||m.return()}finally{if(c)throw u}}i=i.sort((function(e,t){return new Date(e)-new Date(t)})),t.Dates=[{Description:"Production Date",Begin:s.length>0?new Date(s[0]).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric"}):"",End:s.length>0?new Date(s[s.length-1]).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric"}):""},{Description:"Test Date",Begin:i.length>0?new Date(i[0]).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric"}):"",End:i.length>0?new Date(i[i.length-1]).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric"}):""}];var f=t.TestResults.map((function(e){return e.PO})).sort((function(e,t){return e-t})),h=t.TestResults.map((function(e){return e.PRI})).sort((function(e,t){return e-t})),g=t.TestResults.map((function(e){return e.Dirt})).sort((function(e,t){return e-t})),y=t.TestResults.map((function(e){return e.Ash})).sort((function(e,t){return e-t})),v=t.TestResults.map((function(e){return e.Mooney})).sort((function(e,t){return e-t}));t.TestResults=[{Range:"Avg",PO:f.length>0?(f.reduce((function(e,t){return e+t}),0)/f.length).toFixed(2):"",PRI:h.length>0?(h.reduce((function(e,t){return e+t}),0)/h.length).toFixed(2):"",Dirt:g.length>0?(g.reduce((function(e,t){return e+t}),0)/g.length).toFixed(2):"",Ash:y.length>0?(y.reduce((function(e,t){return e+t}),0)/y.length).toFixed(2):"",Mooney:v.length>0?(v.reduce((function(e,t){return e+t}),0)/v.length).toFixed(2):""},{Range:"Max",PO:f.length>0?f[f.length-1]:"",PRI:h.length>0?h[h.length-1]:"",Dirt:g.length>0?g[g.length-1]:"",Ash:y.length>0?y[y.length-1]:"",Mooney:v.length>0?v[v.length-1]:""},{Range:"Min",PO:f.length>0?f[0]:"",PRI:h.length>0?h[0]:"",Dirt:g.length>0?g[0]:"",Ash:y.length>0?y[0]:"",Mooney:v.length>0?v[0]:""}],a.setState({pickingData:t})}else a.setState({siData:""})}))},a.state={formData:Ww(Hw),pickings:[],pickingData:"",formDirty:!1,factoryData:[],productGradeData:[],packingTypeData:[],dialogOpen:!1,snackOpen:!1,alertMessage:"",dialogMessage:"",alertClass:""},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"fetchSILotPalletForTraceabilityDropDownData",value:function(e,t,a){var n=this;return l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:Do("getSILotPalletForTraceabilityDropDownData/".concat(e,"/").concat(t,"/").concat(a)).then((function(e){if(!0===e.code){var t=Object(me.a)({},n.state.formData);t.Picking="",n.setState({pickings:e.data,formData:t,pickingData:"",dateColumns:Ww(zw),testResultColumns:Ww(Qw)})}}));case 1:case"end":return r.stop()}}))}},{key:"renderOptions",value:function(){return this.state.pickings.map((function(e,t){return r.a.createElement(et.a,{label:"SI/Lot/Pallet",value:e._id,key:e.Number,name:e.Number},e.Number)}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"form-container"},r.a.createElement(be.a,{container:!0,direction:"column",justify:"flex-start",alignItems:"stretch",wrap:"wrap",style:{margin:"4px 10px 30px 0px",height:"100%"},md:8,xs:12},r.a.createElement(x.a,{variant:"overline",display:"block",gutterBottom:!0},"Traceability"),r.a.createElement(be.a,{item:!0,style:{marginTop:2}},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Hr,{selectedValue:this.state.formData.Factory,propertyName:"Factory",required:!1,handleChange:this.handleChange,formControl:So(this.state.formData.Factory,"empty",this.state.formDirty)?{valid:!0,message:""}:{valid:!1,message:"Factory cannot be Empty"}}))),r.a.createElement(be.a,{item:!0,style:{marginTop:2}},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Da.a,{style:{width:"100%"},margin:"dense",id:"date-picker-dialog",label:"Year",views:["year"],disablefuture:!0,value:this.state.formData.Year,onChange:function(t){return e.handleChange(new Date(t),"Year",!0)}})))),r.a.createElement(be.a,{item:!0},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Ea.a,{shrink:!0,htmlFor:"dllOption",required:!0,margin:"dense"},"Option"),r.a.createElement(ba.a,{id:"dllOption",value:this.state.formData.Option,onChange:function(t){return e.handleChange(t.target.value,"Option",!0)}},r.a.createElement(et.a,{label:"SI #",value:"SI",key:"SI",name:"SI"},"SI"),r.a.createElement(et.a,{label:"Lot #",value:"Lot",key:"Lot",name:"Lot"},"Lot"),r.a.createElement(et.a,{label:"Pallet #",value:"Pallet",key:"Pallet",name:"Pallet"},"Pallet")))),r.a.createElement(be.a,null,r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Ea.a,{shrink:!0,htmlFor:"dllPicking",required:!0,margin:"dense"},"SI/Lot/Pallet"),r.a.createElement(ba.a,{id:"dllPicking",value:this.state.formData.Picking,onChange:function(t){return e.handleChange(t.target.value,"Picking",!0)},displayEmpty:!0},r.a.createElement(et.a,{value:""},r.a.createElement("em",null,"Select SI/Lot/Pallet")),this.renderOptions()))),r.a.createElement(be.a,{item:!0},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"Buyer",label:"Buyer",value:void 0===this.state.pickingData.Buyer?"":this.state.pickingData.Buyer,margin:"dense",disabled:!0}))),r.a.createElement(be.a,{item:!0},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"Contract",label:"Contract #",value:void 0===this.state.pickingData.Contract?"":this.state.pickingData.Contract,margin:"dense",disabled:!0}))),r.a.createElement(be.a,{item:!0},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"SINo",label:"SI #",value:void 0===this.state.pickingData.SINo?"":this.state.pickingData.SINo,margin:"dense",disabled:!0}))),r.a.createElement(be.a,{item:!0,style:{display:"SI"===this.state.formData.Option?"none":""}},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"LotNumber",label:"Lot #",value:void 0===this.state.pickingData.LotNumber?"":this.state.pickingData.LotNumber,margin:"dense",disabled:!0}))),r.a.createElement(be.a,{item:!0,style:{display:"SI"===this.state.formData.Option?"":"none"}},r.a.createElement(bn,{label:"Lot #",style:{width:"100%"}},r.a.createElement(E.a,null,void 0===this.state.pickingData.Lots?"":this.state.pickingData.Lots.map((function(e){return r.a.createElement(b.a,{key:e._id,value:e,dense:!0,button:!0},r.a.createElement(S.a,{id:e._id,primary:"".concat(e.LotNumber)}))}))))),r.a.createElement(be.a,{item:!0,style:{display:"Pallet"===this.state.formData.Option?"none":""}},r.a.createElement(bn,{label:"Pallet #",style:{width:"100%"}},r.a.createElement(E.a,null,void 0===this.state.pickingData.Pallets?"":this.state.pickingData.Pallets.map((function(e){return r.a.createElement(b.a,{key:e._id,value:e,dense:!0,button:!0},r.a.createElement(S.a,{id:e._id,primary:"".concat(e.SeqPallet)}))}))))),r.a.createElement(be.a,{item:!0},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"ProductGrade",label:"FG Grade",value:void 0===this.state.pickingData.ProductGrade?"":this.state.pickingData.ProductGrade,margin:"dense",disabled:!0}))),r.a.createElement(be.a,{item:!0},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"PackingType",label:"Packing Type",value:void 0===this.state.pickingData.PackingType?"":this.state.pickingData.PackingType,margin:"dense",disabled:!0}))),r.a.createElement(be.a,{item:!0},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Xa.a,{customInput:ge.a,label:"Qty (kg)",value:void 0===this.state.pickingData.Weight?"":this.state.pickingData.Weight,thousandSeparator:!0,decimalScale:2,fixedDecimalScale:!0,disabled:!0}))),r.a.createElement(be.a,{item:!0},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Da.a,{style:{width:"100%"},margin:"dense",id:"date-picker-dialog",label:"Stuffing Date",format:"dd-MMM-yyyy",value:void 0===this.state.pickingData.StuffingDate||""===this.state.pickingData.StuffingDate?null:new Date(this.state.pickingData.StuffingDate),disabled:!0})))),r.a.createElement(be.a,{item:!0},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"StuffingLocation",label:"Stuffing Location",value:void 0===this.state.pickingData.StuffingLocation?"":this.state.pickingData.StuffingLocation,margin:"dense",disabled:!0}))),r.a.createElement(be.a,{item:!0},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"Destination",label:"Plant Destination",value:void 0===this.state.pickingData.Destination?"":this.state.pickingData.Destination,margin:"dense",disabled:!0}))),r.a.createElement(be.a,{item:!0},r.a.createElement(sS,{columns:this.state.dateColumns,row:void 0===this.state.pickingData.Dates?[]:this.state.pickingData.Dates,order:"asc",orderBy:"LastUpdatedAt",rowsPerPage:25})),r.a.createElement(be.a,{item:!0},r.a.createElement(sS,{columns:this.state.testResultColumns,row:void 0===this.state.pickingData.TestResults?[]:this.state.pickingData.TestResults,order:"asc",orderBy:"LastUpdatedAt",rowsPerPage:25})),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.snackClass,autoHideDuration:600,open:this.state.snackOpen,onClose:this.snackOpen,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.snackMessage)})))}}]),t}(r.a.Component),Kw=(a(1045),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).handelChange=function(e,t){var n=Object(me.a)({},a.state.data);n[t]=e,a.setState({data:n})},a.getReport=function(){var e=[];null!==a.state.data&&(void 0!==a.state.data.Factory&&""!==a.state.data.Factory&&e.push("Factory=".concat(a.state.data.Factory._id)),void 0!==a.state.data.Container&&""!==a.state.data.Container&&e.push("Container=".concat(a.state.data.Container))),We("FinishGoods/Reports/Container"+"?".concat(e.join("&"))).then((function(e){if(200===e.status&&"Succeed"===e.data.message){var t=e.data.data;a.setState({pdfData:t})}}))},a.state={data:null,pdfData:null,beginDate:!1,endDate:!1},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{style:{margin:"20px 0px 0px 0px"}},r.a.createElement(be.a,{item:!0,xs:12},r.a.createElement(x.a,{variant:"h5"},"Container Report")),r.a.createElement(be.a,{item:!0,xs:12},r.a.createElement(be.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center"},r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:3,lg:3},r.a.createElement(ya.a,{style:{width:"100%",marginTop:2}},r.a.createElement(Hr,{selectedValue:null===this.state.data||void 0===this.state.data.Factory?"":this.state.data.Factory,propertyName:"Factory",formControl:{valid:!0,message:""},handleChange:this.handelChange,required:!1}))),r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:3,lg:3},r.a.createElement(ya.a,{style:{width:"100%",marginTop:-12}},r.a.createElement(ge.a,{id:"ContainerNo",label:"Container",value:null===this.state.data||void 0===this.state.data.Container?"":this.state.data.Container,onChange:function(t){return e.handelChange(t.target.value,"Container")},margin:"dense"}))),r.a.createElement(be.a,{item:!0,xs:3},r.a.createElement(fo.a,{variant:"extended",onClick:this.getReport},"Go")))),r.a.createElement(be.a,{item:!0,xs:12,style:{marginTop:15}},r.a.createElement(Ew,{pdfData:this.state.pdfData,name:"Container ".concat(new Date(Date.now()).toDateString()),type:"base64"})))}}]),t}(r.a.Component)),Jw=(a(1046),a(1047),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={label:"Scatter Dataset",data:{datasets:[{type:"scatter",label:"1",backgroundColor:"rgba(75,192,192,0.4)",pointBorderColor:"rgba(75,192,192,1)",pointBorderWidth:10,data:[{x:"2018-10-12T06:14:30.508Z",y:49},{x:"2018-10-13T06:13:31.508Z",y:90},{x:"2018-10-13T06:13:32.508Z",y:29},{x:"2018-10-14T06:15:33.508Z",y:36},{x:"2018-10-12T06:16:34.508Z",y:25},{x:"2018-10-14T06:17:35.508Z",y:18}]},{type:"scatter",label:"2",pointBorderWidth:10,data:[{x:"2018-10-11T06:10:29.508Z",y:33},{x:"2018-10-12T06:13:30.508Z",y:11},{x:"2018-10-12T06:14:31.508Z",y:44},{x:"2018-10-11T06:13:32.508Z",y:55},{x:"2018-10-12T06:14:33.508Z",y:66},{x:"2018-10-11T06:15:34.508Z",y:66}]},{type:"line",label:"Max",data:[{x:"2018-10-10T06:10:29.508Z",y:80},{x:"2018-12-10T06:24:00.00Z",y:80}],fill:!1,borderColor:"red"}]},options:{scales:{xAxes:[{display:!0,type:"time",time:{unit:"hour",displayFormats:{hour:"DD (HH:mm)"}},distribution:"series"}],yAxes:[{scaleLabel:{display:!0,labelString:"value"}}]}}},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(be.a,{style:{margin:"20px 0px 0px 0px"}},r.a.createElement(be.a,{item:!0,xs:12},r.a.createElement(x.a,{variant:"h5"},this.props.title)),r.a.createElement(be.a,{item:!0,xs:10},r.a.createElement(_t.g,{ref:"chart",data:this.state.data,options:this.state.options})))}}]),t}(r.a.Component)),Zw=function(e){function t(){return Object(c.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(Jw,{dataSets:"",title:"Crumb Graph"})}}]),t}(r.a.Component),Xw=(a(1048),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).handelChange=function(e,t){var n=Object(me.a)({},a.state.data);n[t]=e,a.setState({data:n})},a.getReport=function(){null!==a.state.data&&void 0!==a.state.data.Factory&&""!==a.state.data.Factory&&We("FinishGoods/Reports/Production/".concat(a.state.data.Factory._id)).then((function(e){if(200===e.status&&"Succeed"===e.data.message){var t=e.data.data;a.setState({pdfData:t})}}))},a.state={data:null,pdfData:null,beginDate:!1,endDate:!1},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(be.a,{style:{margin:"20px 0px 0px 0px"}},r.a.createElement(be.a,{item:!0,xs:12},r.a.createElement(x.a,{variant:"h5"},"Production Report")),r.a.createElement(be.a,{item:!0,xs:12},r.a.createElement(be.a,{Production:!0,direction:"row",justify:"flex-start",alignItems:"center"},r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:3,lg:3},r.a.createElement(ya.a,{style:{width:"100%",marginTop:2}},r.a.createElement(Hr,{selectedValue:null===this.state.data||void 0===this.state.data.Factory?"":this.state.data.Factory,propertyName:"Factory",formControl:{valid:!0,message:""},handleChange:this.handelChange,required:!0}))),r.a.createElement(be.a,{item:!0,xs:3},r.a.createElement(fo.a,{variant:"extended",onClick:this.getReport},"Go")))),r.a.createElement(be.a,{item:!0,xs:12,style:{marginTop:15}},r.a.createElement(Ew,{pdfData:this.state.pdfData,name:"Production ".concat(new Date(Date.now()).toDateString()),type:"base64"})))}}]),t}(r.a.Component)),$w=(a(1049),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={selectedMarker:null,selectedLatLng:null,parentCountry:a.props.Country,initialCenter:null,zoomIdx:1},a.onClick=a.onClick.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){void 0!==this.props.parentCountry&&null!==this.props.parentCountry&&""!==this.props.parentCountry&&this.setInitialCenter()}},{key:"componentDidUpdate",value:function(e,t,a){e.parentCountry!==this.props.parentCountry&&this.setInitialCenter()}},{key:"setInitialCenter",value:function(){this.setState({initialCenter:{lat:this.props.parentCountry.lat,lng:this.props.parentCountry.lng,zoomIdx:7}})}},{key:"renderOptions",value:function(){return void 0!==this.state.selectedLatLng&&null!==this.state.selectedLatLng&&"object"===typeof this.state.selectedLatLng?r.a.createElement(xv.Marker,{key:1,id:1,title:this.props.parentCountry.title,name:this.props.parentCountry.name,position:this.state.selectedLatLng}):""}},{key:"onClick",value:function(e,t,a){var n=this,r=a.latLng,o={lat:r.lat(),lng:r.lng()};this.setState({selectedLatLng:o},(function(){return n.props.onClick(o)}))}},{key:"render",value:function(){return r.a.createElement(be.a,{container:!0,direction:"column",justify:"center",wrap:"wrap",style:{margin:"20px 20px 10px 0px"}},r.a.createElement(be.a,{item:!0,xs:12},r.a.createElement(xv.Map,{google:this.props.google,zoom:this.state.zoomIdx,style:{width:"98%",height:"98%"},initialCenter:null===this.state.initialCenter?{lat:0,lng:0}:this.state.initialCenter,center:this.state.selectedLatLng,onClick:this.onClick},this.renderOptions())))}}]),t}(r.a.Component)),eF=(Object(xv.GoogleApiWrapper)({apiKey:"AIzaSyA51NyhrMMScawCx7WnC1Kbn3LWTYQYYcA"})($w),r.a.forwardRef((function(e,t){return r.a.createElement($e.a,Object.assign({direction:"up",ref:t},e))}))),tF=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).downloadBarCode=function(){Do("getBarCode/Pallet/5e047603fc528f8f64f5b629").then((function(e){(console.log(e),!0===e.code)&&Co(new Uint8Array(e.data.data),"barcode_pallet_".concat(Date.now().toLocaleString(),".pdf"))}))},a.onDetect=function(e){a.setState({decodeValue:e},(function(){return a.handleClose()}))},a.handleClickOpen=function(){a.setState({open:!0,startScann:!0})},a.handleClose=function(){a.setState({open:!1,startScann:!1})},a.downloadFile=function(){We("test",{responseType:"blob"}).then((function(e){var t=window.URL.createObjectURL(new Blob([e.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"})),a=document.createElement("a");a.href=t,a.setAttribute("download","file.xlsx"),document.body.appendChild(a),a.click()}))},a.state={open:!1,startScann:!1,decodeValue:null},a.onClick=a.onClick.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"onClick",value:function(e){console.log(e)}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(he.a,{variant:"contained",color:"primary",onClick:this.downloadFile},"Download File"),r.a.createElement(he.a,{variant:"contained",color:"primary",onClick:this.downloadBarCode},"Download BarCode"),r.a.createElement("br",null),r.a.createElement(he.a,{variant:"contained",color:"primary",onClick:this.handleClickOpen},"Open"),r.a.createElement(Ae.a,{fullScreen:!0,open:this.state.open,onClose:this.handleClose,TransitionComponent:eF},r.a.createElement(w.a,null,r.a.createElement(F.a,null,r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:this.handleClose,"aria-label":"close"},r.a.createElement(Vt.a,null)),r.a.createElement(x.a,{variant:"h6"},"Sound"),r.a.createElement(he.a,{autoFocus:!0,color:"inherit",onClick:this.handleClose},"save"))),this.state.startScann?r.a.createElement(bC,{startScan:this.state.startScann,OnDetect:this.onDetect}):""))}}]),t}(r.a.Component),aF=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={chartData:{labels:["Jan 2019","Feb 2019","Mar 2019","Apr 2019","May 2019","Jun 2019","Jul 2019","Aug 2019","Sep 2019","Oct 2019","Nov 2019","Dec 2019"],datasets:[{label:"Monthly Target",data:[700,800,300,650,888,200,400,350,900,1e3],backgroundColor:["rgba(100, 99, 200, 0.6)","rgba(100, 99, 200, 0.6)","rgba(100, 99, 200, 0.6)","rgba(100, 99, 200, 0.6)","rgba(100, 99, 200, 0.6)","rgba(100, 99, 200, 0.6)","rgba(100, 99, 200, 0.6)","rgba(100, 99, 200, 0.6)","rgba(100, 99, 200, 0.6)","rgba(100, 99, 200, 0.6)","rgba(100, 99, 200, 0.6)","rgba(100, 99, 200, 0.6)","rgba(100, 99, 200, 0.6)"]},{label:"Monthly Production",data:[100,850,0,500,880,250,600,800,600,500],backgroundColor:["rgba(100, 99, 5, 0.6)","rgba(100, 99, 5, 0.6)","rgba(100, 99, 5, 0.6)","rgba(100, 99, 5, 0.6)","rgba(100, 99, 5, 0.6)","rgba(100, 99, 5, 0.6)","rgba(100, 99, 5, 0.6)","rgba(100, 99, 5, 0.6)","rgba(100, 99, 5, 0.6)","rgba(100, 99, 5, 0.6)","rgba(100, 99, 5, 0.6)","rgba(100, 99, 5, 0.6)","rgba(100, 99, 5, 0.6)"]}]}},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement("div",{className:e.Chart},r.a.createElement(_t.a,{data:this.state.chartData,width:100,height:50,options:{maintainAspectRatio:!0}}))}}]),t}(n.Component),nF=Object(M.a)((function(e){return{Chart:{display:"flex",margin:-50}}}))(aF),rF=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={chartData:{labels:["00:00","01:00","02:00","02:00","03:00","04:00","05:00","06:00","07:00","08:00","09:00","10:10","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00","19:00","20:00","21:00","22:00","23:00"],datasets:[{label:"Percentage of KG Contamination/Ton Product",data:[70,80,30,65,88,20,40,35,90,100,70,90,30,65,88,20,40,35,90,100],backgroundColor:["rgba(250, 150, 220, 0.6)","rgba(100, 99, 200, 0.6)","rgba(100, 99, 200, 0.6)","rgba(100, 99, 200, 0.6)","rgba(100, 99, 200, 0.6)","rgba(100, 99, 200, 0.6)","rgba(100, 99, 200, 0.6)","rgba(100, 99, 200, 0.6)","rgba(100, 99, 200, 0.6)","rgba(100, 99, 200, 0.6)","rgba(100, 99, 200, 0.6)","rgba(100, 99, 200, 0.6)","rgba(100, 99, 200, 0.6)","rgba(100, 99, 200, 0.6)","rgba(100, 99, 200, 0.6)","rgba(100, 99, 200, 0.6)","rgba(100, 99, 200, 0.6)","rgba(100, 99, 200, 0.6)","rgba(100, 99, 200, 0.6)","rgba(100, 99, 200, 0.6)","rgba(100, 99, 200, 0.6)","rgba(100, 99, 200, 0.6)","rgba(100, 99, 200, 0.6)","rgba(100, 99, 200, 0.6)","rgba(100, 99, 200, 0.6)"]}]}},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement("div",{className:e.Chart},r.a.createElement(_t.c,{data:this.state.chartData,width:100,height:50,options:{maintainAspectRatio:!0}}))}}]),t}(n.Component),oF=Object(M.a)((function(e){return{Chart:{display:"flex",margin:-50}}}))(rF),sF=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={chartData:{labels:["Jan 2019","Feb 2019","Mar 2019","Apr 2019","May 2019","Jun 2019","Jul 2019","Aug 2019","Sep 2019","Oct 2019","Nov 2019","Dec 2019"],datasets:[{label:"Target",data:[700,800,400,650,880,200,400,350,900,1e3,700,900],backgroundColor:["rgba(125, 150, 220, 0.6)","rgba(200, 199, 200, 0.6)","rgba(100, 99, 200, 0.6)","rgba(100, 99, 200, 0.6)","rgba(100, 99, 200, 0.6)","rgba(100, 99, 200, 0.6)","rgba(100, 99, 200, 0.6)","rgba(100, 99, 200, 0.6)","rgba(100, 99, 200, 0.6)","rgba(100, 99, 200, 0.6)","rgba(100, 99, 200, 0.6)","rgba(100, 99, 200, 0.6)","rgba(100, 99, 200, 0.6)","rgba(100, 99, 200, 0.6)","rgba(100, 99, 200, 0.6)","rgba(100, 99, 200, 0.6)","rgba(100, 99, 200, 0.6)","rgba(100, 99, 200, 0.6)","rgba(100, 99, 200, 0.6)","rgba(100, 99, 200, 0.6)","rgba(100, 99, 200, 0.6)","rgba(100, 99, 200, 0.6)","rgba(100, 99, 200, 0.6)","rgba(100, 99, 200, 0.6)","rgba(100, 99, 200, 0.6)"]},{label:"Production",data:[800,850,100,500,880,250,600,800,600,500,900,850],backgroundColor:["rgba(100, 99, 5, 0.6)","rgba(100, 99, 5, 0.6)","rgba(100, 99, 5, 0.6)","rgba(100, 99, 5, 0.6)","rgba(100, 99, 5, 0.6)","rgba(100, 99, 5, 0.6)","rgba(100, 99, 5, 0.6)","rgba(100, 99, 5, 0.6)","rgba(100, 99, 5, 0.6)","rgba(100, 99, 5, 0.6)","rgba(100, 99, 5, 0.6)","rgba(100, 99, 5, 0.6)","rgba(100, 99, 5, 0.6)"]}]}},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement("div",{className:e.Chart},r.a.createElement(_t.f,{data:this.state.chartData,width:100,height:50,options:{maintainAspectRatio:!0}}))}}]),t}(n.Component),iF=Object(M.a)((function(e){return{Chart:{display:"flex",margin:-50}}}))(sF),lF=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={chartData:{labels:["Jan 2019","Feb 2019","Mar 2019","Apr 2019","May 2019","Jun 2019","Jul 2019","Aug 2019","Sep 2019","Oct 2019","Nov 2019","Dec 2019"],datasets:[{label:"Target",data:[700,800,400,650,880,200,400,350,900,1e3,700,900],backgroundColor:["rgba(125, 150, 220, 0.6)","rgba(200, 150, 120, 0.6)","rgba(170, 199, 002, 0.6)","rgba(002, 230, 70, 0.6)","rgba(200, 220, 90, 0.6)","rgba(100, 9, 20, 0.6)","rgba(100, 99, 200, 0.6)","rgba(10, 99, 200, 0.6)","rgba(70, 99, 200, 0.6)","rgba(100, 200, 100, 0.6)","rgba(98, 35, 170, 0.6)","rgba(180, 170, 20, 0.6)"]},{label:"Production",data:[700,810,350,500,880,250,600,800,600,500,900,850],backgroundColor:["rgba(125, 150, 220, 0.6)","rgba(200, 150, 120, 0.6)","rgba(170, 199, 002, 0.6)","rgba(002, 230, 70, 0.6)","rgba(200, 220, 90, 0.6)","rgba(100, 9, 20, 0.6)","rgba(100, 99, 200, 0.6)","rgba(10, 99, 200, 0.6)","rgba(70, 99, 200, 0.6)","rgba(100, 200, 100, 0.6)","rgba(98, 35, 170, 0.6)","rgba(180, 170, 20, 0.6)"]}]}},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement("div",{className:e.Chart},r.a.createElement(_t.d,{data:this.state.chartData,width:100,height:50,options:{maintainAspectRatio:!0}}))}}]),t}(n.Component),cF=Object(M.a)((function(e){return{Chart:{display:"flex",margin:-50}}}))(lF),uF=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={chartData:{labels:["Jan 2019","Feb 2019","Mar 2019","Apr 2019","May 2019","Jun 2019","Jul 2019","Aug 2019","Sep 2019","Oct 2019","Nov 2019","Dec 2019"],datasets:[{label:"Target",data:[700,800,400,650,880,200,400,350,900,1e3,700,900],backgroundColor:["rgba(125, 150, 220, 0.6)","rgba(200, 150, 120, 0.6)","rgba(170, 199, 002, 0.6)","rgba(002, 230, 70, 0.6)","rgba(200, 220, 90, 0.6)","rgba(100, 9, 20, 0.6)","rgba(100, 99, 200, 0.6)","rgba(10, 99, 200, 0.6)","rgba(70, 99, 200, 0.6)","rgba(100, 200, 100, 0.6)","rgba(98, 35, 170, 0.6)","rgba(180, 170, 20, 0.6)"]}]}},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement("div",{className:e.Chart},r.a.createElement(_t.b,{data:this.state.chartData,width:100,height:50,options:{maintainAspectRatio:!0}}))}}]),t}(n.Component),dF=Object(M.a)((function(e){return{Chart:{display:"flex",margin:-50}}}))(uF),mF=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={chartData:{labels:["Jan 2019","Feb 2019","Mar 2019","Apr 2019","May 2019","Jun 2019","Jul 2019","Aug 2019","Sep 2019","Oct 2019","Nov 2019","Dec 2019"],datasets:[{label:"Target",data:[700,800,400,650,880,200,400,350,900,1e3,700,900],backgroundColor:["rgba(125, 150, 120, 0.6)","rgba(200, 150, 120, 0.6)","rgba(170, 199, 002, 0.6)","rgba(002, 30, 70, 0.6)","rgba(20, 220, 90, 0.6)","rgba(100, 9, 20, 0.6)","rgba(100, 99, 200, 0.6)","rgba(10, 99, 200, 0.6)","rgba(70, 99, 200, 0.6)","rgba(100, 200, 100, 0.6)","rgba(98, 35, 170, 0.6)","rgba(180, 170, 20, 0.6)"]},{label:"Production",data:[600,810,350,500,800,250,600,800,600,500,900,850],backgroundColor:["rgba(125, 150, 8, 0.6)","rgba(200, 150, 120, 0.6)","rgba(170, 199, 002, 0.6)","rgba(002, 230, 70, 0.6)","rgba(200, 220, 90, 0.6)","rgba(100, 9, 20, 0.6)","rgba(100, 99, 200, 0.6)","rgba(10, 99, 200, 0.6)","rgba(70, 99, 200, 0.6)","rgba(100, 200, 100, 0.6)","rgba(98, 35, 170, 0.6)","rgba(180, 170, 20, 0.6)"]}]}},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement("div",{className:e.Chart},r.a.createElement(_t.e,{data:this.state.chartData,width:100,height:50,options:{maintainAspectRatio:!0}}))}}]),t}(n.Component),pF=Object(M.a)((function(e){return{Chart:{display:"flex",margin:-50}}}))(mF),fF=(a(1050),{add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="baleCheckUpload/"+e,n.abrupt("return",He(a,t).then((function(e){return 200===e.status&&"Succeed"===e.data.message&&0===e.data.failedData.length?{code:!0,formValid:!0,message:"Successfully Import",errors:null,data:e.data.data,failedData:e.data.failedData}:{code:!1,formValid:!0,message:e.data.message,failedData:e.data.failedData,errors:e.data.errors,data:null}})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))}}),hF=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).snackOpen=function(e,t){var n;return l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0===e||null===e||void 0===t||null===t){r.next=7;break}return r.next=3,l.a.awrap(ka(e,t));case 3:n=r.sent,a.setState({snackOpen:!a.state.snackOpen,alertMessage:n,alertClass:e}),r.next=8;break;case 7:a.setState({snackOpen:!1});case 8:case"end":return r.stop()}}))},a.onCancel=function(){a.setState({uploadExcelData:[],uploadExcelColumn:[],file:{}})},a.onImport=function(){if(Array.isArray(a.state.uploadExcelData)&&a.state.uploadExcelData.length>0){var e=Object(je.a)(a.state.uploadExcelData);e.forEach((function(e){return delete e.FailedReason})),fF.add("",{factory:a.state.selectedFactory,importData:e}).then((function(e){if(!0===e.code)a.setState({uploadExcelData:[],uploadExcelColumn:[],file:{}},(function(){return a.snackOpen("success","add")}));else if(void 0!==e.failedData&&Array.isArray(e.failedData)&&e.failedData.length>0){var t=a.state.uploadExcelColumn;0===t.filter((function(e){return"FailedReason"===e.Key})).length&&t.push({DisplayName:"FailedReason",Key:"FailedReason"}),a.setState({uploadExcelData:e.failedData,uploadExcelColumn:t},(function(){return console.log(a.state)}))}else a.snackOpen("error","server")}))}},a.state={selectedFactory:"",remarks:"",disabledUpload:!0,disabledImport:!0,uploadExcelColumn:[],uploadExcelData:[],file:{}},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"handleChange",value:function(e,t){"Factory"!==t||void 0!==e&&""!==e?"Factory"===t&&void 0!==e&&""!==e&&this.setState({selectedFactory:e,disabledUpload:!1,disabledImport:!1}):this.setState({selectedFactory:e,disabledUpload:!0,disabledImport:!0})}},{key:"onDownloadTemplate",value:function(){var e=this;Eo("BaleCheck.xlsx").then((function(t){!0===t.code?Co(t.data,"BaleCheck.xlsx"):e.snackOpen("error","server")}))}},{key:"postFile",value:function(e){var t=this,a=new FormData;a.append("file",e),this.setState({file:e}),Ke("Common/XlSToJson/",a).then((function(e){if(200===e.status&&null===e.data.errors){var a=[],n=[],r=e.data.data;if(Array.isArray(r)&&r.length>0){Object.keys(r[0]).map((function(e){var t=e.trim();if(""!==t&&-1===t.indexOf("_EMPTY")){var n={};n.DisplayName=t.replace("_"," "),n.Key=t,a.push(n)}}));var o=!0,s=!1,i=void 0;try{for(var l,c=function(){var e=l.value,t={};Object.keys(r[0]).map((function(a){var n=a.trim();""!==n&&-1===n.indexOf("_EMPTY")&&(-1===a.indexOf("Date")||Number.isNaN(e[a])?-1===a.indexOf("Time")||""===e[a]||Number.isNaN(e[a])?t[a]=e[a]:t[a]=new Date(0,0,0,0,0,86401*e[a]).toLocaleString("en-GB",{hour:"numeric",minute:"numeric"}):t[a]=new Date(0,0,e[a]).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric"}))})),n.push(t)},u=r[Symbol.iterator]();!(o=(l=u.next()).done);o=!0)c()}catch(d){s=!0,i=d}finally{try{o||null==u.return||u.return()}finally{if(s)throw i}}}t.setState({uploadExcelColumn:a,uploadExcelData:n})}}))}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",wrap:"wrap",spacing:3,style:{marginTop:3}},r.a.createElement(be.a,{item:!0,xs:12},r.a.createElement(x.a,{variant:"overline",display:"block",gutterBottom:!0},"Trolley Washing Upload")),r.a.createElement(be.a,{item:!0,xs:12,sm:12,md:8,lg:8},r.a.createElement(Hr,{selectedValue:this.state.selectedFactory,propertyName:"Factory",handleChange:function(t){return e.handleChange(t,"Factory")},required:!1})),r.a.createElement(be.a,{item:!0,xs:6,sm:6,md:2,lg:2},r.a.createElement(he.a,{variant:"outlined",color:"secondary",onClick:this.onDownloadTemplate},"Download Template")),r.a.createElement(be.a,{item:!0,xs:6,sm:6,md:2,lg:2}),r.a.createElement(be.a,{item:!0,xs:6,sm:6,md:2,lg:2},r.a.createElement("div",null,r.a.createElement("input",{accept:"pdf",className:"",id:"excelupload",color:"primary",type:"file",style:{display:"none"},onChange:function(t){e.postFile(t.target.files[0]),t.target.value=null},disabled:this.state.disabledUpload}),r.a.createElement("label",{htmlFor:"excelupload"},r.a.createElement(fo.a,{size:"small",color:"primary",component:"span","aria-label":"add",disabled:this.state.disabledUpload,className:""},r.a.createElement(wt.a,null))),r.a.createElement("label",null,this.state.file.name))),r.a.createElement(be.a,{item:!0,xs:12},r.a.createElement(bn,{label:"Uploaded Data",style:{maxWidth:"90%"}},r.a.createElement(Ls,{columns:this.state.uploadExcelColumn,row:this.state.uploadExcelData,order:"asc",orderBy:"Date",rowsPerPage:25}))),r.a.createElement(be.a,{item:!0,xs:4,md:1},r.a.createElement(he.a,{htmlFor:"upload_excel",variant:"contained",color:"primary",disabled:this.state.disabledImport,onClick:this.onImport},"Import")),r.a.createElement(be.a,{item:!0,xs:4,md:1},r.a.createElement(he.a,{variant:"contained",color:"secondary",onClick:this.onCancel},"Cancel")),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:600,open:this.state.snackOpen,onClose:this.snackOpen,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}))}}]),t}(r.a.Component),gF=(a(1051),{Factory:"",MachineList:"",Shift:"",DatetimeBegin:new Date,DatetimeEnd:new Date,DatetimeRepair:new Date,NOT:!1,BreakdownReason:"",MaintenanceActivity:"",WorkOrder:"",SystemObject:"",SystemFault:"",CauseComponent:"",CauseFault:"",Remarks:"",NOTDetail:[],BreakdownMaintenancePersonnel:[]}),yF=(a(1052),{properties:{Factory:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Factory cannot be empty.",conform:"Factory cannot be empty.",required:"Factory cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},MachineList:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Machine cannot be empty.",conform:"Machine cannot be empty.",required:"Machine cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},DatetimeBegin:{description:"",type:"any",required:!0,allowEmpty:!1,messages:{allowEmpty:"Datetime call cannot be empty.",conform:"Datetime call cannot be empty.",required:"Datetime call cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},DatetimeEnd:{description:"",type:"any",required:!0,allowEmpty:!1,messages:{allowEmpty:"Datetime end cannot be empty.",conform:"Datetime end cannot be empty.",required:"Datetime end cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},DatetimeRepair:{description:"",type:"any",required:!0,allowEmpty:!1,messages:{allowEmpty:"Datetime repair cannot be empty.",conform:"Datetime repair cannot be empty.",required:"Datetime repair cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},Shift:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Shift cannot be empty.",conform:"Shift cannot be empty.",required:"Shift cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},BreakdownReason:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Breakdown Reason cannot be empty.",conform:"Breakdown Reason cannot be empty.",required:"Breakdown Reason cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},MaintenanceActivity:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Maintenance Activity cannot be empty.",conform:"Maintenance Activity cannot be empty.",required:"Maintenance Activity cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},SystemObject:{description:"",type:"string",required:!0,allowEmpty:!1,messages:{allowEmpty:"System Object cannot be empty.",conform:"System Object cannot be empty.",required:"System Object cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},SystemFault:{description:"",type:"string",required:!0,allowEmpty:!1,messages:{allowEmpty:"System Fault cannot be empty.",conform:"System Fault cannot be empty.",required:"System Fault cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},CauseComponent:{description:"",type:"string",required:!0,allowEmpty:!1,messages:{allowEmpty:"Cause Component cannot be empty.",conform:"Cause Component cannot be empty.",required:"Cause Component cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},CauseFault:{description:"",type:"string",required:!0,allowEmpty:!1,messages:{allowEmpty:"Cause Fault cannot be empty.",conform:"Cause Fault cannot be empty.",required:"Cause Fault cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},Remarks:{description:"",type:"string"},BreakdownMaintenancePersonnel:{description:"",type:"array"},CreatedAt:{type:"any",default:Date.now()},CreatedBy:{type:"string",default:""},LastUpdatedAt:{type:"any",default:Date.now()},LastUpdatedBy:{type:"string",default:""}}}),vF={properties:{MaintenancePersonnel:{description:"",type:["string","object"],required:!0,allowEmpty:!1,messages:{allowEmpty:"Maintenance Personnel cannot be empty.",conform:"Maintenance Personnel cannot be empty.",required:"Maintenance Personnel cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},TimeSpent:{description:"",type:"number"},WorkOn:{description:"",type:"string"}}},CF={properties:{NOTDatetimeBegin:{description:"",type:"any",required:!0,allowEmpty:!1,messages:{allowEmpty:"Datetime Begin cannot be empty.",conform:"Datetime Begin cannot be empty.",required:"Datetime Begin cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}},NOTDatetimeEnd:{description:"",type:"any",required:!0,allowEmpty:!1,messages:{allowEmpty:"Datetime end cannot be empty.",conform:"Datetime end cannot be empty.",required:"Datetime end cannot be empty."},conform:function(e){return!(0===e||""===e||void 0===e)}}}},DF=a(24),EF={validateFields:function(e){return DF.validate(e,yF,{cast:!0})},validateBreakdownMaintenancePersonnelFields:function(e){return DF.validate(e,vF,{cast:!0})},validateNOTDetailFields:function(e){return DF.validate(e,CF,{cast:!0})},get:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="breakdown/"+e,a.abrupt("return",We(t).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data.map((function(e){return e}))}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},getFilter:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("breakdown-filter/").concat(e),a.abrupt("return",We(t).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},getOne:function(e){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t="".concat("breakdown/").concat(e),a.abrupt("return",We(t).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Succeed",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return a.stop()}}))},update:function(e,t){return Qe("breakdown/"+e,t).then((function(e){return console.log(e),200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Updated",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e}))},add:function(e,t){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a="breakdown/"+e,n.abrupt("return",He(a,t).then((function(e){return 200===e.status&&null!==e.data.data&&null===e.data.errors?{code:!0,formValid:!0,message:"Successfully Added",errors:null,data:e.data.data}:200===e.status&&null!==e.data.errors?{code:!1,formValid:!0,message:e.data.message,errors:e.data.errors,data:null}:void 0})).catch((function(e){throw e})));case 2:case"end":return n.stop()}}))},delete:function(e){return ze("breakdown/"+e).then((function(e){return 200===e.status&&null!==e.data.data?{code:!0,formValid:!0,message:"Successfully Deleted",data:e.data.data}:200===e.status&&null===e.data.data?{code:!1,message:e.data.message,data:null}:void 0})).catch((function(e){throw e}))}},bF=(a(1053),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={breakdownReasonData:[]},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){""!==this.props.selectedCat&&void 0!==this.props.selectedCat&&this.fetchBreakdownReasonData()}},{key:"componentDidUpdate",value:function(e){this.props.selectedCat!==e.selectedCat&&void 0!==this.props.selectedCat&&""!==this.props.selectedCat&&this.fetchBreakdownReasonData()}},{key:"fetchBreakdownReasonData",value:function(){var e=this;Dr.getToolFilter("?BRCat=".concat(this.props.selectedCat,"&BRInactive=false")).then((function(t){e.setState({breakdownReasonData:t.data})}))}},{key:"renderOptions",value:function(){return this.state.breakdownReasonData.map((function(e,t){return r.a.createElement(et.a,{label:"Select Reason",value:e._id,key:e._id,name:e.BRName},e.BRName)}))}},{key:"handleChange",value:function(e){var t=this.state.breakdownReasonData.find((function(t){return t._id===e.target.value}));void 0!==t?this.props.handleChange(t,this.props.propertyName,this.props.required):this.props.handleChange("",this.props.propertyName,this.props.required)}},{key:"render",value:function(){var e=this;return r.a.createElement(ya.a,{style:{width:"100%"}},r.a.createElement(Ea.a,{shrink:!0,htmlFor:"Reason",required:!0,error:!this.props.formControl.valid},"Activity"),r.a.createElement(ba.a,{id:this.props.propertyName,value:void 0===this.props.selectedValue._id?"":this.props.selectedValue._id,style:{minWidth:140},error:!this.props.formControl.valid,onChange:function(t){return e.handleChange(t,e.props.propertyName)},margin:"dense",displayEmpty:!0},r.a.createElement(et.a,{value:""},r.a.createElement("em",null,"Select Reason")),this.renderOptions()),r.a.createElement(Sa.a,{error:!this.props.formControl.valid,style:{display:this.props.formControl.valid?"none":""}},this.props.formControl.valid?"":this.props.formControl.message))}}]),t}(r.a.Component)),SF=(a(1054),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={maintenancePersonnelData:[]},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){""!==this.props.selectedFactory&&void 0!==this.props.selectedFactory&&this.fetchMaintenancePersonnelData(this.props.selectedFactory)}},{key:"componentDidUpdate",value:function(e){this.props.selectedFactory!==e.selectedFactory&&void 0!==this.props.selectedFactory&&""!==this.props.selectedFactory&&this.fetchMaintenancePersonnelData()}},{key:"fetchMaintenancePersonnelData",value:function(){var e=this;jD.getFilter("?Factory=".concat(this.props.selectedFactory,"&Inactive=false")).then((function(t){e.setState({maintenancePersonnelData:t.data})}))}},{key:"renderOptions",value:function(){return this.state.maintenancePersonnelData.map((function(e,t){return r.a.createElement(et.a,{label:"Select Personnel",value:e._id,key:e._id,name:e.ID},e.ID)}))}},{key:"handleChange",value:function(e){var t=this.state.maintenancePersonnelData.find((function(t){return t._id===e.target.value}));void 0!==t?this.props.handleChange(t,this.props.propertyName,this.props.required):this.props.handleChange("",this.props.propertyName,this.props.required)}},{key:"render",value:function(){var e=this;return r.a.createElement(ya.a,{style:{width:"100%"}},r.a.createElement(Ea.a,{shrink:!0,htmlFor:"SubProcess",required:!0,error:!this.props.formControl.valid},"Personnel"),r.a.createElement(ba.a,{id:this.props.propertyName,value:void 0===this.props.selectedValue._id?"":this.props.selectedValue._id,style:{minWidth:140},error:!this.props.formControl.valid,onChange:function(t){return e.handleChange(t,e.props.propertyName)},margin:"dense",displayEmpty:!0},r.a.createElement(et.a,{value:""},r.a.createElement("em",null,"Select Personnel")),this.renderOptions()),r.a.createElement(Sa.a,{error:!this.props.formControl.valid,style:{display:this.props.formControl.valid?"none":""}},this.props.formControl.valid?"":this.props.formControl.message))}}]),t}(r.a.Component)),OF=a(23),kF=(r.a.forwardRef((function(e,t){return r.a.createElement($e.a,{direction:"up"})})),{Factory:{valid:!0,message:""},MachineList:{valid:!0,message:""},Shift:{valid:!0,message:""},DatetimeBegin:{valid:!0,message:""},DatetimeEnd:{valid:!0,message:""},DatetimeRepair:{valid:!0,message:""},NOT:{valid:!0,message:""},BreakdownReason:{valid:!0,message:""},MaintenanceActivity:{valid:!0,message:""},WorkOrder:{valid:!0,message:""},SystemObject:{valid:!0,message:""},SystemFault:{valid:!0,message:""},CauseComponent:{valid:!0,message:""},CauseFault:{valid:!0,message:""},Remarks:{valid:!0,message:""},BreakdownMaintenancePersonnel:{MaintenancePersonnel:{valid:!0,message:""},TimeSpent:{valid:!0,message:""},WorkOn:{valid:!0,message:""}},NOTDetail:{NOTDatetimeBegin:{valid:!0,message:""},NOTDatetimeEnd:{valid:!0,message:""},NOTRemarks:{valid:!0,message:""}}}),wF=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).closeForm=function(){a.setState({formControl:OF(kF)},(function(){return a.props.closeForm()}))},a.snackOpen=function(e,t,n){var r;return l.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(void 0===e||null===e||void 0===t||null===t){o.next=11;break}if(void 0!==n){o.next=7;break}return o.next=4,l.a.awrap(ka(e,t));case 4:r=o.sent,o.next=8;break;case 7:r=n;case 8:a.setState({snackOpen:!a.state.snackOpen,snackMessage:r,snackClass:e}),o.next=12;break;case 11:a.setState({snackOpen:!1});case 12:case"end":return o.stop()}}))},a.dialogOpen=function(e){var t;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(void 0===e||null===e){n.next=7;break}return n.next=3,l.a.awrap(ka("confirmation","delete"));case 3:t=n.sent,a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:e,dialogMessage:r.a.createElement("span",null,void 0!==t?t.replace("[Name]","this record"):"")}),n.next=8;break;case 7:a.setState({dialogOpen:!1});case 8:case"end":return n.stop()}}))},a.onSave=function(){var e,t,n;return l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return e=Object(me.a)({},a.state.formData),t=Object(me.a)({},a.state.formControl),e.BreakdownMaintenancePersonnel=a.state.breakdownMaintenancePersonnel,e.NOTDetail=e.NOT?a.state.notDetail:[],r.next=6,l.a.awrap(EF.validateFields(e));case 6:if((n=r.sent).valid){r.next=12;break}return n.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t}),a.snackOpen("error","alertValidation"),r.abrupt("return");case 12:if(!e.NOT||0!==e.NOTDetail.length){r.next=15;break}return a.snackOpen("error","","NOT detail is required."),r.abrupt("return");case 15:"Add"===a.props.formAction?EF.add("",e).then((function(e){!0===e.code?a.props.onSuccess(e.data):null!==e.errors&&Array.isArray(e.errors)?(e.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t})):a.snackOpen("error","server")})):EF.update("",e).then((function(e){!0===e.code?a.props.onSuccess(e.data):null!==e.errors&&Array.isArray(e.errors)?(e.errors.map((function(e){t[e.property].valid=!1,t[e.property].message=e.message})),a.setState({formControl:t})):a.snackOpen("error","server")}));case 16:case"end":return r.stop()}}))},a.onDelete=function(){if(null!==a.state.currentDeleteData&&void 0!==a.state.currentDeleteData){var e=Object(je.a)(a.state.breakdownMaintenancePersonnel),t=e.indexOf(a.state.currentDeleteData);e.splice(t,1),a.setState({breakdownMaintenancePersonnel:e},(function(){return a.dialogOpen()}))}},a.state={formData:a.props.formData,formOpen:a.props.formOpen,breakdownMaintenancePersonnel:[],notDetail:[],formControl:OF(kF),personnelColumns:[{title:"ID Number",field:"MaintenancePersonnel",render:function(e){return r.a.createElement("span",null,void 0===e||void 0===e.MaintenancePersonnel?"":e.MaintenancePersonnel.ID)},editComponent:function(e){return r.a.createElement(SF,{handleChange:function(t){return e.onChange(t)},selectedValue:void 0===e.rowData.MaintenancePersonnel?"":e.rowData.MaintenancePersonnel,formControl:a.state.formControl.BreakdownMaintenancePersonnel.MaintenancePersonnel,propertyName:"MaintenancePersonnel",selectedFactory:a.state.formData.Factory._id})}},{title:"Name",field:"MaintenancePersonnel",render:function(e){return r.a.createElement("span",null,void 0===e||void 0===e.MaintenancePersonnel?"":e.MaintenancePersonnel.Name)},editable:"never"},{title:"Time Spent",field:"TimeSpent",editComponent:function(e){return r.a.createElement(ge.a,{margin:"dense",id:"TimeSpent",label:"Time Spent",type:"number",error:""===e.value||!a.state.formControl.BreakdownMaintenancePersonnel.TimeSpent.valid,helperText:""===e.value?"TimeSpent cannot empty":a.state.formControl.BreakdownMaintenancePersonnel.TimeSpent.valid?"":a.state.formControl.BreakdownMaintenancePersonnel.TimeSpent.message,defaultValue:e.rowData.TimeSpent,onChange:function(t){return e.onChange(t.target.value)}})}},{title:"WorkOn",field:"WorkOn",editComponent:function(e){return r.a.createElement(ge.a,{margin:"dense",id:"WorkOn",label:"Work On",type:"text",defaultValue:e.rowData.WorkOn,onChange:function(t){return e.onChange(t.target.value)}})}}],notDetailColumns:[{title:"Datetime Begin",field:"NOTDatetimeBegin",render:function(e){return r.a.createElement("span",null,new Date(e.NOTDatetimeBegin).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"}))},editComponent:function(e){return r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Ac.a,{required:!0,format:"dd-MMM-yyyy hh:mm",label:"Datetime Begin",value:e.value,onChange:function(t){e.onChange(t)}}))}},{title:"Datetime End",field:"NOTDatetimeEnd",render:function(e){return r.a.createElement("span",null,new Date(e.NOTDatetimeEnd).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"}))},editComponent:function(e){return r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Ac.a,{required:!0,format:"dd-MMM-yyyy hh:mm",label:"Datetime End",value:e.value,onChange:function(t){e.onChange(t)}}))}},{title:"Remarks",field:"NOTRemarks",editComponent:function(e){return r.a.createElement(ge.a,{margin:"dense",id:"NOTRemarks",label:"Remarks",type:"text",defaultValue:e.rowData.NOTRemarks,onChange:function(t){return e.onChange(t.target.value)}})}}],currentDeleteData:null,dialogOpen:!1,dialogMessage:"",disabled:!1,snackOpen:!1,snackMessage:"",snackClass:""},a.handleChange=a.handleChange.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.setState({breakdownMaintenancePersonnel:this.props.formData.BreakdownMaintenancePersonnel,notDetail:this.props.formData.NOTDetail})}},{key:"handleChange",value:function(e,t,a){var n=Object(me.a)({},this.state.formData),r=Object(me.a)({},this.state.formControl);void 0!==e&&""!==e&&"Factory"!==t||!a?(r[t].valid=!0,r[t].message=""):(r[t].valid=!1,r[t].message="Factory cannot be empty."),"MaintenanceActivity"===t&&(n.BreakdownReason=""),"MaintenanceActivity"===t&&"D"===e.Code&&(n.NOT=!0),n[t]=e,this.setState({formData:n})}},{key:"initFormControl",value:function(){this.setState({formControls:OF(kF)})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(Ae.a,{fullScreen:!0,open:this.state.formOpen,onClose:this.closeForm,TransitionComponent:this.Transition},r.a.createElement(w.a,{className:"appBar"},r.a.createElement(F.a,null,r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:this.closeForm,"aria-label":"close"},r.a.createElement(Vt.a,null)),r.a.createElement(x.a,{variant:"h6",className:"app-title"},"Activity"),r.a.createElement(he.a,{color:"inherit",disabled:this.state.disabled,onClick:this.onSave},"save"))),r.a.createElement(_e.a,null,r.a.createElement("div",{className:"form-container"},r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-evenly",alignItems:"center",md:6,xs:12,sm:12,xl:8,lg:8},r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12},r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Hr,{selectedValue:this.state.formData.Factory,propertyName:"Factory",handleChange:this.handleChange,formControl:this.state.formControl.Factory})),r.a.createElement(ya.a,{style:{width:"100%",margin:4},margin:"dense"},r.a.createElement(wb,{selectedFactory:void 0===this.state.formData.Factory?"":this.state.formData.Factory._id,selectedValue:this.state.formData.MachineList,formControl:this.state.formControl.MachineList,propertyName:"MachineList",required:!0,handleChange:function(t){e.handleChange(t,"MachineList",!0)},machineType:"Machine",abvrs:"all"})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ns,{handleChange:this.handleChange,selectedValue:this.state.formData.Shift,formControl:this.state.formControl.Shift,propertyName:"Shift",factoryId:void 0===this.state.formData.Factory._id?this.state.formData.Factory:this.state.formData.Factory._id})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"WorkOrder",label:"Work Order",defaultValue:this.state.formData.WorkOrder,className:"",onChange:function(t){return e.handleChange(t.target.value,"WorkOrder",!1)},margin:"dense",required:!1,error:!this.state.formControl.WorkOrder.valid,helperText:this.state.formControl.WorkOrder.message})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"SystemObject",label:"System Object",defaultValue:this.state.formData.SystemObject,className:"",onChange:function(t){return e.handleChange(t.target.value.trim(),"SystemObject",!0)},margin:"dense",required:!0,error:!this.state.formControl.SystemObject.valid,helperText:this.state.formControl.SystemObject.message})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"SystemFault",label:"System Fault",defaultValue:this.state.formData.SystemFault,className:"",onChange:function(t){return e.handleChange(t.target.value.trim(),"SystemFault",!0)},margin:"dense",required:!0,error:!this.state.formControl.SystemFault.valid,helperText:this.state.formControl.SystemFault.message})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"CauseComponent",label:"Cause Component",defaultValue:this.state.formData.CauseComponent,className:"",onChange:function(t){return e.handleChange(t.target.value.trim(),"CauseComponent",!0)},margin:"dense",required:!0,error:!this.state.formControl.CauseComponent.valid,helperText:this.state.formControl.CauseComponent.message})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"CauseFault",label:"Cause Fault",defaultValue:this.state.formData.CauseFault,className:"",onChange:function(t){return e.handleChange(t.target.value.trim(),"CauseFault",!0)},margin:"dense",required:!0,error:!this.state.formControl.CauseFault.valid,helperText:this.state.formControl.CauseFault.message})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(Or,{handleChange:function(t){return e.handleChange(t,"MaintenanceActivity",!0)},selectedValue:this.state.formData.MaintenanceActivity,formControl:this.state.formControl.MaintenanceActivity,propertyName:"MaintenanceActivity"})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Ac.a,{required:!0,format:"dd-MMM-yyyy hh:mm",label:"Datetime Call",value:this.state.formData.DatetimeBegin,onChange:function(t){e.handleChange(t,"DatetimeBegin")}})),r.a.createElement(Sa.a,{error:!this.state.formControl.DatetimeBegin.valid,style:{display:this.state.formControl.DatetimeBegin.valid?"none":""}},this.state.formControl.DatetimeBegin.message))),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Ac.a,{required:!0,format:"dd-MMM-yyyy hh:mm",label:"Datetime Repair",value:this.state.formData.DatetimeRepair,onChange:function(t){e.handleChange(t,"DatetimeRepair")}})),r.a.createElement(Sa.a,{error:!this.state.formControl.DatetimeRepair.valid,style:{display:this.state.formControl.DatetimeRepair.valid?"none":""}},this.state.formControl.DatetimeRepair.message))),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ya.a,{style:{width:"100%"},margin:"dense"},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Ac.a,{required:!0,format:"dd-MMM-yyyy hh:mm",label:"Datetime End",value:this.state.formData.DatetimeEnd,onChange:function(t){e.handleChange(t,"DatetimeEnd")}})),r.a.createElement(Sa.a,{error:!this.state.formControl.DatetimeEnd.valid,style:{display:this.state.formControl.DatetimeEnd.valid?"none":""}},this.state.formControl.DatetimeEnd.message))),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(bF,{handleChange:function(t){return e.handleChange(t,"BreakdownReason",!0)},selectedValue:this.state.formData.BreakdownReason,formControl:this.state.formControl.BreakdownReason,propertyName:"BreakdownReason",selectedCat:this.state.formData.MaintenanceActivity._id})),r.a.createElement(ye.a,{style:{width:"100%",margin:4},margin:"dense",control:r.a.createElement(ve.a,{checked:this.state.formData.NOT,onChange:function(t){return e.handleChange(t.target.checked,"NOT")},value:this.state.formData.NOT,color:"primary",disabled:"D"===this.state.formData.MaintenanceActivity.Code}),label:"NOT (Non Operation Time)"}),r.a.createElement(ya.a,{style:{width:"100%",margin:4},margin:"dense"},r.a.createElement(Xa.a,{id:"BreakdownHour",label:"Breakdown Hour",customInput:ge.a,value:(new Date(this.state.formData.DatetimeEnd).getTime()-new Date(this.state.formData.DatetimeBegin).getTime())/36e5,disabled:!0,decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:4},margin:"dense"},r.a.createElement(Xa.a,{id:"NOTHour",label:"NOT Hour",customInput:ge.a,value:this.state.formData.NOT?this.state.notDetail.reduce((function(e,t){return e+(new Date(t.NOTDatetimeEnd).getTime()-new Date(t.NOTDatetimeBegin).getTime())/36e5}),0):0,disabled:!0,decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})),r.a.createElement(ya.a,{style:{width:"100%",margin:4}},r.a.createElement(ge.a,{id:"Remarks",label:"Remarks",multiline:!0,rows:"4",defaultValue:this.state.formData.Remarks,className:"",onChange:function(t){return e.handleChange(t.target.value,"Remarks",!1)},margin:"dense"}))),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12,style:{paddingTop:7}},r.a.createElement(Ve.a,{title:"Maintenance Personnel",columns:this.state.personnelColumns,data:this.state.breakdownMaintenancePersonnel,editable:{onRowAdd:function(t){return new Promise((function(a,n){setTimeout((function(){var r=Object(je.a)(e.state.breakdownMaintenancePersonnel),o=Object(me.a)({},e.state.formControl),s=EF.validateBreakdownMaintenancePersonnelFields(t);if(s.valid){var i=Object(me.a)({},t);r.push(i),e.setState({breakdownMaintenancePersonnel:r},(function(){return a()}))}else n(),s.errors.map((function(e){o.BreakdownMaintenancePersonnel[e.property].valid=!1,o.BreakdownMaintenancePersonnel[e.property].message=e.message})),e.setState({formControl:o})}),1e3)}))},onRowUpdate:function(t,a){return new Promise((function(n,r){setTimeout((function(){var o=Object(je.a)(e.state.breakdownMaintenancePersonnel),s=Object(me.a)({},e.state.formControl),i=EF.validateBreakdownMaintenancePersonnelFields(t);if(i.valid){var l=o.indexOf(a);o[l]=t,e.setState({breakdownMaintenancePersonnel:o},(function(){return n()}))}else r(),i.errors.map((function(e){s.BreakdownMaintenancePersonnel[e.property].valid=!1,s.BreakdownMaintenancePersonnel[e.property].message=e.message})),e.setState({formControl:s})}),1e3)}))}},actions:[{icon:"delete",tooltip:"Delete",onClick:function(t,a){return e.dialogOpen(a)}}],icons:{Clear:function(t){return r.a.createElement(Nt.a,{onClick:function(){e.initFormControl()},style:{padding:0,margin:0}})}},options:{search:!1}})),r.a.createElement(be.a,{item:!0,md:11,xs:12,sm:12,style:{paddingTop:7,display:this.state.formData.NOT?"":"none"}},r.a.createElement(Ve.a,{title:"NOT Detail",columns:this.state.notDetailColumns,data:this.state.notDetail,editable:{onRowAdd:function(t){return new Promise((function(a,n){setTimeout((function(){var r=Object(je.a)(e.state.notDetail),o=Object(me.a)({},e.state.formControl),s=EF.validateNOTDetailFields(t);if(s.valid){var i=Object(me.a)({},t);i.NOTDatetimeBegin=void 0===i.NOTDatetimeBegin?new Date:i.NOTDatetimeBegin,i.NOTDatetimeEnd=void 0===i.NOTDatetimeEnd?new Date:i.NOTDatetimeEnd,r.push(i),e.setState({notDetail:r},(function(){return a()}))}else n(),s.errors.map((function(e){o.NOTDetail[e.property].valid=!1,o.NOTDetail[e.property].message=e.message})),e.setState({formControl:o})}),1e3)}))},onRowUpdate:function(t,a){return new Promise((function(n,r){setTimeout((function(){var o=Object(je.a)(e.state.notDetail),s=Object(me.a)({},e.state.formControl),i=EF.validateNOTDetailFields(t);if(i.valid){var l=o.indexOf(a);o[l]=t,e.setState({notDetail:o},(function(){return n()}))}else r(),i.errors.map((function(e){s.NOTDetail[e.property].valid=!1,s.NOTDetail[e.property].message=e.message})),e.setState({formControl:s})}),1e3)}))}},actions:[{icon:"delete",tooltip:"Delete",onClick:function(t,a){return e.dialogOpen(a)}}],icons:{Clear:function(t){return r.a.createElement(Nt.a,{onClick:function(){e.initFormControl()},style:{padding:0,margin:0}})}},options:{search:!1}})))))),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.snackClass,autoHideDuration:600,open:this.state.snackOpen,onClose:this.snackOpen,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.snackMessage)}),this.state.dialogOpen?r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.dialogOpen,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.dialogOpen,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDelete,color:"primary"},"Delete"))):"")}}],[{key:"getDerivedStateFromProps",value:function(e,t){return{formOpen:e.formOpen}}}]),t}(r.a.Component),FF=a(23),xF=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).snackOpen=function(e,t){var n;return l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0===e||null===e||void 0===t||null===t){r.next=7;break}return r.next=3,l.a.awrap(ka(e,t));case 3:n=r.sent,a.setState({snackOpen:!a.state.snackOpen,alertMessage:n,alertClass:e}),r.next=8;break;case 7:a.setState({snackOpen:!1});case 8:case"end":return r.stop()}}))},a.dialogOpen=function(e){var t;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,l.a.awrap(ka("confirmation","delete"));case 2:t=n.sent,a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:e,dialogMessage:r.a.createElement("span",null,void 0!==t?t.replace("[Name]",e.Factory.FctyName):"")});case 4:case"end":return n.stop()}}))},a.diaLogClose=function(){a.setState({dialogOpen:!a.state.dialogOpen,currentDeleteData:null})},a.onDelete=function(){null!==a.state.currentDeleteData&&EF.delete("".concat(a.state.currentDeleteData._id)).then((function(e){if(!0===e.code){var t=Object(je.a)(a.state.data),n=t.indexOf(a.state.currentDeleteData);t.splice(n,1),a.setState({data:t,currentDeleteData:"",dialogOpen:!a.state.dialogOpen},(function(){return a.snackOpen("success","delete")}))}else a.snackOpen("error","server")}))},a.state={columns:[{title:"Factory",field:"Factory",render:function(e){return r.a.createElement("span",null,e.Factory.FctyName)}},{title:"Machine Code",field:"MachineList",render:function(e){return r.a.createElement("span",null,e.MachineList.MachLstCode)}},{title:"Machine Name",render:function(e){return r.a.createElement("span",null,e.MachineList.MachLstMachine.MachName)}},{title:"Machine Description",render:function(e){return r.a.createElement("span",null,e.MachineList.MachLstMachine.MachDesc)}},{title:"Shift",field:"Shift",render:function(e){return r.a.createElement("span",null,e.Shift.Name)}},{title:"Month",field:"DatetimeBegin",render:function(e){return r.a.createElement("span",null,new Date(e.DatetimeBegin).toLocaleString("en-GB",{year:"numeric",month:"short"}))}},{title:"Date Call",field:"DatetimeBegin",render:function(e){return r.a.createElement("span",null,new Date(e.DatetimeBegin).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric"}))}},{title:"Time Call",field:"DatetimeBegin",render:function(e){return r.a.createElement("span",null,new Date(e.DatetimeBegin).toLocaleString("en-GB",{hour:"numeric",minute:"numeric"}))}},{title:"Date Repair",field:"DatetimeRepair",render:function(e){return r.a.createElement("span",null,new Date(e.DatetimeRepair).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric"}))}},{title:"Time Repair",field:"DatetimeRepair",render:function(e){return r.a.createElement("span",null,new Date(e.DatetimeRepair).toLocaleString("en-GB",{hour:"numeric",minute:"numeric"}))}},{title:"Date End",field:"DatetimeEnd",render:function(e){return r.a.createElement("span",null,new Date(e.DatetimeEnd).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric"}))}},{title:"Time End",field:"DatetimeEnd",render:function(e){return r.a.createElement("span",null,new Date(e.DatetimeEnd).toLocaleString("en-GB",{hour:"numeric",minute:"numeric"}))}},{title:"Work Order",field:"WorkOrder"},{title:"System Order",field:"SystemObject"},{title:"System Fault",field:"SystemFault"},{title:"Cause Object",field:"CauseComponent"},{title:"Fault",field:"CauseFault"},{title:"Maintenance",field:"MaintenanceActivity",render:function(e){return r.a.createElement("span",null,e.MaintenanceActivity.Name)}},{title:"Reason",field:"BreakdownReason",render:function(e){return r.a.createElement("span",null,e.BreakdownReason.BRName)}},{title:"NOT",field:"NOT",render:function(e){return r.a.createElement("span",null,e.NOT?"Yes":"No")}},{title:"Breakdown Hour",render:function(e){return r.a.createElement(Xa.a,{value:(new Date(e.DatetimeEnd).getTime()-new Date(e.DatetimeBegin).getTime())/36e5,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"NOT Hour",render:function(e){return r.a.createElement(Xa.a,{value:e.NOT?e.NOTDetail.reduce((function(e,t){return e+(new Date(t.NOTDatetimeEnd).getTime()-new Date(t.NOTDatetimeBegin).getTime())/36e5}),0):0,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"Case",render:function(e){return r.a.createElement("span",null,(new Date(e.DatetimeEnd).getTime()-new Date(e.DatetimeBegin).getTime())/36e5>2?"A":(new Date(e.DatetimeEnd).getTime()-new Date(e.DatetimeBegin).getTime())/36e5<.5?"C":"B")}},{title:"Remarks",field:"Remarks",render:function(e){return r.a.createElement("span",null,e.Remarks)}},{title:"Operator",field:"LastUpdatedBy",render:function(e){return r.a.createElement("span",null,e.LastUpdatedBy)}},{title:"Last Updated",field:"LastUpdatedAt",render:function(e){return r.a.createElement("span",null,new Date(e.LastUpdatedAt).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}))}}],data:[],formData:null,currentDeleteData:null,formAction:"",openSnack:!1,snackMessage:"",snackClass:"",openForm:!1,openDialog:!1},a.breakdownModel=FF(gF),a.openForm=a.openForm.bind(Object(Pe.a)(a)),a.closeForm=a.closeForm.bind(Object(Pe.a)(a)),a.onSuccess=a.onSuccess.bind(Object(Pe.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initContainerList()}},{key:"initContainerList",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.awrap(EF.get("").then((function(t){!0===t.code&&e.setState({data:t.data})})));case 2:case"end":return t.stop()}}))}},{key:"openForm",value:function(e){var t,a=FF(e);void 0===e||null===e?(a=FF(this.breakdownModel),t="Add"):t="update",this.setState({formData:a,formOpen:!this.state.formOpen,formAction:t})}},{key:"closeForm",value:function(){this.setState({formData:null,formOpen:!1,formAction:""})}},{key:"onSuccess",value:function(e){var t=this,a=Object(je.a)(this.state.data);if(void 0!==e&&null!==e)if("Add"===this.state.formAction)a.push(e),this.setState({data:a,formOpen:!this.state.formOpen,formAction:"",currentRowData:null},(function(){return t.snackOpen("success","add")}));else{var n=a.find((function(e){return e._id===t.state.formData._id})),r=a.indexOf(n);a[r]=e,this.setState({data:a,formOpen:!this.state.formOpen,formAction:"",currentRowData:null},(function(){return t.snackOpen("success","update")}))}else this.snackOpen("error","server")}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{container:!0,direction:"column",justify:"center",wrap:"wrap",style:{margin:"20px 20px 10px 0px"}},r.a.createElement(be.a,{item:!0,xs:12},r.a.createElement(Ve.a,{title:"Activity",columns:this.state.columns,data:this.state.data,components:{Toolbar:function(t){return r.a.createElement("div",null,r.a.createElement(Le.MTableToolbar,t),r.a.createElement("div",{style:{padding:"0px 15px"}},r.a.createElement(bt.a,{edge:"start",color:"inherit",onClick:function(){return e.openForm(t.rowData)},"aria-label":"add"},r.a.createElement(wt.a,null))))}},actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.data,columns:e.state.columns,fileName:"Activities"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.initContainerList()}},{icon:"edit",tooltip:"Edit",onClick:function(t,a){return e.openForm(a)}},{icon:"delete",tooltip:"Delete",onClick:function(t,a){return e.dialogOpen(a)}}]})),r.a.createElement(be.a,{item:!0,container:!0,direction:"row",justify:"space-evenly",alignItems:"center",md:10,xs:12,sm:12,xl:10,lg:10},this.state.formOpen?r.a.createElement(wF,{formAction:this.state.formAction,formData:this.state.formData,formOpen:this.state.formOpen,onSuccess:this.onSuccess,closeForm:this.closeForm}):""),r.a.createElement(Be.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},className:this.state.alertClass,autoHideDuration:600,open:this.state.snackOpen,onClose:this.snackOpen,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.state.alertMessage)}),r.a.createElement(Ae.a,{open:this.state.dialogOpen,onClose:this.diaLogClose,TransitionComponent:this.DelTransition,keepMounted:!0,"aria-labelledby":""},r.a.createElement(Re.a,null," Are You Sure? "),r.a.createElement(_e.a,null,r.a.createElement(Ie.a,null,this.state.dialogMessage)),r.a.createElement(Me.a,null,r.a.createElement(he.a,{onClick:this.diaLogClose,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.onDelete,color:"primary"},"Delete"))))}}]),t}(r.a.Component),TF=(a(1055),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).handelChange=function(e,t){var n=Object(me.a)({},a.state.data);n[t]=e,a.setState({data:n})},a.getReport=function(){null!==a.state.data&&void 0!==a.state.data.Factory._id&&We("Production/Reports/NCData/".concat(a.state.data.Factory._id,"/").concat(new Date(a.state.beginDate).toDateString(),"/").concat(new Date(a.state.endDate).toDateString())).then((function(e){if(200===e.status&&"Succeed"===e.data.message){var t=e.data.data;a.setState({ncData:t})}else a.setState({ncData:[]})}))},a.setBegin=function(e){a.setState({beginDate:e})},a.setEnd=function(e){a.setState({endDate:e})},a.state={columns:[{title:"Factory",field:"Factory",render:function(e){return r.a.createElement("span",null,void 0===e.Factory?"":e.Factory.FctyCode)}},{title:"Date",field:"ProdDetail",render:function(e){return r.a.createElement("span",null,new Date(e.ProdDetail.Production.Date).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric"}))}},{title:"Shift",field:"Shift",render:function(e){return r.a.createElement("span",null,void 0===e.Shift?"":e.Shift.Name)}},{title:"Grade",field:"ProdDetail",render:function(e){return r.a.createElement("span",null,void 0===e.ProdDetail?"":e.ProdDetail.Grade.GradeName)}},{title:"NC Category",field:"NCCategory",render:function(e){return r.a.createElement("span",null,void 0===e.NCType?"":e.NCType.NCCategory.Name)}},{title:"NC Type",field:"NCType",render:function(e){return r.a.createElement("span",null,void 0===e.NCType?"":e.NCType.Name)}},{title:"Qty (kg)",field:"Quantity",initialEditValue:0,render:function(e){return r.a.createElement(Xa.a,{value:e.Quantity,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"Remarks",field:"Remarks"},{title:"Status",field:"Status",lookup:{},editable:"never"},{title:"Handled Qty (kg)",render:function(e){return void 0===e?"":r.a.createElement(Xa.a,{value:e.HandledQty,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})},editable:"never"},{title:"Balance Qty (kg)",render:function(e){return void 0===e?"":r.a.createElement(Xa.a,{value:e.Quantity-e.HandledQty,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})},editable:"never"}],data:null,beginDate:null,endDate:null,ncData:[]},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initStatusData()}},{key:"initStatusData",value:function(){var e=this;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:Oa("ncStatus.json").then((function(e){return e.data})).then((function(t){var a={};t.NCStatus.forEach((function(e){return a[e.Value]=e.Name}));var n=Object(je.a)(e.state.columns),r=n.findIndex((function(e){return"Status"===e.field}));n[r].lookup=a,e.setState({columns:n})}));case 1:case"end":return t.stop()}}))}},{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{style:{margin:"20px 0px 0px 0px"}},r.a.createElement(be.a,{item:!0,xs:12},r.a.createElement(x.a,{variant:"h5"},"NC Data")),r.a.createElement(be.a,{item:!0,xs:12},r.a.createElement(be.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center"},r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:3,lg:3},r.a.createElement(Hr,{selectedValue:null===this.state.data||void 0===this.state.data.Factory?"":this.state.data.Factory,propertyName:"Factory",formControl:{valid:!0,message:""},handleChange:this.handelChange,required:!1})),r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:3,lg:3},r.a.createElement(ya.a,{style:{width:"100%",marginTop:-12},margin:"dense"},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Tw,{autoOk:!0,value:[],placeholder:"Select a date range",onChange:function(t){e.setBegin(t.begin),e.setEnd(t.end)}})))),r.a.createElement(be.a,{item:!0,xs:3},r.a.createElement(fo.a,{variant:"extended",onClick:this.getReport},"Go")))),r.a.createElement(be.a,{item:!0,xs:12,style:{marginTop:15}},r.a.createElement(Ve.a,{title:"",columns:this.state.columns,data:this.state.ncData,actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.ncData,columns:e.state.columns,fileName:"NC Data"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.getReport()}}],options:{search:!1}})))}}]),t}(r.a.Component)),NF=(a(1056),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).handelChange=function(e,t){var n=Object(me.a)({},a.state.data);n[t]=e,a.setState({data:n})},a.getReport=function(){null!==a.state.data&&void 0!==a.state.data.Factory._id&&We("Production/Reports/NCReworkData/".concat(a.state.data.Factory._id,"/").concat(new Date(a.state.beginDate).toDateString(),"/").concat(new Date(a.state.endDate).toDateString())).then((function(e){if(200===e.status&&"Succeed"===e.data.message){var t=e.data.data;a.setState({ncReworkData:t})}else a.setState({ncReworkData:[]})}))},a.setBegin=function(e){a.setState({beginDate:e})},a.setEnd=function(e){a.setState({endDate:e})},a.state={columns:[{title:"Factory",field:"Factory",render:function(e){return r.a.createElement("span",null,void 0===e.Factory?"":e.Factory.FctyCode)}},{title:"Date",field:"ProdDetail",render:function(e){return r.a.createElement("span",null,new Date(e.Date).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric"}))}},{title:"Shift",field:"Shift",render:function(e){return r.a.createElement("span",null,void 0===e.Shift?"":e.Shift.Name)}},{title:"Grade",field:"ProdDetail",render:function(e){return r.a.createElement("span",null,null===e.Grade||void 0===e.Grade?"Block Rubber":e.Grade.GradeName)}},{title:"Qty (kg)",field:"Quantity",initialEditValue:0,render:function(e){return r.a.createElement(Xa.a,{value:e.Quantity,displayType:"text",decimalScale:2,thousandSeparator:!0,fixedDecimalScale:!0})}},{title:"Remarks",field:"Remarks"}],data:null,beginDate:null,endDate:null,ncReworkData:[]},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(be.a,{style:{margin:"20px 0px 0px 0px"}},r.a.createElement(be.a,{item:!0,xs:12},r.a.createElement(x.a,{variant:"h5"},"Rework Data")),r.a.createElement(be.a,{item:!0,xs:12},r.a.createElement(be.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center"},r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:3,lg:3},r.a.createElement(Hr,{selectedValue:null===this.state.data||void 0===this.state.data.Factory?"":this.state.data.Factory,propertyName:"Factory",formControl:{valid:!0,message:""},handleChange:this.handelChange,required:!1})),r.a.createElement(be.a,{item:!0,style:{padding:10},xs:12,sm:6,md:3,lg:3},r.a.createElement(ya.a,{style:{width:"100%",marginTop:-12},margin:"dense"},r.a.createElement(Ca.a,{utils:va.default},r.a.createElement(Tw,{autoOk:!0,value:[],placeholder:"Select a date range",onChange:function(t){e.setBegin(t.begin),e.setEnd(t.end)}})))),r.a.createElement(be.a,{item:!0,xs:3},r.a.createElement(fo.a,{variant:"extended",onClick:this.getReport},"Go")))),r.a.createElement(be.a,{item:!0,xs:12,style:{marginTop:15}},r.a.createElement(Ve.a,{title:"",columns:this.state.columns,data:this.state.ncReworkData,actions:[{icon:function(){return r.a.createElement(dt,{data:e.state.ncReworkData,columns:e.state.columns,fileName:"NC Data"})},isFreeAction:!0},{icon:"refresh",tooltip:"Refresh Data",isFreeAction:!0,onClick:function(){e.getReport()}}],options:{search:!1}})))}}]),t}(r.a.Component)),jF=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={writers:[],reportdata:[]},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){return l.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}))}},{key:"render",value:function(){return r.a.createElement(f.a,null,r.a.createElement(h.d,null,r.a.createElement(h.b,{exact:!0,path:"/Register",render:function(){return r.a.createElement(Ne,null)}}),r.a.createElement(de,null,r.a.createElement(h.b,{exact:!0,path:"/",render:function(){return r.a.createElement(la,null)}}),r.a.createElement(h.b,{path:"/Home/Basic/Country",render:function(){return r.a.createElement(on,null)}}),r.a.createElement(h.b,{path:"/Home/Basic/Buyer",render:function(){return r.a.createElement(Pa,null)}}),r.a.createElement(h.b,{path:"/Home/Basic/Cluster",render:function(){return r.a.createElement(qa,null)}}),r.a.createElement(h.b,{path:"/Home/Basic/Factory",render:function(){return r.a.createElement(nn,null)}}),r.a.createElement(h.b,{path:"/Home/Basic/Process",render:function(){return r.a.createElement(un,null)}}),r.a.createElement(h.b,{path:"/Home/Basic/SubProcess",render:function(){return r.a.createElement(fn,null)}})," ",r.a.createElement(h.b,{path:"/Home/Basic/Tools",render:function(){return r.a.createElement(mt,null)}}),r.a.createElement(h.b,{path:"/Home/Basic/PackingType",render:function(){return r.a.createElement(ft,null)}}),r.a.createElement(h.b,{path:"/Home/Basic/ContaminationType",render:function(){return r.a.createElement(gt,null)}}),r.a.createElement(h.b,{path:"/Home/Basic/CountryGrade",render:function(){return r.a.createElement(xn,null)}}),r.a.createElement(h.b,{path:"/Home/Basic/NCCategory",render:function(){return r.a.createElement(Mn,null)}}),r.a.createElement(h.b,{path:"/Home/Basic/NCType",render:function(){return r.a.createElement(Bn,null)}}),r.a.createElement(h.b,{path:"/Home/Basic/ProductGrade",render:function(){return r.a.createElement(Jn,null)}}),r.a.createElement(h.b,{path:"/Home/Basic/NCHandling",render:function(){return r.a.createElement(Xn,null)}}),r.a.createElement(h.b,{path:"/Home/Basic/QPRReason",render:function(){return r.a.createElement(er,null)}}),r.a.createElement(h.b,{path:"/Home/Basic/MachineGroup",render:function(){return r.a.createElement(ir,null)}}),r.a.createElement(h.b,{path:"/Home/Basic/Machine",render:function(){return r.a.createElement(yr,null)}}),r.a.createElement(h.b,{path:"/Home/Basic/MachineBreakdownReason",render:function(){return r.a.createElement(Fr,null)}}),r.a.createElement(h.b,{path:"/Home/Basic/WasteWaterStandard",render:function(){return r.a.createElement(Mr,null)}}),r.a.createElement(h.b,{path:"/Home/Basic/EnergyStandard",render:function(){return r.a.createElement(Br,null)}}),r.a.createElement(h.b,{path:"/Home/Basic/ChemicalList",render:function(){return r.a.createElement(lu,null)}}),r.a.createElement(h.b,{path:"/Home/Basic/TrainingType",render:function(){return r.a.createElement(Iu,null)}}),r.a.createElement(h.b,{path:"/Home/CheckSheet/Basic/StuffingDocumentGroup",render:function(){return r.a.createElement(Bd,null)}}),r.a.createElement(h.b,{path:"/Home/CheckSheet/Basic/StuffingDocument",render:function(){return r.a.createElement(Jd,null)}}),r.a.createElement(h.b,{path:"/Home/CheckSheet/Basic/ProcessLine",render:function(){return r.a.createElement(dp,null)}}),r.a.createElement(h.b,{path:"/Home/CheckSheet/Basic/SizeConfiguration",render:function(){return r.a.createElement(Fp,null)}}),r.a.createElement(h.b,{path:"/Home/CheckSheet/Basic/ContaminationConfiguration",render:function(){return r.a.createElement(Gp,null)}}),r.a.createElement(h.b,{path:"/Home/CheckSheet/Basic/WaterQualityConfiguration",render:function(){return r.a.createElement(bf,null)}}),r.a.createElement(h.b,{path:"/Home/CheckSheet/Basic/FactoryToolConfiguration",render:function(){return r.a.createElement(Bf,null)}}),r.a.createElement(h.b,{path:"/Home/CheckSheet/Basic/StdWeightConfiguration",render:function(){return r.a.createElement(gE,null)}}),r.a.createElement(h.b,{path:"/Home/CheckSheet/Transaction/CrumbSizeCheck",render:function(){return r.a.createElement(PE,null)}}),r.a.createElement(h.b,{path:"/Home/CheckSheet/Transaction/BlanketThicknessCheck",render:function(){return r.a.createElement(ZE,null)}}),r.a.createElement(h.b,{path:"/Home/CheckSheet/Transaction/ContaminationCheck",render:function(){return r.a.createElement(ab,null)}}),r.a.createElement(h.b,{path:"/Home/CheckSheet/Transaction/TrolleyFilling",render:function(){return r.a.createElement(Ib,null)}}),r.a.createElement(h.b,{path:"/Home/CheckSheet/Transaction/TrolleyOut",render:function(){return r.a.createElement(FS,null)}}),r.a.createElement(h.b,{path:"/Home/CheckSheet/Transaction/FactoryToolCheck",render:function(){return r.a.createElement(Cb,null)}}),r.a.createElement(h.b,{path:"/Home/CheckSheet/Transaction/MetalDetector",render:function(){return r.a.createElement(BS,null)}}),r.a.createElement(h.b,{path:"/Home/CheckSheet/Transaction/WaterQualityCheck",render:function(){return r.a.createElement(aO,null)}}),r.a.createElement(h.b,{path:"/Home/CheckSheet/Transaction/BaleCheck",render:function(){return r.a.createElement(yO,null)}}),r.a.createElement(h.b,{path:"/Home/CheckSheet/Transaction/TrolleyWashing",render:function(){return r.a.createElement(xO,null)}}),r.a.createElement(h.b,{path:"/Home/CheckSheet/Transaction/WeightScaleCheck",render:function(){return r.a.createElement(qO,null)}}),r.a.createElement(h.b,{path:"/Home/CheckSheet/Transaction/BlanketQualityCheck",render:function(){return r.a.createElement(ZO,null)}}),r.a.createElement(h.b,{path:"/Home/CheckSheet/Transaction/NCMetal",render:function(){return r.a.createElement(hk,null)}}),r.a.createElement(h.b,{path:"/Home/CheckSheet/Transaction/ApronDryer",render:function(){return r.a.createElement(sk,null)}}),r.a.createElement(h.b,{path:"/Home/CheckSheet/Transaction/StuffingContainer",render:function(){return r.a.createElement(Oi,null)}}),r.a.createElement(h.b,{path:"/Home/CheckSheet/Transaction/StuffingLoosebale",render:function(){return r.a.createElement(xk,null)}}),r.a.createElement(h.b,{path:"/Home/CheckSheet/Transaction/StuffingTruck",render:function(){return r.a.createElement(Rk,null)}}),r.a.createElement(h.b,{path:"/Home/CheckSheet/Transaction/StuffingBarge",render:function(){return r.a.createElement(Qk,null)}}),r.a.createElement(h.b,{path:"/Home/CheckSheet/Transaction/StuffingContainerDynamic",render:function(){return r.a.createElement(Fi,null)}}),r.a.createElement(h.b,{path:"/Home/CheckSheet/Tools/TrolleyFillingUpload",render:function(){return r.a.createElement(yk,null)}}),r.a.createElement(h.b,{path:"/Home/CheckSheet/Tools/TrolleyWashingUpload",render:function(){return r.a.createElement(Ck,null)}}),r.a.createElement(h.b,{path:"/Home/CheckSheet/Tools/BaleCheckUpload",render:function(){return r.a.createElement(hF,null)}}),r.a.createElement(h.b,{path:"/Home/CheckSheet/Report/CrumbGraph",render:function(){return r.a.createElement(Zw,null)}}),r.a.createElement(h.b,{path:"/Home/CheckSheet/Report/BlanketGraph",render:function(){return r.a.createElement(rw,null)}}),r.a.createElement(h.b,{path:"/Home/CheckSheet/Report/TrolleyFillingReport",render:function(){return r.a.createElement(bw,null)}}),r.a.createElement(h.b,{path:"/Home/CheckSheet/Report/ToolCheck",render:function(){return r.a.createElement(Sw,null)}}),r.a.createElement(h.b,{path:"/Home/CheckSheet/Report/MetalDetectorVerification",render:function(){return r.a.createElement(Nw,null)}}),r.a.createElement(h.b,{path:"/Home/CheckSheet/Report/TrolleyWashing",render:function(){return r.a.createElement(Mw,null)}}),r.a.createElement(h.b,{path:"/Home/CheckSheet/Report/BlanketAnalysis",render:function(){return r.a.createElement(_w,null)}}),r.a.createElement(h.b,{path:"/Home/CheckSheet/Report/BaleCheck",render:function(){return r.a.createElement(Aw,null)}}),r.a.createElement(h.b,{path:"/Home/Quality/MonthlyCPK",render:function(){return r.a.createElement(eo,null)}}),r.a.createElement(h.b,{path:"/Home/Quality/QualityProblemReport",render:function(){return r.a.createElement(fw,null)}}),r.a.createElement(h.b,{path:"/Home/Quality/ProcessChange",render:function(){return r.a.createElement(jo,null)}}),r.a.createElement(h.b,{path:"/Home/Basic-Factory/Factory Machine List",render:function(){return r.a.createElement(Yr,null)}}),r.a.createElement(h.b,{path:"/Home/Basic-Factory/Factory Basic Data",render:function(){return r.a.createElement(Go,null)}}),r.a.createElement(h.b,{path:"/Home/Basic-Factory/Factory Energy Conversion",render:function(){return r.a.createElement(Jo,null)}}),r.a.createElement(h.b,{path:"/Home/Basic-Factory/Factory Plan Working Days",render:function(){return r.a.createElement(ms,null)}}),r.a.createElement(h.b,{path:"/Home/Basic-Factory/Factory Trolley",render:function(){return r.a.createElement(Os,null)}}),r.a.createElement(h.b,{path:"/Home/Basic-Factory/Shift",render:function(){return r.a.createElement(El,null)}}),r.a.createElement(h.b,{path:"/Home/Basic-Factory/Maintenance Indicator",render:function(){return r.a.createElement(Es,null)}}),r.a.createElement(h.b,{path:"/Home/Basic-Factory/MandatoryDocument",render:function(){return r.a.createElement(Us,null)}}),r.a.createElement(h.b,{path:"/Home/Production Management/Transaction/Daily Production",render:function(){return r.a.createElement(Ql,null)}}),r.a.createElement(h.b,{path:"/Home/Production Management/Transaction/NC",render:function(){return r.a.createElement(ec,null)}}),r.a.createElement(h.b,{path:"/Home/Production Management/Transaction/NC Rework",render:function(){return r.a.createElement(lc,null)}}),r.a.createElement(h.b,{path:"/Home/Production Management/Transaction/Energy Consumption",render:function(){return r.a.createElement(vc,null)}}),r.a.createElement(h.b,{path:"/Home/Production Management/Transaction/Manning",render:function(){return r.a.createElement(xc,null)}}),r.a.createElement(h.b,{path:"/Home/Production Management/Transaction/Dryer SPC Data",render:function(){return r.a.createElement(Uc,null)}}),r.a.createElement(h.b,{path:"/Home/Production Management/Report/NCData",render:function(){return r.a.createElement(TF,null)}}),r.a.createElement(h.b,{path:"/Home/Production Management/Report/ReworkData",render:function(){return r.a.createElement(NF,null)}}),r.a.createElement(h.b,{path:"/Home/EHS/WaterConsumption",render:function(){return r.a.createElement(Qu,null)}}),r.a.createElement(h.b,{path:"/Home/EHS/EffluentTestResult",render:function(){return r.a.createElement(ad,null)}}),r.a.createElement(h.b,{path:"/Home/EHS/WasteManagement",render:function(){return r.a.createElement(md,null)}}),r.a.createElement(h.b,{path:"/Home/EHS/ChemicalConsumption",render:function(){return r.a.createElement(Pd,null)}}),r.a.createElement(h.b,{path:"/Home/EHS/FireIncident",render:function(){return r.a.createElement(Pm,null)}}),r.a.createElement(h.b,{path:"/Home/EHS/SafetyIncident",render:function(){return r.a.createElement(np,null)}}),r.a.createElement(h.b,{path:"/Home/EHS/MonthlyEHSMetrics",render:function(){return r.a.createElement(tw,null)}}),r.a.createElement(h.b,{path:"/Home/EHS/TrainingHours",render:function(){return r.a.createElement(cm,null)}}),r.a.createElement(h.b,{path:"/Home/EHS/EHSPerformance",render:function(){return r.a.createElement(Vw,null)}}),r.a.createElement(h.b,{path:"/Home/RawMaterial/Basic/StorageLocation",render:function(){return r.a.createElement(Xp,null)}}),r.a.createElement(h.b,{path:"/Home/RawMaterial/Basic/HSMaster",render:function(){return r.a.createElement(mf,null)}}),r.a.createElement(h.b,{path:"/Home/RawMaterial/Basic/SourceArea",render:function(){return r.a.createElement(ag,null)}}),r.a.createElement(h.b,{path:"/Home/RawMaterial/Basic/Village",render:function(){return r.a.createElement(Pg,null)}}),r.a.createElement(h.b,{path:"/Home/RawMaterial/Basic/RMType",render:function(){return r.a.createElement(Yf,null)}}),r.a.createElement(h.b,{path:"/Home/RawMaterial/Basic/RMGrade",render:function(){return r.a.createElement(dh,null)}}),r.a.createElement(h.b,{path:"/Home/RawMaterial/Basic/PurchasingPersonnel",render:function(){return r.a.createElement(kh,null)}}),r.a.createElement(h.b,{path:"/Home/RawMaterial/Basic/RLot",render:function(){return r.a.createElement(Lh,null)}}),r.a.createElement(h.b,{path:"/Home/RawMaterial/Basic/Supplier",render:function(){return r.a.createElement(gg,null)}}),r.a.createElement(h.b,{path:"/Home/RawMaterial/Transaction/Procurement",render:function(){return r.a.createElement(py,null)}}),r.a.createElement(h.b,{path:"/Home/RawMaterial/Transaction/RLotAllocation",render:function(){return r.a.createElement(Qg,null)}}),r.a.createElement(h.b,{path:"/Home/RawMaterial/Transaction/TStoHS",render:function(){return r.a.createElement(Py,null)}}),r.a.createElement(h.b,{path:"/Home/RawMaterial/Transaction/TSWetProcess",render:function(){return r.a.createElement(Jy,null)}}),r.a.createElement(h.b,{path:"/Home/RawMaterial/Transaction/TSDryProcess",render:function(){return r.a.createElement(uv,null)}}),r.a.createElement(h.b,{path:"/Home/RawMaterial/Transaction/CloseStorage",render:function(){return r.a.createElement(yv,null)}}),r.a.createElement(h.b,{path:"/Home/RawMaterial/Transaction/CloseWB",render:function(){return r.a.createElement(Fv,null)}}),r.a.createElement(h.b,{path:"/Home/RawMaterial/Transaction/CloseHS",render:function(){return r.a.createElement(Ov,null)}}),r.a.createElement(h.b,{path:"/Home/RawMaterial/Report/MapArea",render:function(){return r.a.createElement(Iv,null)}}),r.a.createElement(h.b,{path:"/Home/RawMaterial/Report/DataEntryProgress",render:function(){return r.a.createElement(Bw,null)}}),r.a.createElement(h.b,{path:"/Home/FinishedGood/ContainerList",render:function(){return r.a.createElement(fl,null)}}),r.a.createElement(h.b,{path:"/Home/FinishedGood/Basic/Destination",render:function(){return r.a.createElement(qb,null)}}),r.a.createElement(h.b,{path:"/Home/FinishedGood/Basic/FGBuyerApproval",render:function(){return r.a.createElement(VC,null)}}),r.a.createElement(h.b,{path:"/Home/FinishedGood/Basic/Broker",render:function(){return r.a.createElement(_i,null)}}),r.a.createElement(h.b,{path:"/Home/FinishedGood/Order/Contract",render:function(){return r.a.createElement(Yi,null)}}),r.a.createElement(h.b,{path:"/Home/FinishedGoods/Order/ShippingInstruction",render:function(){return r.a.createElement(xu,null)}}),r.a.createElement(h.b,{path:"/Home/FinishedGood/Order/ContainerList",render:function(){return r.a.createElement(fl,null)}}),r.a.createElement(h.b,{path:"/Home/FinishedGood/Processing/CreatePallet",render:function(){return r.a.createElement(Hv,null)}}),r.a.createElement(h.b,{path:"/Home/FinishedGood/Processing/PalletReview",render:function(){return r.a.createElement(oC,null)}}),r.a.createElement(h.b,{path:"/Home/FinishedGood/Processing/CreateBatchPallet",render:function(){return r.a.createElement(mC,null)}}),r.a.createElement(h.b,{path:"/Home/FinishedGood/Processing/TSToWarehouse",render:function(){return r.a.createElement(FC,null)}}),r.a.createElement(h.b,{path:"/Home/FinishedGood/Processing/TestResult",render:function(){return r.a.createElement(YC,null)}}),r.a.createElement(h.b,{path:"/Home/FinishedGood/Picking/AllocationToLot",render:function(){return r.a.createElement(cD,null)}}),r.a.createElement(h.b,{path:"/Home/FinishedGood/Picking/AllocationToSI",render:function(){return r.a.createElement(vD,null)}}),r.a.createElement(h.b,{path:"/Home/FinishedGood/Picking/QrGenerator",render:function(){return r.a.createElement(Pw,null)}}),r.a.createElement(h.b,{path:"/Home/FinishedGood/Picking/Shipping",render:function(){return r.a.createElement(oS,null)}}),r.a.createElement(h.b,{path:"/Home/FinishedGood/Picking/DeletePicking",render:function(){return r.a.createElement(pS,null)}}),r.a.createElement(h.b,{path:"/Home/FinishedGood/Report/SIControl",render:function(){return r.a.createElement(qw,null)}}),r.a.createElement(h.b,{path:"/Home/FinishedGood/Report/StockPosition",render:function(){return r.a.createElement(Gw,null)}}),r.a.createElement(h.b,{path:"/Home/FinishedGood/Report/DataEntryProgress",render:function(){return r.a.createElement(Uw,null)}}),r.a.createElement(h.b,{path:"/Home/FinishedGood/Report/Traceability",render:function(){return r.a.createElement(Yw,null)}}),r.a.createElement(h.b,{path:"/Home/FinishedGood/Report/Container",render:function(){return r.a.createElement(Kw,null)}}),r.a.createElement(h.b,{path:"/Home/FinishedGood/Report/Production",render:function(){return r.a.createElement(Xw,null)}}),r.a.createElement(h.b,{path:"/Home/FinishedGood/Processing/TestResultUpload",render:function(){return r.a.createElement(bD,null)}}),r.a.createElement(h.b,{path:"/Home/Maintenance/Basic/Maintenance Activity",render:function(){return r.a.createElement(FD,null)}}),r.a.createElement(h.b,{path:"/Home/Maintenance/Basic/Maintenance Personnel",render:function(){return r.a.createElement(ID,null)}}),r.a.createElement(h.b,{path:"/Home/Maintenance/Transaction/Activity",render:function(){return r.a.createElement(xF,null)}}),r.a.createElement(h.b,{path:"/Home/SetUp/EmailProtocol",render:function(){return r.a.createElement(nE,null)}}),r.a.createElement(h.b,{path:"/Home/SetUp/DisplayConfiguration",render:function(){return r.a.createElement(HD,null)}}),r.a.createElement(h.b,{path:"/Home/SetUp/Numbering",render:function(){return r.a.createElement(kS,null)}}),r.a.createElement(h.b,{path:"/Home/Report/Bar",render:function(){return r.a.createElement(nF,null)}}),r.a.createElement(h.b,{path:"/Home/Report/Radar",render:function(){return r.a.createElement(iF,null)}}),r.a.createElement(h.b,{path:"/Home/Report/Pie",render:function(){return r.a.createElement(cF,null)}}),r.a.createElement(h.b,{path:"/Home/Report/Doughnut",render:function(){return r.a.createElement(dF,null)}}),r.a.createElement(h.b,{path:"/Home/Report/Polar",render:function(){return r.a.createElement(pF,null)}}),r.a.createElement(h.b,{path:"/Home/Report/Line",render:function(){return r.a.createElement(oF,null)}}),r.a.createElement(h.b,{path:"/Home/Test",render:function(){return r.a.createElement(tF,null)}})),r.a.createElement(h.b,{render:function(){return r.a.createElement(g,null)}})))}}]),t}(n.Component),PF=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function AF(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}_mdsp.init({title:"HALCYON",appId:"_mdspcontent",appInfoPath:"app-info.json"}),s.a.render(r.a.createElement(jF,null),document.getElementById("_mdspcontent")),function(e){if("serviceWorker"in navigator){if(new URL("/HDCDEMO1",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/HDCDEMO1","/service-worker.js");PF?(!function(e,t){fetch(e).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):AF(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):AF(t,e)}))}}()}]),[[486,1,2]]]);
//# sourceMappingURL=main.53c113fe.chunk.js.map